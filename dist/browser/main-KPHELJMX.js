import{a as JE,b as Yd,c as ZE,d as XE,e as r_,f as Oc}from"./chunk-HCJFOUJG.js";import"./chunk-VKYYVJIS.js";import{A as yt,B as rs,C as zi,D as Zd,E as Ac,H as rD,I as Xd,J as eh,K as ai,L as on,a as Y,b as Ee,c as e_,d as E,e as eD,i as t_,j as tD,k as Mc,q as n_,r as Jd,s as nD,t as iD,v as i_}from"./chunk-7UO3AAGR.js";function _F(n,t){return Object.is(n,t)}var Yt=null,Rc=!1,th=1,Er=Symbol("SIGNAL");function qe(n){let t=Yt;return Yt=n,t}function yF(){return Rc}var nh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function s_(n){if(Rc)throw new Error("");if(Yt===null)return;Yt.consumerOnSignalRead(n);let t=Yt.nextProducerIndex++;if(ba(Yt),t<Yt.producerNode.length&&Yt.producerNode[t]!==n&&Pc(Yt)){let e=Yt.producerNode[t];rh(e,Yt.producerIndexOfThis[t])}Yt.producerNode[t]!==n&&(Yt.producerNode[t]=n,Yt.producerIndexOfThis[t]=Pc(Yt)?lD(n,Yt,t):0),Yt.producerLastReadVersion[t]=n.version}function vF(){th++}function wF(n){if(!(Pc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===th)){if(!n.producerMustRecompute(n)&&!ih(n)){n.dirty=!1,n.lastCleanEpoch=th;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=th}}function oD(n){if(n.liveConsumerNode===void 0)return;let t=Rc;Rc=!0;try{for(let e of n.liveConsumerNode)e.dirty||aD(e)}finally{Rc=t}}function sD(){return Yt?.consumerAllowSignalWrites!==!1}function aD(n){n.dirty=!0,oD(n),n.consumerMarkedDirty?.(n)}function a_(n){return n&&(n.nextProducerIndex=0),qe(n)}function l_(n,t){if(qe(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Pc(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)rh(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ih(n){ba(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(wF(e),i!==e.version))return!0}return!1}function c_(n){if(ba(n),Pc(n))for(let t=0;t<n.producerNode.length;t++)rh(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function lD(n,t,e){if(cD(n),ba(n),n.liveConsumerNode.length===0)for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=lD(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function rh(n,t){if(cD(n),ba(n),n.liveConsumerNode.length===1)for(let i=0;i<n.producerNode.length;i++)rh(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];ba(r),r.producerIndexOfThis[i]=t}}function Pc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ba(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function cD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function bF(){throw new Error}var uD=bF;function dD(){uD()}function hD(n){uD=n}var CF=null;function fD(n){let t=Object.create(u_);t.value=n;let e=()=>(s_(t),t.value);return e[Er]=t,e}function oh(n,t){sD()||dD(),n.equal(n.value,t)||(n.value=t,EF(n))}function pD(n,t){sD()||dD(),oh(n,t(n.value))}var u_=Ee(Y({},nh),{equal:_F,value:void 0});function EF(n){n.version++,vF(),oD(n),CF?.()}function mD(n,t,e){let i=Object.create(DF);e&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=t;let r=l=>{i.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function s(l){o(l)||(c_(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=o_)}let a=()=>{if(i.fn===null)return;if(yF())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!ih(i))return;i.hasRun=!0;let l=a_(i);try{i.cleanupFn(),i.cleanupFn=o_,i.fn(r)}finally{l_(i,l)}};return i.ref={notify:()=>aD(i),run:a,cleanup:()=>i.cleanupFn(),destroy:()=>s(i),[Er]:i},i.ref}var o_=()=>{},DF=Ee(Y({},nh),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:o_});function _e(n){return typeof n=="function"}function Ca(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var sh=Ca(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function os(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var vt=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(_e(i))try{i()}catch(o){t=o instanceof sh?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{gD(o)}catch(s){t=t??[],s instanceof sh?t=[...t,...s.errors]:t.push(s)}}if(t)throw new sh(t)}}add(t){var e;if(t&&t!==this)if(this.closed)gD(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&os(e,t)}remove(t){let{_finalizers:e}=this;e&&os(e,t),t instanceof n&&t._removeParent(this)}};vt.EMPTY=(()=>{let n=new vt;return n.closed=!0,n})();var d_=vt.EMPTY;function ah(n){return n instanceof vt||n&&"closed"in n&&_e(n.remove)&&_e(n.add)&&_e(n.unsubscribe)}function gD(n){_e(n)?n():n.unsubscribe()}var Si={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ea={setTimeout(n,t,...e){let{delegate:i}=Ea;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Ea;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function lh(n){Ea.setTimeout(()=>{let{onUnhandledError:t}=Si;if(t)t(n);else throw n})}function ss(){}var _D=h_("C",void 0,void 0);function yD(n){return h_("E",void 0,n)}function vD(n){return h_("N",n,void 0)}function h_(n,t,e){return{kind:n,value:t,error:e}}var as=null;function Da(n){if(Si.useDeprecatedSynchronousErrorHandling){let t=!as;if(t&&(as={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=as;if(as=null,e)throw i}}else n()}function wD(n){Si.useDeprecatedSynchronousErrorHandling&&as&&(as.errorThrown=!0,as.error=n)}var ls=class extends vt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ah(t)&&t.add(this)):this.destination=TF}static create(t,e,i){return new Dr(t,e,i)}next(t){this.isStopped?p_(vD(t),this):this._next(t)}error(t){this.isStopped?p_(yD(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?p_(_D,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},SF=Function.prototype.bind;function f_(n,t){return SF.call(n,t)}var m_=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){ch(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){ch(i)}else ch(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){ch(e)}}},Dr=class extends ls{constructor(t,e,i){super();let r;if(_e(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&Si.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&f_(t.next,o),error:t.error&&f_(t.error,o),complete:t.complete&&f_(t.complete,o)}):r=t}this.destination=new m_(r)}};function ch(n){Si.useDeprecatedSynchronousErrorHandling?wD(n):lh(n)}function IF(n){throw n}function p_(n,t){let{onStoppedNotification:e}=Si;e&&Ea.setTimeout(()=>e(n,t))}var TF={closed:!0,next:ss,error:IF,complete:ss};var Sa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function sn(n){return n}function g_(...n){return __(n)}function __(n){return n.length===0?sn:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var ye=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=MF(e)?e:new Dr(e,i,r);return Da(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=bD(i),new i((r,o)=>{let s=new Dr({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Sa](){return this}pipe(...e){return __(e)(this)}toPromise(e){return e=bD(e),new e((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=t=>new n(t),n})();function bD(n){var t;return(t=n??Si.Promise)!==null&&t!==void 0?t:Promise}function xF(n){return n&&_e(n.next)&&_e(n.error)&&_e(n.complete)}function MF(n){return n&&n instanceof ls||xF(n)&&ah(n)}function y_(n){return _e(n?.lift)}function De(n){return t=>{if(y_(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function we(n,t,e,i,r){return new v_(n,t,e,i,r)}var v_=class extends ls{constructor(t,e,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Ia(){return De((n,t)=>{let e=null;n._refCount++;let i=we(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var Ta=class extends ye{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,y_(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new vt;let e=this.getSubject();t.add(this.source.subscribe(we(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=vt.EMPTY)}return t}refCount(){return Ia()(this)}};var CD=Ca(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new uh(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new CD}next(e){Da(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Da(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Da(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?d_:(this.currentObservers=null,o.push(e),new vt(()=>{this.currentObservers=null,os(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new ye;return e.source=this,e}}return n.create=(t,e)=>new uh(t,e),n})(),uh=class extends Le{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:d_}};var wt=class extends Le{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var Nc={now(){return(Nc.delegate||Date).now()},delegate:void 0};var dh=class extends Le{constructor(t=1/0,e=1/0,i=Nc){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=e.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var hh=class extends vt{constructor(t,e){super()}schedule(t,e=0){return this}};var Fc={setInterval(n,t,...e){let{delegate:i}=Fc;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Fc;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var xa=class extends hh{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,i=0){return Fc.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Fc.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,os(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var Ma=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};Ma.now=Nc.now;var Aa=class extends Ma{constructor(t,e=Ma.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var no=new Aa(xa),w_=no;var fh=class extends xa{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(t,e,i):(t.flush(this),0)}};var ph=class extends Aa{};var b_=new ph(fh);var qt=new ye(n=>n.complete());function mh(n){return n&&_e(n.schedule)}function C_(n){return n[n.length-1]}function io(n){return _e(C_(n))?n.pop():void 0}function qi(n){return mh(C_(n))?n.pop():void 0}function ED(n,t){return typeof C_(n)=="number"?n.pop():t}var Oa=n=>n&&typeof n.length=="number"&&typeof n!="function";function gh(n){return _e(n?.then)}function _h(n){return _e(n[Sa])}function yh(n){return Symbol.asyncIterator&&_e(n?.[Symbol.asyncIterator])}function vh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function AF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wh=AF();function bh(n){return _e(n?.[wh])}function Ch(n){return ZE(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield Yd(e.read());if(r)return yield Yd(void 0);yield yield Yd(i)}}finally{e.releaseLock()}})}function Eh(n){return _e(n?.getReader)}function $e(n){if(n instanceof ye)return n;if(n!=null){if(_h(n))return OF(n);if(Oa(n))return RF(n);if(gh(n))return PF(n);if(yh(n))return DD(n);if(bh(n))return NF(n);if(Eh(n))return FF(n)}throw vh(n)}function OF(n){return new ye(t=>{let e=n[Sa]();if(_e(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function RF(n){return new ye(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function PF(n){return new ye(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,lh)})}function NF(n){return new ye(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function DD(n){return new ye(t=>{kF(n,t).catch(e=>t.error(e))})}function FF(n){return DD(Ch(n))}function kF(n,t){var e,i,r,o;return JE(this,void 0,void 0,function*(){try{for(e=XE(n);i=yield e.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})}function Pn(n,t,e,i=0,r=!1){let o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Sn(n,t=0){return De((e,i)=>{e.subscribe(we(i,r=>Pn(i,n,()=>i.next(r),t),()=>Pn(i,n,()=>i.complete(),t),r=>Pn(i,n,()=>i.error(r),t)))})}function Ii(n,t=0){return De((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function SD(n,t){return $e(n).pipe(Ii(t),Sn(t))}function ID(n,t){return $e(n).pipe(Ii(t),Sn(t))}function TD(n,t){return new ye(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function xD(n,t){return new ye(e=>{let i;return Pn(e,t,()=>{i=n[wh](),Pn(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>_e(i?.return)&&i.return()})}function Dh(n,t){if(!n)throw new Error("Iterable cannot be null");return new ye(e=>{Pn(e,t,()=>{let i=n[Symbol.asyncIterator]();Pn(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function MD(n,t){return Dh(Ch(n),t)}function AD(n,t){if(n!=null){if(_h(n))return SD(n,t);if(Oa(n))return TD(n,t);if(gh(n))return ID(n,t);if(yh(n))return Dh(n,t);if(bh(n))return xD(n,t);if(Eh(n))return MD(n,t)}throw vh(n)}function Be(n,t){return t?AD(n,t):$e(n)}function ce(...n){let t=qi(n);return Be(n,t)}function Ra(n,t){let e=_e(n)?n:()=>n,i=r=>r.error(e());return new ye(t?r=>t.schedule(i,0,r):i)}function E_(n){return!!n&&(n instanceof ye||_e(n.lift)&&_e(n.subscribe))}var Ti=Ca(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Nn(n,t){let e=typeof t=="object";return new Promise((i,r)=>{let o=!1,s;n.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):e?i(t.defaultValue):r(new Ti)}})})}function OD(n){return n instanceof Date&&!isNaN(n)}function ee(n,t){return De((e,i)=>{let r=0;e.subscribe(we(i,o=>{i.next(n.call(t,o,r++))}))})}var{isArray:VF}=Array;function LF(n,t){return VF(t)?n(...t):n(t)}function Pa(n){return ee(t=>LF(n,t))}var{isArray:BF}=Array,{getPrototypeOf:jF,prototype:UF,keys:$F}=Object;function Sh(n){if(n.length===1){let t=n[0];if(BF(t))return{args:t,keys:null};if(GF(t)){let e=$F(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function GF(n){return n&&typeof n=="object"&&jF(n)===UF}function Ih(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function cs(...n){let t=qi(n),e=io(n),{args:i,keys:r}=Sh(n);if(i.length===0)return Be([],t);let o=new ye(HF(i,t,r?s=>Ih(r,s):sn));return e?o.pipe(Pa(e)):o}function HF(n,t,e=sn){return i=>{RD(t,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)RD(t,()=>{let u=Be(n[l],t),d=!1;u.subscribe(we(i,f=>{o[l]=f,d||(d=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function RD(n,t,e){n?Pn(e,n,t):t()}function PD(n,t,e,i,r,o,s,a){let l=[],u=0,d=0,f=!1,m=()=>{f&&!l.length&&!u&&t.complete()},y=T=>u<i?D(T):l.push(T),D=T=>{o&&t.next(T),u++;let R=!1;$e(e(T,d++)).subscribe(we(t,q=>{r?.(q),o?y(q):t.next(q)},()=>{R=!0},void 0,()=>{if(R)try{for(u--;l.length&&u<i;){let q=l.shift();s?Pn(t,s,()=>D(q)):D(q)}m()}catch(q){t.error(q)}}))};return n.subscribe(we(t,y,()=>{f=!0,m()})),()=>{a?.()}}function xt(n,t,e=1/0){return _e(t)?xt((i,r)=>ee((o,s)=>t(i,o,r,s))($e(n(i,r))),e):(typeof t=="number"&&(e=t),De((i,r)=>PD(i,r,n,e)))}function kc(n=1/0){return xt(sn,n)}function ND(){return kc(1)}function Wi(...n){return ND()(Be(n,qi(n)))}function Th(n){return new ye(t=>{$e(n()).subscribe(t)})}function D_(...n){let t=io(n),{args:e,keys:i}=Sh(n),r=new ye(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let d=0;d<s;d++){let f=!1;$e(e[d]).subscribe(we(o,m=>{f||(f=!0,u--),a[d]=m},()=>l--,void 0,()=>{(!l||!f)&&(u||o.next(i?Ih(i,a):a),o.complete())}))}});return t?r.pipe(Pa(t)):r}var zF=["addListener","removeListener"],qF=["addEventListener","removeEventListener"],WF=["on","off"];function li(n,t,e,i){if(_e(e)&&(i=e,e=void 0),i)return li(n,t,e).pipe(Pa(i));let[r,o]=YF(n)?qF.map(s=>a=>n[s](t,a,e)):KF(n)?zF.map(FD(n,t)):QF(n)?WF.map(FD(n,t)):[];if(!r&&Oa(n))return xt(s=>li(s,t,e))($e(n));if(!r)throw new TypeError("Invalid event target");return new ye(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function FD(n,t){return e=>i=>n[e](t,i)}function KF(n){return _e(n.addListener)&&_e(n.removeListener)}function QF(n){return _e(n.on)&&_e(n.off)}function YF(n){return _e(n.addEventListener)&&_e(n.removeEventListener)}function S_(n=0,t,e=w_){let i=-1;return t!=null&&(mh(t)?e=t:i=t),new ye(r=>{let o=OD(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function xh(...n){let t=qi(n),e=ED(n,1/0),i=n;return i.length?i.length===1?$e(i[0]):kc(e)(Be(i,t)):qt}var{isArray:JF}=Array;function Mh(n){return n.length===1&&JF(n[0])?n[0]:n}function dt(n,t){return De((e,i)=>{let r=0;e.subscribe(we(i,o=>n.call(t,o,r++)&&i.next(o)))})}function I_(...n){return n=Mh(n),n.length===1?$e(n[0]):new ye(ZF(n))}function ZF(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push($e(n[i]).subscribe(we(t,r=>{if(e){for(let o=0;o<e.length;o++)o!==i&&e[o].unsubscribe();e=null}t.next(r)})))}}function Vc(...n){let t=io(n),e=Mh(n);return e.length?new ye(i=>{let r=e.map(()=>[]),o=e.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<e.length;s++)$e(e[s]).subscribe(we(i,a=>{if(r[s].push(a),r.every(l=>l.length)){let l=r.map(u=>u.shift());i.next(t?t(...l):l),r.some((u,d)=>!u.length&&o[d])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):qt}function ro(n){return De((t,e)=>{let i=null,r=!1,o;i=t.subscribe(we(e,void 0,void 0,s=>{o=$e(n(s,ro(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function kD(n,t,e,i,r){return(o,s)=>{let a=e,l=t,u=0;o.subscribe(we(s,d=>{let f=u++;l=a?n(l,d,f):(a=!0,d),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function oo(n,t){return _e(t)?xt(n,t,1):xt(n,1)}function T_(n,t=no){return De((e,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let u=o;o=null,i.next(u)}};function l(){let u=s+n,d=t.now();if(d<u){r=this.schedule(void 0,u-d),i.add(r);return}a()}e.subscribe(we(i,u=>{o=u,s=t.now(),r||(r=t.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function so(n){return De((t,e)=>{let i=!1;t.subscribe(we(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function gn(n){return n<=0?()=>qt:De((t,e)=>{let i=0;t.subscribe(we(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function x_(n){return ee(()=>n)}function Ah(n,t=sn){return n=n??XF,De((e,i)=>{let r,o=!0;e.subscribe(we(i,s=>{let a=t(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function XF(n,t){return n===t}function Oh(n=ek){return De((t,e)=>{let i=!1;t.subscribe(we(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function ek(){return new Ti}function M_(...n){return t=>Wi(t,ce(...n))}function Sr(n){return De((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function ci(n,t){let e=arguments.length>=2;return i=>i.pipe(n?dt((r,o)=>n(r,o,i)):sn,gn(1),e?so(t):Oh(()=>new Ti))}function Na(n){return n<=0?()=>qt:De((t,e)=>{let i=[];t.subscribe(we(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function A_(n,t){let e=arguments.length>=2;return i=>i.pipe(n?dt((r,o)=>n(r,o,i)):sn,Na(1),e?so(t):Oh(()=>new Ti))}function Lc(){return De((n,t)=>{let e,i=!1;n.subscribe(we(t,r=>{let o=e;e=r,i&&t.next([o,r]),i=!0}))})}function us(n,t){return De(kD(n,t,arguments.length>=2,!0))}function VD(n={}){let{connector:t=()=>new Le,resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,u=0,d=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=l=void 0,d=f=!1},D=()=>{let T=s;y(),T?.unsubscribe()};return De((T,R)=>{u++,!f&&!d&&m();let q=l=l??t();R.add(()=>{u--,u===0&&!f&&!d&&(a=O_(D,r))}),q.subscribe(R),!s&&u>0&&(s=new Dr({next:ie=>q.next(ie),error:ie=>{f=!0,m(),a=O_(y,e,ie),q.error(ie)},complete:()=>{d=!0,m(),a=O_(y,i),q.complete()}}),$e(T).subscribe(s))})(o)}}function O_(n,t,...e){if(t===!0){n();return}if(t===!1)return;let i=new Dr({next:()=>{i.unsubscribe(),n()}});return $e(t(...e)).subscribe(i)}function Fa(n,t,e){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n:i=n??1/0,VD({connector:()=>new dh(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Rh(n){return dt((t,e)=>n<=e)}function Ki(...n){let t=qi(n);return De((e,i)=>{(t?Wi(n,e,t):Wi(n,e)).subscribe(i)})}function nt(n,t){return De((e,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();e.subscribe(we(i,l=>{r?.unsubscribe();let u=0,d=o++;$e(n(l,d)).subscribe(r=we(i,f=>i.next(t?t(l,f,d,u++):f),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Ph(n,t){return _e(t)?nt(()=>n,t):nt(()=>n)}function Jt(n){return De((t,e)=>{$e(n).subscribe(we(e,()=>e.complete(),ss)),!e.closed&&t.subscribe(e)})}function Mt(n,t,e){let i=_e(n)||t||e?{next:n,error:t,complete:e}:n;return i?De((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(we(o,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),o.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):sn}function Nh(...n){let t=io(n);return De((e,i)=>{let r=n.length,o=new Array(r),s=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)$e(n[l]).subscribe(we(i,u=>{o[l]=u,!a&&!s[l]&&(s[l]=!0,(a=s.every(sn))&&(s=null))},ss));e.subscribe(we(i,l=>{if(a){let u=[l,...o];i.next(t?t(...u):u)}}))})}var IS="https://g.co/ng/security#xss",de=class extends Error{constructor(t,e){super(pf(t,e)),this.code=t}};function pf(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}var TS=Symbol("InputSignalNode#UNSET"),tk=Ee(Y({},u_),{transformFn:void 0,applyValueToInputSignal(n,t){oh(n,t)}});function xS(n,t){let e=Object.create(tk);e.value=n,e.transformFn=t?.transform;function i(){if(s_(e),e.value===TS)throw new de(-950,!1);return e.value}return i[Er]=e,i}function Zc(n){return{toString:n}.toString()}var Fh="__parameters__";function nk(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function MS(n,t,e){return Zc(()=>{let i=nk(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,u,d){let f=l.hasOwnProperty(Fh)?l[Fh]:Object.defineProperty(l,Fh,{value:[]})[Fh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Kn=globalThis;function ot(n){for(let t in n)if(n[t]===ot)return t;throw Error("Could not find renamed property on target object.")}function ik(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Tn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Tn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function q_(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var rk=ot({__forward_ref__:ot});function _n(n){return n.__forward_ref__=_n,n.toString=function(){return Tn(this())},n}function In(n){return AS(n)?n():n}function AS(n){return typeof n=="function"&&n.hasOwnProperty(rk)&&n.__forward_ref__===_n}function J(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pt(n){return{providers:n.providers||[],imports:n.imports||[]}}function mf(n){return LD(n,RS)||LD(n,PS)}function OS(n){return mf(n)!==null}function LD(n,t){return n.hasOwnProperty(t)?n[t]:null}function ok(n){let t=n&&(n[RS]||n[PS]);return t||null}function BD(n){return n&&(n.hasOwnProperty(jD)||n.hasOwnProperty(sk))?n[jD]:null}var RS=ot({\u0275prov:ot}),jD=ot({\u0275inj:ot}),PS=ot({ngInjectableDef:ot}),sk=ot({ngInjectorDef:ot}),re=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=J({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function NS(n){return n&&!!n.\u0275providers}var ak=ot({\u0275cmp:ot}),lk=ot({\u0275dir:ot}),ck=ot({\u0275pipe:ot}),uk=ot({\u0275mod:ot}),Kh=ot({\u0275fac:ot}),Bc=ot({__NG_ELEMENT_ID__:ot}),UD=ot({__NG_ENV_ID__:ot});function ps(n){return typeof n=="string"?n:n==null?"":String(n)}function dk(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ps(n)}function hk(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new de(-200,n)}function K0(n,t){throw new de(-201,!1)}var Ne=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ne||{}),W_;function FS(){return W_}function Fn(n){let t=W_;return W_=n,t}function kS(n,t,e){let i=mf(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&Ne.Optional)return null;if(t!==void 0)return t;K0(n,"Injector")}var fk={},Uc=fk,K_="__NG_DI_FLAG__",Qh="ngTempTokenPath",pk="ngTokenPath",mk=/\n/gm,gk="\u0275",$D="__source",Ba;function _k(){return Ba}function ao(n){let t=Ba;return Ba=n,t}function yk(n,t=Ne.Default){if(Ba===void 0)throw new de(-203,!1);return Ba===null?kS(n,void 0,t):Ba.get(n,t&Ne.Optional?null:void 0,t)}function K(n,t=Ne.Default){return(FS()||yk)(In(n),t)}function k(n,t=Ne.Default){return K(n,gf(t))}function gf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Q_(n){let t=[];for(let e=0;e<n.length;e++){let i=In(n[e]);if(Array.isArray(i)){if(i.length===0)throw new de(900,!1);let r,o=Ne.Default;for(let s=0;s<i.length;s++){let a=i[s],l=vk(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}t.push(K(r,o))}else t.push(K(i))}return t}function VS(n,t){return n[K_]=t,n.prototype[K_]=t,n}function vk(n){return n[K_]}function wk(n,t,e,i){let r=n[Qh];throw t[$D]&&r.unshift(t[$D]),n.message=bk(`
`+n.message,r,e,i),n[pk]=r,n[Qh]=null,n}function bk(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==gk?n.slice(2):n;let r=Tn(t);if(Array.isArray(t))r=t.map(Tn).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Tn(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(mk,`
  `)}`}var xr=VS(MS("Optional"),8);var Q0=VS(MS("SkipSelf"),4);function ms(n,t){let e=n.hasOwnProperty(Kh);return e?n[Kh]:null}function Ck(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function Ek(n){return n.flat(Number.POSITIVE_INFINITY)}function Y0(n,t){n.forEach(e=>Array.isArray(e)?Y0(e,t):t(e))}function LS(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Yh(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Dk(n,t){let e=[];for(let i=0;i<n;i++)e.push(t);return e}function Sk(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let o=r-2;n[r]=n[o],r--}n[t]=e,n[t+1]=i}}function _f(n,t,e){let i=Xc(n,t);return i>=0?n[i|1]=e:(i=~i,Sk(n,i,t,e)),i}function R_(n,t){let e=Xc(n,t);if(e>=0)return n[e|1]}function Xc(n,t){return Ik(n,t,1)}function Ik(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<e];if(t===s)return o<<e;s>t?r=o:i=o+1}return~(r<<e)}var Ua={},kn=[],$a=new re(""),BS=new re("",-1),jS=new re(""),Jh=class{get(t,e=Uc){if(e===Uc){let i=new Error(`NullInjectorError: No provider for ${Tn(t)}!`);throw i.name="NullInjectorError",i}return e}},US=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(US||{}),Ji=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ji||{}),bt=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(bt||{});function Tk(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}function Y_(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],s=e[i++],a=e[i++];n.setAttribute(t,s,a,o)}else{let o=r,s=e[++i];Mk(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),i++}}return i}function xk(n){return n===3||n===4||n===6}function Mk(n){return n.charCodeAt(0)===64}function $c(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?GD(n,e,r,null,t[++i]):GD(n,e,r,null,null))}}return n}function GD(n,t,e,i,r){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var $S="ng-template";function Ak(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&Tk(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(J0(n))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function J0(n){return n.type===4&&n.value!==$S}function Ok(n,t,e){let i=n.type===4&&!e?$S:n.value;return t===i}function Rk(n,t,e){let i=4,r=n.attrs,o=r!==null?Fk(r):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!xi(i)&&!xi(l))return!1;if(s&&xi(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!Ok(n,l,e)||l===""&&t.length===1){if(xi(i))return!1;s=!0}}else if(i&8){if(r===null||!Ak(n,r,l,e)){if(xi(i))return!1;s=!0}}else{let u=t[++a],d=Pk(l,r,J0(n),e);if(d===-1){if(xi(i))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=r[d+1].toLowerCase(),i&2&&u!==f){if(xi(i))return!1;s=!0}}}}return xi(i)||s}function xi(n){return(n&1)===0}function Pk(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){let s=t[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return kk(t,n)}function GS(n,t,e=!1){for(let i=0;i<t.length;i++)if(Rk(n,t[i],e))return!0;return!1}function Nk(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if(!(e&1))return t[e+1]}return null}function Fk(n){for(let t=0;t<n.length;t++){let e=n[t];if(xk(e))return t}return n.length}function kk(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function Vk(n,t){e:for(let e=0;e<t.length;e++){let i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function HD(n,t){return n?":not("+t.trim()+")":t}function Lk(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(i&2){let a=n[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!xi(s)&&(t+=HD(o,r),r=""),i=s,o=o||!xi(i);e++}return r!==""&&(t+=HD(o,r)),t}function Bk(n){return n.map(Lk).join(",")}function jk(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&t.push(o,n[++i]):r===8&&e.push(o);else{if(!xi(r))break;r=o}i++}return{attrs:t,classes:e}}function he(n){return Zc(()=>{let t=KS(n),e=Ee(Y({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===US.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ji.Emulated,styles:n.styles||kn,_:null,schemas:n.schemas||null,tView:null,id:""});QS(e);let i=n.dependencies;return e.directiveDefs=qD(i,!1),e.pipeDefs=qD(i,!0),e.id=Gk(e),e})}function Uk(n){return co(n)||HS(n)}function $k(n){return n!==null}function mt(n){return Zc(()=>({type:n.type,bootstrap:n.bootstrap||kn,declarations:n.declarations||kn,imports:n.imports||kn,exports:n.exports||kn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function zD(n,t){if(n==null)return Ua;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a=bt.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),t?(e[o]=a!==bt.None?[i,a]:i,t[o]=s):e[o]=i}return e}function We(n){return Zc(()=>{let t=KS(n);return QS(t),t})}function yf(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function co(n){return n[ak]||null}function HS(n){return n[lk]||null}function zS(n){return n[ck]||null}function qS(n){let t=co(n)||HS(n)||zS(n);return t!==null?t.standalone:!1}function WS(n,t){let e=n[uk]||null;if(!e&&t===!0)throw new Error(`Type ${Tn(n)} does not have '\u0275mod' property.`);return e}function KS(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||Ua,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||kn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zD(n.inputs,t),outputs:zD(n.outputs),debugInfo:null}}function QS(n){n.features?.forEach(t=>t(n))}function qD(n,t){if(!n)return null;let e=t?zS:Uk;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter($k)}function Gk(n){let t=0,e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Es(n){return{\u0275providers:n}}function Z0(...n){return{\u0275providers:YS(!0,n),\u0275fromNgModule:!0}}function YS(n,...t){let e=[],i=new Set,r,o=s=>{e.push(s)};return Y0(t,s=>{let a=s;J_(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&JS(r,o),e}function JS(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];X0(r,o=>{t(o,i)})}}function J_(n,t,e,i){if(n=In(n),!n)return!1;let r=null,o=BD(n),s=!o&&co(n);if(!o&&!s){let l=n.ngModule;if(o=BD(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)J_(u,t,e,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{Y0(o.imports,d=>{J_(d,t,e,i)&&(u||=[],u.push(d))})}finally{}u!==void 0&&JS(u,t)}if(!a){let u=ms(r)||(()=>new r);t({provide:r,useFactory:u,deps:kn},r),t({provide:jS,useValue:r,multi:!0},r),t({provide:$a,useValue:()=>K(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=n;X0(l,d=>{t(d,u)})}}else return!1;return r!==n&&n.providers!==void 0}function X0(n,t){for(let e of n)NS(e)&&(e=e.\u0275providers),Array.isArray(e)?X0(e,t):t(e)}var Hk=ot({provide:String,useValue:ot});function ZS(n){return n!==null&&typeof n=="object"&&Hk in n}function zk(n){return!!(n&&n.useExisting)}function qk(n){return!!(n&&n.useFactory)}function Ga(n){return typeof n=="function"}function Wk(n){return!!n.useClass}var vf=new re(""),Uh={},Kk={},P_;function wf(){return P_===void 0&&(P_=new Jh),P_}var an=class{},Gc=class extends an{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,X_(t,s=>this.processProvider(s)),this.records.set(BS,ka(void 0,this)),r.has("environment")&&this.records.set(an,ka(void 0,this));let o=this.records.get(vf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(jS,kn,Ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=qe(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),qe(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=ao(this),i=Fn(void 0),r;try{return t()}finally{ao(e),Fn(i)}}get(t,e=Uc,i=Ne.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(UD))return t[UD](this);i=gf(i);let r,o=ao(this),s=Fn(void 0);try{if(!(i&Ne.SkipSelf)){let l=this.records.get(t);if(l===void 0){let u=Xk(t)&&mf(t);u&&this.injectableDefInScope(u)?l=ka(Z_(t),Uh):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&Ne.Self?wf():this.parent;return e=i&Ne.Optional&&e===Uc?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[Qh]=a[Qh]||[]).unshift(Tn(t)),o)throw a;return wk(a,t,"R3InjectorError",this.source)}else throw a}finally{Fn(s),ao(o)}}resolveInjectorInitializers(){let t=qe(null),e=ao(this),i=Fn(void 0),r;try{let o=this.get($a,kn,Ne.Self);for(let s of o)s()}finally{ao(e),Fn(i),qe(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(Tn(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(t){t=In(t);let e=Ga(t)?t:In(t&&t.provide),i=Yk(t);if(!Ga(t)&&t.multi===!0){let r=this.records.get(e);r||(r=ka(void 0,Uh,!0),r.factory=()=>Q_(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){let i=qe(null);try{return e.value===Uh&&(e.value=Kk,e.value=e.factory()),typeof e.value=="object"&&e.value&&Zk(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{qe(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=In(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function Z_(n){let t=mf(n),e=t!==null?t.factory:ms(n);if(e!==null)return e;if(n instanceof re)throw new de(204,!1);if(n instanceof Function)return Qk(n);throw new de(204,!1)}function Qk(n){if(n.length>0)throw new de(204,!1);let e=ok(n);return e!==null?()=>e.factory(n):()=>new n}function Yk(n){if(ZS(n))return ka(void 0,n.useValue);{let t=XS(n);return ka(t,Uh)}}function XS(n,t,e){let i;if(Ga(n)){let r=In(n);return ms(r)||Z_(r)}else if(ZS(n))i=()=>In(n.useValue);else if(qk(n))i=()=>n.useFactory(...Q_(n.deps||[]));else if(zk(n))i=()=>K(In(n.useExisting));else{let r=In(n&&(n.useClass||n.provide));if(Jk(n))i=()=>new r(...Q_(n.deps));else return ms(r)||Z_(r)}return i}function ka(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function Jk(n){return!!n.deps}function Zk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Xk(n){return typeof n=="function"||typeof n=="object"&&n instanceof re}function X_(n,t){for(let e of n)Array.isArray(e)?X_(e,t):e&&NS(e)?X_(e.\u0275providers,t):t(e)}function Mr(n,t){n instanceof Gc&&n.assertNotDestroyed();let e,i=ao(n),r=Fn(void 0);try{return t()}finally{ao(i),Fn(r)}}function eI(){return FS()!==void 0||_k()!=null}function e2(n){if(!eI())throw new de(-203,!1)}function t2(n){return typeof n=="function"}var Ar=0,Oe=1,Ce=2,ln=3,Ai=4,Jn=5,Hc=6,zc=7,Oi=8,Ha=9,Ri=10,Ct=11,qc=12,WD=13,Qa=14,Pi=15,eu=16,Va=17,Ir=18,bf=19,tI=20,lo=21,$h=22,gs=23,Yn=25,nI=1;var _s=7,Zh=8,za=9,Qn=10,ey=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ey||{});function hs(n){return Array.isArray(n)&&typeof n[nI]=="object"}function Or(n){return Array.isArray(n)&&n[nI]===!0}function ty(n){return(n.flags&4)!==0}function Cf(n){return n.componentOffset>-1}function Ef(n){return(n.flags&1)===1}function uo(n){return!!n.template}function n2(n){return(n[Ce]&512)!==0}var e0=class{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function iI(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}function xn(){return rI}function rI(n){return n.type.prototype.ngOnChanges&&(n.setInput=r2),i2}xn.ngInherit=!0;function i2(){let n=sI(this),t=n?.current;if(t){let e=n.previous;if(e===Ua)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function r2(n,t,e,i,r){let o=this.declaredInputs[i],s=sI(n)||o2(n,{previous:Ua,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new e0(u&&u.currentValue,e,l===Ua),iI(n,t,r,e)}var oI="__ngSimpleChanges__";function sI(n){return n[oI]||null}function o2(n,t){return n[oI]=t}var KD=null;var Qi=function(n,t,e){KD?.(n,t,e)},s2="svg",a2="math",l2=!1;function c2(){return l2}function Zi(n){for(;Array.isArray(n);)n=n[Ar];return n}function aI(n,t){return Zi(t[n])}function ui(n,t){return Zi(t[n.index])}function lI(n,t){return n.data[t]}function cI(n,t){return n[t]}function po(n,t){let e=t[n];return hs(e)?e:e[Ar]}function u2(n){return(n[Ce]&4)===4}function ny(n){return(n[Ce]&128)===128}function d2(n){return Or(n[ln])}function qa(n,t){return t==null?null:n[t]}function uI(n){n[Va]=0}function h2(n){n[Ce]&1024||(n[Ce]|=1024,ny(n)&&Wc(n))}function f2(n,t){for(;n>0;)t=t[Qa],n--;return t}function iy(n){return!!(n[Ce]&9216||n[gs]?.dirty)}function t0(n){n[Ri].changeDetectionScheduler?.notify(1),iy(n)?Wc(n):n[Ce]&64&&(c2()?(n[Ce]|=1024,Wc(n)):n[Ri].changeDetectionScheduler?.notify())}function Wc(n){n[Ri].changeDetectionScheduler?.notify();let t=Kc(n);for(;t!==null&&!(t[Ce]&8192||(t[Ce]|=8192,!ny(t)));)t=Kc(t)}function dI(n,t){if((n[Ce]&256)===256)throw new de(911,!1);n[lo]===null&&(n[lo]=[]),n[lo].push(t)}function p2(n,t){if(n[lo]===null)return;let e=n[lo].indexOf(t);e!==-1&&n[lo].splice(e,1)}function Kc(n){let t=n[ln];return Or(t)?t[ln]:t}var Re={lFrame:yI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function m2(){return Re.lFrame.elementDepthCount}function g2(){Re.lFrame.elementDepthCount++}function _2(){Re.lFrame.elementDepthCount--}function hI(){return Re.bindingsEnabled}function fI(){return Re.skipHydrationRootTNode!==null}function y2(n){return Re.skipHydrationRootTNode===n}function v2(){Re.skipHydrationRootTNode=null}function Te(){return Re.lFrame.lView}function Pt(){return Re.lFrame.tView}function j(n){return Re.lFrame.contextLView=n,n[Oi]}function U(n){return Re.lFrame.contextLView=null,n}function Vn(){let n=pI();for(;n!==null&&n.type===64;)n=n.parent;return n}function pI(){return Re.lFrame.currentTNode}function w2(){let n=Re.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Ds(n,t){let e=Re.lFrame;e.currentTNode=n,e.isParent=t}function ry(){return Re.lFrame.isParent}function oy(){Re.lFrame.isParent=!1}function b2(){return Re.lFrame.contextLView}function tu(){let n=Re.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function C2(){return Re.lFrame.bindingIndex}function E2(n){return Re.lFrame.bindingIndex=n}function Df(){return Re.lFrame.bindingIndex++}function sy(n){let t=Re.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function D2(){return Re.lFrame.inI18n}function S2(n,t){let e=Re.lFrame;e.bindingIndex=e.bindingRootIndex=n,n0(t)}function I2(){return Re.lFrame.currentDirectiveIndex}function n0(n){Re.lFrame.currentDirectiveIndex=n}function T2(n){let t=Re.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function mI(){return Re.lFrame.currentQueryIndex}function ay(n){Re.lFrame.currentQueryIndex=n}function x2(n){let t=n[Oe];return t.type===2?t.declTNode:t.type===1?n[Jn]:null}function gI(n,t,e){if(e&Ne.SkipSelf){let r=t,o=n;for(;r=r.parent,r===null&&!(e&Ne.Host);)if(r=x2(o),r===null||(o=o[Qa],r.type&10))break;if(r===null)return!1;t=r,n=o}let i=Re.lFrame=_I();return i.currentTNode=t,i.lView=n,!0}function ly(n){let t=_I(),e=n[Oe];Re.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function _I(){let n=Re.lFrame,t=n===null?null:n.child;return t===null?yI(n):t}function yI(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function vI(){let n=Re.lFrame;return Re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var wI=vI;function cy(){let n=vI();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function M2(n){return(Re.lFrame.contextLView=f2(n,Re.lFrame.contextLView))[Oi]}function mo(){return Re.lFrame.selectedIndex}function ys(n){Re.lFrame.selectedIndex=n}function Sf(){let n=Re.lFrame;return lI(n.tView,n.selectedIndex)}function A2(){return Re.lFrame.currentNamespace}var bI=!0;function If(){return bI}function Tf(n){bI=n}function O2(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=rI(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}r&&(e.preOrderHooks??=[]).push(0-n,r),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function xf(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),u&&((n.viewHooks??=[]).push(e,u),(n.viewCheckHooks??=[]).push(e,u)),d!=null&&(n.destroyHooks??=[]).push(e,d)}}function Gh(n,t,e){CI(n,t,3,e)}function Hh(n,t,e,i){(n[Ce]&3)===e&&CI(n,t,e,i)}function N_(n,t){let e=n[Ce];(e&3)===t&&(e&=16383,e+=1,n[Ce]=e)}function CI(n,t,e,i){let r=i!==void 0?n[Va]&65535:0,o=i??-1,s=t.length-1,a=0;for(let l=r;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(n[Va]+=65536),(a<o||o==-1)&&(R2(n,e,t,l),n[Va]=(n[Va]&4294901760)+l+2),l++}function QD(n,t){Qi(4,n,t);let e=qe(null);try{t.call(n)}finally{qe(e),Qi(5,n,t)}}function R2(n,t,e,i){let r=e[i]<0,o=e[i+1],s=r?-e[i]:e[i],a=n[s];r?n[Ce]>>14<n[Va]>>16&&(n[Ce]&3)===t&&(n[Ce]+=16384,QD(a,o)):QD(a,o)}var ja=-1,vs=class{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}};function P2(n){return n instanceof vs}function N2(n){return(n.flags&8)!==0}function F2(n){return(n.flags&16)!==0}function EI(n){return n!==ja}function Xh(n){return n&32767}function k2(n){return n>>16}function ef(n,t){let e=k2(n),i=t;for(;e>0;)i=i[Qa],e--;return i}var i0=!0;function tf(n){let t=i0;return i0=n,t}var V2=256,DI=V2-1,SI=5,L2=0,Yi={};function B2(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(Bc)&&(i=e[Bc]),i==null&&(i=e[Bc]=L2++);let r=i&DI,o=1<<r;t.data[n+(r>>SI)]|=o}function nf(n,t){let e=II(n,t);if(e!==-1)return e;let i=t[Oe];i.firstCreatePass&&(n.injectorIndex=t.length,F_(i.data,n),F_(t,null),F_(i.blueprint,null));let r=uy(n,t),o=n.injectorIndex;if(EI(r)){let s=Xh(r),a=ef(r,t),l=a[Oe].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|l[s+u]}return t[o+8]=r,o}function F_(n,t){n.push(0,0,0,0,0,0,0,0,t)}function II(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function uy(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=OI(r),i===null)return ja;if(e++,r=r[Qa],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return ja}function r0(n,t,e){B2(n,t,e)}function TI(n,t,e){if(e&Ne.Optional||n!==void 0)return n;K0(t,"NodeInjector")}function xI(n,t,e,i){if(e&Ne.Optional&&i===void 0&&(i=null),!(e&(Ne.Self|Ne.Host))){let r=n[Ha],o=Fn(void 0);try{return r?r.get(t,i,e&Ne.Optional):kS(t,i,e&Ne.Optional)}finally{Fn(o)}}return TI(i,t,e)}function MI(n,t,e,i=Ne.Default,r){if(n!==null){if(t[Ce]&2048&&!(i&Ne.Self)){let s=G2(n,t,e,i,Yi);if(s!==Yi)return s}let o=AI(n,t,e,i,Yi);if(o!==Yi)return o}return xI(t,e,i,r)}function AI(n,t,e,i,r){let o=U2(e);if(typeof o=="function"){if(!gI(t,n,i))return i&Ne.Host?TI(r,e,i):xI(t,e,i,r);try{let s;if(s=o(i),s==null&&!(i&Ne.Optional))K0(e);else return s}finally{wI()}}else if(typeof o=="number"){let s=null,a=II(n,t),l=ja,u=i&Ne.Host?t[Pi][Jn]:null;for((a===-1||i&Ne.SkipSelf)&&(l=a===-1?uy(n,t):t[a+8],l===ja||!JD(i,!1)?a=-1:(s=t[Oe],a=Xh(l),t=ef(l,t)));a!==-1;){let d=t[Oe];if(YD(o,a,d.data)){let f=j2(a,t,e,s,i,u);if(f!==Yi)return f}l=t[a+8],l!==ja&&JD(i,t[Oe].data[a+8]===u)&&YD(o,a,t)?(s=d,a=Xh(l),t=ef(l,t)):a=-1}}return r}function j2(n,t,e,i,r,o){let s=t[Oe],a=s.data[n+8],l=i==null?Cf(a)&&i0:i!=s&&(a.type&3)!==0,u=r&Ne.Host&&o===a,d=zh(a,s,e,l,u);return d!==null?ws(t,s,d,a):Yi}function zh(n,t,e,i,r){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,d=o>>20,f=i?a:a+d,m=r?a+d:u;for(let y=f;y<m;y++){let D=s[y];if(y<l&&e===D||y>=l&&D.type===e)return y}if(r){let y=s[l];if(y&&uo(y)&&y.type===e)return l}return null}function ws(n,t,e,i){let r=n[e],o=t.data;if(P2(r)){let s=r;s.resolving&&hk(dk(o[e]));let a=tf(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Fn(s.injectImpl):null,d=gI(n,i,Ne.Default);try{r=n[e]=s.factory(void 0,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&O2(e,o[e],t)}finally{u!==null&&Fn(u),tf(a),s.resolving=!1,wI()}}return r}function U2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Bc)?n[Bc]:void 0;return typeof t=="number"?t>=0?t&DI:$2:t}function YD(n,t,e){let i=1<<n;return!!(e[t+(n>>SI)]&i)}function JD(n,t){return!(n&Ne.Self)&&!(n&Ne.Host&&t)}var fs=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return MI(this._tNode,this._lView,t,gf(i),e)}};function $2(){return new fs(Vn(),Te())}function Zn(n){return Zc(()=>{let t=n.prototype.constructor,e=t[Kh]||o0(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Kh]||o0(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function o0(n){return AS(n)?()=>{let t=o0(In(n));return t&&t()}:ms(n)}function G2(n,t,e,i,r){let o=n,s=t;for(;o!==null&&s!==null&&s[Ce]&2048&&!(s[Ce]&512);){let a=AI(o,s,e,i|Ne.Self,Yi);if(a!==Yi)return a;let l=o.parent;if(!l){let u=s[tI];if(u){let d=u.get(e,Yi,i);if(d!==Yi)return d}l=OI(s),s=s[Qa]}o=l}return r}function OI(n){let t=n[Oe],e=t.type;return e===2?t.declTNode:e===1?n[Jn]:null}function ZD(n,t=null,e=null,i){let r=RI(n,t,e,i);return r.resolveInjectorInitializers(),r}function RI(n,t=null,e=null,i,r=new Set){let o=[e||kn,Z0(n)];return i=i||(typeof n=="object"?void 0:Tn(n)),new Gc(o,t||wf(),i||null,r)}var di=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Uc}static{this.NULL=new Jh}static create(e,i){if(Array.isArray(e))return ZD({name:""},i,e,"");{let r=e.name??"";return ZD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=J({token:n,providedIn:"any",factory:()=>K(BS)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var H2="ngOriginalError";function k_(n){return n[H2]}var Xi=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&k_(t);for(;e&&k_(e);)e=k_(e);return e||null}},PI=new re("",{providedIn:"root",factory:()=>k(Xi).handleError.bind(void 0)}),Mf=(()=>{class n{static{this.__NG_ELEMENT_ID__=z2}static{this.__NG_ENV_ID__=e=>e}}return n})(),s0=class extends Mf{constructor(t){super(),this._lView=t}onDestroy(t){return dI(this._lView,t),()=>p2(this._lView,t)}};function z2(){return new s0(Te())}function XD(n,t){return xS(n,t)}function q2(n){return xS(TS,n)}var Af=(XD.required=q2,XD);function W2(){return Ya(Vn(),Te())}function Ya(n,t){return new cn(ui(n,t))}var cn=(()=>{class n{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=W2}}return n})();function K2(n){return n instanceof cn?n.nativeElement:n}var a0=class extends Le{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,eI()&&(this.destroyRef=k(Mf,{optional:!0})??void 0)}emit(t){let e=qe(null);try{super.next(t)}finally{qe(e)}}subscribe(t,e,i){let r=t,o=e||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=V_(o),r&&(r=V_(r)),s&&(s=V_(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof vt&&t.add(a),a}};function V_(n){return t=>{setTimeout(n,void 0,t)}}var se=a0;function Q2(){return this._results[Symbol.iterator]()}var l0=class n{get changes(){return this._changes??=new se}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=n.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=Q2)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=Ek(t);(this._changesDetected=!Ck(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function NI(n){return(n.flags&128)===128}var FI=new Map,Y2=0;function J2(){return Y2++}function Z2(n){FI.set(n[bf],n)}function X2(n){FI.delete(n[bf])}var eS="__ngContext__";function ho(n,t){hs(t)?(n[eS]=t[bf],Z2(t)):n[eS]=t}function kI(n){return LI(n[qc])}function VI(n){return LI(n[Ai])}function LI(n){for(;n!==null&&!Or(n);)n=n[Ai];return n}var c0;function BI(n){c0=n}function jI(){if(c0!==void 0)return c0;if(typeof document<"u")return document;throw new de(210,!1)}var dy=new re("",{providedIn:"root",factory:()=>eV}),eV="ng",hy=new re(""),Wt=new re("",{providedIn:"platform",factory:()=>"unknown"});var nu=new re("",{providedIn:"root",factory:()=>jI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var tV="h",nV="b";var iV=()=>null;function fy(n,t,e=!1){return iV(n,t,e)}var UI=!1,rV=new re("",{providedIn:"root",factory:()=>UI});var kh;function $I(){if(kh===void 0&&(kh=null,Kn.trustedTypes))try{kh=Kn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return kh}function Of(n){return $I()?.createHTML(n)||n}function oV(n){return $I()?.createScriptURL(n)||n}var Vh;function sV(){if(Vh===void 0&&(Vh=null,Kn.trustedTypes))try{Vh=Kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vh}function tS(n){return sV()?.createHTML(n)||n}var rf=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${IS})`}};function Ja(n){return n instanceof rf?n.changingThisBreaksApplicationSecurity:n}function py(n,t){let e=aV(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${IS})`)}return e===t}function aV(n){return n instanceof rf&&n.getTypeName()||null}function lV(n){let t=new d0(n);return cV()?new u0(t):t}var u0=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(Of(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}},d0=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=Of(t),e}};function cV(){try{return!!new window.DOMParser().parseFromString(Of(""),"text/html")}catch{return!1}}var uV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function my(n){return n=String(n),n.match(uV)?n:"unsafe:"+n}function Rr(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function iu(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var GI=Rr("area,br,col,hr,img,wbr"),HI=Rr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zI=Rr("rp,rt"),dV=iu(zI,HI),hV=iu(HI,Rr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fV=iu(zI,Rr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nS=iu(GI,hV,fV,dV),qI=Rr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pV=Rr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),mV=Rr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),gV=iu(qI,pV,mV),_V=Rr("script,style,template"),h0=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=wV(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=vV(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=iS(t).toLowerCase();if(!nS.hasOwnProperty(e))return this.sanitizedSomething=!0,!_V.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=t.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!gV.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;qI[a]&&(l=my(l)),this.buf.push(" ",s,'="',rS(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=iS(t).toLowerCase();nS.hasOwnProperty(e)&&!GI.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(rS(t))}};function yV(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function vV(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw WI(t);return t}function wV(n){let t=n.firstChild;if(t&&yV(n,t))throw WI(t);return t}function iS(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function WI(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var bV=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,CV=/([^\#-~ |!])/g;function rS(n){return n.replace(/&/g,"&amp;").replace(bV,function(t){let e=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(CV,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Lh;function KI(n,t){let e=null;try{Lh=Lh||lV(n);let i=t?String(t):"";e=Lh.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=Lh.getInertBodyElement(i)}while(i!==o);let a=new h0().sanitizeChildren(oS(e)||e);return Of(a)}finally{if(e){let i=oS(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function oS(n){return"content"in n&&EV(n)?n.content:null}function EV(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Rf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Rf||{});function Pf(n){let t=YI();return t?tS(t.sanitize(Rf.HTML,n)||""):py(n,"HTML")?tS(Ja(n)):KI(jI(),ps(n))}function Ln(n){let t=YI();return t?t.sanitize(Rf.URL,n)||"":py(n,"URL")?Ja(n):my(ps(n))}function QI(n){return oV(n[0])}function YI(){let n=Te();return n&&n[Ri].sanitizer}var DV=/^>|^->|<!--|-->|--!>|<!-$/g,SV=/(<|>)/g,IV="\u200B$1\u200B";function TV(n){return n.replace(DV,t=>t.replace(SV,IV))}function gy(n){return n.ownerDocument.defaultView}function JI(n){return n.ownerDocument}function ZI(n){return n instanceof Function?n():n}var er=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(er||{}),xV;function _y(n,t){return xV(n,t)}function La(n,t,e,i,r){if(i!=null){let o,s=!1;Or(i)?o=i:hs(i)&&(s=!0,i=i[Ar]);let a=Zi(i);n===0&&e!==null?r==null?rT(t,e,a):of(t,e,a,r||null,!0):n===1&&e!==null?of(t,e,a,r||null,!0):n===2?HV(t,a,s):n===3&&t.destroyNode(a),o!=null&&qV(t,n,o,e,r)}}function MV(n,t){return n.createText(t)}function AV(n,t,e){n.setValue(t,e)}function OV(n,t){return n.createComment(TV(t))}function XI(n,t,e){return n.createElement(t,e)}function RV(n,t){eT(n,t),t[Ar]=null,t[Jn]=null}function PV(n,t,e,i,r,o){i[Ar]=r,i[Jn]=t,Ff(n,i,e,1,r,o)}function eT(n,t){t[Ri].changeDetectionScheduler?.notify(1),Ff(n,t,t[Ct],2,null,null)}function NV(n){let t=n[qc];if(!t)return L_(n[Oe],n);for(;t;){let e=null;if(hs(t))e=t[qc];else{let i=t[Qn];i&&(e=i)}if(!e){for(;t&&!t[Ai]&&t!==n;)hs(t)&&L_(t[Oe],t),t=t[ln];t===null&&(t=n),hs(t)&&L_(t[Oe],t),e=t&&t[Ai]}t=e}}function FV(n,t,e,i){let r=Qn+i,o=e.length;i>0&&(e[r-1][Ai]=t),i<o-Qn?(t[Ai]=e[r],LS(e,Qn+i,t)):(e.push(t),t[Ai]=null),t[ln]=e;let s=t[eu];s!==null&&e!==s&&kV(s,t);let a=t[Ir];a!==null&&a.insertView(n),t0(t),t[Ce]|=128}function kV(n,t){let e=n[za],r=t[ln][ln][Pi];t[Pi]!==r&&(n[Ce]|=ey.HasTransplantedViews),e===null?n[za]=[t]:e.push(t)}function tT(n,t){let e=n[za],i=e.indexOf(t);e.splice(i,1)}function f0(n,t){if(n.length<=Qn)return;let e=Qn+t,i=n[e];if(i){let r=i[eu];r!==null&&r!==n&&tT(r,i),t>0&&(n[e-1][Ai]=i[Ai]);let o=Yh(n,Qn+t);RV(i[Oe],i);let s=o[Ir];s!==null&&s.detachView(o[Oe]),i[ln]=null,i[Ai]=null,i[Ce]&=-129}return i}function nT(n,t){if(!(t[Ce]&256)){let e=t[Ct];e.destroyNode&&Ff(n,t,e,3,null,null),NV(t)}}function L_(n,t){if(t[Ce]&256)return;let e=qe(null);try{t[Ce]&=-129,t[Ce]|=256,t[gs]&&c_(t[gs]),LV(n,t),VV(n,t),t[Oe].type===1&&t[Ct].destroy();let i=t[eu];if(i!==null&&Or(t[ln])){i!==t[ln]&&tT(i,t);let r=t[Ir];r!==null&&r.detachView(n)}X2(t)}finally{qe(e)}}function VV(n,t){let e=n.cleanup,i=t[zc];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let s=e[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[e[o+1]];e[o].call(s)}i!==null&&(t[zc]=null);let r=t[lo];if(r!==null){t[lo]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function LV(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof vs)){let o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Qi(4,a,l);try{l.call(a)}finally{Qi(5,a,l)}}else{Qi(4,r,o);try{o.call(r)}finally{Qi(5,r,o)}}}}}function iT(n,t,e){return BV(n,t.parent,e)}function BV(n,t,e){let i=t;for(;i!==null&&i.type&40;)t=i,i=t.parent;if(i===null)return e[Ar];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===Ji.None||o===Ji.Emulated)return null}return ui(i,e)}}function of(n,t,e,i,r){n.insertBefore(t,e,i,r)}function rT(n,t,e){n.appendChild(t,e)}function sS(n,t,e,i,r){i!==null?of(n,t,e,i,r):rT(n,t,e)}function jV(n,t,e,i){n.removeChild(t,e,i)}function yy(n,t){return n.parentNode(t)}function UV(n,t){return n.nextSibling(t)}function oT(n,t,e){return GV(n,t,e)}function $V(n,t,e){return n.type&40?ui(n,e):null}var GV=$V,aS;function Nf(n,t,e,i){let r=iT(n,i,t),o=t[Ct],s=i.parent||t[Jn],a=oT(s,i,t);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)sS(o,r,e[l],a,!1);else sS(o,r,e,a,!1);aS!==void 0&&aS(o,i,t,e,r)}function qh(n,t){if(t!==null){let e=t.type;if(e&3)return ui(t,n);if(e&4)return p0(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return qh(n,i);{let r=n[t.index];return Or(r)?p0(-1,r):Zi(r)}}else{if(e&32)return _y(t,n)()||Zi(n[t.index]);{let i=sT(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=Kc(n[Pi]);return qh(r,i)}else return qh(n,t.next)}}}return null}function sT(n,t){if(t!==null){let i=n[Pi][Jn],r=t.projection;return i.projection[r]}return null}function p0(n,t){let e=Qn+n+1;if(e<t.length){let i=t[e],r=i[Oe].firstChild;if(r!==null)return qh(i,r)}return t[_s]}function HV(n,t,e){let i=yy(n,t);i&&jV(n,i,t,e)}function vy(n,t,e,i,r,o,s){for(;e!=null;){let a=i[e.index],l=e.type;if(s&&t===0&&(a&&ho(Zi(a),i),e.flags|=2),(e.flags&32)!==32)if(l&8)vy(n,t,e.child,i,r,o,!1),La(t,n,r,a,o);else if(l&32){let u=_y(e,i),d;for(;d=u();)La(t,n,r,d,o);La(t,n,r,a,o)}else l&16?aT(n,t,i,e,r,o):La(t,n,r,a,o);e=s?e.projectionNext:e.next}}function Ff(n,t,e,i,r,o){vy(e,i,n.firstChild,t,r,o,!1)}function zV(n,t,e){let i=t[Ct],r=iT(n,e,t),o=e.parent||t[Jn],s=oT(o,e,t);aT(i,0,t,e,r,s)}function aT(n,t,e,i,r,o){let s=e[Pi],l=s[Jn].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let d=l[u];La(t,n,r,d,o)}else{let u=l,d=s[ln];NI(i)&&(u.flags|=128),vy(n,t,u,d,r,o,!0)}}function qV(n,t,e,i,r){let o=e[_s],s=Zi(e);o!==s&&La(t,n,i,o,r);for(let a=Qn;a<e.length;a++){let l=e[a];Ff(l[Oe],l,n,t,i,o)}}function WV(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:er.DashCase;r==null?n.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=er.Important),n.setStyle(e,i,r,o))}}function KV(n,t,e){n.setAttribute(t,"style",e)}function lT(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function cT(n,t,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&Y_(n,t,i),r!==null&&lT(n,t,r),o!==null&&KV(n,t,o)}var Xn={};function w(n=1){uT(Pt(),Te(),mo()+n,!1)}function uT(n,t,e,i){if(!i)if((t[Ce]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Gh(t,o,e)}else{let o=n.preOrderHooks;o!==null&&Hh(t,o,0,e)}ys(e)}function X(n,t=Ne.Default){let e=Te();if(e===null)return K(n,t);let i=Vn();return MI(i,e,In(n),t)}function dT(n,t,e,i,r,o){let s=qe(null);try{let a=null;r&bt.SignalBased&&(a=t[i][Er]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&bt.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(t,o)),n.setInput!==null?n.setInput(t,a,o,e,i):iI(t,a,i,o)}finally{qe(s)}}function QV(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)ys(~r);else{let o=r,s=e[++i],a=e[++i];S2(s,o);let l=t[o];a(2,l)}}}finally{ys(-1)}}function kf(n,t,e,i,r,o,s,a,l,u,d){let f=t.blueprint.slice();return f[Ar]=r,f[Ce]=i|4|128|8|64,(u!==null||n&&n[Ce]&2048)&&(f[Ce]|=2048),uI(f),f[ln]=f[Qa]=n,f[Oi]=e,f[Ri]=s||n&&n[Ri],f[Ct]=a||n&&n[Ct],f[Ha]=l||n&&n[Ha]||null,f[Jn]=o,f[bf]=J2(),f[Hc]=d,f[tI]=u,f[Pi]=t.type==2?n[Pi]:f,f}function Za(n,t,e,i,r){let o=n.data[t];if(o===null)o=YV(n,t,e,i,r),D2()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let s=w2();o.injectorIndex=s===null?-1:s.injectorIndex}return Ds(o,!0),o}function YV(n,t,e,i,r){let o=pI(),s=ry(),a=s?o:o&&o.parent,l=n.data[t]=nL(n,a,e,t,i,r);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function hT(n,t,e,i){if(e===0)return-1;let r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function fT(n,t,e,i,r){let o=mo(),s=i&2;try{ys(-1),s&&t.length>Yn&&uT(n,t,Yn,!1),Qi(s?2:0,r),e(i,r)}finally{ys(o),Qi(s?3:1,r)}}function wy(n,t,e){if(ty(t)){let i=qe(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{qe(i)}}}function by(n,t,e){hI()&&(lL(n,t,e,ui(e,t)),(e.flags&64)===64&&gT(n,t,e))}function Cy(n,t,e=ui){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?e(t,n):n[s];n[r++]=a}}}function pT(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Ey(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Ey(n,t,e,i,r,o,s,a,l,u,d){let f=Yn+i,m=f+r,y=JV(f,m),D=typeof u=="function"?u():u;return y[Oe]={type:n,blueprint:y,template:e,queries:null,viewQuery:a,declTNode:t,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:D,incompleteFirstPass:!1,ssrId:d}}function JV(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:Xn);return e}function ZV(n,t,e,i){let o=i.get(rV,UI)||e===Ji.ShadowDom,s=n.selectRootElement(t,o);return XV(s),s}function XV(n){eL(n)}var eL=()=>null;function tL(n,t,e,i){let r=vT(t);r.push(e),n.firstCreatePass&&wT(n).push(i,r.length-1)}function nL(n,t,e,i,r,o){let s=t?t.injectorIndex:-1,a=0;return fI()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lS(n,t,e,i,r){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;i??={};let a,l=bt.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}n===0?cS(i,e,u,a,l):cS(i,e,u,a)}return i}function cS(n,t,e,i,r){let o;n.hasOwnProperty(e)?(o=n[e]).push(t,i):o=n[e]=[t,i],r!==void 0&&o.push(r)}function iL(n,t,e){let i=t.directiveStart,r=t.directiveEnd,o=n.data,s=t.attrs,a=[],l=null,u=null;for(let d=i;d<r;d++){let f=o[d],m=e?e.get(f):null,y=m?m.inputs:null,D=m?m.outputs:null;l=lS(0,f.inputs,d,l,y),u=lS(1,f.outputs,d,u,D);let T=l!==null&&s!==null&&!J0(t)?vL(l,d,s):null;a.push(T)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=u}function rL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Dy(n,t,e,i,r,o,s,a){let l=ui(t,e),u=t.inputs,d;!a&&u!=null&&(d=u[i])?(Iy(n,e,d,i,r),Cf(t)&&oL(e,t.index)):t.type&3?(i=rL(i),r=s!=null?s(r,t.value||"",i):r,o.setProperty(l,i,r)):t.type&12}function oL(n,t){let e=po(t,n);e[Ce]&16||(e[Ce]|=64)}function Sy(n,t,e,i){if(hI()){let r=i===null?null:{"":-1},o=uL(n,e),s,a;o===null?s=a=null:[s,a]=o,s!==null&&mT(n,t,e,s,r,a),r&&dL(e,i,r)}e.mergedAttrs=$c(e.mergedAttrs,e.attrs)}function mT(n,t,e,i,r,o){for(let u=0;u<i.length;u++)r0(nf(e,t),n,i[u].type);fL(e,n.data.length,i.length);for(let u=0;u<i.length;u++){let d=i[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,l=hT(n,t,i.length,null);for(let u=0;u<i.length;u++){let d=i[u];e.mergedAttrs=$c(e.mergedAttrs,d.hostAttrs),pL(n,e,t,l,d),hL(l,d,r),d.contentQueries!==null&&(e.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(e.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}iL(n,e,o)}function sL(n,t,e,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;aL(s)!=a&&s.push(a),s.push(e,i,o)}}function aL(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function lL(n,t,e,i){let r=e.directiveStart,o=e.directiveEnd;Cf(e)&&mL(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||nf(e,t),ho(i,t);let s=e.initialInputs;for(let a=r;a<o;a++){let l=n.data[a],u=ws(t,n,a,e);if(ho(u,t),s!==null&&yL(t,a-r,u,l,e,s),uo(l)){let d=po(e.index,t);d[Oi]=ws(t,n,a,e)}}}function gT(n,t,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,s=I2();try{ys(o);for(let a=i;a<r;a++){let l=n.data[a],u=t[a];n0(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&cL(l,u)}}finally{ys(-1),n0(s)}}function cL(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function uL(n,t){let e=n.directiveRegistry,i=null,r=null;if(e)for(let o=0;o<e.length;o++){let s=e[o];if(GS(t,s.selectors,!1))if(i||(i=[]),uo(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;m0(n,t,l)}else i.unshift(s),m0(n,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function m0(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function dL(n,t,e){if(t){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let o=e[t[r+1]];if(o==null)throw new de(-301,!1);i.push(t[r],o)}}}function hL(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;uo(t)&&(e[""]=n)}}function fL(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function pL(n,t,e,i,r){n.data[i]=r;let o=r.factory||(r.factory=ms(r.type,!0)),s=new vs(o,uo(r),X);n.blueprint[i]=s,e[i]=s,sL(n,t,i,hT(n,e,r.hostVars,Xn),r)}function mL(n,t,e){let i=ui(t,n),r=pT(e),o=n[Ri].rendererFactory,s=16;e.signals?s=4096:e.onPush&&(s=64);let a=Vf(n,kf(n,r,null,s,i,t,null,o.createRenderer(i,e),null,null,null));n[t.index]=a}function gL(n,t,e,i,r,o){let s=ui(n,t);_L(t[Ct],s,o,n.value,e,i,r)}function _L(n,t,e,i,r,o,s){if(o==null)n.removeAttribute(t,r,e);else{let a=s==null?ps(o):s(o,i||"",r);n.setAttribute(t,r,a,e)}}function yL(n,t,e,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],d=s[a++],f=s[a++];dT(i,e,l,u,d,f)}}function vL(n,t,e){let i=null,r=0;for(;r<e.length;){let o=e[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){i.push(o,s[a+1],s[a+2],e[r+1]);break}}r+=2}return i}function _T(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function yT(n,t){let e=n.contentQueries;if(e!==null){let i=qe(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=n.data[s];ay(o),a.contentQueries(2,t[s],s)}}}finally{qe(i)}}}function Vf(n,t){return n[qc]?n[WD][Ai]=t:n[qc]=t,n[WD]=t,t}function g0(n,t,e){ay(0);let i=qe(null);try{t(n,e)}finally{qe(i)}}function vT(n){return n[zc]||(n[zc]=[])}function wT(n){return n.cleanup||(n.cleanup=[])}function bT(n,t){let e=n[Ha],i=e?e.get(Xi,null):null;i&&i.handleError(t)}function Iy(n,t,e,i,r){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],l=e[o++],u=t[s],d=n.data[s];dT(d,u,i,a,l,r)}}function CT(n,t,e){let i=aI(t,n);AV(n[Ct],i,e)}function wL(n,t){let e=po(t,n),i=e[Oe];bL(i,e);let r=e[Ar];r!==null&&e[Hc]===null&&(e[Hc]=fy(r,e[Ha])),Ty(i,e,e[Oi])}function bL(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function Ty(n,t,e){ly(t);try{let i=n.viewQuery;i!==null&&g0(1,i,e);let r=n.template;r!==null&&fT(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[Ir]?.finishViewCreation(n),n.staticContentQueries&&yT(n,t),n.staticViewQueries&&g0(2,n.viewQuery,e);let o=n.components;o!==null&&CL(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[Ce]&=-5,cy()}}function CL(n,t){for(let e=0;e<t.length;e++)wL(n,t[e])}function EL(n,t,e,i){let r=qe(null);try{let o=t.tView,a=n[Ce]&4096?4096:16,l=kf(n,o,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=n[t.index];l[eu]=u;let d=n[Ir];return d!==null&&(l[Ir]=d.createEmbeddedView(o)),Ty(o,l,e),l}finally{qe(r)}}function uS(n,t){return!t||t.firstChild===null||NI(n)}function DL(n,t,e,i=!0){let r=t[Oe];if(FV(r,t,n,e),i){let s=p0(e,n),a=t[Ct],l=yy(a,n[_s]);l!==null&&PV(r,n[Jn],a,t,l,s)}let o=t[Hc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function sf(n,t,e,i,r=!1){for(;e!==null;){let o=t[e.index];o!==null&&i.push(Zi(o)),Or(o)&&SL(o,i);let s=e.type;if(s&8)sf(n,t,e.child,i);else if(s&32){let a=_y(e,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=sT(t,e);if(Array.isArray(a))i.push(...a);else{let l=Kc(t[Pi]);sf(l[Oe],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function SL(n,t){for(let e=Qn;e<n.length;e++){let i=n[e],r=i[Oe].firstChild;r!==null&&sf(i[Oe],i,r,t)}n[_s]!==n[Ar]&&t.push(n[_s])}var ET=[];function IL(n){return n[gs]??TL(n)}function TL(n){let t=ET.pop()??Object.create(ML);return t.lView=n,t}function xL(n){n.lView[gs]!==n&&(n.lView=null,ET.push(n))}var ML=Ee(Y({},nh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Wc(n.lView)},consumerOnSignalRead(){this.lView[gs]=this}}),DT=100;function ST(n,t=!0,e=0){let i=n[Ri],r=i.rendererFactory,o=!1;o||r.begin?.();try{AL(n,e)}catch(s){throw t&&bT(n,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function AL(n,t){_0(n,t);let e=0;for(;iy(n);){if(e===DT)throw new de(103,!1);e++,_0(n,1)}}function OL(n,t,e,i){let r=t[Ce];if((r&256)===256)return;let o=!1;!o&&t[Ri].inlineEffectRunner?.flush(),ly(t);let s=null,a=null;!o&&RL(n)&&(a=IL(t),s=a_(a));try{uI(t),E2(n.bindingStartIndex),e!==null&&fT(n,t,e,2,i);let l=(r&3)===3;if(!o)if(l){let f=n.preOrderCheckHooks;f!==null&&Gh(t,f,null)}else{let f=n.preOrderHooks;f!==null&&Hh(t,f,0,null),N_(t,0)}if(PL(t),IT(t,0),n.contentQueries!==null&&yT(n,t),!o)if(l){let f=n.contentCheckHooks;f!==null&&Gh(t,f)}else{let f=n.contentHooks;f!==null&&Hh(t,f,1),N_(t,1)}QV(n,t);let u=n.components;u!==null&&xT(t,u,0);let d=n.viewQuery;if(d!==null&&g0(2,d,i),!o)if(l){let f=n.viewCheckHooks;f!==null&&Gh(t,f)}else{let f=n.viewHooks;f!==null&&Hh(t,f,2),N_(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[$h]){for(let f of t[$h])f();t[$h]=null}o||(t[Ce]&=-73)}catch(l){throw Wc(t),l}finally{a!==null&&(l_(a,s),xL(a)),cy()}}function RL(n){return n.type!==2}function IT(n,t){for(let e=kI(n);e!==null;e=VI(e))for(let i=Qn;i<e.length;i++){let r=e[i];TT(r,t)}}function PL(n){for(let t=kI(n);t!==null;t=VI(t)){if(!(t[Ce]&ey.HasTransplantedViews))continue;let e=t[za];for(let i=0;i<e.length;i++){let r=e[i],o=r[ln];h2(r)}}}function NL(n,t,e){let i=po(t,n);TT(i,e)}function TT(n,t){ny(n)&&_0(n,t)}function _0(n,t){let i=n[Oe],r=n[Ce],o=n[gs],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&ih(o)),o&&(o.dirty=!1),n[Ce]&=-9217,s)OL(i,n,i.template,n[Oi]);else if(r&8192){IT(n,1);let a=i.components;a!==null&&xT(n,a,1)}}function xT(n,t,e){for(let i=0;i<t.length;i++)NL(n,t[i],e)}function xy(n){for(n[Ri].changeDetectionScheduler?.notify();n;){n[Ce]|=64;let t=Kc(n);if(n2(n)&&!t)return n;n=t}return null}var bs=class{get rootNodes(){let t=this._lView,e=t[Oe];return sf(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Oi]}set context(t){this._lView[Oi]=t}get destroyed(){return(this._lView[Ce]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ln];if(Or(t)){let e=t[Zh],i=e?e.indexOf(this):-1;i>-1&&(f0(t,i),Yh(e,i))}this._attachedToViewContainer=!1}nT(this._lView[Oe],this._lView)}onDestroy(t){dI(this._lView,t)}markForCheck(){xy(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ce]&=-129}reattach(){t0(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,ST(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,eT(this._lView[Oe],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=t,t0(this._lView)}},Ni=(()=>{class n{static{this.__NG_ELEMENT_ID__=VL}}return n})(),FL=Ni,kL=class extends FL{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=EL(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new bs(r)}};function VL(){return Lf(Vn(),Te())}function Lf(n,t){return n.type&4?new kL(t,n,Ya(n,t)):null}var JJ=new RegExp(`^(\\d+)*(${nV}|${tV})*(.*)`);var LL=()=>null;function dS(n,t){return LL(n,t)}var y0=class{},v0=class{},af=class{};function BL(n){let t=Error(`No component factory found for ${Tn(n)}.`);return t[jL]=n,t}var jL="ngComponent";var w0=class{resolveComponentFactory(t){throw BL(t)}},Bf=(()=>{class n{static{this.NULL=new w0}}return n})(),Qc=class{},nr=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>UL()}}return n})();function UL(){let n=Te(),t=Vn(),e=po(t.index,n);return(hs(e)?e:n)[Ct]}var $L=(()=>{class n{static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>null})}}return n})(),B_={};var hS=new Set;function ru(n){hS.has(n)||(hS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function fS(...n){}function GL(){let n=typeof Kn.requestAnimationFrame=="function",t=Kn[n?"requestAnimationFrame":"setTimeout"],e=Kn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}var Fe=class n{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new se(!1),this.onMicrotaskEmpty=new se(!1),this.onStable=new se(!1),this.onError=new se(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=GL().nativeRequestAnimationFrame,qL(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new de(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,HL,fS,fS);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},HL={};function My(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function zL(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Kn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,b0(n),n.isCheckStableRunning=!0,My(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),b0(n))}function qL(n){let t=()=>{zL(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,o,s,a)=>{if(WL(a))return e.invokeTask(r,o,s,a);try{return pS(n),e.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),mS(n)}},onInvoke:(e,i,r,o,s,a,l)=>{try{return pS(n),e.invoke(r,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),mS(n)}},onHasTask:(e,i,r,o)=>{e.hasTask(r,o),i===r&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,b0(n),My(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,i,r,o)=>(e.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function b0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function pS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mS(n){n._nesting--,My(n)}function WL(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var MT=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of e)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>new n})}}return n})();function lf(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=q_(r,a);else if(o==2){let l=a,u=t[++s];i=q_(i,l+": "+u+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}var cf=class extends Bf{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=co(t);return new Wa(e,this.ngModule)}};function gS(n){let t=[];for(let e in n){if(!n.hasOwnProperty(e))continue;let i=n[e];i!==void 0&&t.push({propName:Array.isArray(i)?i[0]:i,templateName:e})}return t}function KL(n){let t=n.toLowerCase();return t==="svg"?s2:t==="math"?a2:null}var C0=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=gf(i);let r=this.injector.get(t,B_,i);return r!==B_||e===B_?r:this.parentInjector.get(t,e,i)}},Wa=class extends af{get inputs(){let t=this.componentDef,e=t.inputTransforms,i=gS(t.inputs);if(e!==null)for(let r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return gS(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=Bk(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let o=qe(null);try{r=r||this.ngModule;let s=r instanceof an?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new C0(t,s):t,l=a.get(Qc,null);if(l===null)throw new de(407,!1);let u=a.get($L,null),d=a.get(MT,null),f=a.get(y0,null),m={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=l.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",T=i?ZV(y,i,this.componentDef.encapsulation,a):XI(y,D,KL(D)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let q=null;T!==null&&(q=fy(T,a,!0));let ie=Ey(0,null,null,1,0,null,null,null,null,null,null),H=kf(null,ie,null,R,null,null,m,y,a,null,q);ly(H);let le,ge;try{let pe=this.componentDef,M,C=null;pe.findHostDirectiveDefs?(M=[],C=new Map,pe.findHostDirectiveDefs(pe,M,C),M.push(pe)):M=[pe];let I=QL(H,T),A=YL(I,T,pe,M,H,m,y);ge=lI(ie,Yn),T&&XL(y,pe,T,i),e!==void 0&&eB(ge,this.ngContentSelectors,e),le=ZL(A,pe,M,C,H,[tB]),Ty(ie,H,null)}finally{cy()}return new E0(this.componentType,le,Ya(ge,H),H,ge)}finally{qe(o)}}},E0=class extends v0{constructor(t,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new bs(r,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode.inputs,r;if(i!==null&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;Iy(o[Oe],o,r,t,e),this.previousInputValues.set(t,e);let s=po(this._tNode.index,o);xy(s)}}get injector(){return new fs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function QL(n,t){let e=n[Oe],i=Yn;return n[i]=t,Za(e,i,2,"#host",null)}function YL(n,t,e,i,r,o,s){let a=r[Oe];JL(i,n,t,s);let l=null;t!==null&&(l=fy(t,r[Ha]));let u=o.rendererFactory.createRenderer(t,e),d=16;e.signals?d=4096:e.onPush&&(d=64);let f=kf(r,pT(e),null,d,r[n.index],n,o,u,null,null,l);return a.firstCreatePass&&m0(a,n,i.length-1),Vf(r,f),r[n.index]=f}function JL(n,t,e,i){for(let r of n)t.mergedAttrs=$c(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(lf(t,t.mergedAttrs,!0),e!==null&&cT(i,e,t))}function ZL(n,t,e,i,r,o){let s=Vn(),a=r[Oe],l=ui(s,r);mT(a,r,s,e,null,i);for(let d=0;d<e.length;d++){let f=s.directiveStart+d,m=ws(r,a,f,s);ho(m,r)}gT(a,r,s),l&&ho(l,r);let u=ws(r,a,s.directiveStart+s.componentOffset,s);if(n[Oi]=r[Oi]=u,o!==null)for(let d of o)d(u,t);return wy(a,s,r),u}function XL(n,t,e,i){if(i)Y_(n,e,["ng-version","17.3.12"]);else{let{attrs:r,classes:o}=jk(t.selectors[0]);r&&Y_(n,e,r),o&&o.length>0&&lT(n,e,o.join(" "))}}function eB(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let o=e[r];i.push(o!=null?Array.from(o):null)}}function tB(){let n=Vn();xf(Te()[Oe],n)}var Bn=(()=>{class n{static{this.__NG_ELEMENT_ID__=nB}}return n})();function nB(){let n=Vn();return OT(n,Te())}var iB=Bn,AT=class extends iB{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Ya(this._hostTNode,this._hostLView)}get injector(){return new fs(this._hostTNode,this._hostLView)}get parentInjector(){let t=uy(this._hostTNode,this._hostLView);if(EI(t)){let e=ef(t,this._hostLView),i=Xh(t),r=e[Oe].data[i+8];return new fs(r,e)}else return new fs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=_S(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Qn}createEmbeddedView(t,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=dS(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,uS(this._hostTNode,s)),a}createComponent(t,e,i,r,o){let s=t&&!t2(t),a;if(s)a=e;else{let D=e||{};a=D.index,i=D.injector,r=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let l=s?t:new Wa(co(t)),u=i||this.parentInjector;if(!o&&l.ngModule==null){let T=(s?u:this.parentInjector).get(an,null);T&&(o=T)}let d=co(l.componentType??{}),f=dS(this._lContainer,d?.id??null),m=f?.firstChild??null,y=l.create(u,r,m,o);return this.insertImpl(y.hostView,a,uS(this._hostTNode,f)),y}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(d2(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[ln],u=new AT(l,l[Jn],l[ln]);u.detach(u.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return DL(s,r,o,i),t.attachToViewContainerRef(),LS(j_(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=_S(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=f0(this._lContainer,e);i&&(Yh(j_(this._lContainer),e),nT(i[Oe],i))}detach(t){let e=this._adjustIndex(t,-1),i=f0(this._lContainer,e);return i&&Yh(j_(this._lContainer),e)!=null?new bs(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function _S(n){return n[Zh]}function j_(n){return n[Zh]||(n[Zh]=[])}function OT(n,t){let e,i=t[n.index];return Or(i)?e=i:(e=_T(i,t,null,n),t[n.index]=e,Vf(t,e)),oB(e,t,n,i),new AT(e,n,t)}function rB(n,t){let e=n[Ct],i=e.createComment(""),r=ui(t,n),o=yy(e,r);return of(e,o,i,UV(e,r),!1),i}var oB=lB,sB=()=>!1;function aB(n,t,e){return sB(n,t,e)}function lB(n,t,e,i){if(n[_s])return;let r;e.type&8?r=Zi(i):r=rB(t,e),n[_s]=r}var D0=class n{constructor(t){this.queryList=t,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},S0=class n{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)Ay(t,e).matches!==null&&this.queries[e].setDirty()}},I0=class{constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=gB(t):this.predicate=t}},T0=class n{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},x0=class n{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,e,cB(e,o)),this.matchTNodeWithReadOption(t,e,zh(e,t,o,!1,!1))}else i===Ni?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,zh(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===cn||r===Bn||r===Ni&&e.type&4)this.addMatch(e.index,-2);else{let o=zh(e,t,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function cB(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function uB(n,t){return n.type&11?Ya(n,t):n.type&4?Lf(n,t):null}function dB(n,t,e,i){return e===-1?uB(t,n):e===-2?hB(n,t,i):ws(n,n[Oe],e,t)}function hB(n,t,e){if(e===cn)return Ya(t,n);if(e===Ni)return Lf(t,n);if(e===Bn)return OT(t,n)}function RT(n,t,e,i){let r=t[Ir].queries[i];if(r.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let d=o[u];a.push(dB(t,d,s[l+1],e.metadata.read))}}r.matches=a}return r.matches}function M0(n,t,e,i){let r=n.queries.getByIndex(e),o=r.matches;if(o!==null){let s=RT(n,t,r,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],d=t[-l];for(let f=Qn;f<d.length;f++){let m=d[f];m[eu]===m[ln]&&M0(m[Oe],m,u,i)}if(d[za]!==null){let f=d[za];for(let m=0;m<f.length;m++){let y=f[m];M0(y[Oe],y,u,i)}}}}}return i}function fB(n,t){return n[Ir].queries[t].queryList}function pB(n,t,e){let i=new l0((e&4)===4);return tL(n,t,i,i.destroy),(t[Ir]??=new S0).queries.push(new D0(i))-1}function mB(n,t,e){let i=Pt();return i.firstCreatePass&&(_B(i,new I0(n,t,e),-1),(t&2)===2&&(i.staticViewQueries=!0)),pB(i,Te(),t)}function gB(n){return n.split(",").map(t=>t.trim())}function _B(n,t,e){n.queries===null&&(n.queries=new T0),n.queries.track(new x0(t,e))}function Ay(n,t){return n.queries.getByIndex(t)}function yB(n,t){let e=n[Oe],i=Ay(e,t);return i.crossesNgTemplate?M0(e,n,t,[]):RT(e,n,i,t)}function vB(n){return typeof n=="function"&&n[Er]!==void 0}function Qe(n,t){ru("NgSignals");let e=fD(n),i=e[Er];return t?.equal&&(i.equal=t.equal),e.set=r=>oh(i,r),e.update=r=>pD(i,r),e.asReadonly=wB.bind(e),e}function wB(){let n=this[Er];if(n.readonlyFn===void 0){let t=()=>this();t[Er]=n,n.readonlyFn=t}return n.readonlyFn}function PT(n){return vB(n)&&typeof n.set=="function"}function bB(n){return Object.getPrototypeOf(n.prototype).constructor}function Zt(n){let t=bB(n.type),e=!0,i=[n];for(;t;){let r;if(uo(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new de(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let s=n;s.inputs=Bh(n.inputs),s.inputTransforms=Bh(n.inputTransforms),s.declaredInputs=Bh(n.declaredInputs),s.outputs=Bh(n.outputs);let a=r.hostBindings;a&&IB(n,a);let l=r.viewQuery,u=r.contentQueries;if(l&&DB(n,l),u&&SB(n,u),CB(n,r),ik(n.outputs,r.outputs),uo(r)&&r.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Zt&&(e=!1)}}t=Object.getPrototypeOf(t)}EB(i)}function CB(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];if(i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=t.inputTransforms[r]}}}function EB(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=$c(r.hostAttrs,e=$c(e,r.hostAttrs))}}function Bh(n){return n===Ua?{}:n===kn?[]:n}function DB(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function SB(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,o)=>{t(i,r,o),e(i,r,o)}:n.contentQueries=t}function IB(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}var fo=class{},Yc=class{};var A0=class extends fo{constructor(t,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cf(this);let r=WS(t);this._bootstrapComponents=ZI(r.bootstrap),this._r3Injector=RI(t,e,[{provide:fo,useValue:this},{provide:Bf,useValue:this.componentFactoryResolver},...i],Tn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},O0=class extends Yc{constructor(t){super(),this.moduleType=t}create(t){return new A0(this.moduleType,t,[])}};var uf=class extends fo{constructor(t){super(),this.componentFactoryResolver=new cf(this),this.instance=null;let e=new Gc([...t.providers,{provide:fo,useValue:this},{provide:Bf,useValue:this.componentFactoryResolver}],t.parent||wf(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Oy(n,t,e=null){return new uf({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var go=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new wt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NT(n){return Ry(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function TB(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function Ry(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function jf(n,t,e){return n[t]=e}function xB(n,t){return n[t]}function tr(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function Py(n,t,e,i){let r=tr(n,t,e);return tr(n,t+1,i)||r}function MB(n,t,e,i,r){let o=Py(n,t,e,i);return tr(n,t+2,r)||o}function AB(n){return(n.flags&32)===32}function OB(n,t,e,i,r,o,s,a,l){let u=t.consts,d=Za(t,n,4,s||null,qa(u,a));Sy(t,e,d,qa(u,l)),xf(t,d);let f=d.tView=Ey(2,d,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,d),f.queries=t.queries.embeddedTView(d)),d}function G(n,t,e,i,r,o,s,a){let l=Te(),u=Pt(),d=n+Yn,f=u.firstCreatePass?OB(d,u,l,t,e,i,r,o,s):u.data[d];Ds(f,!1);let m=RB(u,l,f,n);If()&&Nf(u,l,m,f),ho(m,l);let y=_T(m,l,m,f);return l[d]=y,Vf(l,y),aB(y,f,l),Ef(f)&&by(u,l,f),s!=null&&Cy(l,f,a),G}var RB=PB;function PB(n,t,e,i){return Tf(!0),t[Ct].createComment("")}function jn(n,t,e,i){let r=Te(),o=Df();if(tr(r,o,t)){let s=Pt(),a=Sf();gL(a,r,n,t,e,i)}return jn}function Ny(n,t,e,i){return tr(n,Df(),e)?t+ps(e)+i:Xn}function NB(n,t,e,i,r,o){let s=C2(),a=Py(n,s,e,r);return sy(2),a?t+ps(e)+i+ps(r)+o:Xn}function jh(n,t){return n<<17|t<<2}function Cs(n){return n>>17&32767}function FB(n){return(n&2)==2}function kB(n,t){return n&131071|t<<17}function R0(n){return n|2}function Ka(n){return(n&131068)>>2}function U_(n,t){return n&-131069|t<<2}function VB(n){return(n&1)===1}function P0(n){return n|1}function LB(n,t,e,i,r,o){let s=o?t.classBindings:t.styleBindings,a=Cs(s),l=Ka(s);n[i]=e;let u=!1,d;if(Array.isArray(e)){let f=e;d=f[1],(d===null||Xc(f,d)>0)&&(u=!0)}else d=e;if(r)if(l!==0){let m=Cs(n[a+1]);n[i+1]=jh(m,a),m!==0&&(n[m+1]=U_(n[m+1],i)),n[a+1]=kB(n[a+1],i)}else n[i+1]=jh(a,0),a!==0&&(n[a+1]=U_(n[a+1],i)),a=i;else n[i+1]=jh(l,0),a===0?a=i:n[l+1]=U_(n[l+1],i),l=i;u&&(n[i+1]=R0(n[i+1])),yS(n,d,i,!0),yS(n,d,i,!1),BB(t,d,n,i,o),s=jh(a,l),o?t.classBindings=s:t.styleBindings=s}function BB(n,t,e,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&Xc(o,t)>=0&&(e[i+1]=P0(e[i+1]))}function yS(n,t,e,i){let r=n[e+1],o=t===null,s=i?Cs(r):Ka(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];jB(l,t)&&(a=!0,n[s+1]=i?P0(u):R0(u)),s=i?Cs(u):Ka(u)}a&&(n[e+1]=i?R0(r):P0(r))}function jB(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?Xc(n,t)>=0:!1}var Mi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function UB(n){return n.substring(Mi.key,Mi.keyEnd)}function $B(n){return GB(n),FT(n,kT(n,0,Mi.textEnd))}function FT(n,t){let e=Mi.textEnd;return e===t?-1:(t=Mi.keyEnd=HB(n,Mi.key=t,e),kT(n,t,e))}function GB(n){Mi.key=0,Mi.keyEnd=0,Mi.value=0,Mi.valueEnd=0,Mi.textEnd=n.length}function kT(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function HB(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function b(n,t,e){let i=Te(),r=Df();if(tr(i,r,t)){let o=Pt(),s=Sf();Dy(o,s,i,n,t,i[Ct],e,!1)}return b}function N0(n,t,e,i,r){let o=t.inputs,s=r?"class":"style";Iy(n,e,o[s],s,i)}function Pr(n,t){return zB(n,t,null,!0),Pr}function hi(n){LT(JB,VT,n,!0)}function VT(n,t){for(let e=$B(t);e>=0;e=FT(t,e))_f(n,UB(t),!0)}function zB(n,t,e,i){let r=Te(),o=Pt(),s=sy(2);if(o.firstUpdatePass&&jT(o,n,s,i),t!==Xn&&tr(r,s,t)){let a=o.data[mo()];UT(o,a,r,r[Ct],n,r[s+1]=XB(t,e),i,s)}}function LT(n,t,e,i){let r=Pt(),o=sy(2);r.firstUpdatePass&&jT(r,null,o,i);let s=Te();if(e!==Xn&&tr(s,o,e)){let a=r.data[mo()];if($T(a,i)&&!BT(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=q_(l,e||"")),N0(r,a,s,e,i)}else ZB(r,a,s,s[Ct],s[o+1],s[o+1]=YB(n,t,e),i,o)}}function BT(n,t){return t>=n.expandoStartIndex}function jT(n,t,e,i){let r=n.data;if(r[e+1]===null){let o=r[mo()],s=BT(n,e);$T(o,i)&&t===null&&!s&&(t=!1),t=qB(r,o,t,i),LB(r,o,t,e,s,i)}}function qB(n,t,e,i){let r=T2(n),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=$_(null,n,t,e,i),e=Jc(e,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==r)if(e=$_(r,n,t,e,i),o===null){let l=WB(n,t,i);l!==void 0&&Array.isArray(l)&&(l=$_(null,n,t,l[1],i),l=Jc(l,t.attrs,i),KB(n,t,i,l))}else o=QB(n,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),e}function WB(n,t,e){let i=e?t.classBindings:t.styleBindings;if(Ka(i)!==0)return n[Cs(i)]}function KB(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[Cs(r)]=i}function QB(n,t,e){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=Jc(i,s,e)}return Jc(i,t.attrs,e)}function $_(n,t,e,i,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],i=Jc(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function Jc(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),_f(n,s,e?!0:t[++o]))}return n===void 0?null:n}function YB(n,t,e){if(e==null||e==="")return kn;let i=[],r=Ja(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&t(i,r);return i}function JB(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&_f(n,i,e)}function ZB(n,t,e,i,r,o,s,a){r===Xn&&(r=kn);let l=0,u=0,d=0<r.length?r[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let m=l<r.length?r[l+1]:void 0,y=u<o.length?o[u+1]:void 0,D=null,T;d===f?(l+=2,u+=2,m!==y&&(D=f,T=y)):f===null||d!==null&&d<f?(l+=2,D=d):(u+=2,D=f,T=y),D!==null&&UT(n,t,e,i,D,T,s,a),d=l<r.length?r[l]:null,f=u<o.length?o[u]:null}}function UT(n,t,e,i,r,o,s,a){if(!(t.type&3))return;let l=n.data,u=l[a+1],d=VB(u)?vS(l,t,e,r,Ka(u),s):void 0;if(!df(d)){df(o)||FB(u)&&(o=vS(l,null,e,r,a,s));let f=aI(mo(),e);WV(i,s,f,r,o)}}function vS(n,t,e,i,r,o){let s=t===null,a;for(;r>0;){let l=n[r],u=Array.isArray(l),d=u?l[1]:l,f=d===null,m=e[r+1];m===Xn&&(m=f?kn:void 0);let y=f?R_(m,i):d===i?m:void 0;if(u&&!df(y)&&(y=R_(l,i)),df(y)&&(a=y,s))return a;let D=n[r+1];r=s?Cs(D):Ka(D)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=R_(l,i))}return a}function df(n){return n!==void 0}function XB(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=Tn(Ja(n)))),n}function $T(n,t){return(n.flags&(t?8:16))!==0}function GT(n,t,e){let i=Te(),r=Ny(i,n,t,e);LT(_f,VT,r,!0)}function ej(n,t,e,i,r,o){let s=t.consts,a=qa(s,r),l=Za(t,n,2,i,a);return Sy(t,e,l,qa(s,o)),l.attrs!==null&&lf(l,l.attrs,!1),l.mergedAttrs!==null&&lf(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function _(n,t,e,i){let r=Te(),o=Pt(),s=Yn+n,a=r[Ct],l=o.firstCreatePass?ej(s,o,r,t,e,i):o.data[s],u=tj(o,r,l,a,t,n);r[s]=u;let d=Ef(l);return Ds(l,!0),cT(a,u,l),!AB(l)&&If()&&Nf(o,r,u,l),m2()===0&&ho(u,r),g2(),d&&(by(o,r,l),wy(o,l,r)),i!==null&&Cy(r,l),_}function v(){let n=Vn();ry()?oy():(n=n.parent,Ds(n,!1));let t=n;y2(t)&&v2(),_2();let e=Pt();return e.firstCreatePass&&(xf(e,n),ty(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&N2(t)&&N0(e,t,Te(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&F2(t)&&N0(e,t,Te(),t.stylesWithoutHost,!1),v}function Q(n,t,e,i){return _(n,t,e,i),v(),Q}var tj=(n,t,e,i,r,o)=>(Tf(!0),XI(i,r,A2()));function nj(n,t,e,i,r){let o=t.consts,s=qa(o,i),a=Za(t,n,8,"ng-container",s);s!==null&&lf(a,s,!0);let l=qa(o,r);return Sy(t,e,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function je(n,t,e){let i=Te(),r=Pt(),o=n+Yn,s=r.firstCreatePass?nj(o,r,i,t,e):r.data[o];Ds(s,!0);let a=ij(r,i,s,n);return i[o]=a,If()&&Nf(r,i,a,s),ho(a,i),Ef(s)&&(by(r,i,s),wy(r,s,i)),e!=null&&Cy(i,s),je}function Ue(){let n=Vn(),t=Pt();return ry()?oy():(n=n.parent,Ds(n,!1)),t.firstCreatePass&&(xf(t,n),ty(n)&&t.queries.elementEnd(n)),Ue}function Fy(n,t,e){return je(n,t,e),Ue(),Fy}var ij=(n,t,e,i)=>(Tf(!0),OV(t[Ct],""));function oe(){return Te()}var ds=void 0;function rj(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&i===0?1:5}var oj=["en",[["a","p"],["AM","PM"],ds],[["AM","PM"],ds,ds],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ds,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ds,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ds,"{1} 'at' {0}",ds],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",rj],jc={};function HT(n,t,e){typeof t!="string"&&(e=t,t=n[ft.LocaleId]),t=t.toLowerCase().replace(/_/g,"-"),jc[t]=n,e&&(jc[t][ft.ExtraData]=e)}function ei(n){let t=sj(n),e=wS(t);if(e)return e;let i=t.split("-")[0];if(e=wS(i),e)return e;if(i==="en")return oj;throw new de(701,!1)}function wS(n){return n in jc||(jc[n]=Kn.ng&&Kn.ng.common&&Kn.ng.common.locales&&Kn.ng.common.locales[n]),jc[n]}var ft=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(ft||{});function sj(n){return n.toLowerCase().replace(/_/g,"-")}var hf="en-US";var aj=hf;function lj(n){typeof n=="string"&&(aj=n.toLowerCase().replace(/_/g,"-"))}function $(n,t,e,i){let r=Te(),o=Pt(),s=Vn();return zT(o,r,r[Ct],s,n,t,i),$}function cj(n,t,e,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===i){let a=t[zc],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function zT(n,t,e,i,r,o,s){let a=Ef(i),u=n.firstCreatePass&&wT(n),d=t[Oi],f=vT(t),m=!0;if(i.type&3||s){let T=ui(i,t),R=s?s(T):T,q=f.length,ie=s?le=>s(Zi(le[i.index])):i.index,H=null;if(!s&&a&&(H=cj(n,t,r,i.index)),H!==null){let le=H.__ngLastListenerFn__||H;le.__ngNextListenerFn__=o,H.__ngLastListenerFn__=o,m=!1}else{o=CS(i,t,d,o,!1);let le=e.listen(R,r,o);f.push(o,le),u&&u.push(r,ie,q,q+1)}}else o=CS(i,t,d,o,!1);let y=i.outputs,D;if(m&&y!==null&&(D=y[r])){let T=D.length;if(T)for(let R=0;R<T;R+=2){let q=D[R],ie=D[R+1],ge=t[q][ie].subscribe(o),pe=f.length;f.push(o,ge),u&&u.push(r,i.index,pe,-(pe+1))}}}function bS(n,t,e,i){let r=qe(null);try{return Qi(6,t,e),e(i)!==!1}catch(o){return bT(n,o),!1}finally{Qi(7,t,e),qe(r)}}function CS(n,t,e,i,r){return function o(s){if(s===Function)return i;let a=n.componentOffset>-1?po(n.index,t):t;xy(a);let l=bS(t,e,i,s),u=o.__ngNextListenerFn__;for(;u;)l=bS(t,e,u,s)&&l,u=u.__ngNextListenerFn__;return r&&l===!1&&s.preventDefault(),l}}function x(n=1){return M2(n)}function uj(n,t){let e=null,i=Nk(n);for(let r=0;r<t.length;r++){let o=t[r];if(o==="*"){e=r;continue}if(i===null?GS(n,o,!0):Vk(i,o))return r}return e}function Xa(n){let t=Te()[Pi][Jn];if(!t.projection){let e=n?n.length:1,i=t.projection=Dk(e,null),r=i.slice(),o=t.child;for(;o!==null;){let s=n?uj(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function el(n,t=0,e){let i=Te(),r=Pt(),o=Za(r,Yn+n,16,null,e||null);o.projection===null&&(o.projection=t),oy(),(!i[Hc]||fI())&&(o.flags&32)!==32&&zV(r,i,o)}function Uf(n,t,e){return qT(n,"",t,"",e),Uf}function qT(n,t,e,i,r){let o=Te(),s=Ny(o,t,e,i);if(s!==Xn){let a=Pt(),l=Sf();Dy(a,l,o,n,s,o[Ct],r,!1)}return qT}function At(n,t,e){mB(n,t,e)}function Et(n){let t=Te(),e=Pt(),i=mI();ay(i+1);let r=Ay(e,i);if(n.dirty&&u2(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=yB(t,i);n.reset(o,K2),n.notifyOnChanges()}return!0}return!1}function Dt(){return fB(Te(),mI())}function dj(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function Lt(n){let t=b2();return cI(t,Yn+n)}function N(n,t=""){let e=Te(),i=Pt(),r=n+Yn,o=i.firstCreatePass?Za(i,r,1,t,null):i.data[r],s=hj(i,e,o,t,n);e[r]=s,If()&&Nf(i,e,s,o),Ds(o,!1)}var hj=(n,t,e,i,r)=>(Tf(!0),MV(t[Ct],i));function Je(n){return ke("",n,""),Je}function ke(n,t,e){let i=Te(),r=Ny(i,n,t,e);return r!==Xn&&CT(i,mo(),r),ke}function Ss(n,t,e,i,r){let o=Te(),s=NB(o,n,t,e,i,r);return s!==Xn&&CT(o,mo(),s),Ss}function xe(n,t,e){PT(t)&&(t=t());let i=Te(),r=Df();if(tr(i,r,t)){let o=Pt(),s=Sf();Dy(o,s,i,n,t,i[Ct],e,!1)}return xe}function Pe(n,t){let e=PT(n);return e&&n.set(t),e}function Me(n,t){let e=Te(),i=Pt(),r=Vn();return zT(i,e,e[Ct],r,n,t),Me}function fj(n,t,e){let i=Pt();if(i.firstCreatePass){let r=uo(n);F0(e,i.data,i.blueprint,r,!0),F0(t,i.data,i.blueprint,r,!1)}}function F0(n,t,e,i,r){if(n=In(n),Array.isArray(n))for(let o=0;o<n.length;o++)F0(n[o],t,e,i,r);else{let o=Pt(),s=Te(),a=Vn(),l=Ga(n)?n:In(n.provide),u=XS(n),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Ga(n)||!n.multi){let y=new vs(u,r,X),D=H_(l,t,r?d:d+m,f);D===-1?(r0(nf(a,s),o,l),G_(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(y),s.push(y)):(e[D]=y,s[D]=y)}else{let y=H_(l,t,d+m,f),D=H_(l,t,d,d+m),T=y>=0&&e[y],R=D>=0&&e[D];if(r&&!R||!r&&!T){r0(nf(a,s),o,l);let q=gj(r?mj:pj,e.length,r,i,u);!r&&R&&(e[D].providerFactory=q),G_(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(q),s.push(q)}else{let q=WT(e[r?D:y],u,!r&&i);G_(o,n,y>-1?y:D,q)}!r&&i&&R&&e[D].componentProviders++}}}function G_(n,t,e,i){let r=Ga(t),o=Wk(t);if(r||o){let l=(o?In(t.useClass):t).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let d=u.indexOf(e);d===-1?u.push(e,[i,l]):u[d+1].push(i,l)}else u.push(e,l)}}}function WT(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function H_(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function pj(n,t,e,i){return k0(this.multi,[])}function mj(n,t,e,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ws(e,e[Oe],this.providerFactory.index,i);o=a.slice(0,s),k0(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],k0(r,o);return o}function k0(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function gj(n,t,e,i,r){let o=new vs(n,e,X);return o.multi=[],o.index=t,o.componentProviders=0,WT(o,r,i&&!e),o}function Un(n,t=[]){return e=>{e.providersResolver=(i,r)=>fj(i,r?r(n):n,t)}}var _j=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=YS(!1,e.type),r=i.length>0?Oy([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=J({token:n,providedIn:"environment",factory:()=>new n(K(an))})}}return n})();function fe(n){ru("NgStandalone"),n.getStandaloneInjector=t=>t.get(_j).getOrCreateStandaloneInjector(n)}function KT(n,t,e){let i=tu()+n,r=Te();return r[i]===Xn?jf(r,i,e?t.call(e):t()):xB(r,i)}function Xt(n,t,e,i){return QT(Te(),tu(),n,t,e,i)}function ir(n,t,e,i,r){return yj(Te(),tu(),n,t,e,i,r)}function rr(n,t,e,i,r,o){return vj(Te(),tu(),n,t,e,i,r,o)}function ky(n,t){let e=n[t];return e===Xn?void 0:e}function QT(n,t,e,i,r,o){let s=t+e;return tr(n,s,r)?jf(n,s+1,o?i.call(o,r):i(r)):ky(n,s+1)}function yj(n,t,e,i,r,o,s){let a=t+e;return Py(n,a,r,o)?jf(n,a+2,s?i.call(s,r,o):i(r,o)):ky(n,a+2)}function vj(n,t,e,i,r,o,s,a){let l=t+e;return MB(n,l,r,o,s)?jf(n,l+3,a?i.call(a,r,o,s):i(r,o,s)):ky(n,l+3)}function Is(n,t){let e=Pt(),i,r=n+Yn;e.firstCreatePass?(i=wj(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=ms(i.type,!0)),s,a=Fn(X);try{let l=tf(!1),u=o();return tf(l),dj(e,Te(),r,u),u}finally{Fn(a)}}function wj(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function Ts(n,t,e){let i=n+Yn,r=Te(),o=cI(r,i);return bj(r,i)?QT(r,tu(),t,o.transform,e,o):o.transform(e)}function bj(n,t){return n[Oe].data[t].pure}function fi(n,t){return Lf(n,t)}var Tr=class{constructor(t){this.full=t;let e=t.split(".");this.major=e[0],this.minor=e[1],this.patch=e.slice(2).join(".")}},$f=new Tr("17.3.12"),Gf=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var YT=new re("");function _o(n){return!!n&&typeof n.then=="function"}function Vy(n){return!!n&&typeof n.subscribe=="function"}var JT=new re(""),ZT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=k(JT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=r();if(_o(o))e.push(o);else if(Vy(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hf=new re("");function Cj(){hD(()=>{throw new de(600,!1)})}function Ej(n){return n.isBoundToModule}function Dj(n,t,e){try{let i=e();return _o(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var yo=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(PI),this.afterRenderEffectManager=k(MT),this.externalTestViews=new Set,this.beforeRender=new Le,this.afterTick=new Le,this.componentTypes=[],this.components=[],this.isStable=k(go).hasPendingTasks.pipe(ee(e=>!e)),this._injector=k(an)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){let r=e instanceof af;if(!this._injector.get(ZT).done){let m=!r&&qS(e),y=!1;throw new de(405,y)}let s;r?s=e:s=this._injector.get(Bf).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=Ej(s)?void 0:this._injector.get(fo),l=i||s.selector,u=s.create(di.NULL,[],l,a),d=u.location.nativeElement,f=u.injector.get(YT,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),z_(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new de(101,!1);let i=qe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,qe(i)}}detectChangesInAttachedViews(e){let i=0,r=this.afterRenderEffectManager;for(;;){if(i===DT)throw new de(103,!1);if(e){let o=i===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)Sj(s,o,a)}if(i++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>V0(o))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>V0(o))))break}}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;z_(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let i=this._injector.get(Hf,[]);[...this._bootstrapListeners,...i].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>z_(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new de(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function z_(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Sj(n,t,e){!t&&!V0(n)||Ij(n,e,t)}function V0(n){return iy(n)}function Ij(n,t,e){let i;e?(i=0,n[Ce]|=1024):n[Ce]&64?i=0:i=1,ST(n,t,i)}var L0=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},Ly=(()=>{class n{compileModuleSync(e){return new O0(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=WS(e),o=ZI(r.declarations).reduce((s,a)=>{let l=co(a);return l&&s.push(new Wa(l)),s},[]);return new L0(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Tj=(()=>{class n{constructor(){this.zone=k(Fe),this.applicationRef=k(yo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xj(n){return[{provide:Fe,useFactory:n},{provide:$a,multi:!0,useFactory:()=>{let t=k(Tj,{optional:!0});return()=>t.initialize()}},{provide:$a,multi:!0,useFactory:()=>{let t=k(Rj);return()=>{t.initialize()}}},{provide:PI,useFactory:Mj}]}function Mj(){let n=k(Fe),t=k(Xi);return e=>n.runOutsideAngular(()=>t.handleError(e))}function Aj(n){let t=xj(()=>new Fe(Oj(n)));return Es([[],t])}function Oj(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Rj=(()=>{class n{constructor(){this.subscription=new vt,this.initialized=!1,this.zone=k(Fe),this.pendingTasks=k(go)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Pj(){return typeof $localize<"u"&&$localize.locale||hf}var zf=new re("",{providedIn:"root",factory:()=>k(zf,Ne.Optional|Ne.SkipSelf)||Pj()});var XT=new re("");var Wh=null;function Nj(n=[],t){return di.create({name:t,providers:[{provide:vf,useValue:"platform"},{provide:XT,useValue:new Set([()=>Wh=null])},...n]})}function Fj(n=[]){if(Wh)return Wh;let t=Nj(n);return Wh=t,Cj(),kj(t),t}function kj(n){n.get(hy,null)?.forEach(e=>e())}function By(){return!1}var Fi=(()=>{class n{static{this.__NG_ELEMENT_ID__=Vj}}return n})();function Vj(n){return Lj(Vn(),Te(),(n&16)===16)}function Lj(n,t,e){if(Cf(n)&&!e){let i=po(n.index,t);return new bs(i,i)}else if(n.type&47){let i=t[Pi];return new bs(i,t)}return null}var B0=class{constructor(){}supports(t){return NT(t)}create(t){return new j0(t)}},Bj=(n,t)=>t,j0=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Bj}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let s=!i||e&&e.currentIndex<ES(i,r,o)?e:i,a=ES(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,d=l-r;if(u!=d){for(let m=0;m<u;m++){let y=m<o.length?o[m]:o[m]=0,D=y+m;d<=D&&D<u&&(o[m]=y+1)}let f=s.previousIndex;o[f]=d-u}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!NT(t))throw new de(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),i=!0):(i&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,TB(t,a=>{s=this._trackByFn(r,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new U0(e,i),o,r)),t}_verifyReinsertion(t,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new ff),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ff),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},U0=class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},$0=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},ff=class{constructor(){this.map=new Map}put(t){let e=t.trackById,i=this.map.get(e);i||(i=new $0,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ES(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}var G0=class{constructor(){}supports(t){return t instanceof Map||Ry(t)}create(){return new H0}},H0=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||Ry(t)))throw new de(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let r=this._records.get(t);this._maybeAddToChanges(r,e);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new z0(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}},z0=class{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function DS(){return new jy([new B0])}var jy=(()=>{class n{static{this.\u0275prov=J({token:n,providedIn:"root",factory:DS})}constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||DS()),deps:[[n,new Q0,new xr]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new de(901,!1)}}return n})();function SS(){return new Uy([new G0])}var Uy=(()=>{class n{static{this.\u0275prov=J({token:n,providedIn:"root",factory:SS})}constructor(e){this.factories=e}static create(e,i){if(i){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||SS()),deps:[[n,new Q0,new xr]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i)return i;throw new de(901,!1)}}return n})();function ex(n){try{let{rootComponent:t,appProviders:e,platformProviders:i}=n,r=Fj(i),o=[Aj(),...e||[]],a=new uf({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Fe);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(Xi,null),d;l.runOutsideAngular(()=>{d=l.onError.subscribe({next:y=>{u.handleError(y)}})});let f=()=>a.destroy(),m=r.get(XT);return m.add(f),a.onDestroy(()=>{d.unsubscribe(),m.delete(f)}),Dj(u,l,()=>{let y=a.get(ZT);return y.runInitializers(),y.donePromise.then(()=>{let D=a.get(zf,hf);lj(D||hf);let T=a.get(yo);return t!==void 0&&T.bootstrap(t),T})})})}catch(t){return Promise.reject(t)}}function ou(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function $y(n){let t=qe(null);try{return n()}finally{qe(t)}}var jj=new re("",{providedIn:"root",factory:()=>k(Uj)}),Uj=(()=>{class n{static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>new q0})}}return n})(),q0=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=k(go),this.taskId=null}scheduleEffect(t){if(this.enqueue(t),this.taskId===null){let e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(t){let e=t.creationZone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||(this.queuedEffectCount++,i.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}},W0=class{constructor(t,e,i,r,o,s){this.scheduler=t,this.effectFn=e,this.creationZone=i,this.injector=o,this.watcher=mD(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(e){this.injector.get(Xi,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function xs(n,t){ru("NgSignals"),!t?.injector&&e2(xs);let e=t?.injector??k(di),i=t?.manualCleanup!==!0?e.get(Mf):null,r=new W0(e.get(jj),n,typeof Zone>"u"?null:Zone.current,i,e,t?.allowSignalWrites??!1),o=e.get(Fi,null,{optional:!0});return!o||!(o._lView[Ce]&8)?r.watcher.notify():(o._lView[$h]??=[]).push(r.watcher.notify),r}function qf(n,t){let e=co(n),i=t.elementInjector||wf();return new Wa(e).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}var cx=null;function Vr(){return cx}function ux(n){cx??=n}var tp=class{};var en=new re(""),dx=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>k(Hj),providedIn:"platform"})}}return n})();var Hj=(()=>{class n extends dx{constructor(){super(),this._doc=k(en),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vr().getBaseHref(this._doc)}onPopState(e){let i=Vr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=Vr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function hx(n,t){if(n.length==0)return t;if(t.length==0)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?n+t.substring(1):e==1?n+t:n+"/"+t}function tx(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,i=e-(n[e-1]==="/"?1:0);return n.slice(0,i)+n.slice(e)}function Ms(n){return n&&n[0]!=="?"?"?"+n:n}var op=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>k(fx),providedIn:"root"})}}return n})(),zj=new re(""),fx=(()=>{class n extends op{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??k(en).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return hx(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+Ms(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+Ms(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+Ms(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(K(dx),K(zj,8))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var au=(()=>{class n{constructor(e){this._subject=new se,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=Kj(tx(nx(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Ms(i))}normalize(e){return n.stripTrailingSlash(Wj(this._basePath,nx(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ms(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ms(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static{this.normalizeQueryParams=Ms}static{this.joinWithSlash=hx}static{this.stripTrailingSlash=tx}static{this.\u0275fac=function(i){return new(i||n)(K(op))}}static{this.\u0275prov=J({token:n,factory:()=>qj(),providedIn:"root"})}}return n})();function qj(){return new au(K(op))}function Wj(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function nx(n){return n.replace(/\/index.html$/,"")}function Kj(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var px=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(px||{});var yn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(yn||{}),it=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(it||{}),ti=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(ti||{}),ni={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Qj(n){return ei(n)[ft.LocaleId]}function mx(n,t,e){let i=ei(n),r=[i[ft.DayPeriodsFormat],i[ft.DayPeriodsStandalone]],o=pi(r,t);return pi(o,e)}function gx(n,t,e){let i=ei(n),r=[i[ft.DaysFormat],i[ft.DaysStandalone]],o=pi(r,t);return pi(o,e)}function _x(n,t,e){let i=ei(n),r=[i[ft.MonthsFormat],i[ft.MonthsStandalone]],o=pi(r,t);return pi(o,e)}function Yj(n,t){let i=ei(n)[ft.Eras];return pi(i,t)}function Wf(n,t){let e=ei(n);return pi(e[ft.DateFormat],t)}function Kf(n,t){let e=ei(n);return pi(e[ft.TimeFormat],t)}function Qf(n,t){let i=ei(n)[ft.DateTimeFormat];return pi(i,t)}function Fr(n,t){let e=ei(n),i=e[ft.NumberSymbols][t];if(typeof i>"u"){if(t===ni.CurrencyDecimal)return e[ft.NumberSymbols][ni.Decimal];if(t===ni.CurrencyGroup)return e[ft.NumberSymbols][ni.Group]}return i}function Jj(n,t){return ei(n)[ft.NumberFormats][t]}function yx(n){if(!n[ft.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ft.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Zj(n){let t=ei(n);return yx(t),(t[ft.ExtraData][2]||[]).map(i=>typeof i=="string"?Gy(i):[Gy(i[0]),Gy(i[1])])}function Xj(n,t,e){let i=ei(n);yx(i);let r=[i[ft.ExtraData][0],i[ft.ExtraData][1]],o=pi(r,t)||[];return pi(o,e)||[]}function pi(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function Gy(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var eU=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Yf={},tU=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,kr=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(kr||{}),Xe=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Xe||{}),Ze=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Ze||{});function lu(n,t,e,i){let r=uU(n);t=Nr(e,t)||t;let s=[],a;for(;t;)if(a=tU.exec(t),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;t=d}else{s.push(t);break}let l=r.getTimezoneOffset();i&&(l=wx(i,l),r=cU(r,i,!0));let u="";return s.forEach(d=>{let f=aU(d);u+=f?f(r,e,l):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function np(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Nr(n,t){let e=Qj(n);if(Yf[e]??={},Yf[e][t])return Yf[e][t];let i="";switch(t){case"shortDate":i=Wf(n,ti.Short);break;case"mediumDate":i=Wf(n,ti.Medium);break;case"longDate":i=Wf(n,ti.Long);break;case"fullDate":i=Wf(n,ti.Full);break;case"shortTime":i=Kf(n,ti.Short);break;case"mediumTime":i=Kf(n,ti.Medium);break;case"longTime":i=Kf(n,ti.Long);break;case"fullTime":i=Kf(n,ti.Full);break;case"short":let r=Nr(n,"shortTime"),o=Nr(n,"shortDate");i=Jf(Qf(n,ti.Short),[r,o]);break;case"medium":let s=Nr(n,"mediumTime"),a=Nr(n,"mediumDate");i=Jf(Qf(n,ti.Medium),[s,a]);break;case"long":let l=Nr(n,"longTime"),u=Nr(n,"longDate");i=Jf(Qf(n,ti.Long),[l,u]);break;case"full":let d=Nr(n,"fullTime"),f=Nr(n,"fullDate");i=Jf(Qf(n,ti.Full),[d,f]);break}return i&&(Yf[e][t]=i),i}function Jf(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function ki(n,t,e="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),o+s}function nU(n,t){return ki(n,3).substring(0,t)}function Bt(n,t,e=0,i=!1,r=!1){return function(o,s){let a=iU(n,o);if((e>0||a>-e)&&(a+=e),n===Xe.Hours)a===0&&e===-12&&(a=12);else if(n===Xe.FractionalSeconds)return nU(a,t);let l=Fr(s,ni.MinusSign);return ki(a,t,l,i,r)}}function iU(n,t){switch(n){case Xe.FullYear:return t.getFullYear();case Xe.Month:return t.getMonth();case Xe.Date:return t.getDate();case Xe.Hours:return t.getHours();case Xe.Minutes:return t.getMinutes();case Xe.Seconds:return t.getSeconds();case Xe.FractionalSeconds:return t.getMilliseconds();case Xe.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function at(n,t,e=yn.Format,i=!1){return function(r,o){return rU(r,o,n,t,e,i)}}function rU(n,t,e,i,r,o){switch(e){case Ze.Months:return _x(t,r,i)[n.getMonth()];case Ze.Days:return gx(t,r,i)[n.getDay()];case Ze.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let u=Zj(t),d=Xj(t,r,i),f=u.findIndex(m=>{if(Array.isArray(m)){let[y,D]=m,T=s>=y.hours&&a>=y.minutes,R=s<D.hours||s===D.hours&&a<D.minutes;if(y.hours<D.hours){if(T&&R)return!0}else if(T||R)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return mx(t,r,i)[s<12?0:1];case Ze.Eras:return Yj(t,i)[n.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function Zf(n){return function(t,e,i){let r=-1*i,o=Fr(e,ni.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case kr.Short:return(r>=0?"+":"")+ki(s,2,o)+ki(Math.abs(r%60),2,o);case kr.ShortGMT:return"GMT"+(r>=0?"+":"")+ki(s,1,o);case kr.Long:return"GMT"+(r>=0?"+":"")+ki(s,2,o)+":"+ki(Math.abs(r%60),2,o);case kr.Extended:return i===0?"Z":(r>=0?"+":"")+ki(s,2,o)+":"+ki(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var oU=0,ep=4;function sU(n){let t=np(n,oU,1).getDay();return np(n,0,1+(t<=ep?ep:ep+7)-t)}function vx(n){let t=n.getDay(),e=t===0?-3:ep-t;return np(n.getFullYear(),n.getMonth(),n.getDate()+e)}function Hy(n,t=!1){return function(e,i){let r;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{let o=vx(e),s=sU(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return ki(r,n,Fr(i,ni.MinusSign))}}function Xf(n,t=!1){return function(e,i){let o=vx(e).getFullYear();return ki(o,n,Fr(i,ni.MinusSign),t)}}var zy={};function aU(n){if(zy[n])return zy[n];let t;switch(n){case"G":case"GG":case"GGG":t=at(Ze.Eras,it.Abbreviated);break;case"GGGG":t=at(Ze.Eras,it.Wide);break;case"GGGGG":t=at(Ze.Eras,it.Narrow);break;case"y":t=Bt(Xe.FullYear,1,0,!1,!0);break;case"yy":t=Bt(Xe.FullYear,2,0,!0,!0);break;case"yyy":t=Bt(Xe.FullYear,3,0,!1,!0);break;case"yyyy":t=Bt(Xe.FullYear,4,0,!1,!0);break;case"Y":t=Xf(1);break;case"YY":t=Xf(2,!0);break;case"YYY":t=Xf(3);break;case"YYYY":t=Xf(4);break;case"M":case"L":t=Bt(Xe.Month,1,1);break;case"MM":case"LL":t=Bt(Xe.Month,2,1);break;case"MMM":t=at(Ze.Months,it.Abbreviated);break;case"MMMM":t=at(Ze.Months,it.Wide);break;case"MMMMM":t=at(Ze.Months,it.Narrow);break;case"LLL":t=at(Ze.Months,it.Abbreviated,yn.Standalone);break;case"LLLL":t=at(Ze.Months,it.Wide,yn.Standalone);break;case"LLLLL":t=at(Ze.Months,it.Narrow,yn.Standalone);break;case"w":t=Hy(1);break;case"ww":t=Hy(2);break;case"W":t=Hy(1,!0);break;case"d":t=Bt(Xe.Date,1);break;case"dd":t=Bt(Xe.Date,2);break;case"c":case"cc":t=Bt(Xe.Day,1);break;case"ccc":t=at(Ze.Days,it.Abbreviated,yn.Standalone);break;case"cccc":t=at(Ze.Days,it.Wide,yn.Standalone);break;case"ccccc":t=at(Ze.Days,it.Narrow,yn.Standalone);break;case"cccccc":t=at(Ze.Days,it.Short,yn.Standalone);break;case"E":case"EE":case"EEE":t=at(Ze.Days,it.Abbreviated);break;case"EEEE":t=at(Ze.Days,it.Wide);break;case"EEEEE":t=at(Ze.Days,it.Narrow);break;case"EEEEEE":t=at(Ze.Days,it.Short);break;case"a":case"aa":case"aaa":t=at(Ze.DayPeriods,it.Abbreviated);break;case"aaaa":t=at(Ze.DayPeriods,it.Wide);break;case"aaaaa":t=at(Ze.DayPeriods,it.Narrow);break;case"b":case"bb":case"bbb":t=at(Ze.DayPeriods,it.Abbreviated,yn.Standalone,!0);break;case"bbbb":t=at(Ze.DayPeriods,it.Wide,yn.Standalone,!0);break;case"bbbbb":t=at(Ze.DayPeriods,it.Narrow,yn.Standalone,!0);break;case"B":case"BB":case"BBB":t=at(Ze.DayPeriods,it.Abbreviated,yn.Format,!0);break;case"BBBB":t=at(Ze.DayPeriods,it.Wide,yn.Format,!0);break;case"BBBBB":t=at(Ze.DayPeriods,it.Narrow,yn.Format,!0);break;case"h":t=Bt(Xe.Hours,1,-12);break;case"hh":t=Bt(Xe.Hours,2,-12);break;case"H":t=Bt(Xe.Hours,1);break;case"HH":t=Bt(Xe.Hours,2);break;case"m":t=Bt(Xe.Minutes,1);break;case"mm":t=Bt(Xe.Minutes,2);break;case"s":t=Bt(Xe.Seconds,1);break;case"ss":t=Bt(Xe.Seconds,2);break;case"S":t=Bt(Xe.FractionalSeconds,1);break;case"SS":t=Bt(Xe.FractionalSeconds,2);break;case"SSS":t=Bt(Xe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Zf(kr.Short);break;case"ZZZZZ":t=Zf(kr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Zf(kr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Zf(kr.Long);break;default:return null}return zy[n]=t,t}function wx(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function lU(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function cU(n,t,e){let i=e?-1:1,r=n.getTimezoneOffset(),o=wx(t,r);return lU(n,i*(o-r))}function uU(n){if(ix(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(a=>+a);return np(r,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(eU))return dU(i)}let t=new Date(n);if(!ix(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function dU(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-i,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,u),t}function ix(n){return n instanceof Date&&!isNaN(n.valueOf())}var hU=/^(\d+)?\.((\d+)(-(\d+))?)?$/,rx=22,ip=".",su="0",fU=";",pU=",",qy="#";function mU(n,t,e,i,r,o,s=!1){let a="",l=!1;if(!isFinite(n))a=Fr(e,ni.Infinity);else{let u=yU(n);s&&(u=_U(u));let d=t.minInt,f=t.minFrac,m=t.maxFrac;if(o){let ie=o.match(hU);if(ie===null)throw new Error(`${o} is not a valid digit info`);let H=ie[1],le=ie[3],ge=ie[5];H!=null&&(d=Wy(H)),le!=null&&(f=Wy(le)),ge!=null?m=Wy(ge):le!=null&&f>m&&(m=f)}vU(u,f,m);let y=u.digits,D=u.integerLen,T=u.exponent,R=[];for(l=y.every(ie=>!ie);D<d;D++)y.unshift(0);for(;D<0;D++)y.unshift(0);D>0?R=y.splice(D,y.length):(R=y,y=[0]);let q=[];for(y.length>=t.lgSize&&q.unshift(y.splice(-t.lgSize,y.length).join(""));y.length>t.gSize;)q.unshift(y.splice(-t.gSize,y.length).join(""));y.length&&q.unshift(y.join("")),a=q.join(Fr(e,i)),R.length&&(a+=Fr(e,r)+R.join("")),T&&(a+=Fr(e,ni.Exponential)+"+"+T)}return n<0&&!l?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function cu(n,t,e){let i=Jj(t,px.Decimal),r=gU(i,Fr(t,ni.MinusSign));return mU(n,r,t,ni.Group,ni.Decimal,e)}function gU(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(fU),r=i[0],o=i[1],s=r.indexOf(ip)!==-1?r.split(ip):[r.substring(0,r.lastIndexOf(su)+1),r.substring(r.lastIndexOf(su)+1)],a=s[0],l=s[1]||"";e.posPre=a.substring(0,a.indexOf(qy));for(let d=0;d<l.length;d++){let f=l.charAt(d);f===su?e.minFrac=e.maxFrac=d+1:f===qy?e.maxFrac=d+1:e.posSuf+=f}let u=a.split(pU);if(e.gSize=u[1]?u[1].length:0,e.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let d=r.length-e.posPre.length-e.posSuf.length,f=o.indexOf(qy);e.negPre=o.substring(0,f).replace(/'/g,""),e.negSuf=o.slice(f+d).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function _U(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function yU(n){let t=Math.abs(n)+"",e=0,i,r,o,s,a;for((r=t.indexOf(ip))>-1&&(t=t.replace(ip,"")),(o=t.search(/e/i))>0?(r<0&&(r=o),r+=+t.slice(o+1),t=t.substring(0,o)):r<0&&(r=t.length),o=0;t.charAt(o)===su;o++);if(o===(a=t.length))i=[0],r=1;else{for(a--;t.charAt(a)===su;)a--;for(r-=o,i=[],s=0;o<=a;o++,s++)i[s]=Number(t.charAt(o))}return r>rx&&(i=i.splice(0,rx-1),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}function vU(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(t,r),e),s=o+n.integerLen,a=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let f=s;f<i.length;f++)i[f]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let f=1;f<s;f++)i[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let l=o!==0,u=t+n.integerLen,d=i.reduceRight(function(f,m,y,D){return m=m+f,D[y]=m<10?m:m-10,l&&(D[y]===0&&y>=u?D.pop():l=!1),m>=10?1:0},0);d&&(i.unshift(d),n.integerLen++)}function Wy(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}function bx(n,t,e){return HT(n,t,e)}function sp(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var Ky=/\s+/,ox=[],Ot=(()=>{class n{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=ox,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(Ky):ox}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Ky):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(Ky).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)(X(cn),X(nr))}}static{this.\u0275dir=We({type:n,selectors:[["","ngClass",""]],inputs:{klass:[bt.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Qy=class{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},lt=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Qy(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),sx(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);sx(o,r)})}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(X(Bn),X(Ni),X(jy))}}static{this.\u0275dir=We({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function sx(n,t){n.context.$implicit=t.item}var Ye=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Yy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ax("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ax("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(X(Bn),X(Ni))}}static{this.\u0275dir=We({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Yy=class{constructor(){this.$implicit=null,this.ngIf=null}};function ax(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Tn(t)}'.`)}var wU=!0,rp=class{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}},nl=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){let i=wU?e===this._ngSwitch:e==this._ngSwitch;return this._lastCasesMatched||=i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(let i of this._defaultViews)i.enforceState(e)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=We({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}}return n})(),ap=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new rp(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static{this.\u0275fac=function(i){return new(i||n)(X(Bn),X(Ni),X(nl,9))}}static{this.\u0275dir=We({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}}return n})(),lp=(()=>{class n{constructor(e,i,r){r._addDefault(new rp(e,i))}static{this.\u0275fac=function(i){return new(i||n)(X(Bn),X(Ni),X(nl,9))}}static{this.\u0275dir=We({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0})}}return n})();var $n=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,o]=e.split("."),s=r.indexOf("-")===-1?void 0:er.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static{this.\u0275fac=function(i){return new(i||n)(X(cn),X(Uy),X(nr))}}static{this.\u0275dir=We({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),Xy=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static{this.\u0275fac=function(i){return new(i||n)(X(Bn))}}static{this.\u0275dir=We({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[xn]})}}return n})();function bU(n,t){return new de(2100,!1)}var Jy=class{createSubscription(t,e){return $y(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){$y(()=>t.unsubscribe())}},Zy=class{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}},CU=new Zy,EU=new Jy,cp=(()=>{class n{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(_o(e))return CU;if(Vy(e))return EU;throw bU(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(i){return new(i||n)(X(Fi,16))}}static{this.\u0275pipe=yf({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var be=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({})}}return n})(),ev="browser",DU="server";function tv(n){return n===ev}function vo(n){return n===DU}var tl=class{};var du=class{},dp=class{},Vi=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var iv=class{encodeKey(t){return Cx(t)}encodeValue(t){return Cx(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function TU(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var xU=/%(\d[a-f0-9])/gi,MU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Cx(n){return encodeURIComponent(n).replace(xU,(t,e)=>MU[e]??t)}function up(n){return`${n}`}var mi=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new iv,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=TU(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(up):[up(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(up(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(up(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var rv=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function AU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ex(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Dx(n){return typeof Blob<"u"&&n instanceof Blob}function Sx(n){return typeof FormData<"u"&&n instanceof FormData}function OU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var uu=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(AU(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Vi,this.context??=new rv,!this.params)this.params=new mi,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ex(this.body)||Dx(this.body)||Sx(this.body)||OU(this.body)?this.body:this.body instanceof mi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Sx(this.body)?null:Dx(this.body)?this.body.type||null:Ex(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof mi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,d=t.params||this.params,f=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((m,y)=>m.set(y,t.setHeaders[y]),u)),t.setParams&&(d=Object.keys(t.setParams).reduce((m,y)=>m.set(y,t.setParams[y]),d)),new n(e,i,s,{params:d,headers:u,context:f,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},il=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(il||{}),hu=class{constructor(t,e=pp.Ok,i="OK"){this.headers=t.headers||new Vi,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},ov=class n extends hu{constructor(t={}){super(t),this.type=il.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},hp=class n extends hu{constructor(t={}){super(t),this.type=il.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},fp=class extends hu{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},pp=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(pp||{});function nv(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Li=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof uu)o=e;else{let l;r.headers instanceof Vi?l=r.headers:l=new Vi(r.headers);let u;r.params&&(r.params instanceof mi?u=r.params:u=new mi({fromObject:r.params})),o=new uu(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=ce(o).pipe(oo(l=>this.handler.handle(l)));if(e instanceof uu||r.observe==="events")return s;let a=s.pipe(dt(l=>l instanceof hp));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ee(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ee(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ee(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(ee(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new mi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,nv(r,i))}post(e,i,r={}){return this.request("POST",e,nv(r,i))}put(e,i,r={}){return this.request("PUT",e,nv(r,i))}static{this.\u0275fac=function(i){return new(i||n)(K(du))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();function Mx(n,t){return t(n)}function RU(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}function PU(n,t,e){return(i,r)=>Mr(e,()=>t(i,o=>n(o,r)))}var NU=new re(""),sv=new re(""),FU=new re(""),kU=new re("");function VU(){let n=null;return(t,e)=>{n===null&&(n=(k(NU,{optional:!0})??[]).reduceRight(RU,Mx));let i=k(go),r=i.add();return n(t,e).pipe(Sr(()=>i.remove(r)))}}var Ix=(()=>{class n extends du{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=k(go);let r=k(kU,{optional:!0});this.backend=r??e}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(sv),...this.injector.get(FU,[])]));this.chain=r.reduceRight((o,s)=>PU(o,s,this.injector),Mx)}let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Sr(()=>this.pendingTasks.remove(i)))}static{this.\u0275fac=function(i){return new(i||n)(K(dp),K(an))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();var LU=/^\)\]\}',?\n/;function BU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Tx=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new de(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Be(i.\u0275loadImpl()):ce(null)).pipe(nt(()=>new ye(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((T,R)=>s.setRequestHeader(T,R.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let T=e.detectContentTypeHeader();T!==null&&s.setRequestHeader("Content-Type",T)}if(e.responseType){let T=e.responseType.toLowerCase();s.responseType=T!=="json"?T:"text"}let a=e.serializeBody(),l=null,u=()=>{if(l!==null)return l;let T=s.statusText||"OK",R=new Vi(s.getAllResponseHeaders()),q=BU(s)||e.url;return l=new ov({headers:R,status:s.status,statusText:T,url:q}),l},d=()=>{let{headers:T,status:R,statusText:q,url:ie}=u(),H=null;R!==pp.NoContent&&(H=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=H?pp.Ok:0);let le=R>=200&&R<300;if(e.responseType==="json"&&typeof H=="string"){let ge=H;H=H.replace(LU,"");try{H=H!==""?JSON.parse(H):null}catch(pe){H=ge,le&&(le=!1,H={error:pe,text:H})}}le?(o.next(new hp({body:H,headers:T,status:R,statusText:q,url:ie||void 0})),o.complete()):o.error(new fp({error:H,headers:T,status:R,statusText:q,url:ie||void 0}))},f=T=>{let{url:R}=u(),q=new fp({error:T,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(q)},m=!1,y=T=>{m||(o.next(u()),m=!0);let R={type:il.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(R.total=T.total),e.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},D=T=>{let R={type:il.UploadProgress,loaded:T.loaded};T.lengthComputable&&(R.total=T.total),o.next(R)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),e.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",D)),s.send(a),o.next({type:il.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),e.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",D)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(K(tl))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),Ax=new re(""),jU="XSRF-TOKEN",UU=new re("",{providedIn:"root",factory:()=>jU}),$U="X-XSRF-TOKEN",GU=new re("",{providedIn:"root",factory:()=>$U}),mp=class{},HU=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=sp(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(K(en),K(Wt),K(UU))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();function zU(n,t){let e=n.url.toLowerCase();if(!k(Ax)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=k(mp).getToken(),r=k(GU);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var Ox=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ox||{});function qU(n,t){return{\u0275kind:n,\u0275providers:t}}function WU(...n){let t=[Li,Tx,Ix,{provide:du,useExisting:Ix},{provide:dp,useExisting:Tx},{provide:sv,useValue:zU,multi:!0},{provide:Ax,useValue:!0},{provide:mp,useClass:HU}];for(let e of n)t.push(...e.\u0275providers);return Es(t)}var xx=new re("");function KU(){return qU(Ox.LegacyInterceptors,[{provide:xx,useFactory:VU},{provide:sv,useExisting:xx,multi:!0}])}var Rx=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({providers:[WU(KU())]})}}return n})();var cv=class extends tp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},uv=class n extends cv{static makeCurrent(){ux(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=QU();return e==null?null:YU(e)}resetBaseElement(){fu=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return sp(document.cookie,t)}},fu=null;function QU(){return fu=fu||document.querySelector("base"),fu?fu.getAttribute("href"):null}function YU(n){return new URL(n,document.baseURI).pathname}var JU=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),dv=new re(""),Vx=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new de(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(K(dv),K(Fe))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),gp=class{constructor(t){this._doc=t}},av="ng-app-id",Lx=(()=>{class n{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=vo(o),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${av}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){let r=this.styleRef;if(r.has(e)){let o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(av),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(av,this.appId),e.appendChild(s),s}}addStyleToHost(e,i){let r=this.getStyleElement(e,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(K(en),K(dy),K(nu,8),K(Wt))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),lv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fv=/%COMP%/g,Bx="%COMP%",ZU=`_nghost-${Bx}`,XU=`_ngcontent-${Bx}`,e3=!0,t3=new re("",{providedIn:"root",factory:()=>e3});function n3(n){return XU.replace(fv,n)}function i3(n){return ZU.replace(fv,n)}function jx(n,t){return t.map(e=>e.replace(fv,n))}var Nx=(()=>{class n{constructor(e,i,r,o,s,a,l,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=vo(a),this.defaultRenderer=new pu(e,s,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ji.ShadowDom&&(i=Ee(Y({},i),{encapsulation:Ji.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof _p?r.applyToHost(e):r instanceof mu&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Ji.Emulated:o=new _p(l,u,i,this.appId,d,s,a,f);break;case Ji.ShadowDom:return new hv(l,u,e,i,s,a,this.nonce,f);default:o=new mu(l,u,i,d,s,a,f);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(K(Vx),K(Lx),K(dy),K(t3),K(en),K(Wt),K(Fe),K(nu))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),pu=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(lv[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Fx(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Fx(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new de(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=lv[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=lv[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(er.DashCase|er.Important)?t.style.setProperty(e,i,r&er.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&er.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=Vr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Fx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hv=class extends pu{constructor(t,e,i,r,o,s,a,l){super(t,o,s,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=jx(r.id,r.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},mu=class extends pu{constructor(t,e,i,r,o,s,a,l){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?jx(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},_p=class extends mu{constructor(t,e,i,r,o,s,a,l){let u=r+"-"+i.id;super(t,e,i,o,s,a,l,u),this.contentAttr=n3(u),this.hostAttr=i3(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},r3=(()=>{class n extends gp{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(K(en))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),kx=["alt","control","meta","shift"],o3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},s3={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},a3=(()=>{class n extends gp{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vr().onAndCancel(e,o.domEventName,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),kx.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,i){let r=o3[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),kx.forEach(s=>{if(s!==r){let a=s3[s];a(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(K(en))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();function Ux(n,t){return ex(Y({rootComponent:n},l3(t)))}function l3(n){return{appProviders:[...f3,...n?.providers??[]],platformProviders:h3}}function c3(){uv.makeCurrent()}function u3(){return new Xi}function d3(){return BI(document),document}var h3=[{provide:Wt,useValue:ev},{provide:hy,useValue:c3,multi:!0},{provide:en,useFactory:d3,deps:[]}];var f3=[{provide:vf,useValue:"root"},{provide:Xi,useFactory:u3,deps:[]},{provide:dv,useClass:r3,multi:!0,deps:[en,Fe,Wt]},{provide:dv,useClass:a3,multi:!0,deps:[en]},Nx,Lx,Vx,{provide:Qc,useExisting:Nx},{provide:tl,useClass:JU,deps:[]},[]];var $x=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(K(en))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ae="primary",Au=Symbol("RouteTitle"),yv=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function ll(n){return new yv(n)}function g3(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function _3(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!or(n[e],t[e]))return!1;return!0}function or(n,t){let e=n?vv(n):void 0,i=t?vv(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!Kx(n[r],t[r]))return!1;return!0}function vv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Kx(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function Qx(n){return n.length>0?n[n.length-1]:null}function Co(n){return E_(n)?n:_o(n)?Be(Promise.resolve(n)):ce(n)}var y3={exact:Jx,subset:Zx},Yx={exact:v3,subset:w3,ignored:()=>!0};function Gx(n,t,e){return y3[e.paths](n.root,t.root,e.matrixParams)&&Yx[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function v3(n,t){return or(n,t)}function Jx(n,t,e){if(!Os(n.segments,t.segments)||!wp(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!Jx(n.children[i],t.children[i],e))return!1;return!0}function w3(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Kx(n[e],t[e]))}function Zx(n,t,e){return Xx(n,t,t.segments,e)}function Xx(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Os(r,e)||t.hasChildren()||!wp(r,e,i))}else if(n.segments.length===e.length){if(!Os(n.segments,e)||!wp(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!Zx(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Os(n.segments,r)||!wp(n.segments,r,i)||!n.children[Ae]?!1:Xx(n.children[Ae],t,o,i)}}function wp(n,t,e){return t.every((i,r)=>Yx[e](n[r].parameters,i.parameters))}var wo=class{constructor(t=new et([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=ll(this.queryParams),this._queryParamMap}toString(){return E3.serialize(this)}},et=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bp(this)}},As=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=ll(this.parameters),this._parameterMap}toString(){return tM(this)}};function b3(n,t){return Os(n,t)&&n.every((e,i)=>or(e.parameters,t[i].parameters))}function Os(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function C3(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===Ae&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Ae&&(e=e.concat(t(r,i)))}),e}var zv=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>new Ep,providedIn:"root"})}}return n})(),Ep=class{parse(t){let e=new bv(t);return new wo(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${gu(t.root,!0)}`,i=I3(t.queryParams),r=typeof t.fragment=="string"?`#${D3(t.fragment)}`:"";return`${e}${i}${r}`}},E3=new Ep;function bp(n){return n.segments.map(t=>tM(t)).join("/")}function gu(n,t){if(!n.hasChildren())return bp(n);if(t){let e=n.children[Ae]?gu(n.children[Ae],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Ae&&i.push(`${r}:${gu(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=C3(n,(i,r)=>r===Ae?[gu(n.children[Ae],!1)]:[`${r}:${gu(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ae]!=null?`${bp(n)}/${e[0]}`:`${bp(n)}/(${e.join("//")})`}}function eM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yp(n){return eM(n).replace(/%3B/gi,";")}function D3(n){return encodeURI(n)}function wv(n){return eM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cp(n){return decodeURIComponent(n)}function Hx(n){return Cp(n.replace(/\+/g,"%20"))}function tM(n){return`${wv(n.path)}${S3(n.parameters)}`}function S3(n){return Object.entries(n).map(([t,e])=>`;${wv(t)}=${wv(e)}`).join("")}function I3(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${yp(e)}=${yp(r)}`).join("&"):`${yp(e)}=${yp(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var T3=/^[^\/()?;#]+/;function pv(n){let t=n.match(T3);return t?t[0]:""}var x3=/^[^\/()?;=#]+/;function M3(n){let t=n.match(x3);return t?t[0]:""}var A3=/^[^=?&#]+/;function O3(n){let t=n.match(A3);return t?t[0]:""}var R3=/^[^&#]+/;function P3(n){let t=n.match(R3);return t?t[0]:""}var bv=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new et([],{}):new et([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Ae]=new et(t,e)),i}parseSegment(){let t=pv(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(t),new As(Cp(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=M3(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=pv(this.remaining);r&&(i=r,this.capture(i))}t[Cp(e)]=Cp(i)}parseQueryParam(t){let e=O3(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=P3(this.remaining);s&&(i=s,this.capture(i))}let r=Hx(e),o=Hx(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=pv(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new de(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Ae);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[Ae]:new et([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new de(4011,!1)}};function nM(n){return n.segments.length>0?new et([],{[Ae]:n}):n}function iM(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=iM(r);if(i===Ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new et(n.segments,t);return N3(e)}function N3(n){if(n.numberOfChildren===1&&n.children[Ae]){let t=n.children[Ae];return new et(n.segments.concat(t.segments),t.children)}return n}function cl(n){return n instanceof wo}function F3(n,t,e=null,i=null){let r=rM(n);return oM(r,t,e,i)}function rM(n){let t;function e(o){let s={};for(let l of o.children){let u=e(l);s[l.outlet]=u}let a=new et(o.url,s);return o===n&&(t=a),a}let i=e(n.root),r=nM(i);return t??r}function oM(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return mv(r,r,r,e,i);let o=k3(t);if(o.toRoot())return mv(r,r,new et([],{}),e,i);let s=V3(o,r,n),a=s.processChildren?vu(s.segmentGroup,s.index,o.commands):aM(s.segmentGroup,s.index,o.commands);return mv(r,s.segmentGroup,a,e,i)}function Dp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Cu(n){return typeof n=="object"&&n!=null&&n.outlets}function mv(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===t?s=e:s=sM(n,t,e);let a=nM(iM(s));return new wo(a,o,r)}function sM(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=sM(o,t,e)}),new et(n.segments,i)}var Sp=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Dp(i[0]))throw new de(4003,!1);let r=i.find(Cu);if(r&&r!==Qx(i))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function k3(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Sp(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Sp(e,t,i)}var sl=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function V3(n,t,e){if(n.isAbsolute)return new sl(t,!0,0);if(!e)return new sl(t,!1,NaN);if(e.parent===null)return new sl(e,!0,0);let i=Dp(n.commands[0])?0:1,r=e.segments.length-1+i;return L3(e,r,n.numberOfDoubleDots)}function L3(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new de(4005,!1);r=i.segments.length}return new sl(i,!1,r-o)}function B3(n){return Cu(n[0])?n[0].outlets:{[Ae]:n}}function aM(n,t,e){if(n??=new et([],{}),n.segments.length===0&&n.hasChildren())return vu(n,t,e);let i=j3(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new et(n.segments.slice(0,i.pathIndex),{});return o.children[Ae]=new et(n.segments.slice(i.pathIndex),n.children),vu(o,0,r)}else return i.match&&r.length===0?new et(n.segments,{}):i.match&&!n.hasChildren()?Cv(n,t,e):i.match?vu(n,0,r):Cv(n,t,e)}function vu(n,t,e){if(e.length===0)return new et(n.segments,{});{let i=B3(e),r={};if(Object.keys(i).some(o=>o!==Ae)&&n.children[Ae]&&n.numberOfChildren===1&&n.children[Ae].segments.length===0){let o=vu(n.children[Ae],t,e);return new et(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=aM(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new et(n.segments,r)}}function j3(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let s=n.segments[r],a=e[i];if(Cu(a))break;let l=`${a}`,u=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!qx(l,u,s))return o;i+=2}else{if(!qx(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Cv(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(Cu(o)){let l=U3(o.outlets);return new et(i,l)}if(r===0&&Dp(e[0])){let l=n.segments[t];i.push(new As(l.path,zx(e[0]))),r++;continue}let s=Cu(o)?o.outlets[Ae]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&Dp(a)?(i.push(new As(s,zx(a))),r+=2):(i.push(new As(s,{})),r++)}return new et(i,{})}function U3(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Cv(new et([],{}),0,i))}),t}function zx(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function qx(n,t,e){return n==e.path&&or(t,e.parameters)}var wu="imperative",un=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(un||{}),gi=class{constructor(t,e){this.id=t,this.url=e}},Eu=class extends gi{constructor(t,e,i="imperative",r=null){super(t,e),this.type=un.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Rs=class extends gi{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=un.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ri=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ri||{}),Ev=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ev||{}),bo=class extends gi{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=un.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ps=class extends gi{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=un.NavigationSkipped}},Du=class extends gi{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=un.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ip=class extends gi{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=un.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dv=class extends gi{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=un.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sv=class extends gi{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=un.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Iv=class extends gi{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=un.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tv=class extends gi{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=un.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xv=class{constructor(t){this.route=t,this.type=un.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mv=class{constructor(t){this.route=t,this.type=un.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Av=class{constructor(t){this.snapshot=t,this.type=un.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ov=class{constructor(t){this.snapshot=t,this.type=un.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rv=class{constructor(t){this.snapshot=t,this.type=un.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pv=class{constructor(t){this.snapshot=t,this.type=un.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Su=class{},Iu=class{constructor(t){this.url=t}};var Nv=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Rp,this.attachRef=null}},Rp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Nv,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Tp=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Fv(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=Fv(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=kv(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return kv(t,this._root).map(e=>e.value)}};function Fv(n,t){if(n===t.value)return t;for(let e of t.children){let i=Fv(n,e);if(i)return i}return null}function kv(n,t){if(n===t.value)return[t];for(let e of t.children){let i=kv(n,e);if(i.length)return i.unshift(t),i}return[]}var ii=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function ol(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var xp=class extends Tp{constructor(t,e){super(t),this.snapshot=e,Wv(this,t)}toString(){return this.snapshot.toString()}};function lM(n){let t=$3(n),e=new wt([new As("",{})]),i=new wt({}),r=new wt({}),o=new wt({}),s=new wt(""),a=new vn(e,i,o,s,r,Ae,n,t.root);return a.snapshot=t.root,new xp(new ii(a,[]),t)}function $3(n){let t={},e={},i={},r="",o=new Tu([],t,i,r,e,Ae,n,null,{});return new Mp("",new ii(o,[]))}var vn=class{constructor(t,e,i,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ee(u=>u[Au]))??ce(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(t=>ll(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(t=>ll(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qv(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:Y(Y({},t.params),n.params),data:Y(Y({},t.data),n.data),resolve:Y(Y(Y(Y({},n.data),t.data),r?.data),n._resolvedData)}:i={params:Y({},n.params),data:Y({},n.data),resolve:Y(Y({},n.data),n._resolvedData??{})},r&&uM(r)&&(i.resolve[Au]=r.title),i}var Tu=class{get title(){return this.data?.[Au]}constructor(t,e,i,r,o,s,a,l,u){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ll(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ll(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Mp=class extends Tp{constructor(t,e){super(e),this.url=t,Wv(this,e)}toString(){return cM(this._root)}};function Wv(n,t){t.value._routerState=n,t.children.forEach(e=>Wv(n,e))}function cM(n){let t=n.children.length>0?` { ${n.children.map(cM).join(", ")} } `:"";return`${n.value}${t}`}function gv(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,or(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),or(t.params,e.params)||n.paramsSubject.next(e.params),_3(t.url,e.url)||n.urlSubject.next(e.url),or(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Vv(n,t){let e=or(n.params,t.params)&&b3(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Vv(n.parent,t.parent))}function uM(n){return typeof n.title=="string"||n.title===null}var Kv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ae,this.activateEvents=new se,this.deactivateEvents=new se,this.attachEvents=new se,this.detachEvents=new se,this.parentContexts=k(Rp),this.location=k(Bn),this.changeDetector=k(Fi),this.environmentInjector=k(an),this.inputBinder=k(Qv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Lv(e,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=We({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xn]})}}return n})(),Lv=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===vn?this.route:t===Rp?this.childContexts:this.parent.get(t,e)}},Qv=new re("");function G3(n,t,e){let i=xu(n,t._root,e?e._root:void 0);return new xp(i,t)}function xu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=H3(n,t,e);return new ii(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>xu(n,a)),s}}let i=z3(t.value),r=t.children.map(o=>xu(n,o));return new ii(i,r)}}function H3(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return xu(n,i,r);return xu(n,i)})}function z3(n){return new vn(new wt(n.url),new wt(n.params),new wt(n.queryParams),new wt(n.fragment),new wt(n.data),n.outlet,n.component,n)}var dM="ngNavigationCancelingError";function hM(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=cl(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=fM(!1,ri.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function fM(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[dM]=!0,e.cancellationCode=t,e}function q3(n){return pM(n)&&cl(n.url)}function pM(n){return!!n&&n[dM]}var W3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["ng-component"]],standalone:!0,features:[fe],decls:1,vars:0,template:function(i,r){i&1&&Q(0,"router-outlet")},dependencies:[Kv],encapsulation:2})}}return n})();function K3(n,t){return n.providers&&!n._injector&&(n._injector=Oy(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Yv(n){let t=n.children&&n.children.map(Yv),e=t?Ee(Y({},n),{children:t}):Y({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Ae&&(e.component=W3),e}function sr(n){return n.outlet||Ae}function Q3(n,t){let e=n.filter(i=>sr(i)===t);return e.push(...n.filter(i=>sr(i)!==t)),e}function Ou(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Y3=(n,t,e,i)=>ee(r=>(new Bv(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),Bv=class{constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),gv(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=ol(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=ol(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=ol(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=ol(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Pv(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Ov(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(gv(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),gv(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=Ou(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}},Ap=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},al=class{constructor(t,e){this.component=t,this.route=e}};function J3(n,t,e){let i=n._root,r=t?t._root:null;return _u(i,r,e,[i.value])}function Z3(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function dl(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!OS(n)?n:t.get(n):i}function _u(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=ol(t);return n.children.forEach(s=>{X3(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>bu(a,e.getContext(s),r)),r}function X3(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=e4(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Ap(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?_u(n,t,a?a.children:null,i,r):_u(n,t,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new al(a.outlet.component,s))}else s&&bu(t,a,r),r.canActivateChecks.push(new Ap(i)),o.component?_u(n,null,a?a.children:null,i,r):_u(n,null,e,i,r);return r}function e4(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Os(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Os(n.url,t.url)||!or(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vv(n,t)||!or(n.queryParams,t.queryParams);case"paramsChange":default:return!Vv(n,t)}}function bu(n,t,e){let i=ol(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?t?bu(s,t.children.getContext(o),e):bu(s,null,e):bu(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new al(t.outlet.component,r)):e.canDeactivateChecks.push(new al(null,r)):e.canDeactivateChecks.push(new al(null,r))}function Ru(n){return typeof n=="function"}function t4(n){return typeof n=="boolean"}function n4(n){return n&&Ru(n.canLoad)}function i4(n){return n&&Ru(n.canActivate)}function r4(n){return n&&Ru(n.canActivateChild)}function o4(n){return n&&Ru(n.canDeactivate)}function s4(n){return n&&Ru(n.canMatch)}function mM(n){return n instanceof Ti||n?.name==="EmptyError"}var vp=Symbol("INITIAL_VALUE");function ul(){return nt(n=>cs(n.map(t=>t.pipe(gn(1),Ki(vp)))).pipe(ee(t=>{for(let e of t)if(e!==!0){if(e===vp)return vp;if(e===!1||e instanceof wo)return e}return!0}),dt(t=>t!==vp),gn(1)))}function a4(n,t){return xt(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?ce(Ee(Y({},e),{guardsResult:!0})):l4(s,i,r,n).pipe(xt(a=>a&&t4(a)?c4(i,o,n,t):ce(a)),ee(a=>Ee(Y({},e),{guardsResult:a})))})}function l4(n,t,e,i){return Be(n).pipe(xt(r=>p4(r.component,r.route,e,t,i)),ci(r=>r!==!0,!0))}function c4(n,t,e,i){return Be(t).pipe(oo(r=>Wi(d4(r.route.parent,i),u4(r.route,i),f4(n,r.path,e),h4(n,r.route,e))),ci(r=>r!==!0,!0))}function u4(n,t){return n!==null&&t&&t(new Rv(n)),ce(!0)}function d4(n,t){return n!==null&&t&&t(new Av(n)),ce(!0)}function h4(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return ce(!0);let r=i.map(o=>Th(()=>{let s=Ou(t)??e,a=dl(o,s),l=i4(a)?a.canActivate(t,n):Mr(s,()=>a(t,n));return Co(l).pipe(ci())}));return ce(r).pipe(ul())}function f4(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>Z3(s)).filter(s=>s!==null).map(s=>Th(()=>{let a=s.guards.map(l=>{let u=Ou(s.node)??e,d=dl(l,u),f=r4(d)?d.canActivateChild(i,n):Mr(u,()=>d(i,n));return Co(f).pipe(ci())});return ce(a).pipe(ul())}));return ce(o).pipe(ul())}function p4(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return ce(!0);let s=o.map(a=>{let l=Ou(t)??r,u=dl(a,l),d=o4(u)?u.canDeactivate(n,t,e,i):Mr(l,()=>u(n,t,e,i));return Co(d).pipe(ci())});return ce(s).pipe(ul())}function m4(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return ce(!0);let o=r.map(s=>{let a=dl(s,n),l=n4(a)?a.canLoad(t,e):Mr(n,()=>a(t,e));return Co(l)});return ce(o).pipe(ul(),gM(i))}function gM(n){return g_(Mt(t=>{if(cl(t))throw hM(n,t)}),ee(t=>t===!0))}function g4(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return ce(!0);let o=r.map(s=>{let a=dl(s,n),l=s4(a)?a.canMatch(t,e):Mr(n,()=>a(t,e));return Co(l)});return ce(o).pipe(ul(),gM(i))}var Mu=class{constructor(t){this.segmentGroup=t||null}},Op=class extends Error{constructor(t){super(),this.urlTree=t}};function rl(n){return Ra(new Mu(n))}function _4(n){return Ra(new de(4e3,!1))}function y4(n){return Ra(fM(!1,ri.GuardRejected))}var jv=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ce(i);if(r.numberOfChildren>1||!r.children[Ae])return _4(t.redirectTo);r=r.children[Ae]}}applyRedirectCommands(t,e,i){let r=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e.startsWith("/"))throw new Op(r);return r}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new wo(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,r)}),new et(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new de(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},Uv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function v4(n,t,e,i,r){let o=Jv(n,t,e);return o.matched?(i=K3(t,i),g4(i,t,e,r).pipe(ee(s=>s===!0?o:Y({},Uv)))):ce(o)}function Jv(n,t,e){if(t.path==="**")return w4(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?Y({},Uv):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||g3)(e,n,t);if(!r)return Y({},Uv);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?Y(Y({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function w4(n){return{matched:!0,parameters:n.length>0?Qx(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Wx(n,t,e,i){return e.length>0&&E4(n,e,i)?{segmentGroup:new et(t,C4(i,new et(e,n.children))),slicedSegments:[]}:e.length===0&&D4(n,e,i)?{segmentGroup:new et(n.segments,b4(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new et(n.segments,n.children),slicedSegments:e}}function b4(n,t,e,i){let r={};for(let o of e)if(Pp(n,t,o)&&!i[sr(o)]){let s=new et([],{});r[sr(o)]=s}return Y(Y({},i),r)}function C4(n,t){let e={};e[Ae]=t;for(let i of n)if(i.path===""&&sr(i)!==Ae){let r=new et([],{});e[sr(i)]=r}return e}function E4(n,t,e){return e.some(i=>Pp(n,t,i)&&sr(i)!==Ae)}function D4(n,t,e){return e.some(i=>Pp(n,t,i))}function Pp(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function S4(n,t,e,i){return sr(n)!==i&&(i===Ae||!Pp(t,e,n))?!1:Jv(t,n,e).matched}function I4(n,t,e){return t.length===0&&!n.children[e]}var $v=class{};function T4(n,t,e,i,r,o,s="emptyOnly"){return new Gv(n,t,e,i,r,s,o).recognize()}var x4=31,Gv=class{constructor(t,e,i,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new jv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new de(4002,`'${t.segmentGroup}'`)}recognize(){let t=Wx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ee(e=>{let i=new Tu([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ae,this.rootComponentType,null,{}),r=new ii(i,e),o=new Mp("",r),s=F3(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Ae).pipe(ro(i=>{if(i instanceof Op)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Mu?this.noMatchError(i):i}))}inheritParamsAndData(t,e){let i=t.value,r=qv(i,e,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(t,e,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0).pipe(ee(o=>o instanceof ii?[o]:[]))}processChildren(t,e,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return Be(r).pipe(oo(o=>{let s=i.children[o],a=Q3(e,o);return this.processSegmentGroup(t,a,s,o)}),us((o,s)=>(o.push(...s),o)),so(null),A_(),xt(o=>{if(o===null)return rl(i);let s=_M(o);return M4(s),ce(s)}))}processSegment(t,e,i,r,o,s){return Be(e).pipe(oo(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,i,r,o,s).pipe(ro(l=>{if(l instanceof Mu)return ce(null);throw l}))),ci(a=>!!a),ro(a=>{if(mM(a))return I4(i,r,o)?ce(new $v):rl(i);throw a}))}processSegmentAgainstRoute(t,e,i,r,o,s,a){return S4(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s):rl(r):rl(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:u,remainingSegments:d}=Jv(e,r,o);if(!a)return rl(e);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>x4&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,f).pipe(xt(m=>this.processSegment(t,i,e,m.concat(d),s,!1)))}matchSegmentAgainstRoute(t,e,i,r,o){let s=v4(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),s.pipe(nt(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(nt(({routes:l})=>{let u=i._loadedInjector??t,{consumedSegments:d,remainingSegments:f,parameters:m}=a,y=new Tu(d,m,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,O4(i),sr(i),i.component??i._loadedComponent??null,i,R4(i)),{segmentGroup:D,slicedSegments:T}=Wx(e,d,f,l);if(T.length===0&&D.hasChildren())return this.processChildren(u,l,D).pipe(ee(q=>q===null?null:new ii(y,q)));if(l.length===0&&T.length===0)return ce(new ii(y,[]));let R=sr(i)===o;return this.processSegment(u,l,D,T,R?Ae:o,!0).pipe(ee(q=>new ii(y,q instanceof ii?[q]:[])))}))):rl(e)))}getChildConfig(t,e,i){return e.children?ce({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?ce({routes:e._loadedRoutes,injector:e._loadedInjector}):m4(t,e,i,this.urlSerializer).pipe(xt(r=>r?this.configLoader.loadChildren(t,e).pipe(Mt(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):y4(e))):ce({routes:[],injector:t})}};function M4(n){n.sort((t,e)=>t.value.outlet===Ae?-1:e.value.outlet===Ae?1:t.value.outlet.localeCompare(e.value.outlet))}function A4(n){let t=n.value.routeConfig;return t&&t.path===""}function _M(n){let t=[],e=new Set;for(let i of n){if(!A4(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=_M(i.children);t.push(new ii(i.value,r))}return t.filter(i=>!e.has(i))}function O4(n){return n.data||{}}function R4(n){return n.resolve||{}}function P4(n,t,e,i,r,o){return xt(s=>T4(n,t,e,i,s.extractedUrl,r,o).pipe(ee(({state:a,tree:l})=>Ee(Y({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function N4(n,t){return xt(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ce(e);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of yM(l))s.add(u);let a=0;return Be(s).pipe(oo(l=>o.has(l)?F4(l,i,n,t):(l.data=qv(l,l.parent,n).resolve,ce(void 0))),Mt(()=>a++),Na(1),xt(l=>a===s.size?ce(e):qt))})}function yM(n){let t=n.children.map(e=>yM(e)).flat();return[n,...t]}function F4(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!uM(r)&&(o[Au]=r.title),k4(o,n,t,i).pipe(ee(s=>(n._resolvedData=s,n.data=qv(n,n.parent,e).resolve,null)))}function k4(n,t,e,i){let r=vv(n);if(r.length===0)return ce({});let o={};return Be(r).pipe(xt(s=>V4(n[s],t,e,i).pipe(ci(),Mt(a=>{o[s]=a}))),Na(1),x_(o),ro(s=>mM(s)?qt:Ra(s)))}function V4(n,t,e,i){let r=Ou(t)??i,o=dl(n,r),s=o.resolve?o.resolve(t,e):Mr(r,()=>o(t,e));return Co(s)}function _v(n){return nt(t=>{let e=n(t);return e?Be(e).pipe(ee(()=>t)):ce(t)})}var vM=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Ae);return i}getResolvedTitleForRoute(e){return e.data[Au]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>k(L4),providedIn:"root"})}}return n})(),L4=(()=>{class n extends vM{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(K($x))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zv=new re("",{providedIn:"root",factory:()=>({})}),Xv=new re(""),B4=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(Ly)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ce(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=Co(e.loadComponent()).pipe(ee(wM),Mt(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Sr(()=>{this.componentLoaders.delete(e)})),r=new Ta(i,()=>new Le).pipe(Ia());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ce({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=j4(i,this.compiler,e,this.onLoadEndListener).pipe(Sr(()=>{this.childrenLoaders.delete(i)})),s=new Ta(o,()=>new Le).pipe(Ia());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function j4(n,t,e,i){return Co(n.loadChildren()).pipe(ee(wM),xt(r=>r instanceof Yc||Array.isArray(r)?ce(r):Be(t.compileModuleAsync(r))),ee(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(Xv,[],{optional:!0,self:!0}).flat()),{routes:s.map(Yv),injector:o}}))}function U4(n){return n&&typeof n=="object"&&"default"in n}function wM(n){return U4(n)?n.default:n}var ew=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>k($4),providedIn:"root"})}}return n})(),$4=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),G4=new re("");var H4=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=k(B4),this.environmentInjector=k(an),this.urlSerializer=k(zv),this.rootContexts=k(Rp),this.location=k(au),this.inputBindingEnabled=k(Qv,{optional:!0})!==null,this.titleStrategy=k(vM),this.options=k(Zv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(ew),this.createViewTransition=k(G4,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ce(void 0),this.rootComponentType=null;let e=r=>this.events.next(new xv(r)),i=r=>this.events.next(new Mv(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(Ee(Y(Y({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new wt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:wu,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dt(o=>o.id!==0),ee(o=>Ee(Y({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),nt(o=>{let s=!1,a=!1;return ce(o).pipe(nt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ri.SupersededByNewNavigation),qt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Ps(l.id,this.urlSerializer.serialize(l.rawUrl),f,Ev.IgnoredSameUrlNavigation)),l.resolve(null),qt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ce(l).pipe(nt(f=>{let m=this.transitions?.getValue();return this.events.next(new Eu(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?qt:Promise.resolve(f)}),P4(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Mt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Ee(Y({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new Ip(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:m,source:y,restoredState:D,extras:T}=l,R=new Eu(f,this.urlSerializer.serialize(m),y,D);this.events.next(R);let q=lM(this.rootComponentType).snapshot;return this.currentTransition=o=Ee(Y({},l),{targetSnapshot:q,urlAfterRedirects:m,extras:Ee(Y({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ce(o)}else{let f="";return this.events.next(new Ps(l.id,this.urlSerializer.serialize(l.extractedUrl),f,Ev.IgnoredByUrlHandlingStrategy)),l.resolve(null),qt}}),Mt(l=>{let u=new Dv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ee(l=>(this.currentTransition=o=Ee(Y({},l),{guards:J3(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),a4(this.environmentInjector,l=>this.events.next(l)),Mt(l=>{if(o.guardsResult=l.guardsResult,cl(l.guardsResult))throw hM(this.urlSerializer,l.guardsResult);let u=new Sv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),dt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",ri.GuardRejected),!1)),_v(l=>{if(l.guards.canActivateChecks.length)return ce(l).pipe(Mt(u=>{let d=new Iv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),nt(u=>{let d=!1;return ce(u).pipe(N4(this.paramsInheritanceStrategy,this.environmentInjector),Mt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",ri.NoDataFromResolver)}}))}),Mt(u=>{let d=new Tv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),_v(l=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Mt(m=>{d.component=m}),ee(()=>{})));for(let m of d.children)f.push(...u(m));return f};return cs(u(l.targetSnapshot.root)).pipe(so(null),gn(1))}),_v(()=>this.afterPreactivation()),nt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?Be(d).pipe(ee(()=>o)):ce(o)}),ee(l=>{let u=G3(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Ee(Y({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Mt(()=>{this.events.next(new Su)}),Y3(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),gn(1),Mt({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Rs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Jt(this.transitionAbortSubject.pipe(Mt(l=>{throw l}))),Sr(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",ri.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ro(l=>{if(a=!0,pM(l))this.events.next(new bo(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),q3(l)?this.events.next(new Iu(l.url)):o.resolve(!1);else{this.events.next(new Du(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(e.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return qt}))}))}cancelNavigationTransition(e,i,r){let o=new bo(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function z4(n){return n!==wu}var q4=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>k(W4),providedIn:"root"})}}return n})(),Hv=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},W4=(()=>{class n extends Hv{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zn(n)))(r||n)}})()}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bM=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>k(K4),providedIn:"root"})}}return n})(),K4=(()=>{class n extends bM{constructor(){super(...arguments),this.location=k(au),this.urlSerializer=k(zv),this.options=k(Zv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(ew),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new wo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=lM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof Eu)this.stateMemento=this.createStateMemento();else if(e instanceof Ps)this.rawUrlTree=i.initialUrl;else if(e instanceof Ip){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(r,i)}}else e instanceof Su?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):e instanceof bo&&(e.code===ri.GuardRejected||e.code===ri.NoDataFromResolver)?this.restoreHistory(i):e instanceof Du?this.restoreHistory(i,!0):e instanceof Rs&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=Y(Y({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=Y(Y({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zn(n)))(r||n)}})()}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(yu||{});function Q4(n,t){n.events.pipe(dt(e=>e instanceof Rs||e instanceof bo||e instanceof Du||e instanceof Ps),ee(e=>e instanceof Rs||e instanceof Ps?yu.COMPLETE:(e instanceof bo?e.code===ri.Redirect||e.code===ri.SupersededByNewNavigation:!1)?yu.REDIRECTING:yu.FAILED),dt(e=>e!==yu.REDIRECTING),gn(1)).subscribe(()=>{t()})}function Y4(n){throw n}var J4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=k(Gf),this.stateManager=k(bM),this.options=k(Zv,{optional:!0})||{},this.pendingTasks=k(go),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(H4),this.urlSerializer=k(zv),this.location=k(au),this.urlHandlingStrategy=k(ew),this._events=new Le,this.errorHandler=this.options.errorHandler||Y4,this.navigated=!1,this.routeReuseStrategy=k(q4),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(Xv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(Qv,{optional:!0}),this.eventsSubscription=new vt,this.isNgZoneEnabled=k(Fe)instanceof Fe&&Fe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof bo&&i.code!==ri.Redirect&&i.code!==ri.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Rs)this.navigated=!0;else if(i instanceof Iu){let s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),a={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||z4(r.source)};this.scheduleNavigation(s,wu,null,a,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}e$(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),wu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=Y({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Yv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,d=null;switch(a){case"merge":d=Y(Y({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=r?r.snapshot:this.routerState.snapshot.root;f=rM(m)}catch{(typeof e[0]!="string"||!e[0].startsWith("/"))&&(e=[]),f=this.currentUrlTree.root}return oM(f,e,d,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=cl(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,wu,null,i)}navigate(e,i={skipLocationChange:!1}){return X4(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=Y({},J4):i===!1?r=Y({},Z4):r=i,cl(e))return Gx(this.currentUrlTree,e,r);let o=this.parseUrl(e);return Gx(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((f,m)=>{a=f,l=m});let d=this.pendingTasks.add();return Q4(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function X4(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new de(4008,!1)}function e$(n){return!(n instanceof Su)&&!(n instanceof Iu)}var t$=new re("");function Np(n,...t){return Es([{provide:Xv,multi:!0,useValue:n},[],{provide:vn,useFactory:n$,deps:[jt]},{provide:Hf,multi:!0,useFactory:i$},t.map(e=>e.\u0275providers)])}function n$(n){return n.routerState.root}function i$(){let n=k(di);return t=>{let e=n.get(yo);if(t!==e.components[0])return;let i=n.get(jt),r=n.get(r$);n.get(o$)===1&&i.initialNavigation(),n.get(s$,null,Ne.Optional)?.setUpPreloading(),n.get(t$,null,Ne.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var r$=new re("",{factory:()=>new Le}),o$=new re("",{providedIn:"root",factory:()=>1});var s$=new re("");var a$="firebase",l$="10.13.0";ai(a$,l$,"app");var _i=new Tr("ANGULARFIRE2_VERSION");var c$=(n,t)=>{let e=t?[t]:eh(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},Lr=class{constructor(){return c$(u$)}},u$="app-check";function tw(){}var Fp=class{zone;delegate;constructor(t,e=b_){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){let r=this.zone,o=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,e,i)}},nw=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tw,{},tw,tw)),e.pipe(Mt({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ns=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new Fp(Zone.current)),this.insideAngular=e.run(()=>new Fp(Zone.current,no)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(K(Fe))};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function d$(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Gn(n){return h$(d$())(n)}function h$(n){return function(e){return e=e.lift(new nw(n.ngZone)),e.pipe(Ii(n.outsideAngular),Sn(n.insideAngular))}}var Eo=class{constructor(t){return t}},rw=class{constructor(){return eh()}};function f$(n){return n&&n.length===1?n[0]:new Eo(Xd())}var CM=new re("angularfire2._apps"),p$={provide:Eo,useFactory:f$,deps:[[new xr,CM]]},m$={provide:rw,deps:[[new xr,CM]]};var EM=(()=>{class n{constructor(e){ai("angularfire",_i.full,"core"),ai("angularfire",_i.full,"app"),ai("angular",$f.full,e.toString())}static \u0275fac=function(i){return new(i||n)(K(Wt))};static \u0275mod=mt({type:n});static \u0275inj=pt({providers:[p$,m$]})}return n})();var Hn={production:!1,BASE_API_URL:"",firebase:{apiKey:"AIzaSyBNWYDp0fPgLU0npKMC0RoS6C14fHp2mpk",authDomain:"comemivesto-5e5f9.firebaseapp.com",projectId:"comemivesto-5e5f9",storageBucket:"comemivesto-5e5f9.appspot.com",messagingSenderId:"124990581718",appId:"1:124990581718:web:51c8cbf699123bd0e8d277",measurementId:"G-8D9XBPY0Q7"}};function g$(n,t){if(n&1&&Q(0,"i"),n&2){let e=x(2).$implicit;hi(e.icon)}}function _$(n,t){if(n&1){let e=oe();_(0,"button",9),$("click",function(){j(e);let r=x().$implicit,o=x();return U(o.toolbarButtonClick(r))}),G(1,g$,1,2,"i",10),N(2),v()}if(n&2){let e=x().$implicit;b("id",e.id)("disabled",e.disabled)("ngClass",e.cssClass),jn("name",e.name),w(),b("ngIf",e.icon),w(),ke(" ",e.text||e.name," ")}}function y$(n,t){if(n&1&&(je(0),G(1,_$,3,6,"button",8),Ue()),n&2){let e=t.$implicit;w(),b("ngIf",e.visible)}}function v$(n,t){if(n&1){let e=oe();_(0,"button",11),$("click",function(){j(e);let r=x();return U(r.onClickAddButton(r.addButton))}),Q(1,"i"),N(2),v()}if(n&2){let e=x();b("id",e.addButton.id)("name",e.addButton.name)("ngClass",e.addButton.cssClass||""),w(),hi(e.addButton.icon),w(),ke(" ",e.addButton.text||e.addButton.name," ")}}function w$(n,t){if(n&1){let e=oe();_(0,"button",12),$("click",function(r){j(e);let o=x();return U(o.onClickCrocetta(r))}),Q(1,"i",13),N(2," Chiudi "),v()}}var kp=(()=>{class n{constructor(){this.caption="",this.cssClass="",this.showBreadcrumb=!1,this.isFooter=!1,this.isClosable=!0,this.addButtonShow=!1,this.help="",this.idHelper=0,this.emitHelperClick=new se,this.emitChiusura=new se,this.emitAddEvent=new se,this.emitToolbarButtonClick=new se,this.emitBreadCrumbClick=new se,this.addButton={id:"addButton",name:"addButton",text:"Aggiungi",disabled:!1,visible:this.addButtonShow,icon:"mdi mdi-pencil-outline",widget:"button"}}hideShowToolbarMenu(e){this.emitChiusura.emit("closeToolbar")}onClickCrocetta(e){this.emitChiusura.emit(e)}onClickAddButton(e){this.emitAddEvent.emit(e)}showDropdownMenu(e,i){let r=document.getElementById(i);r!=null&&(r.classList.contains("show")||r.classList.add("show"))}hideDropdownMenu(e,i){let r=document.getElementById(i);r?.classList.remove("show")}onBreadCrumbClick(e,i,r=0){}onBreadCrumbRemoveClick(e,i,r){}emitHelpClick(e){}toolbarButtonClick(e){this.emitToolbarButtonClick.emit(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-caption"]],inputs:{caption:"caption",cssClass:"cssClass",showBreadcrumb:"showBreadcrumb",breadcrumbNavigation:"breadcrumbNavigation",isFooter:"isFooter",isClosable:"isClosable",addButtonShow:"addButtonShow",customToolbarButtons:"customToolbarButtons",help:"help",idHelper:"idHelper"},outputs:{emitHelperClick:"emitHelperClick",emitChiusura:"emitChiusura",emitAddEvent:"emitAddEvent",emitToolbarButtonClick:"emitToolbarButtonClick",emitBreadCrumbClick:"emitBreadCrumbClick"},standalone:!0,features:[fe],decls:9,vars:5,consts:[[1,"caption-container",3,"ngClass"],[1,"item-wrap","wrap-item-title"],[1,"page-title"],[1,"item-wrap","last-item-wrap"],[1,"btn-container"],[4,"ngFor","ngForOf"],["class","btn ana-button addButton",3,"id","name","ngClass","click",4,"ngIf"],["class","icon-button",3,"click",4,"ngIf"],["class","btn ana-button",3,"id","disabled","ngClass","click",4,"ngIf"],[1,"btn","ana-button",3,"click","id","disabled","ngClass"],[3,"class",4,"ngIf"],[1,"btn","ana-button","addButton",3,"click","id","name","ngClass"],[1,"icon-button",3,"click"],[1,"mdi","mdi-window-close"]],template:function(i,r){i&1&&(_(0,"div",0)(1,"div",1)(2,"h2",2),N(3),v()(),_(4,"div",3)(5,"div",4),G(6,y$,2,1,"ng-container",5)(7,v$,3,6,"button",6)(8,w$,3,0,"button",7),v()()()),i&2&&(b("ngClass",r.cssClass),w(3),Je(r.caption),w(3),b("ngForOf",r.customToolbarButtons),w(),b("ngIf",r.addButtonShow),w(),b("ngIf",r.isClosable))},dependencies:[be,Ot,lt,Ye],styles:[".caption-container[_ngcontent-%COMP%]{display:flex;width:100%;position:relative;flex-direction:row;align-content:center;justify-content:space-between;align-items:center;height:var(--height_caption)}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px 5px}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-logo-caption[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:25px}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-mButton[_ngcontent-%COMP%], .caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-breadcrumb[_ngcontent-%COMP%]{flex-grow:0}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-breadcrumb[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{margin-bottom:0}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-title[_ngcontent-%COMP%]{text-align:start}.caption-container[_ngcontent-%COMP%]   .item-wrap.last-item-wrap[_ngcontent-%COMP%]{text-align:end;min-width:150px}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.3rem;text-align:left;font-weight:500}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]   .ana-button[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}  .vertical h2{margin-left:10%;width:50%;text-align:center}  .vertical-text{writing-mode:vertical-lr;text-orientation:upright;width:0px;font-size:24px;word-break:break-all;white-space:pre-wrap;color:#0b0b0b;font-weight:900;font-family:Montserrat}.currentModule[_ngcontent-%COMP%]{font-size:12px;margin:0;color:#fff!important;font-family:Montserrat}"]})}}return n})();var b$=["toolbarTab"],C$=["*"],E$=n=>({"height.px":n});function D$(n,t){if(n&1&&(_(0,"h2"),Q(1,"span",10),N(2),v()),n&2){let e=x();w(2),Je(e.subTitle)}}function S$(n,t){if(n&1&&(_(0,"div",11),Q(1,"span",12),N(2),Q(3,"button",13),v()),n&2){let e=x();w(2),ke(" ",e.tip," ")}}function I$(n,t){n&1&&(je(0),_(1,"p"),N(2,"Carimento in corso..."),v(),Ue())}var tn=(()=>{class n{constructor(){this.caption="",this.anaHeight=800,this.subTitle="",this.tip="",this.addButtonShow=!1,this.helpDoc="",this.breadcrumbNavigation=[],this.showSpinner=!1,this.cssClass="",this.emittChiusura=new se,this.emittEventButton=new se,this.emitToolbarLeft=new se,this.timeInterval=0,this.itemTabs=[],this.showItemsTabs=!1,this.setAutoDismiss()}ngAfterViewInit(){}setAutoDismiss(){setTimeout(()=>{this.tip=""},6e4)}getWindowHeight(){let e=window.innerHeight,i=document.documentElement.clientHeight,r=Math.max(e,i),o,s,a;o=document.getElementById("header").offsetHeight,s=200,setTimeout(()=>{this.heightWrap=r-o-s,this.heightWrap=this.heightWrap-13},300)}onCrocettaClick(e){this.emittChiusura.emit(e)}buttonToolbarLeft(e){this.emitToolbarLeft.emit(e)}onAddClick(e){this.emittEventButton.emit(e)}onButtonToolbarClick(e){this.emittEventButton.emit(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-anagrafica-wrapper"]],viewQuery:function(i,r){if(i&1&&At(b$,7),i&2){let o;Et(o=Dt())&&(r.toolbarTab=o.first)}},inputs:{caption:"caption",anaHeight:"anaHeight",subTitle:"subTitle",tip:"tip",addButtonShow:"addButtonShow",helpDoc:"helpDoc",breadcrumbNavigation:"breadcrumbNavigation",showSpinner:"showSpinner",cssClass:"cssClass",customToolbarButtons:"customToolbarButtons"},outputs:{emittChiusura:"emittChiusura",emittEventButton:"emittEventButton",emitToolbarLeft:"emitToolbarLeft"},standalone:!0,features:[fe],ngContentSelectors:C$,decls:12,vars:18,consts:[["id","cWrap",1,"content-wrap",3,"ngClass"],[1,"anagrafica-wrap",3,"ngStyle"],[3,"emettiChiusura","emitToolbarButtonClick","emitAddEvent","caption","showBreadcrumb","addButtonShow","customToolbarButtons","help","breadcrumbNavigation","isClosable","isFooter"],[1,"anagrafica-container"],[1,"anagrafica-row"],[1,"col-lg-12","wrapForm"],[1,"text"],[4,"ngIf"],["class","alert alert-primary d-flex align-items-center alert-dismissible fade show","role","alert",4,"ngIf"],[3,"emettiChiusura","showBreadcrumb","isClosable","isFooter"],[1,"mdi","mdi-database"],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","alert-dismissible","fade","show"],[1,"mdi","mdi-lightbulb-alert-outline","me-2"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(i,r){i&1&&(Xa(),_(0,"div",0)(1,"div",1)(2,"app-caption",2),$("emettiChiusura",function(s){return r.onCrocettaClick(s)})("emitToolbarButtonClick",function(s){return r.onButtonToolbarClick(s)})("emitAddEvent",function(s){return r.onAddClick(s)}),v(),_(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),G(7,D$,3,1,"h2",7),v(),G(8,S$,4,1,"div",8)(9,I$,3,0,"ng-container",7),el(10,0,["id","ng-content"]),v()()(),_(11,"app-caption",9),$("emettiChiusura",function(s){return r.onCrocettaClick(s)}),v()()()),i&2&&(b("ngClass",r.cssClass),w(),b("ngStyle",Xt(16,E$,r.anaHeight)),w(),b("caption",r.caption)("showBreadcrumb",!1)("addButtonShow",r.addButtonShow)("customToolbarButtons",r.customToolbarButtons)("help",r.helpDoc)("breadcrumbNavigation",r.breadcrumbNavigation)("isClosable",!1)("isFooter",!1),w(5),b("ngIf",r.subTitle),w(),b("ngIf",r.tip),w(),b("ngIf",r.showSpinner),w(2),b("showBreadcrumb",!1)("isClosable",!1)("isFooter",!0))},dependencies:[kp,be,Ot,Ye,$n],styles:['@charset "UTF-8";  .isPopUp{position:absolute;bottom:0}  .content-wrap{position:relative;width:var(--width_container);margin:5px auto}  .content-wrap .anagrafica-wrap{margin-top:.3rem}  .content-wrap .anagrafica-wrap .anagrafica-container{box-shadow:0 3px 5px #0000000b;margin-top:.88rem;background-color:#fff;border:1px solid #e2e8f0;border-radius:.6rem}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row{position:relative;padding:1.25rem}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar{position:absolute;left:0;top:0;padding:0;width:55px;z-index:2;box-shadow:2px 0 20px #45414e12;border-top:1px solid rgba(0,0,0,.15)}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar.closed{width:0;visibility:hidden}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar.open{width:177px;display:block;visibility:visible;height:100%}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar{-moz-transition:ease .35s;-o-transition:ease .35s;-webkit-transition:ease .3s;transition:ease .35s}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .toolbar-shadow{box-shadow:2px 0 20px #45414e12!important;padding-right:0}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sidebar-sticky-top{padding:0 6px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .item-nav{display:block;height:35px;border-bottom:1px solid rgba(253,253,253,.531);width:100%;padding:0}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .item-nav .item-content i{font-size:25px!important;width:28px!important;height:28px!important;line-height:28px!important;color:#fff!important;font-weight:300!important}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sidebar-sticky-bottom .item-nav{height:26px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sub-item-nav :before{content:"\\fa14";display:block;font-family:Material Design Icons;color:#fff;width:5px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar p{font-size:12px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapForm{border:1px solid rgba(226,232,240,.6);border-radius:.6rem;padding:1.25rem}']})}}return n})();var DM=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[fe],decls:2,vars:0,template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper"),N(1,` dddddd
`),v())},dependencies:[tn]})}}return n})();var x$=new Map,M$={activated:!1,tokenObservers:[]},A$={initialized:!1,enabled:!1};function Bi(n){return x$.get(n)||Object.assign({},M$)}function MM(){return A$}var O$="https://content-firebaseappcheck.googleapis.com/v1";var R$="exchangeDebugToken",SM={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},pee=24*60*60*1e3;var sw=class{constructor(t,e,i,r,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return E(this,null,function*(){this.stop();try{this.pending=new t_,this.pending.promise.catch(e=>{}),yield P$(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new t_,this.pending.promise.catch(e=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}};function P$(n){return new Promise(t=>{setTimeout(t,n)})}var N$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Do=new iD("appCheck","AppCheck",N$);function AM(n){if(!Bi(n).activated)throw Do.create("use-before-activation",{appName:n.name})}function OM(i,r){return E(this,arguments,function*({url:n,body:t},e){let o={"Content-Type":"application/json"},s=e.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(t),headers:o},l;try{l=yield fetch(n,a)}catch(y){throw Do.create("fetch-network-error",{originalErrorMessage:y?.message})}if(l.status!==200)throw Do.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(y){throw Do.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Do.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:u.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function RM(n,t){let{projectId:e,appId:i,apiKey:r}=n.options;return{url:`${O$}/projects/${e}/apps/${i}:${R$}?key=${r}`,body:{debug_token:t}}}var F$="firebase-app-check-database",k$=1,aw="firebase-app-check-store";var Vp=null;function V$(){return Vp||(Vp=new Promise((n,t)=>{try{let e=indexedDB.open(F$,k$);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(Do.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},e.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(aw,{keyPath:"compositeKey"})}}}catch(e){t(Do.create("storage-open",{originalErrorMessage:e?.message}))}}),Vp)}function L$(n,t){return B$(j$(n),t)}function B$(n,t){return E(this,null,function*(){let i=(yield V$()).transaction(aw,"readwrite"),o=i.objectStore(aw).put({compositeKey:n,value:t});return new Promise((s,a)=>{o.onsuccess=l=>{s()},i.onerror=l=>{var u;a(Do.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function j$(n){return`${n.options.appId}-${n.name}`}var lw=new Zd("@firebase/app-check");function ow(n,t){return Jd()?L$(n,t).catch(e=>{lw.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function PM(){return MM().enabled}function NM(){return E(this,null,function*(){let n=MM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var U$={error:"UNKNOWN_ERROR"};function $$(n){return eD.encodeString(JSON.stringify(n),!1)}function cw(n,t=!1){return E(this,null,function*(){let e=n.app;AM(e);let i=Bi(e),r=i.token,o;if(r&&!Nu(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(Nu(l)?r=l:yield ow(e,void 0))}if(!t&&r&&Nu(r))return{token:r.token};let s=!1;if(PM()){i.exchangeTokenPromise||(i.exchangeTokenPromise=OM(RM(e,yield NM()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let l=yield i.exchangeTokenPromise;return yield ow(e,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield Bi(e).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?lw.warn(l.message):lw.error(l),o=l}let a;return r?o?Nu(r)?a={token:r.token,internalError:o}:a=TM(o):(a={token:r.token},i.token=r,yield ow(e,r)):a=TM(o),s&&q$(e,a),a})}function G$(n){return E(this,null,function*(){let t=n.app;AM(t);let{provider:e}=Bi(t);if(PM()){let i=yield NM(),{token:r}=yield OM(RM(t,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield e.getToken();return{token:i}}})}function H$(n,t,e,i){let{app:r}=n,o=Bi(r),s={next:e,error:i,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Nu(o.token)){let a=o.token;Promise.resolve().then(()=>{e({token:a.token}),IM(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>IM(n))}function FM(n,t){let e=Bi(n),i=e.tokenObservers.filter(r=>r.next!==t);i.length===0&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function IM(n){let{app:t}=n,e=Bi(t),i=e.tokenRefresher;i||(i=z$(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function z$(n){let{app:t}=n;return new sw(()=>E(this,null,function*(){let e=Bi(t),i;if(e.token?i=yield cw(n,!0):i=yield cw(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let e=Bi(t);if(e.token){let i=e.token.issuedAtTimeMillis+(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)*.5+3e5,r=e.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},SM.RETRIAL_MIN_WAIT,SM.RETRIAL_MAX_WAIT)}function q$(n,t){let e=Bi(n).tokenObservers;for(let i of e)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function Nu(n){return n.expireTimeMillis-Date.now()>0}function TM(n){return{token:$$(U$),error:n}}var uw=class{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){let{tokenObservers:t}=Bi(this.app);for(let e of t)FM(this.app,e.next);return Promise.resolve()}};function W$(n,t){return new uw(n,t)}function K$(n){return{getToken:t=>cw(n,t),getLimitedUseToken:()=>G$(n),addTokenListener:t=>H$(n,"INTERNAL",t),removeTokenListener:t=>FM(n.app,t)}}var Q$="@firebase/app-check",Y$="0.8.7";var J$="app-check",xM="app-check-internal";function Z$(){Ac(new rs(J$,n=>{let t=n.getProvider("app").getImmediate(),e=n.getProvider("heartbeat");return W$(t,e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(xM).initialize()})),Ac(new rs(xM,n=>{let t=n.getProvider("app-check").getImmediate();return K$(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ai(Q$,Y$)}Z$();var X$=["localhost","0.0.0.0","127.0.0.1"],Iee=typeof window<"u"&&X$.includes(window.location.hostname);var eG="firebase",tG="10.13.0";on.registerVersion(eG,tG,"app-compat");var nG=["ngOnDestroy"],Bp=(n,t,e,i={})=>new Proxy(n,{get:(r,o)=>e.runOutsideAngular(()=>{if(n[o])return i?.spy?.get&&i.spy.get(o,n[o]),n[o];if(nG.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(u=>e.run(()=>u)):e.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,u)=>s.then(d=>{let f=d?.(...u);return i?.spy?.apply&&i.spy.apply(o,u,f),f})})})});var Lp=class{constructor(t){return t}},So=new re("angularfire2.app.options"),Io=new re("angularfire2.app.name");function Fs(n,t,e){let i=typeof e=="string"&&e||"[DEFAULT]",r=typeof e=="object"&&e||{};r.name=r.name||i;let s=on.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>on.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;iG("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Lp(s)}var iG=(n,...t)=>{By()&&typeof console<"u"&&console[n](...t)},rG={provide:Lp,useFactory:Fs,deps:[So,Fe,[new xr,Io]]},VM=(()=>{class n{static initializeApp(e,i){return{ngModule:n,providers:[{provide:So,useValue:e},{provide:Io,useValue:i}]}}constructor(e){on.registerVersion("angularfire",_i.full,"core"),on.registerVersion("angularfire",_i.full,"app-compat"),on.registerVersion("angular",$f.full,e.toString())}static \u0275fac=function(i){return new(i||n)(K(Wt))};static \u0275mod=mt({type:n});static \u0275inj=pt({providers:[rG]})}return n})();function hl(n,t,e,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return oG(r,s)||(kM("error",`${t} was already initialized on the ${e} Firebase App with different settings.${sG?" You may need to reload as Firebase is not HMR aware.":""}`),kM("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}function oG(n,t){try{return n.toString()===t.toString()}catch{return n===t}}var sG=typeof module<"u"&&!!module.hot,kM=(n,...t)=>{By()&&typeof console<"u"&&console[n](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var hw=new re("angularfire2.auth.use-emulator"),fw=new re("angularfire2.auth.settings"),pw=new re("angularfire2.auth.tenant-id"),mw=new re("angularfire2.auth.langugage-code"),gw=new re("angularfire2.auth.use-device-language"),_w=new re("angularfire.auth.persistence"),yw=(n,t,e,i,r,o,s,a)=>hl(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let l=t.runOutsideAngular(()=>n.auth());if(e&&l.useEmulator(...e),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(let[u,d]of Object.entries(s))l.settings[u]=d;return a&&l.setPersistence(a),l},[e,i,r,o,s,a]),Fu=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(e,i,r,o,s,a,l,u,d,f,m,y){let D=new Le,T=ce(void 0).pipe(Sn(s.outsideAngular),nt(()=>o.runOutsideAngular(()=>import("./chunk-T7Z74EPC.js"))),ee(()=>Fs(e,o,i)),ee(R=>yw(R,o,a,u,d,f,l,m)),Fa({bufferSize:1,refCount:!1}));if(vo(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ce(null);else{T.pipe(ci()).subscribe();let R=T.pipe(nt(H=>H.getRedirectResult().then(le=>le,()=>null)),Gn,Fa({bufferSize:1,refCount:!1})),q=T.pipe(nt(H=>new ye(le=>({unsubscribe:o.runOutsideAngular(()=>H.onAuthStateChanged(ge=>le.next(ge),ge=>le.error(ge),()=>le.complete()))})))),ie=T.pipe(nt(H=>new ye(le=>({unsubscribe:o.runOutsideAngular(()=>H.onIdTokenChanged(ge=>le.next(ge),ge=>le.error(ge),()=>le.complete()))}))));this.authState=R.pipe(Ph(q),Ii(s.outsideAngular),Sn(s.insideAngular)),this.user=R.pipe(Ph(ie),Ii(s.outsideAngular),Sn(s.insideAngular)),this.idToken=this.user.pipe(nt(H=>H?Be(H.getIdToken()):ce(null))),this.idTokenResult=this.user.pipe(nt(H=>H?Be(H.getIdTokenResult()):ce(null))),this.credential=xh(R,D,this.authState.pipe(dt(H=>!H))).pipe(ee(H=>H?.user?H:null),Ii(s.outsideAngular),Sn(s.insideAngular))}return Bp(this,T,o,{spy:{apply:(R,q,ie)=>{(R.startsWith("signIn")||R.startsWith("createUser"))&&ie.then(H=>D.next(H))}}})}static \u0275fac=function(i){return new(i||n)(K(So),K(Io,8),K(Wt),K(Fe),K(Ns),K(hw,8),K(fw,8),K(pw,8),K(mw,8),K(gw,8),K(_w,8),K(Lr,8))};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),LM=(()=>{class n{constructor(){on.registerVersion("angularfire",_i.full,"auth-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=mt({type:n});static \u0275inj=pt({providers:[Fu]})}return n})();var BM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jM={};var To,vw;(function(){var n;function t(M,C){function I(){}I.prototype=C.prototype,M.D=C.prototype,M.prototype=new I,M.prototype.constructor=M,M.C=function(A,O,F){for(var S=Array(arguments.length-2),wr=2;wr<arguments.length;wr++)S[wr-2]=arguments[wr];return C.prototype[O].apply(A,S)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,C,I){I||(I=0);var A=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)A[O]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(O=0;16>O;++O)A[O]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=M.g[0],I=M.g[1],O=M.g[2];var F=M.g[3],S=C+(F^I&(O^F))+A[0]+3614090360&4294967295;C=I+(S<<7&4294967295|S>>>25),S=F+(O^C&(I^O))+A[1]+3905402710&4294967295,F=C+(S<<12&4294967295|S>>>20),S=O+(I^F&(C^I))+A[2]+606105819&4294967295,O=F+(S<<17&4294967295|S>>>15),S=I+(C^O&(F^C))+A[3]+3250441966&4294967295,I=O+(S<<22&4294967295|S>>>10),S=C+(F^I&(O^F))+A[4]+4118548399&4294967295,C=I+(S<<7&4294967295|S>>>25),S=F+(O^C&(I^O))+A[5]+1200080426&4294967295,F=C+(S<<12&4294967295|S>>>20),S=O+(I^F&(C^I))+A[6]+2821735955&4294967295,O=F+(S<<17&4294967295|S>>>15),S=I+(C^O&(F^C))+A[7]+4249261313&4294967295,I=O+(S<<22&4294967295|S>>>10),S=C+(F^I&(O^F))+A[8]+1770035416&4294967295,C=I+(S<<7&4294967295|S>>>25),S=F+(O^C&(I^O))+A[9]+2336552879&4294967295,F=C+(S<<12&4294967295|S>>>20),S=O+(I^F&(C^I))+A[10]+4294925233&4294967295,O=F+(S<<17&4294967295|S>>>15),S=I+(C^O&(F^C))+A[11]+2304563134&4294967295,I=O+(S<<22&4294967295|S>>>10),S=C+(F^I&(O^F))+A[12]+1804603682&4294967295,C=I+(S<<7&4294967295|S>>>25),S=F+(O^C&(I^O))+A[13]+4254626195&4294967295,F=C+(S<<12&4294967295|S>>>20),S=O+(I^F&(C^I))+A[14]+2792965006&4294967295,O=F+(S<<17&4294967295|S>>>15),S=I+(C^O&(F^C))+A[15]+1236535329&4294967295,I=O+(S<<22&4294967295|S>>>10),S=C+(O^F&(I^O))+A[1]+4129170786&4294967295,C=I+(S<<5&4294967295|S>>>27),S=F+(I^O&(C^I))+A[6]+3225465664&4294967295,F=C+(S<<9&4294967295|S>>>23),S=O+(C^I&(F^C))+A[11]+643717713&4294967295,O=F+(S<<14&4294967295|S>>>18),S=I+(F^C&(O^F))+A[0]+3921069994&4294967295,I=O+(S<<20&4294967295|S>>>12),S=C+(O^F&(I^O))+A[5]+3593408605&4294967295,C=I+(S<<5&4294967295|S>>>27),S=F+(I^O&(C^I))+A[10]+38016083&4294967295,F=C+(S<<9&4294967295|S>>>23),S=O+(C^I&(F^C))+A[15]+3634488961&4294967295,O=F+(S<<14&4294967295|S>>>18),S=I+(F^C&(O^F))+A[4]+3889429448&4294967295,I=O+(S<<20&4294967295|S>>>12),S=C+(O^F&(I^O))+A[9]+568446438&4294967295,C=I+(S<<5&4294967295|S>>>27),S=F+(I^O&(C^I))+A[14]+3275163606&4294967295,F=C+(S<<9&4294967295|S>>>23),S=O+(C^I&(F^C))+A[3]+4107603335&4294967295,O=F+(S<<14&4294967295|S>>>18),S=I+(F^C&(O^F))+A[8]+1163531501&4294967295,I=O+(S<<20&4294967295|S>>>12),S=C+(O^F&(I^O))+A[13]+2850285829&4294967295,C=I+(S<<5&4294967295|S>>>27),S=F+(I^O&(C^I))+A[2]+4243563512&4294967295,F=C+(S<<9&4294967295|S>>>23),S=O+(C^I&(F^C))+A[7]+1735328473&4294967295,O=F+(S<<14&4294967295|S>>>18),S=I+(F^C&(O^F))+A[12]+2368359562&4294967295,I=O+(S<<20&4294967295|S>>>12),S=C+(I^O^F)+A[5]+4294588738&4294967295,C=I+(S<<4&4294967295|S>>>28),S=F+(C^I^O)+A[8]+2272392833&4294967295,F=C+(S<<11&4294967295|S>>>21),S=O+(F^C^I)+A[11]+1839030562&4294967295,O=F+(S<<16&4294967295|S>>>16),S=I+(O^F^C)+A[14]+4259657740&4294967295,I=O+(S<<23&4294967295|S>>>9),S=C+(I^O^F)+A[1]+2763975236&4294967295,C=I+(S<<4&4294967295|S>>>28),S=F+(C^I^O)+A[4]+1272893353&4294967295,F=C+(S<<11&4294967295|S>>>21),S=O+(F^C^I)+A[7]+4139469664&4294967295,O=F+(S<<16&4294967295|S>>>16),S=I+(O^F^C)+A[10]+3200236656&4294967295,I=O+(S<<23&4294967295|S>>>9),S=C+(I^O^F)+A[13]+681279174&4294967295,C=I+(S<<4&4294967295|S>>>28),S=F+(C^I^O)+A[0]+3936430074&4294967295,F=C+(S<<11&4294967295|S>>>21),S=O+(F^C^I)+A[3]+3572445317&4294967295,O=F+(S<<16&4294967295|S>>>16),S=I+(O^F^C)+A[6]+76029189&4294967295,I=O+(S<<23&4294967295|S>>>9),S=C+(I^O^F)+A[9]+3654602809&4294967295,C=I+(S<<4&4294967295|S>>>28),S=F+(C^I^O)+A[12]+3873151461&4294967295,F=C+(S<<11&4294967295|S>>>21),S=O+(F^C^I)+A[15]+530742520&4294967295,O=F+(S<<16&4294967295|S>>>16),S=I+(O^F^C)+A[2]+3299628645&4294967295,I=O+(S<<23&4294967295|S>>>9),S=C+(O^(I|~F))+A[0]+4096336452&4294967295,C=I+(S<<6&4294967295|S>>>26),S=F+(I^(C|~O))+A[7]+1126891415&4294967295,F=C+(S<<10&4294967295|S>>>22),S=O+(C^(F|~I))+A[14]+2878612391&4294967295,O=F+(S<<15&4294967295|S>>>17),S=I+(F^(O|~C))+A[5]+4237533241&4294967295,I=O+(S<<21&4294967295|S>>>11),S=C+(O^(I|~F))+A[12]+1700485571&4294967295,C=I+(S<<6&4294967295|S>>>26),S=F+(I^(C|~O))+A[3]+2399980690&4294967295,F=C+(S<<10&4294967295|S>>>22),S=O+(C^(F|~I))+A[10]+4293915773&4294967295,O=F+(S<<15&4294967295|S>>>17),S=I+(F^(O|~C))+A[1]+2240044497&4294967295,I=O+(S<<21&4294967295|S>>>11),S=C+(O^(I|~F))+A[8]+1873313359&4294967295,C=I+(S<<6&4294967295|S>>>26),S=F+(I^(C|~O))+A[15]+4264355552&4294967295,F=C+(S<<10&4294967295|S>>>22),S=O+(C^(F|~I))+A[6]+2734768916&4294967295,O=F+(S<<15&4294967295|S>>>17),S=I+(F^(O|~C))+A[13]+1309151649&4294967295,I=O+(S<<21&4294967295|S>>>11),S=C+(O^(I|~F))+A[4]+4149444226&4294967295,C=I+(S<<6&4294967295|S>>>26),S=F+(I^(C|~O))+A[11]+3174756917&4294967295,F=C+(S<<10&4294967295|S>>>22),S=O+(C^(F|~I))+A[2]+718787259&4294967295,O=F+(S<<15&4294967295|S>>>17),S=I+(F^(O|~C))+A[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(O+(S<<21&4294967295|S>>>11))&4294967295,M.g[2]=M.g[2]+O&4294967295,M.g[3]=M.g[3]+F&4294967295}i.prototype.u=function(M,C){C===void 0&&(C=M.length);for(var I=C-this.blockSize,A=this.B,O=this.h,F=0;F<C;){if(O==0)for(;F<=I;)r(this,M,F),F+=this.blockSize;if(typeof M=="string"){for(;F<C;)if(A[O++]=M.charCodeAt(F++),O==this.blockSize){r(this,A),O=0;break}}else for(;F<C;)if(A[O++]=M[F++],O==this.blockSize){r(this,A),O=0;break}}this.h=O,this.o+=C},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;var I=8*this.o;for(C=M.length-8;C<M.length;++C)M[C]=I&255,I/=256;for(this.u(M),M=Array(16),C=I=0;4>C;++C)for(var A=0;32>A;A+=8)M[I++]=this.g[C]>>>A&255;return M};function o(M,C){var I=a;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=C(M)}function s(M,C){this.h=C;for(var I=[],A=!0,O=M.length-1;0<=O;O--){var F=M[O]|0;A&&F==C||(I[O]=F,A=!1)}this.g=I}var a={};function l(M){return-128<=M&&128>M?o(M,function(C){return new s([C|0],0>C?-1:0)}):new s([M|0],0>M?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return f;if(0>M)return R(u(-M));for(var C=[],I=1,A=0;M>=I;A++)C[A]=M/I|0,I*=4294967296;return new s(C,0)}function d(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return R(d(M.substring(1),C));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(C,8)),A=f,O=0;O<M.length;O+=8){var F=Math.min(8,M.length-O),S=parseInt(M.substring(O,O+F),C);8>F?(F=u(Math.pow(C,F)),A=A.j(F).add(u(S))):(A=A.j(I),A=A.add(u(S)))}return A}var f=l(0),m=l(1),y=l(16777216);n=s.prototype,n.m=function(){if(T(this))return-R(this).m();for(var M=0,C=1,I=0;I<this.g.length;I++){var A=this.i(I);M+=(0<=A?A:4294967296+A)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(D(this))return"0";if(T(this))return"-"+R(this).toString(M);for(var C=u(Math.pow(M,6)),I=this,A="";;){var O=le(I,C).g;I=q(I,O.j(C));var F=((0<I.g.length?I.g[0]:I.h)>>>0).toString(M);if(I=O,D(I))return F+A;for(;6>F.length;)F="0"+F;A=F+A}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function D(M){if(M.h!=0)return!1;for(var C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function T(M){return M.h==-1}n.l=function(M){return M=q(this,M),T(M)?-1:D(M)?0:1};function R(M){for(var C=M.g.length,I=[],A=0;A<C;A++)I[A]=~M.g[A];return new s(I,~M.h).add(m)}n.abs=function(){return T(this)?R(this):this},n.add=function(M){for(var C=Math.max(this.g.length,M.g.length),I=[],A=0,O=0;O<=C;O++){var F=A+(this.i(O)&65535)+(M.i(O)&65535),S=(F>>>16)+(this.i(O)>>>16)+(M.i(O)>>>16);A=S>>>16,F&=65535,S&=65535,I[O]=S<<16|F}return new s(I,I[I.length-1]&-2147483648?-1:0)};function q(M,C){return M.add(R(C))}n.j=function(M){if(D(this)||D(M))return f;if(T(this))return T(M)?R(this).j(R(M)):R(R(this).j(M));if(T(M))return R(this.j(R(M)));if(0>this.l(y)&&0>M.l(y))return u(this.m()*M.m());for(var C=this.g.length+M.g.length,I=[],A=0;A<2*C;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var O=0;O<M.g.length;O++){var F=this.i(A)>>>16,S=this.i(A)&65535,wr=M.i(O)>>>16,uc=M.i(O)&65535;I[2*A+2*O]+=S*uc,ie(I,2*A+2*O),I[2*A+2*O+1]+=F*uc,ie(I,2*A+2*O+1),I[2*A+2*O+1]+=S*wr,ie(I,2*A+2*O+1),I[2*A+2*O+2]+=F*wr,ie(I,2*A+2*O+2)}for(A=0;A<C;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=C;A<2*C;A++)I[A]=0;return new s(I,0)};function ie(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function H(M,C){this.g=M,this.h=C}function le(M,C){if(D(C))throw Error("division by zero");if(D(M))return new H(f,f);if(T(M))return C=le(R(M),C),new H(R(C.g),R(C.h));if(T(C))return C=le(M,R(C)),new H(R(C.g),C.h);if(30<M.g.length){if(T(M)||T(C))throw Error("slowDivide_ only works with positive integers.");for(var I=m,A=C;0>=A.l(M);)I=ge(I),A=ge(A);var O=pe(I,1),F=pe(A,1);for(A=pe(A,2),I=pe(I,2);!D(A);){var S=F.add(A);0>=S.l(M)&&(O=O.add(I),F=S),A=pe(A,1),I=pe(I,1)}return C=q(M,O.j(C)),new H(O,C)}for(O=f;0<=M.l(C);){for(I=Math.max(1,Math.floor(M.m()/C.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),F=u(I),S=F.j(C);T(S)||0<S.l(M);)I-=A,F=u(I),S=F.j(C);D(F)&&(F=m),O=O.add(F),M=q(M,S)}return new H(O,M)}n.A=function(M){return le(this,M).h},n.and=function(M){for(var C=Math.max(this.g.length,M.g.length),I=[],A=0;A<C;A++)I[A]=this.i(A)&M.i(A);return new s(I,this.h&M.h)},n.or=function(M){for(var C=Math.max(this.g.length,M.g.length),I=[],A=0;A<C;A++)I[A]=this.i(A)|M.i(A);return new s(I,this.h|M.h)},n.xor=function(M){for(var C=Math.max(this.g.length,M.g.length),I=[],A=0;A<C;A++)I[A]=this.i(A)^M.i(A);return new s(I,this.h^M.h)};function ge(M){for(var C=M.g.length+1,I=[],A=0;A<C;A++)I[A]=M.i(A)<<1|M.i(A-1)>>>31;return new s(I,M.h)}function pe(M,C){var I=C>>5;C%=32;for(var A=M.g.length-I,O=[],F=0;F<A;F++)O[F]=0<C?M.i(F+I)>>>C|M.i(F+I+1)<<32-C:M.i(F+I);return new s(O,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,vw=jM.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,To=jM.Integer=s}).apply(typeof BM<"u"?BM:typeof self<"u"?self:typeof window<"u"?window:{});var jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br={};var ww,bw,fl,Cw,ku,Up,Ew,Dw,Sw;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof jp=="object"&&jp];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=e(this);function r(c,h){if(h)e:{var p=i;c=c.split(".");for(var g=0;g<c.length-1;g++){var P=c[g];if(!(P in p))break e;p=p[P]}c=c[c.length-1],g=p[c],h=h(g),h!=g&&h!=null&&t(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,g=!1,P={next:function(){if(!g&&p<c.length){var B=p++;return{value:h(B,c[B]),done:!1}}return g=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}r("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function l(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function u(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,g),c.apply(h,P)}}return function(){return c.apply(h,arguments)}}function m(c,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function y(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function D(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(g,P,B){for(var Z=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)Z[rt-2]=arguments[rt];return h.prototype[P].apply(g,Z)}}function T(c){let h=c.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=c[g];return p}return[]}function R(c,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(l(g)){let P=c.length||0,B=g.length||0;c.length=P+B;for(let Z=0;Z<B;Z++)c[P+Z]=g[Z]}else c.push(g)}}class q{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function ie(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function le(c){return le[" "](c),c}le[" "]=function(){};var ge=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function pe(c,h,p){for(let g in c)h.call(p,c[g],g,c)}function M(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function C(c){let h={};for(let p in c)h[p]=c[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(c,h){let p,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(p in g)c[p]=g[p];for(let B=0;B<I.length;B++)p=I[B],Object.prototype.hasOwnProperty.call(g,p)&&(c[p]=g[p])}}function O(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function F(c){a.setTimeout(()=>{throw c},0)}function S(){var c=Mg;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class wr{constructor(){this.h=this.g=null}add(h,p){let g=uc.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var uc=new q(()=>new VN,c=>c.reset());class VN{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let dc,hc=!1,Mg=new wr,Y1=()=>{let c=a.Promise.resolve(void 0);dc=()=>{c.then(LN)}};var LN=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(p){F(p)}var h=uc;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}hc=!1};function Zr(){this.s=this.s,this.C=this.C}Zr.prototype.s=!1,Zr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Zr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function hn(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}hn.prototype.h=function(){this.defaultPrevented=!0};var BN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function fc(c,h){if(hn.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(ge){e:{try{le(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:jN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&fc.aa.h.call(this)}}D(fc,hn);var jN={2:"touch",3:"pen",4:"mouse"};fc.prototype.h=function(){fc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var pc="closure_listenable_"+(1e6*Math.random()|0),UN=0;function $N(c,h,p,g,P){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=P,this.key=++UN,this.da=this.fa=!1}function Pd(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Nd(c){this.src=c,this.g={},this.h=0}Nd.prototype.add=function(c,h,p,g,P){var B=c.toString();c=this.g[B],c||(c=this.g[B]=[],this.h++);var Z=Og(c,h,g,P);return-1<Z?(h=c[Z],p||(h.fa=!1)):(h=new $N(h,this.src,B,!!g,P),h.fa=p,c.push(h)),h};function Ag(c,h){var p=h.type;if(p in c.g){var g=c.g[p],P=Array.prototype.indexOf.call(g,h,void 0),B;(B=0<=P)&&Array.prototype.splice.call(g,P,1),B&&(Pd(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Og(c,h,p,g){for(var P=0;P<c.length;++P){var B=c[P];if(!B.da&&B.listener==h&&B.capture==!!p&&B.ha==g)return P}return-1}var Rg="closure_lm_"+(1e6*Math.random()|0),Pg={};function J1(c,h,p,g,P){if(g&&g.once)return X1(c,h,p,g,P);if(Array.isArray(h)){for(var B=0;B<h.length;B++)J1(c,h[B],p,g,P);return null}return p=Vg(p),c&&c[pc]?c.K(h,p,u(g)?!!g.capture:!!g,P):Z1(c,h,p,!1,g,P)}function Z1(c,h,p,g,P,B){if(!h)throw Error("Invalid event type");var Z=u(P)?!!P.capture:!!P,rt=Fg(c);if(rt||(c[Rg]=rt=new Nd(c)),p=rt.add(h,p,g,Z,B),p.proxy)return p;if(g=GN(),p.proxy=g,g.src=c,g.listener=p,c.addEventListener)BN||(P=Z),P===void 0&&(P=!1),c.addEventListener(h.toString(),g,P);else if(c.attachEvent)c.attachEvent(tE(h.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function GN(){function c(p){return h.call(c.src,c.listener,p)}let h=HN;return c}function X1(c,h,p,g,P){if(Array.isArray(h)){for(var B=0;B<h.length;B++)X1(c,h[B],p,g,P);return null}return p=Vg(p),c&&c[pc]?c.L(h,p,u(g)?!!g.capture:!!g,P):Z1(c,h,p,!0,g,P)}function eE(c,h,p,g,P){if(Array.isArray(h))for(var B=0;B<h.length;B++)eE(c,h[B],p,g,P);else g=u(g)?!!g.capture:!!g,p=Vg(p),c&&c[pc]?(c=c.i,h=String(h).toString(),h in c.g&&(B=c.g[h],p=Og(B,p,g,P),-1<p&&(Pd(B[p]),Array.prototype.splice.call(B,p,1),B.length==0&&(delete c.g[h],c.h--)))):c&&(c=Fg(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Og(h,p,g,P)),(p=-1<c?h[c]:null)&&Ng(p))}function Ng(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[pc])Ag(h.i,c);else{var p=c.type,g=c.proxy;h.removeEventListener?h.removeEventListener(p,g,c.capture):h.detachEvent?h.detachEvent(tE(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=Fg(h))?(Ag(p,c),p.h==0&&(p.src=null,h[Rg]=null)):Pd(c)}}}function tE(c){return c in Pg?Pg[c]:Pg[c]="on"+c}function HN(c,h){if(c.da)c=!0;else{h=new fc(h,this);var p=c.listener,g=c.ha||c.src;c.fa&&Ng(c),c=p.call(g,h)}return c}function Fg(c){return c=c[Rg],c instanceof Nd?c:null}var kg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vg(c){return typeof c=="function"?c:(c[kg]||(c[kg]=function(h){return c.handleEvent(h)}),c[kg])}function fn(){Zr.call(this),this.i=new Nd(this),this.M=this,this.F=null}D(fn,Zr),fn.prototype[pc]=!0,fn.prototype.removeEventListener=function(c,h,p,g){eE(this,c,h,p,g)};function En(c,h){var p,g=c.F;if(g)for(p=[];g;g=g.F)p.push(g);if(c=c.M,g=h.type||h,typeof h=="string")h=new hn(h,c);else if(h instanceof hn)h.target=h.target||c;else{var P=h;h=new hn(g,c),A(h,P)}if(P=!0,p)for(var B=p.length-1;0<=B;B--){var Z=h.g=p[B];P=Fd(Z,g,!0,h)&&P}if(Z=h.g=c,P=Fd(Z,g,!0,h)&&P,P=Fd(Z,g,!1,h)&&P,p)for(B=0;B<p.length;B++)Z=h.g=p[B],P=Fd(Z,g,!1,h)&&P}fn.prototype.N=function(){if(fn.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],g=0;g<p.length;g++)Pd(p[g]);delete c.g[h],c.h--}}this.F=null},fn.prototype.K=function(c,h,p,g){return this.i.add(String(c),h,!1,p,g)},fn.prototype.L=function(c,h,p,g){return this.i.add(String(c),h,!0,p,g)};function Fd(c,h,p,g){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,B=0;B<h.length;++B){var Z=h[B];if(Z&&!Z.da&&Z.capture==p){var rt=Z.listener,rn=Z.ha||Z.src;Z.fa&&Ag(c.i,Z),P=rt.call(rn,g)!==!1&&P}}return P&&!g.defaultPrevented}function nE(c,h,p){if(typeof c=="function")p&&(c=m(c,p));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function iE(c){c.g=nE(()=>{c.g=null,c.i&&(c.i=!1,iE(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class zN extends Zr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:iE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mc(c){Zr.call(this),this.h=c,this.g={}}D(mc,Zr);var rE=[];function oE(c){pe(c.g,function(h,p){this.g.hasOwnProperty(p)&&Ng(h)},c),c.g={}}mc.prototype.N=function(){mc.aa.N.call(this),oE(this)},mc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lg=a.JSON.stringify,qN=a.JSON.parse,WN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Bg(){}Bg.prototype.h=null;function sE(c){return c.h||(c.h=c.i())}function aE(){}var gc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jg(){hn.call(this,"d")}D(jg,hn);function Ug(){hn.call(this,"c")}D(Ug,hn);var es={},lE=null;function kd(){return lE=lE||new fn}es.La="serverreachability";function cE(c){hn.call(this,es.La,c)}D(cE,hn);function _c(c){let h=kd();En(h,new cE(h))}es.STAT_EVENT="statevent";function uE(c,h){hn.call(this,es.STAT_EVENT,c),this.stat=h}D(uE,hn);function Dn(c){let h=kd();En(h,new uE(h,c))}es.Ma="timingevent";function dE(c,h){hn.call(this,es.Ma,c),this.size=h}D(dE,hn);function yc(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function vc(){this.g=!0}vc.prototype.xa=function(){this.g=!1};function KN(c,h,p,g,P,B){c.info(function(){if(c.g)if(B)for(var Z="",rt=B.split("&"),rn=0;rn<rt.length;rn++){var Ke=rt[rn].split("=");if(1<Ke.length){var pn=Ke[0];Ke=Ke[1];var mn=pn.split("_");Z=2<=mn.length&&mn[1]=="type"?Z+(pn+"="+Ke+"&"):Z+(pn+"=redacted&")}}else Z=null;else Z=B;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+h+`
`+p+`
`+Z})}function QN(c,h,p,g,P,B,Z){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+h+`
`+p+`
`+B+" "+Z})}function _a(c,h,p,g){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+JN(c,p)+(g?" "+g:"")})}function YN(c,h){c.info(function(){return"TIMEOUT: "+h})}vc.prototype.info=function(){};function JN(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var g=p[c];if(!(2>g.length)){var P=g[1];if(Array.isArray(P)&&!(1>P.length)){var B=P[0];if(B!="noop"&&B!="stop"&&B!="close")for(var Z=1;Z<P.length;Z++)P[Z]=""}}}}return Lg(p)}catch{return h}}var Vd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$g;function Ld(){}D(Ld,Bg),Ld.prototype.g=function(){return new XMLHttpRequest},Ld.prototype.i=function(){return{}},$g=new Ld;function Xr(c,h,p,g){this.j=c,this.i=h,this.l=p,this.R=g||1,this.U=new mc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fE}function fE(){this.i=null,this.g="",this.h=!1}var pE={},Gg={};function Hg(c,h,p){c.L=1,c.v=$d(br(h)),c.m=p,c.P=!0,mE(c,null)}function mE(c,h){c.F=Date.now(),Bd(c),c.A=br(c.v);var p=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),ME(p.i,"t",g),c.C=0,p=c.j.J,c.h=new fE,c.g=WE(c.j,p?h:null,!c.m),0<c.O&&(c.M=new zN(m(c.Y,c,c.g),c.O)),h=c.U,p=c.g,g=c.ca;var P="readystatechange";Array.isArray(P)||(P&&(rE[0]=P.toString()),P=rE);for(var B=0;B<P.length;B++){var Z=J1(p,P[B],g||h.handleEvent,!1,h.h||h);if(!Z)break;h.g[Z.key]=Z}h=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),_c(),KN(c.i,c.u,c.A,c.l,c.R,c.m)}Xr.prototype.ca=function(c){c=c.target;let h=this.M;h&&Cr(c)==3?h.j():this.Y(c)},Xr.prototype.Y=function(c){try{if(c==this.g)e:{let mn=Cr(this.g);var h=this.g.Ba();let wa=this.g.Z();if(!(3>mn)&&(mn!=3||this.g&&(this.h.h||this.g.oa()||kE(this.g)))){this.J||mn!=4||h==7||(h==8||0>=wa?_c(3):_c(2)),zg(this);var p=this.g.Z();this.X=p;t:if(gE(this)){var g=kE(this.g);c="";var P=g.length,B=Cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ts(this),wc(this);var Z="";break t}this.h.i=new a.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,c+=this.h.i.decode(g[h],{stream:!(B&&h==P-1)});g.length=0,this.h.g+=c,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=p==200,QN(this.i,this.u,this.A,this.l,this.R,mn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,rn=this.g;if((rt=rn.g?rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(rt)){var Ke=rt;break t}}Ke=null}if(p=Ke)_a(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qg(this,p);else{this.o=!1,this.s=3,Dn(12),ts(this),wc(this);break e}}if(this.P){p=!0;let Di;for(;!this.J&&this.C<Z.length;)if(Di=ZN(this,Z),Di==Gg){mn==4&&(this.s=4,Dn(14),p=!1),_a(this.i,this.l,null,"[Incomplete Response]");break}else if(Di==pE){this.s=4,Dn(15),_a(this.i,this.l,Z,"[Invalid Chunk]"),p=!1;break}else _a(this.i,this.l,Di,null),qg(this,Di);if(gE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mn!=4||Z.length!=0||this.h.h||(this.s=1,Dn(16),p=!1),this.o=this.o&&p,!p)_a(this.i,this.l,Z,"[Invalid Chunked Response]"),ts(this),wc(this);else if(0<Z.length&&!this.W){this.W=!0;var pn=this.j;pn.g==this&&pn.ba&&!pn.M&&(pn.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Zg(pn),pn.M=!0,Dn(11))}}else _a(this.i,this.l,Z,null),qg(this,Z);mn==4&&ts(this),this.o&&!this.J&&(mn==4?GE(this.j,this):(this.o=!1,Bd(this)))}else mF(this.g),p==400&&0<Z.indexOf("Unknown SID")?(this.s=3,Dn(12)):(this.s=0,Dn(13)),ts(this),wc(this)}}}catch{}finally{}};function gE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ZN(c,h){var p=c.C,g=h.indexOf(`
`,p);return g==-1?Gg:(p=Number(h.substring(p,g)),isNaN(p)?pE:(g+=1,g+p>h.length?Gg:(h=h.slice(g,g+p),c.C=g+p,h)))}Xr.prototype.cancel=function(){this.J=!0,ts(this)};function Bd(c){c.S=Date.now()+c.I,_E(c,c.I)}function _E(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=yc(m(c.ba,c),h)}function zg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Xr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(YN(this.i,this.A),this.L!=2&&(_c(),Dn(17)),ts(this),this.s=2,wc(this)):_E(this,this.S-c)};function wc(c){c.j.G==0||c.J||GE(c.j,c)}function ts(c){zg(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,oE(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function qg(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||Wg(p.h,c))){if(!c.K&&Wg(p.h,c)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Wd(p),zd(p);else break e;Jg(p),Dn(18)}}else p.za=P[1],0<p.za-p.T&&37500>P[2]&&p.F&&p.v==0&&!p.C&&(p.C=yc(m(p.Za,p),6e3));if(1>=wE(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else is(p,11)}else if((c.K||p.g==c)&&Wd(p),!ie(h))for(P=p.Da.g.parse(h),h=0;h<P.length;h++){let Ke=P[h];if(p.T=Ke[0],Ke=Ke[1],p.G==2)if(Ke[0]=="c"){p.K=Ke[1],p.ia=Ke[2];let pn=Ke[3];pn!=null&&(p.la=pn,p.j.info("VER="+p.la));let mn=Ke[4];mn!=null&&(p.Aa=mn,p.j.info("SVER="+p.Aa));let wa=Ke[5];wa!=null&&typeof wa=="number"&&0<wa&&(g=1.5*wa,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let Di=c.g;if(Di){let Qd=Di.g?Di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qd){var B=g.h;B.g||Qd.indexOf("spdy")==-1&&Qd.indexOf("quic")==-1&&Qd.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Kg(B,B.h),B.h=null))}if(g.D){let Xg=Di.g?Di.g.getResponseHeader("X-HTTP-Session-Id"):null;Xg&&(g.ya=Xg,ut(g.I,g.D,Xg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var Z=c;if(g.qa=qE(g,g.J?g.ia:null,g.W),Z.K){bE(g.h,Z);var rt=Z,rn=g.L;rn&&(rt.I=rn),rt.B&&(zg(rt),Bd(rt)),g.g=Z}else UE(g);0<p.i.length&&qd(p)}else Ke[0]!="stop"&&Ke[0]!="close"||is(p,7);else p.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?is(p,7):Yg(p):Ke[0]!="noop"&&p.l&&p.l.ta(Ke),p.v=0)}}_c(4)}catch{}}var XN=class{constructor(c,h){this.g=c,this.map=h}};function yE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wE(c){return c.h?1:c.g?c.g.size:0}function Wg(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Kg(c,h){c.g?c.g.add(h):c.h=h}function bE(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}yE.prototype.cancel=function(){if(this.i=CE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function CE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return T(c.i)}function eF(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var h=[],p=c.length,g=0;g<p;g++)h.push(c[g]);return h}h=[],p=0;for(g in c)h[p++]=c[g];return h}function tF(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let g in c)h[p++]=g;return h}}}function EE(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=tF(c),g=eF(c),P=g.length,B=0;B<P;B++)h.call(void 0,g[B],p&&p[B],c)}var DE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nF(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var g=c[p].indexOf("="),P=null;if(0<=g){var B=c[p].substring(0,g);P=c[p].substring(g+1)}else B=c[p];h(B,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function ns(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ns){this.h=c.h,jd(this,c.j),this.o=c.o,this.g=c.g,Ud(this,c.s),this.l=c.l;var h=c.i,p=new Ec;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),SE(this,p),this.m=c.m}else c&&(h=String(c).match(DE))?(this.h=!1,jd(this,h[1]||"",!0),this.o=bc(h[2]||""),this.g=bc(h[3]||"",!0),Ud(this,h[4]),this.l=bc(h[5]||"",!0),SE(this,h[6]||"",!0),this.m=bc(h[7]||"")):(this.h=!1,this.i=new Ec(null,this.h))}ns.prototype.toString=function(){var c=[],h=this.j;h&&c.push(Cc(h,IE,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(Cc(h,IE,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Cc(p,p.charAt(0)=="/"?oF:rF,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Cc(p,aF)),c.join("")};function br(c){return new ns(c)}function jd(c,h,p){c.j=p?bc(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Ud(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function SE(c,h,p){h instanceof Ec?(c.i=h,lF(c.i,c.h)):(p||(h=Cc(h,sF)),c.i=new Ec(h,c.h))}function ut(c,h,p){c.i.set(h,p)}function $d(c){return ut(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function bc(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Cc(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,iF),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function iF(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var IE=/[#\/\?@]/g,rF=/[#\?:]/g,oF=/[#\?]/g,sF=/[#\?@]/g,aF=/#/g;function Ec(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function eo(c){c.g||(c.g=new Map,c.h=0,c.i&&nF(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Ec.prototype,n.add=function(c,h){eo(this),this.i=null,c=ya(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function TE(c,h){eo(c),h=ya(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function xE(c,h){return eo(c),h=ya(c,h),c.g.has(h)}n.forEach=function(c,h){eo(this),this.g.forEach(function(p,g){p.forEach(function(P){c.call(h,P,g,this)},this)},this)},n.na=function(){eo(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let P=c[g];for(let B=0;B<P.length;B++)p.push(h[g])}return p},n.V=function(c){eo(this);let h=[];if(typeof c=="string")xE(this,c)&&(h=h.concat(this.g.get(ya(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},n.set=function(c,h){return eo(this),this.i=null,c=ya(this,c),xE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function ME(c,h,p){TE(c,h),0<p.length&&(c.i=null,c.g.set(ya(c,h),T(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let B=encodeURIComponent(String(g)),Z=this.V(g);for(g=0;g<Z.length;g++){var P=B;Z[g]!==""&&(P+="="+encodeURIComponent(String(Z[g]))),c.push(P)}}return this.i=c.join("&")};function ya(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function lF(c,h){h&&!c.j&&(eo(c),c.i=null,c.g.forEach(function(p,g){var P=g.toLowerCase();g!=P&&(TE(this,g),ME(this,P,p))},c)),c.j=h}function cF(c,h){let p=new vc;if(a.Image){let g=new Image;g.onload=y(to,p,"TestLoadImage: loaded",!0,h,g),g.onerror=y(to,p,"TestLoadImage: error",!1,h,g),g.onabort=y(to,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=y(to,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else h(!1)}function uF(c,h){let p=new vc,g=new AbortController,P=setTimeout(()=>{g.abort(),to(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:g.signal}).then(B=>{clearTimeout(P),B.ok?to(p,"TestPingServer: ok",!0,h):to(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),to(p,"TestPingServer: error",!1,h)})}function to(c,h,p,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(p)}catch{}}function dF(){this.g=new WN}function hF(c,h,p){let g=p||"";try{EE(c,function(P,B){let Z=P;u(P)&&(Z=Lg(P)),h.push(g+B+"="+encodeURIComponent(Z))})}catch(P){throw h.push(g+"type="+encodeURIComponent("_badmap")),P}}function Dc(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Dc,Bg),Dc.prototype.g=function(){return new Gd(this.l,this.j)},Dc.prototype.i=function(c){return function(){return c}}({});function Gd(c,h){fn.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Gd,fn),n=Gd.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,Ic(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ic(this)),this.g&&(this.readyState=3,Ic(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;AE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function AE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?Sc(this):Ic(this),this.readyState==3&&AE(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Sc(this))},n.Qa=function(c){this.g&&(this.response=c,Sc(this))},n.ga=function(){this.g&&Sc(this)};function Sc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ic(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function Ic(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Gd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function OE(c){let h="";return pe(c,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Qg(c,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=OE(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):ut(c,h,p))}function Tt(c){fn.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Tt,fn);var fF=/^https?$/i,pF=["POST","PUT"];n=Tt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$g.g(),this.v=this.o?sE(this.o):sE($g),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(B){RE(this,B);return}if(c=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)p.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let B of g.keys())p.set(B,g.get(B));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(B=>B.toLowerCase()=="content-type"),P=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pF,h,void 0))||g||P||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,Z]of p)this.g.setRequestHeader(B,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{FE(this),this.u=!0,this.g.send(c),this.u=!1}catch(B){RE(this,B)}};function RE(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,PE(c),Hd(c)}function PE(c){c.A||(c.A=!0,En(c,"complete"),En(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,En(this,"complete"),En(this,"abort"),Hd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hd(this,!0)),Tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?NE(this):this.bb())},n.bb=function(){NE(this)};function NE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Cr(c)!=4||c.Z()!=2)){if(c.u&&Cr(c)==4)nE(c.Ea,0,c);else if(En(c,"readystatechange"),Cr(c)==4){c.h=!1;try{let Z=c.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=Z===0){var P=String(c.D).match(DE)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),g=!fF.test(P?P.toLowerCase():"")}p=g}if(p)En(c,"complete"),En(c,"success");else{c.m=6;try{var B=2<Cr(c)?c.g.statusText:""}catch{B=""}c.l=B+" ["+c.Z()+"]",PE(c)}}finally{Hd(c)}}}}function Hd(c,h){if(c.g){FE(c);let p=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||En(c,"ready");try{p.onreadystatechange=g}catch{}}}function FE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Cr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Cr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),qN(h)}};function kE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function mF(c){let h={};c=(c.g&&2<=Cr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(ie(c[g]))continue;var p=O(c[g]);let P=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let B=h[P]||[];h[P]=B,B.push(p)}M(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tc(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function VE(c){this.Aa=0,this.i=[],this.j=new vc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tc("baseRetryDelayMs",5e3,c),this.cb=Tc("retryDelaySeedMs",1e4,c),this.Wa=Tc("forwardChannelMaxRetries",2,c),this.wa=Tc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new yE(c&&c.concurrentRequestLimit),this.Da=new dF,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=VE.prototype,n.la=8,n.G=1,n.connect=function(c,h,p,g){Dn(0),this.W=c,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=qE(this,null,this.W),qd(this)};function Yg(c){if(LE(c),c.G==3){var h=c.U++,p=br(c.I);if(ut(p,"SID",c.K),ut(p,"RID",h),ut(p,"TYPE","terminate"),xc(c,p),h=new Xr(c,c.j,h),h.L=2,h.v=$d(br(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=WE(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Bd(h)}zE(c)}function zd(c){c.g&&(Zg(c),c.g.cancel(),c.g=null)}function LE(c){zd(c),c.u&&(a.clearTimeout(c.u),c.u=null),Wd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function qd(c){if(!vE(c.h)&&!c.s){c.s=!0;var h=c.Ga;dc||Y1(),hc||(dc(),hc=!0),Mg.add(h,c),c.B=0}}function gF(c,h){return wE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=yc(m(c.Ga,c,h),HE(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let P=new Xr(this,this.j,c),B=this.o;if(this.S&&(B?(B=C(B),A(B,this.S)):B=this.S),this.m!==null||this.O||(P.H=B,B=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=jE(this,P,h),p=br(this.I),ut(p,"RID",c),ut(p,"CVER",22),this.D&&ut(p,"X-HTTP-Session-Id",this.D),xc(this,p),B&&(this.O?h="headers="+encodeURIComponent(String(OE(B)))+"&"+h:this.m&&Qg(p,this.m,B)),Kg(this.h,P),this.Ua&&ut(p,"TYPE","init"),this.P?(ut(p,"$req",h),ut(p,"SID","null"),P.T=!0,Hg(P,p,null)):Hg(P,p,h),this.G=2}}else this.G==3&&(c?BE(this,c):this.i.length==0||vE(this.h)||BE(this))};function BE(c,h){var p;h?p=h.l:p=c.U++;let g=br(c.I);ut(g,"SID",c.K),ut(g,"RID",p),ut(g,"AID",c.T),xc(c,g),c.m&&c.o&&Qg(g,c.m,c.o),p=new Xr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=jE(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Kg(c.h,p),Hg(p,g,h)}function xc(c,h){c.H&&pe(c.H,function(p,g){ut(h,g,p)}),c.l&&EE({},function(p,g){ut(h,g,p)})}function jE(c,h,p){p=Math.min(c.i.length,p);var g=c.l?m(c.l.Na,c.l,c):null;e:{var P=c.i;let B=-1;for(;;){let Z=["count="+p];B==-1?0<p?(B=P[0].g,Z.push("ofs="+B)):B=0:Z.push("ofs="+B);let rt=!0;for(let rn=0;rn<p;rn++){let Ke=P[rn].g,pn=P[rn].map;if(Ke-=B,0>Ke)B=Math.max(0,P[rn].g-100),rt=!1;else try{hF(pn,Z,"req"+Ke+"_")}catch{g&&g(pn)}}if(rt){g=Z.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,g}function UE(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;dc||Y1(),hc||(dc(),hc=!0),Mg.add(h,c),c.v=0}}function Jg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=yc(m(c.Fa,c),HE(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,$E(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=yc(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dn(10),zd(this),$E(this))};function Zg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function $E(c){c.g=new Xr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=br(c.qa);ut(h,"RID","rpc"),ut(h,"SID",c.K),ut(h,"AID",c.T),ut(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&ut(h,"TO",c.ja),ut(h,"TYPE","xmlhttp"),xc(c,h),c.m&&c.o&&Qg(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=$d(br(h)),p.m=null,p.P=!0,mE(p,c)}n.Za=function(){this.C!=null&&(this.C=null,zd(this),Jg(this),Dn(19))};function Wd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function GE(c,h){var p=null;if(c.g==h){Wd(c),Zg(c),c.g=null;var g=2}else if(Wg(c.h,h))p=h.D,bE(c.h,h),g=1;else return;if(c.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var P=c.B;g=kd(),En(g,new dE(g,p)),qd(c)}else UE(c);else if(P=h.s,P==3||P==0&&0<h.X||!(g==1&&gF(c,h)||g==2&&Jg(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),P){case 1:is(c,5);break;case 4:is(c,10);break;case 3:is(c,6);break;default:is(c,2)}}}function HE(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function is(c,h){if(c.j.info("Error code "+h),h==2){var p=m(c.fb,c),g=c.Xa;let P=!g;g=new ns(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jd(g,"https"),$d(g),P?cF(g.toString(),p):uF(g.toString(),p)}else Dn(2);c.G=0,c.l&&c.l.sa(h),zE(c),LE(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Dn(2)):(this.j.info("Failed to ping google.com"),Dn(1))};function zE(c){if(c.G=0,c.ka=[],c.l){let h=CE(c.h);(h.length!=0||c.i.length!=0)&&(R(c.ka,h),R(c.ka,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.ra()}}function qE(c,h,p){var g=p instanceof ns?br(p):new ns(p);if(g.g!="")h&&(g.g=h+"."+g.g),Ud(g,g.s);else{var P=a.location;g=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var B=new ns(null);g&&jd(B,g),h&&(B.g=h),P&&Ud(B,P),p&&(B.l=p),g=B}return p=c.D,h=c.ya,p&&h&&ut(g,p,h),ut(g,"VER",c.la),xc(c,g),g}function WE(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Tt(new Dc({eb:p})):new Tt(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function KE(){}n=KE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Kd(){}Kd.prototype.g=function(c,h){return new Wn(c,h)};function Wn(c,h){fn.call(this),this.g=new VE(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!ie(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!ie(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new va(this)}D(Wn,fn),Wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){Yg(this.g)},Wn.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Lg(c),c=p);h.i.push(new XN(h.Ya++,c)),h.G==3&&qd(h)},Wn.prototype.N=function(){this.g.l=null,delete this.j,Yg(this.g),delete this.g,Wn.aa.N.call(this)};function QE(c){jg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}D(QE,jg);function YE(){Ug.call(this),this.status=1}D(YE,Ug);function va(c){this.g=c}D(va,KE),va.prototype.ua=function(){En(this.g,"a")},va.prototype.ta=function(c){En(this.g,new QE(c))},va.prototype.sa=function(c){En(this.g,new YE)},va.prototype.ra=function(){En(this.g,"b")},Kd.prototype.createWebChannel=Kd.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,Sw=Br.createWebChannelTransport=function(){return new Kd},Dw=Br.getStatEventTarget=function(){return kd()},Ew=Br.Event=es,Up=Br.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vd.NO_ERROR=0,Vd.TIMEOUT=8,Vd.HTTP_ERROR=6,ku=Br.ErrorCode=Vd,hE.COMPLETE="complete",Cw=Br.EventType=hE,aE.EventType=gc,gc.OPEN="a",gc.CLOSE="b",gc.ERROR="c",gc.MESSAGE="d",fn.prototype.listen=fn.prototype.K,fl=Br.WebChannel=aE,bw=Br.FetchXmlHttpFactory=Dc,Tt.prototype.listenOnce=Tt.prototype.L,Tt.prototype.getLastError=Tt.prototype.Ka,Tt.prototype.getLastErrorCode=Tt.prototype.Ba,Tt.prototype.getStatus=Tt.prototype.Z,Tt.prototype.getResponseJson=Tt.prototype.Oa,Tt.prototype.getResponseText=Tt.prototype.oa,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Ha,ww=Br.XhrIo=Tt}).apply(typeof jp<"u"?jp:typeof self<"u"?self:typeof window<"u"?window:{});var UM="@firebase/firestore";var Gt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");var Hl="10.13.0";var No=new Zd("@firebase/firestore");function yl(){return No.logLevel}function GA(n){No.setLogLevel(n)}function W(n,...t){if(No.logLevel<=zi.DEBUG){let e=t.map(AC);No.debug(`Firestore (${Hl}): ${n}`,...e)}}function Nt(n,...t){if(No.logLevel<=zi.ERROR){let e=t.map(AC);No.error(`Firestore (${Hl}): ${n}`,...e)}}function vi(n,...t){if(No.logLevel<=zi.WARN){let e=t.map(AC);No.warn(`Firestore (${Hl}): ${n}`,...e)}}function AC(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function ae(n="Unexpected state"){let t=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: `+n;throw Nt(t),new Error(t)}function ue(n,t){n||ae()}function HA(n,t){n||ae()}function te(n,t){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends nD{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ht=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var Zp=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Aw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Gt.UNAUTHENTICATED))}shutdown(){}},Ow=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},Rw=class{constructor(t){this.t=t,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let i=this.i,r=l=>this.i!==i?(i=this.i,e(l)):Promise.resolve(),o=new Ht;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ht,t.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let l=o;t.enqueueRetryable(()=>E(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ht)}},0),s()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ue(typeof i.accessToken=="string"),new Zp(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return ue(t===null||typeof t=="string"),new Gt(t)}},Pw=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Nw=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Pw(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Fw=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},kw=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let i=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};let r=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ue(typeof e.token=="string"),this.R=e.token,new Fw(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function cG(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Xp=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=cG(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%t.length))}return i}};function Se(n,t){return n<t?-1:n>t?1:0}function Tl(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function zA(n){return n+"\0"}var It=class n{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Se(this.nanoseconds,t.nanoseconds):Se(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var me=class n{constructor(t){this.timestamp=t}static fromTimestamp(t){return new n(t)}static min(){return new n(new It(0,0))}static max(){return new n(new It(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var em=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&ae(),i===void 0?i=t.length-e:i>t.length-e&&ae(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let o=t.get(r),s=e.get(r);if(o<s)return-1;if(o>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},He=class n extends em{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},uG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ft=class n extends em{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return uG.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,o=()=>{if(i.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},s=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new z(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new z(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var ne=class n{constructor(t){this.path=t}static fromPath(t){return new n(He.fromString(t))}static fromName(t){return new n(He.fromString(t).popFirst(5))}static empty(){return new n(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&He.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return He.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new He(t.slice()))}};var xl=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};function Vw(n){return n.fields.find(t=>t.kind===2)}function Vs(n){return n.fields.filter(t=>t.kind!==2)}xl.UNKNOWN_ID=-1;var Dl=class{constructor(t,e){this.fieldPath=t,this.kind=e}};var Ku=class n{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new n(0,wi.min())}};function qA(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=me.fromTimestamp(i===1e9?new It(e+1,0):new It(e,i));return new wi(r,ne.empty(),t)}function WA(n){return new wi(n.readTime,n.key,-1)}var wi=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(me.min(),ne.empty(),-1)}static max(){return new n(me.max(),ne.empty(),-1)}};function OC(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=ne.comparator(n.documentKey,t.documentKey),e!==0?e:Se(n.largestBatchId,t.largestBatchId))}var KA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Ho(n){return E(this,null,function*(){if(n.code!==L.FAILED_PRECONDITION||n.message!==KA)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,o=0,s=!1;t.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&e()},l=>i(l))}),s=!0,o===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let o=t.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;e(t[u]).next(d=>{s[u]=d,++a,a===o&&i(s)},d=>r(d))}})}static doWhile(t,e){return new n((i,r)=>{let o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}};var nm=class n{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Ht,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Gs(t,e.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=RC(i.target.error);this.V.reject(new Gs(t,r))}}static open(t,e,i,r){try{return new n(e,t.transaction(r,i))}catch(o){throw new Gs(e,o)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(W("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let e=this.transaction.objectStore(t);return new Bw(e)}},Fo=class n{constructor(t,e,i){this.name=t,this.version=e,this.p=i,n.S(Mc())===12.2&&Nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return W("SimpleDb","Removing database:",t),Ls(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Jd())return!1;if(n.v())return!0;let t=Mc(),e=n.S(t),i=0<e&&e<10,r=QA(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.C)==="YES"}static F(t,e){return t.store(e)}static S(t){let e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(t){return E(this,null,function*(){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=yield new Promise((e,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;e(s)},r.onblocked=()=>{i(new Gs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new z(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new z(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new Gs(t,s))},r.onupgradeneeded=o=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,r.transaction,o.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db})}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){return E(this,null,function*(){let o=e==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(t);let a=nm.open(this.db,t,o?"readonly":"readwrite",i),l=r(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),V.reject(u))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,u=l.name!=="FirebaseError"&&s<3;if(W("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function QA(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}var Lw=class{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return Ls(this.B.delete())}},Gs=class extends z{constructor(t,e){super(L.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}};function zo(n){return n.name==="IndexedDbTransactionError"}var Bw=class{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(W("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Ls(i)}add(t){return W("SimpleDb","ADD",this.store.name,t,t),Ls(this.store.add(t))}get(t){return Ls(this.store.get(t)).next(e=>(e===void 0&&(e=null),W("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return W("SimpleDb","DELETE",this.store.name,t),Ls(this.store.delete(t))}count(){return W("SimpleDb","COUNT",this.store.name),Ls(this.store.count())}U(t,e){let i=this.options(t,e),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new V((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{let o=this.cursor(i),s=[];return this.W(o,(a,l)=>{s.push(l)}).next(()=>s)}}G(t,e){let i=this.store.getAll(t,e===null?void 0:e);return new V((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}j(t,e){W("SimpleDb","DELETE ALL",this.store.name);let i=this.options(t,e);i.H=!1;let r=this.cursor(i);return this.W(r,(o,s,a)=>a.delete())}J(t,e){let i;e?i=t:(i={},e=t);let r=this.cursor(i);return this.W(r,e)}Y(t){let e=this.cursor({});return new V((i,r)=>{e.onerror=o=>{let s=RC(o.target.error);r(s)},e.onsuccess=o=>{let s=o.target.result;s?t(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}W(t,e){let i=[];return new V((r,o)=>{t.onerror=s=>{o(s.target.error)},t.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let l=new Lw(a),u=e(a.primaryKey,a.value,l);if(u instanceof V){let d=u.catch(f=>(l.done(),V.reject(f)));i.push(d)}l.isDone?r():l.K===null?a.continue():a.continue(l.K)}}).next(()=>V.waitFor(i))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){let i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}};function Ls(n){return new V((t,e)=>{n.onsuccess=i=>{let r=i.target.result;t(r)},n.onerror=i=>{let r=RC(i.target.error);e(r)}})}var $M=!1;function RC(n){let t=Fo.S(Mc());if(t>=12.2&&t<13){let e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){let i=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $M||($M=!0,setTimeout(()=>{throw i},0)),i}}return n}var jw=class{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(t){W("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,()=>E(this,null,function*(){this.task=null;try{W("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(e){zo(e)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):yield Ho(e)}yield this.X(6e4)}))}},Uw=class{constructor(t,e){this.localStore=t,this.persistence=e}ee(t=50){return E(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.te(e,t))})}te(t,e){let i=new Set,r=e,o=!0;return V.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(s=>{if(s!==null&&!i.has(s))return W("IndexBackfiller",`Processing collection: ${s}`),this.ne(t,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>e-r)}ne(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next(()=>this.re(r,o)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>s.size)}))}re(t,e){let i=t;return e.changes.forEach((r,o)=>{let s=WA(o);OC(s,i)>0&&(i=s)}),new wi(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}};var oi=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function _d(n){return n==null}function Qu(n){return n===0&&1/n==-1/0}function YA(n){return typeof n=="number"&&Number.isInteger(n)&&!Qu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Mn(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=GM(t)),t=dG(n.get(e),t);return GM(t)}function dG(n,t){let e=t,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":e+="";break;case"":e+="";break;default:e+=o}}return e}function GM(n){return n+""}function ar(n){let t=n.length;if(ue(t>=2),t===2)return ue(n.charAt(0)===""&&n.charAt(1)===""),He.emptyPath();let e=t-2,i=[],r="";for(let o=0;o<t;){let s=n.indexOf("",o);switch((s<0||s>e)&&ae(),n.charAt(s+1)){case"":let a=n.substring(o,s),l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=n.substring(o,s),r+="\0";break;case"":r+=n.substring(o,s+1);break;default:ae()}o=s+2}return new He(i)}var HM=["userId","batchId"];function qp(n,t){return[n,Mn(t)]}function JA(n,t,e){return[n,Mn(t),e]}var hG={},fG=["prefixPath","collectionGroup","readTime","documentId"],pG=["prefixPath","collectionGroup","documentId"],mG=["collectionGroup","readTime","prefixPath","documentId"],gG=["canonicalId","targetId"],_G=["targetId","path"],yG=["path","targetId"],vG=["collectionId","parent"],wG=["indexId","uid"],bG=["uid","sequenceNumber"],CG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EG=["indexId","uid","orderedDocumentKey"],DG=["userId","collectionPath","documentId"],SG=["userId","collectionPath","largestBatchId"],IG=["userId","collectionGroup","largestBatchId"],ZA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TG=[...ZA,"documentOverlays"],XA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eO=XA,PC=[...eO,"indexConfiguration","indexState","indexEntries"],xG=PC,MG=[...PC,"globals"];var Yu=class extends tm{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}};function Kt(n,t){let e=te(n);return Fo.F(e._e,t)}function zM(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ta(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function tO(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var ht=class n{constructor(t,e){this.comparator=t,this.root=e||cr.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,cr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new El(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new El(this.root,t,this.comparator,!1)}getReverseIterator(){return new El(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new El(this.root,t,this.comparator,!0)}},El=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},cr=class n{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new n(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();let t=this.left.check();if(t!==this.right.check())throw ae();return t+(this.isRed()?0:1)}};cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(t,e,i,r,o){return this}insert(t,e,i){return new cr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var st=class n{constructor(t){this.comparator=t,this.data=new ht(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new im(this.data.getIterator())}getIteratorFrom(t){return new im(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},im=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function pl(n){return n.hasNext()?n.getNext():void 0}var si=class n{constructor(t){this.fields=t,t.sort(Ft.comparator)}static empty(){return new n([])}unionWith(t){let e=new st(Ft.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Tl(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var rm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function nO(){return typeof atob<"u"}var Vt=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rm("Invalid base64 string: "+o):o}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Se(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Vt.EMPTY_BYTE_STRING=new Vt("");var AG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(n){if(ue(!!n),typeof n=="string"){let t=0,e=AG.exec(n);if(ue(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:gt(n.seconds),nanos:gt(n.nanos)}}function gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ko(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}function Km(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function NC(n){let t=n.mapValue.fields.__previous_value__;return Km(t)?NC(t):t}function Ju(n){let t=$r(n.mapValue.fields.__local_write_time__.timestampValue);return new It(t.seconds,t.nanos)}var $w=class{constructor(t,e,i,r,o,s,a,l,u){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},Vo=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var Ro={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wp={nullValue:"NULL_VALUE"};function Hs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Km(n)?4:iO(n)?9007199254740991:Qm(n)?10:11:ae()}function hr(n,t){if(n===t)return!0;let e=Hs(n);if(e!==Hs(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ju(n).isEqual(Ju(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=$r(r.timestampValue),a=$r(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return ko(r.bytesValue).isEqual(ko(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return gt(r.geoPointValue.latitude)===gt(o.geoPointValue.latitude)&&gt(r.geoPointValue.longitude)===gt(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return gt(r.integerValue)===gt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=gt(r.doubleValue),a=gt(o.doubleValue);return s===a?Qu(s)===Qu(a):isNaN(s)&&isNaN(a)}return!1}(n,t);case 9:return Tl(n.arrayValue.values||[],t.arrayValue.values||[],hr);case 10:case 11:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(zM(s)!==zM(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!hr(s[l],a[l])))return!1;return!0}(n,t);default:return ae()}}function Zu(n,t){return(n.values||[]).find(e=>hr(e,t))!==void 0}function Lo(n,t){if(n===t)return 0;let e=Hs(n),i=Hs(t);if(e!==i)return Se(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,t.booleanValue);case 2:return function(o,s){let a=gt(o.integerValue||o.doubleValue),l=gt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return qM(n.timestampValue,t.timestampValue);case 4:return qM(Ju(n),Ju(t));case 5:return Se(n.stringValue,t.stringValue);case 6:return function(o,s){let a=ko(o),l=ko(s);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let d=Se(a[u],l[u]);if(d!==0)return d}return Se(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,s){let a=Se(gt(o.latitude),gt(s.latitude));return a!==0?a:Se(gt(o.longitude),gt(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return WM(n.arrayValue,t.arrayValue);case 10:return function(o,s){var a,l,u,d;let f=o.fields||{},m=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(l=m.value)===null||l===void 0?void 0:l.arrayValue,T=Se(((u=y?.values)===null||u===void 0?void 0:u.length)||0,((d=D?.values)===null||d===void 0?void 0:d.length)||0);return T!==0?T:WM(y,D)}(n.mapValue,t.mapValue);case 11:return function(o,s){if(o===Ro.mapValue&&s===Ro.mapValue)return 0;if(o===Ro.mapValue)return 1;if(s===Ro.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){let m=Se(l[f],d[f]);if(m!==0)return m;let y=Lo(a[l[f]],u[d[f]]);if(y!==0)return y}return Se(l.length,d.length)}(n.mapValue,t.mapValue);default:throw ae()}}function qM(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Se(n,t);let e=$r(n),i=$r(t),r=Se(e.seconds,i.seconds);return r!==0?r:Se(e.nanos,i.nanos)}function WM(n,t){let e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){let o=Lo(e[r],i[r]);if(o)return o}return Se(e.length,i.length)}function Ml(n){return Gw(n)}function Gw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=$r(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return ko(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return ne.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let o of e.values||[])r?r=!1:i+=",",i+=Gw(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${Gw(e.fields[s])}`;return r+"}"}(n.mapValue):ae()}function zs(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Hw(n){return!!n&&"integerValue"in n}function Xu(n){return!!n&&"arrayValue"in n}function KM(n){return!!n&&"nullValue"in n}function QM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kp(n){return!!n&&"mapValue"in n}function Qm(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function Gu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return ta(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Gu(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Gu(n.arrayValue.values[e]);return t}return Object.assign({},n)}function iO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var rO={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function OG(n){return"nullValue"in n?Wp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zs(Vo.empty(),ne.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Qm(n)?rO:{mapValue:{}}:ae()}function RG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zs(Vo.empty(),ne.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?rO:"mapValue"in n?Qm(n)?{mapValue:{}}:Ro:ae()}function YM(n,t){let e=Lo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function JM(n,t){let e=Lo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}var bn=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Kp(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gu(e)}setAll(t){let e=Ft.emptyPath(),i={},r=[];t.forEach((s,a)=>{if(!e.isImmediateParentOf(a)){let l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=a.popLast()}s?i[a.lastSegment()]=Gu(s):r.push(a.lastSegment())});let o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){let e=this.field(t.popLast());Kp(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return hr(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Kp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){ta(e,(r,o)=>t[r]=o);for(let r of i)delete t[r]}clone(){return new n(Gu(this.value))}};function oO(n){let t=[];return ta(n.fields,(e,i)=>{let r=new Ft([e]);if(Kp(i)){let o=oO(i.mapValue).fields;if(o.length===0)t.push(r);else for(let s of o)t.push(r.child(s))}else t.push(r)}),new si(t)}var zt=class n{constructor(t,e,i,r,o,s,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new n(t,0,me.min(),me.min(),me.min(),bn.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,me.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,me.min(),me.min(),bn.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,me.min(),me.min(),bn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fr=class{constructor(t,e){this.position=t,this.inclusive=e}};function ZM(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let o=t[r],s=n.position[r];if(o.field.isKeyField()?i=ne.comparator(ne.fromName(s.referenceValue),e.key):i=Lo(s,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function XM(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!hr(n.position[e],t.position[e]))return!1;return!0}var qs=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function PG(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var om=class{},Ve=class n extends om{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Ww(t,e,i):e==="array-contains"?new Yw(t,i):e==="in"?new sm(t,i):e==="not-in"?new Jw(t,i):e==="array-contains-any"?new Zw(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Kw(t,i):new Qw(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Lo(e,this.value)):e!==null&&Hs(this.value)===Hs(e)&&this.matchesComparison(Lo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},tt=class n extends om{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new n(t,e)}matches(t){return Al(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Al(n){return n.op==="and"}function zw(n){return n.op==="or"}function FC(n){return sO(n)&&Al(n)}function sO(n){for(let t of n.filters)if(t instanceof tt)return!1;return!0}function qw(n){if(n instanceof Ve)return n.field.canonicalString()+n.op.toString()+Ml(n.value);if(FC(n))return n.filters.map(t=>qw(t)).join(",");{let t=n.filters.map(e=>qw(e)).join(",");return`${n.op}(${t})`}}function aO(n,t){return n instanceof Ve?function(i,r){return r instanceof Ve&&i.op===r.op&&i.field.isEqual(r.field)&&hr(i.value,r.value)}(n,t):n instanceof tt?function(i,r){return r instanceof tt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&aO(s,r.filters[a]),!0):!1}(n,t):void ae()}function lO(n,t){let e=n.filters.concat(t);return tt.create(e,n.op)}function cO(n){return n instanceof Ve?function(e){return`${e.field.canonicalString()} ${e.op} ${Ml(e.value)}`}(n):n instanceof tt?function(e){return e.op.toString()+" {"+e.getFilters().map(cO).join(" ,")+"}"}(n):"Filter"}var Ww=class extends Ve{constructor(t,e,i){super(t,e,i),this.key=ne.fromName(i.referenceValue)}matches(t){let e=ne.comparator(t.key,this.key);return this.matchesComparison(e)}},Kw=class extends Ve{constructor(t,e){super(t,"in",e),this.keys=uO("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},Qw=class extends Ve{constructor(t,e){super(t,"not-in",e),this.keys=uO("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function uO(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>ne.fromName(i.referenceValue))}var Yw=class extends Ve{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return Xu(e)&&Zu(e.arrayValue,this.value)}},sm=class extends Ve{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&Zu(this.value.arrayValue,e)}},Jw=class extends Ve{constructor(t,e){super(t,"not-in",e)}matches(t){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!Zu(this.value.arrayValue,e)}},Zw=class extends Ve{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!Xu(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Zu(this.value.arrayValue,i))}};var Xw=class{constructor(t,e=null,i=[],r=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function eb(n,t=null,e=[],i=[],r=null,o=null,s=null){return new Xw(n,t,e,i,r,o,s)}function Ws(n){let t=te(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>qw(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),_d(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Ml(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Ml(i)).join(",")),t.ue=e}return t.ue}function yd(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!PG(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!aO(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!XM(n.startAt,t.startAt)&&XM(n.endAt,t.endAt)}function am(n){return ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function lm(n,t){return n.filters.filter(e=>e instanceof Ve&&e.field.isEqual(t))}function eA(n,t,e){let i=Wp,r=!0;for(let o of lm(n,t)){let s=Wp,a=!0;switch(o.op){case"<":case"<=":s=OG(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Wp}YM({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){let s=e.position[o];YM({value:i,inclusive:r},{value:s,inclusive:e.inclusive})<0&&(i=s,r=e.inclusive);break}}return{value:i,inclusive:r}}function tA(n,t,e){let i=Ro,r=!0;for(let o of lm(n,t)){let s=Ro,a=!0;switch(o.op){case">=":case">":s=RG(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ro}JM({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){let s=e.position[o];JM({value:i,inclusive:r},{value:s,inclusive:e.inclusive})>0&&(i=s,r=e.inclusive);break}}return{value:i,inclusive:r}}var ji=class{constructor(t,e=null,i=[],r=[],o=null,s="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function dO(n,t,e,i,r,o,s,a){return new ji(n,t,e,i,r,o,s,a)}function zl(n){return new ji(n)}function nA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kC(n){return n.collectionGroup!==null}function Sl(n){let t=te(n);if(t.ce===null){t.ce=[];let e=new Set;for(let o of t.explicitOrderBy)t.ce.push(o),e.add(o.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new st(Ft.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.ce.push(new qs(o,i))}),e.has(Ft.keyField().canonicalString())||t.ce.push(new qs(Ft.keyField(),i))}return t.ce}function An(n){let t=te(n);return t.le||(t.le=NG(t,Sl(n))),t.le}function NG(n,t){if(n.limitType==="F")return eb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new qs(r.field,o)});let e=n.endAt?new fr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new fr(n.startAt.position,n.startAt.inclusive):null;return eb(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function tb(n,t){let e=n.filters.concat([t]);return new ji(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function cm(n,t,e){return new ji(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function vd(n,t){return yd(An(n),An(t))&&n.limitType===t.limitType}function hO(n){return`${Ws(An(n))}|lt:${n.limitType}`}function vl(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>cO(r)).join(", ")}]`),_d(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Ml(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Ml(r)).join(",")),`Target(${i})`}(An(n))}; limitType=${n.limitType})`}function wd(n,t){return t.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ne.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(let o of Sl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(s,a,l){let u=ZM(s,a,l);return s.inclusive?u<=0:u<0}(i.startAt,Sl(i),r)||i.endAt&&!function(s,a,l){let u=ZM(s,a,l);return s.inclusive?u>=0:u>0}(i.endAt,Sl(i),r))}(n,t)}function fO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pO(n){return(t,e)=>{let i=!1;for(let r of Sl(n)){let o=FG(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function FG(n,t,e){let i=n.field.isKeyField()?ne.comparator(t.key,e.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Lo(l,u):ae()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ae()}}var pr=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ta(this.inner,(e,i)=>{for(let[r,o]of i)t(r,o)})}isEmpty(){return tO(this.inner)}size(){return this.innerSize}};var kG=new ht(ne.comparator);function zn(){return kG}var mO=new ht(ne.comparator);function Uu(...n){let t=mO;for(let e of n)t=t.insert(e.key,e);return t}function gO(n){let t=mO;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function lr(){return Hu()}function _O(){return Hu()}function Hu(){return new pr(n=>n.toString(),(n,t)=>n.isEqual(t))}var VG=new ht(ne.comparator),LG=new st(ne.comparator);function Ie(...n){let t=LG;for(let e of n)t=t.add(e);return t}var BG=new st(Se);function VC(){return BG}function LC(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qu(t)?"-0":t}}function yO(n){return{integerValue:""+n}}function vO(n,t){return YA(t)?yO(t):LC(n,t)}var Ol=class{constructor(){this._=void 0}};function jG(n,t,e){return n instanceof Bo?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Km(o)&&(o=NC(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(e,t):n instanceof Gr?bO(n,t):n instanceof Hr?CO(n,t):function(r,o){let s=wO(r,o),a=iA(s)+iA(r.Pe);return Hw(s)&&Hw(r.Pe)?yO(a):LC(r.serializer,a)}(n,t)}function UG(n,t,e){return n instanceof Gr?bO(n,t):n instanceof Hr?CO(n,t):e}function wO(n,t){return n instanceof jo?function(i){return Hw(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}var Bo=class extends Ol{},Gr=class extends Ol{constructor(t){super(),this.elements=t}};function bO(n,t){let e=EO(t);for(let i of n.elements)e.some(r=>hr(r,i))||e.push(i);return{arrayValue:{values:e}}}var Hr=class extends Ol{constructor(t){super(),this.elements=t}};function CO(n,t){let e=EO(t);for(let i of n.elements)e=e.filter(r=>!hr(r,i));return{arrayValue:{values:e}}}var jo=class extends Ol{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function iA(n){return gt(n.integerValue||n.doubleValue)}function EO(n){return Xu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ks=class{constructor(t,e){this.field=t,this.transform=e}};function $G(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Gr&&r instanceof Gr||i instanceof Hr&&r instanceof Hr?Tl(i.elements,r.elements,hr):i instanceof jo&&r instanceof jo?hr(i.Pe,r.Pe):i instanceof Bo&&r instanceof Bo}(n.transform,t.transform)}var nb=class{constructor(t,e){this.version=t,this.transformResults=e}},Rt=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Qp(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var Rl=class{};function DO(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new $o(n.key,Rt.none()):new Uo(n.key,n.data,Rt.none());{let e=n.data,i=bn.empty(),r=new st(Ft.comparator);for(let o of t.fields)if(!r.has(o)){let s=e.field(o);s===null&&o.length>1&&(o=o.popLast(),s=e.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Ui(n.key,i,new si(r.toArray()),Rt.none())}}function GG(n,t,e){n instanceof Uo?function(r,o,s){let a=r.value.clone(),l=oA(r.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,t,e):n instanceof Ui?function(r,o,s){if(!Qp(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=oA(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(SO(r)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,t,e):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,e)}function zu(n,t,e,i){return n instanceof Uo?function(o,s,a,l){if(!Qp(o.precondition,s))return a;let u=o.value.clone(),d=sA(o.fieldTransforms,l,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,t,e,i):n instanceof Ui?function(o,s,a,l){if(!Qp(o.precondition,s))return a;let u=sA(o.fieldTransforms,l,s),d=s.data;return d.setAll(SO(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,t,e,i):function(o,s,a){return Qp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,t,e)}function HG(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),o=wO(i.transform,r||null);o!=null&&(e===null&&(e=bn.empty()),e.set(i.field,o))}return e||null}function rA(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Tl(i,r,(o,s)=>$G(o,s))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var Uo=class extends Rl{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Ui=class extends Rl{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function SO(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function oA(n,t,e){let i=new Map;ue(n.length===e.length);for(let r=0;r<e.length;r++){let o=n[r],s=o.transform,a=t.data.field(o.field);i.set(o.field,UG(s,a,e[r]))}return i}function sA(n,t,e){let i=new Map;for(let r of n){let o=r.transform,s=e.data.field(r.field);i.set(r.field,jG(o,s,t))}return i}var $o=class extends Rl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ed=class extends Rl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var td=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(t.key)&&GG(o,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=zu(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=zu(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=_O();return this.mutations.forEach(r=>{let o=t.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=e.has(r.key)?null:a;let l=DO(s,a);l!==null&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(me.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ie())}isEqual(t){return this.batchId===t.batchId&&Tl(this.mutations,t.mutations,(e,i)=>rA(e,i))&&Tl(this.baseMutations,t.baseMutations,(e,i)=>rA(e,i))}},ib=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){ue(t.mutations.length===i.length);let r=function(){return VG}(),o=t.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new n(t,e,i,r)}};var nd=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var rb=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var Ut,Ge;function IO(n){switch(n){default:return ae();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function TO(n){if(n===void 0)return Nt("GRPC error has no .code"),L.UNKNOWN;switch(n){case Ut.OK:return L.OK;case Ut.CANCELLED:return L.CANCELLED;case Ut.UNKNOWN:return L.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return L.INTERNAL;case Ut.UNAVAILABLE:return L.UNAVAILABLE;case Ut.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ut.NOT_FOUND:return L.NOT_FOUND;case Ut.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ut.ABORTED:return L.ABORTED;case Ut.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ut.DATA_LOSS:return L.DATA_LOSS;default:return ae()}}(Ge=Ut||(Ut={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";var aA=null;function xO(){return new TextEncoder}var zG=new To([4294967295,4294967295],0);function lA(n){let t=xO().encode(n),e=new vw;return e.update(t),new Uint8Array(e.digest())}function cA(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new To([e,i],0),new To([r,o],0)]}var ob=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new $s(`Invalid padding: ${e}`);if(i<0)throw new $s(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new $s(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new $s(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=To.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(To.fromNumber(i)));return r.compare(zG)===1&&(r=new To([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=lA(t),[i,r]=cA(e);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new n(o,r,e);return i.forEach(a=>s.insert(a)),s}insert(t){if(this.Ie===0)return;let e=lA(t),[i,r]=cA(e);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},$s=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var id=class n{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,rd.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(me.min(),r,new ht(Se),zn(),Ie())}},rd=class n{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,Ie(),Ie(),Ie())}};var Il=class{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}},um=class{constructor(t,e){this.targetId=t,this.me=e}},dm=class{constructor(t,e,i=Vt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},hm=class{constructor(){this.fe=0,this.ge=dA(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Ie(),e=Ie(),i=Ie();return this.ge.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:ae()}}),new rd(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=dA()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},sb=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=zn(),this.qe=uA(),this.Qe=new ht(Se)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:ae()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){let e=t.targetId,i=t.me.count,r=this.Je(e);if(r){let o=r.target;if(am(o))if(i===0){let s=new ne(o.path);this.Ue(e,s,zt.newNoDocument(s,me.min()))}else ue(i===1);else{let s=this.Ye(e);if(s!==i){let a=this.Ze(t),l=a?this.Xe(a,t,s):1;if(l!==0){this.je(e);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,u)}aA?.et(function(d,f,m,y,D){var T,R,q,ie,H,le;let ge={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},pe=f.unchangedNames;return pe&&(ge.bloomFilter={applied:D===0,hashCount:(T=pe?.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(ie=(q=(R=pe?.bits)===null||R===void 0?void 0:R.bitmap)===null||q===void 0?void 0:q.length)!==null&&ie!==void 0?ie:0,padding:(le=(H=pe?.bits)===null||H===void 0?void 0:H.padding)!==null&&le!==void 0?le:0,mightContain:M=>{var C;return(C=y?.mightContain(M))!==null&&C!==void 0&&C}}),ge}(s,t.me,this.Le.tt(),a,l))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e,s,a;try{s=ko(i).toUint8Array()}catch(l){if(l instanceof rm)return vi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ob(s,r,o)}catch(l){return vi(l instanceof $s?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,o,null),r++)}),r}rt(t){let e=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&am(a.target)){let l=new ne(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,zt.newNoDocument(l,t))}o.be&&(e.set(s,o.ve()),o.Ce())}});let i=Ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(t));let r=new id(t,e,this.Qe,this.ke,i);return this.ke=zn(),this.qe=uA(),this.Qe=new ht(Se),r}$e(t,e){if(!this.ze(t))return;let i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new hm,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new st(Se),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||W("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new hm),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function uA(){return new ht(ne.comparator)}function dA(){return new ht(ne.comparator)}var qG={asc:"ASCENDING",desc:"DESCENDING"},WG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KG={and:"AND",or:"OR"},ab=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function lb(n,t){return n.useProto3Json||_d(t)?t:{value:t}}function Pl(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function MO(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function QG(n,t){return Pl(n,t.toTimestamp())}function kt(n){return ue(!!n),me.fromTimestamp(function(e){let i=$r(e);return new It(i.seconds,i.nanos)}(n))}function BC(n,t){return cb(n,t).canonicalString()}function cb(n,t){let e=function(r){return new He(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function AO(n){let t=He.fromString(n);return ue(jO(t)),t}function od(n,t){return BC(n.databaseId,t.path)}function ur(n,t){let e=AO(t);if(e.get(1)!==n.databaseId.projectId)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new ne(PO(e))}function OO(n,t){return BC(n.databaseId,t)}function RO(n){let t=AO(n);return t.length===4?He.emptyPath():PO(t)}function ub(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function PO(n){return ue(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function hA(n,t,e){return{name:od(n,t),fields:e.value.mapValue.fields}}function NO(n,t,e){let i=ur(n,t.name),r=kt(t.updateTime),o=t.createTime?kt(t.createTime):me.min(),s=new bn({mapValue:{fields:t.fields}}),a=zt.newFoundDocument(i,r,o,s);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function YG(n,t){return"found"in t?function(i,r){ue(!!r.found),r.found.name,r.found.updateTime;let o=ur(i,r.found.name),s=kt(r.found.updateTime),a=r.found.createTime?kt(r.found.createTime):me.min(),l=new bn({mapValue:{fields:r.found.fields}});return zt.newFoundDocument(o,s,a,l)}(n,t):"missing"in t?function(i,r){ue(!!r.missing),ue(!!r.readTime);let o=ur(i,r.missing),s=kt(r.readTime);return zt.newNoDocument(o,s)}(n,t):ae()}function JG(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(ue(d===void 0||typeof d=="string"),Vt.fromBase64String(d||"")):(ue(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Vt.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(u){let d=u.code===void 0?L.UNKNOWN:TO(u.code);return new z(d,u.message||"")}(s);e=new dm(i,r,o,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=ur(n,i.document.name),o=kt(i.document.updateTime),s=i.document.createTime?kt(i.document.createTime):me.min(),a=new bn({mapValue:{fields:i.document.fields}}),l=zt.newFoundDocument(r,o,s,a),u=i.targetIds||[],d=i.removedTargetIds||[];e=new Il(u,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=ur(n,i.document),o=i.readTime?kt(i.readTime):me.min(),s=zt.newNoDocument(r,o),a=i.removedTargetIds||[];e=new Il([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=ur(n,i.document),o=i.removedTargetIds||[];e=new Il([],o,r,null)}else{if(!("filter"in t))return ae();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new rb(r,o),a=i.targetId;e=new um(a,s)}}return e}function sd(n,t){let e;if(t instanceof Uo)e={update:hA(n,t.key,t.value)};else if(t instanceof $o)e={delete:od(n,t.key)};else if(t instanceof Ui)e={update:hA(n,t.key,t.data),updateMask:i5(t.fieldMask)};else{if(!(t instanceof ed))return ae();e={verify:od(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof Bo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jo)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ae()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:QG(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ae()}(n,t.precondition)),e}function db(n,t){let e=t.currentDocument?function(o){return o.updateTime!==void 0?Rt.updateTime(kt(o.updateTime)):o.exists!==void 0?Rt.exists(o.exists):Rt.none()}(t.currentDocument):Rt.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,a){let l=null;if("setToServerValue"in a)ue(a.setToServerValue==="REQUEST_TIME"),l=new Bo;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];l=new Gr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];l=new Hr(d)}else"increment"in a?l=new jo(s,a.increment):ae();let u=Ft.fromServerFormat(a.fieldPath);return new Ks(u,l)}(n,r)):[];if(t.update){t.update.name;let r=ur(n,t.update.name),o=new bn({mapValue:{fields:t.update.fields}});if(t.updateMask){let s=function(l){let u=l.fieldPaths||[];return new si(u.map(d=>Ft.fromServerFormat(d)))}(t.updateMask);return new Ui(r,o,s,e,i)}return new Uo(r,o,e,i)}if(t.delete){let r=ur(n,t.delete);return new $o(r,e)}if(t.verify){let r=ur(n,t.verify);return new ed(r,e)}return ae()}function ZG(n,t){return n&&n.length>0?(ue(t!==void 0),n.map(e=>function(r,o){let s=r.updateTime?kt(r.updateTime):kt(o);return s.isEqual(me.min())&&(s=kt(o)),new nb(s,r.transformResults||[])}(e,t))):[]}function FO(n,t){return{documents:[OO(n,t.path)]}}function kO(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=OO(n,r);let o=function(u){if(u.length!==0)return BO(tt.create(u,"and"))}(t.filters);o&&(e.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:wl(m.field),direction:e5(m.dir)}}(d))}(t.orderBy);s&&(e.structuredQuery.orderBy=s);let a=lb(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:e,parent:r}}function VO(n){let t=RO(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){ue(i===1);let d=e.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let o=[];e.where&&(o=function(f){let m=LO(f);return m instanceof tt&&FC(m)?m.getFilters():[m]}(e.where));let s=[];e.orderBy&&(s=function(f){return f.map(m=>function(D){return new qs(bl(D.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(e.orderBy));let a=null;e.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,_d(m)?null:m}(e.limit));let l=null;e.startAt&&(l=function(f){let m=!!f.before,y=f.values||[];return new fr(y,m)}(e.startAt));let u=null;return e.endAt&&(u=function(f){let m=!f.before,y=f.values||[];return new fr(y,m)}(e.endAt)),dO(t,r,s,o,a,"F",l,u)}function XG(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function LO(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=bl(e.unaryFilter.field);return Ve.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=bl(e.unaryFilter.field);return Ve.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=bl(e.unaryFilter.field);return Ve.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=bl(e.unaryFilter.field);return Ve.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(n):n.fieldFilter!==void 0?function(e){return Ve.create(bl(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return tt.create(e.compositeFilter.filters.map(i=>LO(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ae()}}(e.compositeFilter.op))}(n):ae()}function e5(n){return qG[n]}function t5(n){return WG[n]}function n5(n){return KG[n]}function wl(n){return{fieldPath:n.canonicalString()}}function bl(n){return Ft.fromServerFormat(n.fieldPath)}function BO(n){return n instanceof Ve?function(e){if(e.op==="=="){if(QM(e.value))return{unaryFilter:{field:wl(e.field),op:"IS_NAN"}};if(KM(e.value))return{unaryFilter:{field:wl(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(QM(e.value))return{unaryFilter:{field:wl(e.field),op:"IS_NOT_NAN"}};if(KM(e.value))return{unaryFilter:{field:wl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(e.field),op:t5(e.op),value:e.value}}}(n):n instanceof tt?function(e){let i=e.getFilters().map(r=>BO(r));return i.length===1?i[0]:{compositeFilter:{op:n5(e.op),filters:i}}}(n):ae()}function i5(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function jO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Nl=class n{constructor(t,e,i,r,o=me.min(),s=me.min(),a=Vt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var fm=class{constructor(t){this.ct=t}};function r5(n,t){let e;if(t.document)e=NO(n.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let i=ne.fromSegments(t.noDocument.path),r=Ys(t.noDocument.readTime);e=zt.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ae();{let i=ne.fromSegments(t.unknownDocument.path),r=Ys(t.unknownDocument.version);e=zt.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(r){let o=new It(r[0],r[1]);return me.fromTimestamp(o)}(t.readTime)),e}function fA(n,t){let e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:pm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(o,s){return{name:od(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Pl(o,s.version.toTimestamp()),createTime:Pl(o,s.createTime.toTimestamp())}}(n.ct,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Qs(t.version)};else{if(!t.isUnknownDocument())return ae();i.unknownDocument={path:e.path.toArray(),version:Qs(t.version)}}return i}function pm(n){let t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Qs(n){let t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ys(n){let t=new It(n.seconds,n.nanoseconds);return me.fromTimestamp(t)}function Bs(n,t){let e=(t.baseMutations||[]).map(o=>db(n.ct,o));for(let o=0;o<t.mutations.length-1;++o){let s=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){let a=t.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}let i=t.mutations.map(o=>db(n.ct,o)),r=It.fromMillis(t.localWriteTimeMs);return new td(t.batchId,r,e,i)}function $u(n){let t=Ys(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?Ys(n.lastLimboFreeSnapshotVersion):me.min(),i;return i=function(o){return o.documents!==void 0}(n.query)?function(o){return ue(o.documents.length===1),An(zl(RO(o.documents[0])))}(n.query):function(o){return An(VO(o))}(n.query),new Nl(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Vt.fromBase64String(n.resumeToken))}function UO(n,t){let e=Qs(t.snapshotVersion),i=Qs(t.lastLimboFreeSnapshotVersion),r;r=am(t.target)?FO(n.ct,t.target):kO(n.ct,t.target)._t;let o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ws(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function jC(n){let t=VO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cm(t,t.limit,"L"):t}function Iw(n,t){return new nd(t.largestBatchId,db(n.ct,t.overlayMutation))}function pA(n,t){let e=t.path.lastSegment();return[n,Mn(t.path.popLast()),e]}function mA(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:Qs(i.readTime),documentKey:Mn(i.documentKey.path),largestBatchId:i.largestBatchId}}var hb=class{getBundleMetadata(t,e){return gA(t).get(e).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:Ys(o.createTime),version:o.version}}(i)})}saveBundleMetadata(t,e){return gA(t).put(function(r){return{bundleId:r.id,createTime:Qs(kt(r.createTime)),version:r.version}}(e))}getNamedQuery(t,e){return _A(t).get(e).next(i=>{if(i)return function(o){return{name:o.name,query:jC(o.bundledQuery),readTime:Ys(o.readTime)}}(i)})}saveNamedQuery(t,e){return _A(t).put(function(r){return{name:r.name,readTime:Qs(kt(r.readTime)),bundledQuery:r.bundledQuery}}(e))}};function gA(n){return Kt(n,"bundles")}function _A(n){return Kt(n,"namedQueries")}var mm=class n{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){let i=e.uid||"";return new n(t,i)}getOverlay(t,e){return Vu(t).get(pA(this.userId,e)).next(i=>i?Iw(this.serializer,i):null)}getOverlays(t,e){let i=lr();return V.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){let r=[];return i.forEach((o,s)=>{let a=new nd(e,s);r.push(this.ht(t,a))}),V.waitFor(r)}removeOverlaysForBatchId(t,e,i){let r=new Set;e.forEach(s=>r.add(Mn(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Vu(t).j("collectionPathOverlayIndex",a))}),V.waitFor(o)}getOverlaysForCollection(t,e,i){let r=lr(),o=Mn(e),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Vu(t).U("collectionPathOverlayIndex",s).next(a=>{for(let l of a){let u=Iw(this.serializer,l);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(t,e,i,r){let o=lr(),s,a=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Vu(t).J({index:"collectionGroupOverlayIndex",range:a},(l,u,d)=>{let f=Iw(this.serializer,u);o.size()<r||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(t,e){return Vu(t).put(function(r,o,s){let[a,l,u]=pA(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:sd(r.ct,s.mutation)}}(this.serializer,this.userId,e))}};function Vu(n){return Kt(n,"documentOverlays")}var fb=class{Pt(t){return Kt(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(e=>{let i=e?.value;return i?Vt.fromUint8Array(i):Vt.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.Pt(t).put({name:"sessionToken",value:e.toUint8Array()})}};var jr=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(gt(t.integerValue));else if("doubleValue"in t){let i=gt(t.doubleValue);isNaN(i)?this.dt(e,13):(this.dt(e,15),Qu(i)?e.At(0):e.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(e,20),typeof i=="string"&&(i=$r(i)),e.Rt(`${i.seconds||""}`),e.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(ko(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.dt(e,45),e.At(i.latitude||0),e.At(i.longitude||0)}else"mapValue"in t?iO(t)?this.dt(e,Number.MAX_SAFE_INTEGER):Qm(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):ae()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){let i=t.fields||{};this.dt(e,55);for(let r of Object.keys(i))this.Vt(r,e),this.Tt(i[r],e)}wt(t,e){var i,r;let o=t.fields||{};this.dt(e,53);let s="value",a=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(e,15),e.At(gt(a)),this.Vt(s,e),this.Tt(o[s],e)}bt(t,e){let i=t.values||[];this.dt(e,50);for(let r of i)this.Tt(r,e)}yt(t,e){this.dt(e,37),ne.fromName(t).path.forEach(i=>{this.dt(e,60),this.Dt(i,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};jr.vt=new jr;function o5(n){if(n===0)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function yA(n){let t=64-function(i){let r=0;for(let o=0;o<8;++o){let s=o5(255&i[o]);if(r+=s,s!==8)break}return r}(n);return Math.ceil(t/8)}var pb=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){let e=t[Symbol.iterator](),i=e.next();for(;!i.done;)this.Ft(i.value),i=e.next();this.Mt()}xt(t){let e=t[Symbol.iterator](),i=e.next();for(;!i.done;)this.Ot(i.value),i=e.next();this.Nt()}Lt(t){for(let e of t){let i=e.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=e.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(t){for(let e of t){let i=e.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{let r=e.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(t){let e=this.qt(t),i=yA(e);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Kt(t){let e=this.qt(t),i=yA(e);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){let e=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(t),i=(128&e[0])!=0;e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ft(t){let e=255&t;e===0?(this.Ut(0),this.Ut(255)):e===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ot(t){let e=255&t;e===0?(this.Gt(0),this.Gt(255)):e===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){let e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},mb=class{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}},gb=class{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}},js=class{constructor(){this.jt=new pb,this.Ht=new mb(this.jt),this.Jt=new gb(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return t===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Us=class n{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Zt(){let t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new n(this.indexId,this.documentKey,this.arrayValue,i)}};function xo(n,t){let e=n.indexId-t.indexId;return e!==0?e:(e=vA(n.arrayValue,t.arrayValue),e!==0?e:(e=vA(n.directionalValue,t.directionalValue),e!==0?e:ne.comparator(n.documentKey,t.documentKey)))}function vA(n,t){for(let e=0;e<n.length&&e<t.length;++e){let i=n[e]-t[e];if(i!==0)return i}return n.length-t.length}var gm=class{constructor(t){this.Xt=new st((e,i)=>Ft.comparator(e.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(let e of t.filters){let i=e;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(t){if(ue(t.collectionGroup===this.collectionId),this.nn)return!1;let e=Vw(t);if(e!==void 0&&!this.sn(e))return!1;let i=Vs(t),r=new Set,o=0,s=0;for(;o<i.length&&this.sn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let l=i[o];if(!this.on(a,l)||!this._n(this.en[s++],l))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let t=new st(Ft.comparator),e=[];for(let i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new Dl(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new Dl(i.field,0))}for(let i of this.en)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new Dl(i.field,i.dir==="asc"?0:1)));return new xl(xl.UNKNOWN_ID,this.collectionId,e,Ku.empty())}sn(t){for(let e of this.tn)if(this.on(e,t))return!0;return!1}on(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;let i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}_n(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}};function $O(n){var t,e;if(ue(n instanceof Ve||n instanceof tt),n instanceof Ve){if(n instanceof sm){let r=((e=(t=n.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(o=>Ve.create(n.field,"==",o)))||[];return tt.create(r,"or")}return n}let i=n.filters.map(r=>$O(r));return tt.create(i,n.op)}function s5(n){if(n.getFilters().length===0)return[];let t=vb($O(n));return ue(GO(t)),_b(t)||yb(t)?[t]:t.getFilters()}function _b(n){return n instanceof Ve}function yb(n){return n instanceof tt&&FC(n)}function GO(n){return _b(n)||yb(n)||function(e){if(e instanceof tt&&zw(e)){for(let i of e.getFilters())if(!_b(i)&&!yb(i))return!1;return!0}return!1}(n)}function vb(n){if(ue(n instanceof Ve||n instanceof tt),n instanceof Ve)return n;if(n.filters.length===1)return vb(n.filters[0]);let t=n.filters.map(i=>vb(i)),e=tt.create(t,n.op);return e=_m(e),GO(e)?e:(ue(e instanceof tt),ue(Al(e)),ue(e.filters.length>1),e.filters.reduce((i,r)=>UC(i,r)))}function UC(n,t){let e;return ue(n instanceof Ve||n instanceof tt),ue(t instanceof Ve||t instanceof tt),e=n instanceof Ve?t instanceof Ve?function(r,o){return tt.create([r,o],"and")}(n,t):wA(n,t):t instanceof Ve?wA(t,n):function(r,o){if(ue(r.filters.length>0&&o.filters.length>0),Al(r)&&Al(o))return lO(r,o.getFilters());let s=zw(r)?r:o,a=zw(r)?o:r,l=s.filters.map(u=>UC(u,a));return tt.create(l,"or")}(n,t),_m(e)}function wA(n,t){if(Al(t))return lO(t,n.getFilters());{let e=t.filters.map(i=>UC(n,i));return tt.create(e,"or")}}function _m(n){if(ue(n instanceof Ve||n instanceof tt),n instanceof Ve)return n;let t=n.getFilters();if(t.length===1)return _m(t[0]);if(sO(n))return n;let e=t.map(r=>_m(r)),i=[];return e.forEach(r=>{r instanceof Ve?i.push(r):r instanceof tt&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:tt.create(i,n.op)}var wb=class{constructor(){this.un=new ad}addToCollectionParentIndex(t,e){return this.un.add(e),V.resolve()}getCollectionParents(t,e){return V.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return V.resolve()}deleteFieldIndex(t,e){return V.resolve()}deleteAllFieldIndexes(t){return V.resolve()}createTargetIndexes(t,e){return V.resolve()}getDocumentsMatchingTarget(t,e){return V.resolve(null)}getIndexType(t,e){return V.resolve(0)}getFieldIndexes(t,e){return V.resolve([])}getNextCollectionGroupToUpdate(t){return V.resolve(null)}getMinOffset(t,e){return V.resolve(wi.min())}getMinOffsetFromCollectionGroup(t,e){return V.resolve(wi.min())}updateCollectionGroup(t,e,i){return V.resolve()}updateIndexEntries(t,e){return V.resolve()}},ad=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new st(He.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new st(He.comparator)).toArray()}};var $p=new Uint8Array(0),bb=class{constructor(t,e){this.databaseId=e,this.cn=new ad,this.ln=new pr(i=>Ws(i),(i,r)=>yd(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.cn.has(e)){let i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.cn.add(e)});let o={collectionId:i,parent:Mn(r)};return bA(t).put(o)}return V.resolve()}getCollectionParents(t,e){let i=[],r=IDBKeyRange.bound([e,""],[zA(e),""],!1,!0);return bA(t).U(r).next(o=>{for(let s of o){if(s.collectionId!==e)break;i.push(ar(s.parent))}return i})}addFieldIndex(t,e){let i=Lu(t),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(e);delete r.indexId;let o=i.add(r);if(e.indexState){let s=gl(t);return o.next(a=>{s.put(mA(a,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return o.next()}deleteFieldIndex(t,e){let i=Lu(t),r=gl(t),o=ml(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let e=Lu(t),i=ml(t),r=gl(t);return e.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(t,e){return V.forEach(this.hn(e),i=>this.getIndexType(t,i).next(r=>{if(r===0||r===1){let o=new gm(i).an();if(o!=null)return this.addFieldIndex(t,o)}}))}getDocumentsMatchingTarget(t,e){let i=ml(t),r=!0,o=new Map;return V.forEach(this.hn(e),s=>this.Pn(t,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=Ie(),a=[];return V.forEach(o,(l,u)=>{W("IndexedDbIndexManager",`Using index ${function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(le=>`${le.fieldPath}:${le.kind}`).join(",")}`}(l)} to execute ${Ws(e)}`);let d=function(H,le){let ge=Vw(le);if(ge===void 0)return null;for(let pe of lm(H,ge.fieldPath))switch(pe.op){case"array-contains-any":return pe.value.arrayValue.values||[];case"array-contains":return[pe.value]}return null}(u,l),f=function(H,le){let ge=new Map;for(let pe of Vs(le))for(let M of lm(H,pe.fieldPath))switch(M.op){case"==":case"in":ge.set(pe.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return ge.set(pe.fieldPath.canonicalString(),M.value),Array.from(ge.values())}return null}(u,l),m=function(H,le){let ge=[],pe=!0;for(let M of Vs(le)){let C=M.kind===0?eA(H,M.fieldPath,H.startAt):tA(H,M.fieldPath,H.startAt);ge.push(C.value),pe&&(pe=C.inclusive)}return new fr(ge,pe)}(u,l),y=function(H,le){let ge=[],pe=!0;for(let M of Vs(le)){let C=M.kind===0?tA(H,M.fieldPath,H.endAt):eA(H,M.fieldPath,H.endAt);ge.push(C.value),pe&&(pe=C.inclusive)}return new fr(ge,pe)}(u,l),D=this.In(l,u,m),T=this.In(l,u,y),R=this.Tn(l,u,f),q=this.En(l.indexId,d,D,m.inclusive,T,y.inclusive,R);return V.forEach(q,ie=>i.G(ie,e.limit).next(H=>{H.forEach(le=>{let ge=ne.fromSegments(le.documentKey);s.has(ge)||(s=s.add(ge),a.push(ge))})}))}).next(()=>a)}return V.resolve(null)})}hn(t){let e=this.ln.get(t);return e||(t.filters.length===0?e=[t]:e=s5(tt.create(t.filters,"and")).map(i=>eb(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,e),e)}En(t,e,i,r,o,s,a){let l=(e!=null?e.length:1)*Math.max(i.length,o.length),u=l/(e!=null?e.length:1),d=[];for(let f=0;f<l;++f){let m=e?this.dn(e[f/u]):$p,y=this.An(t,m,i[f%u],r),D=this.Rn(t,m,o[f%u],s),T=a.map(R=>this.An(t,m,R,!0));d.push(...this.createRange(y,D,T))}return d}An(t,e,i,r){let o=new Us(t,ne.empty(),e,i);return r?o:o.Zt()}Rn(t,e,i,r){let o=new Us(t,ne.empty(),e,i);return r?o.Zt():o}Pn(t,e){let i=new gm(e),r=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(o=>{let s=null;for(let a of o)i.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(t,e){let i=2,r=this.hn(e);return V.forEach(r,o=>this.Pn(t,o).next(s=>{s?i!==0&&s.fields.length<function(l){let u=new st(Ft.comparator),d=!1;for(let f of l.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(let f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(e)&&r.length>1&&i===2?1:i)}Vn(t,e){let i=new js;for(let r of Vs(t)){let o=e.data.field(r.fieldPath);if(o==null)return null;let s=i.Yt(r.kind);jr.vt.It(o,s)}return i.zt()}dn(t){let e=new js;return jr.vt.It(t,e.Yt(0)),e.zt()}mn(t,e){let i=new js;return jr.vt.It(zs(this.databaseId,e),i.Yt(function(o){let s=Vs(o);return s.length===0?0:s[s.length-1].kind}(t))),i.zt()}Tn(t,e,i){if(i===null)return[];let r=[];r.push(new js);let o=0;for(let s of Vs(t)){let a=i[o++];for(let l of r)if(this.fn(e,s.fieldPath)&&Xu(a))r=this.gn(r,s,a);else{let u=l.Yt(s.kind);jr.vt.It(a,u)}}return this.pn(r)}In(t,e,i){return this.Tn(t,e,i.position)}pn(t){let e=[];for(let i=0;i<t.length;++i)e[i]=t[i].zt();return e}gn(t,e,i){let r=[...t],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let l=new js;l.seed(a.zt()),jr.vt.It(s,l.Yt(e.kind)),o.push(l)}return o}fn(t,e){return!!t.filters.find(i=>i instanceof Ve&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,e){let i=Lu(t),r=gl(t);return(e?i.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.U()).next(o=>{let s=[];return V.forEach(o,a=>r.get([a.indexId,this.uid]).next(l=>{s.push(function(d,f){let m=f?new Ku(f.sequenceNumber,new wi(Ys(f.readTime),new ne(ar(f.documentKey)),f.largestBatchId)):Ku.empty(),y=d.fields.map(([D,T])=>new Dl(Ft.fromServerFormat(D),T));return new xl(d.indexId,d.collectionGroup,y,m)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Se(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){let r=Lu(t),o=gl(t);return this.yn(t).next(s=>r.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>V.forEach(a,l=>o.put(mA(l.indexId,this.uid,s,i)))))}updateIndexEntries(t,e){let i=new Map;return V.forEach(e,(r,o)=>{let s=i.get(r.collectionGroup);return(s?V.resolve(s):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),V.forEach(a,l=>this.wn(t,r,l).next(u=>{let d=this.Sn(o,l);return u.isEqual(d)?V.resolve():this.bn(t,o,l,u,d)}))))})}Dn(t,e,i,r){return ml(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,e.key),documentKey:e.key.path.toArray()})}vn(t,e,i,r){return ml(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,e.key),e.key.path.toArray()])}wn(t,e,i){let r=ml(t),o=new st(xo);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,e)])},(s,a)=>{o=o.add(new Us(i.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(t,e){let i=new st(xo),r=this.Vn(e,t);if(r==null)return i;let o=Vw(e);if(o!=null){let s=t.data.field(o.fieldPath);if(Xu(s))for(let a of s.arrayValue.values||[])i=i.add(new Us(e.indexId,t.key,this.dn(a),r))}else i=i.add(new Us(e.indexId,t.key,$p,r));return i}bn(t,e,i,r,o){W("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);let s=[];return function(l,u,d,f,m){let y=l.getIterator(),D=u.getIterator(),T=pl(y),R=pl(D);for(;T||R;){let q=!1,ie=!1;if(T&&R){let H=d(T,R);H<0?ie=!0:H>0&&(q=!0)}else T!=null?ie=!0:q=!0;q?(f(R),R=pl(D)):ie?(m(T),T=pl(y)):(T=pl(y),R=pl(D))}}(r,o,xo,a=>{s.push(this.Dn(t,e,i,a))},a=>{s.push(this.vn(t,e,i,a))}),V.waitFor(s)}yn(t){let e=1;return gl(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((s,a)=>xo(s,a)).filter((s,a,l)=>!a||xo(s,l[a-1])!==0);let r=[];r.push(t);for(let s of i){let a=xo(s,t),l=xo(s,e);if(a===0)r[0]=t.Zt();else if(a>0&&l<0)r.push(s),r.push(s.Zt());else if(l>0)break}r.push(e);let o=[];for(let s=0;s<r.length;s+=2){if(this.Cn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,$p,[]],l=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,$p,[]];o.push(IDBKeyRange.bound(a,l))}return o}Cn(t,e){return xo(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(CA)}getMinOffset(t,e){return V.mapArray(this.hn(e),i=>this.Pn(t,i).next(r=>r||ae())).next(CA)}};function bA(n){return Kt(n,"collectionParents")}function ml(n){return Kt(n,"indexEntries")}function Lu(n){return Kt(n,"indexConfiguration")}function gl(n){return Kt(n,"indexState")}function CA(n){ue(n.length!==0);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){let r=n[i].indexState.offset;OC(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new wi(t.readTime,t.documentKey,e)}var EA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yi=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function HO(n,t,e){let i=n.store("mutations"),r=n.store("documentMutations"),o=[],s=IDBKeyRange.only(e.batchId),a=0,l=i.J({range:s},(d,f,m)=>(a++,m.delete()));o.push(l.next(()=>{ue(a===1)}));let u=[];for(let d of e.mutations){let f=JA(t,d.key.path,e.batchId);o.push(r.delete(f)),u.push(d.key)}return V.waitFor(o).next(()=>u)}function ym(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw ae();t=n.noDocument}return JSON.stringify(t).length}yi.DEFAULT_COLLECTION_PERCENTILE=10,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yi.DEFAULT=new yi(41943040,yi.DEFAULT_COLLECTION_PERCENTILE,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yi.DISABLED=new yi(-1,0,0);var vm=class n{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(t,e,i,r){ue(t.uid!=="");let o=t.isAuthenticated()?t.uid:"";return new n(o,e,i,r)}checkEmpty(t){let e=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mo(t).J({index:"userMutationsIndex",range:i},(r,o,s)=>{e=!1,s.done()}).next(()=>e)}addMutationBatch(t,e,i,r){let o=Cl(t),s=Mo(t);return s.add({}).next(a=>{ue(typeof a=="number");let l=new td(a,e,i,r),u=function(y,D,T){let R=T.baseMutations.map(ie=>sd(y.ct,ie)),q=T.mutations.map(ie=>sd(y.ct,ie));return{userId:D,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:R,mutations:q}}(this.serializer,this.userId,l),d=[],f=new st((m,y)=>Se(m.canonicalString(),y.canonicalString()));for(let m of r){let y=JA(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),d.push(s.put(u)),d.push(o.put(y,hG))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(t,e){return Mo(t).get(e).next(i=>i?(ue(i.userId===this.userId),Bs(this.serializer,i)):null)}Mn(t,e){return this.Fn[e]?V.resolve(this.Fn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){let r=i.keys();return this.Fn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Mo(t).J({index:"userMutationsIndex",range:r},(s,a,l)=>{a.userId===this.userId&&(ue(a.batchId>=i),o=Bs(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){let e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Mo(t).J({index:"userMutationsIndex",range:e,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(t){let e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mo(t).U("userMutationsIndex",e).next(i=>i.map(r=>Bs(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){let i=qp(this.userId,e.path),r=IDBKeyRange.lowerBound(i),o=[];return Cl(t).J({range:r},(s,a,l)=>{let[u,d,f]=s,m=ar(d);if(u===this.userId&&e.path.isEqual(m))return Mo(t).get(f).next(y=>{if(!y)throw ae();ue(y.userId===this.userId),o.push(Bs(this.serializer,y))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new st(Se),r=[];return e.forEach(o=>{let s=qp(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=Cl(t).J({range:a},(u,d,f)=>{let[m,y,D]=u,T=ar(y);m===this.userId&&o.path.isEqual(T)?i=i.add(D):f.done()});r.push(l)}),V.waitFor(r).next(()=>this.xn(t,i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,o=qp(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new st(Se);return Cl(t).J({range:s},(l,u,d)=>{let[f,m,y]=l,D=ar(m);f===this.userId&&i.isPrefixOf(D)?D.length===r&&(a=a.add(y)):d.done()}).next(()=>this.xn(t,a))}xn(t,e){let i=[],r=[];return e.forEach(o=>{r.push(Mo(t).get(o).next(s=>{if(s===null)throw ae();ue(s.userId===this.userId),i.push(Bs(this.serializer,s))}))}),V.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return HO(t._e,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.On(e.batchId)}),V.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return V.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return Cl(t).J({range:i},(o,s,a)=>{if(o[0]===this.userId){let l=ar(o[1]);r.push(l)}else a.done()}).next(()=>{ue(r.length===0)})})}containsKey(t,e){return zO(t,this.userId,e)}Nn(t){return qO(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function zO(n,t,e){let i=qp(t,e.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return Cl(n).J({range:o,H:!0},(a,l,u)=>{let[d,f,m]=a;d===t&&f===r&&(s=!0),u.done()}).next(()=>s)}function Mo(n){return Kt(n,"mutations")}function Cl(n){return Kt(n,"documentMutations")}function qO(n){return Kt(n,"mutationQueues")}var Fl=class n{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Cb=class{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.qn(t).next(e=>{let i=new Fl(e.highestTargetId);return e.highestTargetId=i.next(),this.Qn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(e=>me.fromTimestamp(new It(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.qn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Qn(t,r)))}addTargetData(t,e){return this.Kn(t,e).next(()=>this.qn(t).next(i=>(i.targetCount+=1,this.$n(e,i),this.Qn(t,i))))}updateTargetData(t,e){return this.Kn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>_l(t).delete(e.targetId)).next(()=>this.qn(t)).next(i=>(ue(i.targetCount>0),i.targetCount-=1,this.Qn(t,i)))}removeTargets(t,e,i){let r=0,o=[];return _l(t).J((s,a)=>{let l=$u(a);l.sequenceNumber<=e&&i.get(l.targetId)===null&&(r++,o.push(this.removeTargetData(t,l)))}).next(()=>V.waitFor(o)).next(()=>r)}forEachTarget(t,e){return _l(t).J((i,r)=>{let o=$u(r);e(o)})}qn(t){return DA(t).get("targetGlobalKey").next(e=>(ue(e!==null),e))}Qn(t,e){return DA(t).put("targetGlobalKey",e)}Kn(t,e){return _l(t).put(UO(this.serializer,e))}$n(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.qn(t).next(e=>e.targetCount)}getTargetData(t,e){let i=Ws(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return _l(t).J({range:r,index:"queryTargetsIndex"},(s,a,l)=>{let u=$u(a);yd(e,u.target)&&(o=u,l.done())}).next(()=>o)}addMatchingKeys(t,e,i){let r=[],o=Ao(t);return e.forEach(s=>{let a=Mn(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(t,i,s))}),V.waitFor(r)}removeMatchingKeys(t,e,i){let r=Ao(t);return V.forEach(e,o=>{let s=Mn(o.path);return V.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(t,i,o)])})}removeMatchingKeysForTargetId(t,e){let i=Ao(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){let i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ao(t),o=Ie();return r.J({range:i,H:!0},(s,a,l)=>{let u=ar(s[1]),d=new ne(u);o=o.add(d)}).next(()=>o)}containsKey(t,e){let i=Mn(e.path),r=IDBKeyRange.bound([i],[zA(i)],!1,!0),o=0;return Ao(t).J({index:"documentTargetsIndex",H:!0,range:r},([s,a],l,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(t,e){return _l(t).get(e).next(i=>i?$u(i):null)}};function _l(n){return Kt(n,"targets")}function DA(n){return Kt(n,"targetGlobal")}function Ao(n){return Kt(n,"targetDocuments")}function SA([n,t],[e,i]){let r=Se(n,e);return r===0?Se(t,i):r}var Eb=class{constructor(t){this.Un=t,this.buffer=new st(SA),this.Wn=0}Gn(){return++this.Wn}zn(t){let e=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(e);else{let i=this.buffer.last();SA(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}},Db=class{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(t){W("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>E(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(e){zo(e)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield Ho(e)}yield this.Hn(3e5)}))}},Sb=class{constructor(t,e){this.Jn=t,this.params=e}calculateTargetCount(t,e){return this.Jn.Yn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return V.resolve(oi.oe);let i=new Eb(e);return this.Jn.forEachTarget(t,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(t,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Jn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(EA)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),EA):this.Xn(t,e))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,e){let i,r,o,s,a,l,u,d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,s=Date.now(),this.nthSequenceNumber(t,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(t,i,e))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(f=>(u=Date.now(),yl()<=zi.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:f})))}};function a5(n,t){return new Sb(n,t)}var Ib=class{constructor(t,e){this.db=t,this.garbageCollector=a5(this,e)}Yn(t){let e=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}er(t){let e=0;return this.Zn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Zn(t,e){return this.tr(t,(i,r)=>e(r))}addReference(t,e,i){return Gp(t,i)}removeReference(t,e,i){return Gp(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return Gp(t,e)}nr(t,e){return function(r,o){let s=!1;return qO(r).Y(a=>zO(r,a,o).next(l=>(l&&(s=!0),V.resolve(!l)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.tr(t,(s,a)=>{if(a<=e){let l=this.nr(t,s).next(u=>{if(!u)return o++,i.getEntry(t,s).next(()=>(i.removeEntry(s,me.min()),Ao(t).delete(function(f){return[0,Mn(f.path)]}(s))))});r.push(l)}}).next(()=>V.waitFor(r)).next(()=>i.apply(t)).next(()=>o)}removeTarget(t,e){let i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return Gp(t,e)}tr(t,e){let i=Ao(t),r,o=oi.oe;return i.J({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:u})=>{s===0?(o!==oi.oe&&e(new ne(ar(r)),o),o=u,r=l):o=oi.oe}).next(()=>{o!==oi.oe&&e(new ne(ar(r)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}};function Gp(n,t){return Ao(n).put(function(i,r){return{targetId:0,path:Mn(i.path),sequenceNumber:r}}(t,n.currentSequenceNumber))}var wm=class{constructor(){this.changes=new pr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,zt.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?V.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Tb=class{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return ks(t).put(i)}removeEntry(t,e,i){return ks(t).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],pm(s),a[a.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.rr(t,i)))}getEntry(t,e){let i=zt.newInvalidDocument(e);return ks(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bu(e))},(r,o)=>{i=this.ir(e,o)}).next(()=>i)}sr(t,e){let i={size:0,document:zt.newInvalidDocument(e)};return ks(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bu(e))},(r,o)=>{i={document:this.ir(e,o),size:ym(o)}}).next(()=>i)}getEntries(t,e){let i=zn();return this._r(t,e,(r,o)=>{let s=this.ir(r,o);i=i.insert(r,s)}).next(()=>i)}ar(t,e){let i=zn(),r=new ht(ne.comparator);return this._r(t,e,(o,s)=>{let a=this.ir(o,s);i=i.insert(o,a),r=r.insert(o,ym(s))}).next(()=>({documents:i,ur:r}))}_r(t,e,i){if(e.isEmpty())return V.resolve();let r=new st(xA);e.forEach(l=>r=r.add(l));let o=IDBKeyRange.bound(Bu(r.first()),Bu(r.last())),s=r.getIterator(),a=s.getNext();return ks(t).J({index:"documentKeyIndex",range:o},(l,u,d)=>{let f=ne.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&xA(a,f)<0;)i(a,null),a=s.getNext();a&&a.isEqual(f)&&(i(a,u),a=s.hasNext()?s.getNext():null),a?d.$(Bu(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(t,e,i,r,o){let s=e.path,a=[s.popLast().toArray(),s.lastSegment(),pm(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ks(t).U(IDBKeyRange.bound(a,l,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let d=zn();for(let f of u){let m=this.ir(ne.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(wd(e,m)||r.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(t,e,i,r){let o=zn(),s=TA(e,i),a=TA(e,wi.max());return ks(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,u,d)=>{let f=this.ir(ne.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(f.key,f),o.size===r&&d.done()}).next(()=>o)}newChangeBuffer(t){return new xb(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return IA(t).get("remoteDocumentGlobalKey").next(e=>(ue(!!e),e))}rr(t,e){return IA(t).put("remoteDocumentGlobalKey",e)}ir(t,e){if(e){let i=r5(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(me.min())))return i}return zt.newInvalidDocument(t)}};function WO(n){return new Tb(n)}var xb=class extends wm{constructor(t,e){super(),this.cr=t,this.trackRemovals=e,this.lr=new pr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){let e=[],i=0,r=new st((o,s)=>Se(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(e.push(this.cr.removeEntry(t,o,a.readTime)),s.isValidDocument()){let l=fA(this.cr.serializer,s);r=r.add(o.path.popLast());let u=ym(l);i+=u-a.size,e.push(this.cr.addEntry(t,o,l))}else if(i-=a.size,this.trackRemovals){let l=fA(this.cr.serializer,s.convertToNoDocument(me.min()));e.push(this.cr.addEntry(t,o,l))}}),r.forEach(o=>{e.push(this.cr.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.cr.updateMetadata(t,i)),V.waitFor(e)}getFromCache(t,e){return this.cr.sr(t,e).next(i=>(this.lr.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.cr.ar(t,e).next(({documents:i,ur:r})=>(r.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function IA(n){return Kt(n,"remoteDocumentGlobal")}function ks(n){return Kt(n,"remoteDocumentsV14")}function Bu(n){let t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function TA(n,t){let e=t.documentKey.path.toArray();return[n,pm(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function xA(n,t){let e=n.path.toArray(),i=t.path.toArray(),r=0;for(let o=0;o<e.length-2&&o<i.length-2;++o)if(r=Se(e[o],i[o]),r)return r;return r=Se(e.length,i.length),r||(r=Se(e[e.length-2],i[i.length-2]),r||Se(e[e.length-1],i[i.length-1]))}var Mb=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var bm=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&zu(i.mutation,r,si.empty(),It.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Ie()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Ie()){let r=lr();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let s=Uu();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(t,e){let i=lr();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Ie()))}populateOverlays(t,e,i){let r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((s,a)=>{e.set(s,a)})})}computeViews(t,e,i,r){let o=zn(),s=Hu(),a=function(){return Hu()}();return e.forEach((l,u)=>{let d=i.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof Ui)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),zu(d.mutation,u,d.mutation.getFieldMask(),It.now())):s.set(u.key,si.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((u,d)=>s.set(u,d)),e.forEach((u,d)=>{var f;return a.set(u,new Mb(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,e){let i=Hu(),r=new ht((s,a)=>s-a),o=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=e.get(l);if(u===null)return;let d=i.get(l)||si.empty();d=a.applyToLocalView(u,d),i.set(l,d);let f=(r.get(a.batchId)||Ie()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,d=l.value,f=_O();d.forEach(m=>{if(!o.has(m)){let y=DO(e.get(m),i.get(m));y!==null&&f.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(t,u,f))}return V.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(s){return ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):kC(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):V.resolve(lr()),a=-1,l=o;return s.next(u=>V.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?V.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(t,u,o)).next(()=>this.computeViews(t,l,u,Ie())).next(d=>({batchId:a,changes:gO(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ne(e)).next(i=>{let r=Uu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let o=e.collectionGroup,s=Uu();return this.indexManager.getCollectionParents(t,o).next(a=>V.forEach(a,l=>{let u=function(f,m){return new ji(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(e,l.child(o));return this.getDocumentsMatchingCollectionQuery(t,u,i,r).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(s=>{o.forEach((l,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,zt.newInvalidDocument(d)))});let a=Uu();return s.forEach((l,u)=>{let d=o.get(l);d!==void 0&&zu(d.mutation,u,si.empty(),It.now()),wd(e,u)&&(a=a.insert(l,u))}),a})}};var Ab=class{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return V.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:kt(r.createTime)}}(e)),V.resolve()}getNamedQuery(t,e){return V.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(r){return{name:r.name,query:jC(r.bundledQuery),readTime:kt(r.readTime)}}(e)),V.resolve()}};var Ob=class{constructor(){this.overlays=new ht(ne.comparator),this.Ir=new Map}getOverlay(t,e){return V.resolve(this.overlays.get(e))}getOverlays(t,e){let i=lr();return V.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.ht(t,e,o)}),V.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),V.resolve()}getOverlaysForCollection(t,e,i){let r=lr(),o=e.length+1,s=new ne(e.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return V.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new ht((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===e&&u.largestBatchId>i){let d=o.get(u.largestBatchId);d===null&&(d=lr(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=lr(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=r)););return V.resolve(a)}ht(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new nd(e,i));let o=this.Ir.get(e);o===void 0&&(o=Ie(),this.Ir.set(e,o)),this.Ir.set(e,o.add(i.key))}};var Rb=class{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(t){return V.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,V.resolve()}};var ld=class{constructor(){this.Tr=new st($t.Er),this.dr=new st($t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){let i=new $t(t,e);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Vr(new $t(t,e))}mr(t,e){t.forEach(i=>this.removeReference(i,e))}gr(t){let e=new ne(new He([])),i=new $t(e,t),r=new $t(e,t+1),o=[];return this.dr.forEachInRange([i,r],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){let e=new ne(new He([])),i=new $t(e,t),r=new $t(e,t+1),o=Ie();return this.dr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(t){let e=new $t(t,0),i=this.Tr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},$t=class{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return ne.comparator(t.key,e.key)||Se(t.wr,e.wr)}static Ar(t,e){return Se(t.wr,e.wr)||ne.comparator(t.key,e.key)}};var Pb=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new st($t.Er)}checkEmpty(t){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new td(o,e,i,r);this.mutationQueue.push(s);for(let a of r)this.br=this.br.add(new $t(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(t,e){return V.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.vr(i),o=r<0?0:r;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new $t(e,0),r=new $t(e,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],s=>{let a=this.Dr(s.wr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new st(Se);return e.forEach(r=>{let o=new $t(r,0),s=new $t(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{i=i.add(a.wr)})}),V.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,o=i;ne.isDocumentKey(o)||(o=o.child(""));let s=new $t(new ne(o),0),a=new st(Se);return this.br.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},s),V.resolve(this.Cr(a))}Cr(t){let e=[];return t.forEach(i=>{let r=this.Dr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){ue(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return V.forEach(e.mutations,r=>{let o=new $t(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,e){let i=new $t(e,0),r=this.br.firstAfterOrEqual(i);return V.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,V.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){let e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var Nb=class{constructor(t){this.Mr=t,this.docs=function(){return new ht(ne.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),o=r?r.size:0,s=this.Mr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return V.resolve(i?i.document.mutableCopy():zt.newInvalidDocument(e))}getEntries(t,e){let i=zn();return e.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():zt.newInvalidDocument(r))}),V.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=zn(),s=e.path,a=new ne(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:d}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||OC(WA(d),i)<=0||(r.has(d.key)||wd(e,d))&&(o=o.insert(d.key,d.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(t,e,i,r){ae()}Or(t,e){return V.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new Fb(this)}getSize(t){return V.resolve(this.size)}},Fb=class extends wm{constructor(t){super(),this.cr=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(i)}),V.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}};var kb=class{constructor(t){this.persistence=t,this.Nr=new pr(e=>Ws(e),yd),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ld,this.targetCount=0,this.kr=Fl.Bn()}forEachTarget(t,e){return this.Nr.forEach((i,r)=>e(r)),V.resolve()}getLastRemoteSnapshotVersion(t){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return V.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Lr&&(this.Lr=e),V.resolve()}Kn(t){this.Nr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.kr=new Fl(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,V.resolve()}updateTargetData(t,e){return this.Kn(e),V.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,V.resolve()}removeTargets(t,e,i){let r=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),V.waitFor(o).next(()=>r)}getTargetCount(t){return V.resolve(this.targetCount)}getTargetData(t,e){let i=this.Nr.get(e)||null;return V.resolve(i)}addMatchingKeys(t,e,i){return this.Br.Rr(e,i),V.resolve()}removeMatchingKeys(t,e,i){this.Br.mr(e,i);let r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(s=>{o.push(r.markPotentiallyOrphaned(t,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),V.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Br.yr(e);return V.resolve(i)}containsKey(t,e){return V.resolve(this.Br.containsKey(e))}};var Cm=class{constructor(t,e){this.qr={},this.overlays={},this.Qr=new oi(0),this.Kr=!1,this.Kr=!0,this.$r=new Rb,this.referenceDelegate=t(this),this.Ur=new kb(this),this.indexManager=new wb,this.remoteDocumentCache=function(r){return new Nb(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new fm(e),this.Gr=new Ab(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Ob,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.qr[t.toKey()];return i||(i=new Pb(e,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,i){W("MemoryPersistence","Starting transaction:",t);let r=new Vb(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(t,e){return V.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,e)))}},Vb=class extends tm{constructor(t){super(),this.currentSequenceNumber=t}},Em=class n{constructor(t){this.persistence=t,this.Jr=new ld,this.Yr=null}static Zr(t){return new n(t)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(t,e,i){return this.Jr.addReference(i,e),this.Xr.delete(i.toString()),V.resolve()}removeReference(t,e,i){return this.Jr.removeReference(i,e),this.Xr.add(i.toString()),V.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),V.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,i=>{let r=ne.fromPath(i);return this.ei(t,r).next(o=>{o||e.removeEntry(r,me.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(i=>{i?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return V.or([()=>V.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}};var Lb=class{constructor(t){this.serializer=t}O(t,e,i,r){let o=new nm("createOrUpgrade",e);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(t),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HM,{unique:!0}),l.createObjectStore("documentMutations")}(t),MA(t),function(l){l.createObjectStore("remoteDocuments")}(t));let s=V.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(t),MA(t)),s=s.next(()=>function(l){let u=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:me.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(l,u){return u.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HM,{unique:!0});let f=u.store("mutations"),m=d.map(y=>f.put(y));return V.waitFor(m)})}(t,o))),s=s.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),i<5&&r>=5&&(s=s.next(()=>this.ni(o))),i<6&&r>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(t),this.ri(o)))),i<7&&r>=7&&(s=s.next(()=>this.ii(o))),i<8&&r>=8&&(s=s.next(()=>this.si(t,o))),i<9&&r>=9&&(s=s.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&r>=10&&(s=s.next(()=>this.oi(o))),i<11&&r>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(s=s.next(()=>{(function(l){let u=l.createObjectStore("documentOverlays",{keyPath:DG});u.createIndex("collectionPathOverlayIndex",SG,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",IG,{unique:!1})})(t)})),i<13&&r>=13&&(s=s.next(()=>function(l){let u=l.createObjectStore("remoteDocumentsV14",{keyPath:fG});u.createIndex("documentKeyIndex",pG),u.createIndex("collectionGroupIndex",mG)}(t)).next(()=>this._i(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ai(t,o))),i<15&&r>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:wG}).createIndex("sequenceNumberIndex",bG,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:CG}).createIndex("documentKeyIndex",EG,{unique:!1})}(t))),i<16&&r>=16&&(s=s.next(()=>{e.objectStore("indexState").clear()}).next(()=>{e.objectStore("indexEntries").clear()})),i<17&&r>=17&&(s=s.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(t)})),s}ri(t){let e=0;return t.store("remoteDocuments").J((i,r)=>{e+=ym(r)}).next(()=>{let i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(t){let e=t.store("mutationQueues"),i=t.store("mutations");return e.U().next(r=>V.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",s).next(a=>V.forEach(a,l=>{ue(l.userId===o.userId);let u=Bs(this.serializer,l);return HO(t,o.userId,u).next(()=>{})}))}))}ii(t){let e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((s,a)=>{let l=new He(s),u=function(f){return[0,Mn(f)]}(l);o.push(e.get(u).next(d=>d?V.resolve():(f=>e.put({targetId:0,path:Mn(f),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(o))})}si(t,e){t.createObjectStore("collectionParents",{keyPath:vG});let i=e.store("collectionParents"),r=new ad,o=s=>{if(r.add(s)){let a=s.lastSegment(),l=s.popLast();return i.put({collectionId:a,parent:Mn(l)})}};return e.store("remoteDocuments").J({H:!0},(s,a)=>{let l=new He(s);return o(l.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([s,a,l],u)=>{let d=ar(a);return o(d.popLast())}))}oi(t){let e=t.store("targets");return e.J((i,r)=>{let o=$u(r),s=UO(this.serializer,o);return e.put(s)})}_i(t,e){let i=e.store("remoteDocuments"),r=[];return i.J((o,s)=>{let a=e.store("remoteDocumentsV14"),l=function(f){return f.document?new ne(He.fromString(f.document.name).popFirst(5)):f.noDocument?ne.fromSegments(f.noDocument.path):f.unknownDocument?ne.fromSegments(f.unknownDocument.path):ae()}(s).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(u))}).next(()=>V.waitFor(r))}ai(t,e){let i=e.store("mutations"),r=WO(this.serializer),o=new Cm(Em.Zr,this.serializer.ct);return i.U().next(s=>{let a=new Map;return s.forEach(l=>{var u;let d=(u=a.get(l.userId))!==null&&u!==void 0?u:Ie();Bs(this.serializer,l).keys().forEach(f=>d=d.add(f)),a.set(l.userId,d)}),V.forEach(a,(l,u)=>{let d=new Gt(u),f=mm.lt(this.serializer,d),m=o.getIndexManager(d),y=vm.lt(d,this.serializer,m,o.referenceDelegate);return new bm(r,y,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Yu(e,oi.oe),l).next()})})}};function MA(n){n.createObjectStore("targetDocuments",{keyPath:_G}).createIndex("documentTargetsIndex",yG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gG,{unique:!0}),n.createObjectStore("targetGlobal")}var Tw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Bb=class n{constructor(t,e,i,r,o,s,a,l,u,d,f=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ui=o,this.window=s,this.document=a,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new z(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ib(this,r),this.Ai=e+"main",this.serializer=new fm(l),this.Ri=new Fo(this.Ai,this.hi,new Lb(this.serializer)),this.$r=new fb,this.Ur=new Cb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=WO(this.serializer),this.Gr=new hb,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Nt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new z(L.FAILED_PRECONDITION,Tw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new oi(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){return this.di=e=>E(this,null,function*(){if(this.started)return t(e)}),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(e=>E(this,null,function*(){e.newVersion===null&&(yield t())}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget(()=>E(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Hp(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(e=>this.isPrimary&&!e?this.bi(t).next(()=>!1):!!e&&this.Di(t).next(()=>!0))).catch(t=>{if(zo(t))return W("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return ju(t).get("owner").next(e=>V.resolve(this.vi(e)))}Ci(t){return Hp(t).delete(this.clientId)}Fi(){return E(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let t=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let i=Kt(e,"clientMetadata");return i.U().next(r=>{let o=this.xi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return V.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let e of t)this.Vi.removeItem(this.Oi(e.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?V.resolve(!0):ju(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)){if(this.vi(e)&&this.networkEnabled)return!0;if(!this.vi(e)){if(!e.allowTabSynchronization)throw new z(L.FAILED_PRECONDITION,Tw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hp(t).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&W("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){return E(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{let e=new Yu(t,oi.oe);return this.bi(e).next(()=>this.Ci(e))}),this.Ri.close(),this.qi()})}xi(t,e){return t.filter(i=>this.Mi(i.updateTimeMs,e)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>Hp(t).U().next(e=>this.xi(e,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,e){return vm.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new bb(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return mm.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,e,i){W("IndexedDbPersistence","Starting transaction:",t);let r=e==="readonly"?"readonly":"readwrite",o=function(l){return l===17?MG:l===16?xG:l===15?PC:l===14?eO:l===13?XA:l===12?TG:l===11?ZA:void ae()}(this.hi),s;return this.Ri.runTransaction(t,r,o,a=>(s=new Yu(a,this.Qr?this.Qr.next():oi.oe),e==="readwrite-primary"?this.wi(s).next(l=>!!l||this.Si(s)).next(l=>{if(!l)throw Nt(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new z(L.FAILED_PRECONDITION,KA);return i(s)}).next(l=>this.Di(s).next(()=>l)):this.Ki(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(t){return ju(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new z(L.FAILED_PRECONDITION,Tw)})}Di(t){let e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ju(t).put("owner",e)}static D(){return Fo.D()}bi(t){let e=ju(t);return e.get("owner").next(i=>this.vi(i)?(W("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):V.resolve())}Mi(t,e){let i=Date.now();return!(t<i-e)&&(!(t>i)||(Nt(`Detected an update time that is in the future: ${t} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let e=/(?:Version|Mobile)\/1[456]/;n_()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var e;try{let i=((e=this.Vi)===null||e===void 0?void 0:e.getItem(this.Oi(t)))!==null;return W("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Nt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){Nt("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}};function ju(n){return Kt(n,"owner")}function Hp(n){return Kt(n,"clientMetadata")}function $C(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}var jb=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.$i=i,this.Ui=r}static Wi(t,e){let i=Ie(),r=Ie();for(let o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(t,e.fromCache,i,r)}};var Ub=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Dm=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return n_()?8:QA(Mc())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,i,r){let o={result:null};return this.Yi(t,e).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(t,e,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Ub;return this.Xi(t,e,s).next(a=>{if(o.result=a,this.zi)return this.es(t,e,s,a.size)})}).next(()=>o.result)}es(t,e,i,r){return i.documentReadCount<this.ji?(yl()<=zi.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",vl(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(yl()<=zi.DEBUG&&W("QueryEngine","Query:",vl(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(yl()<=zi.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",vl(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,An(e))):V.resolve())}Yi(t,e){if(nA(e))return V.resolve(null);let i=An(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=cm(e,null,"F"),i=An(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{let s=Ie(...o);return this.Ji.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{let u=this.ts(e,a);return this.ns(e,u,s,l.readTime)?this.Yi(t,cm(e,null,"F")):this.rs(t,u,e,l)}))})))}Zi(t,e,i,r){return nA(e)||r.isEqual(me.min())?V.resolve(null):this.Ji.getDocuments(t,i).next(o=>{let s=this.ts(e,o);return this.ns(e,s,i,r)?V.resolve(null):(yl()<=zi.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vl(e)),this.rs(t,s,e,qA(r,-1)).next(a=>a))})}ts(t,e){let i=new st(pO(t));return e.forEach((r,o)=>{wd(t,o)&&(i=i.add(o))}),i}ns(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(t,e,i){return yl()<=zi.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",vl(e)),this.Ji.getDocumentsMatchingQuery(t,e,wi.min(),i)}rs(t,e,i,r){return this.Ji.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(s=>{o=o.insert(s.key,s)}),o))}};var $b=class{constructor(t,e,i,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new ht(Se),this._s=new pr(o=>Ws(o),yd),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new bm(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}};function KO(n,t,e,i){return new $b(n,t,e,i)}function QO(n,t){return E(this,null,function*(){let e=te(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.ls(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],l=Ie();for(let u of r){s.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}return e.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function l5(n,t){let e=te(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),o=e.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){let f=u.batch,m=f.keys(),y=V.resolve();return m.forEach(D=>{y=y.next(()=>d.getEntry(l,D)).next(T=>{let R=u.docVersions.get(D);ue(R!==null),T.version.compareTo(R)<0&&(f.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),d.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Ie();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function YO(n){let t=te(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function c5(n,t){let e=te(n),i=t.snapshotVersion,r=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=e.cs.newChangeBuffer({trackRemovals:!0});r=e.os;let a=[];t.targetChanges.forEach((d,f)=>{let m=r.get(f);if(!m)return;a.push(e.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>e.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=m.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(f)!==null?y=y.withResumeToken(Vt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,i)),r=r.insert(f,y),function(T,R,q){return T.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(m,y,d)&&a.push(e.Ur.updateTargetData(o,y))});let l=zn(),u=Ie();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(JO(o,s,t.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!i.isEqual(me.min())){let d=e.Ur.getLastRemoteSnapshotVersion(o).next(f=>e.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(d)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(e.os=r,o))}function JO(n,t,e){let i=Ie(),r=Ie();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let s=zn();return e.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(t.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),s=s.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:r}})}function u5(n,t){let e=te(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function kl(n,t){let e=te(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Ur.getTargetData(i,t).next(o=>o?(r=o,V.resolve(r)):e.Ur.allocateTargetId(i).next(s=>(r=new Nl(t,s,"TargetPurposeListen",i.currentSequenceNumber),e.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.os=e.os.insert(i.targetId,i),e._s.set(t,i.targetId)),i})}function Vl(n,t,e){return E(this,null,function*(){let i=te(n),r=i.os.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!zo(s))throw s;W("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}i.os=i.os.remove(t),i._s.delete(r.target)})}function Sm(n,t,e){let i=te(n),r=me.min(),o=Ie();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,d){let f=te(l),m=f._s.get(d);return m!==void 0?V.resolve(f.os.get(m)):f.Ur.getTargetData(u,d)}(i,s,An(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>i.ss.getDocumentsMatchingQuery(s,t,e?r:me.min(),e?o:Ie())).next(a=>(eR(i,fO(t),a),{documents:a,Ts:o})))}function ZO(n,t){let e=te(n),i=te(e.Ur),r=e.os.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,t).next(s=>s?s.target:null))}function XO(n,t){let e=te(n),i=e.us.get(t)||me.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.cs.getAllFromCollectionGroup(r,t,qA(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(eR(e,t,r),r))}function eR(n,t,e){let i=n.us.get(t)||me.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.us.set(t,i)}function d5(n,t,e,i){return E(this,null,function*(){let r=te(n),o=Ie(),s=zn();for(let u of e){let d=t.Es(u.metadata.name);u.document&&(o=o.add(d));let f=t.ds(u);f.setReadTime(t.As(u.metadata.readTime)),s=s.insert(d,f)}let a=r.cs.newChangeBuffer({trackRemovals:!0}),l=yield kl(r,function(d){return An(zl(He.fromString(`__bundle__/docs/${d}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>JO(u,a,s).next(d=>(a.apply(u),d)).next(d=>r.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>r.Ur.addMatchingKeys(u,o,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is)).next(()=>d.Ps)))})}function h5(i,r){return E(this,arguments,function*(n,t,e=Ie()){let o=yield kl(n,An(jC(t.bundledQuery))),s=te(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let l=kt(t.readTime);if(o.snapshotVersion.compareTo(l)>=0)return s.Gr.saveNamedQuery(a,t);let u=o.withResumeToken(Vt.EMPTY_BYTE_STRING,l);return s.os=s.os.insert(u.targetId,u),s.Ur.updateTargetData(a,u).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,e,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,t))})})}function AA(n,t){return`firestore_clients_${n}_${t}`}function OA(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function xw(n,t){return`firestore_targets_${n}_${t}`}var Im=class n{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Rs(t,e,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new z(r.error.code,r.error.message))),s?new n(t,e,r.state,o):(Nt("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}Vs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},qu=class n{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Rs(t,e){let i=JSON.parse(e),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new z(i.error.code,i.error.message))),o?new n(t,i.state,r):(Nt("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Vs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},Tm=class n{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Rs(t,e){let i=JSON.parse(e),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=VC();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=YA(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new n(t,o):(Nt("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}},Gb=class n{constructor(t,e){this.clientId=t,this.onlineState=e}static Rs(t){let e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new n(e.clientId,e.onlineState):(Nt("SharedClientState",`Failed to parse online state: ${t}`),null)}},cd=class{constructor(){this.activeTargetIds=VC()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},Wu=class{constructor(t,e,i,r,o){this.window=t,this.ui=e,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ht(Se),this.started=!1,this.bs=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=AA(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new cd),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){return E(this,null,function*(){let t=yield this.syncEngine.Qi();for(let i of t){if(i===this.ps)continue;let r=this.getItem(AA(this.persistenceKey,i));if(r){let o=Tm.Rs(i,r);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let e=this.storage.getItem(this.xs);if(e){let i=this.Ls(e);i&&this.Bs(i)}for(let i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let e=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,e,i){this.qs(t,e,i),this.Qs(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){let i=this.storage.getItem(xw(this.persistenceKey,t));if(i){let r=qu.Rs(t,i);r&&(e=r.state)}}return this.Ks.fs(t),this.Ns(),e}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(xw(this.persistenceKey,t))}updateQueryState(t,e,i){this.$s(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Qs(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){let e=this.storage.getItem(t);return W("SharedClientState","READ",t,e),e}setItem(t,e){W("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){W("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){let e=t;if(e.storageArea===this.storage){if(W("SharedClientState","EVENT",e.key,e.newValue),e.key===this.Ds)return void Nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>E(this,null,function*(){if(this.started){if(e.key!==null){if(this.Cs.test(e.key)){if(e.newValue==null){let i=this.Gs(e.key);return this.zs(i,null)}{let i=this.js(e.key,e.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(e.key)){if(e.newValue!==null){let i=this.Hs(e.key,e.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(e.key)){if(e.newValue!==null){let i=this.Ys(e.key,e.newValue);if(i)return this.Zs(i)}}else if(e.key===this.xs){if(e.newValue!==null){let i=this.Ls(e.newValue);if(i)return this.Bs(i)}}else if(e.key===this.vs){let i=function(o){let s=oi.oe;if(o!=null)try{let a=JSON.parse(o);ue(typeof a=="number"),s=a}catch(a){Nt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(e.newValue);i!==oi.oe&&this.sequenceNumberHandler(i)}else if(e.key===this.Os){let i=this.Xs(e.newValue);yield Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(e)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,e,i){let r=new Im(this.currentUser,t,e,i),o=OA(this.persistenceKey,this.currentUser,t);this.setItem(o,r.Vs())}Qs(t){let e=OA(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Us(t){let e={clientId:this.ps,onlineState:t};this.storage.setItem(this.xs,JSON.stringify(e))}$s(t,e,i){let r=xw(this.persistenceKey,t),o=new qu(t,e,i);this.setItem(r,o.Vs())}Ws(t){let e=JSON.stringify(Array.from(t));this.setItem(this.Os,e)}Gs(t){let e=this.Cs.exec(t);return e?e[1]:null}js(t,e){let i=this.Gs(t);return Tm.Rs(i,e)}Hs(t,e){let i=this.Fs.exec(t),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Im.Rs(new Gt(o),r,e)}Ys(t,e){let i=this.Ms.exec(t),r=Number(i[1]);return qu.Rs(r,e)}Ls(t){return Gb.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){return E(this,null,function*(){if(t.user.uid===this.currentUser.uid)return this.syncEngine.no(t.batchId,t.state,t.error);W("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,e){let i=e?this.Ss.insert(t,e):this.Ss.remove(t),r=this.ks(this.Ss),o=this.ks(i),s=[],a=[];return o.forEach(l=>{r.has(l)||s.push(l)}),r.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.io(s,a).then(()=>{this.Ss=i})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let e=VC();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}},xm=class{constructor(){this.so=new cd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,i){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new cd,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var Hb=class{_o(t){}shutdown(){}};var Mm=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.ho)t(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var zp=null;function Mw(){return zp===null?zp=function(){return 268435456+Math.round(2147483648*Math.random())}():zp++,"0x"+zp.toString(16)}var f5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var zb=class{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}};var wn="WebChannelConnection",qb=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+e.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(e,i,r,o,s){let a=Mw(),l=this.xo(e,i.toUriEncodedString());W("RestConnection",`Sending RPC '${e}' ${a}:`,l,r);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(e,l,u,r).then(d=>(W("RestConnection",`Received RPC '${e}' ${a}: `,d),d),d=>{throw vi("RestConnection",`RPC '${e}' ${a} failed with error: `,d,"url: ",l,"request:",r),d})}Lo(e,i,r,o,s,a){return this.Mo(e,i,r,o,s)}Oo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>e[s]=o),r&&r.headers.forEach((o,s)=>e[s]=o)}xo(e,i){let r=f5[e];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,i,r){let o=Mw();return new Promise((s,a)=>{let l=new ww;l.setWithCredentials(!0),l.listenOnce(Cw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ku.NO_ERROR:let d=l.getResponseJson();W(wn,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),s(d);break;case ku.TIMEOUT:W(wn,`RPC '${t}' ${o} timed out`),a(new z(L.DEADLINE_EXCEEDED,"Request time out"));break;case ku.HTTP_ERROR:let f=l.getStatus();if(W(wn,`RPC '${t}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let D=function(R){let q=R.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(q)>=0?q:L.UNKNOWN}(y.status);a(new z(D,y.message))}else a(new z(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new z(L.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{W(wn,`RPC '${t}' ${o} completed.`)}});let u=JSON.stringify(r);W(wn,`RPC '${t}' ${o} sending request:`,r),l.send(e,"POST",u,i,15)})}Bo(t,e,i){let r=Mw(),o=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Sw(),a=Dw(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new bw({})),this.Oo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;let d=o.join("");W(wn,`Creating RPC '${t}' stream ${r}: ${d}`,l);let f=s.createWebChannel(d,l),m=!1,y=!1,D=new zb({Io:R=>{y?W(wn,`Not sending because RPC '${t}' stream ${r} is closed:`,R):(m||(W(wn,`Opening RPC '${t}' stream ${r} transport.`),f.open(),m=!0),W(wn,`RPC '${t}' stream ${r} sending:`,R),f.send(R))},To:()=>f.close()}),T=(R,q,ie)=>{R.listen(q,H=>{try{ie(H)}catch(le){setTimeout(()=>{throw le},0)}})};return T(f,fl.EventType.OPEN,()=>{y||(W(wn,`RPC '${t}' stream ${r} transport opened.`),D.yo())}),T(f,fl.EventType.CLOSE,()=>{y||(y=!0,W(wn,`RPC '${t}' stream ${r} transport closed`),D.So())}),T(f,fl.EventType.ERROR,R=>{y||(y=!0,vi(wn,`RPC '${t}' stream ${r} transport errored:`,R),D.So(new z(L.UNAVAILABLE,"The operation could not be completed")))}),T(f,fl.EventType.MESSAGE,R=>{var q;if(!y){let ie=R.data[0];ue(!!ie);let H=ie,le=H.error||((q=H[0])===null||q===void 0?void 0:q.error);if(le){W(wn,`RPC '${t}' stream ${r} received error:`,le);let ge=le.status,pe=function(I){let A=Ut[I];if(A!==void 0)return TO(A)}(ge),M=le.message;pe===void 0&&(pe=L.INTERNAL,M="Unknown error status: "+ge+" with message "+le.message),y=!0,D.So(new z(pe,M)),f.close()}else W(wn,`RPC '${t}' stream ${r} received:`,ie),D.bo(ie)}}),T(a,Ew.STAT_EVENT,R=>{R.stat===Up.PROXY?W(wn,`RPC '${t}' stream ${r} detected buffering proxy`):R.stat===Up.NOPROXY&&W(wn,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function tR(){return typeof window<"u"?window:null}function Yp(){return typeof document<"u"?document:null}function bd(n){return new ab(n,!0)}var ud=class{constructor(t,e,i=1e3,r=1.5,o=6e4){this.ui=t,this.timerId=e,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();let e=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Am=class{constructor(t,e,i,r,o,s,a,l){this.ui=t,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ud(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return E(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){return E(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,e){return E(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===L.RESOURCE_EXHAUSTED?(Nt(e.toString()),Nt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.mo(e)})}l_(){}auth(){this.state=1;let t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===e&&this.P_(i,r)},i=>{t(()=>{let r=new z(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(t,e){let i=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>E(this,null,function*(){this.state=0,this.start()}))}I_(t){return W("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Wb=class extends Am{constructor(t,e,i,r,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();let e=JG(this.serializer,t),i=function(o){if(!("targetChange"in o))return me.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?me.min():s.readTime?kt(s.readTime):me.min()}(t);return this.listener.d_(e,i)}A_(t){let e={};e.database=ub(this.serializer),e.addTarget=function(o,s){let a,l=s.target;if(a=am(l)?{documents:FO(o,l)}:{query:kO(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=MO(o,s.resumeToken);let u=lb(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(me.min())>0){a.readTime=Pl(o,s.snapshotVersion.toTimestamp());let u=lb(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);let i=XG(this.serializer,t);i&&(e.labels=i),this.a_(e)}R_(t){let e={};e.database=ub(this.serializer),e.removeTarget=t,this.a_(e)}},Kb=class extends Am{constructor(t,e,i,r,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return ue(!!t.streamToken),this.lastStreamToken=t.streamToken,ue(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){ue(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();let e=ZG(t.writeResults,t.commitTime),i=kt(t.commitTime);return this.listener.g_(i,e)}p_(){let t={};t.database=ub(this.serializer),this.a_(t)}m_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>sd(this.serializer,i))};this.a_(e)}};var Qb=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(t,cb(e,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(L.UNKNOWN,o.toString())})}Lo(t,e,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(t,cb(e,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(L.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Yb=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Nt(e),this.D_=!1):W("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Jb=class{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{i.enqueueAndForget(()=>E(this,null,function*(){qo(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(l){return E(this,null,function*(){let u=te(l);u.L_.add(4),yield ql(u),u.q_.set("Unknown"),u.L_.delete(4),yield Cd(u)})}(this))}))}),this.q_=new Yb(i,r)}};function Cd(n){return E(this,null,function*(){if(qo(n))for(let t of n.B_)yield t(!0)})}function ql(n){return E(this,null,function*(){for(let t of n.B_)yield t(!1)})}function Ym(n,t){let e=te(n);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),zC(e)?HC(e):Kl(e).r_()&&GC(e,t))}function Ll(n,t){let e=te(n),i=Kl(e);e.N_.delete(t),i.r_()&&nR(e,t),e.N_.size===0&&(i.r_()?i.o_():qo(e)&&e.q_.set("Unknown"))}function GC(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(me.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Kl(n).A_(t)}function nR(n,t){n.Q_.xe(t),Kl(n).R_(t)}function HC(n){n.Q_=new sb({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Kl(n).start(),n.q_.v_()}function zC(n){return qo(n)&&!Kl(n).n_()&&n.N_.size>0}function qo(n){return te(n).L_.size===0}function iR(n){n.Q_=void 0}function p5(n){return E(this,null,function*(){n.q_.set("Online")})}function m5(n){return E(this,null,function*(){n.N_.forEach((t,e)=>{GC(n,t)})})}function g5(n,t){return E(this,null,function*(){iR(n),zC(n)?(n.q_.M_(t),HC(n)):n.q_.set("Unknown")})}function _5(n,t,e){return E(this,null,function*(){if(n.q_.set("Online"),t instanceof dm&&t.state===2&&t.cause)try{yield function(r,o){return E(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.N_.delete(a),r.Q_.removeTarget(a))})}(n,t)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Om(n,i)}else if(t instanceof Il?n.Q_.Ke(t):t instanceof um?n.Q_.He(t):n.Q_.We(t),!e.isEqual(me.min()))try{let i=yield YO(n.localStore);e.compareTo(i)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let d=o.N_.get(u);d&&o.N_.set(u,d.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let d=o.N_.get(l);if(!d)return;o.N_.set(l,d.withResumeToken(Vt.EMPTY_BYTE_STRING,d.snapshotVersion)),nR(o,l);let f=new Nl(d.target,l,u,d.sequenceNumber);GC(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){W("RemoteStore","Failed to raise snapshot:",i),yield Om(n,i)}})}function Om(n,t,e){return E(this,null,function*(){if(!zo(t))throw t;n.L_.add(1),yield ql(n),n.q_.set("Offline"),e||(e=()=>YO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield e(),n.L_.delete(1),yield Cd(n)}))})}function rR(n,t){return t().catch(e=>Om(n,e,t))}function Wl(n){return E(this,null,function*(){let t=te(n),e=Go(t),i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;y5(t);)try{let r=yield u5(t.localStore,i);if(r===null){t.O_.length===0&&e.o_();break}i=r.batchId,v5(t,r)}catch(r){yield Om(t,r)}oR(t)&&sR(t)})}function y5(n){return qo(n)&&n.O_.length<10}function v5(n,t){n.O_.push(t);let e=Go(n);e.r_()&&e.V_&&e.m_(t.mutations)}function oR(n){return qo(n)&&!Go(n).n_()&&n.O_.length>0}function sR(n){Go(n).start()}function w5(n){return E(this,null,function*(){Go(n).p_()})}function b5(n){return E(this,null,function*(){let t=Go(n);for(let e of n.O_)t.m_(e.mutations)})}function C5(n,t,e){return E(this,null,function*(){let i=n.O_.shift(),r=ib.from(i,t,e);yield rR(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Wl(n)})}function E5(n,t){return E(this,null,function*(){t&&Go(n).V_&&(yield function(i,r){return E(this,null,function*(){if(function(s){return IO(s)&&s!==L.ABORTED}(r.code)){let o=i.O_.shift();Go(i).s_(),yield rR(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Wl(i)}})}(n,t)),oR(n)&&sR(n)})}function RA(n,t){return E(this,null,function*(){let e=te(n);e.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let i=qo(e);e.L_.add(3),yield ql(e),i&&e.q_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),yield Cd(e)})}function Zb(n,t){return E(this,null,function*(){let e=te(n);t?(e.L_.delete(2),yield Cd(e)):t||(e.L_.add(2),yield ql(e),e.q_.set("Unknown"))})}function Kl(n){return n.K_||(n.K_=function(e,i,r){let o=te(e);return o.w_(),new Wb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:p5.bind(null,n),Ro:m5.bind(null,n),mo:g5.bind(null,n),d_:_5.bind(null,n)}),n.B_.push(t=>E(this,null,function*(){t?(n.K_.s_(),zC(n)?HC(n):n.q_.set("Unknown")):(yield n.K_.stop(),iR(n))}))),n.K_}function Go(n){return n.U_||(n.U_=function(e,i,r){let o=te(e);return o.w_(),new Kb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:w5.bind(null,n),mo:E5.bind(null,n),f_:b5.bind(null,n),g_:C5.bind(null,n)}),n.B_.push(t=>E(this,null,function*(){t?(n.U_.s_(),yield Wl(n)):(yield n.U_.stop(),n.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Xb=class n{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){let s=Date.now()+i,a=new n(t,e,s,r,o);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ql(n,t){if(Nt("AsyncQueue",`${t}: ${n}`),zo(n))return new z(L.UNAVAILABLE,`${t}: ${n}`);throw n}var Rm=class n{constructor(t){this.comparator=t?(e,i)=>t(e,i)||ne.comparator(e.key,i.key):(e,i)=>ne.comparator(e.key,i.key),this.keyedMap=Uu(),this.sortedSet=new ht(this.comparator)}static emptySet(t){return new n(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var Pm=class{constructor(){this.W_=new ht(ne.comparator)}track(t){let e=t.doc.key,i=this.W_.get(e);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(e,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(e):t.type===1&&i.type===2?this.W_=this.W_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):ae():this.W_=this.W_.insert(e,t)}G_(){let t=[];return this.W_.inorderTraversal((e,i)=>{t.push(i)}),t}},Bl=class n{constructor(t,e,i,r,o,s,a,l,u){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,e,i,r,o){let s=[];return e.forEach(a=>{s.push({type:0,doc:a})}),new n(t,e,Rm.emptySet(e),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&vd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var eC=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}},tC=class{constructor(){this.queries=PA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,i){let r=te(e),o=r.queries;r.queries=PA(),o.forEach((s,a)=>{for(let l of a.j_)l.onError(i)})})(this,new z(L.ABORTED,"Firestore shutting down"))}};function PA(){return new pr(n=>hO(n),vd)}function qC(n,t){return E(this,null,function*(){let e=te(n),i=3,r=t.query,o=e.queries.get(r);o?!o.H_()&&t.J_()&&(i=2):(o=new eC,i=t.J_()?0:1);try{switch(i){case 0:o.z_=yield e.onListen(r,!0);break;case 1:o.z_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(s){let a=Ql(s,`Initialization of query '${vl(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,o),o.j_.push(t),t.Z_(e.onlineState),o.z_&&t.X_(o.z_)&&KC(e)})}function WC(n,t){return E(this,null,function*(){let e=te(n),i=t.query,r=3,o=e.queries.get(i);if(o){let s=o.j_.indexOf(t);s>=0&&(o.j_.splice(s,1),o.j_.length===0?r=t.J_()?0:1:!o.H_()&&t.J_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function D5(n,t){let e=te(n),i=!1;for(let r of t){let o=r.query,s=e.queries.get(o);if(s){for(let a of s.j_)a.X_(r)&&(i=!0);s.z_=r}}i&&KC(e)}function S5(n,t,e){let i=te(n),r=i.queries.get(t);if(r)for(let o of r.j_)o.onError(e);i.queries.delete(t)}function KC(n){n.Y_.forEach(t=>{t.next()})}var nC,NA;(NA=nC||(nC={})).ea="default",NA.Cache="cache";var dd=class{constructor(t,e,i){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new Bl(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;let i=e!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;let e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=Bl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==nC.Cache}};var iC=class{constructor(t,e){this.aa=t,this.byteLength=e}ua(){return"metadata"in this.aa}};var Nm=class{constructor(t){this.serializer=t}Es(t){return ur(this.serializer,t)}ds(t){return t.metadata.exists?NO(this.serializer,t.document,!1):zt.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return kt(t)}},rC=class{constructor(t,e,i){this.ca=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=aR(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++e;let i=He.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ha(t){let e=new Map,i=new Nm(this.serializer);for(let r of t)if(r.metadata.queries){let o=i.Es(r.metadata.name);for(let s of r.metadata.queries){let a=(e.get(s)||Ie()).add(o);e.set(s,a)}}return e}complete(){return E(this,null,function*(){let t=yield d5(this.localStore,new Nm(this.serializer),this.documents,this.ca.id),e=this.ha(this.documents);for(let i of this.queries)yield h5(this.localStore,i,e.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:t}})}};function aR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Fm=class{constructor(t){this.key=t}},km=class{constructor(t){this.key=t}},Vm=class{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=pO(t),this.Ra=new Rm(this.Aa)}get Va(){return this.Ta}ma(t,e){let i=e?e.fa:new Pm,r=e?e.Ra:this.Ra,o=e?e.mutatedKeys:this.mutatedKeys,s=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,f)=>{let m=r.get(d),y=wd(this.query,f)?f:null,D=!!m&&this.mutatedKeys.has(m.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?D!==T&&(i.track({type:3,doc:y}),R=!0):this.ga(m,y)||(i.track({type:2,doc:y}),R=!0,(l&&this.Aa(y,l)>0||u&&this.Aa(y,u)<0)&&(a=!0)):!m&&y?(i.track({type:0,doc:y}),R=!0):m&&!y&&(i.track({type:1,doc:m}),R=!0,(l||u)&&(a=!0)),R&&(y?(s=s.add(y),o=T?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),i.track({type:1,doc:d})}return{Ra:s,fa:i,ns:a,mutatedKeys:o}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let o=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;let s=t.fa.G_();s.sort((d,f)=>function(y,D){let T=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return T(y)-T(D)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(i),r=r!=null&&r;let a=e&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new Bl(this.query,t.Ra,o,s,t.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Pm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];let t=this.da;this.da=Ie(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let e=[];return t.forEach(i=>{this.da.has(i)||e.push(new km(i))}),this.da.forEach(i=>{t.has(i)||e.push(new Fm(i))}),e}ba(t){this.Ta=t.Ts,this.da=Ie();let e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return Bl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},oC=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},sC=class{constructor(t){this.key=t,this.va=!1}},aC=class{constructor(t,e,i,r,o,s){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new pr(a=>hO(a),vd),this.Ma=new Map,this.xa=new Set,this.Oa=new ht(ne.comparator),this.Na=new Map,this.La=new ld,this.Ba={},this.ka=new Map,this.qa=Fl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function I5(n,t,e=!0){return E(this,null,function*(){let i=Jm(n),r,o=i.Fa.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield lR(i,t,e,!0),r})}function T5(n,t){return E(this,null,function*(){let e=Jm(n);yield lR(e,t,!0,!1)})}function lR(n,t,e,i){return E(this,null,function*(){let r=yield kl(n.localStore,An(t)),o=r.targetId,s=e?n.sharedClientState.addLocalQueryTarget(o):"not-current",a;return i&&(a=yield QC(n,t,o,s==="current",r.resumeToken)),n.isPrimaryClient&&e&&Ym(n.remoteStore,r),a})}function QC(n,t,e,i,r){return E(this,null,function*(){n.Ka=(f,m,y)=>function(T,R,q,ie){return E(this,null,function*(){let H=R.view.ma(q);H.ns&&(H=yield Sm(T.localStore,R.query,!1).then(({documents:M})=>R.view.ma(M,H)));let le=ie&&ie.targetChanges.get(R.targetId),ge=ie&&ie.targetMismatches.get(R.targetId)!=null,pe=R.view.applyChanges(H,T.isPrimaryClient,le,ge);return lC(T,R.targetId,pe.wa),pe.snapshot})}(n,f,m,y);let o=yield Sm(n.localStore,t,!0),s=new Vm(t,o.Ts),a=s.ma(o.documents),l=rd.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),u=s.applyChanges(a,n.isPrimaryClient,l);lC(n,e,u.wa);let d=new oC(t,e,s);return n.Fa.set(t,d),n.Ma.has(e)?n.Ma.get(e).push(t):n.Ma.set(e,[t]),u.snapshot})}function x5(n,t,e){return E(this,null,function*(){let i=te(n),r=i.Fa.get(t),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(s=>!vd(s,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Vl(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Ll(i.remoteStore,r.targetId),jl(i,r.targetId)}).catch(Ho))):(jl(i,r.targetId),yield Vl(i.localStore,r.targetId,!0))})}function M5(n,t){return E(this,null,function*(){let e=te(n),i=e.Fa.get(t),r=e.Ma.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Ll(e.remoteStore,i.targetId))})}function A5(n,t,e){return E(this,null,function*(){let i=XC(n);try{let r=yield function(s,a){let l=te(s),u=It.now(),d=a.reduce((y,D)=>y.add(D.key),Ie()),f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=zn(),T=Ie();return l.cs.getEntries(y,d).next(R=>{D=R,D.forEach((q,ie)=>{ie.isValidDocument()||(T=T.add(q))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,D)).next(R=>{f=R;let q=[];for(let ie of a){let H=HG(ie,f.get(ie.key).overlayedDocument);H!=null&&q.push(new Ui(ie.key,H,oO(H.value.mapValue),Rt.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,q,a)}).next(R=>{m=R;let q=R.applyToLocalDocumentSet(f,T);return l.documentOverlayCache.saveOverlays(y,R.batchId,q)})}).then(()=>({batchId:m.batchId,changes:gO(f)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new ht(Se)),u=u.insert(a,l),s.Ba[s.currentUser.toKey()]=u}(i,r.batchId,e),yield Wr(i,r.changes),yield Wl(i.remoteStore)}catch(r){let o=Ql(r,"Failed to persist write");e.reject(o)}})}function cR(n,t){return E(this,null,function*(){let e=te(n);try{let i=yield c5(e.localStore,t);t.targetChanges.forEach((r,o)=>{let s=e.Na.get(o);s&&(ue(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.va=!0:r.modifiedDocuments.size>0?ue(s.va):r.removedDocuments.size>0&&(ue(s.va),s.va=!1))}),yield Wr(e,i,t)}catch(i){yield Ho(i)}})}function FA(n,t,e){let i=te(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.Fa.forEach((o,s)=>{let a=s.view.Z_(t);a.snapshot&&r.push(a.snapshot)}),function(s,a){let l=te(s);l.onlineState=a;let u=!1;l.queries.forEach((d,f)=>{for(let m of f.j_)m.Z_(a)&&(u=!0)}),u&&KC(l)}(i.eventManager,t),r.length&&i.Ca.d_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function O5(n,t,e){return E(this,null,function*(){let i=te(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Na.get(t),o=r&&r.key;if(o){let s=new ht(ne.comparator);s=s.insert(o,zt.newNoDocument(o,me.min()));let a=Ie().add(o),l=new id(me.min(),new Map,new ht(Se),s,a);yield cR(i,l),i.Oa=i.Oa.remove(o),i.Na.delete(t),ZC(i)}else yield Vl(i.localStore,t,!1).then(()=>jl(i,t,e)).catch(Ho)})}function R5(n,t){return E(this,null,function*(){let e=te(n),i=t.batch.batchId;try{let r=yield l5(e.localStore,t);JC(e,i,null),YC(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Wr(e,r)}catch(r){yield Ho(r)}})}function P5(n,t,e){return E(this,null,function*(){let i=te(n);try{let r=yield function(s,a){let l=te(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(ue(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(i.localStore,t);JC(i,t,e),YC(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Wr(i,r)}catch(r){yield Ho(r)}})}function N5(n,t){return E(this,null,function*(){let e=te(n);qo(e.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=te(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(e.localStore);if(i===-1)return void t.resolve();let r=e.ka.get(i)||[];r.push(t),e.ka.set(i,r)}catch(i){let r=Ql(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})}function YC(n,t){(n.ka.get(t)||[]).forEach(e=>{e.resolve()}),n.ka.delete(t)}function JC(n,t,e){let i=te(n),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Ba[i.currentUser.toKey()]=r}}function jl(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Ma.get(t))n.Fa.delete(i),e&&n.Ca.$a(i,e);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach(i=>{n.La.containsKey(i)||uR(n,i)})}function uR(n,t){n.xa.delete(t.path.canonicalString());let e=n.Oa.get(t);e!==null&&(Ll(n.remoteStore,e),n.Oa=n.Oa.remove(t),n.Na.delete(e),ZC(n))}function lC(n,t,e){for(let i of e)i instanceof Fm?(n.La.addReference(i.key,t),F5(n,i)):i instanceof km?(W("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,t),n.La.containsKey(i.key)||uR(n,i.key)):ae()}function F5(n,t){let e=t.key,i=e.path.canonicalString();n.Oa.get(e)||n.xa.has(i)||(W("SyncEngine","New document in limbo: "+e),n.xa.add(i),ZC(n))}function ZC(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let t=n.xa.values().next().value;n.xa.delete(t);let e=new ne(He.fromString(t)),i=n.qa.next();n.Na.set(i,new sC(e)),n.Oa=n.Oa.insert(e,i),Ym(n.remoteStore,new Nl(An(zl(e.path)),i,"TargetPurposeLimboResolution",oi.oe))}}function Wr(n,t,e){return E(this,null,function*(){let i=te(n),r=[],o=[],s=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{s.push(i.Ka(l,t,e).then(u=>{var d;if((u||e)&&i.isPrimaryClient){let f=u?!u.fromCache:(d=e?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){r.push(u);let f=jb.Wi(l.targetId,u);o.push(f)}}))}),yield Promise.all(s),i.Ca.d_(r),yield function(l,u){return E(this,null,function*(){let d=te(l);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(u,m=>V.forEach(m.$i,y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>V.forEach(m.Ui,y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!zo(f))throw f;W("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let y=d.os.get(m),D=y.snapshotVersion,T=y.withLastLimboFreeSnapshotVersion(D);d.os=d.os.insert(m,T)}}})}(i.localStore,o))})}function k5(n,t){return E(this,null,function*(){let e=te(n);if(!e.currentUser.isEqual(t)){W("SyncEngine","User change. New user:",t.toKey());let i=yield QO(e.localStore,t);e.currentUser=t,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new z(L.CANCELLED,s))})}),o.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Wr(e,i.hs)}})}function V5(n,t){let e=te(n),i=e.Na.get(t);if(i&&i.va)return Ie().add(i.key);{let r=Ie(),o=e.Ma.get(t);if(!o)return r;for(let s of o){let a=e.Fa.get(s);r=r.unionWith(a.view.Va)}return r}}function L5(n,t){return E(this,null,function*(){let e=te(n),i=yield Sm(e.localStore,t.query,!0),r=t.view.ba(i);return e.isPrimaryClient&&lC(e,t.targetId,r.wa),r})}function B5(n,t){return E(this,null,function*(){let e=te(n);return XO(e.localStore,t).then(i=>Wr(e,i))})}function j5(n,t,e,i){return E(this,null,function*(){let r=te(n),o=yield function(a,l){let u=te(a),d=te(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,l).next(m=>m?u.localDocuments.getDocuments(f,m):V.resolve(null)))}(r.localStore,t);o!==null?(e==="pending"?yield Wl(r.remoteStore):e==="acknowledged"||e==="rejected"?(JC(r,t,i||null),YC(r,t),function(a,l){te(te(a).mutationQueue).On(l)}(r.localStore,t)):ae(),yield Wr(r,o)):W("SyncEngine","Cannot apply mutation batch with id: "+t)})}function U5(n,t){return E(this,null,function*(){let e=te(n);if(Jm(e),XC(e),t===!0&&e.Qa!==!0){let i=e.sharedClientState.getAllActiveQueryTargets(),r=yield kA(e,i.toArray());e.Qa=!0,yield Zb(e.remoteStore,!0);for(let o of r)Ym(e.remoteStore,o)}else if(t===!1&&e.Qa!==!1){let i=[],r=Promise.resolve();e.Ma.forEach((o,s)=>{e.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(jl(e,s),Vl(e.localStore,s,!0))),Ll(e.remoteStore,s)}),yield r,yield kA(e,i),function(s){let a=te(s);a.Na.forEach((l,u)=>{Ll(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new ht(ne.comparator)}(e),e.Qa=!1,yield Zb(e.remoteStore,!1)}})}function kA(n,t,e){return E(this,null,function*(){let i=te(n),r=[],o=[];for(let s of t){let a,l=i.Ma.get(s);if(l&&l.length!==0){a=yield kl(i.localStore,An(l[0]));for(let u of l){let d=i.Fa.get(u),f=yield L5(i,d);f.snapshot&&o.push(f.snapshot)}}else{let u=yield ZO(i.localStore,s);a=yield kl(i.localStore,u),yield QC(i,dR(u),s,!1,a.resumeToken)}r.push(a)}return i.Ca.d_(o),r})}function dR(n){return dO(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $5(n){return function(e){return te(te(e).persistence).Qi()}(te(n).localStore)}function G5(n,t,e,i){return E(this,null,function*(){let r=te(n);if(r.Qa)return void W("SyncEngine","Ignoring unexpected query state notification.");let o=r.Ma.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{let s=yield XO(r.localStore,fO(o[0])),a=id.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Vt.EMPTY_BYTE_STRING);yield Wr(r,s,a);break}case"rejected":yield Vl(r.localStore,t,!0),jl(r,t,i);break;default:ae()}})}function H5(n,t,e){return E(this,null,function*(){let i=Jm(n);if(i.Qa){for(let r of t){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){W("SyncEngine","Adding an already active target "+r);continue}let o=yield ZO(i.localStore,r),s=yield kl(i.localStore,o);yield QC(i,dR(o),s.targetId,!1,s.resumeToken),Ym(i.remoteStore,s)}for(let r of e)i.Ma.has(r)&&(yield Vl(i.localStore,r,!1).then(()=>{Ll(i.remoteStore,r),jl(i,r)}).catch(Ho))}})}function Jm(n){let t=te(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=cR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=V5.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=O5.bind(null,t),t.Ca.d_=D5.bind(null,t.eventManager),t.Ca.$a=S5.bind(null,t.eventManager),t}function XC(n){let t=te(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=R5.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=P5.bind(null,t),t}function z5(n,t,e){let i=te(n);(function(o,s,a){return E(this,null,function*(){try{let l=yield s.getMetadata();if(yield function(y,D){let T=te(y),R=kt(D.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",q=>T.Gr.getBundleMetadata(q,D.id)).then(q=>!!q&&q.createTime.compareTo(R)>=0)}(o.localStore,l))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(aR(l));let u=new rC(l,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let m=yield u.la(d);m&&a._updateProgress(m),d=yield s.Ua()}let f=yield u.complete();return yield Wr(o,f.Ia,void 0),yield function(y,D){let T=te(y);return T.persistence.runTransaction("Save bundle","readwrite",R=>T.Gr.saveBundleMetadata(R,D))}(o.localStore,l),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(l){return vi("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var hd=class{constructor(){this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=bd(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return KO(this.persistence,new Dm,t.initialUser,this.serializer)}createPersistence(t){return new Cm(Em.Zr,this.serializer)}createSharedClientState(t){return new xm}terminate(){return E(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Lm=class n extends hd{constructor(t,e,i){super(),this.Wa=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){yield e_(n.prototype,this,"initialize").call(this,t),yield this.Wa.initialize(this,t),yield XC(this.Wa.syncEngine),yield Wl(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(t){return KO(this.persistence,new Dm,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){let i=this.persistence.referenceDelegate.garbageCollector;return new Db(i,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){let i=new Uw(e,this.persistence);return new jw(t.asyncQueue,i)}createPersistence(t){let e=$C(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?yi.withCacheSize(this.cacheSizeBytes):yi.DEFAULT;return new Bb(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,tR(),Yp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new xm}},cC=class n extends Lm{constructor(t,e){super(t,e,!1),this.Wa=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){return E(this,null,function*(){yield e_(n.prototype,this,"initialize").call(this,t);let e=this.Wa.syncEngine;this.sharedClientState instanceof Wu&&(this.sharedClientState.syncEngine={no:j5.bind(null,e),ro:G5.bind(null,e),io:H5.bind(null,e),Qi:$5.bind(null,e),eo:B5.bind(null,e)},yield this.sharedClientState.start()),yield this.persistence.yi(i=>E(this,null,function*(){yield U5(this.Wa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(t){let e=tR();if(!Wu.D(e))throw new z(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=$C(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Wu(e,t.asyncQueue,i,t.clientId,t.initialUser)}},fd=class{initialize(t,e){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>FA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=k5.bind(null,this.syncEngine),yield Zb(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new tC}()}createDatastore(t){let e=bd(t.databaseInfo.databaseId),i=function(o){return new qb(o)}(t.databaseInfo);return function(o,s,a,l){return new Qb(o,s,a,l)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,o,s,a){return new Jb(i,r,o,s,a)}(this.localStore,this.datastore,t.asyncQueue,e=>FA(this.syncEngine,e,0),function(){return Mm.D()?new Mm:new Hb}())}createSyncEngine(t,e){return function(r,o,s,a,l,u,d){let f=new aC(r,o,s,a,l,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return E(this,null,function*(){var t,e;yield function(r){return E(this,null,function*(){let o=te(r);W("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield ql(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()})}};function VA(n,t=10240){let e=0;return{read(){return E(this,null,function*(){if(e<n.byteLength){let r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})},cancel(){return E(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ul=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):Nt("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var uC=class{constructor(t,e){this.ja=t,this.serializer=e,this.metadata=new Ht,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.ja.cancel()}getMetadata(){return E(this,null,function*(){return this.metadata.promise})}Ua(){return E(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return E(this,null,function*(){let t=yield this.Ya();if(t===null)return null;let e=this.Ha.decode(t),i=Number(e);isNaN(i)&&this.Za(`length string (${e}) is not valid number`);let r=yield this.Xa(i);return new iC(JSON.parse(r),t.length+i)})}eu(){return this.buffer.findIndex(t=>t===123)}Ya(){return E(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let t=this.eu();t<0&&this.Za("Reached the end of bundle when a length string is expected.");let e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e})}Xa(t){return E(this,null,function*(){for(;this.buffer.length<t;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let e=this.Ha.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e})}Za(t){throw this.ja.cancel(),new Error(`Invalid bundle format: ${t}`)}tu(){return E(this,null,function*(){let t=yield this.ja.read();if(!t.done){let e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done})}};var dC=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let e=yield function(r,o){return E(this,null,function*(){let s=te(r),a={documents:o.map(f=>od(s.serializer,f))},l=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,He.emptyPath(),a,o.length),u=new Map;l.forEach(f=>{let m=YG(s.serializer,f);u.set(m.key.toString(),m)});let d=[];return o.forEach(f=>{let m=u.get(f.toString());ue(!!m),d.push(m)}),d})}(this.datastore,t);return e.forEach(i=>this.recordVersion(i)),e})}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new $o(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,i)=>{let r=ne.fromPath(i);this.mutations.push(new ed(r,this.precondition(r)))}),yield function(i,r){return E(this,null,function*(){let o=te(i),s={writes:r.map(a=>sd(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,He.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ae();e=me.min()}let i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new z(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){let e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(me.min())?Rt.exists(!1):Rt.updateTime(e):Rt.none()}preconditionForUpdate(t){let e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(me.min()))throw new z(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rt.updateTime(e)}return Rt.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var hC=class{constructor(t,e,i,r,o){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=o,this.nu=i.maxAttempts,this.t_=new ud(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>E(this,null,function*(){let t=new dC(this.datastore),e=this.su(t);e&&e.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ou(r)}))}).catch(i=>{this.ou(i)})}))}su(t){try{let e=this.updateFunction(t);return!_d(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ou(t){this.nu>0&&this._u(t)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(t)}_u(t){if(t.name==="FirebaseError"){let e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!IO(e)}return!1}};var fC=class{constructor(t,e,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Gt.UNAUTHENTICATED,this.clientId=Xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>E(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=Ql(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function Jp(n,t){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>E(this,null,function*(){i.isEqual(r)||(yield QO(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function pC(n,t){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield e1(n);W("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>RA(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>RA(t.remoteStore,r)),n._onlineComponents=t})}function hR(n){return n.name==="FirebaseError"?n.code===L.FAILED_PRECONDITION||n.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function e1(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jp(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!hR(e))throw e;vi("Error using user provided cache. Falling back to memory cache: "+e),yield Jp(n,new hd)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield Jp(n,new hd);return n._offlineComponents})}function Zm(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield pC(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield pC(n,new fd))),n._onlineComponents})}function fR(n){return e1(n).then(t=>t.persistence)}function t1(n){return e1(n).then(t=>t.localStore)}function pR(n){return Zm(n).then(t=>t.remoteStore)}function n1(n){return Zm(n).then(t=>t.syncEngine)}function q5(n){return Zm(n).then(t=>t.datastore)}function $l(n){return E(this,null,function*(){let t=yield Zm(n),e=t.eventManager;return e.onListen=I5.bind(null,t.syncEngine),e.onUnlisten=x5.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=T5.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=M5.bind(null,t.syncEngine),e})}function W5(n){return n.asyncQueue.enqueue(()=>E(this,null,function*(){let t=yield fR(n),e=yield pR(n);return t.setNetworkEnabled(!0),function(r){let o=te(r);return o.L_.delete(0),Cd(o)}(e)}))}function K5(n){return n.asyncQueue.enqueue(()=>E(this,null,function*(){let t=yield fR(n),e=yield pR(n);return t.setNetworkEnabled(!1),function(r){return E(this,null,function*(){let o=te(r);o.L_.add(0),yield ql(o),o.q_.set("Offline")})}(e)}))}function Q5(n,t){let e=new Ht;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(r,o,s){return E(this,null,function*(){try{let a=yield function(u,d){let f=te(u);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,d))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new z(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=Ql(a,`Failed to get document '${o} from cache`);s.reject(l)}})}(yield t1(n),t,e)})),e.promise}function mR(n,t,e={}){let i=new Ht;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(o,s,a,l,u){let d=new Ul({next:m=>{s.enqueueAndForget(()=>WC(o,f));let y=m.docs.has(a);!y&&m.fromCache?u.reject(new z(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?u.reject(new z(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new dd(zl(a.path),d,{includeMetadataChanges:!0,_a:!0});return qC(o,f)}(yield $l(n),n.asyncQueue,t,e,i)})),i.promise}function Y5(n,t){let e=new Ht;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(r,o,s){return E(this,null,function*(){try{let a=yield Sm(r,o,!0),l=new Vm(o,a.Ts),u=l.ma(a.documents),d=l.applyChanges(u,!1);s.resolve(d.snapshot)}catch(a){let l=Ql(a,`Failed to execute query '${o} against cache`);s.reject(l)}})}(yield t1(n),t,e)})),e.promise}function gR(n,t,e={}){let i=new Ht;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(o,s,a,l,u){let d=new Ul({next:m=>{s.enqueueAndForget(()=>WC(o,f)),m.fromCache&&l.source==="server"?u.reject(new z(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new dd(a,d,{includeMetadataChanges:!0,_a:!0});return qC(o,f)}(yield $l(n),n.asyncQueue,t,e,i)})),i.promise}function J5(n,t){let e=new Ul(t);return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(r,o){te(r).Y_.add(o),o.next()}(yield $l(n),e)})),()=>{e.za(),n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(r,o){te(r).Y_.delete(o)}(yield $l(n),e)}))}}function Z5(n,t,e,i){let r=function(s,a){let l;return l=typeof s=="string"?xO().encode(s):s,function(d,f){return new uC(d,f)}(function(d,f){if(d instanceof Uint8Array)return VA(d,f);if(d instanceof ArrayBuffer)return VA(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(e,bd(t));n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){z5(yield n1(n),r,i)}))}function X5(n,t){return n.asyncQueue.enqueue(()=>E(this,null,function*(){return function(i,r){let o=te(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,r))}(yield t1(n),t)}))}function _R(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var LA=new Map;function i1(n,t,e){if(!e)throw new z(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function r1(n,t,e,i){if(t===!0&&i===!0)throw new z(L.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function BA(n){if(!ne.isDocumentKey(n))throw new z(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jA(n){if(ne.isDocumentKey(n))throw new z(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Xm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":ae()}function ze(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new z(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=Xm(n);throw new z(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function yR(n,t){if(t<=0)throw new z(L.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}var Bm=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new z(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new z(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}r1("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_R((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Js=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new z(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bm(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Aw;switch(i.type){case"firstParty":return new Nw(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=LA.get(e);i&&(W("ComponentProvider","Removing Datastore"),LA.delete(e),i.terminate())}(this),Promise.resolve()}};function vR(n,t,e,i={}){var r;let o=(n=ze(n,Js))._getSettings(),s=`${t}:${e}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Gt.MOCK_USER;else{a=tD(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new z(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Gt(u)}n._authCredentials=new Ow(new Zp(a,l))}}var dn=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},ct=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},dr=class n extends dn{constructor(t,e,i){super(t,e,zl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new ct(this.firestore,null,new ne(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function o1(n,t,...e){if(n=yt(n),i1("collection","path",t),n instanceof Js){let i=He.fromString(t,...e);return jA(i),new dr(n,null,i)}{if(!(n instanceof ct||n instanceof dr))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(He.fromString(t,...e));return jA(i),new dr(n.firestore,null,i)}}function wR(n,t){if(n=ze(n,Js),i1("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dn(n,null,function(i){return new ji(He.emptyPath(),i)}(t))}function Ed(n,t,...e){if(n=yt(n),arguments.length===1&&(t=Xp.newId()),i1("doc","path",t),n instanceof Js){let i=He.fromString(t,...e);return BA(i),new ct(n,null,new ne(i))}{if(!(n instanceof ct||n instanceof dr))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(He.fromString(t,...e));return BA(i),new ct(n.firestore,n instanceof dr?n.converter:null,new ne(i))}}function s1(n,t){return n=yt(n),t=yt(t),(n instanceof ct||n instanceof dr)&&(t instanceof ct||t instanceof dr)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function a1(n,t){return n=yt(n),t=yt(t),n instanceof dn&&t instanceof dn&&n.firestore===t.firestore&&vd(n._query,t._query)&&n.converter===t.converter}var mC=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new ud(this,"async_queue_retry"),this.Eu=()=>{let e=Yp();e&&W("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()};let t=Yp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;let e=Yp();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});let e=new Ht;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}Ru(){return E(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(t){if(!zo(t))throw t;W("AsyncQueue","Operation failed with retryable error: "+t)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(t){let e=this.au.then(()=>(this.Pu=!0,t().catch(i=>{this.hu=i,this.Pu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw Nt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=e,e}enqueueAfterDelay(t,e,i){this.du(),this.Tu.indexOf(t)>-1&&(e=0);let r=Xb.createAndSchedule(this,t,e,i,o=>this.Vu(o));return this.lu.push(r),r}du(){this.hu&&ae()}verifyOperationInProgress(){}mu(){return E(this,null,function*(){let t;do t=this.au,yield t;while(t!==this.au)})}fu(t){for(let e of this.lu)if(e.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.lu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){let e=this.lu.indexOf(t);this.lu.splice(e,1)}};function gC(n){return function(e,i){if(typeof e!="object"||e===null)return!1;let r=e;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}var _C=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ht,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}};var bR=-1,_t=class extends Js{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=function(){return new mC}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||CR(this),this._firestoreClient.terminate()}};function Qt(n){return n._firestoreClient||CR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function CR(n){var t,e,i;let r=n._freezeSettings(),o=function(a,l,u,d){return new $w(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_R(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new fC(n._authCredentials,n._appCheckCredentials,n._queue,o),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function ER(n,t){RR(n=ze(n,_t));let e=Qt(n);if(e._uninitializedComponentsProvider)throw new z(L.FAILED_PRECONDITION,"SDK cache is already specified.");vi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=n._freezeSettings(),r=new fd;return SR(e,r,new Lm(r,i.cacheSizeBytes,t?.forceOwnership))}function DR(n){RR(n=ze(n,_t));let t=Qt(n);if(t._uninitializedComponentsProvider)throw new z(L.FAILED_PRECONDITION,"SDK cache is already specified.");vi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings(),i=new fd;return SR(t,i,new cC(i,e.cacheSizeBytes))}function SR(n,t,e){let i=new Ht;return n.asyncQueue.enqueue(()=>E(this,null,function*(){try{yield Jp(n,e),yield pC(n,t),i.resolve()}catch(r){let o=r;if(!hR(o))throw o;vi("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function IR(n){if(n._initialized&&!n._terminated)throw new z(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new Ht;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{yield function(i){return E(this,null,function*(){if(!Fo.D())return Promise.resolve();let r=i+"main";yield Fo.delete(r)})}($C(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function TR(n){return function(e){let i=new Ht;return e.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return N5(yield n1(e),i)})),i.promise}(Qt(n=ze(n,_t)))}function xR(n){return W5(Qt(n=ze(n,_t)))}function MR(n){return K5(Qt(n=ze(n,_t)))}function AR(n,t){let e=Qt(n=ze(n,_t)),i=new _C;return Z5(e,n._databaseId,t,i),i}function OR(n,t){return X5(Qt(n=ze(n,_t)),t).then(e=>e?new dn(n,null,e.query):null)}function RR(n){if(n._initialized||n._terminated)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var mr=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(Vt.fromBase64String(t))}catch(e){throw new z(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(Vt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var $i=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new z(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var zr=class{constructor(t){this._methodName=t}};var Zs=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new z(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new z(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Se(this._lat,t._lat)||Se(this._long,t._long)}};var pd=class{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}};var eH=/^__.*__$/,yC=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Ui(t,this.data,this.fieldMask,e,this.fieldTransforms):new Uo(t,this.data,e,this.fieldTransforms)}},jm=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Ui(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function PR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}var Um=class n{constructor(t,e,i,r,o,s){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Su({path:i,Du:!1});return r.vu(t),r}Cu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return $m(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(t.length===0)throw this.Mu("Document fields must not be empty");if(PR(this.wu)&&eH.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}},vC=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||bd(t)}Nu(t,e,i,r=!1){return new Um({wu:t,methodName:e,Ou:i,path:Ft.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function na(n){let t=n._freezeSettings(),e=bd(n._databaseId);return new vC(n._databaseId,!!t.ignoreUndefinedProperties,e)}function eg(n,t,e,i,r,o={}){let s=n.Nu(o.merge||o.mergeFields?2:0,t,e,r);u1("Data must be an object, but it was:",s,i);let a=kR(i,s),l,u;if(o.merge)l=new si(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=DC(t,f,e);if(!s.contains(m))throw new z(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);LR(d,m)||d.push(m)}l=new si(d),u=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=s.fieldTransforms;return new yC(new bn(a),l,u)}var md=class n extends zr{_toFieldTransform(t){if(t.wu!==2)throw t.wu===1?t.Mu(`${this._methodName}() can only appear at the top level of your update data`):t.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof n}};function NR(n,t,e){return new Um({wu:3,Ou:t.settings.Ou,methodName:n._methodName,Du:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var wC=class n extends zr{_toFieldTransform(t){return new Ks(t.path,new Bo)}isEqual(t){return t instanceof n}},bC=class n extends zr{constructor(t,e){super(t),this.Lu=e}_toFieldTransform(t){let e=NR(this,t,!0),i=this.Lu.map(o=>ia(o,e)),r=new Gr(i);return new Ks(t.path,r)}isEqual(t){return t instanceof n&&i_(this.Lu,t.Lu)}},CC=class n extends zr{constructor(t,e){super(t),this.Lu=e}_toFieldTransform(t){let e=NR(this,t,!0),i=this.Lu.map(o=>ia(o,e)),r=new Hr(i);return new Ks(t.path,r)}isEqual(t){return t instanceof n&&i_(this.Lu,t.Lu)}},EC=class n extends zr{constructor(t,e){super(t),this.Bu=e}_toFieldTransform(t){let e=new jo(t.serializer,vO(t.serializer,this.Bu));return new Ks(t.path,e)}isEqual(t){return t instanceof n&&this.Bu===t.Bu}};function l1(n,t,e,i){let r=n.Nu(1,t,e);u1("Data must be an object, but it was:",r,i);let o=[],s=bn.empty();ta(i,(l,u)=>{let d=d1(t,l,e);u=yt(u);let f=r.Cu(d);if(u instanceof md)o.push(d);else{let m=ia(u,f);m!=null&&(o.push(d),s.set(d,m))}});let a=new si(o);return new jm(s,a,r.fieldTransforms)}function c1(n,t,e,i,r,o){let s=n.Nu(1,t,e),a=[DC(t,i,e)],l=[r];if(o.length%2!=0)throw new z(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(DC(t,o[m])),l.push(o[m+1]);let u=[],d=bn.empty();for(let m=a.length-1;m>=0;--m)if(!LR(u,a[m])){let y=a[m],D=l[m];D=yt(D);let T=s.Cu(y);if(D instanceof md)u.push(y);else{let R=ia(D,T);R!=null&&(u.push(y),d.set(y,R))}}let f=new si(u);return new jm(d,f,s.fieldTransforms)}function FR(n,t,e,i=!1){return ia(e,n.Nu(i?4:3,t))}function ia(n,t){if(VR(n=yt(n)))return u1("Unsupported field value:",t,n),kR(n,t);if(n instanceof zr)return function(i,r){if(!PR(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Du&&t.wu!==4)throw t.Mu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let l=ia(a,r.Fu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=yt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=It.fromDate(i);return{timestampValue:Pl(r.serializer,o)}}if(i instanceof It){let o=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Pl(r.serializer,o)}}if(i instanceof Zs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof mr)return{bytesValue:MO(r.serializer,i._byteString)};if(i instanceof ct){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:BC(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof pd)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return LC(a.serializer,l)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${Xm(i)}`)}(n,t)}function kR(n,t){let e={};return tO(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ta(n,(i,r)=>{let o=ia(r,t.bu(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function VR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof Zs||n instanceof mr||n instanceof ct||n instanceof zr||n instanceof pd)}function u1(n,t,e){if(!VR(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=Xm(e);throw i==="an object"?t.Mu(n+" a custom object"):t.Mu(n+" "+i)}}function DC(n,t,e){if((t=yt(t))instanceof $i)return t._internalPath;if(typeof t=="string")return d1(n,t);throw $m("Field path arguments must be of type string or ",n,!1,void 0,e)}var tH=new RegExp("[~\\*/\\[\\]]");function d1(n,t,e){if(t.search(tH)>=0)throw $m(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new $i(...t.split("."))._internalPath}catch{throw $m(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function $m(n,t,e,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new z(L.INVALID_ARGUMENT,a+n+l)}function LR(n,t){return n.some(e=>e.isEqual(t))}var Xs=class{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new SC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(tg("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},SC=class extends Xs{data(){return super.data()}};function tg(n,t){return typeof t=="string"?d1(n,t):t instanceof $i?t._internalPath:t._delegate._internalPath}function BR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gd=class{},ea=class extends gd{};function Kr(n,t,...e){let i=[];t instanceof gd&&i.push(t),i=i.concat(e),function(o){let s=o.filter(l=>l instanceof IC).length,a=o.filter(l=>l instanceof Gm).length;if(s>1||s>0&&a>0)throw new z(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var Gm=class n extends ea{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=this._parse(t);return QR(t._query,e),new dn(t.firestore,t.converter,tb(t._query,e))}_parse(t){let e=na(t.firestore);return function(o,s,a,l,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){$A(f,d);let y=[];for(let D of f)y.push(UA(l,o,D));m={arrayValue:{values:y}}}else m=UA(l,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||$A(f,d),m=FR(a,s,f,d==="in"||d==="not-in");return Ve.create(u,d,m)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function jR(n,t,e){let i=t,r=tg("where",n);return Gm._create(r,i,e)}var IC=class n extends gd{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:tt.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let l of a)QR(s,l),s=tb(s,l)}(t._query,e),new dn(t.firestore,t.converter,tb(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var TC=class n extends ea{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new n(t,e)}_apply(t){let e=function(r,o,s){if(r.startAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qs(o,s)}(t._query,this._field,this._direction);return new dn(t.firestore,t.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new ji(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}};function UR(n,t="asc"){let e=t,i=tg("orderBy",n);return TC._create(i,e)}var Hm=class n extends ea{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){return new dn(t.firestore,t.converter,cm(t._query,this._limit,this._limitType))}};function $R(n){return yR("limit",n),Hm._create("limit",n,"F")}function GR(n){return yR("limitToLast",n),Hm._create("limitToLast",n,"L")}var zm=class n extends ea{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=KR(t,this.type,this._docOrFields,this._inclusive);return new dn(t.firestore,t.converter,function(r,o){return new ji(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(t._query,e))}};function HR(...n){return zm._create("startAt",n,!0)}function zR(...n){return zm._create("startAfter",n,!1)}var qm=class n extends ea{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=KR(t,this.type,this._docOrFields,this._inclusive);return new dn(t.firestore,t.converter,function(r,o){return new ji(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(t._query,e))}};function qR(...n){return qm._create("endBefore",n,!1)}function WR(...n){return qm._create("endAt",n,!0)}function KR(n,t,e,i){if(e[0]=yt(e[0]),e[0]instanceof Xs)return function(o,s,a,l,u){if(!l)throw new z(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Sl(o))if(f.field.isKeyField())d.push(zs(s,l.key));else{let m=l.data.field(f.field);if(Km(m))throw new z(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=f.field.canonicalString();throw new z(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new fr(d,u)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{let r=na(n.firestore);return function(s,a,l,u,d,f){let m=s.explicitOrderBy;if(d.length>m.length)throw new z(L.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<d.length;D++){let T=d[D];if(m[D].field.isKeyField()){if(typeof T!="string")throw new z(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof T}`);if(!kC(s)&&T.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${T}' contains a slash.`);let R=s.path.child(He.fromString(T));if(!ne.isDocumentKey(R))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);let q=new ne(R);y.push(zs(a,q))}else{let R=FR(l,u,T);y.push(R)}}return new fr(y,f)}(n._query,n.firestore._databaseId,r,t,e,i)}}function UA(n,t,e){if(typeof(e=yt(e))=="string"){if(e==="")throw new z(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kC(t)&&e.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let i=t.path.child(He.fromString(e));if(!ne.isDocumentKey(i))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zs(n,new ne(i))}if(e instanceof ct)return zs(n,e._key);throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xm(e)}.`)}function $A(n,t){if(!Array.isArray(n)||n.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function QR(n,t){let e=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var Gl=class{convertValue(t,e="none"){switch(Hs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return gt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ko(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ae()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return ta(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,r;let o=(r=(i=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>gt(s.doubleValue));return new pd(o)}convertGeoPoint(t){return new Zs(gt(t.latitude),gt(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=NC(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Ju(t));default:return null}}convertTimestamp(t){let e=$r(t);return new It(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=He.fromString(t);ue(jO(i));let r=new Vo(i.get(1),i.get(3)),o=new ne(i.popFirst(5));return r.isEqual(e)||Nt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}};function ng(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var xC=class extends Gl{constructor(t){super(),this.firestore=t}convertBytes(t){return new mr(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new ct(this.firestore,null,e)}};var Ur=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},bi=class extends Xs{constructor(t,e,i,r,o,s){super(t,e,i,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new Po(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(tg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},Po=class extends bi{data(t={}){return super.data(t)}},Gi=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ur(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Po(this._firestore,this._userDataWriter,i.key,i,new Ur(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new z(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let l=new Po(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ur(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Po(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ur(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:nH(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function nH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}function h1(n,t){return n instanceof bi&&t instanceof bi?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(n._document===null?t._document===null:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Gi&&t instanceof Gi&&n._firestore===t._firestore&&a1(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function YR(n){n=ze(n,ct);let t=ze(n.firestore,_t);return mR(Qt(t),n._key).then(e=>g1(t,n,e))}var qr=class extends Gl{constructor(t){super(),this.firestore=t}convertBytes(t){return new mr(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new ct(this.firestore,null,e)}};function JR(n){n=ze(n,ct);let t=ze(n.firestore,_t),e=Qt(t),i=new qr(t);return Q5(e,n._key).then(r=>new bi(t,i,n._key,r,new Ur(r!==null&&r.hasLocalMutations,!0),n.converter))}function ZR(n){n=ze(n,ct);let t=ze(n.firestore,_t);return mR(Qt(t),n._key,{source:"server"}).then(e=>g1(t,n,e))}function XR(n){n=ze(n,dn);let t=ze(n.firestore,_t),e=Qt(t),i=new qr(t);return BR(n._query),gR(e,n._query).then(r=>new Gi(t,i,n,r))}function eP(n){n=ze(n,dn);let t=ze(n.firestore,_t),e=Qt(t),i=new qr(t);return Y5(e,n._query).then(r=>new Gi(t,i,n,r))}function tP(n){n=ze(n,dn);let t=ze(n.firestore,_t),e=Qt(t),i=new qr(t);return gR(e,n._query,{source:"server"}).then(r=>new Gi(t,i,n,r))}function f1(n,t,e){n=ze(n,ct);let i=ze(n.firestore,_t),r=ng(n.converter,t,e);return Yl(i,[eg(na(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,Rt.none())])}function p1(n,t,e,...i){n=ze(n,ct);let r=ze(n.firestore,_t),o=na(r),s;return s=typeof(t=yt(t))=="string"||t instanceof $i?c1(o,"updateDoc",n._key,t,e,i):l1(o,"updateDoc",n._key,t),Yl(r,[s.toMutation(n._key,Rt.exists(!0))])}function nP(n){return Yl(ze(n.firestore,_t),[new $o(n._key,Rt.none())])}function iP(n,t){let e=ze(n.firestore,_t),i=Ed(n),r=ng(n.converter,t);return Yl(e,[eg(na(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Rt.exists(!1))]).then(()=>i)}function m1(n,...t){var e,i,r;n=yt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||gC(t[s])||(o=t[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(gC(t[s])){let f=t[s];t[s]=(e=f.next)===null||e===void 0?void 0:e.bind(f),t[s+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),t[s+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let l,u,d;if(n instanceof ct)u=ze(n.firestore,_t),d=zl(n._key.path),l={next:f=>{t[s]&&t[s](g1(u,n,f))},error:t[s+1],complete:t[s+2]};else{let f=ze(n,dn);u=ze(f.firestore,_t),d=f._query;let m=new qr(u);l={next:y=>{t[s]&&t[s](new Gi(u,m,f,y))},error:t[s+1],complete:t[s+2]},BR(n._query)}return function(m,y,D,T){let R=new Ul(T),q=new dd(y,R,D);return m.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return qC(yield $l(m),q)})),()=>{R.za(),m.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return WC(yield $l(m),q)}))}}(Qt(u),d,a,l)}function rP(n,t){return J5(Qt(n=ze(n,_t)),gC(t)?t:{next:t})}function Yl(n,t){return function(i,r){let o=new Ht;return i.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return A5(yield n1(i),r,o)})),o.promise}(Qt(n),t)}function g1(n,t,e){let i=e.docs.get(t._key),r=new qr(n);return new bi(n,r,t._key,i,new Ur(e.hasPendingWrites,e.fromCache),t.converter)}var iH={maxAttempts:5};var Wm=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=na(t)}set(t,e,i){this._verifyNotCommitted();let r=Oo(t,this._firestore),o=ng(r.converter,e,i),s=eg(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,Rt.none())),this}update(t,e,i,...r){this._verifyNotCommitted();let o=Oo(t,this._firestore),s;return s=typeof(e=yt(e))=="string"||e instanceof $i?c1(this._dataReader,"WriteBatch.update",o._key,e,i,r):l1(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,Rt.exists(!0))),this}delete(t){this._verifyNotCommitted();let e=Oo(t,this._firestore);return this._mutations=this._mutations.concat(new $o(e._key,Rt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Oo(n,t){if((n=yt(n)).firestore!==t)throw new z(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var MC=class extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=na(e)}get(e){let i=Oo(e,this._firestore),r=new xC(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return ae();let s=o[0];if(s.isFoundDocument())return new Xs(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new Xs(this._firestore,r,i._key,null,i.converter);throw ae()})}set(e,i,r){let o=Oo(e,this._firestore),s=ng(o.converter,i,r),a=eg(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(e,i,r,...o){let s=Oo(e,this._firestore),a;return a=typeof(i=yt(i))=="string"||i instanceof $i?c1(this._dataReader,"Transaction.update",s._key,i,r,o):l1(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(e){let i=Oo(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){let e=Oo(t,this._firestore),i=new qr(this._firestore);return super.get(t).then(r=>new bi(this._firestore,i,e._key,r._document,new Ur(!1,!1),e.converter))}};function oP(n,t,e){n=ze(n,_t);let i=Object.assign(Object.assign({},iH),e);return function(o){if(o.maxAttempts<1)throw new z(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let l=new Ht;return o.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let u=yield q5(o);new hC(o.asyncQueue,u,a,s,l).ru()})),l.promise}(Qt(n),r=>t(new MC(n,r)),i)}function sP(){return new md("deleteField")}function aP(){return new wC("serverTimestamp")}function lP(...n){return new bC("arrayUnion",n)}function cP(...n){return new CC("arrayRemove",n)}function uP(n){return new EC("increment",n)}(function(t,e=!0){(function(r){Hl=r})(rD),Ac(new rs("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new _t(new Rw(i.getProvider("auth-internal")),new kw(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vo(u.options.projectId,d)}(s,r),s);return o=Object.assign({useFetchStreams:e},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ai(UM,"4.7.0",t),ai(UM,"4.7.0","esm2017")})();var rH="@firebase/firestore-compat",oH="0.3.35";function C1(n,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new z("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function dP(){if(typeof Uint8Array>"u")throw new z("unimplemented","Uint8Arrays are not available in this environment.")}function hP(){if(!nO())throw new z("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ig=class n{constructor(t){this._delegate=t}static fromBase64String(t){return hP(),new n(mr.fromBase64String(t))}static fromUint8Array(t){return dP(),new n(mr.fromUint8Array(t))}toBase64(){return hP(),this._delegate.toBase64()}toUint8Array(){return dP(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function _1(n){return sH(n,["next","error","complete"])}function sH(n,t){if(typeof n!="object"||n===null)return!1;let e=n;for(let i of t)if(i in e&&typeof e[i]=="function")return!0;return!1}var y1=class{enableIndexedDbPersistence(t,e){return ER(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return DR(t._delegate)}clearIndexedDbPersistence(t){return IR(t._delegate)}},rg=class{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Vo||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){let e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&vi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,i={}){vR(this._delegate,t,e,i)}enableNetwork(){return xR(this._delegate)}disableNetwork(){return MR(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,r1("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return TR(this._delegate)}onSnapshotsInSync(t){return rP(this._delegate,t)}get app(){if(!this._appCompat)throw new z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Xl(this,o1(this._delegate,t))}catch(e){throw On(e,"collection()","Firestore.collection()")}}doc(t){try{return new gr(this,Ed(this._delegate,t))}catch(e){throw On(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new aa(this,wR(this._delegate,t))}catch(e){throw On(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return oP(this._delegate,e=>t(new og(this,e)))}batch(){return Qt(this._delegate),new sg(new Wm(this._delegate,t=>Yl(this._delegate,t)))}loadBundle(t){return AR(this._delegate,t)}namedQuery(t){return OR(this._delegate,t).then(e=>e?new aa(this,e):null)}},Jl=class extends Gl{constructor(t){super(),this.firestore=t}convertBytes(t){return new ig(new mr(t))}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return gr.forKey(e,this.firestore,null)}};function aH(n){GA(n)}var og=class{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Jl(t)}get(t){let e=ra(t);return this._delegate.get(e).then(i=>new oa(this._firestore,new bi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){let r=ra(t);return i?(C1("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){let o=ra(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){let e=ra(t);return this._delegate.delete(e),this}},sg=class{constructor(t){this._delegate=t}set(t,e,i){let r=ra(t);return i?(C1("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){let o=ra(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){let e=ra(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}},Zl=class n{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){let i=new Po(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new sa(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){let i=n.INSTANCES,r=i.get(t);r||(r=new WeakMap,i.set(t,r));let o=r.get(e);return o||(o=new n(t,new Jl(t),e),r.set(e,o)),o}};Zl.INSTANCES=new WeakMap;var gr=class n{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Jl(t)}static forPath(t,e,i){if(t.length%2!==0)throw new z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new n(e,new ct(e._delegate,i,new ne(t)))}static forKey(t,e,i){return new n(e,new ct(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Xl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Xl(this.firestore,o1(this._delegate,t))}catch(e){throw On(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=yt(t),t instanceof ct?s1(this._delegate,t):!1}set(t,e){e=C1("DocumentReference.set",e);try{return e?f1(this._delegate,t,e):f1(this._delegate,t)}catch(i){throw On(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return arguments.length===1?p1(this._delegate,t):p1(this._delegate,t,e,...i)}catch(r){throw On(r,"updateDoc()","DocumentReference.update()")}}delete(){return nP(this._delegate)}onSnapshot(...t){let e=fP(t),i=pP(t,r=>new oa(this.firestore,new bi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return m1(this._delegate,e,i)}get(t){let e;return t?.source==="cache"?e=JR(this._delegate):t?.source==="server"?e=ZR(this._delegate):e=YR(this._delegate),e.then(i=>new oa(this.firestore,new bi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(Zl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function On(n,t,e){return n.message=n.message.replace(t,e),n}function fP(n){for(let t of n)if(typeof t=="object"&&!_1(t))return t;return{}}function pP(n,t){var e,i;let r;return _1(n[0])?r=n[0]:_1(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(t(o))},error:(e=r.error)===null||e===void 0?void 0:e.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var oa=class{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new gr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return h1(this._delegate,t._delegate)}},sa=class extends oa{data(t){let e=this._delegate.data(t);return this._delegate._converter||HA(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}},aa=class n{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Jl(t)}where(t,e,i){try{return new n(this.firestore,Kr(this._delegate,jR(t,e,i)))}catch(r){throw On(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new n(this.firestore,Kr(this._delegate,UR(t,e)))}catch(i){throw On(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new n(this.firestore,Kr(this._delegate,$R(t)))}catch(e){throw On(e,"limit()","Query.limit()")}}limitToLast(t){try{return new n(this.firestore,Kr(this._delegate,GR(t)))}catch(e){throw On(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new n(this.firestore,Kr(this._delegate,HR(...t)))}catch(e){throw On(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new n(this.firestore,Kr(this._delegate,zR(...t)))}catch(e){throw On(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new n(this.firestore,Kr(this._delegate,qR(...t)))}catch(e){throw On(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new n(this.firestore,Kr(this._delegate,WR(...t)))}catch(e){throw On(e,"endAt()","Query.endAt()")}}isEqual(t){return a1(this._delegate,t._delegate)}get(t){let e;return t?.source==="cache"?e=eP(this._delegate):t?.source==="server"?e=tP(this._delegate):e=XR(this._delegate),e.then(i=>new Dd(this.firestore,new Gi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){let e=fP(t),i=pP(t,r=>new Dd(this.firestore,new Gi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return m1(this._delegate,e,i)}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(Zl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},v1=class{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new sa(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Dd=class{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new aa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new sa(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new v1(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new sa(this._firestore,i))})}isEqual(t){return h1(this._delegate,t._delegate)}},Xl=class n extends aa{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let t=this._delegate.parent;return t?new gr(this.firestore,t):null}doc(t){try{return t===void 0?new gr(this.firestore,Ed(this._delegate)):new gr(this.firestore,Ed(this._delegate,t))}catch(e){throw On(e,"doc()","CollectionReference.doc()")}}add(t){return iP(this._delegate,t).then(e=>new gr(this.firestore,e))}isEqual(t){return s1(this._delegate,t._delegate)}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(Zl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function ra(n){return ze(n,ct)}var w1=class n{constructor(...t){this._delegate=new $i(...t)}static documentId(){return new n(Ft.keyField().canonicalString())}isEqual(t){return t=yt(t),t instanceof $i?this._delegate._internalPath.isEqual(t._internalPath):!1}};var b1=class n{constructor(t){this._delegate=t}static serverTimestamp(){let t=aP();return t._methodName="FieldValue.serverTimestamp",new n(t)}static delete(){let t=sP();return t._methodName="FieldValue.delete",new n(t)}static arrayUnion(...t){let e=lP(...t);return e._methodName="FieldValue.arrayUnion",new n(e)}static arrayRemove(...t){let e=cP(...t);return e._methodName="FieldValue.arrayRemove",new n(e)}static increment(t){let e=uP(t);return e._methodName="FieldValue.increment",new n(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}};var lH={Firestore:rg,GeoPoint:Zs,Timestamp:It,Blob:ig,Transaction:og,WriteBatch:sg,DocumentReference:gr,DocumentSnapshot:oa,Query:aa,QueryDocumentSnapshot:sa,QuerySnapshot:Dd,CollectionReference:Xl,FieldPath:w1,FieldValue:b1,setLogLevel:aH,CACHE_SIZE_UNLIMITED:bR};function cH(n,t){n.INTERNAL.registerComponent(new rs("firestore-compat",e=>{let i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},lH)))}function uH(n){cH(n,(t,e)=>new rg(t,e,new y1)),n.registerVersion(rH,oH)}uH(on);function dH(n,t=no){return new ye(e=>{let i;return t!=null?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}function mP(n,t){return dH(n,t)}function hH(n,t){return mP(n,t).pipe(Ki(void 0),Lc(),ee(e=>{let[i,r]=e;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function S1(n,t){return mP(n,t).pipe(ee(e=>({payload:e,type:"query"})))}var ag=class{ref;afs;constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){let i=this.ref.collection(t),{ref:r,query:o}=wP(i,e);return new cg(r,o,this.afs)}snapshotChanges(){return hH(this.ref,this.afs.schedulers.outsideAngular).pipe(Gn)}valueChanges(t={}){return this.snapshotChanges().pipe(ee(({payload:e})=>t.idField?Ee(Y({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Be(this.ref.get(t)).pipe(Gn)}};function lg(n,t){return S1(n,t).pipe(Ki(void 0),Lc(),ee(e=>{let[i,r]=e,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{let u=o.find(f=>f.doc.ref.isEqual(a.ref)),d=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function gP(n,t,e){return lg(n,e).pipe(us((i,r)=>fH(i,r.map(o=>o.payload),t),[]),Ah(),ee(i=>i.map(r=>({type:r.type,payload:r}))))}function fH(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=pH(n,i))}),n}function E1(n,t,e,...i){let r=n.slice();return r.splice(t,e,...i),r}function pH(n,t){switch(t.type){case"added":if(!(n[t.newIndex]&&n[t.newIndex].doc.ref.isEqual(t.doc.ref)))return E1(n,t.newIndex,0,t);break;case"modified":if(n[t.oldIndex]==null||n[t.oldIndex].doc.ref.isEqual(t.doc.ref))if(t.oldIndex!==t.newIndex){let e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}else return E1(n,t.newIndex,1,t);break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return E1(n,t.oldIndex,1);break}return n}function _P(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var cg=class{ref;query;afs;constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=lg(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(ee(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Ki(void 0),Lc(),dt(([i,r])=>r.length>0||!i),ee(([,i])=>i),Gn)}auditTrail(t){return this.stateChanges(t).pipe(us((e,i)=>[...e,...i],[]))}snapshotChanges(t){let e=_P(t);return gP(this.query,e,this.afs.schedulers.outsideAngular).pipe(Gn)}valueChanges(t={}){return S1(this.query,this.afs.schedulers.outsideAngular).pipe(ee(e=>e.payload.docs.map(i=>t.idField?Ee(Y({},i.data()),{[t.idField]:i.id}):i.data())),Gn)}get(t){return Be(this.query.get(t)).pipe(Gn)}add(t){return this.ref.add(t)}doc(t){return new ag(this.ref.doc(t),this.afs)}},D1=class{query;afs;constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return!t||t.length===0?lg(this.query,this.afs.schedulers.outsideAngular).pipe(Gn):lg(this.query,this.afs.schedulers.outsideAngular).pipe(ee(e=>e.filter(i=>t.indexOf(i.type)>-1)),dt(e=>e.length>0),Gn)}auditTrail(t){return this.stateChanges(t).pipe(us((e,i)=>[...e,...i],[]))}snapshotChanges(t){let e=_P(t);return gP(this.query,e,this.afs.schedulers.outsideAngular).pipe(Gn)}valueChanges(t={}){return S1(this.query,this.afs.schedulers.outsideAngular).pipe(ee(i=>i.payload.docs.map(r=>t.idField?Y({[t.idField]:r.id},r.data()):r.data())),Gn)}get(t){return Be(this.query.get(t)).pipe(Gn)}},yP=new re("angularfire2.enableFirestorePersistence"),vP=new re("angularfire2.firestore.persistenceSettings"),mH=new re("angularfire2.firestore.settings"),gH=new re("angularfire2.firestore.use-emulator");function wP(n,t=e=>e){return{query:t(n),ref:n}}var la=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(e,i,r,o,s,a,l,u,d,f,m,y,D,T,R,q,ie){this.schedulers=l;let H=Fs(e,a,i),le=d;f&&yw(H,a,m,D,T,R,y,q),[this.firestore,this.persistenceEnabled$]=hl(`${H.name}.firestore`,"AngularFirestore",H.name,()=>{let ge=a.runOutsideAngular(()=>H.firestore());if(o&&ge.settings(o),le&&ge.useEmulator(...le),r&&!vo(s)){let pe=()=>{try{return Be(ge.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(M){return typeof console<"u"&&console.warn(M),ce(!1)}};return[ge,a.runOutsideAngular(pe)]}else return[ge,ce(!1)]},[o,le,r])}collection(e,i){let r;typeof e=="string"?r=this.firestore.collection(e):r=e;let{ref:o,query:s}=wP(r,i),a=this.schedulers.ngZone.run(()=>o);return new cg(a,s,this)}collectionGroup(e,i){let r=i||(s=>s),o=this.firestore.collectionGroup(e);return new D1(r(o),this)}doc(e){let i;typeof e=="string"?i=this.firestore.doc(e):i=e;let r=this.schedulers.ngZone.run(()=>i);return new ag(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(K(So),K(Io,8),K(yP,8),K(mH,8),K(Wt),K(Fe),K(Ns),K(vP,8),K(gH,8),K(Fu,8),K(hw,8),K(fw,8),K(pw,8),K(mw,8),K(gw,8),K(_w,8),K(Lr,8))};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),bP=(()=>{class n{constructor(){on.registerVersion("angularfire",_i.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:yP,useValue:!0},{provide:vP,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=mt({type:n});static \u0275inj=pt({providers:[la]})}return n})();var Wo=(()=>{class n{constructor(){this.firestore=k(la),this.http=k(Li)}getFormFields(e){return this.firestore.collection("forms").doc(e).valueChanges().pipe(ee(i=>JSON.parse(i.json)))}saveForm(e,i){return this.firestore.collection("forms").doc(e).set(i)}getForms(){return this.firestore.collection("forms").valueChanges().pipe(ee(e=>e))}getFormById(e){return this.firestore.collection("forms").doc(e).valueChanges()}deleteForm(e){return this.firestore.collection("forms").doc(e).delete()}getData(e,i){return E(this,null,function*(){let r="https://us-central1-comemivesto-5e5f9.cloudfunctions.net/api/gen/",o=i?`${i}`:"",s=`${r}${e}${o}`,a=this.http.get(s);return yield Nn(a)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var CP=`
 
    <div class="ui-modal-dialog ">
      <div class="ui-modal-dialog-content">
        <div class="ui-modal-title">
          <span>{{title}}</span>
        </div>
        <div class="ui-modal-body-message">
          {{message}}
        </div>
        <div class="ui-modal-footer-message">
          <button class="ui-modal-button ok-button btn">OK</button>
        </div>
      </div>
    </div>
 
`,Rn=(n,t,e)=>{let i=CP.replace("{{title}}",t).replace("{{message}}",n),r=document.createElement("div");r.classList.add("modal"),r.style.display="block",r.innerHTML=i,r.querySelector(".ok-button").addEventListener("click",()=>{let o=!0;document.body.removeChild(r),e&&e(o)}),document.body.appendChild(r)},Ko=(n,t,e)=>{let i=CP.replace("{{title}}",t).replace("{{message}}",n),r=document.createElement("div");r.classList.add("modal"),r.style.display="block",r.innerHTML=i;let o=document.createElement("button"),s=document.createElement("button");o.classList.add("ui-modal-button"),s.classList.add("ui-modal-button"),o.textContent="Si",s.textContent="No",r.querySelector(".ui-modal-footer-message").innerHTML="",r.querySelector(".ui-modal-footer-message").appendChild(o),r.querySelector(".ui-modal-footer-message").appendChild(s),o.addEventListener("click",()=>{let a=!0;document.body.removeChild(r),e&&e(a)}),s.addEventListener("click",()=>{let a=!1;document.body.removeChild(r),e&&e(a)}),document.body.appendChild(r)};function _H(n,t){if(n&1){let e=oe();_(0,"li",7),$("dblclick",function(){let r=j(e).$implicit,o=x();return U(o.editForm(r))}),_(1,"div",8),Q(2,"span",9),N(3),v(),_(4,"div")(5,"button",10),$("click",function(){let r=j(e).$implicit,o=x();return U(o.editForm(r))}),Q(6,"span",11),v(),_(7,"button",10),$("click",function(){let r=j(e).$implicit,o=x();return U(o.deleteForm(r.nameForm))}),Q(8,"span",12),v()()()}if(n&2){let e=t.$implicit;w(3),ke(" ",e.nameForm," ")}}var EP=(()=>{class n{constructor(e){this.router=e,this.forms=[],this.formService=k(Wo)}ngOnInit(){this.loadForms()}loadForms(){this.formService.getForms().subscribe(e=>{this.forms=e})}createNewForm(){this.router.navigate(["/form-builder","new"])}editForm(e){this.router.navigate(["/form-builder",e.nameForm])}deleteForm(e){Ko("Sei sicuro di voler elimare la form?","Attenzione!",i=>{i&&this.formService.deleteForm(e).then(()=>{}).catch(r=>{console.error("Errore durante l'eliminazione del form:",r)})})}static{this.\u0275fac=function(i){return new(i||n)(X(jt))}}static{this.\u0275cmp=he({type:n,selectors:[["app-form-list"]],standalone:!0,features:[fe],decls:10,vars:3,consts:[[3,"emittEventButton","caption","addButtonShow"],[1,"text"],[1,"mdi","mdi-database"],["role","alert","role","alert",1,"alert","alert-primary","d-flex","align-items-center"],[1,"mdi","mdi-lightbulb-alert-outline","me-2"],[1,"list-group","form-list"],["class","form-list-item list-group-item d-flex justify-content-between align-items-center",3,"dblclick",4,"ngFor","ngForOf"],[1,"form-list-item","list-group-item","d-flex","justify-content-between","align-items-center",3,"dblclick"],[1,""],[1,"mdi","mdi-view-list-outline","mr-3"],[1,"btn","icon-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"mdi","mdi-close","del"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0),$("emittEventButton",function(){return r.createNewForm()}),_(1,"div",1)(2,"h2"),Q(3,"span",2),N(4," Elenco form"),v()(),_(5,"div",3),Q(6,"span",4),N(7," Elenco delle Form create nell'app "),v(),_(8,"ul",5),G(9,_H,9,1,"li",6),v()()),i&2&&(b("caption","Lista dei Form")("addButtonShow",!0),w(9),b("ngForOf",r.forms))},dependencies:[be,lt,tn],styles:[".form-list-item[_ngcontent-%COMP%]:hover{background-color:var(--bg-grey);cursor:pointer}"]})}}return n})();var RP=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(X(nr),X(cn))}}static{this.\u0275dir=We({type:n})}}return n})(),xd=(()=>{class n extends RP{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,features:[Zt]})}}return n})(),ua=new re(""),yH={provide:ua,useExisting:_n(()=>T1),multi:!0},T1=(()=>{class n extends xd{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&$("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[Un([yH]),Zt]})}}return n})(),vH={provide:ua,useExisting:_n(()=>Ci),multi:!0};function wH(){let n=Vr()?Vr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var bH=new re(""),Ci=(()=>{class n extends RP{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!wH())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(X(nr),X(cn),X(bH,8))}}static{this.\u0275dir=We({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&$("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Un([vH]),Zt]})}}return n})();function Qo(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function PP(n){return n!=null&&typeof n.length=="number"}var da=new re(""),vg=new re(""),CH=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,tc=class{static min(t){return EH(t)}static max(t){return DH(t)}static required(t){return NP(t)}static requiredTrue(t){return SH(t)}static email(t){return IH(t)}static minLength(t){return FP(t)}static maxLength(t){return kP(t)}static pattern(t){return TH(t)}static nullValidator(t){return dg(t)}static compose(t){return $P(t)}static composeAsync(t){return GP(t)}};function EH(n){return t=>{if(Qo(t.value)||Qo(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function DH(n){return t=>{if(Qo(t.value)||Qo(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function NP(n){return Qo(n.value)?{required:!0}:null}function SH(n){return n.value===!0?null:{required:!0}}function IH(n){return Qo(n.value)||CH.test(n.value)?null:{email:!0}}function FP(n){return t=>Qo(t.value)||!PP(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function kP(n){return t=>PP(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function TH(n){if(!n)return dg;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Qo(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function dg(n){return null}function VP(n){return n!=null}function LP(n){return _o(n)?Be(n):n}function BP(n){let t={};return n.forEach(e=>{t=e!=null?Y(Y({},t),e):t}),Object.keys(t).length===0?null:t}function jP(n,t){return t.map(e=>e(n))}function xH(n){return!n.validate}function UP(n){return n.map(t=>xH(t)?t:e=>t.validate(e))}function $P(n){if(!n)return null;let t=n.filter(VP);return t.length==0?null:function(e){return BP(jP(e,t))}}function x1(n){return n!=null?$P(UP(n)):null}function GP(n){if(!n)return null;let t=n.filter(VP);return t.length==0?null:function(e){let i=jP(e,t).map(LP);return D_(i).pipe(ee(BP))}}function M1(n){return n!=null?GP(UP(n)):null}function DP(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function HP(n){return n._rawValidators}function zP(n){return n._rawAsyncValidators}function I1(n){return n?Array.isArray(n)?n:[n]:[]}function hg(n,t){return Array.isArray(n)?n.includes(t):n===t}function SP(n,t){let e=I1(t);return I1(n).forEach(r=>{hg(e,r)||e.push(r)}),e}function IP(n,t){return I1(t).filter(e=>!hg(n,e))}var fg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=x1(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=M1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Qr=class extends fg{get formDirective(){return null}get path(){return null}},ca=class extends fg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},pg=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},MH={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},hne=Ee(Y({},MH),{"[class.ng-submitted]":"isSubmitted"}),qn=(()=>{class n extends pg{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(X(ca,2))}}static{this.\u0275dir=We({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Pr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Zt]})}}return n})(),_r=(()=>{class n extends pg{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(X(Qr,10))}}static{this.\u0275dir=We({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Pr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Zt]})}}return n})();var Sd="VALID",ug="INVALID",ec="PENDING",Id="DISABLED";function qP(n){return(wg(n)?n.validators:n)||null}function AH(n){return Array.isArray(n)?x1(n):n||null}function WP(n,t){return(wg(t)?t.asyncValidators:n)||null}function OH(n){return Array.isArray(n)?M1(n):n||null}function wg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function RH(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new de(1e3,"");if(!i[e])throw new de(1001,"")}function PH(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new de(1002,"")})}var mg=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Sd}get invalid(){return this.status===ug}get pending(){return this.status==ec}get disabled(){return this.status===Id}get enabled(){return this.status!==Id}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(SP(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(SP(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(IP(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(IP(t,this._rawAsyncValidators))}hasValidator(t){return hg(this._rawValidators,t)}hasAsyncValidator(t){return hg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ec,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Id,this.errors=null,this._forEachChild(i=>{i.disable(Ee(Y({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ee(Y({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Sd,this._forEachChild(i=>{i.enable(Ee(Y({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Ee(Y({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sd||this.status===ec)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Id:Sd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ec,this._hasOwnPendingAsyncValidator=!0;let e=LP(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new se,this.statusChanges=new se}_calculateStatus(){return this._allControlsDisabled()?Id:this.errors?ug:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ec)?ec:this._anyControlsHaveStatus(ug)?ug:Sd}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){wg(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=AH(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=OH(this._rawAsyncValidators)}},Yr=class extends mg{constructor(t,e,i){super(qP(e),WP(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){PH(this,!0,t),Object.keys(t).forEach(i=>{RH(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Md=new re("CallSetDisabledState",{providedIn:"root",factory:()=>bg}),bg="always";function KP(n,t){return[...t.path,n]}function gg(n,t,e=bg){A1(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),FH(n,t),VH(n,t),kH(n,t),NH(n,t)}function TP(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),yg(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _g(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function NH(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function A1(n,t){let e=HP(n);t.validator!==null?n.setValidators(DP(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=zP(n);t.asyncValidator!==null?n.setAsyncValidators(DP(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();_g(t._rawValidators,r),_g(t._rawAsyncValidators,r)}function yg(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=HP(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=zP(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return _g(t._rawValidators,i),_g(t._rawAsyncValidators,i),e}function FH(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&QP(n,t)})}function kH(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&QP(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function QP(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VH(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function YP(n,t){n==null,A1(n,t)}function LH(n,t){return yg(n,t)}function JP(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function BH(n){return Object.getPrototypeOf(n.constructor)===xd}function ZP(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function XP(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===Ci?e=o:BH(o)?i=o:r=o}),r||i||e||null}function jH(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var UH={provide:Qr,useExisting:_n(()=>Ad)},Td=Promise.resolve(),Ad=(()=>{class n extends Qr{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new se,this.form=new Yr({},x1(e),M1(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Td.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),gg(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Td.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Td.then(()=>{let i=this._findContainer(e.path),r=new Yr({});YP(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Td.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Td.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,ZP(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(i){return new(i||n)(X(da,10),X(vg,10),X(Md,8))}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&$("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[bt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Un([UH]),Zt]})}}return n})();function xP(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function MP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Cg=class extends mg{constructor(t=null,e,i){super(qP(e),WP(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wg(e)&&(e.nonNullable||e.initialValueIsDefault)&&(MP(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){xP(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){xP(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){MP(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var $H=n=>n instanceof Cg;var GH={provide:ca,useExisting:_n(()=>Jr)},AP=Promise.resolve(),Jr=(()=>{class n extends ca{constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Cg,this._registered=!1,this.name="",this.update=new se,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=XP(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),JP(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){gg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){AP.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&ou(i);AP.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?KP(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(X(Qr,9),X(da,10),X(vg,10),X(ua,10),X(Fi,8),X(Md,8))}}static{this.\u0275dir=We({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[bt.None,"disabled","isDisabled"],model:[bt.None,"ngModel","model"],options:[bt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Un([GH]),Zt,xn]})}}return n})(),nc=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),HH={provide:ua,useExisting:_n(()=>O1),multi:!0},O1=(()=>{class n extends xd{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&$("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[Un([HH]),Zt]})}}return n})();var eN=new re("");var zH={provide:Qr,useExisting:_n(()=>ha)},ha=(()=>{class n extends Qr{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new se,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return gg(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){TP(e.control||null,e,!1),jH(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,ZP(this.form,this.directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(TP(i||null,e),$H(r)&&(gg(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);YP(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&LH(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){A1(this.form,this),this._oldForm&&yg(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(X(da,10),X(vg,10),X(Md,8))}}static{this.\u0275dir=We({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&$("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[bt.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Un([zH]),Zt,xn]})}}return n})();var qH={provide:ca,useExisting:_n(()=>fa)},fa=(()=>{class n extends ca{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new se,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=XP(this,o)}ngOnChanges(e){this._added||this._setUpControl(),JP(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return KP(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(X(Qr,13),X(da,10),X(vg,10),X(ua,10),X(eN,8))}}static{this.\u0275dir=We({type:n,selectors:[["","formControlName",""]],inputs:{name:[bt.None,"formControlName","name"],isDisabled:[bt.None,"disabled","isDisabled"],model:[bt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Un([qH]),Zt,xn]})}}return n})(),WH={provide:ua,useExisting:_n(()=>Yo),multi:!0};function tN(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function KH(n){return n.split(":")[0]}var Yo=(()=>{class n extends xd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i=this._getOptionId(e),r=tN(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=KH(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&$("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Un([WH]),Zt]})}}return n})(),ic=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(tN(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(X(cn),X(nr),X(Yo,9))}}static{this.\u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),QH={provide:ua,useExisting:_n(()=>Eg),multi:!0};function OP(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function YH(n){return n.split(":")[0]}var Eg=(()=>{class n extends xd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);r.push(u)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=YH(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&$("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Un([QH]),Zt]})}}return n})(),rc=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(OP(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(OP(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(X(cn),X(nr),X(Eg,9))}}static{this.\u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function nN(n){return typeof n=="number"?n:parseInt(n,10)}var R1=(()=>{class n{constructor(){this._validator=dg}ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):dg,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=We({type:n,features:[xn]})}}return n})();var JH={provide:da,useExisting:_n(()=>Od),multi:!0};var Od=(()=>{class n extends R1{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ou,this.createValidator=e=>NP}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&jn("required",r._enabled?"":null)},inputs:{required:"required"},features:[Un([JH]),Zt]})}}return n})();var ZH={provide:da,useExisting:_n(()=>P1),multi:!0},P1=(()=>{class n extends R1{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>nN(e),this.createValidator=e=>FP(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&jn("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[Un([ZH]),Zt]})}}return n})(),XH={provide:da,useExisting:_n(()=>N1),multi:!0},N1=(()=>{class n extends R1{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>nN(e),this.createValidator=e=>kP(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&jn("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Un([XH]),Zt]})}}return n})();var iN=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({})}}return n})();var Cn=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Md,useValue:e.callSetDisabledState??bg}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({imports:[iN]})}}return n})(),Jo=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:eN,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Md,useValue:e.callSetDisabledState??bg}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({imports:[iN]})}}return n})();var ez=["*"];var tz=["dialog"];var rN={animation:!0,transitionTimerDelayMs:5},nz=(()=>{class n{constructor(){this.animation=rN.animation}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function iz(n){let{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n),i=parseFloat(t),r=parseFloat(e);return(i+r)*1e3}function oN(n){return typeof n=="string"}function F1(n){return n!=null}function rz(n){return n&&n.then}function sN(n){return(n||document.body).getBoundingClientRect()}function oz(n){return t=>new ye(e=>{let i=s=>n.run(()=>e.next(s)),r=s=>n.run(()=>e.error(s)),o=()=>n.run(()=>e.complete());return t.subscribe({next:i,error:r,complete:o})})}var sz=()=>{},{transitionTimerDelayMs:az}=rN,Dg=new Map,ma=(n,t,e,i)=>{let r=i.context||{},o=Dg.get(t);if(o)switch(i.runningTransition){case"continue":return qt;case"stop":n.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),Dg.delete(t)}let s=e(t,i.animation,r)||sz;if(!i.animation||window.getComputedStyle(t).transitionProperty==="none")return n.run(()=>s()),ce(void 0).pipe(oz(n));let a=new Le,l=new Le,u=a.pipe(M_(!0));Dg.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let d=iz(t);return n.runOutsideAngular(()=>{let f=li(t,"transitionend").pipe(Jt(u),dt(({target:y})=>y===t)),m=S_(d+az).pipe(Jt(u));I_(m,f,l).pipe(Jt(u)).subscribe(()=>{Dg.delete(t),n.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};var L1=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(L1||{});var qne=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||t()):!1})();var lz=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function aN(n){let t=Array.from(n.querySelectorAll(lz)).filter(e=>e.tabIndex!==-1);return[t[0],t[t.length-1]]}var cz=(n,t,e,i=!1)=>{n.runOutsideAngular(()=>{let r=li(t,"focusin").pipe(Jt(e),ee(o=>o.target));li(t,"keydown").pipe(Jt(e),dt(o=>o.which===L1.Tab),Nh(r)).subscribe(([o,s])=>{let[a,l]=aN(t);(s===a||s===t)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&li(t,"click").pipe(Jt(e),Nh(r),ee(o=>o[1])).subscribe(o=>o.focus())})};var Wne=new Date(1882,10,12),Kne=new Date(2174,10,25);var Qne=1e3*60*60*24;var B1=1080,uz=24*B1,dz=12*B1+793,Yne=29*uz+dz,Jne=11*B1+204;var hz=(()=>{class n{constructor(){this._ngbConfig=k(nz),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oc=class{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}};var fz=(()=>{class n{constructor(){this._document=k(en)}hide(){let e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:s}=r;if(e>0){let a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=s),r.overflow=o}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pz=(()=>{class n{constructor(){this._nativeElement=k(cn).nativeElement,this._zone=k(Fe)}ngOnInit(){this._zone.onStable.asObservable().pipe(gn(1)).subscribe(()=>{ma(this._zone,this._nativeElement,(e,i)=>{i&&sN(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ma(this._zone,this._nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){i&2&&(hi("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),Pr("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[fe],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return n})(),Sg=class{update(t){}close(t){}dismiss(t){}},mz=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],gz=["animation","backdropClass"],k1=class{_applyWindowOptions(t,e){mz.forEach(i=>{F1(e[i])&&(t[i]=e[i])})}_applyBackdropOptions(t,e){gz.forEach(i=>{F1(e[i])&&(t[i]=e[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Jt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Jt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,e,i,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Le,this._dismissed=new Le,this._hidden=new Le,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(t);else{let e=this._beforeDismiss();rz(e)?e.then(i=>{i!==!1&&this._dismiss(t)},()=>{}):e!==!1&&this._dismiss(t)}}_removeModalElements(){let t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ce(void 0);t.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Vc(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},V1=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(V1||{}),_z=(()=>{class n{constructor(){this._document=k(en),this._elRef=k(cn),this._zone=k(Fe),this._closed$=new Le,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new se,this.shown=new Le,this.hidden=new Le}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":oN(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(gn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},r=ma(this._zone,e,()=>e.classList.remove("show"),i),o=ma(this._zone,this._dialogEl.nativeElement,()=>{},i),s=Vc(r,o);return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){let e={animation:this.animation,runningTransition:"continue"},i=ma(this._zone,this._elRef.nativeElement,(o,s)=>{s&&sN(o),o.classList.add("show")},e),r=ma(this._zone,this._dialogEl.nativeElement,()=>{},e);Vc(i,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{li(e,"keydown").pipe(Jt(this._closed$),dt(r=>r.which===L1.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(V1.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let i=!1;li(this._dialogEl.nativeElement,"mousedown").pipe(Jt(this._closed$),Mt(()=>i=!1),nt(()=>li(e,"mouseup").pipe(Jt(this._closed$),gn(1))),dt(({target:r})=>e===r)).subscribe(()=>{i=!0}),li(e,"click").pipe(Jt(this._closed$)).subscribe(({target:r})=>{e===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!i&&this._zone.run(()=>this.dismiss(V1.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){let i=e.querySelector("[ngbAutofocus]"),r=aN(e)[0];(i||r||e).focus()}}_restoreFocus(){let e=this._document.body,i=this._elWithFocus,r;i&&i.focus&&e.contains(i)?r=i:r=e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&ma(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(i&1&&At(tz,7),i&2){let o;Et(o=Dt())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){i&2&&(jn("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),hi("modal d-block"+(r.windowClass?" "+r.windowClass:"")),Pr("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[fe],ngContentSelectors:ez,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,r){i&1&&(Xa(),_(0,"div",1,0)(2,"div",2),el(3),v()()),i&2&&hi("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return n})(),yz=(()=>{class n{constructor(){this._applicationRef=k(yo),this._injector=k(di),this._environmentInjector=k(an),this._document=k(en),this._scrollBar=k(fz),this._activeWindowCmptHasChanged=new Le,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new se;let e=k(Fe);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let i=this._windowCmpts[this._windowCmpts.length-1];cz(e,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){let e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,r){let o=r.container instanceof HTMLElement?r.container:F1(r.container)?this._document.querySelector(r.container):this._document.body;if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let s=new Sg;e=r.injector||e;let a=e.get(an,null)||this._environmentInjector,l=this._getContentRef(e,a,i,s,r),u=r.backdrop!==!1?this._attachBackdrop(o):void 0,d=this._attachWindowComponent(o,l.nodes),f=new k1(d,l,u,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(d),f.hidden.pipe(gn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),s.close=m=>{f.close(m)},s.dismiss=m=>{f.dismiss(m)},s.update=m=>{f.update(m)},f.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),d.changeDetectorRef.detectChanges(),f}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=qf(pz,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let r=qf(_z,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_getContentRef(e,i,r,o,s){return r?r instanceof Ni?this._createFromTemplateRef(r,o):oN(r)?this._createFromString(r):this._createFromComponent(e,i,r,o,s):new oc([])}_createFromTemplateRef(e,i){let r={$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}},o=e.createEmbeddedView(r);return this._applicationRef.attachView(o),new oc([o.rootNodes],o)}_createFromString(e){let i=this._document.createTextNode(`${e}`);return new oc([[i]])}_createFromComponent(e,i,r,o,s){let a=di.create({providers:[{provide:Sg,useValue:o}],parent:e}),l=qf(r,{environmentInjector:i,elementInjector:a}),u=l.location.nativeElement;return s.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new oc([[u]],l.hostView,l)}_setAriaHidden(e){let i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){let i=()=>{let r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{let i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),j1=(()=>{class n{constructor(){this._injector=k(di),this._modalStack=k(yz),this._config=k(hz)}open(e,i={}){let r=Y(Ee(Y({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lN=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({providers:[j1]})}}return n})();var Zne=new re("live announcer delay",{providedIn:"root",factory:()=>100});function wz(n,t){n&1&&(_(0,"option",6),N(1," Caricamento in corso... "),v())}function bz(n,t){if(n&1&&(_(0,"option",7),N(1),v()),n&2){let e=t.$implicit,i=x(2);b("value",e[i.valueExp]),w(),ke(" ",e[i.displayExp]," ")}}function Cz(n,t){if(n&1){let e=oe();je(0),_(1,"div",2)(2,"select",3),$("change",function(r){j(e);let o=x();return U(o.onValueChange(r))}),G(3,wz,2,0,"option",4),_(4,"option"),N(5," Seleziona una opzione... "),v(),G(6,bz,2,2,"option",5),v()(),Ue()}if(n&2){let e=x();w(),b("formGroup",e.formGroup),w(),b("formControlName",e.fieldName),w(),b("ngIf",e.isLoading),w(3),b("ngForOf",e.availableOptions)}}function Ez(n,t){if(n&1&&(_(0,"option",7),N(1),v()),n&2){let e=t.$implicit,i=x(2);b("value",e[i.valueExp]),w(),ke(" ",e[i.displayExp]," ")}}function Dz(n,t){if(n&1){let e=oe();_(0,"select",8),$("change",function(r){j(e);let o=x();return U(o.onValueChange(r))}),G(1,Ez,2,2,"option",5),v()}if(n&2){let e=x();b("multiple",!0)("formControlName",e.fieldName),w(),b("ngForOf",e.availableOptions)}}var cN=(()=>{class n{constructor(){this.disabled=!1,this.values=[],this.valueChange=new se,this.parentValue=Af(),this.formService=k(Wo),this.availableOptions=[],this.isLoading=!0,this.isRemote=!1,this.fieldName="",this.multiple=!1,xs(()=>{this.parentValue()&&this.filterOptionsBasedOnParent()})}ngOnInit(){this.initializeOptions()}initializeOptions(){return E(this,null,function*(){this.config&&this.config.selectOptions&&(this.fieldName=this.config.name,this.formControlD=this.formGroup.get(this.fieldName),this.selectOptions=this.config.selectOptions,this.displayExp=this.selectOptions.displayExp||"value",this.valueExp=this.selectOptions.valueExp||"id",this.isRemote=this.selectOptions.remote,this.selectOptions.multiple&&(this.multiple=this.selectOptions.multiple),this.selectedValue=this.selectOptions.multiple?this.values:this.value,this.isRemote?this.availableOptions=yield this.getRemoteOptions(this.selectOptions.api):this.availableOptions=this.selectOptions.options||[],this.config.selectOptions.parent&&this.parentValue&&(this.availableOptions=this.availableOptions.filter(e=>e.parent===this.parentValue)))})}getRemoteOptions(e,i){return E(this,null,function*(){this.isLoading=!0,this.formControlD?.disable();let r=[];this.parentValue()&&(i=`/${this.parentValue()}`);try{r=yield this.formService.getData(e,i),r.length>0&&(this.isLoading=!1,this.formControlD?.enable())}catch{}return r})}filterOptionsBasedOnParent(){return E(this,null,function*(){this.isRemote?this.availableOptions=yield this.getRemoteOptions(this.selectOptions.api,this.parentValue()):this.selectOptions&&this.selectOptions.parent&&(this.availableOptions=this.selectOptions.options.filter(e=>e.parent===this.parentValue()))})}onValueChange(e){this.selectedValue=e.target.value;let i={event:e,selectedValue:this.selectedValue,component:this,selectOptions:this.selectOptions,parentField:this.selectOptions.parent};this.valueChange.emit(i)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-dynamic-select-box"]],inputs:{config:"config",formGroup:"formGroup",disabled:"disabled",value:"value",values:"values",parentValue:[bt.SignalBased,"parentValue"]},outputs:{valueChange:"valueChange"},standalone:!0,features:[fe],decls:3,vars:2,consts:[["selectMultiple",""],[4,"ngIf","ngIfElse"],[3,"formGroup"],[1,"form-control",3,"change","formControlName"],["selected","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["selected",""],[3,"value"],[1,"form-control",3,"change","multiple","formControlName"]],template:function(i,r){if(i&1&&G(0,Cz,7,4,"ng-container",1)(1,Dz,2,3,"ng-template",null,0,fi),i&2){let o=Lt(2);b("ngIf",!r.selectOptions.multiple)("ngIfElse",o)}},dependencies:[be,lt,Ye,Cn,ic,rc,Yo,Eg,qn,_r,Jo,ha,fa]})}}return n})();var Sz=["imageElement"],Iz=["fileInput"];function Tz(n,t){n&1&&(_(0,"span"),N(1,"Caricamento.."),v())}function xz(n,t){if(n&1&&(_(0,"div"),Q(1,"img",7,2),v()),n&2){let e=x();w(),b("src",e.value,Ln)}}var uN=(()=>{class n{constructor(){this.disabled=!1,this.value="",this.valueChange=new se,this.maxWidth=300,this.maxHeight=1350,this.imageLoading=Qe(!0),this.format="",this.openFullScreen=!1,this.fieldName=""}ngOnInit(){}ngAfterViewInit(){this.fileBoxOptions=this.config.fileBoxOptions,this.fieldName=this.config.name,this.imageElement&&(this.imageElement.nativeElement.onload=e=>{setTimeout(()=>{this.imageLoading.set(!1)},1500)},this.imageElement.nativeElement.onerror=()=>{this.imageLoading.set(!1)}),this.imageElement||this.imageLoading.set(!1)}chooseFile(e){this.fileInput.nativeElement.click()}onFileSelected(e){return E(this,null,function*(){let i=e.target;if(i.files&&i.files[0]){let r=i.files[0];if(this.validateFile(r)){let o=new FileReader;this.imageLoading.set(!0),o.onload=s=>E(this,null,function*(){let a=s.target?.result;try{let l=this.fileBoxOptions&&this.fileBoxOptions.maxWidth?this.fileBoxOptions.maxWidth:600,u=r.type.replace("image/",""),d=yield this.resizeImage(a,l,u);this.value=d.dataUrl,this.imageLoading.set(!0),this.valueChange.emit(this.value)}catch(l){console.error("Errore durante il ridimensionamento dell'immagine:",l),this.imageLoading.set(!0)}}),o.readAsDataURL(r)}else alert("File non valido. Seleziona un file immagine di dimensioni inferiori a 2MB.")}})}validateFile(e){let i=this.fileBoxOptions?.maxSize?this.fileBoxOptions.maxSize*1024*1024:2097152,r=["image/jpeg","image/png","image/gif"];return e.size<=i&&r.includes(e.type)}resizeImage(e,i,r){return new Promise((o,s)=>{let a=new Image;a.src=e,a.onload=()=>{let l=document.createElement("canvas"),u=l.getContext("2d"),d=a.width,f=a.height;if(d>i){let y=i/a.width;l.width=i,l.height=a.height*y,d=i,f=a.height*y}u.drawImage(a,0,0,d,f);let m=l.toDataURL(`image/${r}`,.7);o({dataUrl:m,format:m.split(";")[0].split("/")[1]})},a.onerror=l=>{s(l)}})}dataURLtoBlob(e){let i=e.split(","),r=i[0].match(/:(.*?);/)[1],o=atob(i[1]),s=o.length,a=new Uint8Array(s);for(;s--;)a[s]=o.charCodeAt(s);return new Blob([a],{type:r})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-dynamic-file-box"]],viewQuery:function(i,r){if(i&1&&(At(Sz,5),At(Iz,5)),i&2){let o;Et(o=Dt())&&(r.imageElement=o.first),Et(o=Dt())&&(r.fileInput=o.first)}},inputs:{config:"config",formControlD:"formControlD",formGroup:"formGroup",disabled:"disabled",value:"value",maxWidth:"maxWidth",maxHeight:"maxHeight"},outputs:{valueChange:"valueChange"},standalone:!0,features:[fe],decls:8,vars:4,consts:[["imageContainer",""],["fileInput",""],["imageElement",""],[1,"image-container",3,"formGroup"],[4,"ngIf"],["type","file",1,"d-none",3,"change","formControlName"],["type","button",1,"select-photo",3,"click"],[1,"form-image","img-thumbnail",2,"width","200px","height","200px",3,"src"]],template:function(i,r){if(i&1){let o=oe();_(0,"div",3,0),G(2,Tz,2,0,"span",4)(3,xz,3,1,"div",4),_(4,"input",5,1),$("change",function(a){return j(o),U(r.onFileSelected(a))}),v(),_(6,"button",6),$("click",function(a){return j(o),U(r.chooseFile(a))}),N(7," Seleziona foto "),v()()}i&2&&(b("formGroup",r.formGroup),w(2),b("ngIf",r.imageLoading()),w(),b("ngIf",r.value),w(),b("formControlName",r.fieldName))},dependencies:[be,Ye,Cn,Ci,qn,_r,Jo,ha,fa],styles:[".form-image[_ngcontent-%COMP%]{object-fit:cover}"]})}}return n})();var yr=(()=>{class n{constructor(){this.overlayData=new Le,this.currentOverlayIndex=Qe(""),this.overlayData$=this.overlayData.asObservable()}openOverlay(e){this.currentOverlayIndex.set(e.index),this.overlayData.next(e)}closeOverlay(){this.overlayData.next(null)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Mz=["*"],Az=n=>({"max-height.px":n}),sc=(()=>{class n{constructor(){this.scrollHeigth=400,this.overlayService=k(yr)}onScroll(e){this.overlayService.closeOverlay()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-custom-scrollbar"]],inputs:{scrollHeigth:"scrollHeigth"},standalone:!0,features:[fe],ngContentSelectors:Mz,decls:2,vars:3,consts:[[1,"scrollbar-container",3,"scroll","ngStyle"]],template:function(i,r){i&1&&(Xa(),_(0,"div",0),$("scroll",function(s){return r.onScroll(s)}),el(1),v()),i&2&&b("ngStyle",Xt(1,Az,r.scrollHeigth))},dependencies:[be,$n],styles:['@charset "UTF-8";.scrollbar-container[_ngcontent-%COMP%]{overflow-y:auto;padding:0;scrollbar-width:thin;scrollbar-color:#e3e3e3 #ffffff}.scrollbar-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.scrollbar-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}.scrollbar-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#e3e3e3;border-radius:10px;border:2px solid #ffffff}']})}}return n})();var Oz=(n,t)=>({"mdi-eye-outline ":n,"mdi-eye-off-outline":t}),Rz=()=>[];function Pz(n,t){if(n&1){let e=oe();je(0),_(1,"input",13),Me("ngModelChange",function(r){j(e);let o=x().$implicit,s=x();return Pe(s.formValues[o.name],r)||(s.formValues[o.name]=r),U(r)}),v(),Ue()}if(n&2){let e=x().$implicit,i=x();w(),b("type",e.typeInput)("name",e.name)("formControlName",e.name)("id",e.htmlId),xe("ngModel",i.formValues[e.name])}}function Nz(n,t){n&1&&(_(0,"span",16),N(1,"Richiesto"),v())}function Fz(n,t){if(n&1&&(_(0,"label",14),N(1),G(2,Nz,2,0,"span",15),v()),n&2){let e=x().$implicit;w(),ke("",e.label," "),w(),b("ngIf",e.required)}}function kz(n,t){if(n&1&&Q(0,"input",17),n&2){let e=x().$implicit;b("type",e.typeInput?e.typeInput:"text")("name",e.name)("formControlName",e.name)("id",e==null?null:e.htmlId)("placeholder",e==null?null:e.placeholder)("maxlength",e.maxlength)("minlength",e.minlength),jn("required",e.required?!0:null)}}function Vz(n,t){if(n&1){let e=oe();je(0),_(1,"button",18),$("click",function(){j(e);let r=x().$implicit,o=x();return U(o.toggleFieldTextType(r))}),Q(2,"i",19),v(),Ue()}if(n&2){let e=x().$implicit;w(2),b("ngClass",ir(1,Oz,e.typeInput==="password",e.typeInput==="text"))}}function Lz(n,t){if(n&1){let e=oe();je(0),_(1,"button",18),$("click",function(){j(e);let r=x().$implicit,o=x();return U(o.onFucBtnClick(r))}),Q(2,"span",20),v(),Ue()}}function Bz(n,t){if(n&1&&(_(0,"textarea",21),N(1,`
                `),v()),n&2){let e=x().$implicit;b("placeholder",e.placeholder)("formControlName",e.name)}}function jz(n,t){if(n&1){let e=oe();_(0,"app-dynamic-select-box",22),$("valueChange",function(r){j(e);let o=x().$implicit,s=x();return U(s.onValueChangeSelectBox(o.name,r))}),v()}if(n&2){let e=x().$implicit,i=x();b("config",e)("formGroup",i.form)("parentValue",i.getParentValues(e.selectOptions.parent))("value",i.formValues[e.name])("values",e.selectOptions.multiple?i.formValues[e.name]:KT(5,Rz))}}function Uz(n,t){if(n&1){let e=oe();_(0,"app-dynamic-file-box",23),$("valueChange",function(r){j(e);let o=x().$implicit,s=x();return U(s.onValueChange(o.name,r))}),v()}if(n&2){let e=x().$implicit,i=x();b("config",e)("value",i.formValues[e.name])("formGroup",i.form)}}function $z(n,t){if(n&1&&(je(0),G(1,Pz,2,5,"ng-container",5),_(2,"div",6),G(3,Fz,3,2,"label",7),_(4,"div",8),G(5,kz,1,8,"input",9)(6,Vz,3,4,"ng-container",5)(7,Lz,3,0,"ng-container",5)(8,Bz,2,2,"textarea",10)(9,jz,1,6,"app-dynamic-select-box",11)(10,Uz,1,3,"app-dynamic-file-box",12),v()(),Ue()),n&2){let e=t.$implicit,i=x();w(),b("ngIf",e.type=="hiddenBox"),w(2),b("ngIf",e.type!="hiddenBox"),w(2),b("ngIf",e.type==="textBox"),w(),b("ngIf",i.showPasswordButton[e.name]),w(),b("ngIf",e.funcButton),w(),b("ngIf",e.type==="textArea"),w(),b("ngIf",e.type==="selectBox"&&e.selectOptions),w(),b("ngIf",e.type==="fileBox")}}function Gz(n,t){if(n&1){let e=oe();_(0,"button",27),$("click",function(){j(e);let r=x(2);return U(r.cancellForm())}),Q(1,"span",28),_(2,"span",29),N(3),v()()}if(n&2){let e=x(2);w(3),Je(e.closeButton)}}function Hz(n,t){if(n&1&&(_(0,"button",30),Q(1,"span",19),_(2,"span",31),N(3),v()()),n&2){let e=x(2);w(),b("ngClass",e.iconSubmitButton),w(2),Je(e.submitButton)}}function zz(n,t){if(n&1&&(_(0,"div",24),G(1,Gz,4,1,"button",25)(2,Hz,4,2,"button",26),v()),n&2){let e=x();w(),b("ngIf",e.showBottomButtonLeft),w(),b("ngIf",e.showBottomButtonRight)}}var Zo=(()=>{class n{constructor(){this.showBottomButtons=!0,this.showBottomButtonLeft=!0,this.showBottomButtonRight=!0,this.submitFormEvent=new se,this.functionalInputFormEvent=new se,this.form=new Yr({}),this.formValues={},this.dataSet=[],this.fields=[],this.formShow=!1,this.fieldConfigs={},this.templateService=k(Wo),this.inEdit=!0,this.parentValues=Qe({}),this.showPasswordButton={},this.closeButton="Ritorna",this.submitButton="Salva",this.iconSubmitButton="mdi-content-save-outline"}ngOnChanges(e){e.editData&&e.editData.currentValue}ngOnInit(){this.service&&(typeof this.editData>"u"&&(this.editData={},this.inEdit=!1),typeof this.idData<"u"&&(this.editData=this.idData),this.templateService.getFormFields(this.service).subscribe(e=>{this.fields=e,this.initializeForm()}),this.inputBtnLeftName&&(this.closeButton=this.inputBtnLeftName),this.inputBtnRightName&&(this.iconSubmitButton="",this.submitButton=this.inputBtnRightName))}initializeForm(){this.editData=this.editData||{};let e=new Yr({});this.fields.forEach(i=>{let r=this.getValidators(i),o=this.editData[i.name]||null;console.log(i.name);try{e.addControl(i.name,new Cg(o,r))}catch(s){console.error(`Error setting control for field ${i.name}:`,s)}if(i.selectOptions&&i.selectOptions.parent){let s=i.selectOptions.parent;this.parentValues.set(Ee(Y({},this.parentValues()),{[s]:this.editData[s]||""}))}i.typeInput==="password"&&(this.showPasswordButton[i.name]=!0),this.initializeFormValues(i)}),this.form=e,console.log(this.form)}getValidators(e){let i=[];return e.required&&i.push(tc.required),typeof e.minlength<"u"&&i.push(tc.minLength(e.minlength)),typeof e.maxlength<"u"&&i.push(tc.maxLength(e.maxlength)),i}initializeFormValues(e){typeof this.editData[e.name]<"u"&&(this.formValues[e.name]=this.editData[e.name]),this.fieldConfigs[e.name]=e}onValueChange(e,i){let r=this.form.get(e);r&&r.value!==i&&(r.setValue(i,{emitEvent:!1}),this.formValues[e]=i)}onValueChangeSelectBox(e,i){this.onValueChange(e,i.selectedValue),e in this.parentValues()&&this.parentValues.set(Ee(Y({},this.parentValues()),{[e]:i.selectedValue})),console.log(this.parentValues())}getParentValues(e){return e?this.parentValues()[e]:null}updateCascadeOptions(e,i){let r=this.fieldConfigs[e];if(r&&r.cascadeFrom&&e===r.cascadeFrom){let o=r.cascadeOptions[i]||[];this.formValues[e]=o}}toggleFieldTextType(e){e.typeInput==="password"?e.typeInput="text":e.typeInput="password"}submitForm(){if(this.form.valid){let e={name:"submitForm",formData:this.form.value,form:this.form,inEdit:this.inEdit};this.submitFormEvent.emit(e)}else{let e=this.getInvalidFields(this.form);this.presentToast(`Mancano i seguenti campi:${e.join(", ")}`)}}cancellForm(){let e={name:"cancelForm",formData:this.form.value,form:this.form,component:this};this.submitFormEvent.emit(e)}getInvalidFields(e){let i=[];return Object.keys(e.controls).forEach(r=>{let o=e.get(r);if(o&&o.invalid){let s=this.fieldConfigs[r].label;i.push(s)}}),i}presentToast(e){return E(this,null,function*(){Rn(e,"Errore!")})}onFucBtnClick(e){let i={name:"functionalInputClick",nomeCampo:e.name,allFields:e};this.functionalInputFormEvent.emit(i)}refresh(){this.form.reset()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-dynamic-form"]],inputs:{service:"service",editData:"editData",idData:"idData",showBottomButtons:"showBottomButtons",showBottomButtonLeft:"showBottomButtonLeft",showBottomButtonRight:"showBottomButtonRight",inputBtnRightName:"inputBtnRightName",inputBtnLeftName:"inputBtnLeftName"},outputs:{submitFormEvent:"submitFormEvent",functionalInputFormEvent:"functionalInputFormEvent"},standalone:!0,features:[xn,fe],decls:5,vars:4,consts:[[3,"ngSubmit","formGroup"],[1,"form-container"],[3,"scrollHeigth"],[4,"ngFor","ngForOf"],["class","form-footer",4,"ngIf"],[4,"ngIf"],[1,"row","mt-3","mb-3"],["class","col-sm-3 col-form-label font-medium",4,"ngIf"],[1,"col-sm-9"],["class","form-control",3,"type","name","formControlName","id","placeholder","maxlength","minlength",4,"ngIf"],["rows","4","class","form-control",3,"placeholder","formControlName",4,"ngIf"],[3,"config","formGroup","parentValue","value","values","valueChange",4,"ngIf"],[3,"config","value","formGroup","valueChange",4,"ngIf"],[1,"form-control",3,"ngModelChange","type","name","formControlName","id","ngModel"],[1,"col-sm-3","col-form-label","font-medium"],["class","badge bg-secondary",4,"ngIf"],[1,"badge","bg-secondary"],[1,"form-control",3,"type","name","formControlName","id","placeholder","maxlength","minlength"],["type","button",1,"btn","functional-btn",3,"click"],[1,"mdi",3,"ngClass"],[1,"mdi","mdi-text-box-search-outline"],["rows","4",1,"form-control",3,"placeholder","formControlName"],[3,"valueChange","config","formGroup","parentValue","value","values"],[3,"valueChange","config","value","formGroup"],[1,"form-footer"],["type","button","class","btn ana-button",3,"click",4,"ngIf"],["type","submit","class","btn ana-button btn-submit-form",4,"ngIf"],["type","button",1,"btn","ana-button",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"bottom-button-name","btn-cancel-form"],["type","submit",1,"btn","ana-button","btn-submit-form"],[1,"bottom-button-name"]],template:function(i,r){i&1&&(_(0,"form",0),$("ngSubmit",function(){return r.submitForm()}),_(1,"div",1)(2,"app-custom-scrollbar",2),G(3,$z,11,8,"ng-container",3),v()(),G(4,zz,3,2,"div",4),v()),i&2&&(b("formGroup",r.form),w(2),b("scrollHeigth",700),w(),b("ngForOf",r.fields),w(),b("ngIf",r.showBottomButtons))},dependencies:[be,Ot,lt,Ye,cN,uN,Cn,nc,Ci,qn,_r,P1,N1,Jo,ha,fa,sc],styles:[".form-container[_ngcontent-%COMP%]{padding:1rem}.form-container[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.form-container[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{margin-left:-.6rem;margin-right:.5rem}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--bg-grey);padding:.6rem .5rem}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-cell[_ngcontent-%COMP%]{text-align:center}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]{font-size:1.4rem;padding:0}.form-container[_ngcontent-%COMP%]   .functional-btn[_ngcontent-%COMP%]{right:calc(var(--bs-gutter-x) * .5);position:absolute;top:var(--bs-gutter-y)}.form-footer[_ngcontent-%COMP%]{border:1px solid var(--border_color);padding:1rem;display:flex;gap:1rem;flex-direction:row;flex-wrap:nowrap;justify-content:end}"]})}}return n})();function qz(n,t){n&1&&(_(0,"div",43),N(1,"*Nome obbligatorio"),v())}function Wz(n,t){n&1&&(_(0,"div",43),N(1,"*Tipo obbligatoria"),v())}function Kz(n,t){n&1&&(_(0,"div",43),N(1,"*Label obbligatoria"),v())}function Qz(n,t){if(n&1){let e=oe();_(0,"div",12)(1,"label",13),N(2,"Mostra func.bot"),v(),_(3,"div",34)(4,"input",44),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.funcButton,r)||(o.formField.funcButton=r),U(r)}),v(),_(5,"label",36),N(6," Mostra un bottone funzionale nella form "),v()()()}if(n&2){let e=x();w(4),xe("ngModel",e.formField.funcButton)}}function Yz(n,t){if(n&1){let e=oe();_(0,"div",12)(1,"label",45),N(2,"Min Value"),v(),_(3,"div",46)(4,"input",47),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.min,r)||(o.formField.min=r),U(r)}),v()()()}if(n&2){let e=x();w(4),b("disabled",e.showFileOption),xe("ngModel",e.formField.min)}}function Jz(n,t){if(n&1){let e=oe();_(0,"div",12)(1,"label",13),N(2,"Max Value"),v(),_(3,"div",46)(4,"input",48),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.max,r)||(o.formField.max=r),U(r)}),v()()()}if(n&2){let e=x();w(4),b("disabled",e.showFileOption),xe("ngModel",e.formField.max)}}function Zz(n,t){n&1&&(_(0,"div",43),N(1,"*link obbligatorio"),v())}function Xz(n,t){n&1&&(_(0,"div",43),N(1,"*Testo del link"),v())}function e8(n,t){if(n&1){let e=oe();_(0,"div",12)(1,"div",12)(2,"label",13),N(3,"CheckBox con link"),v(),_(4,"div",34)(5,"input",49),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.checkBoxOptions.haveLink,r)||(o.formField.checkBoxOptions.haveLink=r),U(r)}),v(),_(6,"label",50),N(7,"Abilita per inserire un link nella checkbox"),v()()(),_(8,"div",12)(9,"label",13),N(10,"Link"),v(),_(11,"div",15)(12,"input",51,4),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.checkBoxOptions.hrefLink,r)||(o.formField.checkBoxOptions.hrefLink=r),U(r)}),v()(),G(14,Zz,2,0,"div",17),v(),_(15,"div",12)(16,"label",13),N(17,"Testo del link"),v(),_(18,"div",15)(19,"input",52,5),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.checkBoxOptions.hrefText,r)||(o.formField.checkBoxOptions.hrefText=r),U(r)}),v()(),G(21,Xz,2,0,"div",17),v()()}if(n&2){let e=Lt(13),i=Lt(20),r=x();w(5),xe("ngModel",r.formField.checkBoxOptions.haveLink),w(7),xe("ngModel",r.formField.checkBoxOptions.hrefLink),b("required",r.formField.checkBoxOptions.haveLink===!0),w(2),b("ngIf",e.invalid&&e.touched&&r.formField.checkBoxOptions.haveLink),w(5),b("required",r.formField.checkBoxOptions.haveLink===!0),xe("ngModel",r.formField.checkBoxOptions.hrefText),w(2),b("ngIf",i.invalid&&i.touched&&r.formField.checkBoxOptions.haveLink)}}function t8(n,t){n&1&&(_(0,"div",43),N(1,"maxWidth obbligatorio"),v())}function n8(n,t){if(n&1){let e=oe();_(0,"div",12)(1,"div",12)(2,"label",13),N(3,"Larghezza massima immagine"),v(),_(4,"div",15)(5,"input",53,6),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.fileBoxOptions.maxWidth,r)||(o.formField.fileBoxOptions.maxWidth=r),U(r)}),v()(),G(7,t8,2,0,"div",17),v(),_(8,"div",12)(9,"label",13),N(10,"Altezza massima"),v(),_(11,"div",15)(12,"input",54),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.fileBoxOptions.maxheight,r)||(o.formField.fileBoxOptions.maxheight=r),U(r)}),v()()(),_(13,"div",12)(14,"label",13),N(15,"Salva foto base64"),v(),_(16,"div",34)(17,"input",55),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.fileBoxOptions.isbase64,r)||(o.formField.fileBoxOptions.isbase64=r),U(r)}),v(),_(18,"label",56),N(19,"Spunta per salvare il base64, se non lo fai lo devi gestire a mano!"),v()()(),_(20,"div",12)(21,"label",13),N(22,"Max size in MB"),v(),_(23,"div",15)(24,"input",57),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.fileBoxOptions.maxSize,r)||(o.formField.fileBoxOptions.maxSize=r),U(r)}),v()()()()}if(n&2){let e=Lt(6),i=x();w(5),xe("ngModel",i.formField.fileBoxOptions.maxWidth),w(2),b("ngIf",e.invalid&&e.touched),w(5),xe("ngModel",i.formField.fileBoxOptions.maxheight),w(5),xe("ngModel",i.formField.fileBoxOptions.isbase64),w(7),xe("ngModel",i.formField.fileBoxOptions.maxSize)}}function i8(n,t){n&1&&(_(0,"div",43),N(1,"displayExp obbligatorio"),v())}function r8(n,t){n&1&&(_(0,"div",43),N(1,"valueExp obbligatorio"),v())}function o8(n,t){n&1&&(_(0,"div",43),N(1,"Api se remote obbligatorio"),v())}function s8(n,t){if(n&1){let e=oe();_(0,"tr",73),$("click",function(){let r=j(e).$implicit,o=x(3);return U(o.onOptionClick(r))}),_(1,"td"),N(2),v(),_(3,"td"),N(4),v(),_(5,"td"),N(6),v(),_(7,"td")(8,"button",73),$("click",function(){let r=j(e).index,o=x(3);return U(o.removeOption(r))}),N(9,"Rimuovi"),v()()()}if(n&2){let e=t.$implicit,i=x(3);w(2),ke(" ",e[i.formField.selectOptions.valueExp]," "),w(2),ke(" ",e[i.formField.selectOptions.displayExp]," "),w(2),ke(" ",e.parent," ")}}function a8(n,t){if(n&1){let e=oe();_(0,"table",66)(1,"thead")(2,"tr")(3,"td"),N(4),v(),_(5,"td"),N(6),v(),_(7,"td"),N(8,"Parent"),v(),_(9,"td"),N(10,"Azioni"),v()()(),_(11,"tbody")(12,"tr")(13,"td")(14,"input",67),Me("ngModelChange",function(r){j(e);let o=x(2);return Pe(o.newOption[o.formField.selectOptions.valueExp],r)||(o.newOption[o.formField.selectOptions.valueExp]=r),U(r)}),v()(),_(15,"td")(16,"input",68),Me("ngModelChange",function(r){j(e);let o=x(2);return Pe(o.newOption[o.formField.selectOptions.displayExp],r)||(o.newOption[o.formField.selectOptions.displayExp]=r),U(r)}),v()(),_(17,"td")(18,"input",69),Me("ngModelChange",function(r){j(e);let o=x(2);return Pe(o.newOption.parent,r)||(o.newOption.parent=r),U(r)}),v()(),_(19,"td",70)(20,"button",71),$("click",function(){j(e);let r=x(2);return U(r.addOption())}),Q(21,"span",42),v()()(),G(22,s8,10,3,"tr",72),v()()}if(n&2){let e=x(2);w(4),Je(e.formField.selectOptions.valueExp),w(2),Je(e.formField.selectOptions.displayExp),w(8),b("name",e.formField.selectOptions.valueExp),xe("ngModel",e.newOption[e.formField.selectOptions.valueExp]),w(2),b("name",e.formField.selectOptions.displayExp),xe("ngModel",e.newOption[e.formField.selectOptions.displayExp]),w(2),xe("ngModel",e.newOption.parent),w(4),b("ngForOf",e.formField.selectOptions.options)}}function l8(n,t){if(n&1){let e=oe();_(0,"div",12)(1,"div",12)(2,"label",13),N(3,"Multiple"),v(),_(4,"div",34)(5,"input",55),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.multiple,r)||(o.formField.selectOptions.multiple=r),U(r)}),v(),_(6,"label",56),N(7,"Select tipo multicheck"),v()()(),_(8,"div",12)(9,"label",13),N(10,"Parent ID"),v(),_(11,"div",15)(12,"input",58),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.parent,r)||(o.formField.selectOptions.parent=r),U(r)}),v()()(),_(13,"div",12)(14,"label",13),N(15,"Display Expression "),_(16,"span",14),N(17,"Richiesto"),v()(),_(18,"div",15)(19,"input",59,7),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.displayExp,r)||(o.formField.selectOptions.displayExp=r),U(r)}),v()(),G(21,i8,2,0,"div",17),v(),_(22,"div",12)(23,"label",13),N(24,"Value Expression "),_(25,"span",14),N(26,"Richiesto"),v()(),_(27,"div",15)(28,"input",60,8),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.valueExp,r)||(o.formField.selectOptions.valueExp=r),U(r)}),v()(),G(30,r8,2,0,"div",17),v(),_(31,"div",61)(32,"div",12)(33,"label",13),N(34,"Remote dataSource"),v(),_(35,"div",34)(36,"input",62),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.remote,r)||(o.formField.selectOptions.remote=r),U(r)}),v(),_(37,"label",63),N(38,"Remote dataSource"),v()()()(),_(39,"div",12)(40,"label",13),N(41,"Api "),_(42,"span",14),N(43,"Richiesto"),v()(),_(44,"div",15)(45,"input",64,9),Me("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.api,r)||(o.formField.selectOptions.api=r),U(r)}),v()(),G(47,o8,2,0,"div",17),v(),_(48,"div",61),G(49,a8,23,8,"table",65),v()()}if(n&2){let e=Lt(20),i=Lt(29),r=Lt(46),o=x();w(5),xe("ngModel",o.formField.selectOptions.multiple),w(7),xe("ngModel",o.formField.selectOptions.parent),w(7),xe("ngModel",o.formField.selectOptions.displayExp),w(2),b("ngIf",e.invalid&&e.touched),w(7),xe("ngModel",o.formField.selectOptions.valueExp),w(2),b("ngIf",i.invalid&&i.touched),w(6),xe("ngModel",o.formField.selectOptions.remote),w(9),xe("ngModel",o.formField.selectOptions.api),b("disabled",!o.formField.selectOptions.remote),w(2),b("ngIf",r.invalid&&r.touched),w(2),b("ngIf",!(o.formField.selectOptions!=null&&o.formField.selectOptions.remote)&&(o.formField.selectOptions==null?null:o.formField.selectOptions.valueExp)&&(o.formField.selectOptions==null?null:o.formField.selectOptions.displayExp))}}var hN=(()=>{class n{constructor(){this.outPutProperties=new se,this.showSelectOption=!1,this.showFileOption=!1,this.showCheckBoxOption=!1,this.showFileBoxOption=!1,this.showHiddenBox=!1,this.newOption={},this.optionSelIndex=-1,this.remoteSelect=!1}ngOnInit(){this.showSelectOption=!1;let e;switch(this.formField.type){case"hiddenBox":this.showHiddenBox=!0,this.formField.typeInput="hidden";break;case"checkBox":if(this.showCheckBoxOption=!0,this.formField.typeInput="boolean",this.checkBoxOptions={haveLink:!1,hrefLink:"",hrefText:""},typeof this.formField.checkBoxOptions<"u"){let r=this.formField.checkBoxOptions;this.checkBoxOptions={haveLink:r.haveLink,hrefLink:r.hrefLink,hrefText:r.hrefText}}this.formField.checkBoxOptions=this.checkBoxOptions;break;case"fileBox":if(this.showFileBoxOption=!0,this.formField.typeInput="file",this.fileBoxOptions={maxWidth:0,maxheight:0,isbase64:!0,maxSize:10},typeof this.formField.fileBoxOptions<"u"){let r=this.formField.fileBoxOptions;this.fileBoxOptions={maxWidth:r.maxWidth,maxheight:r.maxheight,isbase64:r?.isbase64,maxSize:r?.maxSize}}this.formField.fileBoxOptions=this.fileBoxOptions;break;case"selectBox":this.formField.typeInput="selectBox",this.showSelectOption=!0,this.selectOptions={multiple:!1,displayExp:"",valueExp:"",options:[],parent:"",remote:!1,api:""},typeof this.formField.selectOptions<"u"&&(e=this.formField.selectOptions,this.selectOptions={multiple:e.multiple,displayExp:e.displayExp,valueExp:e.valueExp,options:e.options,parent:e.parent,remote:e.remote,api:e.api}),this.formField.selectOptions=this.selectOptions;break;default:break}}addOption(){if(this.formField.selectOptions.remote)return;let e=this.formField.selectOptions.valueExp,i=this.formField.selectOptions.displayExp;!this.newOption[e]||!this.newOption[i]||(this.selectOptions?.options&&(this.optionSelIndex>=0?this.selectOptions.options[this.optionSelIndex]=this.newOption:this.selectOptions.options.push(this.newOption)),this.formField.selectOptions&&(this.newOption={[this.formField.selectOptions.valueExp]:"",[this.formField.selectOptions?.displayExp]:"",parent:""}),this.optionSelIndex=-1)}onOptionClick(e){let i=this.formField.selectOptions.valueExp,r=this.formField.selectOptions.displayExp;this.newOption=e,this.formField.selectOptions?.options&&(this.optionSelIndex=this.formField.selectOptions?.options.findIndex(o=>o==e))}removeOption(e){this.selectOptions?.options&&this.selectOptions.options.splice(e,1)}saveProperties(e){if(!this.formPrsValidate(e))return;let r={name:"saveProperties",formField:this.formField};this.outPutProperties.emit(r)}closeProperties(e){if(e.valid)Ko("Sei sicuro di voler abbandonare?","Attenzione!",r=>{if(r){let o={name:"closeProperties",formField:this.formField};this.outPutProperties.emit(o)}});else{let r={name:"closeProperties",formField:this.formField};this.outPutProperties.emit(r)}}addValidation(e){e.validation.push({type:"",value:""})}formPrsValidate(e){return e.valid?this.showSelectOption&&this.formField.selectOptions&&!this.formField.selectOptions.remote&&this.formField.selectOptions.options?.length==0?(alert("Mancano i campi le options della select"),!1):!0:(alert("Mancano i campi obbligatori"),this.markFormGroupTouched(e),!1)}markFormGroupTouched(e){Object.keys(e.controls).forEach(i=>{e.control.get(i)?.markAsTouched({onlySelf:!0})})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-element"]],inputs:{formField:"formField"},outputs:{outPutProperties:"outPutProperties"},standalone:!0,features:[fe],decls:91,vars:23,consts:[["elementForm","ngForm"],["name","ngModel"],["typeInput","ngModel"],["label","ngModel"],["hrefLink","ngModel"],["hrefText","ngModel"],["maxWidth","ngModel"],["displayExp","ngModel"],["valueExp","ngModel"],["api","ngModel"],[1,"modal-body","form-container"],[1,""],[1,"row","mt-3","mb-3"],[1,"col-sm-3","col-form-label","font-medium"],[1,"badge","bg-secondary"],[1,"col-sm-9"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],["name","typeInput","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["value",""],["value","text"],["value","number"],["value","email"],["value","password"],["value","url"],["value","file",3,"selected"],["value","boolean",3,"selected"],["value","selectBox",3,"selected"],["value","hidden",3,"selected"],["type","text","name","label","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","placeholder",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","cssClass",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","htmlId",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","maxLength",1,"form-control",3,"ngModelChange","disabled","ngModel"],[1,"col-sm-9","form-check"],["id","required","type","checkbox","name","required",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","required",1,"form-check-label"],["class","row mt-3 mb-3",4,"ngIf"],["class","row mt-3 mb-3 ",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","ana-button",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"mdi","mdi-content-save-outline"],[1,"text-danger"],["id","funcButton","type","checkbox","name","funcButton",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","min",1,"col-sm-3","col-form-label","font-medium"],[1,"col-sm-9","form-control"],["id","min","type","number","name","min",1,"form-control",3,"ngModelChange","disabled","ngModel"],["type","number","name","max",1,"form-control",3,"ngModelChange","disabled","ngModel"],["id","hrefLink","name","hrefLink","type","checkbox",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","hrefLink",1,"form-check-label"],["id","hrefLink","name","hrefLink","type","url",1,"form-control",3,"ngModelChange","ngModel","required"],["id","hrefText","name","hrefText","type","text",1,"form-control",3,"ngModelChange","required","ngModel"],["id","maxWidth","name","maxWidth","type","number","required","",1,"form-control",3,"ngModelChange","ngModel"],["id","maxheight","name","maxheight","type","number",1,"form-control",3,"ngModelChange","ngModel"],["id","multiple","name","multiple","type","checkbox",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","multiple",1,"form-check-label"],["id","maxSize","name","maxSize","type","number",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","parent",1,"form-control",3,"ngModelChange","ngModel"],["type","text","required","","name","displayExp",1,"form-control",3,"ngModelChange","ngModel"],["type","text","required","","name","valueExp",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3","mb-3"],["id","remoted","name","remoted","type","checkbox",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","remoted",1,"form-check-label"],["type","text","required","","name","api",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","table table-sm ",4,"ngIf"],[1,"table","table-sm"],["type","text","placeholder","Nuovo Display",1,"form-control",3,"ngModelChange","name","ngModel"],["type","text","placeholder","Nuovo Value",1,"form-control",3,"ngModelChange","name","ngModel"],["type","text","name","parentT","placeholder","Nuovo Parent",1,"form-control",3,"ngModelChange","ngModel"],[1,"action-cell"],[1,"icon-button","btn","button-in-cell",3,"click"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(i,r){if(i&1){let o=oe();_(0,"div",10)(1,"form",null,0)(3,"div",11)(4,"div",12)(5,"label",13),N(6,"Nome campo "),_(7,"span",14),N(8,"Richiesto"),v()(),_(9,"div",15)(10,"input",16,1),Me("ngModelChange",function(a){return j(o),Pe(r.formField.name,a)||(r.formField.name=a),U(a)}),v()(),G(12,qz,2,0,"div",17),v(),_(13,"div",12)(14,"label",13),N(15,"Tipo di campo "),_(16,"span",14),N(17,"Richiesto"),v()(),_(18,"div",15)(19,"select",18,2),Me("ngModelChange",function(a){return j(o),Pe(r.formField.typeInput,a)||(r.formField.typeInput=a),U(a)}),_(21,"option",19),N(22,"Seleziona"),v(),_(23,"option",20),N(24,"Testo"),v(),_(25,"option",21),N(26,"Numerico"),v(),_(27,"option",22),N(28,"Email"),v(),_(29,"option",23),N(30,"Password"),v(),_(31,"option",24),N(32,"Url"),v(),_(33,"option",25),N(34,"file"),v(),_(35,"option",26),N(36,"Boolean"),v(),_(37,"option",27),N(38,"SelectBox"),v(),_(39,"option",28),N(40,"Nascosto/Hidden"),v()()(),G(41,Wz,2,0,"div",17),v(),_(42,"div",12)(43,"label",13),N(44,"Label "),_(45,"span",14),N(46,"Richiesto"),v()(),_(47,"div",15)(48,"input",29,3),Me("ngModelChange",function(a){return j(o),Pe(r.formField.label,a)||(r.formField.label=a),U(a)}),v()(),G(50,Kz,2,0,"div",17),v(),_(51,"div",12)(52,"label",13),N(53,"Placeholder"),v(),_(54,"div",15)(55,"input",30),Me("ngModelChange",function(a){return j(o),Pe(r.formField.placeholder,a)||(r.formField.placeholder=a),U(a)}),v()()(),_(56,"div",12)(57,"label",13),N(58,"CSS Class"),v(),_(59,"div",15)(60,"input",31),Me("ngModelChange",function(a){return j(o),Pe(r.formField.cssClass,a)||(r.formField.cssClass=a),U(a)}),v()()(),_(61,"div",12)(62,"label",13),N(63,"HTML ID"),v(),_(64,"div",15)(65,"input",32),Me("ngModelChange",function(a){return j(o),Pe(r.formField.htmlId,a)||(r.formField.htmlId=a),U(a)}),v()()(),_(66,"div",12)(67,"label",13),N(68,"Max Length"),v(),_(69,"div",15)(70,"input",33),Me("ngModelChange",function(a){return j(o),Pe(r.formField.maxLength,a)||(r.formField.maxLength=a),U(a)}),v()()(),_(71,"div",12)(72,"label",13),N(73,"Required"),v(),_(74,"div",34)(75,"input",35),Me("ngModelChange",function(a){return j(o),Pe(r.formField.required,a)||(r.formField.required=a),U(a)}),v(),_(76,"label",36),N(77," Campo Richiesto "),v()()(),G(78,Qz,7,1,"div",37)(79,Yz,5,2,"div",37)(80,Jz,5,2,"div",37),v(),G(81,e8,22,7,"div",38)(82,n8,25,5,"div",38)(83,l8,50,11,"div",38),v()(),_(84,"div",39)(85,"button",40),$("click",function(){j(o);let a=Lt(2);return U(r.closeProperties(a))}),Q(86,"span",41),N(87,"Chiudi"),v(),_(88,"button",40),$("click",function(){j(o);let a=Lt(2);return U(r.saveProperties(a))}),Q(89,"span",42),N(90,"Salva"),v()()}if(i&2){let o=Lt(11),s=Lt(49);w(10),xe("ngModel",r.formField.name),w(2),b("ngIf",o.invalid&&o.touched),w(7),xe("ngModel",r.formField.typeInput),b("disabled",r.showFileOption||r.showSelectOption||r.showHiddenBox),w(14),b("selected",r.showFileOption),w(2),b("selected",r.showCheckBoxOption),w(2),b("selected",r.showSelectOption),w(2),b("selected",r.showHiddenBox),w(2),b("ngIf",s.invalid&&s.touched),w(7),xe("ngModel",r.formField.label),w(2),b("ngIf",s.invalid&&s.touched),w(5),xe("ngModel",r.formField.placeholder),w(5),xe("ngModel",r.formField.cssClass),w(5),xe("ngModel",r.formField.htmlId),w(5),b("disabled",r.showFileOption),xe("ngModel",r.formField.maxLength),w(5),xe("ngModel",r.formField.required),w(3),b("ngIf",r.formField.type=="textBox"),w(),b("ngIf",r.formField.type=="textBox"&&r.formField.typeInput=="number"),w(),b("ngIf",r.formField.type=="textBox"&&r.formField.typeInput=="number"),w(),b("ngIf",r.showCheckBoxOption&&r.formField.checkBoxOptions),w(),b("ngIf",r.showFileBoxOption&&r.formField.fileBoxOptions),w(),b("ngIf",r.showSelectOption&&r.formField.selectOptions)}},dependencies:[be,lt,Ye,Cn,nc,ic,rc,Ci,O1,T1,Yo,qn,_r,Od,Jr,Ad,Jo],styles:[".disabled-el[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}"]})}}return n})();var c8=new re("angularfire2.functions.origin"),u8=new re("angularfire2.functions.region"),U1=new re("angularfire2.functions.use-emulator"),Rd=(()=>{class n{httpsCallable;constructor(e,i,r,o,s,a,l,u){let d=l,f=ce(void 0).pipe(Sn(o.outsideAngular),nt(()=>import("./chunk-UGZKZQLK.js")),ee(()=>Fs(e,r,i)),ee(m=>hl(`${m.name}.functions.${s||a}`,"AngularFireFunctions",m.name,()=>{let y;if(s&&a)throw new Error("REGION and ORIGIN can't be used at the same time.");return y=m.functions(s||a||void 0),d&&y.useEmulator(...d),y},[s,a,d])),Fa({bufferSize:1,refCount:!1}));return this.httpsCallable=(m,y)=>D=>Be(f).pipe(Sn(o.insideAngular),nt(T=>T.httpsCallable(m,y)(D)),ee(T=>T.data)),Bp(this,f,r)}static \u0275fac=function(i){return new(i||n)(K(So),K(Io,8),K(Fe),K(Ns),K(u8,8),K(c8,8),K(U1,8),K(Lr,8))};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),fN=(()=>{class n{constructor(){on.registerVersion("angularfire",_i.full,"fn-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=mt({type:n});static \u0275inj=pt({providers:[Rd]})}return n})();var Ei=(()=>{class n{constructor(){this.api=Hn.BASE_API_URL,this.isLoginUser=Qe(!1),this.firestore=k(la),this.angularFireAuth=k(Fu),this.httpClient=k(Li),this.auth=Oc(k(Eo)),this.functions=k(Rd),this.apiFire="https://us-central1-comemivesto-5e5f9.cloudfunctions.net/api"}get httpOptions(){return{headers:new Vi().set("Authorization","Bearer "+this.token).set("Content-Type","application/x-www-form-urlencoded; charset=UTF-8").set("Content-Type","application/json; charset=utf-8"),params:new mi}}set token(e){sessionStorage.setItem("token",e)}get token(){return sessionStorage.getItem("token")??""}get InfoUtenteConnesso(){let e=sessionStorage.getItem("utenteConnesso")??"";return JSON.parse(e)}getUsers(){let e=`${this.apiFire}/user/all-users`,i=this.httpOptions;return this.httpClient.get(e,i).pipe(ee(o=>o))}isLoggedUser(){return this.isLoginUser.set(!!this.token),!!this.token}isExistsUsers(){let e=Hn.BASE_API_URL+"Account/GetUserInfo",i=this.httpOptions;return this.httpClient.get(e,i)}loginUser(e){return E(this,null,function*(){let i=`${this.apiFire}/user/login`,r=this.httpOptions;try{if(yield this.authFirebase(e)){let s=this.httpClient.post(i,e,r),a=yield Nn(s);if(a)return this.token=a,this.isLoginUser.set(!0),!0}}catch(o){return console.error(o),!1}return!1})}LogOut(e){return E(this,null,function*(){let i=`${this.apiFire}/user/logOuth/${e}`,r=this.httpOptions,o=this.httpClient.get(i,r);return(yield Nn(o)).success?(this.clearSessionStorage(),this.isLoginUser.set(!1),!0):!1})}clearSessionStorage(){if(sessionStorage.length>0)for(let i in sessionStorage)sessionStorage.removeItem(i)}authFirebase(e){return E(this,null,function*(){try{let i=yield this.angularFireAuth.signInWithEmailAndPassword(e.email,e.password);return sessionStorage.setItem("utenteConnesso",JSON.stringify(i.user)),!0}catch(i){return console.error("Errore durante l'autenticazione:",i),!1}})}sendPasswordFirebase(e){return E(this,null,function*(){try{return yield r_(this.auth,e),!0}catch{return!1}})}disabledUsersFirebase(e){return E(this,null,function*(){let i=`${this.apiFire}/users/disable/${e}`,r={uid:e};try{let o=this.httpClient.post(i,r),s=yield Nn(o);return console.log(s),!0}catch(o){return console.error("Errore nella disabilitazione dell'utente:",o),!1}})}deleteUsersFirebase(e){return E(this,null,function*(){let i=`${this.apiFire}/users/delete/${e}`,r={uid:e};try{let o=this.httpClient.delete(i);if(yield Nn(o)){let a=this.firestore.collection("users").ref;a=a.where("uid","==",e);try{let u=(yield a.get()).docs.map(d=>d.ref.delete());return yield Promise.all(u),this.getUsers(),!0}catch(l){return console.error("Error deleting documents:",l),!1}}return!0}catch(o){return console.error("Errore nell'eliminazione dell'utente:",o),!1}})}RecuperaPassword(e){return E(this,null,function*(){let i=Hn.BASE_API_URL+"Account/RecuperaPassword?username="+e,r=this.httpOptions,o=this.httpClient.get(i,r);return yield Nn(o)})}getUserProfile(e){let i=`${this.apiFire}/user/user-profile`;e&&(i=`${i}/${e}`);let r=this.httpOptions;return this.httpClient.get(i,r).pipe(ee(s=>s))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ig=(()=>{class n{constructor(e,i){this.httpClient=e,this.activatedRoute=i,this.token="",this.userService=k(Ei),this.apiUrl=Hn.BASE_API_URL}get httpOptionCall(){return this.userService.httpOptions}getElenco(e,i){let r=`${this.apiUrl}${e}`;i&&(r=`${r}${i}`);let o=this.httpOptionCall;return this.httpClient.get(r,o).pipe(a=>a)}getValue(e,i,r){return E(this,null,function*(){let o="";typeof i<"u"&&(o=i);let s=r||"",a;e.includes("?")||e.includes("/")||String(i).includes("/")||String(i).includes("?")&&o?a=e+o:o?a=e+"/"+o:a=e;try{let l=Hn.BASE_API_URL+a+s,u=this.httpOptionCall,d=this.httpClient.get(l,u);return yield Nn(d)}catch(l){l.status}})}actionPut(e,i,r=!0){return E(this,null,function*(){let o=r?"/"+i.id:"",s=Hn.BASE_API_URL+e+o,a=this.httpOptionCall,l=this.httpClient.put(s,i,a);return yield Nn(l)})}actionInsert(e,i,r=!1){return E(this,null,function*(){let o;o=Hn.BASE_API_URL;let s=o+e,a=this.httpOptionCall,l=this.httpClient.post(s,i,a);return yield Nn(l)})}actionDelete(e,i){let r=Hn.BASE_API_URL+e+"/"+i,o=this.httpOptionCall,s=this.httpClient.delete(r,o);return Nn(s)}static{this.\u0275fac=function(i){return new(i||n)(K(Li),K(vn))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function d8(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1&&i===0?1:r===0&&e!==0&&e%1e6===0&&i===0||!(r>=0&&r<=5)?4:5}var pN=["it",[["m.","p."],["AM","PM"],void 0],void 0,[["D","L","M","M","G","V","S"],["dom","lun","mar","mer","gio","ven","sab"],["domenica","luned\xEC","marted\xEC","mercoled\xEC","gioved\xEC","venerd\xEC","sabato"],["dom","lun","mar","mer","gio","ven","sab"]],void 0,[["G","F","M","A","M","G","L","A","S","O","N","D"],["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]],void 0,[["aC","dC"],["a.C.","d.C."],["avanti Cristo","dopo Cristo"]],1,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{BRL:[void 0,"R$"],BYN:[void 0,"Br"],EGP:[void 0,"\xA3E"],HKD:[void 0,"$"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NOK:[void 0,"NKr"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VND:[void 0,"\u20AB"]},"ltr",d8];var h8=["dynamicContent"],mN=n=>({"summary-item":n});function f8(n,t){if(n&1){let e=oe();_(0,"span",11),$("click",function(r){j(e);let o=x().$implicit,s=x(3);return U(s.actionCell(r,o.nameEvent))}),Q(1,"span"),N(2),v()}if(n&2){let e=x().$implicit,i=x(3);b("ngStyle",i.styleData),w(),GT("btn-icon ",e.icon,""),w(),ke(" ",e.text," ")}}function p8(n,t){if(n&1&&(_(0,"li"),G(1,f8,3,5,"span",10),v()),n&2){let e=t.$implicit;w(),b("ngIf",e.visible)}}function m8(n,t){if(n&1&&(_(0,"div",8)(1,"ul"),G(2,p8,2,1,"li",9),v()()),n&2){let e=x(2);w(2),b("ngForOf",e.editorButtons)}}function g8(n,t){if(n&1){let e=oe();je(0),_(1,"div",5)(2,"button",6),$("click",function(r){j(e);let o=x();return U(o.showDialog(r))}),Q(3,"span",7),v()(),G(4,m8,3,1,"ng-template",null,1,fi),Ue()}if(n&2){let e=x();w(2),b("ngStyle",e.styleData)}}function _8(n,t){if(n&1){let e=oe();_(0,"span",13),$("click",function(r){j(e);let o=x(2);return U(o.clickTd(r))}),v()}if(n&2){let e=x(2);b("ngStyle",e.styleData)("ngClass",Xt(3,mN,e.showSummaryText))("innerHTML",e.highlightMatches(e.staticData),Pf)}}function y8(n,t){if(n&1&&(je(0),G(1,_8,1,5,"span",12),Ue()),n&2){let e=x(),i=Lt(4);w(),b("ngIf",!e.showBooleanFlag&&!e.isMockDataLoading)("ngIfElse",i)}}function v8(n,t){if(n&1&&Q(0,"span",14),n&2){let e=x();b("ngStyle",e.styleData)("ngClass",Xt(2,mN,e.showSummaryText))}}function w8(n,t){if(n&1){let e=oe();_(0,"div",16),$("mouseenter",function(){j(e);let r=x(2);return U(r.restShow())})("mouseleave",function(){j(e);let r=x(2);return U(r.hideTooltip())}),Q(1,"img",17),v()}if(n&2){let e=x(2);b("ngStyle",e.tooltipStyle),w(),b("src",e.toolTipImg,Ln)}}function b8(n,t){if(n&1&&G(0,w8,2,2,"div",15),n&2){let e=x();b("ngIf",e.colType=="campoImg")}}bx(pN);var gN=(()=>{class n{constructor(){this.overlayService=k(yr),this.dataRow=[],this.searchText=null,this.showSummaryText=!1,this.emitClick=new se,this.emitText=new se,this.btnActionClick=new se,this.isMockDataLoading=!1,this.editorButtons=[],this.styleData={},this.notEditing=!1,this.showBooleanFlag=!1,this.summaryTextHtml="",this.anagraficaService=k(Ig),this.isTooltipVisible=!1}ngAfterViewInit(){let e=this.colProperty.colAlignment?this.colProperty.colAlignment:"left";switch(this.styleData={"text-align":e},this.staticData=this.renderHtmlColumn(this.value,this.colProperty.format),this.colProperty.labelVisible=!1,this.dataField=this.colProperty.dataField,this.colType){case"editorButtons":console.log(this.colProperty),this.editorButtons=this.colProperty.editorbuttons;break;case"removeButtons":break;default:break}}renderDataColumn(e,i,r){return E(this,null,function*(){if(i.valueExpr&&i.valueExpr!="object"){let o=i.dataSource;if(!this.value||typeof i.static<"u"&&i.static)return;Array.isArray(e)?this.staticData=e:yield this.getElementValue(o,i,this.value),this.remoteData&&(i.displayExpr?(this.displayExpr=i.displayExpr,this.staticData=this.remoteData[this.displayExpr]):(this.displayExpr=i.valueExpr,this.staticData=this.remoteData[this.displayExpr]),this.staticData=this.renderHtmlColumn(this.staticData,""))}else if(i.valueExpr=="object"){if(Array.isArray(e)){let o=i.displayExpr;this.staticData=e.map(s=>s[o])}}else this.staticData=this.value})}getElementValue(e,i,r){return E(this,null,function*(){yield this.anagraficaService.getValue(e,r,"").then(s=>(s.items&&(s=s.items),this.remoteData=s,this.remoteData))})}renderHtmlColumn(e,i){let r=this.colType,o=e;switch(r){case"campo":o=this.defaultRender(e,i);break;case"campoNumber":o=this.numberRender(e,i);break;case"campoLista":o=this.listaRender(e);break;case"campoDateTime":case"campoData":o=this.dateRender(e,i);break;case"campoImg":this.toolTipImg=e,o=`<img src="${e}" class="cell-img" >`;break;case"campoButton":let s=this.colProperty.button;console.log("buttonInfo",s),o=`<button class="btn "><span class="${s.icon}"></span></button>`;break;default:o=this.defaultRender(e,i)}return o}defaultRender(e,i){if(this.showSummaryText&&e&&(this.summaryTextHtml+='<span style="padding-right:5px">Tot: </span>'),/(\d{4})([\/-])(\d{1,2})\2(\d{1,2})/.test(e))if(i){let s=new Date(e);return lu(s,i,"en-US")}else{let s=new Date(e);return lu(s,"dd/MM/yyyy","en-US")}if(typeof e=="boolean"){let s=this.colProperty.dataOptions;typeof s.trueText>"u"||s.falseText=="undefined"?this.showBooleanFlag=!0:e?e=s.trueText:e=s.falseText}if(typeof e=="number")if(this.styleData={"text-align":"right"},i)if(i.includes("#")){let s=e.toFixed(3).split("."),[a,l]=s,u=a.replace(/\B(?=(\d{3})+(?!\d))/g,"."),d=i.split(".")[1].length;return`${u},${l.slice(0,d)}`}else return cu(e,"it-IT","1.0-3");else return cu(e,"it-IT","1.0-3");return e}numberRender(e,i){if(this.styleData={"text-align":"right"},typeof e=="string"&&(e=parseFloat(e)),i)if(i.includes("#")){let r=e.toFixed(3).split("."),[o,s]=r,a=o.replace(/\B(?=(\d{3})+(?!\d))/g,"."),l=i.split(".")[1].length;return`${a},${s.slice(0,l)}`}else return cu(e,"it-IT","1.0-3");else return cu(e,"it-IT","1.0-3")}dateRender(e,i="dd/MM/yyyy"){let r;if(typeof e=="string"||typeof e=="number"){let o=/(\d{4})([\/-])(\d{1,2})\2(\d{1,2})/,s=/(\d{1,2})([\/-])(\d{1,2})\2(\d{4})/;if(typeof e=="string"&&o.test(e))r=new Date(e);else if(typeof e=="string"&&s.test(e)){let a=e.split(/[-\/]/),l=parseInt(a[0],10),u=parseInt(a[1],10)-1,d=parseInt(a[2],10);r=new Date(d,u,l)}else r=new Date(e)}else if(e instanceof Date)r=e;else return"Invalid date format";return isNaN(r.getTime())?"Invalid date":lu(r,i,"en-US")}listaRender(e){let i=e,r=this.colProperty.customizedOptions;if(r.options&&r.options.length>0){let o=r.valueExp,s=r.displayExp;i=r.options.filter(l=>l[o]==e)[0][s]}return i}clickTd(e){this.colType=="campoImg"&&this.showTooltip(e),e.value=this.staticData,this.emitClick.emit(e)}actionCell(e,i){let r={action:i,rowIndex:this.rowIndex,cancel:!1};this.btnActionClick.emit(r),r.cancel||this.overlayService.closeOverlay()}showTooltip(e){e.stopImmediatePropagation(),e.stopPropagation(),this.openOverlay(e)}showDialog(e){return E(this,null,function*(){e.stopImmediatePropagation(),e.stopPropagation(),this.openOverlay(e)})}openOverlay(e){let r=e.currentTarget.getBoundingClientRect(),o={top:r.bottom+window.scrollY,left:r.left+window.scrollX},s=window.innerWidth,a=423;o.left+a>s&&(o.left=s-a-10);let l={position:o,contentTemplate:this.dynamicContent,showBgOverlay:!1,index:this.rowIndex};this.overlayService.openOverlay(l)}restShow(){this.isTooltipVisible=!0}hideTooltip(){this.isTooltipVisible=!1}onValueChangeCheckBox(e){this.staticData=e.value}highlightMatches(e){if(!e)return"";if(!this.searchText)return this.summaryTextHtml+e;let i=new RegExp(this.searchText,"gi");return typeof e=="string"?e.replace(i,r=>`<span class="highlight">${r}</span>`):""}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-td-item"]],viewQuery:function(i,r){if(i&1&&At(h8,5),i&2){let o;Et(o=Dt())&&(r.dynamicContent=o.first)}},inputs:{colProperty:"colProperty",colType:"colType",value:"value",rowIndex:"rowIndex",dataRow:"dataRow",searchText:"searchText",showSummaryText:"showSummaryText",isMockDataLoading:"isMockDataLoading"},outputs:{emitClick:"emitClick",emitText:"emitText",btnActionClick:"btnActionClick"},standalone:!0,features:[fe],decls:7,vars:2,consts:[["skeletonTemplate",""],["dynamicContent",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"editor-buttons-content"],[1,"button-in-cell",3,"click","ngStyle"],[1,"mdi","mdi-dots-vertical"],[1,"editor-buttons-menu"],[4,"ngFor","ngForOf"],["class","",3,"ngStyle","click",4,"ngIf"],[1,"",3,"click","ngStyle"],["class","contet-data ",3,"ngStyle","ngClass","innerHTML","click",4,"ngIf","ngIfElse"],[1,"contet-data",3,"click","ngStyle","ngClass","innerHTML"],[1,"contet-data","loadingSkeleton",3,"ngStyle","ngClass"],["class","tooltip-custom",3,"ngStyle","mouseenter","mouseleave",4,"ngIf"],[1,"tooltip-custom",3,"mouseenter","mouseleave","ngStyle"],["alt","Immagine Tooltip",3,"src"]],template:function(i,r){i&1&&(je(0,2),G(1,g8,6,1,"ng-container",3)(2,y8,2,2,"ng-container",4),Ue(),G(3,v8,1,4,"ng-template",null,0,fi)(5,b8,1,1,"ng-template",null,1,fi)),i&2&&(b("ngSwitch",r.colType),w(),b("ngSwitchCase","editorButtons"))},dependencies:[be,Ot,lt,Ye,$n,nl,ap,lp],styles:[".contet-data{width:100%;display:block;padding:1rem 1.25rem;position:relative;word-break:break-all;word-wrap:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}  .contet-data .cell-img{object-fit:cover;max-height:27px}  .highlight{background-color:var(--blueDevextreme);color:#fff}.summary-item[_ngcontent-%COMP%]{color:#99a1a8;font-weight:700;text-align:right!important}.loadingSkeleton[_ngcontent-%COMP%]{background:#eee;background:linear-gradient(110deg,#ececec 8%,#f5f5f5 18%,#ececec 33%);border-radius:5px;background-size:150% 100%;width:100%;height:100%;animation:.9s _ngcontent-%COMP%_shine linear infinite}@keyframes _ngcontent-%COMP%_shine{to{background-position-x:-150%}}.tooltip-custom[_ngcontent-%COMP%]{display:inline-block;padding:5px;background-color:#000c;color:#fff;border-radius:5px;z-index:1000}.editor-buttons-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;padding:1rem 0rem}.editor-buttons-content[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]{position:relative;background:transparent;color:var(--blueSoft)}.editor-buttons-menu[_ngcontent-%COMP%]{border-radius:.375rem;border-color:transparent;background-color:#fff}.editor-buttons-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:.1rem;margin:.3rem}.editor-buttons-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.5rem}.editor-buttons-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:1rem;font-size:1rem;margin-right:.5rem}.editor-buttons-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:var(--table-th-bg)}"]})}}return n})();var C8=["dataGridWrapper"],E8=["riga"],D8=["tbody"],ac=(n,t,e)=>({"width.px":n,"min-width.px":t,"max-width.px":e}),S8=(n,t)=>({"selected-row":n,"state-hover-detail":t}),I8=n=>({"width.px":n});function T8(n,t){n&1&&Q(0,"div",17)}function x8(n,t){if(n&1&&Q(0,"col",19),n&2){let e=t.$implicit;hi(e.class),b("span",e.span)}}function M8(n,t){if(n&1&&(_(0,"colgroup"),G(1,x8,1,3,"col",18),v()),n&2){let e=x();w(),b("ngForOf",e.colsGroup)}}function A8(n,t){if(n&1&&(_(0,"th",22),N(1),v()),n&2){let e=t.$implicit;b("colSpan",e.span),w(),ke(" ",e.caption," ")}}function O8(n,t){if(n&1&&(_(0,"tr",20),G(1,A8,2,2,"th",21),v()),n&2){let e=x();w(),b("ngForOf",e.colsGroup)}}function R8(n,t){if(n&1){let e=oe();_(0,"div",26)(1,"input",27,2),$("click",function(){j(e);let r=x(3);return U(r.clickToSelectAllRows())}),v()()}if(n&2){let e=x(3);w(),b("checked",e.rowSelectedAll)}}function P8(n,t){if(n&1&&G(0,R8,3,1,"div",25),n&2){let e=x(2);b("ngIf",e.isSelIconMultipleVisible)}}function N8(n,t){n&1&&(je(0),Q(1,"i",34),Ue())}function F8(n,t){n&1&&(je(0),Q(1,"i",35),Ue())}function k8(n,t){n&1&&(je(0),Q(1,"i",35),Ue())}function V8(n,t){if(n&1&&(je(0)(1,31),G(2,N8,2,0,"ng-container",32)(3,F8,2,0,"ng-container",32)(4,k8,2,0,"ng-container",33),Ue()()),n&2){let e=x(4);w(),b("ngSwitch",e.sortDirection),w(),b("ngSwitchCase","asc"),w(),b("ngSwitchCase","desc")}}function L8(n,t){n&1&&(je(0),Q(1,"i",35),Ue())}function B8(n,t){if(n&1){let e=oe();_(0,"span",29),$("click",function(){j(e);let r=x(2).$implicit,o=x();return U(o.sortColumn(r.dataField))}),N(1),G(2,V8,5,3,"ng-container",30)(3,L8,2,0,"ng-template",null,3,fi),v()}if(n&2){let e=Lt(4),i=x(2).$implicit,r=x();w(),ke(" ",i.caption," "),w(),b("ngIf",r.sortedColumn===i.dataField)("ngIfElse",e)}}function j8(n,t){if(n&1&&G(0,B8,5,3,"span",28),n&2){let e=x().$implicit;b("ngIf",e.type!="editorButtons")}}function U8(n,t){if(n&1&&(_(0,"th",23),G(1,P8,1,1,"ng-template",24)(2,j8,1,1,"ng-template",null,1,fi),v()),n&2){let e=t.$implicit,i=Lt(3),r=x();b("align",e.colAlignment)("ngStyle",rr(4,ac,e.colWidth,e.colWidth,e.colWidth)),w(),b("ngIf",e.type=="selection"&&r.isSelIconMultipleVisible)("ngIfElse",i)}}function $8(n,t){if(n&1&&(_(0,"tbody",36)(1,"tr",37)(2,"td",38)(3,"p",39),N(4),v()()()()),n&2){let e=x();b("ngStyle",e.bodyStyle),w(2),b("colSpan",e.colsHeader.length)("width",e.tableWidth)("ngStyle",rr(5,ac,e.tableWidth,e.tableWidth,e.tableWidth)),w(2),Je(e.textEmpty)}}function G8(n,t){if(n&1&&(je(0),_(1,"tr",45)(2,"td",46),Q(3,"app-td-item",47),v()(),Ue()),n&2){let e=x(),i=e.$implicit,r=e.index,o=x(2);w(2),b("colSpan",o.groupIndexCol.colSpan),w(),b("colProperty",o.groupIndexCol)("rowIndex",r)("value",i[o.groupIndexCol.dataField])}}function H8(n,t){if(n&1){let e=oe();_(0,"td",48),$("click",function(r){let o=j(e),s=o.$implicit,a=o.index,l=x().index,u=x(2);return U(u.tdClick(r,s,a,l))}),je(1),_(2,"app-td-item",49),$("btnActionClick",function(r){j(e);let o=x(3);return U(o.btnActionClick(r))}),v(),Ue(),v()}if(n&2){let e=t.$implicit,i=x(),r=i.$implicit,o=i.index,s=x(2);hi(e.class),b("id",e.dataField+"_"+o)("colSpan",e.colSpan)("align","center")("title",r[e.dataField]?r[e.dataField]:"")("ngStyle",rr(12,ac,e.colWidth,e.colWidth,e.colWidth)),w(2),b("colProperty",e)("searchText",s.searchText)("rowIndex",o)("value",r[e.dataField])("colType",e.type)}}function z8(n,t){if(n&1&&(je(0),_(1,"caption"),N(2),v(),Ue()),n&2){let e=t.$implicit;w(2),ke("",e.caption," ")}}function q8(n,t){if(n&1&&(_(0,"table",55)(1,"tr",37)(2,"td",22)(3,"p",39),N(4,"Nessun dato da mostrare"),v()()()()),n&2){let e=x(4);b("width",e.tableWidthDetail),w(2),b("colSpan",e.colsDetail.length)}}function W8(n,t){if(n&1&&(_(0,"th",23)(1,"span"),N(2),v()()),n&2){let e=t.$implicit;b("align",e.captionAlign)("ngStyle",rr(3,ac,e.colWidth,e.colWidth,e.colWidth)),w(2),Je(e.caption)}}function K8(n,t){if(n&1){let e=oe();_(0,"div",62),$("click",function(r){j(e);let o=x(2).index,s=x(4),a=s.$implicit,l=s.index,u=x(2);return U(u.selectRow(r,o,a,l))}),Q(1,"i",63),v()}if(n&2){let e=x(6).$implicit;b("id","selection-"+e.dataField)}}function Q8(n,t){if(n&1&&(je(0),G(1,K8,2,1,"div",61),Ue()),n&2){let e=x(7);w(),b("ngIf",e.isSelIconDetailVisible)}}function Y8(n,t){if(n&1&&(je(0),Q(1,"app-td-item",47),Ue()),n&2){let e=x(),i=e.$implicit,r=e.index,o=x().$implicit;w(),b("colProperty",i)("rowIndex",r)("value",o[i.dataField])}}function J8(n,t){if(n&1&&(_(0,"td",60),G(1,Q8,2,1,"ng-container",9)(2,Y8,2,3,"ng-container",9),v()),n&2){let e=t.$implicit;hi(e.class),b("width",e.colWidth)("colSpan",e.colSpan)("align",e.colAlignment)("ngStyle",rr(8,ac,e.colWidth,e.colWidth,e.colWidth)),w(),b("ngIf",e.type=="selection-detail"),w(),b("ngIf",e.type=="data-detail")}}function Z8(n,t){if(n&1){let e=oe();_(0,"tr",58),$("click",function(r){let o=j(e),s=o.$implicit,a=o.index,l=x(3).index,u=x(2);return U(u.selectRowDetail(r,a,s,l))}),G(1,J8,3,12,"td",59),v()}if(n&2){let e=t.index,i=x(3).index,r=x(2);b("ngClass",ir(2,S8,r.rowSelectedDetail[e],r.isSelectedSubRow(i,e))),w(),b("ngForOf",r.colsDetail)}}function X8(n,t){if(n&1&&(_(0,"table",56)(1,"thead")(2,"tr",20),G(3,W8,3,7,"th",12),v()(),G(4,Z8,2,5,"tr",57),v()),n&2){let e=x(2).index,i=x(2);b("width",i.tableWidthDetail),w(3),b("ngForOf",i.colsDetail),w(),b("ngForOf",i.colsRowDetail[e])}}function e9(n,t){if(n&1&&(_(0,"tr",50)(1,"td",51)(2,"div",52),G(3,z8,3,1,"ng-container",41)(4,q8,5,2,"table",53)(5,X8,5,3,"table",54),v()()()),n&2){let e=x(3);w(),b("colSpan",e.colsHeader.length),w(2),b("ngForOf",e.colsGroupCaption),w(),b("ngIf",e.showNullDataDetail),w(),b("ngIf",!e.showNullDataDetail)}}function t9(n,t){if(n&1){let e=oe();je(0),G(1,G8,4,4,"ng-container",9),_(2,"tr",42,5),$("dblclick",function(r){let o=j(e),s=o.$implicit,a=o.index,l=x(2);return U(l.dblRowClick(r,a,s))})("click",function(r){let o=j(e),s=o.$implicit,a=o.index,l=x(2);return U(l.selectRow(r,a,s))})("mouseenter",function(){let r=j(e).index,o=x(2);return U(o.setStateHover(r))})("mouseleave",function(r){let o=j(e).index,s=Lt(3),a=x(2);return U(a.leaveStateHover(r,s,o))}),G(4,H8,3,16,"td",43),v(),G(5,e9,6,4,"tr",44),Ue()}if(n&2){let e=t.$implicit,i=t.index,r=x(2);w(),b("ngIf",r.groupIndexCol&&(i===0||e[r.groupIndexCol.dataField]!==r.rowsData()[i-1][r.groupIndexCol.dataField])),w(),b("ngClass",r.updateRowClasses(i)),w(2),b("ngForOf",r.colsHeader),w(),b("ngIf",r.showDetailRow[i])}}function n9(n,t){if(n&1&&Q(0,"td",66),n&2){let e=t.$implicit;hi(e.class),b("id",e.dataField)("width",e.colWidth)("colSpan",e.colSpan)("align",e.colAlignment)("ngStyle",rr(8,ac,e.colWidth,e.colWidth,e.colWidth))("width",e.colWidth)}}function i9(n,t){if(n&1&&(je(0),_(1,"tr",64),G(2,n9,1,12,"td",65),v(),Ue()),n&2){let e=x(2);w(),b("ngStyle",e.emptyRowStyleClass),w(),b("ngForOf",e.colsHeader)}}function r9(n,t){if(n&1&&(_(0,"tbody",40,4)(2,"app-custom-scrollbar"),G(3,t9,6,4,"ng-container",41)(4,i9,3,2,"ng-container",9),v()()),n&2){let e=x();b("ngStyle",e.bodyStyle),w(3),b("ngForOf",e.rowsData()),w(),b("ngIf",e.showEmptyRow)}}function o9(n,t){if(n&1&&(_(0,"td")(1,"div",68),Q(2,"app-td-item",69),v()()),n&2){let e=t.$implicit,i=x(2);w(),b("ngStyle",Xt(4,I8,e.width)),w(),b("colProperty",e)("showSummaryText",!0)("value",i.valueSumm[e.dataField])}}function s9(n,t){if(n&1&&(_(0,"tfoot",67)(1,"tr"),G(2,o9,3,6,"td",41),v()()),n&2){let e=x();w(2),b("ngForOf",e.colsHeader)}}function a9(n,t){n&1&&Q(0,"div",70)}var lc=(()=>{class n{constructor(){this.queryString="",this.queryStringInEditor="",this.isKeyID=!0,this.remoteOperation=!1,this.dataSource=Af([]),this.rowsData=Qe([]),this.overrideDataSource=null,this.selectedData=[],this.tableHeight=540,this.isEditable=!1,this.modeEdit="row",this.selectionRowMode="single",this.showFilter=!1,this.showToolbarTop=!1,this.showToolbarBottom=!1,this.rowAlternate=!0,this.isEditableNewRow=!0,this.isEditableEditRow=!0,this.isEditableDeleteRow=!0,this.isSearchable=!0,this.searchType="",this.detailOptions={isRemote:!1,service:"",api:"",isEditable:!1,colonne:[],costantValue:[],queryString:"",groupDataField:""},this.justRowExpanded=!1,this.toolbarButtonsBottomLeft=[],this.toolbarButtonsBottomRight=[],this.toolbarButtonsTopLeft=[],this.toolbarButtonsTopRight=[],this.tabIndex=800,this.showFooterSummary=!1,this.emittendSelectionRow=new se,this.emittendDblRowClick=new se,this.emittendGridEvent=new se,this.emittendStartEdit=new se,this.emittendButtonExit=new se,this.emittendCellValueChange=new se,this.emittendToolbarClick=new se,this.emittendBttonCellClick=new se,this.continuousEditing=!1,this.showT=!1,this.colsHeader=[],this.colsGroup=[],this.colsDetail=[],this.rowSelected=[],this.selectedRowIndex=0,this.rowSelectedDetail=[!1],this.selectedSubRowIndex=-1,this.rowIsDisable=[],this.showNullData=!1,this.textEmpty="...",this.showNullDataDetail=!1,this.showDetailRow=[!1],this.haveDetail=!1,this.colsRowDetail=[],this.colsGroupCaption=[],this.currentLastRowHeight=0,this.lastRowOffsetHeight=0,this.bodyHeight=200,this.colsGroupShow=!1,this.isSelIconMultipleVisible=!1,this.groupIndexCol=null,this.groupedData=null,this.isSelIconDetailVisible=!1,this.isOddRow=!0,this.showEmptyRow=!1,this.pageSize=20,this.currentPage=0,this.totalRecords=0,this.isLoading=!1,this.isHovered=[!1],this.isHoveredDetatil=[!1],this.rowcustomclass=[],this.checkQueryStringError=!1,this.validationObject={},this.inEditState=!1,this.latestScrollTopPosition=0,this.enableTfoot=!1,this.valueSumm=[],this.rowSelectedAll=!1,this.showEditorCellByRow=!1,this.anagraficaService=k(Ig),this.overrideService=k(yr),this.sortDirection="asc",this.latestSkipLoaded=0,xs(()=>{this.dataSource()?.length>0&&this.renderGrid()},{allowSignalWrites:!0})}handleKeyDown(e){let i=document.getElementById(this.idTable),r=document.activeElement;(e.code=="Enter"||e.code=="NumpadEnter")&&setTimeout(()=>{},300),e.code=="NumpadAdd"&&setTimeout(()=>{this.continuousEditing&&this.addRow()}),e.code=="Escape"&&(e.stopPropagation(),e.preventDefault())}ngAfterViewInit(){let r=this.getBaseRemInPixels(),o=this.convertRemToPixels(1.25,r);if(console.log(`1.25rem in pixels: ${o}px`),!this.tableWidth)if(this.dataGridWrapper)this.tableWidth=this.dataGridWrapper.nativeElement.getBoundingClientRect().width-o-10;else{let s=document.getElementById("dataGridWrapper");s&&(this.tableWidth=s.offsetWidth-o-10)}this.tableWrapWidth=this.tableWidth,this.idTable||Rn("Manca ID devo aggiornare","Errore!"),typeof this.dataJson=="string"&&(this.dataJson=JSON.parse(this.dataJson))}getBaseRemInPixels(){let e=getComputedStyle(document.documentElement).fontSize;return parseFloat(e)}convertRemToPixels(e,i){return e*i}renderGrid(){return E(this,null,function*(){this.textEmpty="...",this.enableTfoot=!1,this.showFooterSummary&&(this.enableTfoot=!0,this.valueSumm=[]),this.renderToolBarGrid(this.showToolbarTop,this.showToolbarBottom),this.remoteOperation?(yield this.buildAndTestQueryString())&&(yield this.loadRemoteRecords()):(this.rowsData.set(this.dataSource()),this.totalRecords=this.rowsData().length),this.selectRowByData();let e,i=typeof this.colonne>"u"?[]:this.colonne;this.service&&i.length==0||(typeof this.colonne.find(a=>a.itemType)>"u"?e=[{itemType:"group",colSpan:this.colonne.length,caption:"",groupDataField:"",data:this.colonne}]:e=this.colonne),yield this.buildHeaderColumns(e);let r=e.filter(s=>s.itemType=="dettaglio");yield this.builDetailGrid(r,r),yield this.resizeCols(),yield this.setStyleBody(),this.enableTfoot&&this.calcSommaryCells();let o={name:"gridHasInitialized",dataSource:this.rowsData(),compnent:this,colonne:this.colsHeader};this.emittendGridEvent.emit(o)})}renderToolBarGrid(e,i){try{if(this.showToolbarBottom,this.buttonSXToolbar=[],this.buttonDXToolbar=[],e){this.showToolbarTop=e,this.buttonDXToolbar=[{id:"addRow",name:"Nuovo",text:"Nuovo",icon:"icon-plus-circled",disabled:!1,visible:this.isEditableNewRow,widget:"button"}],this.buttonSXToolbar=[{id:"searchable",name:"searchable",text:"Cerca",icon:"icon-cerca-barra",disabled:!1,visible:this.isSearchable,widget:"textBox",width:300}],typeof this.toolbarButtonsTop<"u"&&this.toolbarButtonsTop.forEach(o=>{typeof o.position<"u"?o.position=="left"?this.buttonSXToolbar.unshift(o):o.position=="right"&&this.buttonDXToolbar.unshift(o):this.buttonDXToolbar.unshift(o)});let r=this.tableHeight;this.tableHeightWrapper>0&&(r=this.tableHeightWrapper),this.tableHeightWrapper=r+26}i&&(this.showToolbarBottom=!0)}catch{}}buildHeaderColumns(e){this.colsGroup=[],this.colsHeader=[],this.colsDetail=[];let i=1;return this.selectionRowMode=="single"&&this.colsGroup.push({span:"0",caption:null,class:"single",style:"background-color: #D6EEEE"}),this.selectionRowMode=="multiple"&&(this.colsGroup.push({span:"0",caption:null,class:"nultiple",style:"background-color: #D6EEEE"}),this.isSelIconMultipleVisible=!0,this.cellSelectWidth=30,this.colsHeader.unshift({type:"selection",id:"selection",caption:"",colWidth:this.cellSelectWidth,colCaption:void 0,allowFiltering:void 0,dataField:"",labelAlignment:void 0,edit:void 0,groupDataField:void 0})),e.forEach(r=>{r.caption&&r.colSpan&&r.itemType=="group"&&(this.colsGroupShow=!0,this.colsGroup.push({span:r.colSpan,caption:r.caption,class:r.class,style:"background-color: #D6EEEE"})),r.data.forEach(o=>{i++;let s;if(typeof o.colVisible<"u"&&!o.colVisible||o.type=="empty"||o.type=="campoDesc")return;if(o.type=="campoButton"){this.colsHeader.push({type:"campoButton",search:!1,id:o.dataField,caption:o.caption,colWidth:o.colWidth?o.colWidth:o.colWidth="auto",width:o.colWidth,class:o.class,dataField:o.dataField,colSpan:o.colSpan,colAlignment:o.colAlignment,format:o.format,isEditable:!1,edit:!1,editorType:o.editorType,customizedOptions:s,validation:o.validation?o.validation:[],min:o.min,max:o.max,maxLength:o.maxLength,tabIndex:i,button:o.button,labelAlignment:void 0,groupDataField:void 0,colCaption:void 0,allowFiltering:void 0});return}let a;if(typeof o.dynamic<"u"&&(a="dynamic",s=o.dynamic,s.queryString)){let f=s.queryString;for(let m in this.dataJson)f.includes(m)&&(f=f.replace("$"+m,this.dataJson[m]));o.dynamic.queryString=f,s.queryString=f}typeof o.lista<"u"&&(a="lista",s=o.lista);let l=!0;if(typeof o.allowEditing<"u"&&(l=o.allowEditing),typeof o.colWidth<"u"){let f=o.colWidth;o.colWidth=f}else if(o.width){let f=o.width;typeof f=="string"&&f.includes("px")&&(f=f.replace("px","")),o.colWidth=f}else o.colWidth="auto";if(typeof o.groupIndex<"u"){this.groupIndexCol={customizedOptions:s,colSpan:o.colSpan,id:o.dataField,caption:o.caption,colWidth:o.colWidth?o.colWidth:o.colWidth="auto",class:o.class,dataField:o.dataField,format:o.format,dataOptions:o,min:o.min,max:o.max,maxLength:o.maxLength,tabIndex:i};return}let u=typeof o.showInSummary<"u"?o.showInSummary:!1,d=o.caption;typeof o.colCaption<"u"&&o.colCaption&&(d=o.colCaption),this.colsHeader.push({type:o.type,search:typeof this.showFilter<"u"?this.showFilter:o.allowFiltering,id:o.dataField,caption:d,colWidth:o.colWidth?Number(o.colWidth):o.colWidth="auto",width:o.colWidth,class:o.class,dataField:o.dataField,colSpan:o.colSpan,colAlignment:o.colAlignment,format:o.format,isEditable:l,editorType:o.editorType,customizedOptions:s,validation:o.validation?o.validation:[],min:o.min,max:o.max,maxLength:o.maxLength,tabIndex:i,showInSummary:u,colCaption:void 0,allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0}),this.valueSumm[o.dataField]=null})}),this.colsHeader.push({type:"editorButtons",id:"editorButtons",caption:"",search:!1,colWidth:40,class:null,isEditable:this.isEditable,edit:!1,labelAlignment:void 0,groupDataField:void 0,colCaption:void 0,allowFiltering:void 0,dataField:"",editorbuttons:[{id:"edit",nameEvent:"onEditEvent",text:"Modifica",icon:"mdi mdi-pencil-outline",disabled:!1,visible:this.isEditableEditRow,cssClass:null,widget:"button",position:"left"},{id:"delete",nameEvent:"onDeleteEvent",text:"Elimina",icon:"mdi mdi-trash-can-outline",disabled:!1,visible:this.isEditableDeleteRow,cssClass:null,widget:"button",position:"left"}]}),Promise.resolve(!0)}builDetailGrid(e,i){return E(this,null,function*(){let r=[],o="detail-grid";e.length>0&&(r=e,o=e[0].groupDataField),this.tableWidth&&(this.tableWidthDetail=this.tableWidth-90),!(!this.detailOptions||(this.detailOptions.service&&(r=this.formservice.getService(this.detailOptions.service),r=r.filter(a=>a.itemType!=null)),typeof this.detailOptions.colonne<"u"&&this.detailOptions.colonne.length>0&&(typeof this.detailOptions.colonne.find(l=>l.itemType)>"u"?r=[{itemType:"group",colSpan:this.detailOptions.colonne.length,caption:"",groupDataField:o,data:this.detailOptions.colonne}]:r=this.detailOptions.colonne),r.length==0)||(this.haveDetail=!0,this.colsHeader.findIndex(a=>a.type=="detail")>=0))&&(this.colsHeader.unshift({type:"detail",id:"detail",caption:"",search:!1,colWidth:"30",class:"detailCol",groupDataField:o,labelAlignment:void 0,edit:void 0,colCaption:void 0,allowFiltering:void 0,dataField:""}),this.colsGroupCaption=[],r.forEach(a=>{this.detailOptions.isRemote||(this.colsGroupCaption.push({span:a.colSpan,caption:a.caption,class:a.class,style:"background-color: #D6EEEE"}),this.colsGroupShow=!0,this.colsGroup.unshift({span:"1",caption:"",class:a.class+" dettaglio"})),a.data.forEach(l=>{typeof l.colVisible<"u"&&!l.colVisible||this.colsDetail.push({type:"data-detail",id:l.dataField,caption:l.caption,colWidth:l.colWidth,class:l.class,dataField:l.dataField,colSpan:l.colSpan,captionAlign:l.labelAlignment,align:l.colAlignment,format:l.format})})}),this.selectionRowMode=="detail"&&(this.isSelIconDetailVisible=!0,this.cellSelectWidth=30,this.colsDetail.unshift({type:"selection-detail",id:"selection-detail",caption:"",search:!1,colWidth:this.cellSelectWidth,class:null,dataField:null,colSpan:null,captionAlign:null,align:null,format:null,isEditable:!1,edit:!1,editorType:null,customizedOption:null,min:null,max:null,maxLength:null})),this.justRowExpanded&&this.rowsData().forEach((a,l)=>{for(let u in a)u==o&&(this.showDetailRow[l]=!0,this.colsRowDetail[l]=a[o],this.collapse(null,a,l,o))}))})}resizeCols(e){return E(this,null,function*(){let i=this.tableWrapWidth;e||(e=this.colsHeader),e=e.map(D=>(D.colWidth||(D.colCaption?D.colWidth=D.colCaption.length:D.caption?D.colWidth=D.caption.length:D.colWidth="auto"),D));let r=e.reduce((D,T)=>D+Number(T.colWidth),0),o=["icon","selection","editorButtons","removeButtons","detail","campoDesc","empty"],a=e.filter(D=>o.some(T=>T==D.type)).reduce((D,T)=>D+T.colWidth,0),l=e.filter(D=>!o.some(T=>T==D.type)),u=l.reduce((D,T)=>{if(T.colWidth!="auto")return D+Number(T.colWidth)},0),m=(i-u-a)/l.length;for(let D=0;D<l.length;D++)if(l[D].colWidth!="auto"){let T=Number(l[D].colWidth)+m,R=e.findIndex(q=>q.dataField==l[D].dataField);e[R].colWidth=T}let y=e.reduce((D,T)=>{if(T.colWidth!="auto")return D+Number(T.colWidth)},0);console.log("dddd",y)})}setCellProperty(e){let i=[];for(let r in e){let o=this.colsHeader.filter(s=>s.dataField==r);o.length>0&&(i=Ee(Y({},i),{[r]:o[0]}))}return i}onScroll(e){return E(this,null,function*(){})}isScrollingNearBottom(e){let i=e.target,r=e.target.offsetHeight-1,o=document.getElementById(this.idTable),a=(o.children.item(0).offsetHeight-1)*this.dataSource.length;return i.scrollTop>0&&i.scrollTop>=a-r-10&&i.scrollTop>=this.latestScrollTopPosition&&this.dataSource.length<=this.totalRecords?(this.latestScrollTopPosition=i.scrollTop,o.scrollTo(0,i.scrollTop-10),!0):!1}selectRowByData(){this.selectedData&&this.selectedData.length>0&&this.selectedData.forEach(e=>{this.rowSelected[this.rowsData().indexOf(e)]=!0})}alternateRowColor(e,i){i&&(this.isOddRow=!this.isOddRow)}calcSommaryCells(){this.colsHeader.forEach(e=>{this.calcolaSomma(e)})}setStyleBody(){let e=this.rowsData().length,i=27,r=this.tableHeight,o=Math.floor(r/i),s=this.tableWrapWidth;return this.bodyHeight=r,this.bodyStyle={display:"block","border-top":"1px solid #e8eaeb"},this.theadStyle={display:"block"},this.colsGroupShow&&(this.tableStyle={"width.px":s,"height.px":this.tableHeight,"overflow-y":"clip","table-layout":"auto",display:"block"},this.bodyStyle.display="unset",this.bodyStyle["overflow-y"]="unset"),Promise.resolve(!0)}loadRemoteRecords(){try{this.anagraficaService.getElenco(this.api,this.queryString).subscribe(e=>(this.dataSource=e,this.rowsData.set(e),e.totalCount&&(this.totalRecords=e.totalCount),Promise.resolve(!0)))}catch{return Promise.resolve(!1)}finally{return Promise.resolve(!0)}}buildAndTestQueryString(){if(this.queryString!=""){let e=this.queryString;if(this.queryString.includes("$")){for(let i in this.dataJson)if(i&&e.includes(i)){let r=new RegExp("\\$"+i+"\\b","g");if(!this.dataJson[i])return Promise.resolve(!1);e=e.replace(r,this.dataJson[i])}return this.queryString=e,Promise.resolve(!0)}}return Promise.resolve(!0)}addRow(){return E(this,null,function*(){let e;this.rowsData().length==0&&(this.showNullData=!1),this.colsHeader.forEach(r=>{if(r.dataField){let o=null;r.editorType=="dxNumberBox"&&(o=0),e=Ee(Y({},e),{[r.dataField]:o})}}),typeof e<"u"&&(e.isNewRow=!0,this.rowsData().push(e));let i=this.dataSource.length-1;this.rowSelected=[!1],setTimeout(()=>{this.rowSelected[i]=!0},300)})}deleteRow(e){return e==0&&this.dataSource().length==0&&this.rowsData.update(i=>i=[]),this.rowsData.update(i=>this.dataSource().splice(e,1)),this.rowsData()}btnActionClick(e){switch(console.log("btnActionClick",e),e.action){case"onEditEvent":this.startEdit(e.rowIndex,e);break;case"onDeleteEvent":this.removeRowData(e.rowIndex,e);break;default:break}}startEdit(e,i){let r={infoEvent:i,rowIndex:e,data:this.rowsData()[e],name:"buttonEditRowEvent",idTable:this.idTable,service:this.service,cancel:!1,component:this};this.emittendStartEdit.emit(r),r.cancel}removeRowData(e,i){return E(this,null,function*(){Ko("Sei certo di voler eliminare questo record?","Attenzione!",r=>{if(!r)return;let o={name:"delRows",rowIndex:e,rowData:this.rowsData()[e]};if(this.emittendGridEvent.emit(o),!this.remoteOperation)this.deleteRow(e);else if(r){let s=this.rowsData()[e].id;this.anagraficaService.actionDelete(this.api,s).then(a=>{this.renderGrid()})}})})}emitButtonDynamic(e,i){switch(e.name){case"emitButtonDynamic":break;case"emitButtonType2":break;case"beforeEmitButtonDynamic":e.dataSource=this.dataSource,e.dataGridComponent=this,e.rowIndex=i,this.emittendGridEvent.emit(e);break;default:break}}saveAndExit(){let e=[];this.rowSelected.forEach((r,o)=>{r&&e.push(this.rowsData()[o])});let i={component:this,dataSelected:e,name:"onRowMultipleSelectionChange"};this.emittendSelectionRow.emit(i)}setStateHover(e){this.isHovered[e]=!0}leaveStateHover(e,i,r){this.isHovered[r]=!1}selectRow(e,i,r,o){let s=i-1,a={isRowFather:!1,isRowDetail:!1},l={event:e,rowData:r,component:this,dataSource:this.dataSource,infoRows:a,rowIndex:i,name:"onRowOnlyClick",cancel:!1};if(this.emittendSelectionRow.emit(l),l.cancel||!this.selectionRowMode)return;if(this.selectionRowMode=="detail"){this.collapse(e,r,i);return}if(this.selectionRowMode=="multiple"){this.selectRowMultiple(e,i,r);return}if(this.showDetailRow[o]){a.isRowDetail=!0,this.rowSelectedDetail=[!1],this.rowSelectedDetail[i]?this.rowSelectedDetail[i]=!1:this.rowSelectedDetail[i]=!0;let d={event:e,data:r,fatherData:this.rowsData()[o],infoRows:a,rowIndex:i,name:"onRowSelectionChange"};this.emittendSelectionRow.emit(d);return}this.rowSelected=[],this.rowSelected[i]?this.rowSelected[i]=!1:this.rowSelected[i]=!0;let u={event:e,data:r,infoRows:a,rowIndex:i,name:"onRowSelectionChange"};this.emittendSelectionRow.emit(u)}dblRowClick(e,i,r,o){let s=i-1,a={event:e,rowData:r,component:this,dataSource:this.dataSource,rowIndex:i,name:"onDblRowClick",cancel:!1};this.emittendDblRowClick.emit(a)}selectRowDetail(e,i,r,o){let s=i-1,a={isRowFather:!1,isRowDetail:!1};a.isRowDetail=!0,this.showDetailRow[o]&&(this.rowSelectedDetail[i]=!1),this.rowSelectedDetail[i]?this.rowSelectedDetail[i]=!1:this.rowSelectedDetail[i]=!0;let l={event:e,data:r,fatherData:this.rowsData()[o],infoRows:a,rowIndex:i,name:"onRowSelectionChange"};this.emittendSelectionRow.emit(l)}clickToSelectRowMultiple(e,i,r){this.rowSelected[i]?this.rowSelected[i]=!1:this.rowSelected[i]=!0,e.stopPropagation()}selectRowMultiple(e,i,r){this.rowSelected[i]?this.rowSelected[i]=!1:this.rowSelected[i]=!0,e&&(e.stopPropagation(),e.preventDefault());let s={event:e,data:r,rowIndex:i,component:this,dataSource:this.dataSource,rowsSelected:this.rowSelected[i],name:"onRowMultipleSelection"};this.emittendSelectionRow.emit(s)}clickToSelectAllRows(){this.rowSelectedAll=!1;let e=this.rowsData().length;if(e>0){if(this.rowSelected.length-1==e){this.rowSelected=[!1],this.rowSelectedAll=!1;return}for(let i=0;i<=e;i++)this.rowSelected[i]=!0;this.rowSelectedAll=!0}}removeSelAndExit(e){}chooseRow(e,i,r){this.showDetailRow[i]||this.selectRow(e,i,r)}tdClick(e,i,r,o){switch(i.type){case"campoButton":e.stopPropagation(),this.buttonClick(e,i.button,i,o);break;default:break}console.log("colInfo-->",i)}updateRowClasses(e){return{"-disabled":this.rowIsDisable[e],"selected-row":this.rowSelected[e],"state-hover":this.isHovered[e],"select-have-detail":this.isHoveredDetatil[e],"custom-class":this.rowcustomclass[e]}}collapse(e,i,r,o){var s=document.querySelectorAll(".dx-datagrid-group-opened");[].forEach.call(s,u=>{u.className=u.className.replace("dx-datagrid-group-opened","dx-datagrid-group-closed")});let a=document.querySelector(".-data-grid-wrapper ");a&&a.classList.add("scroll-bottom");let l=document.getElementById(this.idTable);if(l){let u=l.getElementsByTagName("tbody")[0].rows[r];e&&(e.stopPropagation(),e.preventDefault(),u=e.currentTarget);let d=u,f;if(d.classList.contains("dx-datagrid-group-opened")||d.classList.contains("dx-datagrid-group-closed"))f=d;else{if(d.getElementsByClassName("detailCol").length==0)return;f=d.getElementsByClassName("detailCol")[0].children[0]}if(this.showDetailRow[r]){this.showDetailRow=[!1],f.classList.remove("dx-datagrid-group-opened"),f.classList.add("dx-datagrid-group-closed");return}this.showDetailRow=[!1];let m=this.colsGroupDetail;if(this.detailOptions.isRemote){this.renderGridDetailData(this.detailOptions,i,r),f.classList.remove("dx-datagrid-group-closed"),f.classList.add("dx-datagrid-group-opened");return}else{o||(o=this.colsHeader.filter(T=>T.type=="detail")[0].groupDataField),this.showDetailRow[r]=!0,this.colsRowDetail[r]=this.rowsData()[r][o],this.colsRowDetail[r].length==0&&(this.showNullDataDetail=!0),this.showDetailRow[r]=!0;let y={cancel:!1,data:i,rowIndex:r,expandedData:this.rowsData()[r][o],name:"onRowExpanded"};this.emittendGridEvent.emit(y),f.classList.remove("dx-datagrid-group-closed"),f.classList.add("dx-datagrid-group-opened")}}}renderGridDetailData(e,i,r){return E(this,null,function*(){let o;this.showNullDataDetail=!1;let s="",a=e.api,l=e.costantValue,u;if(e.costantValue&&e.costantValue.forEach(m=>{let y=m.key,D="";typeof i[m.value]<"u"?D=i[m.value]:D=m.value,u=Ee(Y({},u),{[y]:D})}),e.queryString)if(e.queryString.includes("$")){let f=e.queryString;for(let m in i)if(f.includes(m)){var d=new RegExp("\\$"+m+"\\b","g");f.match(d)&&(f=f.replace(d,i[m]))}for(let m in u)if(f.includes(m)){var d=new RegExp("\\$"+m+"\\b","g");f.match(d)&&(f=f.replace(d,u[m]))}s=f}else s=e.queryString;this.anagraficaService.getElenco(a,s).subscribe(f=>{f.items?f=f.items:f=f,this.colsRowDetail[r]=f,this.colsRowDetail.length==0&&(this.showNullDataDetail=!0),this.showDetailRow[r]=!0;let m={cancel:!1,data:i,rowIndex:r,expandedData:this.colsRowDetail[r],name:"onRowExpanded"};this.emittendGridEvent.emit(m)})})}calcolaSomma(e){if(!e.dataField||!e.showInSummary)return 0;let i=e.dataField,r=this.rowsData().reduce((o,s)=>o+s[i],0);return this.valueSumm[i]=r}formatDate(e,i="EN"){let r=/(\d{4})([\/-])(\d{1,2})\2(\d{1,2})/,o=/(\d{1,2})([\/-])(\d{1,2})\2(\d{4})/,s=e.match(r),a=e.match(o);if(!s&&!a)return"";a&&(e.includes("-")?e=`${e.split("-")[2]}-${e.split("-")[1]}-${e.split("-")[0]}`:e.includes("/")&&(e=`${e.split("/")[2]}-${e.split("/")[1]}-${e.split("/")[0]}`));let l=new Date(e),u=l.getFullYear(),d=(l.getMonth()+1).toString().padStart(2,"0"),f=l.getDate().toString().padStart(2,"0"),m="";return i=="EN"&&(m=`${u}-${d}-${f}`),i=="it"&&(m=`${f}-${d}-${u} `),m}builderOdataSearchString(e,i,r){if(!this.searchText)return"";switch(i.toLowerCase()){case"text":case"string":return typeof r>"u"||r==="contains"?`(contains(tolower(${e}),'${this.searchText.toLowerCase()}'))`:`(startswith(tolower(${e}),'${this.searchText.toLowerCase()}'))`;case"number":let o=Number(this.searchText);return isNaN(o)?"":`(${e} eq ${o})`;case"date":case"dateTime":let s=this.formatDate(this.searchText);return typeof s<"u"?`(${e} eq ${s})`:"";case"boolean":return"";default:return typeof r>"u"||r==="contains"?`(contains(tolower(${e}),'${this.searchText.toLowerCase()}'))`:`(startswith(tolower(${e}),'${this.searchText.toLowerCase()}'))`}}searchData(e){return E(this,null,function*(){})}toolbarValueChanged(e){return E(this,null,function*(){console.log("toolbarValueChanged",e);let i=e.value,r=e.event;this.searchText=i,this.textEmpty="Sto cercando...",this.searchData(e)})}buttonEmitted(e){switch(console.log("buttonEmitted-->",e),e){case"addRow":let i={infoEventButtons:e,name:"buttonNewRowEvent",idTable:this.idTable,service:this.service,cancel:!1,component:this};this.emittendToolbarClick.emit(i),this.emittendStartEdit.emit(i),i.cancel||this.addRow();break;case 22:this.saveAndExit();break;case 23:let r={event:e,cancel:!1,name:"annullaSelezione"};this.emittendButtonExit.emit(r);break;case 0:let o={event:e,cancel:!1,name:"annullaSelezione"};this.emittendButtonExit.emit(o);break;case 21:let a={infoEventButtons:{event:e,cancel:!1,name:"newButtonClick"},name:"toolbarButtonClick"};this.emittendButtonExit.emit(a);break;default:let l={infoEventButtons:e,name:"toolbarButtonClick"};this.emittendToolbarClick.emit(l);break}}isSelectedSubRow(e,i){return this.selectedRowIndex===e&&this.selectedSubRowIndex===i}handleKeyboardEvents(e){e.key==="ArrowDown"?this.navigateByKeyboard("ArrowDown"):e.key==="ArrowUp"&&this.navigateByKeyboard("ArrowUp")}navigateByKeyboard(e){switch(this.isHoveredDetatil=[!1],e){case"ArrowDown":this.showDetailRow[this.selectedRowIndex]&&this.selectedSubRowIndex<this.colsRowDetail[this.selectedRowIndex].length-1?this.selectedSubRowIndex++:this.selectedRowIndex<this.dataSource.length-1&&(this.selectedRowIndex++,this.selectedSubRowIndex=-1);break;case"ArrowUp":this.selectedSubRowIndex===-1||this.selectedRowIndex>0?(this.selectedSubRowIndex==-1&&this.selectedRowIndex>0&&this.selectedRowIndex--,this.selectedSubRowIndex=-1):this.selectedSubRowIndex>0&&this.selectedSubRowIndex--,this.selectedRowIndex==0&&(this.selectedSubRowIndex=0);break;default:break}let i,r={isRowFather:!1,isRowDetail:!1},o=0;if(this.selectionRowMode=="detail"?(i=this.colsRowDetail[this.selectedRowIndex][this.selectedSubRowIndex],r.isRowDetail=!0,o=this.selectedSubRowIndex):this.selectionRowMode=="single"&&(i=this.rowsData()[this.selectedRowIndex],r.isRowDetail=!1,o=this.selectedSubRowIndex),Object.keys(i).length>0){let s={event:null,data:i,infoRows:r,rowIndex:o,keyPressed:e,name:"onRowSelectionChange"};this.emittendSelectionRow.emit(s)}}buttonClick(e,i,r,o){let s=i;s.dataSource=this.dataSource,s.rowData=this.rowsData()[o],s.col=r,s.rowIndex=o,s.component=this,s.event=e,this.emittendBttonCellClick.emit(s),e.stopPropagation(),e.preventDefault()}resetPageInfo(){return E(this,null,function*(){this.showNullData=!0,this.latestSkipLoaded=0,this.latestScrollTopPosition=0,this.currentPage=0})}refresh(){this.currentPage>=1&&(this.currentPage=0),this.colsHeader=[],this.rowsData.update(e=>e=[]),this.rowSelected=[!1],this.rowSelectedDetail=[!1],this.rowIsDisable=[!1],this.resetPageInfo(),this.renderGrid()}hideColumn(e){this.colsHeader.splice(e,1),this.resizeCols(this.colsHeader)}sortColumn(e){this.sortedColumn===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortedColumn=e,this.sortDirection="asc"),this.rowsData().sort((i,r)=>{let o=i[e],s=r[e];return o<s?this.sortDirection==="asc"?-1:1:o>s?this.sortDirection==="asc"?1:-1:0})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-data-grid"]],viewQuery:function(i,r){if(i&1&&(At(C8,5),At(E8,5),At(D8,5)),i&2){let o;Et(o=Dt())&&(r.dataGridWrapper=o.first),Et(o=Dt())&&(r.righe=o),Et(o=Dt())&&(r.tbody=o)}},hostBindings:function(i,r){i&1&&$("scroll",function(s){return r.handleKeyDown(s)},!1,gy)("keydown",function(s){return r.handleKeyDown(s)},!1,gy)},inputs:{idTable:"idTable",service:"service",api:"api",queryString:"queryString",queryStringInEditor:"queryStringInEditor",isKeyID:"isKeyID",remoteOperation:"remoteOperation",dataSource:[bt.SignalBased,"dataSource"],overrideDataSource:"overrideDataSource",dataJson:"dataJson",selectedData:"selectedData",tableHeight:"tableHeight",tableWidth:"tableWidth",colonne:"colonne",isEditable:"isEditable",modeEdit:"modeEdit",selectionRowMode:"selectionRowMode",showFilter:"showFilter",showToolbarTop:"showToolbarTop",showToolbarBottom:"showToolbarBottom",rowAlternate:"rowAlternate",isEditableNewRow:"isEditableNewRow",isEditableEditRow:"isEditableEditRow",isEditableDeleteRow:"isEditableDeleteRow",isSearchable:"isSearchable",searchType:"searchType",toolbarButtonsBottom:"toolbarButtonsBottom",toolbarButtonsTop:"toolbarButtonsTop",detailOptions:"detailOptions",justRowExpanded:"justRowExpanded",toolbarButtonsBottomLeft:"toolbarButtonsBottomLeft",toolbarButtonsBottomRight:"toolbarButtonsBottomRight",toolbarButtonsTopLeft:"toolbarButtonsTopLeft",toolbarButtonsTopRight:"toolbarButtonsTopRight",tabIndex:"tabIndex",showFooterSummary:"showFooterSummary",continuousEditing:"continuousEditing"},outputs:{emittendSelectionRow:"emittendSelectionRow",emittendDblRowClick:"emittendDblRowClick",emittendGridEvent:"emittendGridEvent",emittendStartEdit:"emittendStartEdit",emittendButtonExit:"emittendButtonExit",emittendCellValueChange:"emittendCellValueChange",emittendToolbarClick:"emittendToolbarClick",emittendBttonCellClick:"emittendBttonCellClick"},standalone:!0,features:[fe],decls:13,vars:11,consts:[["tableRef",""],["normalCaption",""],["checkBoxSelectAll",""],["templateName",""],["tbody",""],["riga",""],["id","dataGridWrapper",1,"-data-grid-wrapper","table-responsive"],["class","-data-grid-toolbar",4,"ngIf"],[1,"table","-data-grid","grid-line",3,"keydown","id","ngStyle"],[4,"ngIf"],[3,"ngStyle"],["class","no-events",4,"ngIf"],["scope","col",3,"align","ngStyle",4,"ngFor","ngForOf"],["class","t-body",3,"ngStyle",4,"ngIf"],["class","scroll-bottom","id","scrollBarCustom",3,"ngStyle",4,"ngIf"],["class","tableFooter",4,"ngIf"],["class","-data-grid-toolbar-bottom",4,"ngIf"],[1,"-data-grid-toolbar"],[3,"span","class",4,"ngFor","ngForOf"],[3,"span"],[1,"no-events"],[3,"colSpan",4,"ngFor","ngForOf"],[3,"colSpan"],["scope","col",3,"align","ngStyle"],[3,"ngIf","ngIfElse"],["name","selRowMAll","title","seleziona tutte le righe","icon","","class","editor-content-checkbox-table","style","display: inline-block;vertical-align: middle;line-height: 1em;margin-bottom: 0!important;text-align: center;",4,"ngIf"],["name","selRowMAll","title","seleziona tutte le righe","icon","",1,"editor-content-checkbox-table",2,"display","inline-block","vertical-align","middle","line-height","1em","margin-bottom","0!important","text-align","center"],["type","checkbox",1,"checkbox-input",3,"click","checked"],[3,"click",4,"ngIf"],[3,"click"],[4,"ngIf","ngIfElse"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"mdi","mdi-menu-up"],[1,"mdi","mdi-menu-down"],[1,"t-body",3,"ngStyle"],[1,"row-no-data"],[3,"colSpan","width","ngStyle"],[2,"text-align","center"],["id","scrollBarCustom",1,"scroll-bottom",3,"ngStyle"],[4,"ngFor","ngForOf"],[3,"dblclick","click","mouseenter","mouseleave","ngClass"],[3,"id","class","colSpan","align","title","ngStyle","click",4,"ngFor","ngForOf"],["class","no-event-hover",4,"ngIf"],[1,"group-row"],[2,"border-left","0",3,"colSpan"],[3,"colProperty","rowIndex","value"],[3,"click","id","colSpan","align","title","ngStyle"],[3,"btnActionClick","colProperty","searchText","rowIndex","value","colType"],[1,"no-event-hover"],[2,"padding","0",3,"colSpan"],[1,"col-sm-offset-1","p-2"],["class","detail--data-grid -data-grid grid-line",3,"width",4,"ngIf"],["class","detail--data-grid  grid-line",3,"width",4,"ngIf"],[1,"detail--data-grid","-data-grid","grid-line",3,"width"],[1,"detail--data-grid","grid-line",3,"width"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"click","ngClass"],[3,"width","class","colSpan","align","ngStyle",4,"ngFor","ngForOf"],[3,"width","colSpan","align","ngStyle"],["class","selection-icon","name","selRow","hint","importa dati","icon","",3,"id","click",4,"ngIf"],["name","selRow","hint","importa dati","icon","",1,"selection-icon",3,"click","id"],[1,"glyphicon","mdi","mdi","mdi-export"],[1,"empty-row",3,"ngStyle"],[3,"id","width","class","colSpan","align","ngStyle",4,"ngFor","ngForOf"],[3,"id","width","colSpan","align","ngStyle"],[1,"tableFooter"],[1,"sumWrap",3,"ngStyle"],[3,"colProperty","showSummaryText","value"],[1,"-data-grid-toolbar-bottom"]],template:function(i,r){if(i&1){let o=oe();_(0,"div",6),G(1,T8,1,0,"div",7),_(2,"table",8,0),$("keydown",function(a){return j(o),U(r.handleKeyboardEvents(a))}),G(4,M8,2,1,"colgroup",9),_(5,"thead",10),G(6,O8,2,1,"tr",11),_(7,"tr"),G(8,U8,4,8,"th",12),v()(),G(9,$8,5,9,"tbody",13)(10,r9,5,3,"tbody",14)(11,s9,3,1,"tfoot",15),v()(),G(12,a9,1,0,"div",16)}i&2&&(w(),b("ngIf",r.showToolbarTop),w(),b("id",r.idTable)("ngStyle",r.tableStyle),w(2),b("ngIf",r.colsGroupShow),w(),b("ngStyle",r.theadStyle),w(),b("ngIf",r.colsGroupShow),w(2),b("ngForOf",r.colsHeader),w(),b("ngIf",r.showNullData),w(),b("ngIf",!r.showNullData),w(),b("ngIf",r.enableTfoot),w(),b("ngIf",r.showToolbarBottom))},dependencies:[be,Ot,lt,Ye,$n,nl,ap,lp,gN,sc],styles:['.-data-grid-wrapper[_ngcontent-%COMP%]{border:1px solid var(--table-th-bg)}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{box-sizing:content-box;border-collapse:collapse;border-spacing:0}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--blueSoft);padding:0;background-color:var(--table-th-bg);font-weight:500;border-top:1px solid var(--border_color);border-bottom:1px solid var(--border_color)}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;display:block;padding:1rem;word-break:break-all;word-wrap:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (max-width: 1024px){.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:auto!important;max-width:unset!important;min-width:unset!important}}@media (max-width: 1024px){.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:auto!important;max-width:unset!important;min-width:unset!important}}.-data-grid[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.state-hover[_ngcontent-%COMP%]{background-color:var(--bg-grey);cursor:pointer}.-data-grid[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.alternate[_ngcontent-%COMP%]{background:var(--bg-grey)}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%], .-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]   .texteditor-input[_ngcontent-%COMP%]{border:none;height:27px;line-height:27px}.no-border[_ngcontent-%COMP%]{border:none!important}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{padding-left:3px;z-index:1;position:absolute;top:0;left:0;cursor:pointer;margin-left:-2px;margin-top:-2px;height:100%;overflow:visible}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:5px 3px 3px;color:#7ab8eb;font-size:14px}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{font:14px/1 DXIcons;content:"\\f027";font-weight:300}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e8eaeb}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr.no-events[_ngcontent-%COMP%]{pointer-events:none!important}.detail--data-grid[_ngcontent-%COMP%]   tr.state-hover-detail[_ngcontent-%COMP%]{background-color:#edf0f2!important;cursor:pointer}.-data-grid[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.select-have-detail[_ngcontent-%COMP%]{background:var(--secondary)!important}.-data-grid[_ngcontent-%COMP%]   tr.row-no-data[_ngcontent-%COMP%]{pointer-events:none!important}.-data-grid[_ngcontent-%COMP%]   tr.row-no-data[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:0px solid #e8eaeb;border-right:0px solid #e8eaeb;border-bottom:0px solid #e8eaeb}.-data-grid[_ngcontent-%COMP%]   tr.selected-row[_ngcontent-%COMP%]{background:var(--secondary)!important}.-data-grid[_ngcontent-%COMP%]   tr.group-row[_ngcontent-%COMP%]{color:var(--primary);background-color:#fafafa;pointer-events:none;font-weight:600}  .-data-grid tr.group-row td .contet-data{font-weight:600!important;padding-left:10px}  .-data-grid tr.group-row td .contet-data:before{content:"-";display:inline-block}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{box-sizing:content-box;border-collapse:collapse;border-spacing:0}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top;text-align:left;border-bottom:dashed 1px #e8eaeb;border-spacing:0}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{text-align:center;display:block;width:fit-content;margin:auto}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--blueSoft);display:block;box-sizing:content-box;padding:0}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px;color:var(--blueSoft)}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}.-data-grid[_ngcontent-%COMP%]   tr.empty-row[_ngcontent-%COMP%]{pointer-events:none}.-data-grid[_ngcontent-%COMP%]   tr.empty-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px dashed #e8eaeb;border-right:1px dashed #e8eaeb;border-bottom:1px dashed #e8eaeb}@media (max-width: 1024px){.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:auto!important;max-width:unset!important;min-width:unset!important}}.no-event-hover[_ngcontent-%COMP%]{background:transparent!important;cursor:auto}.detail--data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#edf0f2!important;cursor:pointer}  .-data-grid .editor{position:relative;padding:0!important}  .-data-grid td.editor-cell{max-width:0!important;padding:0!important;vertical-align:middle}.-data-grid[_ngcontent-%COMP%]   .editable-row-operations[_ngcontent-%COMP%]{text-align:center}.-data-grid[_ngcontent-%COMP%]   .editable-row-operations[_ngcontent-%COMP%]   .link-editor[_ngcontent-%COMP%]{text-decoration:none;background-position:0 0;padding:0;margin:0 2px;vertical-align:middle}  .-data-grid td.editor-cell .editor-content.state-active{border-width:2px}  .-data-grid .input-container .texteditor-input{height:27px;line-height:27px;-webkit-appearance:none;width:100%;height:100%;outline:0;border:0;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}  .editor-content-checkbox-table{display:flex;position:relative;margin-bottom:4px!important}  .editor-content-checkbox-table *,   .editor-content-checkbox-table :after,   .editor-content-checkbox-table :before{box-sizing:border-box}  .editor-content-checkbox-table .checkbox-input{margin:0;width:0;height:0;display:inline;-webkit-appearance:none;-moz-appearance:none;appearance:none}  .editor-content-checkbox-table .checkbox-input:before{content:" ";display:inline-block;position:relative;background-position:0 0;background-size:cover;background-repeat:no-repeat;width:16px;height:16px;border-radius:0;border:1px solid #e8eaeb;background-color:#fff;cursor:pointer}  .editor-content-checkbox-table .checkbox-input:hover:before{border:1px solid var(--blueDevextreme)}  .editor-content-checkbox-table .checkbox-input:focus:active:before{border:1px solid var(--blueDevextreme)}  .editor-content-checkbox-table .checkbox-input:checked:before{content:"\\f12c";font:10px/10px Material Design Icons;display:block;height:16px;width:16px;border:1px solid var(--blueDevextreme);color:var(--blueDevextreme);background-color:#fff;text-align:center;line-height:16px}  .editor-content-checkbox [type=checkbox].checkbox-input:enabled:active:before{box-shadow:0 0 .04em,0 .06em .16em -.03em transparent inset,0 0 0 .07em #0000001a inset;background-color:#f0f0f0}  .editor-content-checkbox [type=checkbox].checkbox-input:checked:enabled:active:before{background-color:#0a7ffb;color:#00000046}  .editor-content-checkbox [type=checkbox].checkbox-input:focus:before{box-shadow:0 0 .04em,0 .06em .16em -.03em transparent inset,0 0 0 .07em #0000001a inset,0 0 0 3.3px #419fff8c,0 0 0 5px #419fff4d}  .editor-content-checkbox [type=checkbox].checkbox-input:focus:active:before{box-shadow:0 0 .04em,0 .06em .16em -.03em transparent inset,0 0 0 .07em #0000001a inset,0 0 0 3.3px #419fff8c,0 0 0 5px #419fff4d}  .editor-content-checkbox [type=checkbox].checkbox-input:disabled:before{opacity:.5}.-data-grid-toolbar[_ngcontent-%COMP%]{margin-bottom:5px;margin-top:3px;padding:2px 0}  .-data-grid-toolbar .-toolbar{padding:2px;z-index:auto}  .-data-grid-toolbar .sidebar-sticky-bottom .item-nav .item-button{border-radius:2px;border-width:1px;border-style:solid;background-color:#fff;border-color:#cacfd1;color:#333}.-data-grid-toolbar[_ngcontent-%COMP%]   .-toolbar-items-container[_ngcontent-%COMP%]   .-toolbar[_ngcontent-%COMP%]   .nav-horizontal[_ngcontent-%COMP%]{height:27px}.-data-grid-toolbar-bottom[_ngcontent-%COMP%]{margin-bottom:0;margin-top:0;padding:0}.-data-grid-toolbar-bottom[_ngcontent-%COMP%]   .-toolbar-items-container[_ngcontent-%COMP%]   .-toolbar[_ngcontent-%COMP%]   .nav-horizontal[_ngcontent-%COMP%]{height:27px}  .-data-grid-toolbar-bottom .sidebar-sticky-bottom .item-nav .item-button{background-color:transparent;color:var(--primary);border:none}  .-data-grid-toolbar-bottom .sidebar-sticky-bottom .item-nav .item-button *:hover{font-weight:700}  .-data-grid-toolbar-bottom .sidebar-sticky-bottom .item-nav .item-button .button-content span{padding-left:5px;padding-right:5px}  .error-row{border:2px solid #ff0c0c!important}  .tableFooter{border-top:1px solid #e8eaeb;border-bottom:1px solid #e8eaeb}  .tableFooter tr td{border:none!important}']})}}return n})();var vr=(()=>{class n{constructor(){this.api=Hn.BASE_API_URL,this.isLoginUser=!1,this.firestore=k(la),this.httpClient=k(Li),this.auth=Oc(k(Eo)),this.functions=k(Rd),this.apiFire="https://us-central1-comemivesto-5e5f9.cloudfunctions.net/api",this.resultsSignal=Qe([]),this.feedUrl="https://api.tradedoubler.com/1.0/products.json",this.mySignal=Qe([])}setMySignal(e){this.mySignal.set(e)}getMySignal(){return this.mySignal()}login(){let e={headers:new Vi().set("Authorization","Bearer ").set("Content-Type","application/x-www-form-urlencoded; charset=UTF-8").set("Content-Type","application/json; charset=utf-8").set("responseType","text"),params:new mi,responseType:"text"};this.httpClient.post("http://192.168.1.170:8080/authenticate",{email:"prova2",password:"prova2"},e).subscribe(r=>{console.log(r)})}getOutfits(e,i){return E(this,null,function*(){let r=this.firestore.collection("outfits").ref;e&&e.forEach(o=>{r=r.where(o.field,o.operator,o.value)}),i&&i.forEach(o=>{r=r.orderBy(o.field,o.by)});try{let s=(yield r.get()).docs.map(a=>a.data());return this.resultsSignal=Qe(s),s}catch(o){return console.error("Error getting filtered collection:",o),[]}})}getOutfitUser(e){return E(this,null,function*(){return(yield this.firestore.collection("users").ref.where("uid","==",e).get()).docs.map(s=>s.data())})}getOutfitById(e){return E(this,null,function*(){return(yield this.firestore.collection("outfits").ref.where("id","==",e).get()).docs.map(s=>s.data())})}saveOutfitCollection(e,i,r=!0){return E(this,null,function*(){try{let o=yield this.firestore.collection("outfits");return e?(o.doc(e).set(i),r&&this.getOutfits(),!0):(o.add(i),r&&this.getOutfits(),!0)}catch{return!1}})}updateInCollection(e,i){return E(this,null,function*(){try{return this.firestore.collection("outfits").doc(e).update(i),this.getOutfits(),!0}catch(r){return console.log(r),!1}})}removeOutfit(e){return E(this,null,function*(){let i=this.firestore.collection("outfits").ref;i=i.where("id","==",e);try{let o=(yield i.get()).docs.map(s=>s.ref.delete());return yield Promise.all(o),this.getOutfits(),!0}catch(r){return console.error("Error deleting documents:",r),!1}})}JsonOutfits(){return E(this,null,function*(){try{this.getProductsFromFeed().subscribe(i=>E(this,null,function*(){return console.log("resProd",i),i.forEach(r=>E(this,null,function*(){let o=[{field:"id",operator:"==",value:r.id}];(yield this.getOutfits(o)).length==0&&((yield this.saveOutfitCollection(r.id,r,!1))||console.log("c'\xE8 stato un problema"))})),yield this.getOutfits(),!0}))}catch(e){return console.error("Errore:",e),!1}return!1})}getProductsFromFeed(e=1,i=104437){let r=`;page=${e};pageSize=100;fid=${i}?token=83C91107EA3A44C6B67AD66A2799E13653192324"`;return this.httpClient.get("https://api.tradedoubler.com/1.0/products.json;page=1;pageSize=100;fid=104437?token=83C91107EA3A44C6B67AD66A2799E13653192324").pipe(ee(o=>o.products.map(s=>this.mapToFirebase(s))))}mapToFirebase(e){let i=new Date;return{style:"C",visits:0,outfitSubCategory:["CDC"],gender:"D",createdAt:i.getTime(),editedAt:i.getTime(),id:e.offers[0].id,feedId:e.offers[0].feedId,tags:[{brend:"vestitielegantishop",x:.6,outfitCategory:"ABC",color:"",y:.6,name:e.name,id:e.offers[0].id,outfitSubCategory:"CDC",link:e.offers[0].productUrl,imageUrl:e.productImage.url,prezzo:e.offers[0].priceHistory[0].price.value}],description:e.description.replace("Controlla la tabella taglie e misure, per sapere se la taglia dell'abito \xE8 adatta alle tue misure corporee.",""),userId:"yoq2HOxUJhdn4shCUgIB8ICMBVq2",season:"E",imageUrl:e.productImage.url,status:"pending",likes:0,title:e.name,outfitCategory:["ABC"],userName:"Maria "}}getProducts(){return this.firestore.collection("outfitsProducts").valueChanges().pipe(ee(e=>e))}updateProductOutfit(e,i){try{return this.firestore.collection("outfitsProducts").doc(e).update(i),!0}catch(r){return console.log(r),!1}}removeProductOutfit(e){return E(this,null,function*(){let i=this.firestore.collection("outfitsProducts").doc(e).ref;try{return yield i.delete(),!0}catch(r){return console.error("Error deleting documents:",r),!1}})}getOutFitCategories(e){return this.firestore.collection("outfitsCategories",i=>e?i.where("parentCategory","==",e):i.where("parentCategory","==","")).valueChanges().pipe(ee(i=>i))}updateOutfitCategories(e,i){return E(this,null,function*(){try{return this.firestore.collection("outfitsCategories").doc(e).update(i),!0}catch(r){return console.log(r),!1}})}saveOutfitCategories(e){return E(this,null,function*(){try{let i=yield this.firestore.collection("outfitsCategories");return e.id?(i.doc(e.id).set(e),!0):(i.add(e),!0)}catch{return!1}})}removeOutfitCategories(e){return E(this,null,function*(){let i=this.firestore.collection("outfitsCategories").ref;i=i.where("id","==",e);try{let o=(yield i.get()).docs.map(s=>s.ref.delete());return yield Promise.all(o),this.getOutFitCategories(),!0}catch(r){return console.error("Error deleting documents:",r),!1}})}getFilteredCollection(e,i,r){return E(this,null,function*(){let o=this.firestore.collection(e).ref;i&&i.forEach(s=>{o=o.where(s.field,s.operator,s.value)}),r&&r.forEach(s=>{o=o.orderBy(s.field,s.by)});try{let a=(yield o.get()).docs.map(l=>l.data());return this.resultsSignal=Qe(a),a}catch(s){return console.error("Error getting filtered collection:",s),[]}})}saveOutfitsProducts(e,i){return E(this,null,function*(){try{let r=yield this.firestore.collection("outfitsProducts");return e?(r.doc(e).set(i),!0):(r.add(i),!0)}catch{return!1}})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function l9(n,t){if(n&1){let e=oe();_(0,"app-data-grid",10),$("emittendStartEdit",function(r){j(e);let o=x();return U(o.editProduct(r))})("emittendGridEvent",function(r){j(e);let o=x();return U(o.gridEvent(r))})("emittendDblRowClick",function(r){j(e);let o=x();return U(o.gridEvent(r))}),v()}if(n&2){let e=x();b("colonne",e.colProductsGrid)("idTable",252)("dataSource",e.products)("remoteOperation",!1)("isEditable",!0)("isEditableEditRow",!0)("showToolbarBottom",!1)("showToolbarTop",!1)("isSearchable",!1)}}var Tg=(()=>{class n{constructor(){this.selectProduct=new se,this.colProductsGrid=[{itemType:"group",data:[{type:"campo",edit:!1,groupDataField:void 0,colCaption:"id",dataField:"id",colWidth:40},{type:"campoImg",colVisible:!0,allowEditing:!0,dataField:"imageUrl",colWidth:50,class:"outfit-image",colCaption:"Immagine",allowFiltering:void 0,edit:void 0,groupDataField:void 0},{type:"campo",edit:!1,colWidth:90,groupDataField:void 0,colCaption:"Prodotto",dataField:"name"},{type:"campo",edit:!1,groupDataField:void 0,colCaption:"Categoria",dataField:"outfitSubCategory",colWidth:90},{type:"campo",edit:!1,groupDataField:void 0,colCaption:"Brend",dataField:"brend",colWidth:70},{type:"campoNumber",edit:!1,groupDataField:void 0,colCaption:"Prezzo",dataField:"price",colWidth:50,format:"#.##"},{type:"campoLista",edit:!1,groupDataField:void 0,colCaption:"Genere",dataField:"gender",colWidth:50,lista:{displayExp:"name",valueExp:"id",options:[{id:"U",name:"Uomo"},{id:"D",name:"Donna"}],multiple:!1,remote:!1,parent:null}}],groupDataField:""}],this.outFitService=k(vr),this.route=k(vn),this.router=k(jt),this.popupModal=k(nn),this.products$=this.outFitService.getProducts(),this.subtitle="Elenco dei prodotti disponibili nell'app",this.showGrid=!1,this.customToolbarButtons=[{id:"toFeed",name:"toFeed",text:"Mostra prodotti da feed",disabled:!1,visible:!0,icon:"mdi mdi-database-import-outline",widget:"button"}]}ngOnInit(){this.loadProduct()}loadProduct(){this.showGrid=!1,this.products$.subscribe(e=>E(this,null,function*(){this.outFitService.setMySignal(e),this.products=this.outFitService.mySignal(),this.showGrid=!0}))}repairImages(e){return e.map(i=>i.imageUrl?Ee(Y({},i),{imageUrl:i.imageUrl.replace("http://","https://")}):i)}editProduct(e){e.cancel=!0,this.selectedProdOutfit=e.data;let i={service:"outfitProducts",editData:e.data};this.createOrEditCategories(i)}createOrEditCategories(e){let i=Math.random().toString().replace("0.","");this.popupModal.setNewPopUp(i,"DynamicFormComponent",null,800,null,e,!1,!0,"Modifica Prodotto","",!1),this.popupModal.outputComponent.subscribe(r=>E(this,null,function*(){if(r.guid==i&&r.name=="submitForm"){let o=r.formData,s,a=new Date;r.inEdit?(o.createdAt=a.getTime(),o.editedAt=a.getTime(),s=this.outFitService.updateProductOutfit(o.id,o),s&&this.loadProduct()):(o.editedAt=a.getTime(),o.createdAt=a.getTime()),s&&(this.popupModal.destroyCurrentOpenPopUpByGuid(i),this.loadProduct())}r.guid==i&&r.name=="cancelForm"&&this.popupModal.destroyCurrentOpenPopUpByGuid(i)}))}gridEvent(e){return E(this,null,function*(){if(console.log("Grid Event:",e),e.name==="onRowOnlyClick"&&this.selectProduct.emit(e),e.name==="delRows"){let i=e.rowData;(yield this.outFitService.removeProductOutfit(i.id))&&this.loadProduct()}})}eventToolbarProduct(e){return E(this,null,function*(){switch(e.name||e.id){case"toFeed":this.showFeedProductComponent();break;default:break}})}showFeedProductComponent(){let e=Math.random().toString().replace("0.",""),i={};this.popupModal.setNewPopUp(e,"ProductFromFeedComponent",null,1e3,null,i,!0,!0,"Importa Prodotti","",!0),this.popupModal.outputComponent.subscribe(r=>E(this,null,function*(){r.guid==e&&r.name=="stochiudendo"&&this.loadProduct()}))}filterProduct(e){if(console.log(this.products),console.log("filterProduct",e),e.name==="cancelForm"){this.loadProduct(),e.form.reset();return}let i=e.formData;if(i.gender&&(this.products=this.products.filter(r=>r.gender===i.gender)),i.outfitSubCategory){this.products=this.products.filter(r=>r.outfitSubCategory===i.outfitSubCategory);return}i.outfitCategory&&(this.products=this.products.filter(r=>r.outfitCategory==i.outfitCategory))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-outfit-products"]],outputs:{selectProduct:"selectProduct"},standalone:!0,features:[fe],decls:11,vars:9,consts:[[3,"emittEventButton","caption","subTitle","tip","addButtonShow","showSpinner","customToolbarButtons"],["id","accordionExample",1,"accordion","my-3"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button"],[1,"mdi","mdi-filter-outline"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"accordion-body"],[3,"submitFormEvent","service","showBottomButtons"],[3,"colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable","emittendStartEdit","emittendGridEvent","emittendDblRowClick",4,"ngIf"],[3,"emittendStartEdit","emittendGridEvent","emittendDblRowClick","colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0),$("emittEventButton",function(s){return r.eventToolbarProduct(s)}),_(1,"div",1)(2,"div",2)(3,"h2",3)(4,"button",4),Q(5,"span",5),N(6," Filtri "),v()(),_(7,"div",6)(8,"div",7)(9,"app-dynamic-form",8),$("submitFormEvent",function(s){return r.filterProduct(s)}),v()()()()(),G(10,l9,1,9,"app-data-grid",9),v()),i&2&&(b("caption","Elenco Outfit caricati dagli utenti")("subTitle",r.subtitle)("tip","Gestisci gli Outfit, modera,cancella,sospendi....")("addButtonShow",!0)("showSpinner",!r.showGrid)("customToolbarButtons",r.customToolbarButtons),w(9),b("service","filterProduct")("showBottomButtons",!0),w(),b("ngIf",r.showGrid))},dependencies:[be,Ye,tn,lc,Zo]})}}return n})();var _N=(()=>{class n{constructor(e){this.http=e,this.baseUrl="https://api.tradedoubler.com/1.0/products.json;",this.tokenStr="token=83C91107EA3A44C6B67AD66A2799E13653192324"}getProdottiFromFeed(e,i){let r=this.buildUrl(e,i);return this.http.get(r).pipe(ee(o=>o))}buildUrl(e,i){return`${this.baseUrl};page=${i};pageSize=100;fid=${e}?${this.tokenStr}`}static{this.\u0275fac=function(i){return new(i||n)(K(Li))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function c9(n,t){if(n&1&&(_(0,"option",13),N(1),v()),n&2){let e=t.$implicit;b("value",e.id),w(),ke(" ",e.name," ")}}function u9(n,t){if(n&1&&(_(0,"option",13),N(1),v()),n&2){let e=t.$implicit;b("value",e.name),w(),ke(" ",e.name," ")}}function d9(n,t){n&1&&(_(0,"span"),N(1," Nessun Prodotto..."),v())}function h9(n,t){n&1&&(_(0,"span"),N(1,"Importato"),v())}function f9(n,t){if(n&1&&(_(0,"option",13),N(1),v()),n&2){let e=t.$implicit;b("value",e.id),w(),ke(" ",e.categoryName," ")}}function p9(n,t){if(n&1&&(_(0,"option",13),N(1),v()),n&2){let e=t.$implicit;b("value",e.id),w(),ke(" ",e.value," ")}}function m9(n,t){if(n&1&&(_(0,"option",13),N(1),v()),n&2){let e=t.$implicit;b("value",e.id),w(),ke(" ",e.value," ")}}function g9(n,t){if(n&1){let e=oe();_(0,"div",14)(1,"div",15),Q(2,"img",16),_(3,"div",17),Q(4,"p",18),G(5,h9,2,0,"span",8),v(),_(6,"div",19)(7,"h5",20),N(8),v(),_(9,"p",21),N(10),v(),_(11,"p",21),N(12),v(),_(13,"form",null,0)(15,"div",22)(16,"select",23),Me("ngModelChange",function(r){let o=j(e).$implicit;return Pe(o.selectCategories,r)||(o.selectCategories=r),U(r)}),G(17,f9,2,2,"option",4),Is(18,"async"),v(),_(19,"label",24),N(20,"Categoria"),v()(),_(21,"div",22)(22,"select",25),Me("ngModelChange",function(r){let o=j(e).$implicit;return Pe(o.selectColor,r)||(o.selectColor=r),U(r)}),G(23,p9,2,2,"option",4),v(),_(24,"label",26),N(25,"Colore"),v()(),_(26,"div",22)(27,"select",25),Me("ngModelChange",function(r){let o=j(e).$implicit;return Pe(o.selectGender,r)||(o.selectGender=r),U(r)}),G(28,m9,2,2,"option",4),v(),_(29,"label",26),N(30,"Genere uomo/donna"),v()(),_(31,"div",27)(32,"button",28),$("click",function(){let r=j(e).$implicit,o=x();return U(o.saveToWardrobe(r))}),N(33,"Aggiungi al guardaroba"),v()()()()()()}if(n&2){let e=t.$implicit,i=x();w(2),Uf("src",e.productImage.url,Ln),Uf("alt",e.name),w(2),b("innerHTML",i.splitCategories(e.categories),Pf),w(),b("ngIf",i.isJustImported(e.offers[0].id)),w(3),Je(e.name),w(2),Je(e.brand),w(2),ke("Prezzo: ",i.setPrice(e.offers)," \u20AC"),w(4),xe("ngModel",e.selectCategories),w(),b("ngForOf",Ts(18,13,i.categories)),w(5),xe("ngModel",e.selectColor),w(),b("ngForOf",i.colors),w(4),xe("ngModel",e.selectGender),w(),b("ngForOf",i.gender)}}var yN=(()=>{class n{constructor(){this.productService=k(_N),this.outfitService=k(vr),this.pageNumber=1,this.totalProducts=0,this.stores=[{id:"44191",name:"PULL and BEAR IT"},{id:"35306",name:"PrimaDonna IT"},{id:"36745",name:"Bershka IT"},{id:"38925",name:"Julian Fashion"},{id:"39848",name:"Julian Fashion IT- Lys"},{id:"109063",name:"Brupa PF"}],this.storeCategories=[],this.selectGender=[],this.products=[],this.filterProduct=[],this.categories=this.outfitService.getFilteredCollection("outfitsCategories",[{field:"parentCategory",operator:"!=",value:""}]),this.categoryForm=new Yr({}),this.colors=[{id:"N",value:"Nero",parent:null,hex:"#000000"},{id:"B",value:"Bianco",parent:null,hex:"#FFFFFF"},{id:"G",value:"Grigio",parent:null,hex:"#808080"},{id:"Bg",value:"Beige",parent:null,hex:"#F5F5DC"},{id:"BN",value:"Blu navy",parent:null,hex:"#000080"},{id:"BJ",value:"Blu Jeans",parent:null,hex:"#5DADEC"},{id:"R",value:"Rosso",parent:null,hex:"#FF0000"},{id:"VO",value:"Verde oliva",parent:null,hex:"#808000"},{id:"GS",value:"Giallo senape",parent:null,hex:"#FFDB58"},{id:"RP",value:"Rosa pallido",parent:null,hex:"#FFD1DC"},{id:"RSA",value:"Rosa",parent:null,hex:"#FFC0CB"},{id:"A",value:"Azzurro",parent:null,hex:"#ADD8E6"},{id:"M",value:"Marrone",parent:null,hex:"#964B00"},{id:"O",value:"Arancione",parent:null,hex:"#FFA500"}],this.gender=[{id:"U",value:"Uomo"},{id:"D",value:"Donna"}],this.justImported=new Set}loadProducts(){this.products.length<=this.totalProducts&&this.productService.getProdottiFromFeed(this.selectedStore,this.pageNumber).subscribe(e=>{this.products.push(...e.products),this.totalProducts=e.productHeader.totalHits,this.filterProduct=JSON.parse(JSON.stringify(this.products)),this.filterProduct.forEach(i=>E(this,null,function*(){let r=i.offers[0].id;this.storeCategories.push(i.categories[0]),i.selectedColor=null,i.selectedCategory=null,i.selectedGender=null,this.selectGender[r]=null,(yield this.outfitService.getFilteredCollection("outfitsProducts",[{field:"id",operator:"==",value:r}])).length>0&&this.justImported.add(r)})),this.storeCategories=this.storeCategories.filter((i,r,o)=>r===o.findIndex(s=>s.name===i.name)),this.storeCategories=this.storeCategories.sort((i,r)=>i.name<r.name?-1:i.name>r.name?1:0),this.selectedStoreCategory&&this.onChangeCategory()})}isJustImported(e){return this.justImported.has(e)}loadMoreProducts(){this.pageNumber++,this.filterProduct=[],this.loadProducts()}saveToWardrobe(e){return E(this,null,function*(){if(!e.selectCategories&&e.selectColor&&e.selectGender){Rn("Nessuna categoria selezionata","Errore!");return}let i=e.offers[0].priceHistory[0].price.value,r=e.offers[0].productUrl,o=e.offers[0].feedId,s=(yield this.categories).filter(m=>m.id==e.selectCategories)[0].parentCategory,a=e.productImage.url,l=e.offers[0].id,u=new Date,d={id:e.offers[0].id,price:i,name:e.name,outfitCategory:s,outfitSubCategory:e.selectCategories,brend:e.brand,color:e.selectColor,imageUrl:a.replace("http://","https://"),link:r,feedId:o,gender:e.selectGender,createdAt:u.getTime(),editedAt:u.getTime()};(yield this.outfitService.saveOutfitsProducts(l,d))&&this.justImported.add(l)})}onChangeStore(e){this.products=[],this.totalProducts=0,this.pageNumber=1,this.justImported.clear(),this.storeCategories=[],this.loadProducts()}splitCategories(e){return e.map(i=>i.name).join("-")}setPrice(e){let i="";return e.forEach(r=>{i=r.priceHistory.map(o=>o.price.value).join("-")}),i}onSelectCategories(e){}onChangeCategory(e){this.filterProduct=this.products.filter(i=>i.categories.map(r=>r.name).includes(this.selectedStoreCategory))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-product-from-feed"]],standalone:!0,features:[fe],decls:19,vars:6,consts:[["categoryForm","ngForm"],[1,"container-fluid"],[1,"form-floating"],["id","floatingSelect","aria-label","Floating label select example",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","floatingSelect"],[1,"container"],[1,"row","container-products"],[4,"ngIf"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"row"],[1,"d-grid","gap-2","col-6","mx-auto"],[1,"btn","btn-link",3,"click"],[3,"value"],[1,"col-md-4"],[1,"card","mb-4"],[1,"card-img-top",3,"src","alt"],[1,"card-img-overlay"],[1,"card-text",3,"innerHTML"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"mb-3","form-floating"],["name","outfitsCategories","required","","id","selectCategories","aria-label","Floating label select example",1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["for","selectCategories"],["name","colors","required","","id","colore","aria-label","Floating label select example",1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["for","colore"],[1,"mb-3"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(i,r){i&1&&(_(0,"div",1)(1,"div",2)(2,"select",3),Me("ngModelChange",function(s){return Pe(r.selectedStore,s)||(r.selectedStore=s),s}),$("change",function(s){return r.onChangeStore(s)}),G(3,c9,2,2,"option",4),v(),_(4,"label",5),N(5,"Seleziona uno store"),v()(),_(6,"div",2)(7,"select",3),Me("ngModelChange",function(s){return Pe(r.selectedStoreCategory,s)||(r.selectedStoreCategory=s),s}),$("change",function(s){return r.onChangeCategory(s)}),G(8,u9,2,2,"option",4),v(),_(9,"label",5),N(10,"Seleziona uno store"),v()(),_(11,"div",6)(12,"div",7),G(13,d9,2,0,"span",8)(14,g9,34,15,"div",9),v()(),_(15,"div",10)(16,"div",11)(17,"button",12),$("click",function(){return r.loadMoreProducts()}),N(18,"Carica altri prodotti"),v()()()()),i&2&&(w(2),xe("ngModel",r.selectedStore),w(),b("ngForOf",r.stores),w(4),xe("ngModel",r.selectedStoreCategory),w(),b("ngForOf",r.storeCategories),w(5),b("ngIf",r.products.length==0),w(),b("ngForOf",r.filterProduct))},dependencies:[be,lt,Ye,cp,Cn,nc,ic,rc,Yo,qn,_r,Od,Jr,Ad],styles:[".container-fluid[_ngcontent-%COMP%]   .container-products[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem;min-height:600px;max-height:600px;overflow-y:auto;font-size:.8rem}.container-fluid[_ngcontent-%COMP%]   .container-products[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{max-height:200px;object-fit:scale-down}.container-fluid[_ngcontent-%COMP%]   .container-products[_ngcontent-%COMP%]   .card-img-overlay[_ngcontent-%COMP%]{background-color:#e0dfdfb3;height:fit-content;font-size:.7rem;width:100%}.container-fluid[_ngcontent-%COMP%]   .container-products[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:.75rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}}return n})();var G1=[{name:"ElementComponent",component:hN},{name:"DynamicFormComponent",component:Zo},{name:"ProductFromFeedComponent",component:yN},{name:"OutfitProductsComponent",component:Tg}];var nn=(()=>{class n{constructor(){this.dataFromComponent=new se,this._popupsSet=new wt([]),this.popupsSet=this._popupsSet.asObservable(),this.currentPopupsSet=[],this._outputComponent=new wt([]),this.outputComponent=this._outputComponent.asObservable()}getComponentByName(e){return G1.find(r=>r.name===e).component||null}isComponentExistByName(e){return!!G1.find(r=>r.name===e).name}setNewPopUp(e,i,r,o="800",s,a,l=!1,u=!1,d="",f="center",m=!1){if(e||(e=Math.random().toString().replace("0.","")),typeof i>"u"||!e)return;let y=this.currentPopupsSet.findIndex(D=>D.id==e&&D.componentName==i);if(y<0){let D={componentName:i,dataToSend:r,instancedData:a,popUpWidth:o,showCaptionFooter:l,showCaptionHeader:u,accessoringData:s,action:"added",title:d,position:f,id:e,isClosablePopUp:m};this.currentPopupsSet.push(D),this._popupsSet.next(this.currentPopupsSet)}else this.currentPopupsSet[y].dataToSend=r,this.currentPopupsSet[y].action="update",this.currentPopupsSet[y].showCaptionFooter=l,this.currentPopupsSet[y].showCaptionHeader=u,this._popupsSet.next(this.currentPopupsSet)}setPopUps(e){this.currentPopupsSet=e}destroyCurrentOpenPopUp(e){let i=this.currentPopupsSet.findIndex(r=>r.componentName==e);if(i>=0){this.currentPopupsSet[i].action="remove";try{}catch(r){console.warn(r)}setTimeout(()=>{this._popupsSet.next(this.currentPopupsSet),this._outputComponent.next([]),this.currentPopupsSet.splice(i,1)},500)}}destroyCurrentOpenPopUpByGuid(e){let i=this.currentPopupsSet.findIndex(r=>r.id==e||r.componentName==e);if(i>=0){this.currentPopupsSet[i].action="remove";try{return this._popupsSet.next(this.currentPopupsSet),this.currentPopupsSet.splice(i,1),!0}catch(r){return console.warn(r),!1}}return!1}destroyOutputComponent(){this._outputComponent.next([])}destroyCurrentOpenPopUps(){this.currentPopupsSet=[],this._popupsSet.next([])}setOutputComponent(e){this._outputComponent.next(e)}getOutputComponent(e){return E(this,null,function*(){return new Promise((i,r)=>{this.outputComponent.subscribe(o=>E(this,null,function*(){o.guid===e&&o.guid==e&&i(o)}))})})}onSubScribe(){this._popupsSet.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function y9(n,t){if(n&1){let e=oe();_(0,"li",19),$("click",function(r){let o=j(e).index,s=x();return U(s.onAdd(r,o))}),Q(1,"span",20),N(2),_(3,"div")(4,"button",21),$("click",function(r){let o=j(e).index,s=x();return U(s.onAdd(r,o))}),Q(5,"span",22),v()()()}if(n&2){let e=t.$implicit,i=x();w(),b("ngClass",i.elementIcons[e.type]),w(),ke(" ",e.label," ")}}function v9(n,t){if(n&1){let e=oe();_(0,"div",23),$("click",function(){let r=j(e),o=r.$implicit,s=r.index,a=x();return U(a.openPropertiesModal(o,s))}),_(1,"div",24)(2,"span"),N(3),v()(),_(4,"button",25),$("click",function(){let r=j(e).index,o=x();return U(o.onRemove(r))}),Q(5,"span",26),v()()}if(n&2){let e=t.$implicit;w(3),Je(e.label)}}var vN=(()=>{class n{constructor(e,i,r){this.modalService=e,this.route=i,this.router=r,this.elements=[{type:"textBox",label:"Text Box"},{type:"selectBox",label:"Select Box"},{type:"radio",label:"Radio Button"},{type:"checkBox",label:"Checkbox"},{type:"textArea",label:"Textarea"},{type:"fileBox",label:"FileBox"},{type:"hiddenBox",label:"Hidden box"}],this.elementIcons={textBox:"mdi mdi-signature-text",selectBox:"mdi mdi-form-select",radio:"mdi mdi-radiobox-marked",checkBox:"mdi mdi-checkbox-marked-outline",textArea:"mdi mdi-form-textarea",fileBox:"mdi mdi-file-document-outline",hiddenBox:"mdi mdi-file-hidden"},this.formElements=[],this.propertiesModal=k(nn),this.formId=null,this.formTitle=this.formId?"Modifica Form":"Crea Nuovo Form",this.formName="",this.formService=k(Wo)}ngOnInit(){this.route.paramMap.subscribe(e=>{this.formId=e.get("id"),this.formId&&(this.formTitle="Modifica Form",this.loadForm(this.formId))})}loadForm(e){this.formService.getFormById(e).subscribe(i=>{i&&(this.formName=i.nameForm,this.formElements=JSON.parse(i.json))})}onAdd(e,i){e.preventDefault(),e.stopPropagation();let r=this.elements[i];this.formElements.push(Ee(Y({},r),{validation:[]}));let o=this.formElements.length-1;this.openPropertiesModal(r,o)}onRemove(e){this.formElements.splice(e,1)}openPropertiesModal(e,i){this.selectedElement=Y({},e);let r=Math.random().toString().replace("0.",""),o={formField:this.selectedElement};this.propertiesModal.setNewPopUp(r,"ElementComponent",null,800,null,o,!1,!0,"Gestione propriet\xE0","",!1),this.propertiesModal.outputComponent.subscribe(s=>{s.guid==r&&s.name=="saveProperties"&&i>=0&&(this.formElements[i]=s.formField,this.propertiesModal.destroyCurrentOpenPopUpByGuid(r),this.selectedElement={}),s.guid==r&&s.name=="closeProperties"&&this.propertiesModal.destroyCurrentOpenPopUpByGuid(r)})}addAttribute(e){let i={name:"",value:""};e.attributes.push(i)}saveForm(e){let i=JSON.stringify(this.formElements);console.log("saveForm",i);let r=this.formId==="new"?Math.random().toString().replace("0.",""):this.formId,o=this.formId=="new"?this.formName.trim():this.formId,s={nameForm:o,json:i,id:r};this.formService.saveForm(o,s).then(()=>{Rn("Form salvato con successo","Attenzione!"),this.router.navigate(["/form-list"])}).catch(a=>{console.error("Errore durante il salvataggio del form:",a)})}returnPrev(){this.router.navigate(["/form-list"])}static{this.\u0275fac=function(i){return new(i||n)(X(j1),X(vn),X(jt))}}static{this.\u0275cmp=he({type:n,selectors:[["app-form-builder"]],standalone:!0,features:[fe],decls:29,vars:6,consts:[[3,"caption"],[1,"text","border-bottom"],[1,"mdi","mdi-chevron-right"],[1,"row","mt-3","mb-3"],["for","formName",1,"col-sm-2","col-form-label","font-medium"],[1,"badge","bg-secondary"],[1,"col-sm-10"],["id","formName","type","text","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text","pt-3","mt-3"],[1,"content-formbuilder","form-view"],[1,"list-group","elements"],["class","list-group-item d-flex justify-content-between align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"form-view"],[1,"row"],["class","element",3,"click",4,"ngFor","ngForOf"],[1,"formbuilder-button","gap-3","mt-1"],[1,"ana-button","btn",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"mdi","mdi-content-save-outline"],[1,"list-group-item","d-flex","justify-content-between","align-items-center",3,"click"],[1,"iconE",3,"ngClass"],[1,"btn","icon-button","ms-2",3,"click"],[1,"mdi","mdi-plus-circle-outline"],[1,"element",3,"click"],[1,"form-element","mb-3"],[1,"icon-button","ms-2","removeEl",3,"click"],[1,"mdi","mdi-close"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0)(1,"div",1)(2,"h2"),Q(3,"span",2),N(4),v()(),_(5,"div",3)(6,"label",4),N(7,"Form Name "),_(8,"span",5),N(9,"Richiesto"),v()(),_(10,"div",6)(11,"input",7),Me("ngModelChange",function(s){return Pe(r.formName,s)||(r.formName=s),s}),v()()(),_(12,"div",8)(13,"h3"),Q(14,"span",2),N(15,"Anteprima form"),v()(),_(16,"div",9)(17,"ul",10),G(18,y9,6,2,"li",11),v(),_(19,"div",12)(20,"div",13),G(21,v9,6,1,"div",14),v()()(),_(22,"div",15)(23,"button",16),$("click",function(){return r.returnPrev()}),Q(24,"span",17),N(25," Indietro "),v(),_(26,"button",16),$("click",function(){return r.saveForm(r.formName)}),Q(27,"span",18),N(28," Salva "),v()()()),i&2&&(b("caption",r.formTitle),w(4),Ss("",r.formTitle," ",r.formName,""),w(7),xe("ngModel",r.formName),w(7),b("ngForOf",r.elements),w(3),b("ngForOf",r.formElements))},dependencies:[be,Ot,lt,tn,Cn,Ci,qn,Jr,lN],styles:[".content-formbuilder[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:normal;align-items:normal;align-content:normal}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{flex:0 1 auto}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:.3rem;text-align:start}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .iconE[_ngcontent-%COMP%]{margin-right:.4rem;line-height:.5rem}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;line-height:.5rem}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--bg-grey)}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]{flex:1 0 auto;margin-left:10px}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]{position:relative;display:flex;flex:1 0 auto;justify-content:space-between;align-content:center}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]{border:1px solid var(--border_color);width:100%;padding:.65rem;border-radius:.375rem}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .removeEl[_ngcontent-%COMP%]{color:red;font-size:1rem}.content-formbuilder[_ngcontent-%COMP%]   .no-evt[_ngcontent-%COMP%]{pointer-events:none}.formbuilder-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:end}"]})}}return n})();var wN=(()=>{class n{transform(e){if(!e)return"";let i=new Date(Number(e)),r=String(i.getDate()).padStart(2,"0"),o=String(i.getMonth()+1).padStart(2,"0"),s=i.getFullYear();return`${r}/${o}/${s}`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=yf({name:"timestampToDate",type:n,pure:!0,standalone:!0})}}return n})();function w9(n,t){if(n&1){let e=oe();_(0,"li",4),$("dblclick",function(){let r=j(e).$implicit,o=x();return U(o.editUser(r))}),_(1,"div",5)(2,"span",6),Q(3,"img",7),v(),_(4,"div",8)(5,"span",9),N(6),Is(7,"timestampToDate"),v(),_(8,"p"),N(9),v()()(),_(10,"div",10)(11,"button",11),Q(12,"span",12),v(),_(13,"ul",13)(14,"li")(15,"button",14),$("click",function(){let r=j(e).$implicit,o=x();return U(o.editUser(r))}),Q(16,"span",15),N(17," Modifica "),v()(),_(18,"li")(19,"button",14),$("click",function(){let r=j(e).$implicit,o=x();return U(o.deleteUser(r.uid))}),Q(20,"span",16),N(21," Elimina "),v()(),_(22,"li")(23,"button",14),$("click",function(){let r=j(e).$implicit,o=x();return U(o.disableUser(r.uid))}),Q(24,"span",17),N(25," Disabilita "),v()(),_(26,"li")(27,"button",14),$("click",function(){let r=j(e).$implicit,o=x();return U(o.sendPasswordReset(r))}),Q(28,"span",18),N(29," Invia Password "),v()()()()()}if(n&2){let e=t.$implicit;w(3),b("src",e.photoURL||"https://ionicframework.com/docs/img/demos/avatar.svg",Ln)("alt",e.name),w(3),Ss("",Ts(7,5,e.createAt)," - ",e.displayName||e.name," "),w(3),Je(e.email)}}var bN=(()=>{class n{constructor(){this.subtitle="Elenco utenti registrati in app",this.userService=k(Ei),this.propertiesModal=k(nn)}ngOnInit(){this.users$=this.userService.getUsers(),this.users$.subscribe(e=>{this.users=e})}deleteUser(e){return E(this,null,function*(){console.log("deleteUser-->",this.users);let i=yield this.userService.deleteUsersFirebase(e)})}editUser(e){this.selectedUser=e;let i=Math.random().toString().replace("0.",""),r={service:"profileForm",editData:this.selectedUser};this.propertiesModal.setNewPopUp(i,"DynamicFormComponent",null,800,null,r,!1,!0,"Modifica Utente","",!1),this.propertiesModal.outputComponent.subscribe(o=>{o.guid==i&&o.name=="submitForm",o.guid==i&&o.name=="cancelForm"&&(this.selectedUser=void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(i))})}createNewuser(e){let i=Math.random().toString().replace("0.",""),r={service:"testRegistrazione"};this.propertiesModal.setNewPopUp(i,"DynamicFormComponent",null,800,null,r,!1,!0,"Modifica Outfit","",!1),this.propertiesModal.outputComponent.subscribe(o=>E(this,null,function*(){o.guid==i&&o.name=="submitForm",o.guid==i&&o.name=="cancelForm"}))}sendPasswordReset(e){return E(this,null,function*(){(yield this.userService.sendPasswordFirebase(e.email))&&Rn(`Email di reset inviata a ${e.email}`,"Attenzione!")})}disableUser(e){throw this.userService.disabledUsersFirebase(e),new Error("Method not implemented.")}updateUser(e){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-users"]],standalone:!0,features:[fe],decls:4,vars:6,consts:[[3,"emittEventButton","caption","subTitle","tip","addButtonShow"],[1,"list-group","form-list"],[3,"scrollHeigth"],["class","form-list-item list-group-item d-flex justify-content-between align-items-center",3,"dblclick",4,"ngFor","ngForOf"],[1,"form-list-item","list-group-item","d-flex","justify-content-between","align-items-center",3,"dblclick"],[1,"profile-info"],[1,"img-thumbnail","profileImage"],[1,"",3,"src","alt"],[1,"data-wrapper"],[1,"data-registrazione"],[1,"dropdown"],[1,"btn","icon-button"],[1,"mdi","mdi-dots-vertical"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],[1,"btn","icon-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"mdi","mdi-close","del"],[1,"mdi","mdi-lock-off-outline"],[1,"mdi","mdi-lock-reset"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0),$("emittEventButton",function(s){return r.createNewuser(s)}),_(1,"ul",1)(2,"app-custom-scrollbar",2),G(3,w9,30,7,"li",3),v()()()),i&2&&(b("caption","Elenco Utenti")("subTitle",r.subtitle)("tip","Gestisci il profilo utente, resetta la password,sospendi....")("addButtonShow",!0),w(2),b("scrollHeigth",500),w(),b("ngForOf",r.users))},dependencies:[be,lt,Cn,tn,wN,sc],styles:[".profile-info[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:flex-start;align-items:center;flex-direction:row}.profile-info[_ngcontent-%COMP%]   .profileImage[_ngcontent-%COMP%]{height:50px;overflow:hidden;display:block;width:50px;position:relative;border-radius:900px;padding:0;margin-right:.333rem}.profile-info[_ngcontent-%COMP%]   .profileImage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;-o-object-fit:cover;object-fit:cover;top:0;width:100%;height:100%}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{display:none;right:0}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}@media (max-width: 990px){.form-list-item[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.form-list-item[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:space-evenly;align-items:center;flex-direction:row}.form-list-item[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profileImage[_ngcontent-%COMP%]{height:28px;width:28px;margin-bottom:.5rem}.form-list-item[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .data-wrapper[_ngcontent-%COMP%]{max-width:170px;width:170px;overflow:hidden}}"]})}}return n})();function b9(n,t){if(n&1){let e=oe();_(0,"app-data-grid",2),$("emittendStartEdit",function(r){j(e);let o=x();return U(o.editOutfit(r))})("emittendGridEvent",function(r){j(e);let o=x();return U(o.gridEvent(r))})("emittendBttonCellClick",function(r){j(e);let o=x();return U(o.approveOutfit(r))}),v()}if(n&2){let e=x();b("colonne",e.colOutfitsGrid)("idTable",2)("dataSource",e.outfits)("remoteOperation",!1)("isEditable",!0)("isEditableEditRow",!0)("showToolbarBottom",!1)("showToolbarTop",!1)("isSearchable",!1)}}var CN=(()=>{class n{constructor(){this.outfitService=k(vr),this.showGrid=!1,this.showSpinner=!1,this.outfits=this.outfitService.resultsSignal(),this.subtitle="Elenco outfit creati nell' app",this.propertiesModal=k(nn),this.router=k(jt),this.colOutfitsGrid=[{itemType:"group",data:[{type:"campo",colVisible:!0,allowEditing:!0,dataField:"title",colWidth:"300",caption:"Titolo",colCaption:"Titolo",class:"outfit-title",edit:!1,groupDataField:void 0},{type:"campoImg",colVisible:!0,allowEditing:!0,dataField:"imageUrl",colWidth:"150",class:"outfit-image",colCaption:"Immagine",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campo",colVisible:!0,allowEditing:!0,dataField:"userName",colWidth:"120",caption:"utente",colCaption:"Utente",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campoDateTime",colVisible:!0,allowEditing:!0,dataField:"createdAt",colWidth:"70",caption:"Creazione",colCaption:"Creazione",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campoDateTime",colVisible:!0,allowEditing:!0,dataField:"editedAt",colWidth:"70",colCaption:"Modifica",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campo",colVisible:!0,allowEditing:!0,dataField:"status",colWidth:"80",caption:"Stato",colCaption:"Stato",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campoButton",colVisible:!0,allowEditing:!0,dataField:"",colWidth:"40",caption:"Approva",colCaption:"Stato",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0,button:{text:"",name:"cambiaStato",class:"customBrightness",location:"after",event:"cambiaStato",hint:"Approva l'outfit",icon:"mdi mdi-shield-check"}}],groupDataField:""}],this.customToolbarButtons=[{id:"toJSON",name:"toJSON",text:"Importa da Jsn",disabled:!1,visible:!0,icon:"mdi mdi-database-import-outline",widget:"button"},{id:"testLogin",name:"login",text:"Login",disabled:!1,visible:!0,icon:"mdi mdi-database-import-outline",widget:"button"}]}ngOnInit(){return E(this,null,function*(){yield this.loadOutfits()})}ngAfterViewInit(){}loadOutfits(){return E(this,null,function*(){this.showGrid=!1;let e=yield this.outfitService.getOutfits(void 0,[{field:"createdAt",by:"desc"}]);this.outfits=e;let i=this.outfits.map(r=>E(this,null,function*(){let o=yield this.getUserInfo(r.userId);return r.userName=o.displayName?o.displayName:o.email,r}));yield Promise.all(i),this.showGrid=!0})}getUserInfo(e){return E(this,null,function*(){return(yield this.outfitService.getOutfitUser(e))[0]})}eventToolbarOutfit(e){return E(this,null,function*(){let i=e.name||e.id;switch(console.log("eventToolbarOutfit",i),i){case"toJSON":this.showSpinner=!0,(yield this.outfitService.JsonOutfits())&&(this.showSpinner=!1,this.loadOutfits());break;case"addButton":this.router.navigate(["/outfit-detail"]);break;case"login":this.outfitService.login();break;default:break}})}editOutfit(e){if(typeof e<"u"&&e){e.cancel=!0,this.selectedOutfit=e.data,this.router.navigate(["/outfit-detail",this.selectedOutfit.id]);return}let i=Math.random().toString().replace("0.",""),r={service:"outfitFormAdmin",editData:this.selectedOutfit};this.propertiesModal.setNewPopUp(i,"DynamicFormComponent",null,800,null,r,!1,!0,"Modifica Outfit","",!1),this.propertiesModal.outputComponent.subscribe(o=>E(this,null,function*(){if(o.guid==i&&o.name=="submitForm"){let s=o.formData,a,l=new Date;if(o.inEdit){let u=s.color?s.color:[];s.color=u,s.editedAt=l.getTime(),a=yield this.outfitService.updateInCollection(this.selectedOutfit?.id,s)}else s.createdAt=l.getTime(),a=yield this.outfitService.saveOutfitCollection(void 0,s);a&&(this.selectedOutfit=void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(i),this.loadOutfits())}o.guid==i&&o.name=="cancelForm"&&(this.selectedOutfit=void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(i))}))}gridEvent(e){console.log("gridEvent-->",e);let i=e.name,r=e.rowData;switch(i){case"delRows":this.removeOutfit(r.id);break;default:break}}approveOutfit(e){return E(this,null,function*(){if(console.log("approveOutfit",e),e.name=="cambiaStato"){let i=e.rowData;i.status!="approved"&&(i.status="approved"),(yield this.outfitService.updateInCollection(i?.id,i))&&(this.showGrid=!1,this.loadOutfits())}})}removeOutfit(e){return E(this,null,function*(){e&&(yield this.outfitService.removeOutfit(e))&&this.loadOutfits()})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-outfits"]],standalone:!0,features:[fe],decls:2,vars:7,consts:[[3,"emittEventButton","caption","subTitle","tip","addButtonShow","showSpinner","customToolbarButtons"],[3,"colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable","emittendStartEdit","emittendGridEvent","emittendBttonCellClick",4,"ngIf"],[3,"emittendStartEdit","emittendGridEvent","emittendBttonCellClick","colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0),$("emittEventButton",function(s){return r.eventToolbarOutfit(s)}),G(1,b9,1,9,"app-data-grid",1),v()),i&2&&(b("caption","Elenco Outfit caricati dagli utenti")("subTitle",r.subtitle)("tip","Gestisci gli Outfit, modera,cancella,sospendi....")("addButtonShow",!0)("showSpinner",!r.showGrid)("customToolbarButtons",r.customToolbarButtons),w(),b("ngIf",r.showGrid))},dependencies:[be,Ye,lc,tn],styles:[".outfit-title .contet-data{font-weight:500}  .outfit-image .contet-data{padding:.5rem .25rem}  .outfit-image .contet-data .cell-img{object-fit:contain;width:100%;height:100%;cursor:pointer}"]})}}return n})();function C9(n,t){if(n&1&&(_(0,"nav",3)(1,"ol",4)(2,"li",5)(3,"a",6),N(4,"Elenco categorie"),v()(),_(5,"li",7),N(6),v()()()),n&2){let e=x();w(6),Je(e.selectedCatOutfit.categoryName)}}function E9(n,t){if(n&1){let e=oe();_(0,"app-data-grid",8),$("emittendStartEdit",function(r){j(e);let o=x();return U(o.editCategoryOutfit(r))})("emittendGridEvent",function(r){j(e);let o=x();return U(o.gridEvent(r))})("emittendDblRowClick",function(r){j(e);let o=x();return U(o.dblClickRow(r))}),v()}if(n&2){let e=x();b("colonne",e.colOutfitsCategory)("idTable",2)("dataSource",e.outFitCategories)("remoteOperation",!1)("isEditable",!0)("isEditableEditRow",!0)("showToolbarBottom",!1)("showToolbarTop",!1)("isSearchable",!1)}}var H1=(()=>{class n{constructor(){this.colOutfitsCategory=[{itemType:"group",data:[{type:"campo",colVisible:!0,allowEditing:!0,dataField:"id",colWidth:"50",caption:"",colCaption:"",class:"",edit:!1,groupDataField:void 0},{type:"campoImg",colVisible:!0,allowEditing:!0,dataField:"imageUrl",colWidth:"77",class:"outfit-image",colCaption:"Immagine",allowFiltering:void 0,edit:void 0,groupDataField:void 0},{type:"campo",colVisible:!0,allowEditing:!0,dataField:"categoryName",colWidth:"200",colCaption:"Categoria",edit:void 0,groupDataField:void 0},{type:"campo",colVisible:!0,allowEditing:!0,dataField:"parentCategory",colWidth:"90",colCaption:"Parent",edit:void 0,groupDataField:void 0},{type:"campoLista",colVisible:!0,allowEditing:!0,dataField:"status",colWidth:"110",colCaption:"Stato",allowFiltering:void 0,edit:void 0,groupDataField:void 0,lista:{valueExp:"id",displayExp:"value",multiple:!1,parent:null,remote:!1,options:[{id:"1",value:"Attivo"},{id:"0",value:"Non attivo"}]}},{type:"campoNumber",colVisible:!0,allowEditing:!0,dataField:"order",colWidth:"70",colCaption:"Ordine",edit:void 0,groupDataField:void 0},{type:"campoDateTime",colVisible:!0,allowEditing:!0,dataField:"createdAt",colWidth:"110",caption:"Creazione",colCaption:"Creazione",edit:void 0,groupDataField:void 0},{type:"campoDateTime",colVisible:!0,allowEditing:!0,dataField:"editedAt",colWidth:"110",colCaption:"Ultima modifica",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campo",colVisible:!0,allowEditing:!0,dataField:"gender",colWidth:"90",colCaption:"Genere",edit:void 0,groupDataField:void 0}],groupDataField:""}],this.outFitService=k(vr),this.route=k(vn),this.router=k(jt),this.outFitCategories=[],this.showGrid=!1,this.showSpinner=!1,this.title="Elenco Categorie degli outifi da mostrare nell'app",this.subTitle="",this.propertiesModal=k(nn),this.categoryId=null}ngOnInit(){return E(this,null,function*(){this.route.paramMap.subscribe(e=>{this.categoryId=e.get("id"),this.categoryId?(this.selectedCatOutfit=this.outFitService.mySignal(),this.title=`Elenco delle Sotto Categorie della Categoria:${this.selectedCatOutfit.categoryName}`,this.outFitCategories$=this.outFitService.getOutFitCategories(this.categoryId)):this.outFitCategories$=this.outFitService.getOutFitCategories()}),yield this.loadOutFitCategories()})}loadOutFitCategories(){return E(this,null,function*(){this.showGrid=!1,this.outFitCategories$.subscribe(e=>{this.outFitCategories=e,this.showGrid=!0})})}addCategoryOutfit(e){let i;this.categoryId&&(i={parentCategory:this.categoryId});let r={service:"outfitCategories",idData:i};this.createOrEditCategories(r)}editCategoryOutfit(e){e.cancel=!0,this.selectedCatOutfit=e.data;let i={service:"outfitCategories",editData:this.selectedCatOutfit};this.createOrEditCategories(i)}createOrEditCategories(e){let i=Math.random().toString().replace("0.","");this.propertiesModal.setNewPopUp(i,"DynamicFormComponent",null,800,null,e,!1,!0,"Modifica Outfit","",!1),this.propertiesModal.outputComponent.subscribe(r=>E(this,null,function*(){if(r.guid==i&&r.name=="submitForm"){let o=r.formData;o.parentCategory=o.parentCategory?o.parentCategory:"";let s,a=new Date;r.inEdit?(o.editedAt=a.getTime(),s=yield this.outFitService.updateOutfitCategories(o.id,o)):(o.editedAt=a.getTime(),o.createdAt=a.getTime(),s=yield this.outFitService.saveOutfitCategories(o)),s&&(this.selectedCatOutfit=this.categoryId?this.selectedCatOutfit:void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(i),this.outFitCategories$=this.outFitService.getOutFitCategories(this.categoryId),this.loadOutFitCategories())}r.guid==i&&r.name=="cancelForm"&&(this.selectedCatOutfit=this.categoryId?this.selectedCatOutfit:void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(i))}))}gridEvent(e){return E(this,null,function*(){console.log("gridEvent-->",e);let i=e.name,r=e.rowData;switch(i){case"delRows":let o=yield this.outFitService.removeOutfitCategories(r.id);break;default:break}})}dblClickRow(e){let i=e.rowData;this.outFitService.mySignal.set(e.rowData),this.router.navigate(["/outfit-category",i.id])}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-outfit-category"]],standalone:!0,features:[fe],decls:3,vars:7,consts:[[3,"emittEventButton","caption","subTitle","tip","addButtonShow","showSpinner"],["aria-label","breadcrumb",4,"ngIf"],[3,"colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable","emittendStartEdit","emittendGridEvent","emittendDblRowClick",4,"ngIf"],["aria-label","breadcrumb"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item"],["href","/outfit-category"],["aria-current","page",1,"breadcrumb-item","active"],[3,"emittendStartEdit","emittendGridEvent","emittendDblRowClick","colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0),$("emittEventButton",function(s){return r.addCategoryOutfit(s)}),G(1,C9,7,1,"nav",1)(2,E9,1,9,"app-data-grid",2),v()),i&2&&(b("caption",r.title)("subTitle",r.subTitle)("tip","Gestisci le categorie:crea,cancella,modifica....")("addButtonShow",!0)("showSpinner",!r.showGrid),w(),b("ngIf",r.selectedCatOutfit),w(),b("ngIf",r.showGrid))},dependencies:[lc,be,Ye,tn]})}}return n})();var D9=["imageElement"],S9=["fileInput"],I9=n=>({darken:n});function T9(n,t){n&1&&Q(0,"span")}function x9(n,t){if(n&1){let e=oe();_(0,"img",11,2),$("click",function(r){j(e);let o=x();return U(o.addTag(r))}),v()}if(n&2){let e=x();b("src",e.image(),Ln)("ngClass",Xt(2,I9,e.showTag()))}}function M9(n,t){if(n&1){let e=oe();_(0,"div",13),$("click",function(){let r=j(e).$implicit,o=x(2);return U(o.editTag(r))}),_(1,"div",14)(2,"div",15),N(3),v(),_(4,"div",16),N(5),v(),_(6,"div",17),N(7),v()()()}if(n&2){let e=t.$implicit,i=x(2);b("ngStyle",i.tagStyle[e.id]),w(3),Je(e.name),w(2),Je(e.brend),w(2),Je(e.prezzo)}}function A9(n,t){if(n&1&&(je(0),G(1,M9,8,4,"div",12),Ue()),n&2){let e=x();w(),b("ngForOf",e.tags())}}function O9(n,t){if(n&1){let e=oe();_(0,"button",18),$("click",function(){j(e);let r=x();return U(r.toggleTags())}),Q(1,"i",19),N(2),v()}if(n&2){let e=x();b("ngStyle",e.tagToggleButton),w(2),ke(" ",e.showTag()?"Nascondi Tags":"Mostra Tags"," ")}}function R9(n,t){if(n&1){let e=oe();_(0,"button",20),$("click",function(){j(e);let r=x();return U(r.chooseFile())}),N(1," Seleziona foto "),v()}}function P9(n,t){if(n&1){let e=oe();_(0,"span",21),$("click",function(){let r=j(e).$implicit,o=x();return U(o.editTag(r))}),_(1,"label"),N(2),v(),_(3,"button",22),$("click",function(){let r=j(e).$implicit,o=x();return U(o.removeTag(r.id))}),_(4,"i",23),N(5,"X"),v()()()}if(n&2){let e=t.$implicit;w(2),Je(e.name)}}var EN=(()=>{class n{constructor(){this.image=Qe(""),this.showTag=Qe(!1),this.tags=Qe([]),this.enableSetTagsImage=!0,this.enableNewImagecaptured=Qe(!0),this.eventFotoCaptured=new se,this.eventImageTags=new se,this.eventBeforeFotoCaptured=new se,this.eventImageShowFull=new se,this.tagStyle={},this.imageLoading=Qe(!0),this.tagToggleButton={},this.format="",this.openFullScreen=!1,this.propertiesModal=k(nn)}ngOnInit(){}ngAfterViewInit(){this.imageElement&&(this.imageElement.nativeElement.onload=e=>{this.imageLoading.set(!0),this.onImageLoad(e)},this.imageElement.nativeElement.onerror=()=>{this.imageLoading.set(!1)}),this.enableNewImagecaptured()&&this.imageLoading.set(!1)}onImageLoad(e){if(this.tags().length>0){let r=(this.imageElement?.nativeElement).getBoundingClientRect();this.setDisplayTag(r)}this.imageLoading.set(!1)}chooseFile(){this.fileInput.nativeElement.click()}captureImage(e){return E(this,null,function*(){if(this.tags.length>0&&typeof this.image<"u"&&!(yield this.confirmChangeFoto()))return;let i=e.target;if(i.files&&i.files[0]){let r=i.files[0];if(this.validateFile(r)){let o=new FileReader;this.imageLoading.set(!0),o.onload=s=>E(this,null,function*(){let a=s.target?.result;try{let u=r.type.replace("image/",""),d=yield this.resizeImage(a,600,600);this.image.set(d.dataUrl),this.imageLoading.set(!1)}catch(l){console.error("Errore durante il ridimensionamento dell'immagine:",l),this.imageLoading.set(!1)}}),o.readAsDataURL(r)}else Rn("File non valido. Seleziona un file immagine di dimensioni inferiori a 2MB.","Attenzione!")}})}validateFile(e){let r=["image/jpeg","image/png","image/gif"];return e.size<=5242880&&r.includes(e.type)}resizeImage(e,i,r){return new Promise((o,s)=>{let a=new Image;a.src=e,a.onload=()=>{let l=document.createElement("canvas"),u=l.getContext("2d"),d=a.width,f=a.height;if(d>i||f>r){let y=i/d,D=r/f,T=Math.min(y,D);d*=T,f*=T}l.width=d,l.height=f,u.drawImage(a,0,0,d,f);let m=l.toDataURL();o({dataUrl:m,format:m.split(";")[0].split("/")[1]})},a.onerror=l=>{s(l)}})}confirmChangeFoto(){return E(this,null,function*(){return new Promise(()=>E(this,null,function*(){return Ko("Procedendo perderai anche tutti i tag associati e la priorit\xE0 acquisita nell'elenco","Attenzione!",e=>{if(e){this.tags=Qe([]),this.image=Qe("");let i={tags:this.tags};this.eventImageTags.emit(i)}})}))})}editTag(e){return E(this,null,function*(){let i=yield this.openModal(e);if(Object.keys(i).length>0){let r=this.tags(),o=r.findIndex(u=>u.id==e.id),s=i.link?i.link:"#",a=i.Images?i.Images:"";a=i.images?i.images:a,a=i.imageUrl?i.imageUrl:a,r[o]={id:e.id,name:i.name,x:e.x,y:e.y,link:s,color:i.color,brend:i.brend,images:a,prezzo:i.prezzo,outfitCategory:i.outfitCategory,outfitSubCategory:i.outfitSubCategory},this.tags.set(r);let l={tags:this.tags()};this.eventImageTags.emit(l)}})}addTag(e){return E(this,null,function*(){if(!this.enableSetTagsImage){this.eventImageShowFull.emit();return}let i="",r="",o=yield this.openModal();if(Object.keys(o).length>0){let a=(this.imageElement?.nativeElement).getBoundingClientRect(),l=(e.clientX-a.left)/a.width,u=(e.clientY-a.top)/a.height,d=o.link?o.link:"#",f=o.brend?o.brend:null,m=o.prezzo?o.prezzo:null,y=o.id?o.id:o.name.replace(" ","_"),D=o.Images?o.Images:"";D=o.imageUrl?o.imageUrl:D;let T=[];T.push({id:y,name:o.name,x:l,y:u,link:d,color:o.color,brend:f,prezzo:m,price:m,images:D,outfitCategory:o.outfitCategory,outfitSubCategory:o.outfitSubCategory}),this.tags.set(T),this.setDisplayTag(a),this.setDisplayButtonTag(a);let R={tags:this.tags()};this.eventImageTags.emit(R)}})}setDisplayTag(e){this.tags().forEach(i=>{this.tagStyle[i.id]={left:`${i.x*e.width}px`,top:`${i.y*e.height}px`}})}toggleTags(){this.showTag.update(e=>!e)}setDisplayButtonTag(e){let i=.1*e.height,r=.05*e.width;this.tagToggleButton={bottom:`${i}px`,right:`${r}px`,position:"absolute",zIndex:10}}openModal(e){return E(this,null,function*(){console.log("openModal",e);let i=Math.random().toString().replace("0.",""),r={service:"tagForm",editData:e},o={};return this.propertiesModal.setNewPopUp(i,"DynamicFormComponent",null,800,null,r,!1,!0,"Modifica Tag","",!1),new Promise((s,a)=>{this.propertiesModal.outputComponent.subscribe(l=>E(this,null,function*(){if(l.guid===i){if(l.name==="functionalInputClick"&&(this.openOutfitProducts(),console.log("functionalInputClick-->",l)),l.name==="submitForm"){let u=l.formData;this.propertiesModal.destroyCurrentOpenPopUpByGuid(i),s(u)}l.name==="cancelForm"&&(this.propertiesModal.destroyCurrentOpenPopUpByGuid(i),s(!1))}}))});return this.propertiesModal.getOutputComponent(i)})}removeTag(e){let i=this.tags().filter(r=>r.id!==e);this.tags.set(i)}openOutfitProducts(){return E(this,null,function*(){let e=Math.random().toString().replace("0.","");this.propertiesModal.setNewPopUp(e,"OutfitProductsComponent",null,1e3,null,{},!0,!0,"Prodotti Outfit","",!0),this.propertiesModal.outputComponent.subscribe(i=>E(this,null,function*(){i.guid===e&&console.log(i)}))})}dataURLtoBlob(e){let i=e.split(","),r=i[0].match(/:(.*?);/)[1],o=atob(i[1]),s=o.length,a=new Uint8Array(s);for(;s--;)a[s]=o.charCodeAt(s);return new Blob([a],{type:r})}onImageError(e){e.target.src="assets/images/fallback-image.jpg"}closeModalFullScreen(){this.openFullScreen=!1}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-foto-outfit"]],viewQuery:function(i,r){if(i&1&&(At(D9,5),At(S9,5)),i&2){let o;Et(o=Dt())&&(r.imageElement=o.first),Et(o=Dt())&&(r.fileInput=o.first)}},inputs:{image:"image",showTag:"showTag",tags:"tags",enableSetTagsImage:"enableSetTagsImage",enableNewImagecaptured:"enableNewImagecaptured"},outputs:{eventFotoCaptured:"eventFotoCaptured",eventImageTags:"eventImageTags",eventBeforeFotoCaptured:"eventBeforeFotoCaptured",eventImageShowFull:"eventImageShowFull"},standalone:!0,features:[fe],decls:11,vars:7,consts:[["imageContainer",""],["fileInput",""],["imageElement",""],[1,"image-container"],[4,"ngIf"],["class","outfit-pin-image",3,"src","ngClass","click",4,"ngIf"],["type","file","hidden","","name","file",3,"change","ngModelChange","ngModel"],["class","btn button tag-toggle-button","id","toggle-button",3,"ngStyle","click",4,"ngIf"],["class","btn button select-photo",3,"click",4,"ngIf"],[1,"chips"],["class","chips-itm shadow-sm",3,"click",4,"ngFor","ngForOf"],[1,"outfit-pin-image",3,"click","src","ngClass"],["class","tag",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"tag",3,"click","ngStyle"],[1,"card-tag-content"],[1,"item-title"],[1,"item-brend"],[1,"item-price"],["id","toggle-button",1,"btn","button","tag-toggle-button",3,"click","ngStyle"],[1,"pricetags-outline"],[1,"btn","button","select-photo",3,"click"],[1,"chips-itm","shadow-sm",3,"click"],[1,"btn","button",3,"click"],[1,"close-circle"]],template:function(i,r){if(i&1){let o=oe();_(0,"div",3,0),G(2,T9,1,0,"span",4)(3,x9,2,4,"img",5)(4,A9,2,1,"ng-container",4),_(5,"input",6,1),$("change",function(a){return j(o),U(r.captureImage(a))}),Me("ngModelChange",function(a){return j(o),Pe(r.image,a)||(r.image=a),U(a)}),v(),G(7,O9,3,2,"button",7)(8,R9,2,0,"button",8),v(),_(9,"section",9),G(10,P9,6,1,"span",10),v()}i&2&&(w(2),b("ngIf",r.imageLoading()),w(),b("ngIf",r.image),w(),b("ngIf",r.showTag()),w(),xe("ngModel",r.image),w(2),b("ngIf",r.tags().length>0),w(),b("ngIf",r.enableNewImagecaptured),w(2),b("ngForOf",r.tags()))},dependencies:[be,Ot,lt,Ye,$n,Cn,Ci,qn,Jr],styles:[`@charset "UTF-8";.image-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;max-width:400px;flex-direction:column;background-color:#424242;position:relative}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:400px;border-bottom:2px solid #e0e0e0}.image-container[_ngcontent-%COMP%]   img.darken[_ngcontent-%COMP%]{opacity:.5}.image-container[_ngcontent-%COMP%]:before{content:"Carica un'immagine";color:#888;font-size:14px;position:absolute;text-align:center;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;display:none}.image-container[_ngcontent-%COMP%]:empty:before{display:block}.image-container[_ngcontent-%COMP%]   .select-photo[_ngcontent-%COMP%]{background:#424242;color:#fff}.image-container[_ngcontent-%COMP%]   #toggle-button[_ngcontent-%COMP%]{position:absolute;bottom:3px;right:3px;z-index:400;background:#0009;color:#fff;font-size:10px}.image-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{position:absolute;display:inline-block;z-index:1}.image-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .card-tag-content[_ngcontent-%COMP%]{font-size:13px;display:inline-block;width:auto;background-color:#fffc;transition:background-color .3s ease;border-radius:15px;padding:2px;margin:0;box-shadow:0 4px 6px #0000001a;position:relative;text-align:center}.image-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .card-tag-content[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{width:170px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700;color:#000}.image-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .card-tag-content[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#000;margin-top:5px}.chips[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:flex-start;align-items:center}.chips[_ngcontent-%COMP%]   .chips-itm[_ngcontent-%COMP%]{margin-right:5px;padding:3px 5px;border-radius:3px;background-color:#f0eeee;color:#000;font-size:12px;font-weight:700}.chips[_ngcontent-%COMP%]   .chips-itm[_ngcontent-%COMP%]:last-child{margin-right:0}.tag-toggle-button[_ngcontent-%COMP%]{z-index:1002;color:#fff}`]})}}return n})();var z1=(()=>{class n{constructor(){this.outfitData=Qe({}),this.activateRoute=k(vn),this.router=k(jt),this.outFitService=k(vr),this.popUpService=k(nn),this.subtitle="",this.outfitTitle="",this.imageUrl=Qe(""),this.tags=Qe([])}ngOnInit(){this.fetchDataOutfit()}fetchDataOutfit(){this.activateRoute.paramMap.subscribe(e=>E(this,null,function*(){if(this.outfitId=e.get("id"),this.outfitId){let i=yield this.outFitService.getOutfitById(this.outfitId);this.outfitData.set(i[0]),this.imageUrl.set(i[0].imageUrl),this.tags.set(this.outfitData().tags)}}))}setTags(e){this.tags.update(e.tags)}submitFormOutfit(e){return E(this,null,function*(){if(e.name=="cancelForm"){this.router.navigate(["/outfits"]);return}let i=e.inEdit,r=e.formData,o=[...this.tags()];o=o.reduce((l,u)=>(l.outfitCategory.includes(u.outfitCategory)||l.outfitCategory.push(u.outfitCategory),l.outfitSubCategory.includes(u.outfitSubCategory)||l.outfitSubCategory.push(u.outfitSubCategory),l.color.includes(u.color)||l.color.push(u.color),l),{outfitCategory:[],outfitSubCategory:[],color:[]});let s=new Date,a=r;a.tags=this.tags(),a=Y(Y({},a),o),i?(a.editedAt=new Date().getTime(),(yield this.outFitService.updateInCollection(a.id,a))?this.router.navigate(["/outfit-list"]):Rn("Si \xE8 verificato un errore durante il salvataggio dell'outfit","Errore durante il salvataggio dell'outfit")):(a.editedAt=new Date().getTime(),a.createdAt=new Date().getTime(),(yield this.outFitService.saveOutfitCollection(void 0,r))?this.router.navigate(["/outfit-list"]):Rn("Si \xE8 verificato un errore durante il salvataggio dell'outfit","Errore durante il salvataggio dell'outfit"))})}btnInputEvent(e){console.log("btnInputEvent",e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-outfit-form"]],standalone:!0,features:[fe],decls:3,vars:9,consts:[[3,"caption","subTitle","tip","addButtonShow","showSpinner"],[3,"eventImageTags","image","tags"],[3,"submitFormEvent","functionalInputFormEvent","editData","service"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0)(1,"app-foto-outfit",1),$("eventImageTags",function(s){return r.setTags(s)}),v(),_(2,"app-dynamic-form",2),$("submitFormEvent",function(s){return r.submitFormOutfit(s)})("functionalInputFormEvent",function(s){return r.btnInputEvent(s)}),v()()),i&2&&(b("caption",r.outfitTitle)("subTitle",r.subtitle)("tip","...")("addButtonShow",!1)("showSpinner",!1),w(),b("image",r.imageUrl)("tags",r.tags),w(),b("editData",r.outfitData())("service","outfitForm"))},dependencies:[tn,Zo,EN]})}}return n})();var Hi=(n,t)=>{let e=k(Ei),i=k(jt);return e.isLoggedUser()?!0:i.navigate(["login"])};var DN=(()=>{class n{constructor(e,i){this.usersService=e,this.router=i}login(e){return E(this,null,function*(){let i=e.formData;(yield this.usersService.loginUser(i))&&this.router.navigate(["dashboard"])})}static{this.\u0275fac=function(i){return new(i||n)(X(Ei),X(jt))}}static{this.\u0275cmp=he({type:n,selectors:[["app-login"]],standalone:!0,features:[fe],decls:2,vars:5,consts:[[3,"caption","cssClass"],[3,"submitFormEvent","service","showBottomButtonLeft","inputBtnRightName"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0)(1,"app-dynamic-form",1),$("submitFormEvent",function(s){return r.login(s)}),v()()),i&2&&(b("caption","Login")("cssClass","login-container"),w(),b("service","loginForm")("showBottomButtonLeft",!1)("inputBtnRightName","Accedi"))},dependencies:[Zo,be,tn],styles:[".content-wrap.login-container{width:600px}  .content-wrap.login-container .form-container .badge{display:none}  .content-wrap.login-container .form-footer .btn-submit-form{flex:1}"]})}}return n})();var q1=[{path:"dashboard",component:DM,canActivate:[Hi]},{path:"utenti",component:bN,canActivate:[Hi]},{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",component:DN},{path:"form-list",component:EP,canActivate:[Hi]},{path:"form-builder/:id",component:vN,canActivate:[Hi]},{path:"outfit-list",component:CN,canActivate:[Hi]},{path:"outfit-detail/:id",component:z1,canActivate:[Hi]},{path:"outfit-detail",component:z1,canActivate:[Hi]},{path:"outfit-category",component:H1,canActivate:[Hi]},{path:"outfit-category/:id",component:H1,canActivate:[Hi]},{path:"outfit-product-list",component:Tg,canActivate:[Hi]}],ice=Np(q1);var SN={providers:[Np(q1),{provide:U1,useValue:["localhost",4e3]},Z0(VM.initializeApp(Hn.firebase),bP,LM,fN,EM,Rx)]};var cc=(()=>{class n{constructor(){this.isOpenMenu=Qe(!1),this.isOpenMenuSubject=new wt(this.isOpenMenu())}get getIsMenuOpen(){return this.isOpenMenu.asReadonly()}get getIsMenuOpenObservable(){return this.isOpenMenuSubject.asObservable()}toggleMenu(){let e=!this.isOpenMenu();this.isOpenMenu.set(e),this.isOpenMenuSubject.next(e)}closeMenu(){this.isOpenMenu.set(!1),this.isOpenMenuSubject.next(!1)}openMenu(){this.isOpenMenu.set(!0),this.isOpenMenuSubject.next(!0)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var N9=["dynamicContent"];function F9(n,t){if(n&1){let e=oe();_(0,"div",14),$("mouseleave",function(r){j(e);let o=x();return U(o.toggleDropDownF(r))}),_(1,"div",15)(2,"h3",16),Q(3,"i",17),N(4),v(),Q(5,"h3"),_(6,"div",18),$("click",function(){j(e);let r=x();return U(r.logout())}),Q(7,"i",19),N(8," Logout "),v()()()}if(n&2){let e=x();w(4),Ss(" ",e.userProfile.nome," ",e.userProfile.cognome," ")}}var IN=(()=>{class n{constructor(e,i,r,o){this.menuService=e,this.router=i,this.userService=r,this.overlayService=o,this.toggleMenu=new se,this.showProfileInfo=!0}ngOnInit(){this.renderHeader(),this.checkRoute()}renderHeader(){let e=this.userService.InfoUtenteConnesso;this.userService.getUserProfile(e.uid).subscribe(i=>{this.userProfile=i,console.log("userProfile",i)})}onToggleMenu(){this.menuService.toggleMenu()}toggleDropDown(e){e.stopPropagation();let r=e.currentTarget.getBoundingClientRect(),o={top:r.bottom+window.scrollY,left:r.left+window.scrollX},s=window.innerWidth,a=220;o.left+a>s&&(o.left=s-a-10);let l={position:o,contentTemplate:this.dynamicContent,showBgOverlay:!1,index:0};this.overlayService.openOverlay(l)}toggleDropDownF(e){this.overlayService.closeOverlay()}logout(){return E(this,null,function*(){console.log("LOGOUT");let e=this.userProfile.uid;(yield this.userService.LogOut(e))&&this.router.navigate(["/login"])})}checkRoute(){let e=this.router.url;this.showProfileInfo=e!=="/login"}static{this.\u0275fac=function(i){return new(i||n)(X(cc),X(jt),X(Ei),X(yr))}}static{this.\u0275cmp=he({type:n,selectors:[["app-header"]],viewQuery:function(i,r){if(i&1&&At(N9,5),i&2){let o;Et(o=Dt())&&(r.dynamicContent=o.first)}},outputs:{toggleMenu:"toggleMenu"},standalone:!0,features:[fe],decls:15,vars:2,consts:[["dynamicContent",""],["href",QI`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css`,"rel","stylesheet"],["id","header",1,"header"],[1,"header-container"],[1,"item-left"],[1,"hamburger",3,"click"],[1,"mdi","mdi-menu"],[1,"item-center"],[1,"logo-container"],["src","assets/images/logo.jpg","alt","Logo",1,"logo-image"],[1,"item-right"],[1,"profile-info"],[1,"button-info",3,"click"],[1,"profile-img",3,"src","alt"],[1,"dropdown-window",3,"mouseleave"],[1,"dropdown-content"],[1,"userProfile"],[1,"fas","fa-user"],[1,"dropdown-item",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(i,r){if(i&1){let o=oe();Q(0,"link",1),_(1,"header",2)(2,"div",3)(3,"div",4)(4,"button",5),$("click",function(){return j(o),U(r.onToggleMenu())}),Q(5,"span",6),v()(),_(6,"div",7)(7,"div",8),Q(8,"img",9),v()(),_(9,"div",10)(10,"div",11)(11,"button",12),$("click",function(a){return j(o),U(r.toggleDropDown(a))}),Q(12,"img",13),v()()()()(),G(13,F9,9,2,"ng-template",null,0,fi)}i&2&&(w(12),b("src",r.userProfile.photoURL,Ln)("alt",r.userProfile.photoURL))},dependencies:[be],styles:[".header[_ngcontent-%COMP%]{background-color:#f1f1f1;height:65px;position:fixed;top:0;left:0;width:100%;z-index:1100;box-shadow:0 2px 5px #0000001a}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{max-height:var(--header_height);margin:auto;display:flex;flex-direction:row;flex-wrap:wrap;align-content:center;justify-content:space-between;align-items:center;color:var(--link-nav);gap:25px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]{display:none;background:#f1f1f1;color:var(--bianco);z-index:10002;position:absolute;display:block;top:0;left:0}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row;margin-left:10px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-center[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%]{margin:0 5px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{padding-left:10px;width:200px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo-image[_ngcontent-%COMP%]{max-width:100%;height:auto;margin-top:15px}.profile-info[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;cursor:pointer;padding:5px 20px}.profile-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:2px solid #fff;box-shadow:0 2px 2px #0000004d;transition:all .3s ease}.profile-img[_ngcontent-%COMP%]:hover{transform:scale(1.1);border-color:#fff}.dropdown-item[_ngcontent-%COMP%]{padding:10px 20px;cursor:pointer;transition:background .3s;color:#333}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#0000001a}.userProfile[_ngcontent-%COMP%]{cursor:no-drop}.hamburger[_ngcontent-%COMP%]   .mdi-menu[_ngcontent-%COMP%]{font-size:20px;color:var(--primary)}.button-info[_ngcontent-%COMP%]{background-color:transparent}"]})}}return n})();function K1(n){return Array.isArray(n)?n:[n]}var Q1;try{Q1=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Q1=!1}var TN=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?tv(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Q1)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(K(Wt))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xN=new Set,ga,V9=(()=>{class n{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):B9}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&L9(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(i){return new(i||n)(K(TN),K(nu,8))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function L9(n,t){if(!xN.has(n))try{ga||(ga=document.createElement("style"),t&&(ga.nonce=t),ga.setAttribute("type","text/css"),document.head.appendChild(ga)),ga.sheet&&(ga.sheet.insertRule(`@media ${n} {body{ }}`,0),xN.add(n))}catch(e){console.error(e)}}function B9(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var xg=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new Le}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return MN(K1(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=MN(K1(e)).map(s=>this._registerQuery(s).observable),o=cs(r);return o=Wi(o.pipe(gn(1)),o.pipe(Rh(1),T_(0))),o.pipe(ee(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:u})=>{a.matches=a.matches||l,a.breakpoints[u]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),o={observable:new ye(s=>{let a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Ki(i),ee(({matches:s})=>({query:e,matches:s})),Jt(this._destroySubject)),mql:i};return this._queries.set(e,o),o}static{this.\u0275fac=function(i){return new(i||n)(K(V9),K(Fe))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function MN(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var Xo={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function j9(n,t){if(n&1){let e=oe();_(0,"li",3)(1,"a",4),$("click",function(){let r=j(e).$implicit,o=x();return U(o.navigateTo(r.path))}),Q(2,"span",5),_(3,"span",6),N(4),v()()()}if(n&2){let e=t.$implicit;w(),b("href",e.path,Ln),jn("aria-label",e.label)("data-bs-original-title",e.label),w(),b("ngClass",e.icon),w(2),Je(e.label)}}var ON=(()=>{class n{constructor(e,i){this.menuService=e,this.breakpointObserver=i,this.isMenuOpen=!1,this.mode="side",this.toggleMenu=()=>{},this.getIsMenuOpenObservable=this.menuService.getIsMenuOpenObservable,this.allMenu=[{path:"dashboard",label:"Dashboard",icon:"mdi mdi-view-dashboard-outline"},{path:"utenti",label:"Utenti Registrati",icon:"mdi mdi-account-multiple-outline"},{path:"form-list",label:"Gestione form e viste",icon:"mdi mdi-cog-outline"},{path:"outfit-list",label:"Lista outfit ",icon:"mdi mdi-wardrobe-outline"},{path:"outfit-category",label:"Lista categorie outfit ",icon:"mdi mdi-wardrobe-outline"},{path:"outfit-product-list",label:"Gestione prodotti e feed",icon:"mdi mdi-tshirt-v-outline"}]}ngOnInit(){this.menuService.getIsMenuOpenObservable.subscribe(e=>{this.isMenuOpen=e})}navigateTo(e){this.menuService.closeMenu()}toggleMenuState(){this.menuService.toggleMenu(),console.log("Stato del menu aggiornato:",this.menuService.getIsMenuOpen())}static{this.\u0275fac=function(i){return new(i||n)(X(cc),X(xg))}}static{this.\u0275cmp=he({type:n,selectors:[["app-menu"]],inputs:{toggleMenu:"toggleMenu"},standalone:!0,features:[fe],decls:4,vars:5,consts:[[1,"menu-container"],[1,"nav","nav-pills","nav-flush","flex-column","mb-auto","text-center","menu-list"],["class","nav-item menu-item",4,"ngFor","ngForOf"],[1,"nav-item","menu-item"],["aria-current","page","data-bs-toggle","tooltip","data-bs-placement","right",1,"nav-link",3,"click","href"],[1,"menu-icon",3,"ngClass"],[1,"menu-label","text"]],template:function(i,r){i&1&&(_(0,"div",0),Is(1,"async"),_(2,"ul",1),G(3,j9,5,5,"li",2),v()()),i&2&&(Pr("open",Ts(1,3,r.getIsMenuOpenObservable)),w(3),b("ngForOf",r.allMenu))},dependencies:[be,Ot,lt,cp],styles:[".menu-container[_ngcontent-%COMP%]{width:auto;transition:transform .3s ease;background-color:#fff;box-shadow:2px 0 5px #0000001a;overflow:hidden}.menu-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:70px 0 0}.menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px;cursor:pointer}.menu-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:0;font-size:16px}.menu-item[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:10px}"]})}}return n})();var U9=(n,t,e)=>({"menu-over":n,"menu-side":t,"menu-push":e}),$9=n=>({open:n});function G9(n,t){if(n&1){let e=oe();_(0,"app-header",4),$("showHidemMenu",function(r){j(e);let o=x();return U(o.toggleMenu(r))}),v()}if(n&2){let e=x();b("toggleMenu",e.toggleMenu)}}function H9(n,t){if(n&1&&(_(0,"div",5),Q(1,"app-menu"),v()),n&2){let e=x();b("ngClass",Xt(1,$9,e.isMenuOpen))}}var RN=(()=>{class n{constructor(e,i,r){this.userService=e,this.menuService=i,this.breakpointObserver=r,this.isClose=!1,this.isLogin=!1,this.idTipoUtente=-1,this.mode="side",this.getIsMenuOpenObservable=this.menuService.getIsMenuOpenObservable,this.isMenuOpen=!1,xs(()=>{this.isLogin=this.userService.isLoginUser()})}ngOnInit(){this.isLogin=this.userService.isLoggedUser(),this.updateMenuVisibility(window.innerWidth),this.breakpointObserver.observe([Xo.XSmall,Xo.Small,Xo.Medium,Xo.Large]).subscribe(e=>{console.log("result",e),e.breakpoints[Xo.XSmall]||e.breakpoints[Xo.Small]?this.mode="over":e.breakpoints[Xo.Medium]?this.mode="side":this.mode="push"})}updateMenuVisibility(e){e>1024?this.isMenuOpen=!0:this.isMenuOpen=!1,console.log(""+this.isMenuOpen)}toggleMenu(e){this.isMenuOpen=!this.isMenuOpen}static{this.\u0275fac=function(i){return new(i||n)(X(Ei),X(cc),X(xg))}}static{this.\u0275cmp=he({type:n,selectors:[["app-container"]],standalone:!0,features:[fe],decls:6,vars:7,consts:[[1,"mi-container",3,"ngClass"],[3,"toggleMenu","showHidemMenu",4,"ngIf"],["class","verticalMenucontainer sidebar",3,"ngClass",4,"ngIf"],[1,"container","no-padding","ana-container"],[3,"showHidemMenu","toggleMenu"],[1,"verticalMenucontainer","sidebar",3,"ngClass"]],template:function(i,r){i&1&&(_(0,"main",0),je(1),G(2,G9,1,1,"app-header",1)(3,H9,2,3,"div",2),Ue(),_(4,"div",3),Q(5,"router-outlet"),v()()),i&2&&(b("ngClass",rr(3,U9,r.mode==="over",r.mode==="side",r.mode==="push")),w(2),b("ngIf",r.isLogin),w(),b("ngIf",r.isLogin))},dependencies:[be,Ot,Ye,Kv,IN,ON],styles:[".mi-container.menu-over[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{position:fixed;top:65px;left:0;width:100%;height:calc(100% - 65px);background-color:#fff;box-shadow:0 2px 5px #0000001a;transform:translate(-100%);transition:transform .3s ease;z-index:1000}.mi-container.menu-over[_ngcontent-%COMP%]   .menu-container.open[_ngcontent-%COMP%]{transform:translate(0)}.mi-container.menu-side[_ngcontent-%COMP%]   .ana-container[_ngcontent-%COMP%]{margin-left:100px}.mi-container.menu-push[_ngcontent-%COMP%]   .ana-container[_ngcontent-%COMP%]{margin-left:250px}.mi-container[_ngcontent-%COMP%]   .verticalMenucontainer[_ngcontent-%COMP%]{position:absolute;left:0;overflow-x:hidden;overflow-y:auto;z-index:1001;box-sizing:border-box;border:1px solid var(--border_color)}  .menu-open .hamburger{background:var(--bianco)!important;color:var(--primary)!important}"]})}}return n})();var z9=["overlayContent"],q9=n=>({"bg-overlay":n}),W9=(n,t)=>({top:n,left:t});function K9(n,t){if(n&1&&Q(0,"div",3),n&2){let e=x();b("ngClass",Xt(1,q9,e.showBgOverlay))}}function Q9(n,t){n&1&&Fy(0)}function Y9(n,t){if(n&1&&(_(0,"div",4,0),G(2,Q9,1,0,"ng-container",5),v()),n&2){let e=x();b("ngStyle",ir(3,W9,e.position().top+"px",e.position().left+"px")),w(2),b("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",e.templateContext)}}var PN=(()=>{class n{constructor(e){this.overlayService=e,this.templateContext={},this.showBgOverlay=!0,this.isVisible=Qe(!1),this.position=Qe({top:0,left:0}),this.closed=new se,this.overlaySubscription=new vt}clickOutside(e){setTimeout(()=>{let i=e.target;this.overlayContentRef&&!this.overlayContentRef.nativeElement.contains(i)&&this.isVisible()&&this.closeOverlay()},600)}ngOnInit(){this.overlaySubscription.add(this.overlayService.overlayData$.subscribe(e=>{if(!e){this.isVisible.set(!1);return}this.contentTemplate=e?.contentTemplate||null,this.openOverlay(e.position),this.showBgOverlay=e.showBgOverlay}))}openOverlay(e){this.position.set(e),this.isVisible.set(!0),setTimeout(()=>{document.querySelector(".overlay-content")?.classList.add("active")},10)}ngOnDestroy(){this.overlaySubscription.unsubscribe()}closeOverlay(){document.querySelector(".overlay-content")?.classList.remove("active"),setTimeout(()=>{this.isVisible.set(!1),this.overlayService.closeOverlay()},200)}static{this.\u0275fac=function(i){return new(i||n)(X(yr))}}static{this.\u0275cmp=he({type:n,selectors:[["app-overlay"]],viewQuery:function(i,r){if(i&1&&At(z9,5),i&2){let o;Et(o=Dt())&&(r.overlayContentRef=o.first)}},hostBindings:function(i,r){i&1&&$("click",function(s){return r.clickOutside(s)},!1,JI)},inputs:{contentTemplate:"contentTemplate",templateContext:"templateContext",showBgOverlay:"showBgOverlay"},outputs:{closed:"closed"},standalone:!0,features:[fe],decls:2,vars:2,consts:[["overlayContent",""],["class","overlay-backdrop",3,"ngClass",4,"ngIf"],["class","overlay-content",3,"ngStyle",4,"ngIf"],[1,"overlay-backdrop",3,"ngClass"],[1,"overlay-content",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){i&1&&G(0,K9,1,3,"div",1)(1,Y9,3,6,"div",2),i&2&&(b("ngIf",!1),w(),b("ngIf",r.isVisible()))},dependencies:[be,Ot,Ye,Xy,$n],styles:[".overlay-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;cursor:pointer}.overlay-backdrop.bg-overlay[_ngcontent-%COMP%]{background-color:#0000004d}.overlay-content[_ngcontent-%COMP%]{position:absolute;min-width:1px;min-height:1px;background-color:#fff;box-shadow:0 4px 8px #0003;padding:10px;border-radius:4px;z-index:999999;display:flex;flex-direction:column;transition:opacity .2s ease,transform .2s ease;opacity:0;transform:translateY(-10px)}.overlay-content.active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}@media (max-width: 768px){.overlay-content[_ngcontent-%COMP%]{width:90vw;left:5vw!important}}"]})}}return n})();var J9=["containerComponent"],Z9=(n,t)=>({display:n,"z-index":t}),X9=n=>({"position-bottom":n}),e6=(n,t)=>({"max-width":n,width:t});function t6(n,t){if(n&1){let e=oe();_(0,"app-caption",6),$("emitChiusura",function(r){j(e);let o=x();return U(o.emettiChiusura(r))}),v()}if(n&2){let e=x();b("caption",e.titlePopUp)("isClosable",e.isClosablePopUp)("cssClass","modal")("help","")}}function n6(n,t){if(n&1){let e=oe();_(0,"app-caption",7),$("emitChiusura",function(r){j(e);let o=x();return U(o.emettiChiusura(r))}),v()}if(n&2){let e=x();b("isFooter",e.showCaptionFooter)}}var NN=(()=>{class n{constructor(e){this.popUpService=e,this.outputEmit=new se,this.showCaptionHeader=!1,this.showCaptionFooter=!1,this.isPanelVisible=!1,this.zIndex=500,this.popUpWidth=null,this.isClosablePopUp=!1,this.position="center"}ngOnChanges(e){this.infoPopUp.popUpWidth&&(this.popUpWidth=this.infoPopUp.popUpWidth+"px"),this.infoPopUp.showCaptionHeader&&(this.showCaptionHeader=this.infoPopUp.showCaptionHeader),this.infoPopUp.showCaptionFooter&&(this.showCaptionFooter=this.infoPopUp.showCaptionFooter),this.infoPopUp.title&&(this.titlePopUp=this.infoPopUp.title),this.infoPopUp.class&&(this.classFade=this.infoPopUp.class)}get getMaxZIndex(){let e=document.querySelectorAll(".modal"),i=[];return e.forEach(r=>{r.classList.contains("modal-dialog")||i.push(parseFloat(window.getComputedStyle(r).zIndex))}),Math.max(...i);return Math.max(...Array.from(document.querySelectorAll("div.dx-overlay-content"),r=>parseFloat(window.getComputedStyle(r).zIndex)).filter(r=>!Number.isNaN(r)),0)}ngOnInit(){return E(this,null,function*(){this.isPanelVisible=!0,this.zIndexModalDialog=this.getMaxZIndex+1;let e=this.infoPopUp.componentName;this.accessoringData=this.infoPopUp.accessoringData,this.position=this.infoPopUp.position;let i=this.popUpService.getComponentByName(e),r=this.containerComponent.createComponent(i);r.instance.itemData=this.infoPopUp.dataToSend,r.instance.cssClass="modal-content ",this.componentName=e,this.idPopUp=this.infoPopUp.id,this.infoPopUp.popUpWidth&&(this.popUpWidth=this.infoPopUp.popUpWidth+"px"),this.infoPopUp.showCaptionHeader&&(this.showCaptionHeader=this.infoPopUp.showCaptionHeader),this.infoPopUp.showCaptionFooter&&(this.showCaptionFooter=this.infoPopUp.showCaptionFooter),this.infoPopUp.title&&(this.titlePopUp=this.infoPopUp.title),this.infoPopUp.class&&(this.classFade=this.infoPopUp.class),this.isClosablePopUp=typeof this.infoPopUp.isClosable<"u"?this.infoPopUp.isClosable:!1;let o=r.instance;if(typeof this.infoPopUp.instancedData<"u"){let s=this.infoPopUp.instancedData;for(let a in s)o[a]=s[a]}for(let s in o)r.instance[s]instanceof se&&r.instance[s].subscribe(a=>{try{let l;typeof a=="boolean"?(l={componentName:e,accessoringData:this.accessoringData,guid:this.idPopUp,name:s},a=l):(a.componentName=e,a.accessoringData=this.accessoringData,a.guid=this.idPopUp,typeof a.name>"u"&&(a.name=s))}catch{}finally{this.popUpService.setOutputComponent(a)}})})}ngAfterViewInit(){}emettiChiusura(e){this.idPopUp?this.popUpService.destroyCurrentOpenPopUpByGuid(this.idPopUp):this.popUpService.destroyCurrentOpenPopUp(this.componentName);let i={guid:this.idPopUp,name:"stochiudendo"};this.popUpService.setOutputComponent(i),this.popUpService.destroyOutputComponent()}static{this.\u0275fac=function(i){return new(i||n)(X(nn))}}static{this.\u0275cmp=he({type:n,selectors:[["app-modal-popup-content"]],viewQuery:function(i,r){if(i&1&&At(J9,7,Bn),i&2){let o;Et(o=Dt())&&(r.containerComponent=o.first)}},inputs:{infoPopUp:"infoPopUp",index:"index",componentName:"componentName",classePopup:"classePopup"},outputs:{outputEmit:"outputEmit"},standalone:!0,features:[xn,fe],decls:6,vars:16,consts:[["containerComponent",""],["tabindex","-1","role","dialog",1,"modal","popup",3,"ngStyle","ngClass","id"],[1,"modal-dialog","formEditPopup",3,"id","ngStyle"],[3,"caption","isClosable","cssClass","help","emitChiusura",4,"ngIf"],[1,"modal-content"],[3,"isFooter","emitChiusura",4,"ngIf"],[3,"emitChiusura","caption","isClosable","cssClass","help"],[3,"emitChiusura","isFooter"]],template:function(i,r){i&1&&(_(0,"div",1)(1,"div",2),G(2,t6,1,4,"app-caption",3),Q(3,"div",4,0),G(5,n6,1,1,"app-caption",5),v()()),i&2&&(b("ngStyle",ir(8,Z9,r.isPanelVisible?"block":"none",r.zIndexModalDialog))("ngClass",Xt(11,X9,r.position=="bottom"))("ngClass",r.classFade)("id",r.idPopUp),w(),b("id",r.idPopUp)("ngStyle",ir(13,e6,r.popUpWidth?r.popUpWidth:"",r.popUpWidth?r.popUpWidth:"")),w(),b("ngIf",r.showCaptionHeader),w(3),b("ngIf",r.showCaptionFooter))},dependencies:[kp,be,Ot,Ye,$n],styles:[".popup{z-index:500;pointer-events:auto;background-color:#fffc}  .popup .modal-dialog{max-width:90%;border:1px solid var(--primary);background:#fff;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px #0000002d;border-radius:4px;pointer-events:auto;width:fit-content}  .popup .modal-dialog .caption-container.modal{border:1px solid var(--border_color)}  .popup .modal-dialog .modal-content{border:none;box-sizing:border-box;background:transparent}  .popup .modal-dialog .modal-content .formEdit{background:var(--bg-grey)}  .position-bottom .modal-dialog{z-index:501;bottom:2rem;left:0;right:0;position:fixed;max-width:96%;background:transparent}.fade-in-fwd[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fade-in-fwd .4s cubic-bezier(.39,.575,.565,1) both;animation:_ngcontent-%COMP%_fade-in-fwd .4s cubic-bezier(.39,.575,.565,1) both}@-webkit-keyframes _ngcontent-%COMP%_fade-in-fwd{0%{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@keyframes _ngcontent-%COMP%_fade-in-fwd{0%{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}.fade-out-bck[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fade-out-bck .7s cubic-bezier(.25,.46,.45,.94) both;animation:_ngcontent-%COMP%_fade-out-bck .7s cubic-bezier(.25,.46,.45,.94) both}@keyframes _ngcontent-%COMP%_fade-out-bck{0%{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}to{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}}.slide-center[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_slide-center-fw .7s cubic-bezier(.25,.46,.45,.94) none;animation:_ngcontent-%COMP%_slide-center-fw .7s cubic-bezier(.25,.46,.45,.94) none}@keyframes _ngcontent-%COMP%_slide-center-fw{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}to{-webkit-transform:translateZ(160px);transform:translateZ(160px)}}  .modal-content .modal-data-grid-wrapper{margin:auto}"]})}}return n})();function i6(n,t){if(n&1&&(_(0,"div"),Q(1,"app-modal-popup-content",2),v()),n&2){let e=t.$implicit,i=t.index,r=x();w(),b("infoPopUp",e)("index",i)("componentName",e.componentName)("classePopup",r.classe)}}var FN=(()=>{class n{constructor(){this.popups=[],this.classSlideCenter="slide-center",this.classFadeIn="fade-in-fwd",this.popUpService=k(nn)}ngOnInit(){this.popUpService.popupsSet.subscribe(e=>{e.forEach((i,r)=>{i.action=="added"&&(i.action="setted",i.class=this.classSlideCenter,this.popups.push(i)),i.action=="update"&&(i.action="setted",i.class="fade-out-bck",this.popups.splice(r,1),i.class=this.classSlideCenter,setTimeout(()=>{this.popups.push(i)},500)),i.action=="remove"&&(i.class="fade-out-bck",setTimeout(()=>{this.popups.splice(r,1)},300))})})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-modal-popup-wrapper"]],standalone:!0,features:[fe],decls:2,vars:1,consts:[[1,"row"],[4,"ngFor","ngForOf"],[3,"infoPopUp","index","componentName","classePopup"]],template:function(i,r){i&1&&(_(0,"div",0),G(1,i6,2,4,"div",1),v()),i&2&&(w(),b("ngForOf",r.popups))},dependencies:[be,lt,NN]})}}return n})();var kN=(()=>{class n{constructor(){this.title="Admin"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-root"]],standalone:!0,features:[fe],decls:3,vars:0,template:function(i,r){i&1&&Q(0,"app-container")(1,"app-modal-popup-wrapper")(2,"app-overlay")},dependencies:[RN,PN,FN]})}}return n})();Ux(kN,SN).catch(n=>console.error(n));
