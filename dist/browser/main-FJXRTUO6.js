import{a as jE,b as Wd,c as UE,d as $E,e as Xg,f as Sc}from"./chunk-HCJFOUJG.js";import"./chunk-VKYYVJIS.js";import{A as mt,B as ts,C as Gi,D as Qd,E as Dc,H as WE,I as Yd,J as Jd,K as si,L as nn,a as Y,b as Ee,c as Qg,d as E,e as GE,i as Yg,j as HE,k as Ec,q as Jg,r as Kd,s as zE,t as qE,v as Zg}from"./chunk-7UO3AAGR.js";function iF(n,t){return Object.is(n,t)}var Qt=null,Ic=!1,Zd=1,vr=Symbol("SIGNAL");function ze(n){let t=Qt;return Qt=n,t}function rF(){return Ic}var Xd={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function t_(n){if(Ic)throw new Error("");if(Qt===null)return;Qt.consumerOnSignalRead(n);let t=Qt.nextProducerIndex++;if(pa(Qt),t<Qt.producerNode.length&&Qt.producerNode[t]!==n&&Tc(Qt)){let e=Qt.producerNode[t];th(e,Qt.producerIndexOfThis[t])}Qt.producerNode[t]!==n&&(Qt.producerNode[t]=n,Qt.producerIndexOfThis[t]=Tc(Qt)?JE(n,Qt,t):0),Qt.producerLastReadVersion[t]=n.version}function oF(){Zd++}function sF(n){if(!(Tc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Zd)){if(!n.producerMustRecompute(n)&&!eh(n)){n.dirty=!1,n.lastCleanEpoch=Zd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Zd}}function KE(n){if(n.liveConsumerNode===void 0)return;let t=Ic;Ic=!0;try{for(let e of n.liveConsumerNode)e.dirty||YE(e)}finally{Ic=t}}function QE(){return Qt?.consumerAllowSignalWrites!==!1}function YE(n){n.dirty=!0,KE(n),n.consumerMarkedDirty?.(n)}function n_(n){return n&&(n.nextProducerIndex=0),ze(n)}function i_(n,t){if(ze(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Tc(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)th(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function eh(n){pa(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(sF(e),i!==e.version))return!0}return!1}function r_(n){if(pa(n),Tc(n))for(let t=0;t<n.producerNode.length;t++)th(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function JE(n,t,e){if(ZE(n),pa(n),n.liveConsumerNode.length===0)for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=JE(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function th(n,t){if(ZE(n),pa(n),n.liveConsumerNode.length===1)for(let i=0;i<n.producerNode.length;i++)th(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];pa(r),r.producerIndexOfThis[i]=t}}function Tc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function pa(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function ZE(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function aF(){throw new Error}var XE=aF;function eD(){XE()}function tD(n){XE=n}var lF=null;function nD(n){let t=Object.create(o_);t.value=n;let e=()=>(t_(t),t.value);return e[vr]=t,e}function nh(n,t){QE()||eD(),n.equal(n.value,t)||(n.value=t,cF(n))}function iD(n,t){QE()||eD(),nh(n,t(n.value))}var o_=Ee(Y({},Xd),{equal:iF,value:void 0});function cF(n){n.version++,oF(),KE(n),lF?.()}function rD(n,t,e){let i=Object.create(uF);e&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=t;let r=l=>{i.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function s(l){o(l)||(r_(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=e_)}let a=()=>{if(i.fn===null)return;if(rF())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!eh(i))return;i.hasRun=!0;let l=n_(i);try{i.cleanupFn(),i.cleanupFn=e_,i.fn(r)}finally{i_(i,l)}};return i.ref={notify:()=>YE(i),run:a,cleanup:()=>i.cleanupFn(),destroy:()=>s(i),[vr]:i},i.ref}var e_=()=>{},uF=Ee(Y({},Xd),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:e_});function _e(n){return typeof n=="function"}function ma(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ih=ma(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function ns(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var gt=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(_e(i))try{i()}catch(o){t=o instanceof ih?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{oD(o)}catch(s){t=t??[],s instanceof ih?t=[...t,...s.errors]:t.push(s)}}if(t)throw new ih(t)}}add(t){var e;if(t&&t!==this)if(this.closed)oD(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&ns(e,t)}remove(t){let{_finalizers:e}=this;e&&ns(e,t),t instanceof n&&t._removeParent(this)}};gt.EMPTY=(()=>{let n=new gt;return n.closed=!0,n})();var s_=gt.EMPTY;function rh(n){return n instanceof gt||n&&"closed"in n&&_e(n.remove)&&_e(n.add)&&_e(n.unsubscribe)}function oD(n){_e(n)?n():n.unsubscribe()}var Ei={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ga={setTimeout(n,t,...e){let{delegate:i}=ga;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=ga;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function oh(n){ga.setTimeout(()=>{let{onUnhandledError:t}=Ei;if(t)t(n);else throw n})}function is(){}var sD=a_("C",void 0,void 0);function aD(n){return a_("E",void 0,n)}function lD(n){return a_("N",n,void 0)}function a_(n,t,e){return{kind:n,value:t,error:e}}var rs=null;function _a(n){if(Ei.useDeprecatedSynchronousErrorHandling){let t=!rs;if(t&&(rs={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=rs;if(rs=null,e)throw i}}else n()}function cD(n){Ei.useDeprecatedSynchronousErrorHandling&&rs&&(rs.errorThrown=!0,rs.error=n)}var os=class extends gt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,rh(t)&&t.add(this)):this.destination=fF}static create(t,e,i){return new wr(t,e,i)}next(t){this.isStopped?c_(lD(t),this):this._next(t)}error(t){this.isStopped?c_(aD(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?c_(sD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dF=Function.prototype.bind;function l_(n,t){return dF.call(n,t)}var u_=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){sh(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){sh(i)}else sh(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){sh(e)}}},wr=class extends os{constructor(t,e,i){super();let r;if(_e(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&Ei.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&l_(t.next,o),error:t.error&&l_(t.error,o),complete:t.complete&&l_(t.complete,o)}):r=t}this.destination=new u_(r)}};function sh(n){Ei.useDeprecatedSynchronousErrorHandling?cD(n):oh(n)}function hF(n){throw n}function c_(n,t){let{onStoppedNotification:e}=Ei;e&&ga.setTimeout(()=>e(n,t))}var fF={closed:!0,next:is,error:hF,complete:is};var ya=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rn(n){return n}function d_(...n){return h_(n)}function h_(n){return n.length===0?rn:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var ye=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=mF(e)?e:new wr(e,i,r);return _a(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=uD(i),new i((r,o)=>{let s=new wr({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[ya](){return this}pipe(...e){return h_(e)(this)}toPromise(e){return e=uD(e),new e((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=t=>new n(t),n})();function uD(n){var t;return(t=n??Ei.Promise)!==null&&t!==void 0?t:Promise}function pF(n){return n&&_e(n.next)&&_e(n.error)&&_e(n.complete)}function mF(n){return n&&n instanceof os||pF(n)&&rh(n)}function f_(n){return _e(n?.lift)}function Se(n){return t=>{if(f_(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function we(n,t,e,i,r){return new p_(n,t,e,i,r)}var p_=class extends os{constructor(t,e,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function va(){return Se((n,t)=>{let e=null;n._refCount++;let i=we(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var wa=class extends ye{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,f_(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new gt;let e=this.getSubject();t.add(this.source.subscribe(we(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=gt.EMPTY)}return t}refCount(){return va()(this)}};var dD=ma(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new ah(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new dD}next(e){_a(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){_a(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){_a(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?s_:(this.currentObservers=null,o.push(e),new gt(()=>{this.currentObservers=null,ns(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new ye;return e.source=this,e}}return n.create=(t,e)=>new ah(t,e),n})(),ah=class extends qe{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:s_}};var xt=class extends qe{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var xc={now(){return(xc.delegate||Date).now()},delegate:void 0};var lh=class extends qe{constructor(t=1/0,e=1/0,i=xc){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=e.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var ch=class extends gt{constructor(t,e){super()}schedule(t,e=0){return this}};var Mc={setInterval(n,t,...e){let{delegate:i}=Mc;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Mc;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var ba=class extends ch{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,i=0){return Mc.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Mc.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,ns(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var Ca=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};Ca.now=xc.now;var Ea=class extends Ca{constructor(t,e=Ca.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var Da=new Ea(ba),m_=Da;var uh=class extends ba{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(t,e,i):(t.flush(this),0)}};var dh=class extends Ea{};var g_=new dh(uh);var qt=new ye(n=>n.complete());function hh(n){return n&&_e(n.schedule)}function __(n){return n[n.length-1]}function Jr(n){return _e(__(n))?n.pop():void 0}function Hi(n){return hh(__(n))?n.pop():void 0}function hD(n,t){return typeof __(n)=="number"?n.pop():t}var Sa=n=>n&&typeof n.length=="number"&&typeof n!="function";function fh(n){return _e(n?.then)}function ph(n){return _e(n[ya])}function mh(n){return Symbol.asyncIterator&&_e(n?.[Symbol.asyncIterator])}function gh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function gF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _h=gF();function yh(n){return _e(n?.[_h])}function vh(n){return UE(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield Wd(e.read());if(r)return yield Wd(void 0);yield yield Wd(i)}}finally{e.releaseLock()}})}function wh(n){return _e(n?.getReader)}function Ue(n){if(n instanceof ye)return n;if(n!=null){if(ph(n))return _F(n);if(Sa(n))return yF(n);if(fh(n))return vF(n);if(mh(n))return fD(n);if(yh(n))return wF(n);if(wh(n))return bF(n)}throw gh(n)}function _F(n){return new ye(t=>{let e=n[ya]();if(_e(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yF(n){return new ye(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function vF(n){return new ye(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,oh)})}function wF(n){return new ye(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function fD(n){return new ye(t=>{CF(n,t).catch(e=>t.error(e))})}function bF(n){return fD(vh(n))}function CF(n,t){var e,i,r,o;return jE(this,void 0,void 0,function*(){try{for(e=$E(n);i=yield e.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})}function Pn(n,t,e,i=0,r=!1){let o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Dn(n,t=0){return Se((e,i)=>{e.subscribe(we(i,r=>Pn(i,n,()=>i.next(r),t),()=>Pn(i,n,()=>i.complete(),t),r=>Pn(i,n,()=>i.error(r),t)))})}function Di(n,t=0){return Se((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function pD(n,t){return Ue(n).pipe(Di(t),Dn(t))}function mD(n,t){return Ue(n).pipe(Di(t),Dn(t))}function gD(n,t){return new ye(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function _D(n,t){return new ye(e=>{let i;return Pn(e,t,()=>{i=n[_h](),Pn(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>_e(i?.return)&&i.return()})}function bh(n,t){if(!n)throw new Error("Iterable cannot be null");return new ye(e=>{Pn(e,t,()=>{let i=n[Symbol.asyncIterator]();Pn(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function yD(n,t){return bh(vh(n),t)}function vD(n,t){if(n!=null){if(ph(n))return pD(n,t);if(Sa(n))return gD(n,t);if(fh(n))return mD(n,t);if(mh(n))return bh(n,t);if(yh(n))return _D(n,t);if(wh(n))return yD(n,t)}throw gh(n)}function Le(n,t){return t?vD(n,t):Ue(n)}function ce(...n){let t=Hi(n);return Le(n,t)}function Ia(n,t){let e=_e(n)?n:()=>n,i=r=>r.error(e());return new ye(t?r=>t.schedule(i,0,r):i)}function y_(n){return!!n&&(n instanceof ye||_e(n.lift)&&_e(n.subscribe))}var Si=ma(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Nn(n,t){let e=typeof t=="object";return new Promise((i,r)=>{let o=!1,s;n.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):e?i(t.defaultValue):r(new Si)}})})}function wD(n){return n instanceof Date&&!isNaN(n)}function ne(n,t){return Se((e,i)=>{let r=0;e.subscribe(we(i,o=>{i.next(n.call(t,o,r++))}))})}var{isArray:EF}=Array;function DF(n,t){return EF(t)?n(...t):n(t)}function Ta(n){return ne(t=>DF(n,t))}var{isArray:SF}=Array,{getPrototypeOf:IF,prototype:TF,keys:xF}=Object;function Ch(n){if(n.length===1){let t=n[0];if(SF(t))return{args:t,keys:null};if(MF(t)){let e=xF(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function MF(n){return n&&typeof n=="object"&&IF(n)===TF}function Eh(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function Ac(...n){let t=Hi(n),e=Jr(n),{args:i,keys:r}=Ch(n);if(i.length===0)return Le([],t);let o=new ye(AF(i,t,r?s=>Eh(r,s):rn));return e?o.pipe(Ta(e)):o}function AF(n,t,e=rn){return i=>{bD(t,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)bD(t,()=>{let u=Le(n[l],t),d=!1;u.subscribe(we(i,f=>{o[l]=f,d||(d=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function bD(n,t,e){n?Pn(e,n,t):t()}function CD(n,t,e,i,r,o,s,a){let l=[],u=0,d=0,f=!1,m=()=>{f&&!l.length&&!u&&t.complete()},y=T=>u<i?D(T):l.push(T),D=T=>{o&&t.next(T),u++;let R=!1;Ue(e(T,d++)).subscribe(we(t,q=>{r?.(q),o?y(q):t.next(q)},()=>{R=!0},void 0,()=>{if(R)try{for(u--;l.length&&u<i;){let q=l.shift();s?Pn(t,s,()=>D(q)):D(q)}m()}catch(q){t.error(q)}}))};return n.subscribe(we(t,y,()=>{f=!0,m()})),()=>{a?.()}}function Et(n,t,e=1/0){return _e(t)?Et((i,r)=>ne((o,s)=>t(i,o,r,s))(Ue(n(i,r))),e):(typeof t=="number"&&(e=t),Se((i,r)=>CD(i,r,n,e)))}function Oc(n=1/0){return Et(rn,n)}function ED(){return Oc(1)}function Zr(...n){return ED()(Le(n,Hi(n)))}function Dh(n){return new ye(t=>{Ue(n()).subscribe(t)})}function v_(...n){let t=Jr(n),{args:e,keys:i}=Ch(n),r=new ye(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let d=0;d<s;d++){let f=!1;Ue(e[d]).subscribe(we(o,m=>{f||(f=!0,u--),a[d]=m},()=>l--,void 0,()=>{(!l||!f)&&(u||o.next(i?Eh(i,a):a),o.complete())}))}});return t?r.pipe(Ta(t)):r}var OF=["addListener","removeListener"],RF=["addEventListener","removeEventListener"],PF=["on","off"];function ai(n,t,e,i){if(_e(e)&&(i=e,e=void 0),i)return ai(n,t,e).pipe(Ta(i));let[r,o]=kF(n)?RF.map(s=>a=>n[s](t,a,e)):NF(n)?OF.map(DD(n,t)):FF(n)?PF.map(DD(n,t)):[];if(!r&&Sa(n))return Et(s=>ai(s,t,e))(Ue(n));if(!r)throw new TypeError("Invalid event target");return new ye(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function DD(n,t){return e=>i=>n[e](t,i)}function NF(n){return _e(n.addListener)&&_e(n.removeListener)}function FF(n){return _e(n.on)&&_e(n.off)}function kF(n){return _e(n.addEventListener)&&_e(n.removeEventListener)}function w_(n=0,t,e=m_){let i=-1;return t!=null&&(hh(t)?e=t:i=t),new ye(r=>{let o=wD(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Sh(...n){let t=Hi(n),e=hD(n,1/0),i=n;return i.length?i.length===1?Ue(i[0]):Oc(e)(Le(i,t)):qt}var{isArray:VF}=Array;function Ih(n){return n.length===1&&VF(n[0])?n[0]:n}function _t(n,t){return Se((e,i)=>{let r=0;e.subscribe(we(i,o=>n.call(t,o,r++)&&i.next(o)))})}function b_(...n){return n=Ih(n),n.length===1?Ue(n[0]):new ye(LF(n))}function LF(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push(Ue(n[i]).subscribe(we(t,r=>{if(e){for(let o=0;o<e.length;o++)o!==i&&e[o].unsubscribe();e=null}t.next(r)})))}}function Rc(...n){let t=Jr(n),e=Ih(n);return e.length?new ye(i=>{let r=e.map(()=>[]),o=e.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<e.length;s++)Ue(e[s]).subscribe(we(i,a=>{if(r[s].push(a),r.every(l=>l.length)){let l=r.map(u=>u.shift());i.next(t?t(...l):l),r.some((u,d)=>!u.length&&o[d])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):qt}function Xr(n){return Se((t,e)=>{let i=null,r=!1,o;i=t.subscribe(we(e,void 0,void 0,s=>{o=Ue(n(s,Xr(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function SD(n,t,e,i,r){return(o,s)=>{let a=e,l=t,u=0;o.subscribe(we(s,d=>{let f=u++;l=a?n(l,d,f):(a=!0,d),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function eo(n,t){return _e(t)?Et(n,t,1):Et(n,1)}function to(n){return Se((t,e)=>{let i=!1;t.subscribe(we(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Fn(n){return n<=0?()=>qt:Se((t,e)=>{let i=0;t.subscribe(we(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function C_(n){return ne(()=>n)}function Th(n,t=rn){return n=n??BF,Se((e,i)=>{let r,o=!0;e.subscribe(we(i,s=>{let a=t(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function BF(n,t){return n===t}function xh(n=jF){return Se((t,e)=>{let i=!1;t.subscribe(we(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function jF(){return new Si}function E_(...n){return t=>Zr(t,ce(...n))}function br(n){return Se((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function li(n,t){let e=arguments.length>=2;return i=>i.pipe(n?_t((r,o)=>n(r,o,i)):rn,Fn(1),e?to(t):xh(()=>new Si))}function xa(n){return n<=0?()=>qt:Se((t,e)=>{let i=[];t.subscribe(we(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function D_(n,t){let e=arguments.length>=2;return i=>i.pipe(n?_t((r,o)=>n(r,o,i)):rn,xa(1),e?to(t):xh(()=>new Si))}function Pc(){return Se((n,t)=>{let e,i=!1;n.subscribe(we(t,r=>{let o=e;e=r,i&&t.next([o,r]),i=!0}))})}function ss(n,t){return Se(SD(n,t,arguments.length>=2,!0))}function ID(n={}){let{connector:t=()=>new qe,resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,u=0,d=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=l=void 0,d=f=!1},D=()=>{let T=s;y(),T?.unsubscribe()};return Se((T,R)=>{u++,!f&&!d&&m();let q=l=l??t();R.add(()=>{u--,u===0&&!f&&!d&&(a=S_(D,r))}),q.subscribe(R),!s&&u>0&&(s=new wr({next:te=>q.next(te),error:te=>{f=!0,m(),a=S_(y,e,te),q.error(te)},complete:()=>{d=!0,m(),a=S_(y,i),q.complete()}}),Ue(T).subscribe(s))})(o)}}function S_(n,t,...e){if(t===!0){n();return}if(t===!1)return;let i=new wr({next:()=>{i.unsubscribe(),n()}});return Ue(t(...e)).subscribe(i)}function Ma(n,t,e){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n:i=n??1/0,ID({connector:()=>new lh(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function no(...n){let t=Hi(n);return Se((e,i)=>{(t?Zr(n,e,t):Zr(n,e)).subscribe(i)})}function nt(n,t){return Se((e,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();e.subscribe(we(i,l=>{r?.unsubscribe();let u=0,d=o++;Ue(n(l,d)).subscribe(r=we(i,f=>i.next(t?t(l,f,d,u++):f),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Mh(n,t){return _e(t)?nt(()=>n,t):nt(()=>n)}function mn(n){return Se((t,e)=>{Ue(n).subscribe(we(e,()=>e.complete(),is)),!e.closed&&t.subscribe(e)})}function Dt(n,t,e){let i=_e(n)||t||e?{next:n,error:t,complete:e}:n;return i?Se((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(we(o,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),o.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):rn}function Ah(...n){let t=Jr(n);return Se((e,i)=>{let r=n.length,o=new Array(r),s=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)Ue(n[l]).subscribe(we(i,u=>{o[l]=u,!a&&!s[l]&&(s[l]=!0,(a=s.every(rn))&&(s=null))},is));e.subscribe(we(i,l=>{if(a){let u=[l,...o];i.next(t?t(...u):u)}}))})}var mS="https://g.co/ng/security#xss",de=class extends Error{constructor(t,e){super(uf(t,e)),this.code=t}};function uf(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}var gS=Symbol("InputSignalNode#UNSET"),UF=Ee(Y({},o_),{transformFn:void 0,applyValueToInputSignal(n,t){nh(n,t)}});function _S(n,t){let e=Object.create(UF);e.value=n,e.transformFn=t?.transform;function i(){if(t_(e),e.value===gS)throw new de(-950,!1);return e.value}return i[vr]=e,i}function Wc(n){return{toString:n}.toString()}var Oh="__parameters__";function $F(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function yS(n,t,e){return Wc(()=>{let i=$F(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,u,d){let f=l.hasOwnProperty(Oh)?l[Oh]:Object.defineProperty(l,Oh,{value:[]})[Oh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Wn=globalThis;function ot(n){for(let t in n)if(n[t]===ot)return t;throw Error("Could not find renamed property on target object.")}function GF(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function In(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(In).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function j_(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var HF=ot({__forward_ref__:ot});function gn(n){return n.__forward_ref__=gn,n.toString=function(){return In(this())},n}function Sn(n){return vS(n)?n():n}function vS(n){return typeof n=="function"&&n.hasOwnProperty(HF)&&n.__forward_ref__===gn}function Z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function St(n){return{providers:n.providers||[],imports:n.imports||[]}}function df(n){return TD(n,bS)||TD(n,CS)}function wS(n){return df(n)!==null}function TD(n,t){return n.hasOwnProperty(t)?n[t]:null}function zF(n){let t=n&&(n[bS]||n[CS]);return t||null}function xD(n){return n&&(n.hasOwnProperty(MD)||n.hasOwnProperty(qF))?n[MD]:null}var bS=ot({\u0275prov:ot}),MD=ot({\u0275inj:ot}),CS=ot({ngInjectableDef:ot}),qF=ot({ngInjectorDef:ot}),ie=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=Z({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ES(n){return n&&!!n.\u0275providers}var WF=ot({\u0275cmp:ot}),KF=ot({\u0275dir:ot}),QF=ot({\u0275pipe:ot}),YF=ot({\u0275mod:ot}),Hh=ot({\u0275fac:ot}),Nc=ot({__NG_ELEMENT_ID__:ot}),AD=ot({__NG_ENV_ID__:ot});function us(n){return typeof n=="string"?n:n==null?"":String(n)}function JF(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():us(n)}function ZF(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new de(-200,n)}function $0(n,t){throw new de(-201,!1)}var Ne=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ne||{}),U_;function DS(){return U_}function kn(n){let t=U_;return U_=n,t}function SS(n,t,e){let i=df(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&Ne.Optional)return null;if(t!==void 0)return t;$0(n,"Injector")}var XF={},kc=XF,$_="__NG_DI_FLAG__",zh="ngTempTokenPath",ek="ngTokenPath",tk=/\n/gm,nk="\u0275",OD="__source",Pa;function ik(){return Pa}function io(n){let t=Pa;return Pa=n,t}function rk(n,t=Ne.Default){if(Pa===void 0)throw new de(-203,!1);return Pa===null?SS(n,void 0,t):Pa.get(n,t&Ne.Optional?null:void 0,t)}function K(n,t=Ne.Default){return(DS()||rk)(Sn(n),t)}function F(n,t=Ne.Default){return K(n,hf(t))}function hf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function G_(n){let t=[];for(let e=0;e<n.length;e++){let i=Sn(n[e]);if(Array.isArray(i)){if(i.length===0)throw new de(900,!1);let r,o=Ne.Default;for(let s=0;s<i.length;s++){let a=i[s],l=ok(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}t.push(K(r,o))}else t.push(K(i))}return t}function IS(n,t){return n[$_]=t,n.prototype[$_]=t,n}function ok(n){return n[$_]}function sk(n,t,e,i){let r=n[zh];throw t[OD]&&r.unshift(t[OD]),n.message=ak(`
`+n.message,r,e,i),n[ek]=r,n[zh]=null,n}function ak(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==nk?n.slice(2):n;let r=In(t);if(Array.isArray(t))r=t.map(In).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):In(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(tk,`
  `)}`}var Dr=IS(yS("Optional"),8);var G0=IS(yS("SkipSelf"),4);function ds(n,t){let e=n.hasOwnProperty(Hh);return e?n[Hh]:null}function lk(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function ck(n){return n.flat(Number.POSITIVE_INFINITY)}function H0(n,t){n.forEach(e=>Array.isArray(e)?H0(e,t):t(e))}function TS(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function qh(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function uk(n,t){let e=[];for(let i=0;i<n;i++)e.push(t);return e}function dk(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let o=r-2;n[r]=n[o],r--}n[t]=e,n[t+1]=i}}function ff(n,t,e){let i=Kc(n,t);return i>=0?n[i|1]=e:(i=~i,dk(n,i,t,e)),i}function I_(n,t){let e=Kc(n,t);if(e>=0)return n[e|1]}function Kc(n,t){return hk(n,t,1)}function hk(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<e];if(t===s)return o<<e;s>t?r=o:i=o+1}return~(r<<e)}var Fa={},Vn=[],ka=new ie(""),xS=new ie("",-1),MS=new ie(""),Wh=class{get(t,e=kc){if(e===kc){let i=new Error(`NullInjectorError: No provider for ${In(t)}!`);throw i.name="NullInjectorError",i}return e}},AS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(AS||{}),Wi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Wi||{}),yt=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(yt||{});function fk(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}function H_(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],s=e[i++],a=e[i++];n.setAttribute(t,s,a,o)}else{let o=r,s=e[++i];mk(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),i++}}return i}function pk(n){return n===3||n===4||n===6}function mk(n){return n.charCodeAt(0)===64}function Vc(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?RD(n,e,r,null,t[++i]):RD(n,e,r,null,null))}}return n}function RD(n,t,e,i,r){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var OS="ng-template";function gk(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&fk(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(z0(n))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function z0(n){return n.type===4&&n.value!==OS}function _k(n,t,e){let i=n.type===4&&!e?OS:n.value;return t===i}function yk(n,t,e){let i=4,r=n.attrs,o=r!==null?bk(r):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!Ii(i)&&!Ii(l))return!1;if(s&&Ii(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!_k(n,l,e)||l===""&&t.length===1){if(Ii(i))return!1;s=!0}}else if(i&8){if(r===null||!gk(n,r,l,e)){if(Ii(i))return!1;s=!0}}else{let u=t[++a],d=vk(l,r,z0(n),e);if(d===-1){if(Ii(i))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=r[d+1].toLowerCase(),i&2&&u!==f){if(Ii(i))return!1;s=!0}}}}return Ii(i)||s}function Ii(n){return(n&1)===0}function vk(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){let s=t[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return Ck(t,n)}function RS(n,t,e=!1){for(let i=0;i<t.length;i++)if(yk(n,t[i],e))return!0;return!1}function wk(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if(!(e&1))return t[e+1]}return null}function bk(n){for(let t=0;t<n.length;t++){let e=n[t];if(pk(e))return t}return n.length}function Ck(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function Ek(n,t){e:for(let e=0;e<t.length;e++){let i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function PD(n,t){return n?":not("+t.trim()+")":t}function Dk(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(i&2){let a=n[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Ii(s)&&(t+=PD(o,r),r=""),i=s,o=o||!Ii(i);e++}return r!==""&&(t+=PD(o,r)),t}function Sk(n){return n.map(Dk).join(",")}function Ik(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&t.push(o,n[++i]):r===8&&e.push(o);else{if(!Ii(r))break;r=o}i++}return{attrs:t,classes:e}}function he(n){return Wc(()=>{let t=VS(n),e=Ee(Y({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===AS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Wi.Emulated,styles:n.styles||Vn,_:null,schemas:n.schemas||null,tView:null,id:""});LS(e);let i=n.dependencies;return e.directiveDefs=FD(i,!1),e.pipeDefs=FD(i,!0),e.id=Mk(e),e})}function Tk(n){return oo(n)||PS(n)}function xk(n){return n!==null}function It(n){return Wc(()=>({type:n.type,bootstrap:n.bootstrap||Vn,declarations:n.declarations||Vn,imports:n.imports||Vn,exports:n.exports||Vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ND(n,t){if(n==null)return Fa;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a=yt.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),t?(e[o]=a!==yt.None?[i,a]:i,t[o]=s):e[o]=i}return e}function We(n){return Wc(()=>{let t=VS(n);return LS(t),t})}function pf(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function oo(n){return n[WF]||null}function PS(n){return n[KF]||null}function NS(n){return n[QF]||null}function FS(n){let t=oo(n)||PS(n)||NS(n);return t!==null?t.standalone:!1}function kS(n,t){let e=n[YF]||null;if(!e&&t===!0)throw new Error(`Type ${In(n)} does not have '\u0275mod' property.`);return e}function VS(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||Fa,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ND(n.inputs,t),outputs:ND(n.outputs),debugInfo:null}}function LS(n){n.features?.forEach(t=>t(n))}function FD(n,t){if(!n)return null;let e=t?NS:Tk;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(xk)}function Mk(n){let t=0,e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function vs(n){return{\u0275providers:n}}function q0(...n){return{\u0275providers:BS(!0,n),\u0275fromNgModule:!0}}function BS(n,...t){let e=[],i=new Set,r,o=s=>{e.push(s)};return H0(t,s=>{let a=s;z_(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&jS(r,o),e}function jS(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];W0(r,o=>{t(o,i)})}}function z_(n,t,e,i){if(n=Sn(n),!n)return!1;let r=null,o=xD(n),s=!o&&oo(n);if(!o&&!s){let l=n.ngModule;if(o=xD(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)z_(u,t,e,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{H0(o.imports,d=>{z_(d,t,e,i)&&(u||=[],u.push(d))})}finally{}u!==void 0&&jS(u,t)}if(!a){let u=ds(r)||(()=>new r);t({provide:r,useFactory:u,deps:Vn},r),t({provide:MS,useValue:r,multi:!0},r),t({provide:ka,useValue:()=>K(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=n;W0(l,d=>{t(d,u)})}}else return!1;return r!==n&&n.providers!==void 0}function W0(n,t){for(let e of n)ES(e)&&(e=e.\u0275providers),Array.isArray(e)?W0(e,t):t(e)}var Ak=ot({provide:String,useValue:ot});function US(n){return n!==null&&typeof n=="object"&&Ak in n}function Ok(n){return!!(n&&n.useExisting)}function Rk(n){return!!(n&&n.useFactory)}function Va(n){return typeof n=="function"}function Pk(n){return!!n.useClass}var mf=new ie(""),Vh={},Nk={},T_;function gf(){return T_===void 0&&(T_=new Wh),T_}var on=class{},Lc=class extends on{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,W_(t,s=>this.processProvider(s)),this.records.set(xS,Aa(void 0,this)),r.has("environment")&&this.records.set(on,Aa(void 0,this));let o=this.records.get(mf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(MS,Vn,Ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=ze(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ze(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=io(this),i=kn(void 0),r;try{return t()}finally{io(e),kn(i)}}get(t,e=kc,i=Ne.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(AD))return t[AD](this);i=hf(i);let r,o=io(this),s=kn(void 0);try{if(!(i&Ne.SkipSelf)){let l=this.records.get(t);if(l===void 0){let u=Bk(t)&&df(t);u&&this.injectableDefInScope(u)?l=Aa(q_(t),Vh):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&Ne.Self?gf():this.parent;return e=i&Ne.Optional&&e===kc?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[zh]=a[zh]||[]).unshift(In(t)),o)throw a;return sk(a,t,"R3InjectorError",this.source)}else throw a}finally{kn(s),io(o)}}resolveInjectorInitializers(){let t=ze(null),e=io(this),i=kn(void 0),r;try{let o=this.get(ka,Vn,Ne.Self);for(let s of o)s()}finally{io(e),kn(i),ze(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(In(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(t){t=Sn(t);let e=Va(t)?t:Sn(t&&t.provide),i=kk(t);if(!Va(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Aa(void 0,Vh,!0),r.factory=()=>G_(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){let i=ze(null);try{return e.value===Vh&&(e.value=Nk,e.value=e.factory()),typeof e.value=="object"&&e.value&&Lk(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ze(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Sn(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function q_(n){let t=df(n),e=t!==null?t.factory:ds(n);if(e!==null)return e;if(n instanceof ie)throw new de(204,!1);if(n instanceof Function)return Fk(n);throw new de(204,!1)}function Fk(n){if(n.length>0)throw new de(204,!1);let e=zF(n);return e!==null?()=>e.factory(n):()=>new n}function kk(n){if(US(n))return Aa(void 0,n.useValue);{let t=$S(n);return Aa(t,Vh)}}function $S(n,t,e){let i;if(Va(n)){let r=Sn(n);return ds(r)||q_(r)}else if(US(n))i=()=>Sn(n.useValue);else if(Rk(n))i=()=>n.useFactory(...G_(n.deps||[]));else if(Ok(n))i=()=>K(Sn(n.useExisting));else{let r=Sn(n&&(n.useClass||n.provide));if(Vk(n))i=()=>new r(...G_(n.deps));else return ds(r)||q_(r)}return i}function Aa(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function Vk(n){return!!n.deps}function Lk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Bk(n){return typeof n=="function"||typeof n=="object"&&n instanceof ie}function W_(n,t){for(let e of n)Array.isArray(e)?W_(e,t):e&&ES(e)?W_(e.\u0275providers,t):t(e)}function Sr(n,t){n instanceof Lc&&n.assertNotDestroyed();let e,i=io(n),r=kn(void 0);try{return t()}finally{io(i),kn(r)}}function GS(){return DS()!==void 0||ik()!=null}function jk(n){if(!GS())throw new de(-203,!1)}function Uk(n){return typeof n=="function"}var Ir=0,Re=1,ve=2,sn=3,xi=4,Yn=5,Bc=6,jc=7,Mi=8,La=9,Ai=10,vt=11,Uc=12,kD=13,Ga=14,Oi=15,Qc=16,Oa=17,Cr=18,_f=19,HS=20,ro=21,Lh=22,hs=23,Qn=25,zS=1;var fs=7,Kh=8,Ba=9,Kn=10,K0=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(K0||{});function ls(n){return Array.isArray(n)&&typeof n[zS]=="object"}function Tr(n){return Array.isArray(n)&&n[zS]===!0}function Q0(n){return(n.flags&4)!==0}function yf(n){return n.componentOffset>-1}function vf(n){return(n.flags&1)===1}function so(n){return!!n.template}function $k(n){return(n[ve]&512)!==0}var K_=class{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function qS(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}function Tn(){return WS}function WS(n){return n.type.prototype.ngOnChanges&&(n.setInput=Hk),Gk}Tn.ngInherit=!0;function Gk(){let n=QS(this),t=n?.current;if(t){let e=n.previous;if(e===Fa)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function Hk(n,t,e,i,r){let o=this.declaredInputs[i],s=QS(n)||zk(n,{previous:Fa,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new K_(u&&u.currentValue,e,l===Fa),qS(n,t,r,e)}var KS="__ngSimpleChanges__";function QS(n){return n[KS]||null}function zk(n,t){return n[KS]=t}var VD=null;var zi=function(n,t,e){VD?.(n,t,e)},YS="svg",qk="math",Wk=!1;function Kk(){return Wk}function Ki(n){for(;Array.isArray(n);)n=n[Ir];return n}function JS(n,t){return Ki(t[n])}function ci(n,t){return Ki(t[n.index])}function ZS(n,t){return n.data[t]}function XS(n,t){return n[t]}function co(n,t){let e=t[n];return ls(e)?e:e[Ir]}function Qk(n){return(n[ve]&4)===4}function Y0(n){return(n[ve]&128)===128}function Yk(n){return Tr(n[sn])}function ja(n,t){return t==null?null:n[t]}function eI(n){n[Oa]=0}function Jk(n){n[ve]&1024||(n[ve]|=1024,Y0(n)&&$c(n))}function Zk(n,t){for(;n>0;)t=t[Ga],n--;return t}function J0(n){return!!(n[ve]&9216||n[hs]?.dirty)}function Q_(n){n[Ai].changeDetectionScheduler?.notify(1),J0(n)?$c(n):n[ve]&64&&(Kk()?(n[ve]|=1024,$c(n)):n[Ai].changeDetectionScheduler?.notify())}function $c(n){n[Ai].changeDetectionScheduler?.notify();let t=Gc(n);for(;t!==null&&!(t[ve]&8192||(t[ve]|=8192,!Y0(t)));)t=Gc(t)}function tI(n,t){if((n[ve]&256)===256)throw new de(911,!1);n[ro]===null&&(n[ro]=[]),n[ro].push(t)}function Xk(n,t){if(n[ro]===null)return;let e=n[ro].indexOf(t);e!==-1&&n[ro].splice(e,1)}function Gc(n){let t=n[sn];return Tr(t)?t[sn]:t}var Ie={lFrame:lI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function e2(){return Ie.lFrame.elementDepthCount}function t2(){Ie.lFrame.elementDepthCount++}function n2(){Ie.lFrame.elementDepthCount--}function nI(){return Ie.bindingsEnabled}function iI(){return Ie.skipHydrationRootTNode!==null}function i2(n){return Ie.skipHydrationRootTNode===n}function r2(){Ie.skipHydrationRootTNode=null}function xe(){return Ie.lFrame.lView}function Mt(){return Ie.lFrame.tView}function j(n){return Ie.lFrame.contextLView=n,n[Mi]}function U(n){return Ie.lFrame.contextLView=null,n}function Ln(){let n=rI();for(;n!==null&&n.type===64;)n=n.parent;return n}function rI(){return Ie.lFrame.currentTNode}function o2(){let n=Ie.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function ws(n,t){let e=Ie.lFrame;e.currentTNode=n,e.isParent=t}function Z0(){return Ie.lFrame.isParent}function X0(){Ie.lFrame.isParent=!1}function s2(){return Ie.lFrame.contextLView}function Yc(){let n=Ie.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function a2(){return Ie.lFrame.bindingIndex}function l2(n){return Ie.lFrame.bindingIndex=n}function wf(){return Ie.lFrame.bindingIndex++}function ey(n){let t=Ie.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function c2(){return Ie.lFrame.inI18n}function u2(n,t){let e=Ie.lFrame;e.bindingIndex=e.bindingRootIndex=n,Y_(t)}function d2(){return Ie.lFrame.currentDirectiveIndex}function Y_(n){Ie.lFrame.currentDirectiveIndex=n}function h2(n){let t=Ie.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function oI(){return Ie.lFrame.currentQueryIndex}function ty(n){Ie.lFrame.currentQueryIndex=n}function f2(n){let t=n[Re];return t.type===2?t.declTNode:t.type===1?n[Yn]:null}function sI(n,t,e){if(e&Ne.SkipSelf){let r=t,o=n;for(;r=r.parent,r===null&&!(e&Ne.Host);)if(r=f2(o),r===null||(o=o[Ga],r.type&10))break;if(r===null)return!1;t=r,n=o}let i=Ie.lFrame=aI();return i.currentTNode=t,i.lView=n,!0}function ny(n){let t=aI(),e=n[Re];Ie.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function aI(){let n=Ie.lFrame,t=n===null?null:n.child;return t===null?lI(n):t}function lI(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function cI(){let n=Ie.lFrame;return Ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var uI=cI;function iy(){let n=cI();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function p2(n){return(Ie.lFrame.contextLView=Zk(n,Ie.lFrame.contextLView))[Mi]}function uo(){return Ie.lFrame.selectedIndex}function ps(n){Ie.lFrame.selectedIndex=n}function bf(){let n=Ie.lFrame;return ZS(n.tView,n.selectedIndex)}function Ha(){Ie.lFrame.currentNamespace=YS}function Jc(){m2()}function m2(){Ie.lFrame.currentNamespace=null}function g2(){return Ie.lFrame.currentNamespace}var dI=!0;function Cf(){return dI}function Ef(n){dI=n}function _2(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=WS(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}r&&(e.preOrderHooks??=[]).push(0-n,r),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function Df(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),u&&((n.viewHooks??=[]).push(e,u),(n.viewCheckHooks??=[]).push(e,u)),d!=null&&(n.destroyHooks??=[]).push(e,d)}}function Bh(n,t,e){hI(n,t,3,e)}function jh(n,t,e,i){(n[ve]&3)===e&&hI(n,t,e,i)}function x_(n,t){let e=n[ve];(e&3)===t&&(e&=16383,e+=1,n[ve]=e)}function hI(n,t,e,i){let r=i!==void 0?n[Oa]&65535:0,o=i??-1,s=t.length-1,a=0;for(let l=r;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(n[Oa]+=65536),(a<o||o==-1)&&(y2(n,e,t,l),n[Oa]=(n[Oa]&4294901760)+l+2),l++}function LD(n,t){zi(4,n,t);let e=ze(null);try{t.call(n)}finally{ze(e),zi(5,n,t)}}function y2(n,t,e,i){let r=e[i]<0,o=e[i+1],s=r?-e[i]:e[i],a=n[s];r?n[ve]>>14<n[Oa]>>16&&(n[ve]&3)===t&&(n[ve]+=16384,LD(a,o)):LD(a,o)}var Na=-1,ms=class{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}};function v2(n){return n instanceof ms}function w2(n){return(n.flags&8)!==0}function b2(n){return(n.flags&16)!==0}function fI(n){return n!==Na}function Qh(n){return n&32767}function C2(n){return n>>16}function Yh(n,t){let e=C2(n),i=t;for(;e>0;)i=i[Ga],e--;return i}var J_=!0;function Jh(n){let t=J_;return J_=n,t}var E2=256,pI=E2-1,mI=5,D2=0,qi={};function S2(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(Nc)&&(i=e[Nc]),i==null&&(i=e[Nc]=D2++);let r=i&pI,o=1<<r;t.data[n+(r>>mI)]|=o}function Zh(n,t){let e=gI(n,t);if(e!==-1)return e;let i=t[Re];i.firstCreatePass&&(n.injectorIndex=t.length,M_(i.data,n),M_(t,null),M_(i.blueprint,null));let r=ry(n,t),o=n.injectorIndex;if(fI(r)){let s=Qh(r),a=Yh(r,t),l=a[Re].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|l[s+u]}return t[o+8]=r,o}function M_(n,t){n.push(0,0,0,0,0,0,0,0,t)}function gI(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function ry(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=bI(r),i===null)return Na;if(e++,r=r[Ga],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Na}function Z_(n,t,e){S2(n,t,e)}function _I(n,t,e){if(e&Ne.Optional||n!==void 0)return n;$0(t,"NodeInjector")}function yI(n,t,e,i){if(e&Ne.Optional&&i===void 0&&(i=null),!(e&(Ne.Self|Ne.Host))){let r=n[La],o=kn(void 0);try{return r?r.get(t,i,e&Ne.Optional):SS(t,i,e&Ne.Optional)}finally{kn(o)}}return _I(i,t,e)}function vI(n,t,e,i=Ne.Default,r){if(n!==null){if(t[ve]&2048&&!(i&Ne.Self)){let s=M2(n,t,e,i,qi);if(s!==qi)return s}let o=wI(n,t,e,i,qi);if(o!==qi)return o}return yI(t,e,i,r)}function wI(n,t,e,i,r){let o=T2(e);if(typeof o=="function"){if(!sI(t,n,i))return i&Ne.Host?_I(r,e,i):yI(t,e,i,r);try{let s;if(s=o(i),s==null&&!(i&Ne.Optional))$0(e);else return s}finally{uI()}}else if(typeof o=="number"){let s=null,a=gI(n,t),l=Na,u=i&Ne.Host?t[Oi][Yn]:null;for((a===-1||i&Ne.SkipSelf)&&(l=a===-1?ry(n,t):t[a+8],l===Na||!jD(i,!1)?a=-1:(s=t[Re],a=Qh(l),t=Yh(l,t)));a!==-1;){let d=t[Re];if(BD(o,a,d.data)){let f=I2(a,t,e,s,i,u);if(f!==qi)return f}l=t[a+8],l!==Na&&jD(i,t[Re].data[a+8]===u)&&BD(o,a,t)?(s=d,a=Qh(l),t=Yh(l,t)):a=-1}}return r}function I2(n,t,e,i,r,o){let s=t[Re],a=s.data[n+8],l=i==null?yf(a)&&J_:i!=s&&(a.type&3)!==0,u=r&Ne.Host&&o===a,d=Uh(a,s,e,l,u);return d!==null?gs(t,s,d,a):qi}function Uh(n,t,e,i,r){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,d=o>>20,f=i?a:a+d,m=r?a+d:u;for(let y=f;y<m;y++){let D=s[y];if(y<l&&e===D||y>=l&&D.type===e)return y}if(r){let y=s[l];if(y&&so(y)&&y.type===e)return l}return null}function gs(n,t,e,i){let r=n[e],o=t.data;if(v2(r)){let s=r;s.resolving&&ZF(JF(o[e]));let a=Jh(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?kn(s.injectImpl):null,d=sI(n,i,Ne.Default);try{r=n[e]=s.factory(void 0,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&_2(e,o[e],t)}finally{u!==null&&kn(u),Jh(a),s.resolving=!1,uI()}}return r}function T2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Nc)?n[Nc]:void 0;return typeof t=="number"?t>=0?t&pI:x2:t}function BD(n,t,e){let i=1<<n;return!!(e[t+(n>>mI)]&i)}function jD(n,t){return!(n&Ne.Self)&&!(n&Ne.Host&&t)}var cs=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return vI(this._tNode,this._lView,t,hf(i),e)}};function x2(){return new cs(Ln(),xe())}function Jn(n){return Wc(()=>{let t=n.prototype.constructor,e=t[Hh]||X_(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Hh]||X_(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function X_(n){return vS(n)?()=>{let t=X_(Sn(n));return t&&t()}:ds(n)}function M2(n,t,e,i,r){let o=n,s=t;for(;o!==null&&s!==null&&s[ve]&2048&&!(s[ve]&512);){let a=wI(o,s,e,i|Ne.Self,qi);if(a!==qi)return a;let l=o.parent;if(!l){let u=s[HS];if(u){let d=u.get(e,qi,i);if(d!==qi)return d}l=bI(s),s=s[Ga]}o=l}return r}function bI(n){let t=n[Re],e=t.type;return e===2?t.declTNode:e===1?n[Yn]:null}function UD(n,t=null,e=null,i){let r=CI(n,t,e,i);return r.resolveInjectorInitializers(),r}function CI(n,t=null,e=null,i,r=new Set){let o=[e||Vn,q0(n)];return i=i||(typeof n=="object"?void 0:In(n)),new Lc(o,t||gf(),i||null,r)}var ui=(()=>{class n{static{this.THROW_IF_NOT_FOUND=kc}static{this.NULL=new Wh}static create(e,i){if(Array.isArray(e))return UD({name:""},i,e,"");{let r=e.name??"";return UD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Z({token:n,providedIn:"any",factory:()=>K(xS)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var A2="ngOriginalError";function A_(n){return n[A2]}var Qi=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&A_(t);for(;e&&A_(e);)e=A_(e);return e||null}},EI=new ie("",{providedIn:"root",factory:()=>F(Qi).handleError.bind(void 0)}),Sf=(()=>{class n{static{this.__NG_ELEMENT_ID__=O2}static{this.__NG_ENV_ID__=e=>e}}return n})(),e0=class extends Sf{constructor(t){super(),this._lView=t}onDestroy(t){return tI(this._lView,t),()=>Xk(this._lView,t)}};function O2(){return new e0(xe())}function $D(n,t){return _S(n,t)}function R2(n){return _S(gS,n)}var If=($D.required=R2,$D);function P2(){return za(Ln(),xe())}function za(n,t){return new an(ci(n,t))}var an=(()=>{class n{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=P2}}return n})();function N2(n){return n instanceof an?n.nativeElement:n}var t0=class extends qe{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,GS()&&(this.destroyRef=F(Sf,{optional:!0})??void 0)}emit(t){let e=ze(null);try{super.next(t)}finally{ze(e)}}subscribe(t,e,i){let r=t,o=e||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=O_(o),r&&(r=O_(r)),s&&(s=O_(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof gt&&t.add(a),a}};function O_(n){return t=>{setTimeout(n,void 0,t)}}var oe=t0;function F2(){return this._results[Symbol.iterator]()}var n0=class n{get changes(){return this._changes??=new oe}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=n.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=F2)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=ck(t);(this._changesDetected=!lk(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function DI(n){return(n.flags&128)===128}var SI=new Map,k2=0;function V2(){return k2++}function L2(n){SI.set(n[_f],n)}function B2(n){SI.delete(n[_f])}var GD="__ngContext__";function ao(n,t){ls(t)?(n[GD]=t[_f],L2(t)):n[GD]=t}function II(n){return xI(n[Uc])}function TI(n){return xI(n[xi])}function xI(n){for(;n!==null&&!Tr(n);)n=n[xi];return n}var i0;function MI(n){i0=n}function AI(){if(i0!==void 0)return i0;if(typeof document<"u")return document;throw new de(210,!1)}var oy=new ie("",{providedIn:"root",factory:()=>j2}),j2="ng",sy=new ie(""),ln=new ie("",{providedIn:"platform",factory:()=>"unknown"});var ay=new ie("",{providedIn:"root",factory:()=>AI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var U2="h",$2="b";var G2=()=>null;function ly(n,t,e=!1){return G2(n,t,e)}var OI=!1,H2=new ie("",{providedIn:"root",factory:()=>OI});var Rh;function z2(){if(Rh===void 0&&(Rh=null,Wn.trustedTypes))try{Rh=Wn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Rh}function Tf(n){return z2()?.createHTML(n)||n}var Ph;function q2(){if(Ph===void 0&&(Ph=null,Wn.trustedTypes))try{Ph=Wn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ph}function HD(n){return q2()?.createHTML(n)||n}var Xh=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mS})`}};function qa(n){return n instanceof Xh?n.changingThisBreaksApplicationSecurity:n}function cy(n,t){let e=W2(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${mS})`)}return e===t}function W2(n){return n instanceof Xh&&n.getTypeName()||null}function K2(n){let t=new o0(n);return Q2()?new r0(t):t}var r0=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(Tf(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}},o0=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=Tf(t),e}};function Q2(){try{return!!new window.DOMParser().parseFromString(Tf(""),"text/html")}catch{return!1}}var Y2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function uy(n){return n=String(n),n.match(Y2)?n:"unsafe:"+n}function xr(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function Zc(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var RI=xr("area,br,col,hr,img,wbr"),PI=xr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),NI=xr("rp,rt"),J2=Zc(NI,PI),Z2=Zc(PI,xr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),X2=Zc(NI,xr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zD=Zc(RI,Z2,X2,J2),FI=xr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),eV=xr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tV=xr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),nV=Zc(FI,eV,tV),iV=xr("script,style,template"),s0=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=sV(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=oV(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=qD(t).toLowerCase();if(!zD.hasOwnProperty(e))return this.sanitizedSomething=!0,!iV.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=t.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!nV.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;FI[a]&&(l=uy(l)),this.buf.push(" ",s,'="',WD(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=qD(t).toLowerCase();zD.hasOwnProperty(e)&&!RI.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(WD(t))}};function rV(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function oV(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw kI(t);return t}function sV(n){let t=n.firstChild;if(t&&rV(n,t))throw kI(t);return t}function qD(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function kI(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var aV=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lV=/([^\#-~ |!])/g;function WD(n){return n.replace(/&/g,"&amp;").replace(aV,function(t){let e=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(lV,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Nh;function VI(n,t){let e=null;try{Nh=Nh||K2(n);let i=t?String(t):"";e=Nh.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=Nh.getInertBodyElement(i)}while(i!==o);let a=new s0().sanitizeChildren(KD(e)||e);return Tf(a)}finally{if(e){let i=KD(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function KD(n){return"content"in n&&cV(n)?n.content:null}function cV(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var xf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(xf||{});function Mf(n){let t=LI();return t?HD(t.sanitize(xf.HTML,n)||""):cy(n,"HTML")?HD(qa(n)):VI(AI(),us(n))}function di(n){let t=LI();return t?t.sanitize(xf.URL,n)||"":cy(n,"URL")?qa(n):uy(us(n))}function LI(){let n=xe();return n&&n[Ai].sanitizer}var uV=/^>|^->|<!--|-->|--!>|<!-$/g,dV=/(<|>)/g,hV="\u200B$1\u200B";function fV(n){return n.replace(uV,t=>t.replace(dV,hV))}function dy(n){return n.ownerDocument.defaultView}function BI(n){return n.ownerDocument}function jI(n){return n instanceof Function?n():n}var Yi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Yi||{}),pV;function hy(n,t){return pV(n,t)}function Ra(n,t,e,i,r){if(i!=null){let o,s=!1;Tr(i)?o=i:ls(i)&&(s=!0,i=i[Ir]);let a=Ki(i);n===0&&e!==null?r==null?qI(t,e,a):ef(t,e,a,r||null,!0):n===1&&e!==null?ef(t,e,a,r||null,!0):n===2?AV(t,a,s):n===3&&t.destroyNode(a),o!=null&&RV(t,n,o,e,r)}}function mV(n,t){return n.createText(t)}function gV(n,t,e){n.setValue(t,e)}function _V(n,t){return n.createComment(fV(t))}function UI(n,t,e){return n.createElement(t,e)}function yV(n,t){$I(n,t),t[Ir]=null,t[Yn]=null}function vV(n,t,e,i,r,o){i[Ir]=r,i[Yn]=t,Of(n,i,e,1,r,o)}function $I(n,t){t[Ai].changeDetectionScheduler?.notify(1),Of(n,t,t[vt],2,null,null)}function wV(n){let t=n[Uc];if(!t)return R_(n[Re],n);for(;t;){let e=null;if(ls(t))e=t[Uc];else{let i=t[Kn];i&&(e=i)}if(!e){for(;t&&!t[xi]&&t!==n;)ls(t)&&R_(t[Re],t),t=t[sn];t===null&&(t=n),ls(t)&&R_(t[Re],t),e=t&&t[xi]}t=e}}function bV(n,t,e,i){let r=Kn+i,o=e.length;i>0&&(e[r-1][xi]=t),i<o-Kn?(t[xi]=e[r],TS(e,Kn+i,t)):(e.push(t),t[xi]=null),t[sn]=e;let s=t[Qc];s!==null&&e!==s&&CV(s,t);let a=t[Cr];a!==null&&a.insertView(n),Q_(t),t[ve]|=128}function CV(n,t){let e=n[Ba],r=t[sn][sn][Oi];t[Oi]!==r&&(n[ve]|=K0.HasTransplantedViews),e===null?n[Ba]=[t]:e.push(t)}function GI(n,t){let e=n[Ba],i=e.indexOf(t);e.splice(i,1)}function a0(n,t){if(n.length<=Kn)return;let e=Kn+t,i=n[e];if(i){let r=i[Qc];r!==null&&r!==n&&GI(r,i),t>0&&(n[e-1][xi]=i[xi]);let o=qh(n,Kn+t);yV(i[Re],i);let s=o[Cr];s!==null&&s.detachView(o[Re]),i[sn]=null,i[xi]=null,i[ve]&=-129}return i}function HI(n,t){if(!(t[ve]&256)){let e=t[vt];e.destroyNode&&Of(n,t,e,3,null,null),wV(t)}}function R_(n,t){if(t[ve]&256)return;let e=ze(null);try{t[ve]&=-129,t[ve]|=256,t[hs]&&r_(t[hs]),DV(n,t),EV(n,t),t[Re].type===1&&t[vt].destroy();let i=t[Qc];if(i!==null&&Tr(t[sn])){i!==t[sn]&&GI(i,t);let r=t[Cr];r!==null&&r.detachView(n)}B2(t)}finally{ze(e)}}function EV(n,t){let e=n.cleanup,i=t[jc];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let s=e[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[e[o+1]];e[o].call(s)}i!==null&&(t[jc]=null);let r=t[ro];if(r!==null){t[ro]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function DV(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof ms)){let o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];zi(4,a,l);try{l.call(a)}finally{zi(5,a,l)}}else{zi(4,r,o);try{o.call(r)}finally{zi(5,r,o)}}}}}function zI(n,t,e){return SV(n,t.parent,e)}function SV(n,t,e){let i=t;for(;i!==null&&i.type&40;)t=i,i=t.parent;if(i===null)return e[Ir];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===Wi.None||o===Wi.Emulated)return null}return ci(i,e)}}function ef(n,t,e,i,r){n.insertBefore(t,e,i,r)}function qI(n,t,e){n.appendChild(t,e)}function QD(n,t,e,i,r){i!==null?ef(n,t,e,i,r):qI(n,t,e)}function IV(n,t,e,i){n.removeChild(t,e,i)}function fy(n,t){return n.parentNode(t)}function TV(n,t){return n.nextSibling(t)}function WI(n,t,e){return MV(n,t,e)}function xV(n,t,e){return n.type&40?ci(n,e):null}var MV=xV,YD;function Af(n,t,e,i){let r=zI(n,i,t),o=t[vt],s=i.parent||t[Yn],a=WI(s,i,t);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)QD(o,r,e[l],a,!1);else QD(o,r,e,a,!1);YD!==void 0&&YD(o,i,t,e,r)}function $h(n,t){if(t!==null){let e=t.type;if(e&3)return ci(t,n);if(e&4)return l0(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return $h(n,i);{let r=n[t.index];return Tr(r)?l0(-1,r):Ki(r)}}else{if(e&32)return hy(t,n)()||Ki(n[t.index]);{let i=KI(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=Gc(n[Oi]);return $h(r,i)}else return $h(n,t.next)}}}return null}function KI(n,t){if(t!==null){let i=n[Oi][Yn],r=t.projection;return i.projection[r]}return null}function l0(n,t){let e=Kn+n+1;if(e<t.length){let i=t[e],r=i[Re].firstChild;if(r!==null)return $h(i,r)}return t[fs]}function AV(n,t,e){let i=fy(n,t);i&&IV(n,i,t,e)}function py(n,t,e,i,r,o,s){for(;e!=null;){let a=i[e.index],l=e.type;if(s&&t===0&&(a&&ao(Ki(a),i),e.flags|=2),(e.flags&32)!==32)if(l&8)py(n,t,e.child,i,r,o,!1),Ra(t,n,r,a,o);else if(l&32){let u=hy(e,i),d;for(;d=u();)Ra(t,n,r,d,o);Ra(t,n,r,a,o)}else l&16?QI(n,t,i,e,r,o):Ra(t,n,r,a,o);e=s?e.projectionNext:e.next}}function Of(n,t,e,i,r,o){py(e,i,n.firstChild,t,r,o,!1)}function OV(n,t,e){let i=t[vt],r=zI(n,e,t),o=e.parent||t[Yn],s=WI(o,e,t);QI(i,0,t,e,r,s)}function QI(n,t,e,i,r,o){let s=e[Oi],l=s[Yn].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let d=l[u];Ra(t,n,r,d,o)}else{let u=l,d=s[sn];DI(i)&&(u.flags|=128),py(n,t,u,d,r,o,!0)}}function RV(n,t,e,i,r){let o=e[fs],s=Ki(e);o!==s&&Ra(t,n,i,o,r);for(let a=Kn;a<e.length;a++){let l=e[a];Of(l[Re],l,n,t,i,o)}}function PV(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:Yi.DashCase;r==null?n.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Yi.Important),n.setStyle(e,i,r,o))}}function NV(n,t,e){n.setAttribute(t,"style",e)}function YI(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function JI(n,t,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&H_(n,t,i),r!==null&&YI(n,t,r),o!==null&&NV(n,t,o)}var Zn={};function w(n=1){ZI(Mt(),xe(),uo()+n,!1)}function ZI(n,t,e,i){if(!i)if((t[ve]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Bh(t,o,e)}else{let o=n.preOrderHooks;o!==null&&jh(t,o,0,e)}ps(e)}function re(n,t=Ne.Default){let e=xe();if(e===null)return K(n,t);let i=Ln();return vI(i,e,Sn(n),t)}function XI(n,t,e,i,r,o){let s=ze(null);try{let a=null;r&yt.SignalBased&&(a=t[i][vr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&yt.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(t,o)),n.setInput!==null?n.setInput(t,a,o,e,i):qS(t,a,i,o)}finally{ze(s)}}function FV(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)ps(~r);else{let o=r,s=e[++i],a=e[++i];u2(s,o);let l=t[o];a(2,l)}}}finally{ps(-1)}}function Rf(n,t,e,i,r,o,s,a,l,u,d){let f=t.blueprint.slice();return f[Ir]=r,f[ve]=i|4|128|8|64,(u!==null||n&&n[ve]&2048)&&(f[ve]|=2048),eI(f),f[sn]=f[Ga]=n,f[Mi]=e,f[Ai]=s||n&&n[Ai],f[vt]=a||n&&n[vt],f[La]=l||n&&n[La]||null,f[Yn]=o,f[_f]=V2(),f[Bc]=d,f[HS]=u,f[Oi]=t.type==2?n[Oi]:f,f}function Wa(n,t,e,i,r){let o=n.data[t];if(o===null)o=kV(n,t,e,i,r),c2()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let s=o2();o.injectorIndex=s===null?-1:s.injectorIndex}return ws(o,!0),o}function kV(n,t,e,i,r){let o=rI(),s=Z0(),a=s?o:o&&o.parent,l=n.data[t]=$V(n,a,e,t,i,r);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function eT(n,t,e,i){if(e===0)return-1;let r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function tT(n,t,e,i,r){let o=uo(),s=i&2;try{ps(-1),s&&t.length>Qn&&ZI(n,t,Qn,!1),zi(s?2:0,r),e(i,r)}finally{ps(o),zi(s?3:1,r)}}function my(n,t,e){if(Q0(t)){let i=ze(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{ze(i)}}}function gy(n,t,e){nI()&&(KV(n,t,e,ci(e,t)),(e.flags&64)===64&&rT(n,t,e))}function _y(n,t,e=ci){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?e(t,n):n[s];n[r++]=a}}}function nT(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=yy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function yy(n,t,e,i,r,o,s,a,l,u,d){let f=Qn+i,m=f+r,y=VV(f,m),D=typeof u=="function"?u():u;return y[Re]={type:n,blueprint:y,template:e,queries:null,viewQuery:a,declTNode:t,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:D,incompleteFirstPass:!1,ssrId:d}}function VV(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:Zn);return e}function LV(n,t,e,i){let o=i.get(H2,OI)||e===Wi.ShadowDom,s=n.selectRootElement(t,o);return BV(s),s}function BV(n){jV(n)}var jV=()=>null;function UV(n,t,e,i){let r=aT(t);r.push(e),n.firstCreatePass&&lT(n).push(i,r.length-1)}function $V(n,t,e,i,r,o){let s=t?t.injectorIndex:-1,a=0;return iI()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function JD(n,t,e,i,r){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;i??={};let a,l=yt.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}n===0?ZD(i,e,u,a,l):ZD(i,e,u,a)}return i}function ZD(n,t,e,i,r){let o;n.hasOwnProperty(e)?(o=n[e]).push(t,i):o=n[e]=[t,i],r!==void 0&&o.push(r)}function GV(n,t,e){let i=t.directiveStart,r=t.directiveEnd,o=n.data,s=t.attrs,a=[],l=null,u=null;for(let d=i;d<r;d++){let f=o[d],m=e?e.get(f):null,y=m?m.inputs:null,D=m?m.outputs:null;l=JD(0,f.inputs,d,l,y),u=JD(1,f.outputs,d,u,D);let T=l!==null&&s!==null&&!z0(t)?oL(l,d,s):null;a.push(T)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=u}function HV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function vy(n,t,e,i,r,o,s,a){let l=ci(t,e),u=t.inputs,d;!a&&u!=null&&(d=u[i])?(by(n,e,d,i,r),yf(t)&&zV(e,t.index)):t.type&3?(i=HV(i),r=s!=null?s(r,t.value||"",i):r,o.setProperty(l,i,r)):t.type&12}function zV(n,t){let e=co(t,n);e[ve]&16||(e[ve]|=64)}function wy(n,t,e,i){if(nI()){let r=i===null?null:{"":-1},o=YV(n,e),s,a;o===null?s=a=null:[s,a]=o,s!==null&&iT(n,t,e,s,r,a),r&&JV(e,i,r)}e.mergedAttrs=Vc(e.mergedAttrs,e.attrs)}function iT(n,t,e,i,r,o){for(let u=0;u<i.length;u++)Z_(Zh(e,t),n,i[u].type);XV(e,n.data.length,i.length);for(let u=0;u<i.length;u++){let d=i[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,l=eT(n,t,i.length,null);for(let u=0;u<i.length;u++){let d=i[u];e.mergedAttrs=Vc(e.mergedAttrs,d.hostAttrs),eL(n,e,t,l,d),ZV(l,d,r),d.contentQueries!==null&&(e.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(e.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}GV(n,e,o)}function qV(n,t,e,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;WV(s)!=a&&s.push(a),s.push(e,i,o)}}function WV(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function KV(n,t,e,i){let r=e.directiveStart,o=e.directiveEnd;yf(e)&&tL(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||Zh(e,t),ao(i,t);let s=e.initialInputs;for(let a=r;a<o;a++){let l=n.data[a],u=gs(t,n,a,e);if(ao(u,t),s!==null&&rL(t,a-r,u,l,e,s),so(l)){let d=co(e.index,t);d[Mi]=gs(t,n,a,e)}}}function rT(n,t,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,s=d2();try{ps(o);for(let a=i;a<r;a++){let l=n.data[a],u=t[a];Y_(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&QV(l,u)}}finally{ps(-1),Y_(s)}}function QV(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function YV(n,t){let e=n.directiveRegistry,i=null,r=null;if(e)for(let o=0;o<e.length;o++){let s=e[o];if(RS(t,s.selectors,!1))if(i||(i=[]),so(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;c0(n,t,l)}else i.unshift(s),c0(n,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function c0(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function JV(n,t,e){if(t){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let o=e[t[r+1]];if(o==null)throw new de(-301,!1);i.push(t[r],o)}}}function ZV(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;so(t)&&(e[""]=n)}}function XV(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function eL(n,t,e,i,r){n.data[i]=r;let o=r.factory||(r.factory=ds(r.type,!0)),s=new ms(o,so(r),re);n.blueprint[i]=s,e[i]=s,qV(n,t,i,eT(n,e,r.hostVars,Zn),r)}function tL(n,t,e){let i=ci(t,n),r=nT(e),o=n[Ai].rendererFactory,s=16;e.signals?s=4096:e.onPush&&(s=64);let a=Pf(n,Rf(n,r,null,s,i,t,null,o.createRenderer(i,e),null,null,null));n[t.index]=a}function nL(n,t,e,i,r,o){let s=ci(n,t);iL(t[vt],s,o,n.value,e,i,r)}function iL(n,t,e,i,r,o,s){if(o==null)n.removeAttribute(t,r,e);else{let a=s==null?us(o):s(o,i||"",r);n.setAttribute(t,r,a,e)}}function rL(n,t,e,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],d=s[a++],f=s[a++];XI(i,e,l,u,d,f)}}function oL(n,t,e){let i=null,r=0;for(;r<e.length;){let o=e[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){i.push(o,s[a+1],s[a+2],e[r+1]);break}}r+=2}return i}function oT(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function sT(n,t){let e=n.contentQueries;if(e!==null){let i=ze(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=n.data[s];ty(o),a.contentQueries(2,t[s],s)}}}finally{ze(i)}}}function Pf(n,t){return n[Uc]?n[kD][xi]=t:n[Uc]=t,n[kD]=t,t}function u0(n,t,e){ty(0);let i=ze(null);try{t(n,e)}finally{ze(i)}}function aT(n){return n[jc]||(n[jc]=[])}function lT(n){return n.cleanup||(n.cleanup=[])}function cT(n,t){let e=n[La],i=e?e.get(Qi,null):null;i&&i.handleError(t)}function by(n,t,e,i,r){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],l=e[o++],u=t[s],d=n.data[s];XI(d,u,i,a,l,r)}}function uT(n,t,e){let i=JS(t,n);gV(n[vt],i,e)}function sL(n,t){let e=co(t,n),i=e[Re];aL(i,e);let r=e[Ir];r!==null&&e[Bc]===null&&(e[Bc]=ly(r,e[La])),Cy(i,e,e[Mi])}function aL(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function Cy(n,t,e){ny(t);try{let i=n.viewQuery;i!==null&&u0(1,i,e);let r=n.template;r!==null&&tT(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[Cr]?.finishViewCreation(n),n.staticContentQueries&&sT(n,t),n.staticViewQueries&&u0(2,n.viewQuery,e);let o=n.components;o!==null&&lL(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[ve]&=-5,iy()}}function lL(n,t){for(let e=0;e<t.length;e++)sL(n,t[e])}function cL(n,t,e,i){let r=ze(null);try{let o=t.tView,a=n[ve]&4096?4096:16,l=Rf(n,o,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=n[t.index];l[Qc]=u;let d=n[Cr];return d!==null&&(l[Cr]=d.createEmbeddedView(o)),Cy(o,l,e),l}finally{ze(r)}}function XD(n,t){return!t||t.firstChild===null||DI(n)}function uL(n,t,e,i=!0){let r=t[Re];if(bV(r,t,n,e),i){let s=l0(e,n),a=t[vt],l=fy(a,n[fs]);l!==null&&vV(r,n[Yn],a,t,l,s)}let o=t[Bc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function tf(n,t,e,i,r=!1){for(;e!==null;){let o=t[e.index];o!==null&&i.push(Ki(o)),Tr(o)&&dL(o,i);let s=e.type;if(s&8)tf(n,t,e.child,i);else if(s&32){let a=hy(e,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=KI(t,e);if(Array.isArray(a))i.push(...a);else{let l=Gc(t[Oi]);tf(l[Re],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function dL(n,t){for(let e=Kn;e<n.length;e++){let i=n[e],r=i[Re].firstChild;r!==null&&tf(i[Re],i,r,t)}n[fs]!==n[Ir]&&t.push(n[fs])}var dT=[];function hL(n){return n[hs]??fL(n)}function fL(n){let t=dT.pop()??Object.create(mL);return t.lView=n,t}function pL(n){n.lView[hs]!==n&&(n.lView=null,dT.push(n))}var mL=Ee(Y({},Xd),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{$c(n.lView)},consumerOnSignalRead(){this.lView[hs]=this}}),hT=100;function fT(n,t=!0,e=0){let i=n[Ai],r=i.rendererFactory,o=!1;o||r.begin?.();try{gL(n,e)}catch(s){throw t&&cT(n,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function gL(n,t){d0(n,t);let e=0;for(;J0(n);){if(e===hT)throw new de(103,!1);e++,d0(n,1)}}function _L(n,t,e,i){let r=t[ve];if((r&256)===256)return;let o=!1;!o&&t[Ai].inlineEffectRunner?.flush(),ny(t);let s=null,a=null;!o&&yL(n)&&(a=hL(t),s=n_(a));try{eI(t),l2(n.bindingStartIndex),e!==null&&tT(n,t,e,2,i);let l=(r&3)===3;if(!o)if(l){let f=n.preOrderCheckHooks;f!==null&&Bh(t,f,null)}else{let f=n.preOrderHooks;f!==null&&jh(t,f,0,null),x_(t,0)}if(vL(t),pT(t,0),n.contentQueries!==null&&sT(n,t),!o)if(l){let f=n.contentCheckHooks;f!==null&&Bh(t,f)}else{let f=n.contentHooks;f!==null&&jh(t,f,1),x_(t,1)}FV(n,t);let u=n.components;u!==null&&gT(t,u,0);let d=n.viewQuery;if(d!==null&&u0(2,d,i),!o)if(l){let f=n.viewCheckHooks;f!==null&&Bh(t,f)}else{let f=n.viewHooks;f!==null&&jh(t,f,2),x_(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[Lh]){for(let f of t[Lh])f();t[Lh]=null}o||(t[ve]&=-73)}catch(l){throw $c(t),l}finally{a!==null&&(i_(a,s),pL(a)),iy()}}function yL(n){return n.type!==2}function pT(n,t){for(let e=II(n);e!==null;e=TI(e))for(let i=Kn;i<e.length;i++){let r=e[i];mT(r,t)}}function vL(n){for(let t=II(n);t!==null;t=TI(t)){if(!(t[ve]&K0.HasTransplantedViews))continue;let e=t[Ba];for(let i=0;i<e.length;i++){let r=e[i],o=r[sn];Jk(r)}}}function wL(n,t,e){let i=co(t,n);mT(i,e)}function mT(n,t){Y0(n)&&d0(n,t)}function d0(n,t){let i=n[Re],r=n[ve],o=n[hs],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&eh(o)),o&&(o.dirty=!1),n[ve]&=-9217,s)_L(i,n,i.template,n[Mi]);else if(r&8192){pT(n,1);let a=i.components;a!==null&&gT(n,a,1)}}function gT(n,t,e){for(let i=0;i<t.length;i++)wL(n,t[i],e)}function Ey(n){for(n[Ai].changeDetectionScheduler?.notify();n;){n[ve]|=64;let t=Gc(n);if($k(n)&&!t)return n;n=t}return null}var _s=class{get rootNodes(){let t=this._lView,e=t[Re];return tf(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mi]}set context(t){this._lView[Mi]=t}get destroyed(){return(this._lView[ve]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[sn];if(Tr(t)){let e=t[Kh],i=e?e.indexOf(this):-1;i>-1&&(a0(t,i),qh(e,i))}this._attachedToViewContainer=!1}HI(this._lView[Re],this._lView)}onDestroy(t){tI(this._lView,t)}markForCheck(){Ey(this._cdRefInjectingView||this._lView)}detach(){this._lView[ve]&=-129}reattach(){Q_(this._lView),this._lView[ve]|=128}detectChanges(){this._lView[ve]|=1024,fT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,$I(this._lView[Re],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=t,Q_(this._lView)}},Ri=(()=>{class n{static{this.__NG_ELEMENT_ID__=EL}}return n})(),bL=Ri,CL=class extends bL{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=cL(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new _s(r)}};function EL(){return Nf(Ln(),xe())}function Nf(n,t){return n.type&4?new CL(t,n,za(n,t)):null}var EJ=new RegExp(`^(\\d+)*(${$2}|${U2})*(.*)`);var DL=()=>null;function eS(n,t){return DL(n,t)}var h0=class{},f0=class{},nf=class{};function SL(n){let t=Error(`No component factory found for ${In(n)}.`);return t[IL]=n,t}var IL="ngComponent";var p0=class{resolveComponentFactory(t){throw SL(t)}},Ff=(()=>{class n{static{this.NULL=new p0}}return n})(),Hc=class{},Zi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>TL()}}return n})();function TL(){let n=xe(),t=Ln(),e=co(t.index,n);return(ls(e)?e:n)[vt]}var xL=(()=>{class n{static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>null})}}return n})(),P_={};var tS=new Set;function Xc(n){tS.has(n)||(tS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function nS(...n){}function ML(){let n=typeof Wn.requestAnimationFrame=="function",t=Wn[n?"requestAnimationFrame":"setTimeout"],e=Wn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}var Fe=class n{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new oe(!1),this.onMicrotaskEmpty=new oe(!1),this.onStable=new oe(!1),this.onError=new oe(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=ML().nativeRequestAnimationFrame,RL(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new de(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,AL,nS,nS);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},AL={};function Dy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function OL(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Wn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,m0(n),n.isCheckStableRunning=!0,Dy(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),m0(n))}function RL(n){let t=()=>{OL(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,o,s,a)=>{if(PL(a))return e.invokeTask(r,o,s,a);try{return iS(n),e.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),rS(n)}},onInvoke:(e,i,r,o,s,a,l)=>{try{return iS(n),e.invoke(r,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),rS(n)}},onHasTask:(e,i,r,o)=>{e.hasTask(r,o),i===r&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,m0(n),Dy(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,i,r,o)=>(e.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function m0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function iS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function rS(n){n._nesting--,Dy(n)}function PL(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var _T=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of e)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}}return n})();function rf(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=j_(r,a);else if(o==2){let l=a,u=t[++s];i=j_(i,l+": "+u+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}var of=class extends Ff{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=oo(t);return new Ua(e,this.ngModule)}};function oS(n){let t=[];for(let e in n){if(!n.hasOwnProperty(e))continue;let i=n[e];i!==void 0&&t.push({propName:Array.isArray(i)?i[0]:i,templateName:e})}return t}function NL(n){let t=n.toLowerCase();return t==="svg"?YS:t==="math"?qk:null}var g0=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=hf(i);let r=this.injector.get(t,P_,i);return r!==P_||e===P_?r:this.parentInjector.get(t,e,i)}},Ua=class extends nf{get inputs(){let t=this.componentDef,e=t.inputTransforms,i=oS(t.inputs);if(e!==null)for(let r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return oS(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=Sk(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let o=ze(null);try{r=r||this.ngModule;let s=r instanceof on?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new g0(t,s):t,l=a.get(Hc,null);if(l===null)throw new de(407,!1);let u=a.get(xL,null),d=a.get(_T,null),f=a.get(h0,null),m={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=l.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",T=i?LV(y,i,this.componentDef.encapsulation,a):UI(y,D,NL(D)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let q=null;T!==null&&(q=ly(T,a,!0));let te=yy(0,null,null,1,0,null,null,null,null,null,null),$=Rf(null,te,null,R,null,null,m,y,a,null,q);ny($);let ae,ge;try{let pe=this.componentDef,M,C=null;pe.findHostDirectiveDefs?(M=[],C=new Map,pe.findHostDirectiveDefs(pe,M,C),M.push(pe)):M=[pe];let I=FL($,T),A=kL(I,T,pe,M,$,m,y);ge=ZS(te,Qn),T&&BL(y,pe,T,i),e!==void 0&&jL(ge,this.ngContentSelectors,e),ae=LL(A,pe,M,C,$,[UL]),Cy(te,$,null)}finally{iy()}return new _0(this.componentType,ae,za(ge,$),$,ge)}finally{ze(o)}}},_0=class extends f0{constructor(t,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new _s(r,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode.inputs,r;if(i!==null&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;by(o[Re],o,r,t,e),this.previousInputValues.set(t,e);let s=co(this._tNode.index,o);Ey(s)}}get injector(){return new cs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function FL(n,t){let e=n[Re],i=Qn;return n[i]=t,Wa(e,i,2,"#host",null)}function kL(n,t,e,i,r,o,s){let a=r[Re];VL(i,n,t,s);let l=null;t!==null&&(l=ly(t,r[La]));let u=o.rendererFactory.createRenderer(t,e),d=16;e.signals?d=4096:e.onPush&&(d=64);let f=Rf(r,nT(e),null,d,r[n.index],n,o,u,null,null,l);return a.firstCreatePass&&c0(a,n,i.length-1),Pf(r,f),r[n.index]=f}function VL(n,t,e,i){for(let r of n)t.mergedAttrs=Vc(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(rf(t,t.mergedAttrs,!0),e!==null&&JI(i,e,t))}function LL(n,t,e,i,r,o){let s=Ln(),a=r[Re],l=ci(s,r);iT(a,r,s,e,null,i);for(let d=0;d<e.length;d++){let f=s.directiveStart+d,m=gs(r,a,f,s);ao(m,r)}rT(a,r,s),l&&ao(l,r);let u=gs(r,a,s.directiveStart+s.componentOffset,s);if(n[Mi]=r[Mi]=u,o!==null)for(let d of o)d(u,t);return my(a,s,r),u}function BL(n,t,e,i){if(i)H_(n,e,["ng-version","17.3.12"]);else{let{attrs:r,classes:o}=Ik(t.selectors[0]);r&&H_(n,e,r),o&&o.length>0&&YI(n,e,o.join(" "))}}function jL(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let o=e[r];i.push(o!=null?Array.from(o):null)}}function UL(){let n=Ln();Df(xe()[Re],n)}var Bn=(()=>{class n{static{this.__NG_ELEMENT_ID__=$L}}return n})();function $L(){let n=Ln();return vT(n,xe())}var GL=Bn,yT=class extends GL{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return za(this._hostTNode,this._hostLView)}get injector(){return new cs(this._hostTNode,this._hostLView)}get parentInjector(){let t=ry(this._hostTNode,this._hostLView);if(fI(t)){let e=Yh(t,this._hostLView),i=Qh(t),r=e[Re].data[i+8];return new cs(r,e)}else return new cs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=sS(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Kn}createEmbeddedView(t,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=eS(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,XD(this._hostTNode,s)),a}createComponent(t,e,i,r,o){let s=t&&!Uk(t),a;if(s)a=e;else{let D=e||{};a=D.index,i=D.injector,r=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let l=s?t:new Ua(oo(t)),u=i||this.parentInjector;if(!o&&l.ngModule==null){let T=(s?u:this.parentInjector).get(on,null);T&&(o=T)}let d=oo(l.componentType??{}),f=eS(this._lContainer,d?.id??null),m=f?.firstChild??null,y=l.create(u,r,m,o);return this.insertImpl(y.hostView,a,XD(this._hostTNode,f)),y}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(Yk(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[sn],u=new yT(l,l[Yn],l[sn]);u.detach(u.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return uL(s,r,o,i),t.attachToViewContainerRef(),TS(N_(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=sS(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=a0(this._lContainer,e);i&&(qh(N_(this._lContainer),e),HI(i[Re],i))}detach(t){let e=this._adjustIndex(t,-1),i=a0(this._lContainer,e);return i&&qh(N_(this._lContainer),e)!=null?new _s(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function sS(n){return n[Kh]}function N_(n){return n[Kh]||(n[Kh]=[])}function vT(n,t){let e,i=t[n.index];return Tr(i)?e=i:(e=oT(i,t,null,n),t[n.index]=e,Pf(t,e)),zL(e,t,n,i),new yT(e,n,t)}function HL(n,t){let e=n[vt],i=e.createComment(""),r=ci(t,n),o=fy(e,r);return ef(e,o,i,TV(e,r),!1),i}var zL=KL,qL=()=>!1;function WL(n,t,e){return qL(n,t,e)}function KL(n,t,e,i){if(n[fs])return;let r;e.type&8?r=Ki(i):r=HL(t,e),n[fs]=r}var y0=class n{constructor(t){this.queryList=t,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},v0=class n{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)Sy(t,e).matches!==null&&this.queries[e].setDirty()}},w0=class{constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=nB(t):this.predicate=t}},b0=class n{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},C0=class n{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,e,QL(e,o)),this.matchTNodeWithReadOption(t,e,Uh(e,t,o,!1,!1))}else i===Ri?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Uh(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===an||r===Bn||r===Ri&&e.type&4)this.addMatch(e.index,-2);else{let o=Uh(e,t,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function QL(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function YL(n,t){return n.type&11?za(n,t):n.type&4?Nf(n,t):null}function JL(n,t,e,i){return e===-1?YL(t,n):e===-2?ZL(n,t,i):gs(n,n[Re],e,t)}function ZL(n,t,e){if(e===an)return za(t,n);if(e===Ri)return Nf(t,n);if(e===Bn)return vT(t,n)}function wT(n,t,e,i){let r=t[Cr].queries[i];if(r.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let d=o[u];a.push(JL(t,d,s[l+1],e.metadata.read))}}r.matches=a}return r.matches}function E0(n,t,e,i){let r=n.queries.getByIndex(e),o=r.matches;if(o!==null){let s=wT(n,t,r,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],d=t[-l];for(let f=Kn;f<d.length;f++){let m=d[f];m[Qc]===m[sn]&&E0(m[Re],m,u,i)}if(d[Ba]!==null){let f=d[Ba];for(let m=0;m<f.length;m++){let y=f[m];E0(y[Re],y,u,i)}}}}}return i}function XL(n,t){return n[Cr].queries[t].queryList}function eB(n,t,e){let i=new n0((e&4)===4);return UV(n,t,i,i.destroy),(t[Cr]??=new v0).queries.push(new y0(i))-1}function tB(n,t,e){let i=Mt();return i.firstCreatePass&&(iB(i,new w0(n,t,e),-1),(t&2)===2&&(i.staticViewQueries=!0)),eB(i,xe(),t)}function nB(n){return n.split(",").map(t=>t.trim())}function iB(n,t,e){n.queries===null&&(n.queries=new b0),n.queries.track(new C0(t,e))}function Sy(n,t){return n.queries.getByIndex(t)}function rB(n,t){let e=n[Re],i=Sy(e,t);return i.crossesNgTemplate?E0(e,n,t,[]):wT(e,n,i,t)}function oB(n){return typeof n=="function"&&n[vr]!==void 0}function Xe(n,t){Xc("NgSignals");let e=nD(n),i=e[vr];return t?.equal&&(i.equal=t.equal),e.set=r=>nh(i,r),e.update=r=>iD(i,r),e.asReadonly=sB.bind(e),e}function sB(){let n=this[vr];if(n.readonlyFn===void 0){let t=()=>this();t[vr]=n,n.readonlyFn=t}return n.readonlyFn}function bT(n){return oB(n)&&typeof n.set=="function"}function aB(n){return Object.getPrototypeOf(n.prototype).constructor}function Yt(n){let t=aB(n.type),e=!0,i=[n];for(;t;){let r;if(so(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new de(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let s=n;s.inputs=Fh(n.inputs),s.inputTransforms=Fh(n.inputTransforms),s.declaredInputs=Fh(n.declaredInputs),s.outputs=Fh(n.outputs);let a=r.hostBindings;a&&hB(n,a);let l=r.viewQuery,u=r.contentQueries;if(l&&uB(n,l),u&&dB(n,u),lB(n,r),GF(n.outputs,r.outputs),so(r)&&r.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Yt&&(e=!1)}}t=Object.getPrototypeOf(t)}cB(i)}function lB(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];if(i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=t.inputTransforms[r]}}}function cB(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Vc(r.hostAttrs,e=Vc(e,r.hostAttrs))}}function Fh(n){return n===Fa?{}:n===Vn?[]:n}function uB(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function dB(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,o)=>{t(i,r,o),e(i,r,o)}:n.contentQueries=t}function hB(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}var lo=class{},zc=class{};var D0=class extends lo{constructor(t,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new of(this);let r=kS(t);this._bootstrapComponents=jI(r.bootstrap),this._r3Injector=CI(t,e,[{provide:lo,useValue:this},{provide:Ff,useValue:this.componentFactoryResolver},...i],In(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},S0=class extends zc{constructor(t){super(),this.moduleType=t}create(t){return new D0(this.moduleType,t,[])}};var sf=class extends lo{constructor(t){super(),this.componentFactoryResolver=new of(this),this.instance=null;let e=new Lc([...t.providers,{provide:lo,useValue:this},{provide:Ff,useValue:this.componentFactoryResolver}],t.parent||gf(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Iy(n,t,e=null){return new sf({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var ho=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new xt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function CT(n){return Ty(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function fB(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function Ty(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function kf(n,t,e){return n[t]=e}function pB(n,t){return n[t]}function Ji(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function xy(n,t,e,i){let r=Ji(n,t,e);return Ji(n,t+1,i)||r}function mB(n,t,e,i,r){let o=xy(n,t,e,i);return Ji(n,t+2,r)||o}function gB(n){return(n.flags&32)===32}function _B(n,t,e,i,r,o,s,a,l){let u=t.consts,d=Wa(t,n,4,s||null,ja(u,a));wy(t,e,d,ja(u,l)),Df(t,d);let f=d.tView=yy(2,d,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,d),f.queries=t.queries.embeddedTView(d)),d}function G(n,t,e,i,r,o,s,a){let l=xe(),u=Mt(),d=n+Qn,f=u.firstCreatePass?_B(d,u,l,t,e,i,r,o,s):u.data[d];ws(f,!1);let m=yB(u,l,f,n);Cf()&&Af(u,l,m,f),ao(m,l);let y=oT(m,l,m,f);return l[d]=y,Pf(l,y),WL(y,f,l),vf(f)&&gy(u,l,f),s!=null&&_y(l,f,a),G}var yB=vB;function vB(n,t,e,i){return Ef(!0),t[vt].createComment("")}function hi(n,t,e,i){let r=xe(),o=wf();if(Ji(r,o,t)){let s=Mt(),a=bf();nL(a,r,n,t,e,i)}return hi}function My(n,t,e,i){return Ji(n,wf(),e)?t+us(e)+i:Zn}function wB(n,t,e,i,r,o){let s=a2(),a=xy(n,s,e,r);return ey(2),a?t+us(e)+i+us(r)+o:Zn}function kh(n,t){return n<<17|t<<2}function ys(n){return n>>17&32767}function bB(n){return(n&2)==2}function CB(n,t){return n&131071|t<<17}function I0(n){return n|2}function $a(n){return(n&131068)>>2}function F_(n,t){return n&-131069|t<<2}function EB(n){return(n&1)===1}function T0(n){return n|1}function DB(n,t,e,i,r,o){let s=o?t.classBindings:t.styleBindings,a=ys(s),l=$a(s);n[i]=e;let u=!1,d;if(Array.isArray(e)){let f=e;d=f[1],(d===null||Kc(f,d)>0)&&(u=!0)}else d=e;if(r)if(l!==0){let m=ys(n[a+1]);n[i+1]=kh(m,a),m!==0&&(n[m+1]=F_(n[m+1],i)),n[a+1]=CB(n[a+1],i)}else n[i+1]=kh(a,0),a!==0&&(n[a+1]=F_(n[a+1],i)),a=i;else n[i+1]=kh(l,0),a===0?a=i:n[l+1]=F_(n[l+1],i),l=i;u&&(n[i+1]=I0(n[i+1])),aS(n,d,i,!0),aS(n,d,i,!1),SB(t,d,n,i,o),s=kh(a,l),o?t.classBindings=s:t.styleBindings=s}function SB(n,t,e,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&Kc(o,t)>=0&&(e[i+1]=T0(e[i+1]))}function aS(n,t,e,i){let r=n[e+1],o=t===null,s=i?ys(r):$a(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];IB(l,t)&&(a=!0,n[s+1]=i?T0(u):I0(u)),s=i?ys(u):$a(u)}a&&(n[e+1]=i?I0(r):T0(r))}function IB(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?Kc(n,t)>=0:!1}var Ti={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function TB(n){return n.substring(Ti.key,Ti.keyEnd)}function xB(n){return MB(n),ET(n,DT(n,0,Ti.textEnd))}function ET(n,t){let e=Ti.textEnd;return e===t?-1:(t=Ti.keyEnd=AB(n,Ti.key=t,e),DT(n,t,e))}function MB(n){Ti.key=0,Ti.keyEnd=0,Ti.value=0,Ti.valueEnd=0,Ti.textEnd=n.length}function DT(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function AB(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function b(n,t,e){let i=xe(),r=wf();if(Ji(i,r,t)){let o=Mt(),s=bf();vy(o,s,i,n,t,i[vt],e,!1)}return b}function x0(n,t,e,i,r){let o=t.inputs,s=r?"class":"style";by(n,e,o[s],s,i)}function bs(n,t){return OB(n,t,null,!0),bs}function jn(n){IT(VB,ST,n,!0)}function ST(n,t){for(let e=xB(t);e>=0;e=ET(t,e))ff(n,TB(t),!0)}function OB(n,t,e,i){let r=xe(),o=Mt(),s=ey(2);if(o.firstUpdatePass&&xT(o,n,s,i),t!==Zn&&Ji(r,s,t)){let a=o.data[uo()];MT(o,a,r,r[vt],n,r[s+1]=BB(t,e),i,s)}}function IT(n,t,e,i){let r=Mt(),o=ey(2);r.firstUpdatePass&&xT(r,null,o,i);let s=xe();if(e!==Zn&&Ji(s,o,e)){let a=r.data[uo()];if(AT(a,i)&&!TT(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=j_(l,e||"")),x0(r,a,s,e,i)}else LB(r,a,s,s[vt],s[o+1],s[o+1]=kB(n,t,e),i,o)}}function TT(n,t){return t>=n.expandoStartIndex}function xT(n,t,e,i){let r=n.data;if(r[e+1]===null){let o=r[uo()],s=TT(n,e);AT(o,i)&&t===null&&!s&&(t=!1),t=RB(r,o,t,i),DB(r,o,t,e,s,i)}}function RB(n,t,e,i){let r=h2(n),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=k_(null,n,t,e,i),e=qc(e,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==r)if(e=k_(r,n,t,e,i),o===null){let l=PB(n,t,i);l!==void 0&&Array.isArray(l)&&(l=k_(null,n,t,l[1],i),l=qc(l,t.attrs,i),NB(n,t,i,l))}else o=FB(n,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),e}function PB(n,t,e){let i=e?t.classBindings:t.styleBindings;if($a(i)!==0)return n[ys(i)]}function NB(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[ys(r)]=i}function FB(n,t,e){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=qc(i,s,e)}return qc(i,t.attrs,e)}function k_(n,t,e,i,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],i=qc(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function qc(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ff(n,s,e?!0:t[++o]))}return n===void 0?null:n}function kB(n,t,e){if(e==null||e==="")return Vn;let i=[],r=qa(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&t(i,r);return i}function VB(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&ff(n,i,e)}function LB(n,t,e,i,r,o,s,a){r===Zn&&(r=Vn);let l=0,u=0,d=0<r.length?r[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let m=l<r.length?r[l+1]:void 0,y=u<o.length?o[u+1]:void 0,D=null,T;d===f?(l+=2,u+=2,m!==y&&(D=f,T=y)):f===null||d!==null&&d<f?(l+=2,D=d):(u+=2,D=f,T=y),D!==null&&MT(n,t,e,i,D,T,s,a),d=l<r.length?r[l]:null,f=u<o.length?o[u]:null}}function MT(n,t,e,i,r,o,s,a){if(!(t.type&3))return;let l=n.data,u=l[a+1],d=EB(u)?lS(l,t,e,r,$a(u),s):void 0;if(!af(d)){af(o)||bB(u)&&(o=lS(l,null,e,r,a,s));let f=JS(uo(),e);PV(i,s,f,r,o)}}function lS(n,t,e,i,r,o){let s=t===null,a;for(;r>0;){let l=n[r],u=Array.isArray(l),d=u?l[1]:l,f=d===null,m=e[r+1];m===Zn&&(m=f?Vn:void 0);let y=f?I_(m,i):d===i?m:void 0;if(u&&!af(y)&&(y=I_(l,i)),af(y)&&(a=y,s))return a;let D=n[r+1];r=s?ys(D):$a(D)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=I_(l,i))}return a}function af(n){return n!==void 0}function BB(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=In(qa(n)))),n}function AT(n,t){return(n.flags&(t?8:16))!==0}function OT(n,t,e){let i=xe(),r=My(i,n,t,e);IT(ff,ST,r,!0)}function jB(n,t,e,i,r,o){let s=t.consts,a=ja(s,r),l=Wa(t,n,2,i,a);return wy(t,e,l,ja(s,o)),l.attrs!==null&&rf(l,l.attrs,!1),l.mergedAttrs!==null&&rf(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function _(n,t,e,i){let r=xe(),o=Mt(),s=Qn+n,a=r[vt],l=o.firstCreatePass?jB(s,o,r,t,e,i):o.data[s],u=UB(o,r,l,a,t,n);r[s]=u;let d=vf(l);return ws(l,!0),JI(a,u,l),!gB(l)&&Cf()&&Af(o,r,u,l),e2()===0&&ao(u,r),t2(),d&&(gy(o,r,l),my(o,l,r)),i!==null&&_y(r,l),_}function v(){let n=Ln();Z0()?X0():(n=n.parent,ws(n,!1));let t=n;i2(t)&&r2(),n2();let e=Mt();return e.firstCreatePass&&(Df(e,n),Q0(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&w2(t)&&x0(e,t,xe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&b2(t)&&x0(e,t,xe(),t.stylesWithoutHost,!1),v}function Q(n,t,e,i){return _(n,t,e,i),v(),Q}var UB=(n,t,e,i,r,o)=>(Ef(!0),UI(i,r,g2()));function $B(n,t,e,i,r){let o=t.consts,s=ja(o,i),a=Wa(t,n,8,"ng-container",s);s!==null&&rf(a,s,!0);let l=ja(o,r);return wy(t,e,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function Be(n,t,e){let i=xe(),r=Mt(),o=n+Qn,s=r.firstCreatePass?$B(o,r,i,t,e):r.data[o];ws(s,!0);let a=GB(r,i,s,n);return i[o]=a,Cf()&&Af(r,i,a,s),ao(a,i),vf(s)&&(gy(r,i,s),my(r,s,i)),e!=null&&_y(i,s),Be}function je(){let n=Ln(),t=Mt();return Z0()?X0():(n=n.parent,ws(n,!1)),t.firstCreatePass&&(Df(t,n),Q0(n)&&t.queries.elementEnd(n)),je}function Ay(n,t,e){return Be(n,t,e),je(),Ay}var GB=(n,t,e,i)=>(Ef(!0),_V(t[vt],""));function le(){return xe()}var as=void 0;function HB(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&i===0?1:5}var zB=["en",[["a","p"],["AM","PM"],as],[["AM","PM"],as,as],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],as,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],as,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",as,"{1} 'at' {0}",as],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",HB],Fc={};function RT(n,t,e){typeof t!="string"&&(e=t,t=n[ht.LocaleId]),t=t.toLowerCase().replace(/_/g,"-"),Fc[t]=n,e&&(Fc[t][ht.ExtraData]=e)}function Xn(n){let t=qB(n),e=cS(t);if(e)return e;let i=t.split("-")[0];if(e=cS(i),e)return e;if(i==="en")return zB;throw new de(701,!1)}function cS(n){return n in Fc||(Fc[n]=Wn.ng&&Wn.ng.common&&Wn.ng.common.locales&&Wn.ng.common.locales[n]),Fc[n]}var ht=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(ht||{});function qB(n){return n.toLowerCase().replace(/_/g,"-")}var lf="en-US";var WB=lf;function KB(n){typeof n=="string"&&(WB=n.toLowerCase().replace(/_/g,"-"))}function H(n,t,e,i){let r=xe(),o=Mt(),s=Ln();return PT(o,r,r[vt],s,n,t,i),H}function QB(n,t,e,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===i){let a=t[jc],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function PT(n,t,e,i,r,o,s){let a=vf(i),u=n.firstCreatePass&&lT(n),d=t[Mi],f=aT(t),m=!0;if(i.type&3||s){let T=ci(i,t),R=s?s(T):T,q=f.length,te=s?ae=>s(Ki(ae[i.index])):i.index,$=null;if(!s&&a&&($=QB(n,t,r,i.index)),$!==null){let ae=$.__ngLastListenerFn__||$;ae.__ngNextListenerFn__=o,$.__ngLastListenerFn__=o,m=!1}else{o=dS(i,t,d,o,!1);let ae=e.listen(R,r,o);f.push(o,ae),u&&u.push(r,te,q,q+1)}}else o=dS(i,t,d,o,!1);let y=i.outputs,D;if(m&&y!==null&&(D=y[r])){let T=D.length;if(T)for(let R=0;R<T;R+=2){let q=D[R],te=D[R+1],ge=t[q][te].subscribe(o),pe=f.length;f.push(o,ge),u&&u.push(r,i.index,pe,-(pe+1))}}}function uS(n,t,e,i){let r=ze(null);try{return zi(6,t,e),e(i)!==!1}catch(o){return cT(n,o),!1}finally{zi(7,t,e),ze(r)}}function dS(n,t,e,i,r){return function o(s){if(s===Function)return i;let a=n.componentOffset>-1?co(n.index,t):t;Ey(a);let l=uS(t,e,i,s),u=o.__ngNextListenerFn__;for(;u;)l=uS(t,e,u,s)&&l,u=u.__ngNextListenerFn__;return r&&l===!1&&s.preventDefault(),l}}function x(n=1){return p2(n)}function YB(n,t){let e=null,i=wk(n);for(let r=0;r<t.length;r++){let o=t[r];if(o==="*"){e=r;continue}if(i===null?RS(n,o,!0):Ek(i,o))return r}return e}function Ka(n){let t=xe()[Oi][Yn];if(!t.projection){let e=n?n.length:1,i=t.projection=uk(e,null),r=i.slice(),o=t.child;for(;o!==null;){let s=n?YB(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Qa(n,t=0,e){let i=xe(),r=Mt(),o=Wa(r,Qn+n,16,null,e||null);o.projection===null&&(o.projection=t),X0(),(!i[Bc]||iI())&&(o.flags&32)!==32&&OV(r,i,o)}function Vf(n,t,e){return NT(n,"",t,"",e),Vf}function NT(n,t,e,i,r){let o=xe(),s=My(o,t,e,i);if(s!==Zn){let a=Mt(),l=bf();vy(a,l,o,n,s,o[vt],r,!1)}return NT}function kt(n,t,e){tB(n,t,e)}function At(n){let t=xe(),e=Mt(),i=oI();ty(i+1);let r=Sy(e,i);if(n.dirty&&Qk(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=rB(t,i);n.reset(o,N2),n.notifyOnChanges()}return!0}return!1}function Ot(){return XL(xe(),oI())}function JB(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function Vt(n){let t=s2();return XS(t,Qn+n)}function k(n,t=""){let e=xe(),i=Mt(),r=n+Qn,o=i.firstCreatePass?Wa(i,r,1,t,null):i.data[r],s=ZB(i,e,o,t,n);e[r]=s,Cf()&&Af(i,e,s,o),ws(o,!1)}var ZB=(n,t,e,i,r)=>(Ef(!0),mV(t[vt],i));function Ye(n){return ke("",n,""),Ye}function ke(n,t,e){let i=xe(),r=My(i,n,t,e);return r!==Zn&&uT(i,uo(),r),ke}function eu(n,t,e,i,r){let o=xe(),s=wB(o,n,t,e,i,r);return s!==Zn&&uT(o,uo(),s),eu}function Me(n,t,e){bT(t)&&(t=t());let i=xe(),r=wf();if(Ji(i,r,t)){let o=Mt(),s=bf();vy(o,s,i,n,t,i[vt],e,!1)}return Me}function Pe(n,t){let e=bT(n);return e&&n.set(t),e}function Ae(n,t){let e=xe(),i=Mt(),r=Ln();return PT(i,e,e[vt],r,n,t),Ae}function XB(n,t,e){let i=Mt();if(i.firstCreatePass){let r=so(n);M0(e,i.data,i.blueprint,r,!0),M0(t,i.data,i.blueprint,r,!1)}}function M0(n,t,e,i,r){if(n=Sn(n),Array.isArray(n))for(let o=0;o<n.length;o++)M0(n[o],t,e,i,r);else{let o=Mt(),s=xe(),a=Ln(),l=Va(n)?n:Sn(n.provide),u=$S(n),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Va(n)||!n.multi){let y=new ms(u,r,re),D=L_(l,t,r?d:d+m,f);D===-1?(Z_(Zh(a,s),o,l),V_(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(y),s.push(y)):(e[D]=y,s[D]=y)}else{let y=L_(l,t,d+m,f),D=L_(l,t,d,d+m),T=y>=0&&e[y],R=D>=0&&e[D];if(r&&!R||!r&&!T){Z_(Zh(a,s),o,l);let q=nj(r?tj:ej,e.length,r,i,u);!r&&R&&(e[D].providerFactory=q),V_(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(q),s.push(q)}else{let q=FT(e[r?D:y],u,!r&&i);V_(o,n,y>-1?y:D,q)}!r&&i&&R&&e[D].componentProviders++}}}function V_(n,t,e,i){let r=Va(t),o=Pk(t);if(r||o){let l=(o?Sn(t.useClass):t).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let d=u.indexOf(e);d===-1?u.push(e,[i,l]):u[d+1].push(i,l)}else u.push(e,l)}}}function FT(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function L_(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function ej(n,t,e,i){return A0(this.multi,[])}function tj(n,t,e,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=gs(e,e[Re],this.providerFactory.index,i);o=a.slice(0,s),A0(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],A0(r,o);return o}function A0(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function nj(n,t,e,i,r){let o=new ms(n,e,re);return o.multi=[],o.index=t,o.componentProviders=0,FT(o,r,i&&!e),o}function Un(n,t=[]){return e=>{e.providersResolver=(i,r)=>XB(i,r?r(n):n,t)}}var ij=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=BS(!1,e.type),r=i.length>0?Iy([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Z({token:n,providedIn:"environment",factory:()=>new n(K(on))})}}return n})();function fe(n){Xc("NgStandalone"),n.getStandaloneInjector=t=>t.get(ij).getOrCreateStandaloneInjector(n)}function kT(n,t,e){let i=Yc()+n,r=xe();return r[i]===Zn?kf(r,i,e?t.call(e):t()):pB(r,i)}function Jt(n,t,e,i){return VT(xe(),Yc(),n,t,e,i)}function Xi(n,t,e,i,r){return rj(xe(),Yc(),n,t,e,i,r)}function fo(n,t,e,i,r,o){return oj(xe(),Yc(),n,t,e,i,r,o)}function Oy(n,t){let e=n[t];return e===Zn?void 0:e}function VT(n,t,e,i,r,o){let s=t+e;return Ji(n,s,r)?kf(n,s+1,o?i.call(o,r):i(r)):Oy(n,s+1)}function rj(n,t,e,i,r,o,s){let a=t+e;return xy(n,a,r,o)?kf(n,a+2,s?i.call(s,r,o):i(r,o)):Oy(n,a+2)}function oj(n,t,e,i,r,o,s,a){let l=t+e;return mB(n,l,r,o,s)?kf(n,l+3,a?i.call(a,r,o,s):i(r,o,s)):Oy(n,l+3)}function tu(n,t){let e=Mt(),i,r=n+Qn;e.firstCreatePass?(i=sj(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=ds(i.type,!0)),s,a=kn(re);try{let l=Jh(!1),u=o();return Jh(l),JB(e,xe(),r,u),u}finally{kn(a)}}function sj(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function nu(n,t,e){let i=n+Qn,r=xe(),o=XS(r,i);return aj(r,i)?VT(r,Yc(),t,o.transform,e,o):o.transform(e)}function aj(n,t){return n[Re].data[t].pure}function er(n,t){return Nf(n,t)}var Er=class{constructor(t){this.full=t;let e=t.split(".");this.major=e[0],this.minor=e[1],this.patch=e.slice(2).join(".")}},Lf=new Er("17.3.12"),Bf=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var LT=new ie("");function po(n){return!!n&&typeof n.then=="function"}function Ry(n){return!!n&&typeof n.subscribe=="function"}var BT=new ie(""),jT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=F(BT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=r();if(po(o))e.push(o);else if(Ry(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jf=new ie("");function lj(){tD(()=>{throw new de(600,!1)})}function cj(n){return n.isBoundToModule}function uj(n,t,e){try{let i=e();return po(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var mo=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(EI),this.afterRenderEffectManager=F(_T),this.externalTestViews=new Set,this.beforeRender=new qe,this.afterTick=new qe,this.componentTypes=[],this.components=[],this.isStable=F(ho).hasPendingTasks.pipe(ne(e=>!e)),this._injector=F(on)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){let r=e instanceof nf;if(!this._injector.get(jT).done){let m=!r&&FS(e),y=!1;throw new de(405,y)}let s;r?s=e:s=this._injector.get(Ff).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=cj(s)?void 0:this._injector.get(lo),l=i||s.selector,u=s.create(ui.NULL,[],l,a),d=u.location.nativeElement,f=u.injector.get(LT,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),B_(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new de(101,!1);let i=ze(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,ze(i)}}detectChangesInAttachedViews(e){let i=0,r=this.afterRenderEffectManager;for(;;){if(i===hT)throw new de(103,!1);if(e){let o=i===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)dj(s,o,a)}if(i++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>O0(o))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>O0(o))))break}}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;B_(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let i=this._injector.get(jf,[]);[...this._bootstrapListeners,...i].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>B_(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new de(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B_(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function dj(n,t,e){!t&&!O0(n)||hj(n,e,t)}function O0(n){return J0(n)}function hj(n,t,e){let i;e?(i=0,n[ve]|=1024):n[ve]&64?i=0:i=1,fT(n,t,i)}var R0=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},Py=(()=>{class n{compileModuleSync(e){return new S0(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=kS(e),o=jI(r.declarations).reduce((s,a)=>{let l=oo(a);return l&&s.push(new Ua(l)),s},[]);return new R0(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fj=(()=>{class n{constructor(){this.zone=F(Fe),this.applicationRef=F(mo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pj(n){return[{provide:Fe,useFactory:n},{provide:ka,multi:!0,useFactory:()=>{let t=F(fj,{optional:!0});return()=>t.initialize()}},{provide:ka,multi:!0,useFactory:()=>{let t=F(yj);return()=>{t.initialize()}}},{provide:EI,useFactory:mj}]}function mj(){let n=F(Fe),t=F(Qi);return e=>n.runOutsideAngular(()=>t.handleError(e))}function gj(n){let t=pj(()=>new Fe(_j(n)));return vs([[],t])}function _j(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var yj=(()=>{class n{constructor(){this.subscription=new gt,this.initialized=!1,this.zone=F(Fe),this.pendingTasks=F(ho)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function vj(){return typeof $localize<"u"&&$localize.locale||lf}var Uf=new ie("",{providedIn:"root",factory:()=>F(Uf,Ne.Optional|Ne.SkipSelf)||vj()});var UT=new ie("");var Gh=null;function wj(n=[],t){return ui.create({name:t,providers:[{provide:mf,useValue:"platform"},{provide:UT,useValue:new Set([()=>Gh=null])},...n]})}function bj(n=[]){if(Gh)return Gh;let t=wj(n);return Gh=t,lj(),Cj(t),t}function Cj(n){n.get(sy,null)?.forEach(e=>e())}function Ny(){return!1}var Pi=(()=>{class n{static{this.__NG_ELEMENT_ID__=Ej}}return n})();function Ej(n){return Dj(Ln(),xe(),(n&16)===16)}function Dj(n,t,e){if(yf(n)&&!e){let i=co(n.index,t);return new _s(i,i)}else if(n.type&47){let i=t[Oi];return new _s(i,t)}return null}var P0=class{constructor(){}supports(t){return CT(t)}create(t){return new N0(t)}},Sj=(n,t)=>t,N0=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Sj}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let s=!i||e&&e.currentIndex<hS(i,r,o)?e:i,a=hS(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,d=l-r;if(u!=d){for(let m=0;m<u;m++){let y=m<o.length?o[m]:o[m]=0,D=y+m;d<=D&&D<u&&(o[m]=y+1)}let f=s.previousIndex;o[f]=d-u}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!CT(t))throw new de(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),i=!0):(i&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,fB(t,a=>{s=this._trackByFn(r,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new F0(e,i),o,r)),t}_verifyReinsertion(t,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new cf),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new cf),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},F0=class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},k0=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},cf=class{constructor(){this.map=new Map}put(t){let e=t.trackById,i=this.map.get(e);i||(i=new k0,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function hS(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}var V0=class{constructor(){}supports(t){return t instanceof Map||Ty(t)}create(){return new L0}},L0=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||Ty(t)))throw new de(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let r=this._records.get(t);this._maybeAddToChanges(r,e);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new B0(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}},B0=class{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function fS(){return new Fy([new P0])}var Fy=(()=>{class n{static{this.\u0275prov=Z({token:n,providedIn:"root",factory:fS})}constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||fS()),deps:[[n,new G0,new Dr]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new de(901,!1)}}return n})();function pS(){return new ky([new V0])}var ky=(()=>{class n{static{this.\u0275prov=Z({token:n,providedIn:"root",factory:pS})}constructor(e){this.factories=e}static create(e,i){if(i){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||pS()),deps:[[n,new G0,new Dr]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i)return i;throw new de(901,!1)}}return n})();function $T(n){try{let{rootComponent:t,appProviders:e,platformProviders:i}=n,r=bj(i),o=[gj(),...e||[]],a=new sf({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Fe);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(Qi,null),d;l.runOutsideAngular(()=>{d=l.onError.subscribe({next:y=>{u.handleError(y)}})});let f=()=>a.destroy(),m=r.get(UT);return m.add(f),a.onDestroy(()=>{d.unsubscribe(),m.delete(f)}),uj(u,l,()=>{let y=a.get(jT);return y.runInitializers(),y.donePromise.then(()=>{let D=a.get(Uf,lf);KB(D||lf);let T=a.get(mo);return t!==void 0&&T.bootstrap(t),T})})})}catch(t){return Promise.reject(t)}}function iu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Vy(n){let t=ze(null);try{return n()}finally{ze(t)}}var Ij=new ie("",{providedIn:"root",factory:()=>F(Tj)}),Tj=(()=>{class n{static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>new j0})}}return n})(),j0=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=F(ho),this.taskId=null}scheduleEffect(t){if(this.enqueue(t),this.taskId===null){let e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(t){let e=t.creationZone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||(this.queuedEffectCount++,i.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}},U0=class{constructor(t,e,i,r,o,s){this.scheduler=t,this.effectFn=e,this.creationZone=i,this.injector=o,this.watcher=rD(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(e){this.injector.get(Qi,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Cs(n,t){Xc("NgSignals"),!t?.injector&&jk(Cs);let e=t?.injector??F(ui),i=t?.manualCleanup!==!0?e.get(Sf):null,r=new U0(e.get(Ij),n,typeof Zone>"u"?null:Zone.current,i,e,t?.allowSignalWrites??!1),o=e.get(Pi,null,{optional:!0});return!o||!(o._lView[ve]&8)?r.watcher.notify():(o._lView[Lh]??=[]).push(r.watcher.notify),r}function $f(n,t){let e=oo(n),i=t.elementInjector||gf();return new Ua(e).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}var JT=null;function Rr(){return JT}function ZT(n){JT??=n}var Jf=class{};var Zt=new ie(""),XT=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:()=>F(Aj),providedIn:"platform"})}}return n})();var Aj=(()=>{class n extends XT{constructor(){super(),this._doc=F(Zt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rr().getBaseHref(this._doc)}onPopState(e){let i=Rr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=Rr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function ex(n,t){if(n.length==0)return t;if(t.length==0)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?n+t.substring(1):e==1?n+t:n+"/"+t}function GT(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,i=e-(n[e-1]==="/"?1:0);return n.slice(0,i)+n.slice(e)}function Es(n){return n&&n[0]!=="?"?"?"+n:n}var tp=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:()=>F(tx),providedIn:"root"})}}return n})(),Oj=new ie(""),tx=(()=>{class n extends tp{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??F(Zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ex(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+Es(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+Es(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+Es(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(K(XT),K(Oj,8))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ou=(()=>{class n{constructor(e){this._subject=new oe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=Nj(GT(HT(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Es(i))}normalize(e){return n.stripTrailingSlash(Pj(this._basePath,HT(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Es(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Es(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static{this.normalizeQueryParams=Es}static{this.joinWithSlash=ex}static{this.stripTrailingSlash=GT}static{this.\u0275fac=function(i){return new(i||n)(K(tp))}}static{this.\u0275prov=Z({token:n,factory:()=>Rj(),providedIn:"root"})}}return n})();function Rj(){return new ou(K(tp))}function Pj(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function HT(n){return n.replace(/\/index.html$/,"")}function Nj(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var nx=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(nx||{});var _n=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(_n||{}),it=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(it||{}),ei=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(ei||{}),ti={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Fj(n){return Xn(n)[ht.LocaleId]}function ix(n,t,e){let i=Xn(n),r=[i[ht.DayPeriodsFormat],i[ht.DayPeriodsStandalone]],o=fi(r,t);return fi(o,e)}function rx(n,t,e){let i=Xn(n),r=[i[ht.DaysFormat],i[ht.DaysStandalone]],o=fi(r,t);return fi(o,e)}function ox(n,t,e){let i=Xn(n),r=[i[ht.MonthsFormat],i[ht.MonthsStandalone]],o=fi(r,t);return fi(o,e)}function kj(n,t){let i=Xn(n)[ht.Eras];return fi(i,t)}function Gf(n,t){let e=Xn(n);return fi(e[ht.DateFormat],t)}function Hf(n,t){let e=Xn(n);return fi(e[ht.TimeFormat],t)}function zf(n,t){let i=Xn(n)[ht.DateTimeFormat];return fi(i,t)}function Ar(n,t){let e=Xn(n),i=e[ht.NumberSymbols][t];if(typeof i>"u"){if(t===ti.CurrencyDecimal)return e[ht.NumberSymbols][ti.Decimal];if(t===ti.CurrencyGroup)return e[ht.NumberSymbols][ti.Group]}return i}function Vj(n,t){return Xn(n)[ht.NumberFormats][t]}function sx(n){if(!n[ht.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ht.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Lj(n){let t=Xn(n);return sx(t),(t[ht.ExtraData][2]||[]).map(i=>typeof i=="string"?Ly(i):[Ly(i[0]),Ly(i[1])])}function Bj(n,t,e){let i=Xn(n);sx(i);let r=[i[ht.ExtraData][0],i[ht.ExtraData][1]],o=fi(r,t)||[];return fi(o,e)||[]}function fi(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function Ly(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var jj=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,qf={},Uj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Or=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Or||{}),Ze=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Ze||{}),Je=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Je||{});function su(n,t,e,i){let r=Yj(n);t=Mr(e,t)||t;let s=[],a;for(;t;)if(a=Uj.exec(t),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;t=d}else{s.push(t);break}let l=r.getTimezoneOffset();i&&(l=lx(i,l),r=Qj(r,i,!0));let u="";return s.forEach(d=>{let f=Wj(d);u+=f?f(r,e,l):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Zf(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Mr(n,t){let e=Fj(n);if(qf[e]??={},qf[e][t])return qf[e][t];let i="";switch(t){case"shortDate":i=Gf(n,ei.Short);break;case"mediumDate":i=Gf(n,ei.Medium);break;case"longDate":i=Gf(n,ei.Long);break;case"fullDate":i=Gf(n,ei.Full);break;case"shortTime":i=Hf(n,ei.Short);break;case"mediumTime":i=Hf(n,ei.Medium);break;case"longTime":i=Hf(n,ei.Long);break;case"fullTime":i=Hf(n,ei.Full);break;case"short":let r=Mr(n,"shortTime"),o=Mr(n,"shortDate");i=Wf(zf(n,ei.Short),[r,o]);break;case"medium":let s=Mr(n,"mediumTime"),a=Mr(n,"mediumDate");i=Wf(zf(n,ei.Medium),[s,a]);break;case"long":let l=Mr(n,"longTime"),u=Mr(n,"longDate");i=Wf(zf(n,ei.Long),[l,u]);break;case"full":let d=Mr(n,"fullTime"),f=Mr(n,"fullDate");i=Wf(zf(n,ei.Full),[d,f]);break}return i&&(qf[e][t]=i),i}function Wf(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function Ni(n,t,e="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),o+s}function $j(n,t){return Ni(n,3).substring(0,t)}function Lt(n,t,e=0,i=!1,r=!1){return function(o,s){let a=Gj(n,o);if((e>0||a>-e)&&(a+=e),n===Ze.Hours)a===0&&e===-12&&(a=12);else if(n===Ze.FractionalSeconds)return $j(a,t);let l=Ar(s,ti.MinusSign);return Ni(a,t,l,i,r)}}function Gj(n,t){switch(n){case Ze.FullYear:return t.getFullYear();case Ze.Month:return t.getMonth();case Ze.Date:return t.getDate();case Ze.Hours:return t.getHours();case Ze.Minutes:return t.getMinutes();case Ze.Seconds:return t.getSeconds();case Ze.FractionalSeconds:return t.getMilliseconds();case Ze.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function at(n,t,e=_n.Format,i=!1){return function(r,o){return Hj(r,o,n,t,e,i)}}function Hj(n,t,e,i,r,o){switch(e){case Je.Months:return ox(t,r,i)[n.getMonth()];case Je.Days:return rx(t,r,i)[n.getDay()];case Je.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let u=Lj(t),d=Bj(t,r,i),f=u.findIndex(m=>{if(Array.isArray(m)){let[y,D]=m,T=s>=y.hours&&a>=y.minutes,R=s<D.hours||s===D.hours&&a<D.minutes;if(y.hours<D.hours){if(T&&R)return!0}else if(T||R)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return ix(t,r,i)[s<12?0:1];case Je.Eras:return kj(t,i)[n.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function Kf(n){return function(t,e,i){let r=-1*i,o=Ar(e,ti.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Or.Short:return(r>=0?"+":"")+Ni(s,2,o)+Ni(Math.abs(r%60),2,o);case Or.ShortGMT:return"GMT"+(r>=0?"+":"")+Ni(s,1,o);case Or.Long:return"GMT"+(r>=0?"+":"")+Ni(s,2,o)+":"+Ni(Math.abs(r%60),2,o);case Or.Extended:return i===0?"Z":(r>=0?"+":"")+Ni(s,2,o)+":"+Ni(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var zj=0,Yf=4;function qj(n){let t=Zf(n,zj,1).getDay();return Zf(n,0,1+(t<=Yf?Yf:Yf+7)-t)}function ax(n){let t=n.getDay(),e=t===0?-3:Yf-t;return Zf(n.getFullYear(),n.getMonth(),n.getDate()+e)}function By(n,t=!1){return function(e,i){let r;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{let o=ax(e),s=qj(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return Ni(r,n,Ar(i,ti.MinusSign))}}function Qf(n,t=!1){return function(e,i){let o=ax(e).getFullYear();return Ni(o,n,Ar(i,ti.MinusSign),t)}}var jy={};function Wj(n){if(jy[n])return jy[n];let t;switch(n){case"G":case"GG":case"GGG":t=at(Je.Eras,it.Abbreviated);break;case"GGGG":t=at(Je.Eras,it.Wide);break;case"GGGGG":t=at(Je.Eras,it.Narrow);break;case"y":t=Lt(Ze.FullYear,1,0,!1,!0);break;case"yy":t=Lt(Ze.FullYear,2,0,!0,!0);break;case"yyy":t=Lt(Ze.FullYear,3,0,!1,!0);break;case"yyyy":t=Lt(Ze.FullYear,4,0,!1,!0);break;case"Y":t=Qf(1);break;case"YY":t=Qf(2,!0);break;case"YYY":t=Qf(3);break;case"YYYY":t=Qf(4);break;case"M":case"L":t=Lt(Ze.Month,1,1);break;case"MM":case"LL":t=Lt(Ze.Month,2,1);break;case"MMM":t=at(Je.Months,it.Abbreviated);break;case"MMMM":t=at(Je.Months,it.Wide);break;case"MMMMM":t=at(Je.Months,it.Narrow);break;case"LLL":t=at(Je.Months,it.Abbreviated,_n.Standalone);break;case"LLLL":t=at(Je.Months,it.Wide,_n.Standalone);break;case"LLLLL":t=at(Je.Months,it.Narrow,_n.Standalone);break;case"w":t=By(1);break;case"ww":t=By(2);break;case"W":t=By(1,!0);break;case"d":t=Lt(Ze.Date,1);break;case"dd":t=Lt(Ze.Date,2);break;case"c":case"cc":t=Lt(Ze.Day,1);break;case"ccc":t=at(Je.Days,it.Abbreviated,_n.Standalone);break;case"cccc":t=at(Je.Days,it.Wide,_n.Standalone);break;case"ccccc":t=at(Je.Days,it.Narrow,_n.Standalone);break;case"cccccc":t=at(Je.Days,it.Short,_n.Standalone);break;case"E":case"EE":case"EEE":t=at(Je.Days,it.Abbreviated);break;case"EEEE":t=at(Je.Days,it.Wide);break;case"EEEEE":t=at(Je.Days,it.Narrow);break;case"EEEEEE":t=at(Je.Days,it.Short);break;case"a":case"aa":case"aaa":t=at(Je.DayPeriods,it.Abbreviated);break;case"aaaa":t=at(Je.DayPeriods,it.Wide);break;case"aaaaa":t=at(Je.DayPeriods,it.Narrow);break;case"b":case"bb":case"bbb":t=at(Je.DayPeriods,it.Abbreviated,_n.Standalone,!0);break;case"bbbb":t=at(Je.DayPeriods,it.Wide,_n.Standalone,!0);break;case"bbbbb":t=at(Je.DayPeriods,it.Narrow,_n.Standalone,!0);break;case"B":case"BB":case"BBB":t=at(Je.DayPeriods,it.Abbreviated,_n.Format,!0);break;case"BBBB":t=at(Je.DayPeriods,it.Wide,_n.Format,!0);break;case"BBBBB":t=at(Je.DayPeriods,it.Narrow,_n.Format,!0);break;case"h":t=Lt(Ze.Hours,1,-12);break;case"hh":t=Lt(Ze.Hours,2,-12);break;case"H":t=Lt(Ze.Hours,1);break;case"HH":t=Lt(Ze.Hours,2);break;case"m":t=Lt(Ze.Minutes,1);break;case"mm":t=Lt(Ze.Minutes,2);break;case"s":t=Lt(Ze.Seconds,1);break;case"ss":t=Lt(Ze.Seconds,2);break;case"S":t=Lt(Ze.FractionalSeconds,1);break;case"SS":t=Lt(Ze.FractionalSeconds,2);break;case"SSS":t=Lt(Ze.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Kf(Or.Short);break;case"ZZZZZ":t=Kf(Or.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Kf(Or.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Kf(Or.Long);break;default:return null}return jy[n]=t,t}function lx(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function Kj(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function Qj(n,t,e){let i=e?-1:1,r=n.getTimezoneOffset(),o=lx(t,r);return Kj(n,i*(o-r))}function Yj(n){if(zT(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(a=>+a);return Zf(r,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(jj))return Jj(i)}let t=new Date(n);if(!zT(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function Jj(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-i,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,u),t}function zT(n){return n instanceof Date&&!isNaN(n.valueOf())}var Zj=/^(\d+)?\.((\d+)(-(\d+))?)?$/,qT=22,Xf=".",ru="0",Xj=";",eU=",",Uy="#";function tU(n,t,e,i,r,o,s=!1){let a="",l=!1;if(!isFinite(n))a=Ar(e,ti.Infinity);else{let u=rU(n);s&&(u=iU(u));let d=t.minInt,f=t.minFrac,m=t.maxFrac;if(o){let te=o.match(Zj);if(te===null)throw new Error(`${o} is not a valid digit info`);let $=te[1],ae=te[3],ge=te[5];$!=null&&(d=$y($)),ae!=null&&(f=$y(ae)),ge!=null?m=$y(ge):ae!=null&&f>m&&(m=f)}oU(u,f,m);let y=u.digits,D=u.integerLen,T=u.exponent,R=[];for(l=y.every(te=>!te);D<d;D++)y.unshift(0);for(;D<0;D++)y.unshift(0);D>0?R=y.splice(D,y.length):(R=y,y=[0]);let q=[];for(y.length>=t.lgSize&&q.unshift(y.splice(-t.lgSize,y.length).join(""));y.length>t.gSize;)q.unshift(y.splice(-t.gSize,y.length).join(""));y.length&&q.unshift(y.join("")),a=q.join(Ar(e,i)),R.length&&(a+=Ar(e,r)+R.join("")),T&&(a+=Ar(e,ti.Exponential)+"+"+T)}return n<0&&!l?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function au(n,t,e){let i=Vj(t,nx.Decimal),r=nU(i,Ar(t,ti.MinusSign));return tU(n,r,t,ti.Group,ti.Decimal,e)}function nU(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(Xj),r=i[0],o=i[1],s=r.indexOf(Xf)!==-1?r.split(Xf):[r.substring(0,r.lastIndexOf(ru)+1),r.substring(r.lastIndexOf(ru)+1)],a=s[0],l=s[1]||"";e.posPre=a.substring(0,a.indexOf(Uy));for(let d=0;d<l.length;d++){let f=l.charAt(d);f===ru?e.minFrac=e.maxFrac=d+1:f===Uy?e.maxFrac=d+1:e.posSuf+=f}let u=a.split(eU);if(e.gSize=u[1]?u[1].length:0,e.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let d=r.length-e.posPre.length-e.posSuf.length,f=o.indexOf(Uy);e.negPre=o.substring(0,f).replace(/'/g,""),e.negSuf=o.slice(f+d).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function iU(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function rU(n){let t=Math.abs(n)+"",e=0,i,r,o,s,a;for((r=t.indexOf(Xf))>-1&&(t=t.replace(Xf,"")),(o=t.search(/e/i))>0?(r<0&&(r=o),r+=+t.slice(o+1),t=t.substring(0,o)):r<0&&(r=t.length),o=0;t.charAt(o)===ru;o++);if(o===(a=t.length))i=[0],r=1;else{for(a--;t.charAt(a)===ru;)a--;for(r-=o,i=[],s=0;o<=a;o++,s++)i[s]=Number(t.charAt(o))}return r>qT&&(i=i.splice(0,qT-1),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}function oU(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(t,r),e),s=o+n.integerLen,a=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let f=s;f<i.length;f++)i[f]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let f=1;f<s;f++)i[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let l=o!==0,u=t+n.integerLen,d=i.reduceRight(function(f,m,y,D){return m=m+f,D[y]=m<10?m:m-10,l&&(D[y]===0&&y>=u?D.pop():l=!1),m>=10?1:0},0);d&&(i.unshift(d),n.integerLen++)}function $y(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}function cx(n,t,e){return RT(n,t,e)}function np(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var Gy=/\s+/,WT=[],Bt=(()=>{class n{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=WT,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(Gy):WT}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Gy):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(Gy).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)(re(an),re(Zi))}}static{this.\u0275dir=We({type:n,selectors:[["","ngClass",""]],inputs:{klass:[yt.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Hy=class{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},lt=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Hy(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),KT(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);KT(o,r)})}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(re(Bn),re(Ri),re(Fy))}}static{this.\u0275dir=We({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function KT(n,t){n.context.$implicit=t.item}var Qe=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new zy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){QT("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){QT("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(re(Bn),re(Ri))}}static{this.\u0275dir=We({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),zy=class{constructor(){this.$implicit=null,this.ngIf=null}};function QT(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${In(t)}'.`)}var sU=!0,ep=class{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}},Ja=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){let i=sU?e===this._ngSwitch:e==this._ngSwitch;return this._lastCasesMatched||=i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(let i of this._defaultViews)i.enforceState(e)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=We({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}}return n})(),ip=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new ep(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static{this.\u0275fac=function(i){return new(i||n)(re(Bn),re(Ri),re(Ja,9))}}static{this.\u0275dir=We({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}}return n})(),rp=(()=>{class n{constructor(e,i,r){r._addDefault(new ep(e,i))}static{this.\u0275fac=function(i){return new(i||n)(re(Bn),re(Ri),re(Ja,9))}}static{this.\u0275dir=We({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0})}}return n})();var $n=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,o]=e.split("."),s=r.indexOf("-")===-1?void 0:Yi.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static{this.\u0275fac=function(i){return new(i||n)(re(an),re(ky),re(Zi))}}static{this.\u0275dir=We({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),Ky=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static{this.\u0275fac=function(i){return new(i||n)(re(Bn))}}static{this.\u0275dir=We({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Tn]})}}return n})();function aU(n,t){return new de(2100,!1)}var qy=class{createSubscription(t,e){return Vy(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){Vy(()=>t.unsubscribe())}},Wy=class{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}},lU=new Wy,cU=new qy,ux=(()=>{class n{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(po(e))return lU;if(Ry(e))return cU;throw aU(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(i){return new(i||n)(re(Pi,16))}}static{this.\u0275pipe=pf({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var Ce=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=St({})}}return n})(),dx="browser",uU="server";function go(n){return n===uU}var Ya=class{};var cu=class{},sp=class{},Fi=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Yy=class{encodeKey(t){return hx(t)}encodeValue(t){return hx(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function fU(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var pU=/%(\d[a-f0-9])/gi,mU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function hx(n){return encodeURIComponent(n).replace(pU,(t,e)=>mU[e]??t)}function op(n){return`${n}`}var pi=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Yy,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=fU(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(op):[op(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(op(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(op(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Jy=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function gU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function fx(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function px(n){return typeof Blob<"u"&&n instanceof Blob}function mx(n){return typeof FormData<"u"&&n instanceof FormData}function _U(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var lu=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(gU(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Fi,this.context??=new Jy,!this.params)this.params=new pi,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||fx(this.body)||px(this.body)||mx(this.body)||_U(this.body)?this.body:this.body instanceof pi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||mx(this.body)?null:px(this.body)?this.body.type||null:fx(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof pi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,d=t.params||this.params,f=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((m,y)=>m.set(y,t.setHeaders[y]),u)),t.setParams&&(d=Object.keys(t.setParams).reduce((m,y)=>m.set(y,t.setParams[y]),d)),new n(e,i,s,{params:d,headers:u,context:f,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Za=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Za||{}),uu=class{constructor(t,e=cp.Ok,i="OK"){this.headers=t.headers||new Fi,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Zy=class n extends uu{constructor(t={}){super(t),this.type=Za.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ap=class n extends uu{constructor(t={}){super(t),this.type=Za.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},lp=class extends uu{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},cp=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(cp||{});function Qy(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var ki=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof lu)o=e;else{let l;r.headers instanceof Fi?l=r.headers:l=new Fi(r.headers);let u;r.params&&(r.params instanceof pi?u=r.params:u=new pi({fromObject:r.params})),o=new lu(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=ce(o).pipe(eo(l=>this.handler.handle(l)));if(e instanceof lu||r.observe==="events")return s;let a=s.pipe(_t(l=>l instanceof ap));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ne(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ne(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ne(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(ne(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new pi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Qy(r,i))}post(e,i,r={}){return this.request("POST",e,Qy(r,i))}put(e,i,r={}){return this.request("PUT",e,Qy(r,i))}static{this.\u0275fac=function(i){return new(i||n)(K(cu))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})();function vx(n,t){return t(n)}function yU(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}function vU(n,t,e){return(i,r)=>Sr(e,()=>t(i,o=>n(o,r)))}var wU=new ie(""),Xy=new ie(""),bU=new ie(""),CU=new ie("");function EU(){let n=null;return(t,e)=>{n===null&&(n=(F(wU,{optional:!0})??[]).reduceRight(yU,vx));let i=F(ho),r=i.add();return n(t,e).pipe(br(()=>i.remove(r)))}}var gx=(()=>{class n extends cu{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=F(ho);let r=F(CU,{optional:!0});this.backend=r??e}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Xy),...this.injector.get(bU,[])]));this.chain=r.reduceRight((o,s)=>vU(o,s,this.injector),vx)}let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(br(()=>this.pendingTasks.remove(i)))}static{this.\u0275fac=function(i){return new(i||n)(K(sp),K(on))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})();var DU=/^\)\]\}',?\n/;function SU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var _x=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new de(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Le(i.\u0275loadImpl()):ce(null)).pipe(nt(()=>new ye(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((T,R)=>s.setRequestHeader(T,R.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let T=e.detectContentTypeHeader();T!==null&&s.setRequestHeader("Content-Type",T)}if(e.responseType){let T=e.responseType.toLowerCase();s.responseType=T!=="json"?T:"text"}let a=e.serializeBody(),l=null,u=()=>{if(l!==null)return l;let T=s.statusText||"OK",R=new Fi(s.getAllResponseHeaders()),q=SU(s)||e.url;return l=new Zy({headers:R,status:s.status,statusText:T,url:q}),l},d=()=>{let{headers:T,status:R,statusText:q,url:te}=u(),$=null;R!==cp.NoContent&&($=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=$?cp.Ok:0);let ae=R>=200&&R<300;if(e.responseType==="json"&&typeof $=="string"){let ge=$;$=$.replace(DU,"");try{$=$!==""?JSON.parse($):null}catch(pe){$=ge,ae&&(ae=!1,$={error:pe,text:$})}}ae?(o.next(new ap({body:$,headers:T,status:R,statusText:q,url:te||void 0})),o.complete()):o.error(new lp({error:$,headers:T,status:R,statusText:q,url:te||void 0}))},f=T=>{let{url:R}=u(),q=new lp({error:T,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(q)},m=!1,y=T=>{m||(o.next(u()),m=!0);let R={type:Za.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(R.total=T.total),e.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},D=T=>{let R={type:Za.UploadProgress,loaded:T.loaded};T.lengthComputable&&(R.total=T.total),o.next(R)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),e.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",D)),s.send(a),o.next({type:Za.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),e.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",D)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(K(Ya))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),wx=new ie(""),IU="XSRF-TOKEN",TU=new ie("",{providedIn:"root",factory:()=>IU}),xU="X-XSRF-TOKEN",MU=new ie("",{providedIn:"root",factory:()=>xU}),up=class{},AU=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=np(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(K(Zt),K(ln),K(TU))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})();function OU(n,t){let e=n.url.toLowerCase();if(!F(wx)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=F(up).getToken(),r=F(MU);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var bx=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(bx||{});function RU(n,t){return{\u0275kind:n,\u0275providers:t}}function PU(...n){let t=[ki,_x,gx,{provide:cu,useExisting:gx},{provide:sp,useExisting:_x},{provide:Xy,useValue:OU,multi:!0},{provide:wx,useValue:!0},{provide:up,useClass:AU}];for(let e of n)t.push(...e.\u0275providers);return vs(t)}var yx=new ie("");function NU(){return RU(bx.LegacyInterceptors,[{provide:yx,useFactory:EU},{provide:Xy,useExisting:yx,multi:!0}])}var Cx=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=St({providers:[PU(NU())]})}}return n})();var nv=class extends Jf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},iv=class n extends nv{static makeCurrent(){ZT(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=FU();return e==null?null:kU(e)}resetBaseElement(){du=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return np(document.cookie,t)}},du=null;function FU(){return du=du||document.querySelector("base"),du?du.getAttribute("href"):null}function kU(n){return new URL(n,document.baseURI).pathname}var VU=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),rv=new ie(""),Tx=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new de(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(K(rv),K(Fe))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),dp=class{constructor(t){this._doc=t}},ev="ng-app-id",xx=(()=>{class n{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=go(o),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${ev}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){let r=this.styleRef;if(r.has(e)){let o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(ev),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(ev,this.appId),e.appendChild(s),s}}addStyleToHost(e,i){let r=this.getStyleElement(e,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(K(Zt),K(oy),K(ay,8),K(ln))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),tv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sv=/%COMP%/g,Mx="%COMP%",LU=`_nghost-${Mx}`,BU=`_ngcontent-${Mx}`,jU=!0,UU=new ie("",{providedIn:"root",factory:()=>jU});function $U(n){return BU.replace(sv,n)}function GU(n){return LU.replace(sv,n)}function Ax(n,t){return t.map(e=>e.replace(sv,n))}var Dx=(()=>{class n{constructor(e,i,r,o,s,a,l,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=go(a),this.defaultRenderer=new hu(e,s,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Wi.ShadowDom&&(i=Ee(Y({},i),{encapsulation:Wi.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof hp?r.applyToHost(e):r instanceof fu&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Wi.Emulated:o=new hp(l,u,i,this.appId,d,s,a,f);break;case Wi.ShadowDom:return new ov(l,u,e,i,s,a,this.nonce,f);default:o=new fu(l,u,i,d,s,a,f);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(K(Tx),K(xx),K(oy),K(UU),K(Zt),K(ln),K(Fe),K(ay))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),hu=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(tv[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Sx(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Sx(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new de(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=tv[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=tv[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Yi.DashCase|Yi.Important)?t.style.setProperty(e,i,r&Yi.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Yi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=Rr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Sx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ov=class extends hu{constructor(t,e,i,r,o,s,a,l){super(t,o,s,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Ax(r.id,r.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},fu=class extends hu{constructor(t,e,i,r,o,s,a,l){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?Ax(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},hp=class extends fu{constructor(t,e,i,r,o,s,a,l){let u=r+"-"+i.id;super(t,e,i,o,s,a,l,u),this.contentAttr=$U(u),this.hostAttr=GU(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},HU=(()=>{class n extends dp{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(K(Zt))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),Ix=["alt","control","meta","shift"],zU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},WU=(()=>{class n extends dp{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rr().onAndCancel(e,o.domEventName,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),Ix.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,i){let r=zU[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Ix.forEach(s=>{if(s!==r){let a=qU[s];a(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(K(Zt))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})();function Ox(n,t){return $T(Y({rootComponent:n},KU(t)))}function KU(n){return{appProviders:[...XU,...n?.providers??[]],platformProviders:ZU}}function QU(){iv.makeCurrent()}function YU(){return new Qi}function JU(){return MI(document),document}var ZU=[{provide:ln,useValue:dx},{provide:sy,useValue:QU,multi:!0},{provide:Zt,useFactory:JU,deps:[]}];var XU=[{provide:mf,useValue:"root"},{provide:Qi,useFactory:YU,deps:[]},{provide:rv,useClass:HU,multi:!0,deps:[Zt,Fe,ln]},{provide:rv,useClass:WU,multi:!0,deps:[Zt]},Dx,xx,Tx,{provide:Hc,useExisting:Dx},{provide:Ya,useClass:VU,deps:[]},[]];var Rx=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(K(Zt))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Oe="primary",xu=Symbol("RouteTitle"),dv=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function il(n){return new dv(n)}function n3(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function i3(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!tr(n[e],t[e]))return!1;return!0}function tr(n,t){let e=n?hv(n):void 0,i=t?hv(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!Lx(n[r],t[r]))return!1;return!0}function hv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Lx(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function Bx(n){return n.length>0?n[n.length-1]:null}function vo(n){return y_(n)?n:po(n)?Le(Promise.resolve(n)):ce(n)}var r3={exact:Ux,subset:$x},jx={exact:o3,subset:s3,ignored:()=>!0};function Px(n,t,e){return r3[e.paths](n.root,t.root,e.matrixParams)&&jx[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function o3(n,t){return tr(n,t)}function Ux(n,t,e){if(!Ss(n.segments,t.segments)||!mp(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!Ux(n.children[i],t.children[i],e))return!1;return!0}function s3(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Lx(n[e],t[e]))}function $x(n,t,e){return Gx(n,t,t.segments,e)}function Gx(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Ss(r,e)||t.hasChildren()||!mp(r,e,i))}else if(n.segments.length===e.length){if(!Ss(n.segments,e)||!mp(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!$x(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Ss(n.segments,r)||!mp(n.segments,r,i)||!n.children[Oe]?!1:Gx(n.children[Oe],t,o,i)}}function mp(n,t,e){return t.every((i,r)=>jx[e](n[r].parameters,i.parameters))}var _o=class{constructor(t=new et([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=il(this.queryParams),this._queryParamMap}toString(){return c3.serialize(this)}},et=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gp(this)}},Ds=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=il(this.parameters),this._parameterMap}toString(){return zx(this)}};function a3(n,t){return Ss(n,t)&&n.every((e,i)=>tr(e.parameters,t[i].parameters))}function Ss(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function l3(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===Oe&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Oe&&(e=e.concat(t(r,i)))}),e}var Lv=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:()=>new yp,providedIn:"root"})}}return n})(),yp=class{parse(t){let e=new pv(t);return new _o(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${pu(t.root,!0)}`,i=h3(t.queryParams),r=typeof t.fragment=="string"?`#${u3(t.fragment)}`:"";return`${e}${i}${r}`}},c3=new yp;function gp(n){return n.segments.map(t=>zx(t)).join("/")}function pu(n,t){if(!n.hasChildren())return gp(n);if(t){let e=n.children[Oe]?pu(n.children[Oe],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Oe&&i.push(`${r}:${pu(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=l3(n,(i,r)=>r===Oe?[pu(n.children[Oe],!1)]:[`${r}:${pu(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Oe]!=null?`${gp(n)}/${e[0]}`:`${gp(n)}/(${e.join("//")})`}}function Hx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fp(n){return Hx(n).replace(/%3B/gi,";")}function u3(n){return encodeURI(n)}function fv(n){return Hx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _p(n){return decodeURIComponent(n)}function Nx(n){return _p(n.replace(/\+/g,"%20"))}function zx(n){return`${fv(n.path)}${d3(n.parameters)}`}function d3(n){return Object.entries(n).map(([t,e])=>`;${fv(t)}=${fv(e)}`).join("")}function h3(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${fp(e)}=${fp(r)}`).join("&"):`${fp(e)}=${fp(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var f3=/^[^\/()?;#]+/;function av(n){let t=n.match(f3);return t?t[0]:""}var p3=/^[^\/()?;=#]+/;function m3(n){let t=n.match(p3);return t?t[0]:""}var g3=/^[^=?&#]+/;function _3(n){let t=n.match(g3);return t?t[0]:""}var y3=/^[^&#]+/;function v3(n){let t=n.match(y3);return t?t[0]:""}var pv=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new et([],{}):new et([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Oe]=new et(t,e)),i}parseSegment(){let t=av(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(t),new Ds(_p(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=m3(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=av(this.remaining);r&&(i=r,this.capture(i))}t[_p(e)]=_p(i)}parseQueryParam(t){let e=_3(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=v3(this.remaining);s&&(i=s,this.capture(i))}let r=Nx(e),o=Nx(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=av(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new de(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Oe);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[Oe]:new et([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new de(4011,!1)}};function qx(n){return n.segments.length>0?new et([],{[Oe]:n}):n}function Wx(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=Wx(r);if(i===Oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new et(n.segments,t);return w3(e)}function w3(n){if(n.numberOfChildren===1&&n.children[Oe]){let t=n.children[Oe];return new et(n.segments.concat(t.segments),t.children)}return n}function rl(n){return n instanceof _o}function b3(n,t,e=null,i=null){let r=Kx(n);return Qx(r,t,e,i)}function Kx(n){let t;function e(o){let s={};for(let l of o.children){let u=e(l);s[l.outlet]=u}let a=new et(o.url,s);return o===n&&(t=a),a}let i=e(n.root),r=qx(i);return t??r}function Qx(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return lv(r,r,r,e,i);let o=C3(t);if(o.toRoot())return lv(r,r,new et([],{}),e,i);let s=E3(o,r,n),a=s.processChildren?_u(s.segmentGroup,s.index,o.commands):Jx(s.segmentGroup,s.index,o.commands);return lv(r,s.segmentGroup,a,e,i)}function vp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function wu(n){return typeof n=="object"&&n!=null&&n.outlets}function lv(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===t?s=e:s=Yx(n,t,e);let a=qx(Wx(s));return new _o(a,o,r)}function Yx(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=Yx(o,t,e)}),new et(n.segments,i)}var wp=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&vp(i[0]))throw new de(4003,!1);let r=i.find(wu);if(r&&r!==Bx(i))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function C3(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new wp(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new wp(e,t,i)}var tl=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function E3(n,t,e){if(n.isAbsolute)return new tl(t,!0,0);if(!e)return new tl(t,!1,NaN);if(e.parent===null)return new tl(e,!0,0);let i=vp(n.commands[0])?0:1,r=e.segments.length-1+i;return D3(e,r,n.numberOfDoubleDots)}function D3(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new de(4005,!1);r=i.segments.length}return new tl(i,!1,r-o)}function S3(n){return wu(n[0])?n[0].outlets:{[Oe]:n}}function Jx(n,t,e){if(n??=new et([],{}),n.segments.length===0&&n.hasChildren())return _u(n,t,e);let i=I3(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new et(n.segments.slice(0,i.pathIndex),{});return o.children[Oe]=new et(n.segments.slice(i.pathIndex),n.children),_u(o,0,r)}else return i.match&&r.length===0?new et(n.segments,{}):i.match&&!n.hasChildren()?mv(n,t,e):i.match?_u(n,0,r):mv(n,t,e)}function _u(n,t,e){if(e.length===0)return new et(n.segments,{});{let i=S3(e),r={};if(Object.keys(i).some(o=>o!==Oe)&&n.children[Oe]&&n.numberOfChildren===1&&n.children[Oe].segments.length===0){let o=_u(n.children[Oe],t,e);return new et(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=Jx(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new et(n.segments,r)}}function I3(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let s=n.segments[r],a=e[i];if(wu(a))break;let l=`${a}`,u=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!kx(l,u,s))return o;i+=2}else{if(!kx(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function mv(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(wu(o)){let l=T3(o.outlets);return new et(i,l)}if(r===0&&vp(e[0])){let l=n.segments[t];i.push(new Ds(l.path,Fx(e[0]))),r++;continue}let s=wu(o)?o.outlets[Oe]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&vp(a)?(i.push(new Ds(s,Fx(a))),r+=2):(i.push(new Ds(s,{})),r++)}return new et(i,{})}function T3(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=mv(new et([],{}),0,i))}),t}function Fx(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function kx(n,t,e){return n==e.path&&tr(t,e.parameters)}var yu="imperative",cn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(cn||{}),mi=class{constructor(t,e){this.id=t,this.url=e}},bu=class extends mi{constructor(t,e,i="imperative",r=null){super(t,e),this.type=cn.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Is=class extends mi{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=cn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ii=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ii||{}),gv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(gv||{}),yo=class extends mi{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=cn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ts=class extends mi{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=cn.NavigationSkipped}},Cu=class extends mi{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=cn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bp=class extends mi{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=cn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_v=class extends mi{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=cn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yv=class extends mi{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=cn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vv=class extends mi{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=cn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wv=class extends mi{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=cn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bv=class{constructor(t){this.route=t,this.type=cn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cv=class{constructor(t){this.route=t,this.type=cn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ev=class{constructor(t){this.snapshot=t,this.type=cn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dv=class{constructor(t){this.snapshot=t,this.type=cn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sv=class{constructor(t){this.snapshot=t,this.type=cn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iv=class{constructor(t){this.snapshot=t,this.type=cn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Eu=class{},Du=class{constructor(t){this.url=t}};var Tv=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Tp,this.attachRef=null}},Tp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Tv,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cp=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=xv(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=xv(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Mv(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Mv(t,this._root).map(e=>e.value)}};function xv(n,t){if(n===t.value)return t;for(let e of t.children){let i=xv(n,e);if(i)return i}return null}function Mv(n,t){if(n===t.value)return[t];for(let e of t.children){let i=Mv(n,e);if(i.length)return i.unshift(t),i}return[]}var ni=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function el(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Ep=class extends Cp{constructor(t,e){super(t),this.snapshot=e,jv(this,t)}toString(){return this.snapshot.toString()}};function Zx(n){let t=x3(n),e=new xt([new Ds("",{})]),i=new xt({}),r=new xt({}),o=new xt({}),s=new xt(""),a=new yn(e,i,o,s,r,Oe,n,t.root);return a.snapshot=t.root,new Ep(new ni(a,[]),t)}function x3(n){let t={},e={},i={},r="",o=new Su([],t,i,r,e,Oe,n,null,{});return new Dp("",new ni(o,[]))}var yn=class{constructor(t,e,i,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ne(u=>u[xu]))??ce(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(t=>il(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(t=>il(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bv(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:Y(Y({},t.params),n.params),data:Y(Y({},t.data),n.data),resolve:Y(Y(Y(Y({},n.data),t.data),r?.data),n._resolvedData)}:i={params:Y({},n.params),data:Y({},n.data),resolve:Y(Y({},n.data),n._resolvedData??{})},r&&eM(r)&&(i.resolve[xu]=r.title),i}var Su=class{get title(){return this.data?.[xu]}constructor(t,e,i,r,o,s,a,l,u){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=il(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=il(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Dp=class extends Cp{constructor(t,e){super(e),this.url=t,jv(this,e)}toString(){return Xx(this._root)}};function jv(n,t){t.value._routerState=n,t.children.forEach(e=>jv(n,e))}function Xx(n){let t=n.children.length>0?` { ${n.children.map(Xx).join(", ")} } `:"";return`${n.value}${t}`}function cv(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,tr(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),tr(t.params,e.params)||n.paramsSubject.next(e.params),i3(t.url,e.url)||n.urlSubject.next(e.url),tr(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Av(n,t){let e=tr(n.params,t.params)&&a3(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Av(n.parent,t.parent))}function eM(n){return typeof n.title=="string"||n.title===null}var Uv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Oe,this.activateEvents=new oe,this.deactivateEvents=new oe,this.attachEvents=new oe,this.detachEvents=new oe,this.parentContexts=F(Tp),this.location=F(Bn),this.changeDetector=F(Pi),this.environmentInjector=F(on),this.inputBinder=F($v,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Ov(e,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=We({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Tn]})}}return n})(),Ov=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===yn?this.route:t===Tp?this.childContexts:this.parent.get(t,e)}},$v=new ie("");function M3(n,t,e){let i=Iu(n,t._root,e?e._root:void 0);return new Ep(i,t)}function Iu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=A3(n,t,e);return new ni(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Iu(n,a)),s}}let i=O3(t.value),r=t.children.map(o=>Iu(n,o));return new ni(i,r)}}function A3(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Iu(n,i,r);return Iu(n,i)})}function O3(n){return new yn(new xt(n.url),new xt(n.params),new xt(n.queryParams),new xt(n.fragment),new xt(n.data),n.outlet,n.component,n)}var tM="ngNavigationCancelingError";function nM(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=rl(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=iM(!1,ii.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function iM(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[tM]=!0,e.cancellationCode=t,e}function R3(n){return rM(n)&&rl(n.url)}function rM(n){return!!n&&n[tM]}var P3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["ng-component"]],standalone:!0,features:[fe],decls:1,vars:0,template:function(i,r){i&1&&Q(0,"router-outlet")},dependencies:[Uv],encapsulation:2})}}return n})();function N3(n,t){return n.providers&&!n._injector&&(n._injector=Iy(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Gv(n){let t=n.children&&n.children.map(Gv),e=t?Ee(Y({},n),{children:t}):Y({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Oe&&(e.component=P3),e}function nr(n){return n.outlet||Oe}function F3(n,t){let e=n.filter(i=>nr(i)===t);return e.push(...n.filter(i=>nr(i)!==t)),e}function Mu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var k3=(n,t,e,i)=>ne(r=>(new Rv(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),Rv=class{constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),cv(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=el(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=el(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=el(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=el(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Iv(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Dv(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(cv(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),cv(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=Mu(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}},Sp=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},nl=class{constructor(t,e){this.component=t,this.route=e}};function V3(n,t,e){let i=n._root,r=t?t._root:null;return mu(i,r,e,[i.value])}function L3(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function sl(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!wS(n)?n:t.get(n):i}function mu(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=el(t);return n.children.forEach(s=>{B3(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>vu(a,e.getContext(s),r)),r}function B3(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=j3(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Sp(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?mu(n,t,a?a.children:null,i,r):mu(n,t,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new nl(a.outlet.component,s))}else s&&vu(t,a,r),r.canActivateChecks.push(new Sp(i)),o.component?mu(n,null,a?a.children:null,i,r):mu(n,null,e,i,r);return r}function j3(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Ss(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ss(n.url,t.url)||!tr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Av(n,t)||!tr(n.queryParams,t.queryParams);case"paramsChange":default:return!Av(n,t)}}function vu(n,t,e){let i=el(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?t?vu(s,t.children.getContext(o),e):vu(s,null,e):vu(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new nl(t.outlet.component,r)):e.canDeactivateChecks.push(new nl(null,r)):e.canDeactivateChecks.push(new nl(null,r))}function Au(n){return typeof n=="function"}function U3(n){return typeof n=="boolean"}function $3(n){return n&&Au(n.canLoad)}function G3(n){return n&&Au(n.canActivate)}function H3(n){return n&&Au(n.canActivateChild)}function z3(n){return n&&Au(n.canDeactivate)}function q3(n){return n&&Au(n.canMatch)}function oM(n){return n instanceof Si||n?.name==="EmptyError"}var pp=Symbol("INITIAL_VALUE");function ol(){return nt(n=>Ac(n.map(t=>t.pipe(Fn(1),no(pp)))).pipe(ne(t=>{for(let e of t)if(e!==!0){if(e===pp)return pp;if(e===!1||e instanceof _o)return e}return!0}),_t(t=>t!==pp),Fn(1)))}function W3(n,t){return Et(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?ce(Ee(Y({},e),{guardsResult:!0})):K3(s,i,r,n).pipe(Et(a=>a&&U3(a)?Q3(i,o,n,t):ce(a)),ne(a=>Ee(Y({},e),{guardsResult:a})))})}function K3(n,t,e,i){return Le(n).pipe(Et(r=>e4(r.component,r.route,e,t,i)),li(r=>r!==!0,!0))}function Q3(n,t,e,i){return Le(t).pipe(eo(r=>Zr(J3(r.route.parent,i),Y3(r.route,i),X3(n,r.path,e),Z3(n,r.route,e))),li(r=>r!==!0,!0))}function Y3(n,t){return n!==null&&t&&t(new Sv(n)),ce(!0)}function J3(n,t){return n!==null&&t&&t(new Ev(n)),ce(!0)}function Z3(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return ce(!0);let r=i.map(o=>Dh(()=>{let s=Mu(t)??e,a=sl(o,s),l=G3(a)?a.canActivate(t,n):Sr(s,()=>a(t,n));return vo(l).pipe(li())}));return ce(r).pipe(ol())}function X3(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>L3(s)).filter(s=>s!==null).map(s=>Dh(()=>{let a=s.guards.map(l=>{let u=Mu(s.node)??e,d=sl(l,u),f=H3(d)?d.canActivateChild(i,n):Sr(u,()=>d(i,n));return vo(f).pipe(li())});return ce(a).pipe(ol())}));return ce(o).pipe(ol())}function e4(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return ce(!0);let s=o.map(a=>{let l=Mu(t)??r,u=sl(a,l),d=z3(u)?u.canDeactivate(n,t,e,i):Sr(l,()=>u(n,t,e,i));return vo(d).pipe(li())});return ce(s).pipe(ol())}function t4(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return ce(!0);let o=r.map(s=>{let a=sl(s,n),l=$3(a)?a.canLoad(t,e):Sr(n,()=>a(t,e));return vo(l)});return ce(o).pipe(ol(),sM(i))}function sM(n){return d_(Dt(t=>{if(rl(t))throw nM(n,t)}),ne(t=>t===!0))}function n4(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return ce(!0);let o=r.map(s=>{let a=sl(s,n),l=q3(a)?a.canMatch(t,e):Sr(n,()=>a(t,e));return vo(l)});return ce(o).pipe(ol(),sM(i))}var Tu=class{constructor(t){this.segmentGroup=t||null}},Ip=class extends Error{constructor(t){super(),this.urlTree=t}};function Xa(n){return Ia(new Tu(n))}function i4(n){return Ia(new de(4e3,!1))}function r4(n){return Ia(iM(!1,ii.GuardRejected))}var Pv=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ce(i);if(r.numberOfChildren>1||!r.children[Oe])return i4(t.redirectTo);r=r.children[Oe]}}applyRedirectCommands(t,e,i){let r=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e.startsWith("/"))throw new Ip(r);return r}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new _o(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,r)}),new et(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new de(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},Nv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function o4(n,t,e,i,r){let o=Hv(n,t,e);return o.matched?(i=N3(t,i),n4(i,t,e,r).pipe(ne(s=>s===!0?o:Y({},Nv)))):ce(o)}function Hv(n,t,e){if(t.path==="**")return s4(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?Y({},Nv):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||n3)(e,n,t);if(!r)return Y({},Nv);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?Y(Y({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function s4(n){return{matched:!0,parameters:n.length>0?Bx(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Vx(n,t,e,i){return e.length>0&&c4(n,e,i)?{segmentGroup:new et(t,l4(i,new et(e,n.children))),slicedSegments:[]}:e.length===0&&u4(n,e,i)?{segmentGroup:new et(n.segments,a4(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new et(n.segments,n.children),slicedSegments:e}}function a4(n,t,e,i){let r={};for(let o of e)if(xp(n,t,o)&&!i[nr(o)]){let s=new et([],{});r[nr(o)]=s}return Y(Y({},i),r)}function l4(n,t){let e={};e[Oe]=t;for(let i of n)if(i.path===""&&nr(i)!==Oe){let r=new et([],{});e[nr(i)]=r}return e}function c4(n,t,e){return e.some(i=>xp(n,t,i)&&nr(i)!==Oe)}function u4(n,t,e){return e.some(i=>xp(n,t,i))}function xp(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function d4(n,t,e,i){return nr(n)!==i&&(i===Oe||!xp(t,e,n))?!1:Hv(t,n,e).matched}function h4(n,t,e){return t.length===0&&!n.children[e]}var Fv=class{};function f4(n,t,e,i,r,o,s="emptyOnly"){return new kv(n,t,e,i,r,s,o).recognize()}var p4=31,kv=class{constructor(t,e,i,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Pv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new de(4002,`'${t.segmentGroup}'`)}recognize(){let t=Vx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ne(e=>{let i=new Su([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,{},Oe,this.rootComponentType,null,{}),r=new ni(i,e),o=new Dp("",r),s=b3(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Oe).pipe(Xr(i=>{if(i instanceof Ip)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Tu?this.noMatchError(i):i}))}inheritParamsAndData(t,e){let i=t.value,r=Bv(i,e,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(t,e,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0).pipe(ne(o=>o instanceof ni?[o]:[]))}processChildren(t,e,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return Le(r).pipe(eo(o=>{let s=i.children[o],a=F3(e,o);return this.processSegmentGroup(t,a,s,o)}),ss((o,s)=>(o.push(...s),o)),to(null),D_(),Et(o=>{if(o===null)return Xa(i);let s=aM(o);return m4(s),ce(s)}))}processSegment(t,e,i,r,o,s){return Le(e).pipe(eo(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,i,r,o,s).pipe(Xr(l=>{if(l instanceof Tu)return ce(null);throw l}))),li(a=>!!a),Xr(a=>{if(oM(a))return h4(i,r,o)?ce(new Fv):Xa(i);throw a}))}processSegmentAgainstRoute(t,e,i,r,o,s,a){return d4(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s):Xa(r):Xa(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:u,remainingSegments:d}=Hv(e,r,o);if(!a)return Xa(e);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>p4&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,f).pipe(Et(m=>this.processSegment(t,i,e,m.concat(d),s,!1)))}matchSegmentAgainstRoute(t,e,i,r,o){let s=o4(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),s.pipe(nt(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(nt(({routes:l})=>{let u=i._loadedInjector??t,{consumedSegments:d,remainingSegments:f,parameters:m}=a,y=new Su(d,m,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,_4(i),nr(i),i.component??i._loadedComponent??null,i,y4(i)),{segmentGroup:D,slicedSegments:T}=Vx(e,d,f,l);if(T.length===0&&D.hasChildren())return this.processChildren(u,l,D).pipe(ne(q=>q===null?null:new ni(y,q)));if(l.length===0&&T.length===0)return ce(new ni(y,[]));let R=nr(i)===o;return this.processSegment(u,l,D,T,R?Oe:o,!0).pipe(ne(q=>new ni(y,q instanceof ni?[q]:[])))}))):Xa(e)))}getChildConfig(t,e,i){return e.children?ce({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?ce({routes:e._loadedRoutes,injector:e._loadedInjector}):t4(t,e,i,this.urlSerializer).pipe(Et(r=>r?this.configLoader.loadChildren(t,e).pipe(Dt(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):r4(e))):ce({routes:[],injector:t})}};function m4(n){n.sort((t,e)=>t.value.outlet===Oe?-1:e.value.outlet===Oe?1:t.value.outlet.localeCompare(e.value.outlet))}function g4(n){let t=n.value.routeConfig;return t&&t.path===""}function aM(n){let t=[],e=new Set;for(let i of n){if(!g4(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=aM(i.children);t.push(new ni(i.value,r))}return t.filter(i=>!e.has(i))}function _4(n){return n.data||{}}function y4(n){return n.resolve||{}}function v4(n,t,e,i,r,o){return Et(s=>f4(n,t,e,i,s.extractedUrl,r,o).pipe(ne(({state:a,tree:l})=>Ee(Y({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function w4(n,t){return Et(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ce(e);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of lM(l))s.add(u);let a=0;return Le(s).pipe(eo(l=>o.has(l)?b4(l,i,n,t):(l.data=Bv(l,l.parent,n).resolve,ce(void 0))),Dt(()=>a++),xa(1),Et(l=>a===s.size?ce(e):qt))})}function lM(n){let t=n.children.map(e=>lM(e)).flat();return[n,...t]}function b4(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!eM(r)&&(o[xu]=r.title),C4(o,n,t,i).pipe(ne(s=>(n._resolvedData=s,n.data=Bv(n,n.parent,e).resolve,null)))}function C4(n,t,e,i){let r=hv(n);if(r.length===0)return ce({});let o={};return Le(r).pipe(Et(s=>E4(n[s],t,e,i).pipe(li(),Dt(a=>{o[s]=a}))),xa(1),C_(o),Xr(s=>oM(s)?qt:Ia(s)))}function E4(n,t,e,i){let r=Mu(t)??i,o=sl(n,r),s=o.resolve?o.resolve(t,e):Sr(r,()=>o(t,e));return vo(s)}function uv(n){return nt(t=>{let e=n(t);return e?Le(e).pipe(ne(()=>t)):ce(t)})}var cM=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Oe);return i}getResolvedTitleForRoute(e){return e.data[xu]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:()=>F(D4),providedIn:"root"})}}return n})(),D4=(()=>{class n extends cM{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(K(Rx))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zv=new ie("",{providedIn:"root",factory:()=>({})}),qv=new ie(""),S4=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(Py)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ce(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=vo(e.loadComponent()).pipe(ne(uM),Dt(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),br(()=>{this.componentLoaders.delete(e)})),r=new wa(i,()=>new qe).pipe(va());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ce({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=I4(i,this.compiler,e,this.onLoadEndListener).pipe(br(()=>{this.childrenLoaders.delete(i)})),s=new wa(o,()=>new qe).pipe(va());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function I4(n,t,e,i){return vo(n.loadChildren()).pipe(ne(uM),Et(r=>r instanceof zc||Array.isArray(r)?ce(r):Le(t.compileModuleAsync(r))),ne(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(qv,[],{optional:!0,self:!0}).flat()),{routes:s.map(Gv),injector:o}}))}function T4(n){return n&&typeof n=="object"&&"default"in n}function uM(n){return T4(n)?n.default:n}var Wv=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:()=>F(x4),providedIn:"root"})}}return n})(),x4=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),M4=new ie("");var A4=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qe,this.transitionAbortSubject=new qe,this.configLoader=F(S4),this.environmentInjector=F(on),this.urlSerializer=F(Lv),this.rootContexts=F(Tp),this.location=F(ou),this.inputBindingEnabled=F($v,{optional:!0})!==null,this.titleStrategy=F(cM),this.options=F(zv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(Wv),this.createViewTransition=F(M4,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ce(void 0),this.rootComponentType=null;let e=r=>this.events.next(new bv(r)),i=r=>this.events.next(new Cv(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(Ee(Y(Y({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new xt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:yu,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(o=>o.id!==0),ne(o=>Ee(Y({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),nt(o=>{let s=!1,a=!1;return ce(o).pipe(nt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ii.SupersededByNewNavigation),qt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Ts(l.id,this.urlSerializer.serialize(l.rawUrl),f,gv.IgnoredSameUrlNavigation)),l.resolve(null),qt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ce(l).pipe(nt(f=>{let m=this.transitions?.getValue();return this.events.next(new bu(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?qt:Promise.resolve(f)}),v4(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Dt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Ee(Y({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new bp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:m,source:y,restoredState:D,extras:T}=l,R=new bu(f,this.urlSerializer.serialize(m),y,D);this.events.next(R);let q=Zx(this.rootComponentType).snapshot;return this.currentTransition=o=Ee(Y({},l),{targetSnapshot:q,urlAfterRedirects:m,extras:Ee(Y({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ce(o)}else{let f="";return this.events.next(new Ts(l.id,this.urlSerializer.serialize(l.extractedUrl),f,gv.IgnoredByUrlHandlingStrategy)),l.resolve(null),qt}}),Dt(l=>{let u=new _v(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ne(l=>(this.currentTransition=o=Ee(Y({},l),{guards:V3(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),W3(this.environmentInjector,l=>this.events.next(l)),Dt(l=>{if(o.guardsResult=l.guardsResult,rl(l.guardsResult))throw nM(this.urlSerializer,l.guardsResult);let u=new yv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),_t(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",ii.GuardRejected),!1)),uv(l=>{if(l.guards.canActivateChecks.length)return ce(l).pipe(Dt(u=>{let d=new vv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),nt(u=>{let d=!1;return ce(u).pipe(w4(this.paramsInheritanceStrategy,this.environmentInjector),Dt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",ii.NoDataFromResolver)}}))}),Dt(u=>{let d=new wv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),uv(l=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Dt(m=>{d.component=m}),ne(()=>{})));for(let m of d.children)f.push(...u(m));return f};return Ac(u(l.targetSnapshot.root)).pipe(to(null),Fn(1))}),uv(()=>this.afterPreactivation()),nt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?Le(d).pipe(ne(()=>o)):ce(o)}),ne(l=>{let u=M3(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Ee(Y({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Dt(()=>{this.events.next(new Eu)}),k3(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Fn(1),Dt({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Is(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),mn(this.transitionAbortSubject.pipe(Dt(l=>{throw l}))),br(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",ii.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xr(l=>{if(a=!0,rM(l))this.events.next(new yo(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),R3(l)?this.events.next(new Du(l.url)):o.resolve(!1);else{this.events.next(new Cu(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(e.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return qt}))}))}cancelNavigationTransition(e,i,r){let o=new yo(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function O4(n){return n!==yu}var R4=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:()=>F(P4),providedIn:"root"})}}return n})(),Vv=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},P4=(()=>{class n extends Vv{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Jn(n)))(r||n)}})()}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dM=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:()=>F(N4),providedIn:"root"})}}return n})(),N4=(()=>{class n extends dM{constructor(){super(...arguments),this.location=F(ou),this.urlSerializer=F(Lv),this.options=F(zv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(Wv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new _o,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Zx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof bu)this.stateMemento=this.createStateMemento();else if(e instanceof Ts)this.rawUrlTree=i.initialUrl;else if(e instanceof bp){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(r,i)}}else e instanceof Eu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):e instanceof yo&&(e.code===ii.GuardRejected||e.code===ii.NoDataFromResolver)?this.restoreHistory(i):e instanceof Cu?this.restoreHistory(i,!0):e instanceof Is&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=Y(Y({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=Y(Y({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Jn(n)))(r||n)}})()}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(gu||{});function F4(n,t){n.events.pipe(_t(e=>e instanceof Is||e instanceof yo||e instanceof Cu||e instanceof Ts),ne(e=>e instanceof Is||e instanceof Ts?gu.COMPLETE:(e instanceof yo?e.code===ii.Redirect||e.code===ii.SupersededByNewNavigation:!1)?gu.REDIRECTING:gu.FAILED),_t(e=>e!==gu.REDIRECTING),Fn(1)).subscribe(()=>{t()})}function k4(n){throw n}var V4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},L4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=F(Bf),this.stateManager=F(dM),this.options=F(zv,{optional:!0})||{},this.pendingTasks=F(ho),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(A4),this.urlSerializer=F(Lv),this.location=F(ou),this.urlHandlingStrategy=F(Wv),this._events=new qe,this.errorHandler=this.options.errorHandler||k4,this.navigated=!1,this.routeReuseStrategy=F(R4),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(qv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F($v,{optional:!0}),this.eventsSubscription=new gt,this.isNgZoneEnabled=F(Fe)instanceof Fe&&Fe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof yo&&i.code!==ii.Redirect&&i.code!==ii.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Is)this.navigated=!0;else if(i instanceof Du){let s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),a={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||O4(r.source)};this.scheduleNavigation(s,yu,null,a,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}j4(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),yu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=Y({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Gv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,d=null;switch(a){case"merge":d=Y(Y({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=r?r.snapshot:this.routerState.snapshot.root;f=Kx(m)}catch{(typeof e[0]!="string"||!e[0].startsWith("/"))&&(e=[]),f=this.currentUrlTree.root}return Qx(f,e,d,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=rl(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,yu,null,i)}navigate(e,i={skipLocationChange:!1}){return B4(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=Y({},V4):i===!1?r=Y({},L4):r=i,rl(e))return Px(this.currentUrlTree,e,r);let o=this.parseUrl(e);return Px(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((f,m)=>{a=f,l=m});let d=this.pendingTasks.add();return F4(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B4(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new de(4008,!1)}function j4(n){return!(n instanceof Eu)&&!(n instanceof Du)}var U4=new ie("");function Mp(n,...t){return vs([{provide:qv,multi:!0,useValue:n},[],{provide:yn,useFactory:$4,deps:[jt]},{provide:jf,multi:!0,useFactory:G4},t.map(e=>e.\u0275providers)])}function $4(n){return n.routerState.root}function G4(){let n=F(ui);return t=>{let e=n.get(mo);if(t!==e.components[0])return;let i=n.get(jt),r=n.get(H4);n.get(z4)===1&&i.initialNavigation(),n.get(q4,null,Ne.Optional)?.setUpPreloading(),n.get(U4,null,Ne.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var H4=new ie("",{factory:()=>new qe}),z4=new ie("",{providedIn:"root",factory:()=>1});var q4=new ie("");var W4="firebase",K4="10.13.0";si(W4,K4,"app");var gi=new Er("ANGULARFIRE2_VERSION");var Q4=(n,t)=>{let e=t?[t]:Jd(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},Pr=class{constructor(){return Q4(Y4)}},Y4="app-check";function Kv(){}var Op=class{zone;delegate;constructor(t,e=g_){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){let r=this.zone,o=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,e,i)}},Qv=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Kv,{},Kv,Kv)),e.pipe(Dt({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},xs=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new Op(Zone.current)),this.insideAngular=e.run(()=>new Op(Zone.current,Da)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(K(Fe))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function J4(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Gn(n){return Z4(J4())(n)}function Z4(n){return function(e){return e=e.lift(new Qv(n.ngZone)),e.pipe(Di(n.outsideAngular),Dn(n.insideAngular))}}var wo=class{constructor(t){return t}},Jv=class{constructor(){return Jd()}};function X4(n){return n&&n.length===1?n[0]:new wo(Yd())}var hM=new ie("angularfire2._apps"),e$={provide:wo,useFactory:X4,deps:[[new Dr,hM]]},t$={provide:Jv,deps:[[new Dr,hM]]};var fM=(()=>{class n{constructor(e){si("angularfire",gi.full,"core"),si("angularfire",gi.full,"app"),si("angular",Lf.full,e.toString())}static \u0275fac=function(i){return new(i||n)(K(ln))};static \u0275mod=It({type:n});static \u0275inj=St({providers:[e$,t$]})}return n})();var xn={production:!1,BASE_API_URL:"",firebase:{apiKey:"AIzaSyBNWYDp0fPgLU0npKMC0RoS6C14fHp2mpk",authDomain:"comemivesto-5e5f9.firebaseapp.com",projectId:"comemivesto-5e5f9",storageBucket:"comemivesto-5e5f9.appspot.com",messagingSenderId:"124990581718",appId:"1:124990581718:web:51c8cbf699123bd0e8d277",measurementId:"G-8D9XBPY0Q7"}};function n$(n,t){if(n&1&&Q(0,"i"),n&2){let e=x(2).$implicit;jn(e.icon)}}function i$(n,t){if(n&1){let e=le();_(0,"button",9),H("click",function(){j(e);let r=x().$implicit,o=x();return U(o.toolbarButtonClick(r))}),G(1,n$,1,2,"i",10),k(2),v()}if(n&2){let e=x().$implicit;b("id",e.id)("disabled",e.disabled)("ngClass",e.cssClass),hi("name",e.name),w(),b("ngIf",e.icon),w(),ke(" ",e.text||e.name," ")}}function r$(n,t){if(n&1&&(Be(0),G(1,i$,3,6,"button",8),je()),n&2){let e=t.$implicit;w(),b("ngIf",e.visible)}}function o$(n,t){if(n&1){let e=le();_(0,"button",11),H("click",function(){j(e);let r=x();return U(r.onClickAddButton(r.addButton))}),Q(1,"i"),k(2),v()}if(n&2){let e=x();b("id",e.addButton.id)("name",e.addButton.name)("ngClass",e.addButton.cssClass||""),w(),jn(e.addButton.icon),w(),ke(" ",e.addButton.text||e.addButton.name," ")}}function s$(n,t){if(n&1){let e=le();_(0,"button",12),H("click",function(r){j(e);let o=x();return U(o.onClickCrocetta(r))}),Q(1,"i",13),k(2," Chiudi "),v()}}var Rp=(()=>{class n{constructor(){this.caption="",this.cssClass="",this.showBreadcrumb=!1,this.isFooter=!1,this.isClosable=!0,this.addButtonShow=!1,this.help="",this.idHelper=0,this.emitHelperClick=new oe,this.emitChiusura=new oe,this.emitAddEvent=new oe,this.emitToolbarButtonClick=new oe,this.emitBreadCrumbClick=new oe,this.addButton={id:"addButton",name:"addButton",text:"Aggiungi",disabled:!1,visible:this.addButtonShow,icon:"mdi mdi-pencil-outline",widget:"button"}}hideShowToolbarMenu(e){this.emitChiusura.emit("closeToolbar")}onClickCrocetta(e){this.emitChiusura.emit(e)}onClickAddButton(e){this.emitAddEvent.emit(e)}showDropdownMenu(e,i){let r=document.getElementById(i);r!=null&&(r.classList.contains("show")||r.classList.add("show"))}hideDropdownMenu(e,i){let r=document.getElementById(i);r?.classList.remove("show")}onBreadCrumbClick(e,i,r=0){}onBreadCrumbRemoveClick(e,i,r){}emitHelpClick(e){}toolbarButtonClick(e){this.emitToolbarButtonClick.emit(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-caption"]],inputs:{caption:"caption",cssClass:"cssClass",showBreadcrumb:"showBreadcrumb",breadcrumbNavigation:"breadcrumbNavigation",isFooter:"isFooter",isClosable:"isClosable",addButtonShow:"addButtonShow",customToolbarButtons:"customToolbarButtons",help:"help",idHelper:"idHelper"},outputs:{emitHelperClick:"emitHelperClick",emitChiusura:"emitChiusura",emitAddEvent:"emitAddEvent",emitToolbarButtonClick:"emitToolbarButtonClick",emitBreadCrumbClick:"emitBreadCrumbClick"},standalone:!0,features:[fe],decls:9,vars:5,consts:[[1,"caption-container",3,"ngClass"],[1,"item-wrap","wrap-item-title"],[1,"page-title"],[1,"item-wrap","last-item-wrap"],[1,"btn-container"],[4,"ngFor","ngForOf"],["class","btn ana-button addButton",3,"id","name","ngClass","click",4,"ngIf"],["class","icon-button",3,"click",4,"ngIf"],["class","btn ana-button",3,"id","disabled","ngClass","click",4,"ngIf"],[1,"btn","ana-button",3,"click","id","disabled","ngClass"],[3,"class",4,"ngIf"],[1,"btn","ana-button","addButton",3,"click","id","name","ngClass"],[1,"icon-button",3,"click"],[1,"mdi","mdi-window-close"]],template:function(i,r){i&1&&(_(0,"div",0)(1,"div",1)(2,"h2",2),k(3),v()(),_(4,"div",3)(5,"div",4),G(6,r$,2,1,"ng-container",5)(7,o$,3,6,"button",6)(8,s$,3,0,"button",7),v()()()),i&2&&(b("ngClass",r.cssClass),w(3),Ye(r.caption),w(3),b("ngForOf",r.customToolbarButtons),w(),b("ngIf",r.addButtonShow),w(),b("ngIf",r.isClosable))},dependencies:[Ce,Bt,lt,Qe],styles:[".caption-container[_ngcontent-%COMP%]{display:flex;width:100%;position:relative;flex-direction:row;align-content:center;justify-content:space-between;align-items:center;height:var(--height_caption)}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px 5px}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-logo-caption[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:25px}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-mButton[_ngcontent-%COMP%], .caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-breadcrumb[_ngcontent-%COMP%]{flex-grow:0}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-breadcrumb[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{margin-bottom:0}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-title[_ngcontent-%COMP%]{text-align:start}.caption-container[_ngcontent-%COMP%]   .item-wrap.last-item-wrap[_ngcontent-%COMP%]{text-align:end;min-width:150px}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.3rem;text-align:left;font-weight:500}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]   .ana-button[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}  .vertical h2{margin-left:10%;width:50%;text-align:center}  .vertical-text{writing-mode:vertical-lr;text-orientation:upright;width:0px;font-size:24px;word-break:break-all;white-space:pre-wrap;color:#0b0b0b;font-weight:900;font-family:Montserrat}.currentModule[_ngcontent-%COMP%]{font-size:12px;margin:0;color:#fff!important;font-family:Montserrat}"]})}}return n})();var a$=["toolbarTab"],l$=["*"],c$=n=>({"height.px":n});function u$(n,t){if(n&1&&(_(0,"h2"),Q(1,"span",10),k(2),v()),n&2){let e=x();w(2),Ye(e.subTitle)}}function d$(n,t){if(n&1&&(_(0,"div",11),Q(1,"span",12),k(2),Q(3,"button",13),v()),n&2){let e=x();w(2),ke(" ",e.tip," ")}}function h$(n,t){n&1&&(Be(0),_(1,"p"),k(2,"Carimento in corso..."),v(),je())}var Xt=(()=>{class n{constructor(){this.caption="",this.anaHeight=800,this.subTitle="",this.tip="",this.addButtonShow=!1,this.helpDoc="",this.breadcrumbNavigation=[],this.showSpinner=!1,this.cssClass="",this.emittChiusura=new oe,this.emittEventButton=new oe,this.emitToolbarLeft=new oe,this.timeInterval=0,this.itemTabs=[],this.showItemsTabs=!1,this.setAutoDismiss()}ngAfterViewInit(){}setAutoDismiss(){setTimeout(()=>{this.tip=""},6e4)}getWindowHeight(){let e=window.innerHeight,i=document.documentElement.clientHeight,r=Math.max(e,i),o,s,a;o=document.getElementById("header").offsetHeight,s=200,setTimeout(()=>{this.heightWrap=r-o-s,this.heightWrap=this.heightWrap-13},300)}onCrocettaClick(e){this.emittChiusura.emit(e)}buttonToolbarLeft(e){this.emitToolbarLeft.emit(e)}onAddClick(e){this.emittEventButton.emit(e)}onButtonToolbarClick(e){this.emittEventButton.emit(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-anagrafica-wrapper"]],viewQuery:function(i,r){if(i&1&&kt(a$,7),i&2){let o;At(o=Ot())&&(r.toolbarTab=o.first)}},inputs:{caption:"caption",anaHeight:"anaHeight",subTitle:"subTitle",tip:"tip",addButtonShow:"addButtonShow",helpDoc:"helpDoc",breadcrumbNavigation:"breadcrumbNavigation",showSpinner:"showSpinner",cssClass:"cssClass",customToolbarButtons:"customToolbarButtons"},outputs:{emittChiusura:"emittChiusura",emittEventButton:"emittEventButton",emitToolbarLeft:"emitToolbarLeft"},standalone:!0,features:[fe],ngContentSelectors:l$,decls:12,vars:18,consts:[["id","cWrap",1,"content-wrap",3,"ngClass"],[1,"anagrafica-wrap",3,"ngStyle"],[3,"emettiChiusura","emitToolbarButtonClick","emitAddEvent","caption","showBreadcrumb","addButtonShow","customToolbarButtons","help","breadcrumbNavigation","isClosable","isFooter"],[1,"anagrafica-container"],[1,"anagrafica-row"],[1,"col-lg-12","wrapForm"],[1,"text"],[4,"ngIf"],["class","alert alert-primary d-flex align-items-center alert-dismissible fade show","role","alert",4,"ngIf"],[3,"emettiChiusura","showBreadcrumb","isClosable","isFooter"],[1,"mdi","mdi-database"],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","alert-dismissible","fade","show"],[1,"mdi","mdi-lightbulb-alert-outline","me-2"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(i,r){i&1&&(Ka(),_(0,"div",0)(1,"div",1)(2,"app-caption",2),H("emettiChiusura",function(s){return r.onCrocettaClick(s)})("emitToolbarButtonClick",function(s){return r.onButtonToolbarClick(s)})("emitAddEvent",function(s){return r.onAddClick(s)}),v(),_(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),G(7,u$,3,1,"h2",7),v(),G(8,d$,4,1,"div",8)(9,h$,3,0,"ng-container",7),Qa(10,0,["id","ng-content"]),v()()(),_(11,"app-caption",9),H("emettiChiusura",function(s){return r.onCrocettaClick(s)}),v()()()),i&2&&(b("ngClass",r.cssClass),w(),b("ngStyle",Jt(16,c$,r.anaHeight)),w(),b("caption",r.caption)("showBreadcrumb",!1)("addButtonShow",r.addButtonShow)("customToolbarButtons",r.customToolbarButtons)("help",r.helpDoc)("breadcrumbNavigation",r.breadcrumbNavigation)("isClosable",!1)("isFooter",!1),w(5),b("ngIf",r.subTitle),w(),b("ngIf",r.tip),w(),b("ngIf",r.showSpinner),w(2),b("showBreadcrumb",!1)("isClosable",!1)("isFooter",!0))},dependencies:[Rp,Ce,Bt,Qe,$n],styles:['@charset "UTF-8";  .isPopUp{position:absolute;bottom:0}  .content-wrap{position:relative;width:var(--width_container);margin:5px auto}  .content-wrap .anagrafica-wrap{margin-top:.3rem}  .content-wrap .anagrafica-wrap .anagrafica-container{box-shadow:0 3px 5px #0000000b;margin-top:.88rem;background-color:#fff;border:1px solid #e2e8f0;border-radius:.6rem}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row{position:relative;padding:1.25rem}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar{position:absolute;left:0;top:0;padding:0;width:55px;z-index:2;box-shadow:2px 0 20px #45414e12;border-top:1px solid rgba(0,0,0,.15)}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar.closed{width:0;visibility:hidden}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar.open{width:177px;display:block;visibility:visible;height:100%}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar{-moz-transition:ease .35s;-o-transition:ease .35s;-webkit-transition:ease .3s;transition:ease .35s}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .toolbar-shadow{box-shadow:2px 0 20px #45414e12!important;padding-right:0}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sidebar-sticky-top{padding:0 6px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .item-nav{display:block;height:35px;border-bottom:1px solid rgba(253,253,253,.531);width:100%;padding:0}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .item-nav .item-content i{font-size:25px!important;width:28px!important;height:28px!important;line-height:28px!important;color:#fff!important;font-weight:300!important}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sidebar-sticky-bottom .item-nav{height:26px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sub-item-nav :before{content:"\\fa14";display:block;font-family:Material Design Icons;color:#fff;width:5px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar p{font-size:12px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapForm{border:1px solid rgba(226,232,240,.6);border-radius:.6rem;padding:1.25rem}']})}}return n})();var pM=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[fe],decls:2,vars:0,template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper"),k(1,` dddddd
`),v())},dependencies:[Xt]})}}return n})();var p$=new Map,m$={activated:!1,tokenObservers:[]},g$={initialized:!1,enabled:!1};function Vi(n){return p$.get(n)||Object.assign({},m$)}function vM(){return g$}var _$="https://content-firebaseappcheck.googleapis.com/v1";var y$="exchangeDebugToken",mM={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},jX=24*60*60*1e3;var Xv=class{constructor(t,e,i,r,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return E(this,null,function*(){this.stop();try{this.pending=new Yg,this.pending.promise.catch(e=>{}),yield v$(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new Yg,this.pending.promise.catch(e=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}};function v$(n){return new Promise(t=>{setTimeout(t,n)})}var w$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},bo=new qE("appCheck","AppCheck",w$);function wM(n){if(!Vi(n).activated)throw bo.create("use-before-activation",{appName:n.name})}function bM(i,r){return E(this,arguments,function*({url:n,body:t},e){let o={"Content-Type":"application/json"},s=e.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(t),headers:o},l;try{l=yield fetch(n,a)}catch(y){throw bo.create("fetch-network-error",{originalErrorMessage:y?.message})}if(l.status!==200)throw bo.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(y){throw bo.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw bo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:u.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function CM(n,t){let{projectId:e,appId:i,apiKey:r}=n.options;return{url:`${_$}/projects/${e}/apps/${i}:${y$}?key=${r}`,body:{debug_token:t}}}var b$="firebase-app-check-database",C$=1,ew="firebase-app-check-store";var Pp=null;function E$(){return Pp||(Pp=new Promise((n,t)=>{try{let e=indexedDB.open(b$,C$);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(bo.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},e.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(ew,{keyPath:"compositeKey"})}}}catch(e){t(bo.create("storage-open",{originalErrorMessage:e?.message}))}}),Pp)}function D$(n,t){return S$(I$(n),t)}function S$(n,t){return E(this,null,function*(){let i=(yield E$()).transaction(ew,"readwrite"),o=i.objectStore(ew).put({compositeKey:n,value:t});return new Promise((s,a)=>{o.onsuccess=l=>{s()},i.onerror=l=>{var u;a(bo.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function I$(n){return`${n.options.appId}-${n.name}`}var tw=new Qd("@firebase/app-check");function Zv(n,t){return Kd()?D$(n,t).catch(e=>{tw.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function EM(){return vM().enabled}function DM(){return E(this,null,function*(){let n=vM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var T$={error:"UNKNOWN_ERROR"};function x$(n){return GE.encodeString(JSON.stringify(n),!1)}function nw(n,t=!1){return E(this,null,function*(){let e=n.app;wM(e);let i=Vi(e),r=i.token,o;if(r&&!Ou(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(Ou(l)?r=l:yield Zv(e,void 0))}if(!t&&r&&Ou(r))return{token:r.token};let s=!1;if(EM()){i.exchangeTokenPromise||(i.exchangeTokenPromise=bM(CM(e,yield DM()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let l=yield i.exchangeTokenPromise;return yield Zv(e,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield Vi(e).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?tw.warn(l.message):tw.error(l),o=l}let a;return r?o?Ou(r)?a={token:r.token,internalError:o}:a=_M(o):(a={token:r.token},i.token=r,yield Zv(e,r)):a=_M(o),s&&R$(e,a),a})}function M$(n){return E(this,null,function*(){let t=n.app;wM(t);let{provider:e}=Vi(t);if(EM()){let i=yield DM(),{token:r}=yield bM(CM(t,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield e.getToken();return{token:i}}})}function A$(n,t,e,i){let{app:r}=n,o=Vi(r),s={next:e,error:i,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ou(o.token)){let a=o.token;Promise.resolve().then(()=>{e({token:a.token}),gM(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>gM(n))}function SM(n,t){let e=Vi(n),i=e.tokenObservers.filter(r=>r.next!==t);i.length===0&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function gM(n){let{app:t}=n,e=Vi(t),i=e.tokenRefresher;i||(i=O$(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function O$(n){let{app:t}=n;return new Xv(()=>E(this,null,function*(){let e=Vi(t),i;if(e.token?i=yield nw(n,!0):i=yield nw(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let e=Vi(t);if(e.token){let i=e.token.issuedAtTimeMillis+(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)*.5+3e5,r=e.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},mM.RETRIAL_MIN_WAIT,mM.RETRIAL_MAX_WAIT)}function R$(n,t){let e=Vi(n).tokenObservers;for(let i of e)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function Ou(n){return n.expireTimeMillis-Date.now()>0}function _M(n){return{token:x$(T$),error:n}}var iw=class{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){let{tokenObservers:t}=Vi(this.app);for(let e of t)SM(this.app,e.next);return Promise.resolve()}};function P$(n,t){return new iw(n,t)}function N$(n){return{getToken:t=>nw(n,t),getLimitedUseToken:()=>M$(n),addTokenListener:t=>A$(n,"INTERNAL",t),removeTokenListener:t=>SM(n.app,t)}}var F$="@firebase/app-check",k$="0.8.7";var V$="app-check",yM="app-check-internal";function L$(){Dc(new ts(V$,n=>{let t=n.getProvider("app").getImmediate(),e=n.getProvider("heartbeat");return P$(t,e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(yM).initialize()})),Dc(new ts(yM,n=>{let t=n.getProvider("app-check").getImmediate();return N$(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),si(F$,k$)}L$();var B$=["localhost","0.0.0.0","127.0.0.1"],ZX=typeof window<"u"&&B$.includes(window.location.hostname);var j$="firebase",U$="10.13.0";nn.registerVersion(j$,U$,"app-compat");var $$=["ngOnDestroy"],Fp=(n,t,e,i={})=>new Proxy(n,{get:(r,o)=>e.runOutsideAngular(()=>{if(n[o])return i?.spy?.get&&i.spy.get(o,n[o]),n[o];if($$.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(u=>e.run(()=>u)):e.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,u)=>s.then(d=>{let f=d?.(...u);return i?.spy?.apply&&i.spy.apply(o,u,f),f})})})});var Np=class{constructor(t){return t}},Co=new ie("angularfire2.app.options"),Eo=new ie("angularfire2.app.name");function Ms(n,t,e){let i=typeof e=="string"&&e||"[DEFAULT]",r=typeof e=="object"&&e||{};r.name=r.name||i;let s=nn.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>nn.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;G$("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Np(s)}var G$=(n,...t)=>{Ny()&&typeof console<"u"&&console[n](...t)},H$={provide:Np,useFactory:Ms,deps:[Co,Fe,[new Dr,Eo]]},TM=(()=>{class n{static initializeApp(e,i){return{ngModule:n,providers:[{provide:Co,useValue:e},{provide:Eo,useValue:i}]}}constructor(e){nn.registerVersion("angularfire",gi.full,"core"),nn.registerVersion("angularfire",gi.full,"app-compat"),nn.registerVersion("angular",Lf.full,e.toString())}static \u0275fac=function(i){return new(i||n)(K(ln))};static \u0275mod=It({type:n});static \u0275inj=St({providers:[H$]})}return n})();function al(n,t,e,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return z$(r,s)||(IM("error",`${t} was already initialized on the ${e} Firebase App with different settings.${q$?" You may need to reload as Firebase is not HMR aware.":""}`),IM("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}function z$(n,t){try{return n.toString()===t.toString()}catch{return n===t}}var q$=typeof module<"u"&&!!module.hot,IM=(n,...t)=>{Ny()&&typeof console<"u"&&console[n](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var ow=new ie("angularfire2.auth.use-emulator"),sw=new ie("angularfire2.auth.settings"),aw=new ie("angularfire2.auth.tenant-id"),lw=new ie("angularfire2.auth.langugage-code"),cw=new ie("angularfire2.auth.use-device-language"),uw=new ie("angularfire.auth.persistence"),dw=(n,t,e,i,r,o,s,a)=>al(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let l=t.runOutsideAngular(()=>n.auth());if(e&&l.useEmulator(...e),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(let[u,d]of Object.entries(s))l.settings[u]=d;return a&&l.setPersistence(a),l},[e,i,r,o,s,a]),Ru=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(e,i,r,o,s,a,l,u,d,f,m,y){let D=new qe,T=ce(void 0).pipe(Dn(s.outsideAngular),nt(()=>o.runOutsideAngular(()=>import("./chunk-T7Z74EPC.js"))),ne(()=>Ms(e,o,i)),ne(R=>dw(R,o,a,u,d,f,l,m)),Ma({bufferSize:1,refCount:!1}));if(go(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ce(null);else{T.pipe(li()).subscribe();let R=T.pipe(nt($=>$.getRedirectResult().then(ae=>ae,()=>null)),Gn,Ma({bufferSize:1,refCount:!1})),q=T.pipe(nt($=>new ye(ae=>({unsubscribe:o.runOutsideAngular(()=>$.onAuthStateChanged(ge=>ae.next(ge),ge=>ae.error(ge),()=>ae.complete()))})))),te=T.pipe(nt($=>new ye(ae=>({unsubscribe:o.runOutsideAngular(()=>$.onIdTokenChanged(ge=>ae.next(ge),ge=>ae.error(ge),()=>ae.complete()))}))));this.authState=R.pipe(Mh(q),Di(s.outsideAngular),Dn(s.insideAngular)),this.user=R.pipe(Mh(te),Di(s.outsideAngular),Dn(s.insideAngular)),this.idToken=this.user.pipe(nt($=>$?Le($.getIdToken()):ce(null))),this.idTokenResult=this.user.pipe(nt($=>$?Le($.getIdTokenResult()):ce(null))),this.credential=Sh(R,D,this.authState.pipe(_t($=>!$))).pipe(ne($=>$?.user?$:null),Di(s.outsideAngular),Dn(s.insideAngular))}return Fp(this,T,o,{spy:{apply:(R,q,te)=>{(R.startsWith("signIn")||R.startsWith("createUser"))&&te.then($=>D.next($))}}})}static \u0275fac=function(i){return new(i||n)(K(Co),K(Eo,8),K(ln),K(Fe),K(xs),K(ow,8),K(sw,8),K(aw,8),K(lw,8),K(cw,8),K(uw,8),K(Pr,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),xM=(()=>{class n{constructor(){nn.registerVersion("angularfire",gi.full,"auth-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=It({type:n});static \u0275inj=St({providers:[Ru]})}return n})();var MM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},AM={};var Do,hw;(function(){var n;function t(M,C){function I(){}I.prototype=C.prototype,M.D=C.prototype,M.prototype=new I,M.prototype.constructor=M,M.C=function(A,O,N){for(var S=Array(arguments.length-2),gr=2;gr<arguments.length;gr++)S[gr-2]=arguments[gr];return C.prototype[O].apply(A,S)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,C,I){I||(I=0);var A=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)A[O]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(O=0;16>O;++O)A[O]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=M.g[0],I=M.g[1],O=M.g[2];var N=M.g[3],S=C+(N^I&(O^N))+A[0]+3614090360&4294967295;C=I+(S<<7&4294967295|S>>>25),S=N+(O^C&(I^O))+A[1]+3905402710&4294967295,N=C+(S<<12&4294967295|S>>>20),S=O+(I^N&(C^I))+A[2]+606105819&4294967295,O=N+(S<<17&4294967295|S>>>15),S=I+(C^O&(N^C))+A[3]+3250441966&4294967295,I=O+(S<<22&4294967295|S>>>10),S=C+(N^I&(O^N))+A[4]+4118548399&4294967295,C=I+(S<<7&4294967295|S>>>25),S=N+(O^C&(I^O))+A[5]+1200080426&4294967295,N=C+(S<<12&4294967295|S>>>20),S=O+(I^N&(C^I))+A[6]+2821735955&4294967295,O=N+(S<<17&4294967295|S>>>15),S=I+(C^O&(N^C))+A[7]+4249261313&4294967295,I=O+(S<<22&4294967295|S>>>10),S=C+(N^I&(O^N))+A[8]+1770035416&4294967295,C=I+(S<<7&4294967295|S>>>25),S=N+(O^C&(I^O))+A[9]+2336552879&4294967295,N=C+(S<<12&4294967295|S>>>20),S=O+(I^N&(C^I))+A[10]+4294925233&4294967295,O=N+(S<<17&4294967295|S>>>15),S=I+(C^O&(N^C))+A[11]+2304563134&4294967295,I=O+(S<<22&4294967295|S>>>10),S=C+(N^I&(O^N))+A[12]+1804603682&4294967295,C=I+(S<<7&4294967295|S>>>25),S=N+(O^C&(I^O))+A[13]+4254626195&4294967295,N=C+(S<<12&4294967295|S>>>20),S=O+(I^N&(C^I))+A[14]+2792965006&4294967295,O=N+(S<<17&4294967295|S>>>15),S=I+(C^O&(N^C))+A[15]+1236535329&4294967295,I=O+(S<<22&4294967295|S>>>10),S=C+(O^N&(I^O))+A[1]+4129170786&4294967295,C=I+(S<<5&4294967295|S>>>27),S=N+(I^O&(C^I))+A[6]+3225465664&4294967295,N=C+(S<<9&4294967295|S>>>23),S=O+(C^I&(N^C))+A[11]+643717713&4294967295,O=N+(S<<14&4294967295|S>>>18),S=I+(N^C&(O^N))+A[0]+3921069994&4294967295,I=O+(S<<20&4294967295|S>>>12),S=C+(O^N&(I^O))+A[5]+3593408605&4294967295,C=I+(S<<5&4294967295|S>>>27),S=N+(I^O&(C^I))+A[10]+38016083&4294967295,N=C+(S<<9&4294967295|S>>>23),S=O+(C^I&(N^C))+A[15]+3634488961&4294967295,O=N+(S<<14&4294967295|S>>>18),S=I+(N^C&(O^N))+A[4]+3889429448&4294967295,I=O+(S<<20&4294967295|S>>>12),S=C+(O^N&(I^O))+A[9]+568446438&4294967295,C=I+(S<<5&4294967295|S>>>27),S=N+(I^O&(C^I))+A[14]+3275163606&4294967295,N=C+(S<<9&4294967295|S>>>23),S=O+(C^I&(N^C))+A[3]+4107603335&4294967295,O=N+(S<<14&4294967295|S>>>18),S=I+(N^C&(O^N))+A[8]+1163531501&4294967295,I=O+(S<<20&4294967295|S>>>12),S=C+(O^N&(I^O))+A[13]+2850285829&4294967295,C=I+(S<<5&4294967295|S>>>27),S=N+(I^O&(C^I))+A[2]+4243563512&4294967295,N=C+(S<<9&4294967295|S>>>23),S=O+(C^I&(N^C))+A[7]+1735328473&4294967295,O=N+(S<<14&4294967295|S>>>18),S=I+(N^C&(O^N))+A[12]+2368359562&4294967295,I=O+(S<<20&4294967295|S>>>12),S=C+(I^O^N)+A[5]+4294588738&4294967295,C=I+(S<<4&4294967295|S>>>28),S=N+(C^I^O)+A[8]+2272392833&4294967295,N=C+(S<<11&4294967295|S>>>21),S=O+(N^C^I)+A[11]+1839030562&4294967295,O=N+(S<<16&4294967295|S>>>16),S=I+(O^N^C)+A[14]+4259657740&4294967295,I=O+(S<<23&4294967295|S>>>9),S=C+(I^O^N)+A[1]+2763975236&4294967295,C=I+(S<<4&4294967295|S>>>28),S=N+(C^I^O)+A[4]+1272893353&4294967295,N=C+(S<<11&4294967295|S>>>21),S=O+(N^C^I)+A[7]+4139469664&4294967295,O=N+(S<<16&4294967295|S>>>16),S=I+(O^N^C)+A[10]+3200236656&4294967295,I=O+(S<<23&4294967295|S>>>9),S=C+(I^O^N)+A[13]+681279174&4294967295,C=I+(S<<4&4294967295|S>>>28),S=N+(C^I^O)+A[0]+3936430074&4294967295,N=C+(S<<11&4294967295|S>>>21),S=O+(N^C^I)+A[3]+3572445317&4294967295,O=N+(S<<16&4294967295|S>>>16),S=I+(O^N^C)+A[6]+76029189&4294967295,I=O+(S<<23&4294967295|S>>>9),S=C+(I^O^N)+A[9]+3654602809&4294967295,C=I+(S<<4&4294967295|S>>>28),S=N+(C^I^O)+A[12]+3873151461&4294967295,N=C+(S<<11&4294967295|S>>>21),S=O+(N^C^I)+A[15]+530742520&4294967295,O=N+(S<<16&4294967295|S>>>16),S=I+(O^N^C)+A[2]+3299628645&4294967295,I=O+(S<<23&4294967295|S>>>9),S=C+(O^(I|~N))+A[0]+4096336452&4294967295,C=I+(S<<6&4294967295|S>>>26),S=N+(I^(C|~O))+A[7]+1126891415&4294967295,N=C+(S<<10&4294967295|S>>>22),S=O+(C^(N|~I))+A[14]+2878612391&4294967295,O=N+(S<<15&4294967295|S>>>17),S=I+(N^(O|~C))+A[5]+4237533241&4294967295,I=O+(S<<21&4294967295|S>>>11),S=C+(O^(I|~N))+A[12]+1700485571&4294967295,C=I+(S<<6&4294967295|S>>>26),S=N+(I^(C|~O))+A[3]+2399980690&4294967295,N=C+(S<<10&4294967295|S>>>22),S=O+(C^(N|~I))+A[10]+4293915773&4294967295,O=N+(S<<15&4294967295|S>>>17),S=I+(N^(O|~C))+A[1]+2240044497&4294967295,I=O+(S<<21&4294967295|S>>>11),S=C+(O^(I|~N))+A[8]+1873313359&4294967295,C=I+(S<<6&4294967295|S>>>26),S=N+(I^(C|~O))+A[15]+4264355552&4294967295,N=C+(S<<10&4294967295|S>>>22),S=O+(C^(N|~I))+A[6]+2734768916&4294967295,O=N+(S<<15&4294967295|S>>>17),S=I+(N^(O|~C))+A[13]+1309151649&4294967295,I=O+(S<<21&4294967295|S>>>11),S=C+(O^(I|~N))+A[4]+4149444226&4294967295,C=I+(S<<6&4294967295|S>>>26),S=N+(I^(C|~O))+A[11]+3174756917&4294967295,N=C+(S<<10&4294967295|S>>>22),S=O+(C^(N|~I))+A[2]+718787259&4294967295,O=N+(S<<15&4294967295|S>>>17),S=I+(N^(O|~C))+A[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(O+(S<<21&4294967295|S>>>11))&4294967295,M.g[2]=M.g[2]+O&4294967295,M.g[3]=M.g[3]+N&4294967295}i.prototype.u=function(M,C){C===void 0&&(C=M.length);for(var I=C-this.blockSize,A=this.B,O=this.h,N=0;N<C;){if(O==0)for(;N<=I;)r(this,M,N),N+=this.blockSize;if(typeof M=="string"){for(;N<C;)if(A[O++]=M.charCodeAt(N++),O==this.blockSize){r(this,A),O=0;break}}else for(;N<C;)if(A[O++]=M[N++],O==this.blockSize){r(this,A),O=0;break}}this.h=O,this.o+=C},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;var I=8*this.o;for(C=M.length-8;C<M.length;++C)M[C]=I&255,I/=256;for(this.u(M),M=Array(16),C=I=0;4>C;++C)for(var A=0;32>A;A+=8)M[I++]=this.g[C]>>>A&255;return M};function o(M,C){var I=a;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=C(M)}function s(M,C){this.h=C;for(var I=[],A=!0,O=M.length-1;0<=O;O--){var N=M[O]|0;A&&N==C||(I[O]=N,A=!1)}this.g=I}var a={};function l(M){return-128<=M&&128>M?o(M,function(C){return new s([C|0],0>C?-1:0)}):new s([M|0],0>M?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return f;if(0>M)return R(u(-M));for(var C=[],I=1,A=0;M>=I;A++)C[A]=M/I|0,I*=4294967296;return new s(C,0)}function d(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return R(d(M.substring(1),C));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(C,8)),A=f,O=0;O<M.length;O+=8){var N=Math.min(8,M.length-O),S=parseInt(M.substring(O,O+N),C);8>N?(N=u(Math.pow(C,N)),A=A.j(N).add(u(S))):(A=A.j(I),A=A.add(u(S)))}return A}var f=l(0),m=l(1),y=l(16777216);n=s.prototype,n.m=function(){if(T(this))return-R(this).m();for(var M=0,C=1,I=0;I<this.g.length;I++){var A=this.i(I);M+=(0<=A?A:4294967296+A)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(D(this))return"0";if(T(this))return"-"+R(this).toString(M);for(var C=u(Math.pow(M,6)),I=this,A="";;){var O=ae(I,C).g;I=q(I,O.j(C));var N=((0<I.g.length?I.g[0]:I.h)>>>0).toString(M);if(I=O,D(I))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function D(M){if(M.h!=0)return!1;for(var C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function T(M){return M.h==-1}n.l=function(M){return M=q(this,M),T(M)?-1:D(M)?0:1};function R(M){for(var C=M.g.length,I=[],A=0;A<C;A++)I[A]=~M.g[A];return new s(I,~M.h).add(m)}n.abs=function(){return T(this)?R(this):this},n.add=function(M){for(var C=Math.max(this.g.length,M.g.length),I=[],A=0,O=0;O<=C;O++){var N=A+(this.i(O)&65535)+(M.i(O)&65535),S=(N>>>16)+(this.i(O)>>>16)+(M.i(O)>>>16);A=S>>>16,N&=65535,S&=65535,I[O]=S<<16|N}return new s(I,I[I.length-1]&-2147483648?-1:0)};function q(M,C){return M.add(R(C))}n.j=function(M){if(D(this)||D(M))return f;if(T(this))return T(M)?R(this).j(R(M)):R(R(this).j(M));if(T(M))return R(this.j(R(M)));if(0>this.l(y)&&0>M.l(y))return u(this.m()*M.m());for(var C=this.g.length+M.g.length,I=[],A=0;A<2*C;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var O=0;O<M.g.length;O++){var N=this.i(A)>>>16,S=this.i(A)&65535,gr=M.i(O)>>>16,rc=M.i(O)&65535;I[2*A+2*O]+=S*rc,te(I,2*A+2*O),I[2*A+2*O+1]+=N*rc,te(I,2*A+2*O+1),I[2*A+2*O+1]+=S*gr,te(I,2*A+2*O+1),I[2*A+2*O+2]+=N*gr,te(I,2*A+2*O+2)}for(A=0;A<C;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=C;A<2*C;A++)I[A]=0;return new s(I,0)};function te(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function $(M,C){this.g=M,this.h=C}function ae(M,C){if(D(C))throw Error("division by zero");if(D(M))return new $(f,f);if(T(M))return C=ae(R(M),C),new $(R(C.g),R(C.h));if(T(C))return C=ae(M,R(C)),new $(R(C.g),C.h);if(30<M.g.length){if(T(M)||T(C))throw Error("slowDivide_ only works with positive integers.");for(var I=m,A=C;0>=A.l(M);)I=ge(I),A=ge(A);var O=pe(I,1),N=pe(A,1);for(A=pe(A,2),I=pe(I,2);!D(A);){var S=N.add(A);0>=S.l(M)&&(O=O.add(I),N=S),A=pe(A,1),I=pe(I,1)}return C=q(M,O.j(C)),new $(O,C)}for(O=f;0<=M.l(C);){for(I=Math.max(1,Math.floor(M.m()/C.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=u(I),S=N.j(C);T(S)||0<S.l(M);)I-=A,N=u(I),S=N.j(C);D(N)&&(N=m),O=O.add(N),M=q(M,S)}return new $(O,M)}n.A=function(M){return ae(this,M).h},n.and=function(M){for(var C=Math.max(this.g.length,M.g.length),I=[],A=0;A<C;A++)I[A]=this.i(A)&M.i(A);return new s(I,this.h&M.h)},n.or=function(M){for(var C=Math.max(this.g.length,M.g.length),I=[],A=0;A<C;A++)I[A]=this.i(A)|M.i(A);return new s(I,this.h|M.h)},n.xor=function(M){for(var C=Math.max(this.g.length,M.g.length),I=[],A=0;A<C;A++)I[A]=this.i(A)^M.i(A);return new s(I,this.h^M.h)};function ge(M){for(var C=M.g.length+1,I=[],A=0;A<C;A++)I[A]=M.i(A)<<1|M.i(A-1)>>>31;return new s(I,M.h)}function pe(M,C){var I=C>>5;C%=32;for(var A=M.g.length-I,O=[],N=0;N<A;N++)O[N]=0<C?M.i(N+I)>>>C|M.i(N+I+1)<<32-C:M.i(N+I);return new s(O,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,hw=AM.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Do=AM.Integer=s}).apply(typeof MM<"u"?MM:typeof self<"u"?self:typeof window<"u"?window:{});var kp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nr={};var fw,pw,ll,mw,Pu,Vp,gw,_w,yw;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof kp=="object"&&kp];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=e(this);function r(c,h){if(h)e:{var p=i;c=c.split(".");for(var g=0;g<c.length-1;g++){var P=c[g];if(!(P in p))break e;p=p[P]}c=c[c.length-1],g=p[c],h=h(g),h!=g&&h!=null&&t(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,g=!1,P={next:function(){if(!g&&p<c.length){var B=p++;return{value:h(B,c[B]),done:!1}}return g=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}r("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function l(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function u(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,g),c.apply(h,P)}}return function(){return c.apply(h,arguments)}}function m(c,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function y(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function D(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(g,P,B){for(var J=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)J[rt-2]=arguments[rt];return h.prototype[P].apply(g,J)}}function T(c){let h=c.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=c[g];return p}return[]}function R(c,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(l(g)){let P=c.length||0,B=g.length||0;c.length=P+B;for(let J=0;J<B;J++)c[P+J]=g[J]}else c.push(g)}}class q{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function te(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ae(c){return ae[" "](c),c}ae[" "]=function(){};var ge=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function pe(c,h,p){for(let g in c)h.call(p,c[g],g,c)}function M(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function C(c){let h={};for(let p in c)h[p]=c[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(c,h){let p,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(p in g)c[p]=g[p];for(let B=0;B<I.length;B++)p=I[B],Object.prototype.hasOwnProperty.call(g,p)&&(c[p]=g[p])}}function O(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function N(c){a.setTimeout(()=>{throw c},0)}function S(){var c=Dg;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class gr{constructor(){this.h=this.g=null}add(h,p){let g=rc.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var rc=new q(()=>new EN,c=>c.reset());class EN{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let oc,sc=!1,Dg=new gr,B1=()=>{let c=a.Promise.resolve(void 0);oc=()=>{c.then(DN)}};var DN=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(p){N(p)}var h=rc;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}sc=!1};function Wr(){this.s=this.s,this.C=this.C}Wr.prototype.s=!1,Wr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Wr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function dn(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}dn.prototype.h=function(){this.defaultPrevented=!0};var SN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function ac(c,h){if(dn.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(ge){e:{try{ae(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:IN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ac.aa.h.call(this)}}D(ac,dn);var IN={2:"touch",3:"pen",4:"mouse"};ac.prototype.h=function(){ac.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var lc="closure_listenable_"+(1e6*Math.random()|0),TN=0;function xN(c,h,p,g,P){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=P,this.key=++TN,this.da=this.fa=!1}function Ad(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Od(c){this.src=c,this.g={},this.h=0}Od.prototype.add=function(c,h,p,g,P){var B=c.toString();c=this.g[B],c||(c=this.g[B]=[],this.h++);var J=Ig(c,h,g,P);return-1<J?(h=c[J],p||(h.fa=!1)):(h=new xN(h,this.src,B,!!g,P),h.fa=p,c.push(h)),h};function Sg(c,h){var p=h.type;if(p in c.g){var g=c.g[p],P=Array.prototype.indexOf.call(g,h,void 0),B;(B=0<=P)&&Array.prototype.splice.call(g,P,1),B&&(Ad(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Ig(c,h,p,g){for(var P=0;P<c.length;++P){var B=c[P];if(!B.da&&B.listener==h&&B.capture==!!p&&B.ha==g)return P}return-1}var Tg="closure_lm_"+(1e6*Math.random()|0),xg={};function j1(c,h,p,g,P){if(g&&g.once)return $1(c,h,p,g,P);if(Array.isArray(h)){for(var B=0;B<h.length;B++)j1(c,h[B],p,g,P);return null}return p=Rg(p),c&&c[lc]?c.K(h,p,u(g)?!!g.capture:!!g,P):U1(c,h,p,!1,g,P)}function U1(c,h,p,g,P,B){if(!h)throw Error("Invalid event type");var J=u(P)?!!P.capture:!!P,rt=Ag(c);if(rt||(c[Tg]=rt=new Od(c)),p=rt.add(h,p,g,J,B),p.proxy)return p;if(g=MN(),p.proxy=g,g.src=c,g.listener=p,c.addEventListener)SN||(P=J),P===void 0&&(P=!1),c.addEventListener(h.toString(),g,P);else if(c.attachEvent)c.attachEvent(H1(h.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function MN(){function c(p){return h.call(c.src,c.listener,p)}let h=AN;return c}function $1(c,h,p,g,P){if(Array.isArray(h)){for(var B=0;B<h.length;B++)$1(c,h[B],p,g,P);return null}return p=Rg(p),c&&c[lc]?c.L(h,p,u(g)?!!g.capture:!!g,P):U1(c,h,p,!0,g,P)}function G1(c,h,p,g,P){if(Array.isArray(h))for(var B=0;B<h.length;B++)G1(c,h[B],p,g,P);else g=u(g)?!!g.capture:!!g,p=Rg(p),c&&c[lc]?(c=c.i,h=String(h).toString(),h in c.g&&(B=c.g[h],p=Ig(B,p,g,P),-1<p&&(Ad(B[p]),Array.prototype.splice.call(B,p,1),B.length==0&&(delete c.g[h],c.h--)))):c&&(c=Ag(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Ig(h,p,g,P)),(p=-1<c?h[c]:null)&&Mg(p))}function Mg(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[lc])Sg(h.i,c);else{var p=c.type,g=c.proxy;h.removeEventListener?h.removeEventListener(p,g,c.capture):h.detachEvent?h.detachEvent(H1(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=Ag(h))?(Sg(p,c),p.h==0&&(p.src=null,h[Tg]=null)):Ad(c)}}}function H1(c){return c in xg?xg[c]:xg[c]="on"+c}function AN(c,h){if(c.da)c=!0;else{h=new ac(h,this);var p=c.listener,g=c.ha||c.src;c.fa&&Mg(c),c=p.call(g,h)}return c}function Ag(c){return c=c[Tg],c instanceof Od?c:null}var Og="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rg(c){return typeof c=="function"?c:(c[Og]||(c[Og]=function(h){return c.handleEvent(h)}),c[Og])}function hn(){Wr.call(this),this.i=new Od(this),this.M=this,this.F=null}D(hn,Wr),hn.prototype[lc]=!0,hn.prototype.removeEventListener=function(c,h,p,g){G1(this,c,h,p,g)};function Cn(c,h){var p,g=c.F;if(g)for(p=[];g;g=g.F)p.push(g);if(c=c.M,g=h.type||h,typeof h=="string")h=new dn(h,c);else if(h instanceof dn)h.target=h.target||c;else{var P=h;h=new dn(g,c),A(h,P)}if(P=!0,p)for(var B=p.length-1;0<=B;B--){var J=h.g=p[B];P=Rd(J,g,!0,h)&&P}if(J=h.g=c,P=Rd(J,g,!0,h)&&P,P=Rd(J,g,!1,h)&&P,p)for(B=0;B<p.length;B++)J=h.g=p[B],P=Rd(J,g,!1,h)&&P}hn.prototype.N=function(){if(hn.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],g=0;g<p.length;g++)Ad(p[g]);delete c.g[h],c.h--}}this.F=null},hn.prototype.K=function(c,h,p,g){return this.i.add(String(c),h,!1,p,g)},hn.prototype.L=function(c,h,p,g){return this.i.add(String(c),h,!0,p,g)};function Rd(c,h,p,g){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,B=0;B<h.length;++B){var J=h[B];if(J&&!J.da&&J.capture==p){var rt=J.listener,tn=J.ha||J.src;J.fa&&Sg(c.i,J),P=rt.call(tn,g)!==!1&&P}}return P&&!g.defaultPrevented}function z1(c,h,p){if(typeof c=="function")p&&(c=m(c,p));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function q1(c){c.g=z1(()=>{c.g=null,c.i&&(c.i=!1,q1(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class ON extends Wr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:q1(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cc(c){Wr.call(this),this.h=c,this.g={}}D(cc,Wr);var W1=[];function K1(c){pe(c.g,function(h,p){this.g.hasOwnProperty(p)&&Mg(h)},c),c.g={}}cc.prototype.N=function(){cc.aa.N.call(this),K1(this)},cc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pg=a.JSON.stringify,RN=a.JSON.parse,PN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ng(){}Ng.prototype.h=null;function Q1(c){return c.h||(c.h=c.i())}function Y1(){}var uc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fg(){dn.call(this,"d")}D(Fg,dn);function kg(){dn.call(this,"c")}D(kg,dn);var Jo={},J1=null;function Pd(){return J1=J1||new hn}Jo.La="serverreachability";function Z1(c){dn.call(this,Jo.La,c)}D(Z1,dn);function dc(c){let h=Pd();Cn(h,new Z1(h))}Jo.STAT_EVENT="statevent";function X1(c,h){dn.call(this,Jo.STAT_EVENT,c),this.stat=h}D(X1,dn);function En(c){let h=Pd();Cn(h,new X1(h,c))}Jo.Ma="timingevent";function eE(c,h){dn.call(this,Jo.Ma,c),this.size=h}D(eE,dn);function hc(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function fc(){this.g=!0}fc.prototype.xa=function(){this.g=!1};function NN(c,h,p,g,P,B){c.info(function(){if(c.g)if(B)for(var J="",rt=B.split("&"),tn=0;tn<rt.length;tn++){var Ke=rt[tn].split("=");if(1<Ke.length){var fn=Ke[0];Ke=Ke[1];var pn=fn.split("_");J=2<=pn.length&&pn[1]=="type"?J+(fn+"="+Ke+"&"):J+(fn+"=redacted&")}}else J=null;else J=B;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+h+`
`+p+`
`+J})}function FN(c,h,p,g,P,B,J){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+h+`
`+p+`
`+B+" "+J})}function ua(c,h,p,g){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+VN(c,p)+(g?" "+g:"")})}function kN(c,h){c.info(function(){return"TIMEOUT: "+h})}fc.prototype.info=function(){};function VN(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var g=p[c];if(!(2>g.length)){var P=g[1];if(Array.isArray(P)&&!(1>P.length)){var B=P[0];if(B!="noop"&&B!="stop"&&B!="close")for(var J=1;J<P.length;J++)P[J]=""}}}}return Pg(p)}catch{return h}}var Nd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vg;function Fd(){}D(Fd,Ng),Fd.prototype.g=function(){return new XMLHttpRequest},Fd.prototype.i=function(){return{}},Vg=new Fd;function Kr(c,h,p,g){this.j=c,this.i=h,this.l=p,this.R=g||1,this.U=new cc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nE}function nE(){this.i=null,this.g="",this.h=!1}var iE={},Lg={};function Bg(c,h,p){c.L=1,c.v=Bd(_r(h)),c.m=p,c.P=!0,rE(c,null)}function rE(c,h){c.F=Date.now(),kd(c),c.A=_r(c.v);var p=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),yE(p.i,"t",g),c.C=0,p=c.j.J,c.h=new nE,c.g=kE(c.j,p?h:null,!c.m),0<c.O&&(c.M=new ON(m(c.Y,c,c.g),c.O)),h=c.U,p=c.g,g=c.ca;var P="readystatechange";Array.isArray(P)||(P&&(W1[0]=P.toString()),P=W1);for(var B=0;B<P.length;B++){var J=j1(p,P[B],g||h.handleEvent,!1,h.h||h);if(!J)break;h.g[J.key]=J}h=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),dc(),NN(c.i,c.u,c.A,c.l,c.R,c.m)}Kr.prototype.ca=function(c){c=c.target;let h=this.M;h&&yr(c)==3?h.j():this.Y(c)},Kr.prototype.Y=function(c){try{if(c==this.g)e:{let pn=yr(this.g);var h=this.g.Ba();let fa=this.g.Z();if(!(3>pn)&&(pn!=3||this.g&&(this.h.h||this.g.oa()||SE(this.g)))){this.J||pn!=4||h==7||(h==8||0>=fa?dc(3):dc(2)),jg(this);var p=this.g.Z();this.X=p;t:if(oE(this)){var g=SE(this.g);c="";var P=g.length,B=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zo(this),pc(this);var J="";break t}this.h.i=new a.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,c+=this.h.i.decode(g[h],{stream:!(B&&h==P-1)});g.length=0,this.h.g+=c,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=p==200,FN(this.i,this.u,this.A,this.l,this.R,pn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,tn=this.g;if((rt=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(rt)){var Ke=rt;break t}}Ke=null}if(p=Ke)ua(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ug(this,p);else{this.o=!1,this.s=3,En(12),Zo(this),pc(this);break e}}if(this.P){p=!0;let Ci;for(;!this.J&&this.C<J.length;)if(Ci=LN(this,J),Ci==Lg){pn==4&&(this.s=4,En(14),p=!1),ua(this.i,this.l,null,"[Incomplete Response]");break}else if(Ci==iE){this.s=4,En(15),ua(this.i,this.l,J,"[Invalid Chunk]"),p=!1;break}else ua(this.i,this.l,Ci,null),Ug(this,Ci);if(oE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pn!=4||J.length!=0||this.h.h||(this.s=1,En(16),p=!1),this.o=this.o&&p,!p)ua(this.i,this.l,J,"[Invalid Chunked Response]"),Zo(this),pc(this);else if(0<J.length&&!this.W){this.W=!0;var fn=this.j;fn.g==this&&fn.ba&&!fn.M&&(fn.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Wg(fn),fn.M=!0,En(11))}}else ua(this.i,this.l,J,null),Ug(this,J);pn==4&&Zo(this),this.o&&!this.J&&(pn==4?RE(this.j,this):(this.o=!1,kd(this)))}else tF(this.g),p==400&&0<J.indexOf("Unknown SID")?(this.s=3,En(12)):(this.s=0,En(13)),Zo(this),pc(this)}}}catch{}finally{}};function oE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function LN(c,h){var p=c.C,g=h.indexOf(`
`,p);return g==-1?Lg:(p=Number(h.substring(p,g)),isNaN(p)?iE:(g+=1,g+p>h.length?Lg:(h=h.slice(g,g+p),c.C=g+p,h)))}Kr.prototype.cancel=function(){this.J=!0,Zo(this)};function kd(c){c.S=Date.now()+c.I,sE(c,c.I)}function sE(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=hc(m(c.ba,c),h)}function jg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Kr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(kN(this.i,this.A),this.L!=2&&(dc(),En(17)),Zo(this),this.s=2,pc(this)):sE(this,this.S-c)};function pc(c){c.j.G==0||c.J||RE(c.j,c)}function Zo(c){jg(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,K1(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function Ug(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||$g(p.h,c))){if(!c.K&&$g(p.h,c)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Hd(p),$d(p);else break e;qg(p),En(18)}}else p.za=P[1],0<p.za-p.T&&37500>P[2]&&p.F&&p.v==0&&!p.C&&(p.C=hc(m(p.Za,p),6e3));if(1>=cE(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else es(p,11)}else if((c.K||p.g==c)&&Hd(p),!te(h))for(P=p.Da.g.parse(h),h=0;h<P.length;h++){let Ke=P[h];if(p.T=Ke[0],Ke=Ke[1],p.G==2)if(Ke[0]=="c"){p.K=Ke[1],p.ia=Ke[2];let fn=Ke[3];fn!=null&&(p.la=fn,p.j.info("VER="+p.la));let pn=Ke[4];pn!=null&&(p.Aa=pn,p.j.info("SVER="+p.Aa));let fa=Ke[5];fa!=null&&typeof fa=="number"&&0<fa&&(g=1.5*fa,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let Ci=c.g;if(Ci){let qd=Ci.g?Ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qd){var B=g.h;B.g||qd.indexOf("spdy")==-1&&qd.indexOf("quic")==-1&&qd.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Gg(B,B.h),B.h=null))}if(g.D){let Kg=Ci.g?Ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Kg&&(g.ya=Kg,ut(g.I,g.D,Kg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var J=c;if(g.qa=FE(g,g.J?g.ia:null,g.W),J.K){uE(g.h,J);var rt=J,tn=g.L;tn&&(rt.I=tn),rt.B&&(jg(rt),kd(rt)),g.g=J}else AE(g);0<p.i.length&&Gd(p)}else Ke[0]!="stop"&&Ke[0]!="close"||es(p,7);else p.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?es(p,7):zg(p):Ke[0]!="noop"&&p.l&&p.l.ta(Ke),p.v=0)}}dc(4)}catch{}}var BN=class{constructor(c,h){this.g=c,this.map=h}};function aE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function cE(c){return c.h?1:c.g?c.g.size:0}function $g(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Gg(c,h){c.g?c.g.add(h):c.h=h}function uE(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}aE.prototype.cancel=function(){if(this.i=dE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function dE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return T(c.i)}function jN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var h=[],p=c.length,g=0;g<p;g++)h.push(c[g]);return h}h=[],p=0;for(g in c)h[p++]=c[g];return h}function UN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let g in c)h[p++]=g;return h}}}function hE(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=UN(c),g=jN(c),P=g.length,B=0;B<P;B++)h.call(void 0,g[B],p&&p[B],c)}var fE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $N(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var g=c[p].indexOf("="),P=null;if(0<=g){var B=c[p].substring(0,g);P=c[p].substring(g+1)}else B=c[p];h(B,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Xo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Xo){this.h=c.h,Vd(this,c.j),this.o=c.o,this.g=c.g,Ld(this,c.s),this.l=c.l;var h=c.i,p=new _c;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),pE(this,p),this.m=c.m}else c&&(h=String(c).match(fE))?(this.h=!1,Vd(this,h[1]||"",!0),this.o=mc(h[2]||""),this.g=mc(h[3]||"",!0),Ld(this,h[4]),this.l=mc(h[5]||"",!0),pE(this,h[6]||"",!0),this.m=mc(h[7]||"")):(this.h=!1,this.i=new _c(null,this.h))}Xo.prototype.toString=function(){var c=[],h=this.j;h&&c.push(gc(h,mE,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(gc(h,mE,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(gc(p,p.charAt(0)=="/"?zN:HN,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",gc(p,WN)),c.join("")};function _r(c){return new Xo(c)}function Vd(c,h,p){c.j=p?mc(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Ld(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function pE(c,h,p){h instanceof _c?(c.i=h,KN(c.i,c.h)):(p||(h=gc(h,qN)),c.i=new _c(h,c.h))}function ut(c,h,p){c.i.set(h,p)}function Bd(c){return ut(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function mc(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function gc(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,GN),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function GN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var mE=/[#\/\?@]/g,HN=/[#\?:]/g,zN=/[#\?]/g,qN=/[#\?@]/g,WN=/#/g;function _c(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function Qr(c){c.g||(c.g=new Map,c.h=0,c.i&&$N(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=_c.prototype,n.add=function(c,h){Qr(this),this.i=null,c=da(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function gE(c,h){Qr(c),h=da(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function _E(c,h){return Qr(c),h=da(c,h),c.g.has(h)}n.forEach=function(c,h){Qr(this),this.g.forEach(function(p,g){p.forEach(function(P){c.call(h,P,g,this)},this)},this)},n.na=function(){Qr(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let P=c[g];for(let B=0;B<P.length;B++)p.push(h[g])}return p},n.V=function(c){Qr(this);let h=[];if(typeof c=="string")_E(this,c)&&(h=h.concat(this.g.get(da(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},n.set=function(c,h){return Qr(this),this.i=null,c=da(this,c),_E(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function yE(c,h,p){gE(c,h),0<p.length&&(c.i=null,c.g.set(da(c,h),T(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let B=encodeURIComponent(String(g)),J=this.V(g);for(g=0;g<J.length;g++){var P=B;J[g]!==""&&(P+="="+encodeURIComponent(String(J[g]))),c.push(P)}}return this.i=c.join("&")};function da(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function KN(c,h){h&&!c.j&&(Qr(c),c.i=null,c.g.forEach(function(p,g){var P=g.toLowerCase();g!=P&&(gE(this,g),yE(this,P,p))},c)),c.j=h}function QN(c,h){let p=new fc;if(a.Image){let g=new Image;g.onload=y(Yr,p,"TestLoadImage: loaded",!0,h,g),g.onerror=y(Yr,p,"TestLoadImage: error",!1,h,g),g.onabort=y(Yr,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=y(Yr,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else h(!1)}function YN(c,h){let p=new fc,g=new AbortController,P=setTimeout(()=>{g.abort(),Yr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:g.signal}).then(B=>{clearTimeout(P),B.ok?Yr(p,"TestPingServer: ok",!0,h):Yr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),Yr(p,"TestPingServer: error",!1,h)})}function Yr(c,h,p,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(p)}catch{}}function JN(){this.g=new PN}function ZN(c,h,p){let g=p||"";try{hE(c,function(P,B){let J=P;u(P)&&(J=Pg(P)),h.push(g+B+"="+encodeURIComponent(J))})}catch(P){throw h.push(g+"type="+encodeURIComponent("_badmap")),P}}function yc(c){this.l=c.Ub||null,this.j=c.eb||!1}D(yc,Ng),yc.prototype.g=function(){return new jd(this.l,this.j)},yc.prototype.i=function(c){return function(){return c}}({});function jd(c,h){hn.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(jd,hn),n=jd.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,wc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,wc(this)),this.g&&(this.readyState=3,wc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function vE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?vc(this):wc(this),this.readyState==3&&vE(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,vc(this))},n.Qa=function(c){this.g&&(this.response=c,vc(this))},n.ga=function(){this.g&&vc(this)};function vc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,wc(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function wc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(jd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function wE(c){let h="";return pe(c,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Hg(c,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=wE(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):ut(c,h,p))}function Ct(c){hn.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ct,hn);var XN=/^https?$/i,eF=["POST","PUT"];n=Ct.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vg.g(),this.v=this.o?Q1(this.o):Q1(Vg),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(B){bE(this,B);return}if(c=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)p.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let B of g.keys())p.set(B,g.get(B));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(B=>B.toLowerCase()=="content-type"),P=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(eF,h,void 0))||g||P||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,J]of p)this.g.setRequestHeader(B,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{DE(this),this.u=!0,this.g.send(c),this.u=!1}catch(B){bE(this,B)}};function bE(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,CE(c),Ud(c)}function CE(c){c.A||(c.A=!0,Cn(c,"complete"),Cn(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Cn(this,"complete"),Cn(this,"abort"),Ud(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ud(this,!0)),Ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?EE(this):this.bb())},n.bb=function(){EE(this)};function EE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||yr(c)!=4||c.Z()!=2)){if(c.u&&yr(c)==4)z1(c.Ea,0,c);else if(Cn(c,"readystatechange"),yr(c)==4){c.h=!1;try{let J=c.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=J===0){var P=String(c.D).match(fE)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),g=!XN.test(P?P.toLowerCase():"")}p=g}if(p)Cn(c,"complete"),Cn(c,"success");else{c.m=6;try{var B=2<yr(c)?c.g.statusText:""}catch{B=""}c.l=B+" ["+c.Z()+"]",CE(c)}}finally{Ud(c)}}}}function Ud(c,h){if(c.g){DE(c);let p=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Cn(c,"ready");try{p.onreadystatechange=g}catch{}}}function DE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function yr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),RN(h)}};function SE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function tF(c){let h={};c=(c.g&&2<=yr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(te(c[g]))continue;var p=O(c[g]);let P=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let B=h[P]||[];h[P]=B,B.push(p)}M(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bc(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function IE(c){this.Aa=0,this.i=[],this.j=new fc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bc("baseRetryDelayMs",5e3,c),this.cb=bc("retryDelaySeedMs",1e4,c),this.Wa=bc("forwardChannelMaxRetries",2,c),this.wa=bc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new aE(c&&c.concurrentRequestLimit),this.Da=new JN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=IE.prototype,n.la=8,n.G=1,n.connect=function(c,h,p,g){En(0),this.W=c,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=FE(this,null,this.W),Gd(this)};function zg(c){if(TE(c),c.G==3){var h=c.U++,p=_r(c.I);if(ut(p,"SID",c.K),ut(p,"RID",h),ut(p,"TYPE","terminate"),Cc(c,p),h=new Kr(c,c.j,h),h.L=2,h.v=Bd(_r(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=kE(h.j,null),h.g.ea(h.v)),h.F=Date.now(),kd(h)}NE(c)}function $d(c){c.g&&(Wg(c),c.g.cancel(),c.g=null)}function TE(c){$d(c),c.u&&(a.clearTimeout(c.u),c.u=null),Hd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Gd(c){if(!lE(c.h)&&!c.s){c.s=!0;var h=c.Ga;oc||B1(),sc||(oc(),sc=!0),Dg.add(h,c),c.B=0}}function nF(c,h){return cE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=hc(m(c.Ga,c,h),PE(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let P=new Kr(this,this.j,c),B=this.o;if(this.S&&(B?(B=C(B),A(B,this.S)):B=this.S),this.m!==null||this.O||(P.H=B,B=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ME(this,P,h),p=_r(this.I),ut(p,"RID",c),ut(p,"CVER",22),this.D&&ut(p,"X-HTTP-Session-Id",this.D),Cc(this,p),B&&(this.O?h="headers="+encodeURIComponent(String(wE(B)))+"&"+h:this.m&&Hg(p,this.m,B)),Gg(this.h,P),this.Ua&&ut(p,"TYPE","init"),this.P?(ut(p,"$req",h),ut(p,"SID","null"),P.T=!0,Bg(P,p,null)):Bg(P,p,h),this.G=2}}else this.G==3&&(c?xE(this,c):this.i.length==0||lE(this.h)||xE(this))};function xE(c,h){var p;h?p=h.l:p=c.U++;let g=_r(c.I);ut(g,"SID",c.K),ut(g,"RID",p),ut(g,"AID",c.T),Cc(c,g),c.m&&c.o&&Hg(g,c.m,c.o),p=new Kr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=ME(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Gg(c.h,p),Bg(p,g,h)}function Cc(c,h){c.H&&pe(c.H,function(p,g){ut(h,g,p)}),c.l&&hE({},function(p,g){ut(h,g,p)})}function ME(c,h,p){p=Math.min(c.i.length,p);var g=c.l?m(c.l.Na,c.l,c):null;e:{var P=c.i;let B=-1;for(;;){let J=["count="+p];B==-1?0<p?(B=P[0].g,J.push("ofs="+B)):B=0:J.push("ofs="+B);let rt=!0;for(let tn=0;tn<p;tn++){let Ke=P[tn].g,fn=P[tn].map;if(Ke-=B,0>Ke)B=Math.max(0,P[tn].g-100),rt=!1;else try{ZN(fn,J,"req"+Ke+"_")}catch{g&&g(fn)}}if(rt){g=J.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,g}function AE(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;oc||B1(),sc||(oc(),sc=!0),Dg.add(h,c),c.v=0}}function qg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=hc(m(c.Fa,c),PE(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,OE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=hc(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,En(10),$d(this),OE(this))};function Wg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function OE(c){c.g=new Kr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=_r(c.qa);ut(h,"RID","rpc"),ut(h,"SID",c.K),ut(h,"AID",c.T),ut(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&ut(h,"TO",c.ja),ut(h,"TYPE","xmlhttp"),Cc(c,h),c.m&&c.o&&Hg(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Bd(_r(h)),p.m=null,p.P=!0,rE(p,c)}n.Za=function(){this.C!=null&&(this.C=null,$d(this),qg(this),En(19))};function Hd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function RE(c,h){var p=null;if(c.g==h){Hd(c),Wg(c),c.g=null;var g=2}else if($g(c.h,h))p=h.D,uE(c.h,h),g=1;else return;if(c.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var P=c.B;g=Pd(),Cn(g,new eE(g,p)),Gd(c)}else AE(c);else if(P=h.s,P==3||P==0&&0<h.X||!(g==1&&nF(c,h)||g==2&&qg(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),P){case 1:es(c,5);break;case 4:es(c,10);break;case 3:es(c,6);break;default:es(c,2)}}}function PE(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function es(c,h){if(c.j.info("Error code "+h),h==2){var p=m(c.fb,c),g=c.Xa;let P=!g;g=new Xo(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vd(g,"https"),Bd(g),P?QN(g.toString(),p):YN(g.toString(),p)}else En(2);c.G=0,c.l&&c.l.sa(h),NE(c),TE(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),En(2)):(this.j.info("Failed to ping google.com"),En(1))};function NE(c){if(c.G=0,c.ka=[],c.l){let h=dE(c.h);(h.length!=0||c.i.length!=0)&&(R(c.ka,h),R(c.ka,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.ra()}}function FE(c,h,p){var g=p instanceof Xo?_r(p):new Xo(p);if(g.g!="")h&&(g.g=h+"."+g.g),Ld(g,g.s);else{var P=a.location;g=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var B=new Xo(null);g&&Vd(B,g),h&&(B.g=h),P&&Ld(B,P),p&&(B.l=p),g=B}return p=c.D,h=c.ya,p&&h&&ut(g,p,h),ut(g,"VER",c.la),Cc(c,g),g}function kE(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Ct(new yc({eb:p})):new Ct(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function VE(){}n=VE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function zd(){}zd.prototype.g=function(c,h){return new qn(c,h)};function qn(c,h){hn.call(this),this.g=new IE(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!te(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!te(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new ha(this)}D(qn,hn),qn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){zg(this.g)},qn.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Pg(c),c=p);h.i.push(new BN(h.Ya++,c)),h.G==3&&Gd(h)},qn.prototype.N=function(){this.g.l=null,delete this.j,zg(this.g),delete this.g,qn.aa.N.call(this)};function LE(c){Fg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}D(LE,Fg);function BE(){kg.call(this),this.status=1}D(BE,kg);function ha(c){this.g=c}D(ha,VE),ha.prototype.ua=function(){Cn(this.g,"a")},ha.prototype.ta=function(c){Cn(this.g,new LE(c))},ha.prototype.sa=function(c){Cn(this.g,new BE)},ha.prototype.ra=function(){Cn(this.g,"b")},zd.prototype.createWebChannel=zd.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,yw=Nr.createWebChannelTransport=function(){return new zd},_w=Nr.getStatEventTarget=function(){return Pd()},gw=Nr.Event=Jo,Vp=Nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nd.NO_ERROR=0,Nd.TIMEOUT=8,Nd.HTTP_ERROR=6,Pu=Nr.ErrorCode=Nd,tE.COMPLETE="complete",mw=Nr.EventType=tE,Y1.EventType=uc,uc.OPEN="a",uc.CLOSE="b",uc.ERROR="c",uc.MESSAGE="d",hn.prototype.listen=hn.prototype.K,ll=Nr.WebChannel=Y1,pw=Nr.FetchXmlHttpFactory=yc,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,fw=Nr.XhrIo=Ct}).apply(typeof kp<"u"?kp:typeof self<"u"?self:typeof window<"u"?window:{});var OM="@firebase/firestore";var Gt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");var Bl="10.13.0";var Oo=new Qd("@firebase/firestore");function fl(){return Oo.logLevel}function PA(n){Oo.setLogLevel(n)}function W(n,...t){if(Oo.logLevel<=Gi.DEBUG){let e=t.map(EC);Oo.debug(`Firestore (${Bl}): ${n}`,...e)}}function Rt(n,...t){if(Oo.logLevel<=Gi.ERROR){let e=t.map(EC);Oo.error(`Firestore (${Bl}): ${n}`,...e)}}function yi(n,...t){if(Oo.logLevel<=Gi.WARN){let e=t.map(EC);Oo.warn(`Firestore (${Bl}): ${n}`,...e)}}function EC(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function se(n="Unexpected state"){let t=`FIRESTORE (${Bl}) INTERNAL ASSERTION FAILED: `+n;throw Rt(t),new Error(t)}function ue(n,t){n||se()}function NA(n,t){n||se()}function X(n,t){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends zE{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ht=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var Kp=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Ew=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Gt.UNAUTHENTICATED))}shutdown(){}},Dw=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},Sw=class{constructor(t){this.t=t,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let i=this.i,r=l=>this.i!==i?(i=this.i,e(l)):Promise.resolve(),o=new Ht;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ht,t.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let l=o;t.enqueueRetryable(()=>E(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ht)}},0),s()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ue(typeof i.accessToken=="string"),new Kp(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return ue(t===null||typeof t=="string"),new Gt(t)}},Iw=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Tw=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Iw(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},xw=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Mw=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let i=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};let r=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ue(typeof e.token=="string"),this.R=e.token,new xw(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Q$(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Qp=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=Q$(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%t.length))}return i}};function De(n,t){return n<t?-1:n>t?1:0}function Cl(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function FA(n){return n+"\0"}var bt=class n{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?De(this.nanoseconds,t.nanoseconds):De(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var me=class n{constructor(t){this.timestamp=t}static fromTimestamp(t){return new n(t)}static min(){return new n(new bt(0,0))}static max(){return new n(new bt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Yp=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&se(),i===void 0?i=t.length-e:i>t.length-e&&se(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let o=t.get(r),s=e.get(r);if(o<s)return-1;if(o>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},Ge=class n extends Yp{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},Y$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pt=class n extends Yp{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return Y$.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,o=()=>{if(i.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},s=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new z(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new z(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var ee=class n{constructor(t){this.path=t}static fromPath(t){return new n(Ge.fromString(t))}static fromName(t){return new n(Ge.fromString(t).popFirst(5))}static empty(){return new n(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ge.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ge.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new Ge(t.slice()))}};var El=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};function Aw(n){return n.fields.find(t=>t.kind===2)}function Os(n){return n.fields.filter(t=>t.kind!==2)}El.UNKNOWN_ID=-1;var vl=class{constructor(t,e){this.fieldPath=t,this.kind=e}};var zu=class n{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new n(0,vi.min())}};function kA(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=me.fromTimestamp(i===1e9?new bt(e+1,0):new bt(e,i));return new vi(r,ee.empty(),t)}function VA(n){return new vi(n.readTime,n.key,-1)}var vi=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(me.min(),ee.empty(),-1)}static max(){return new n(me.max(),ee.empty(),-1)}};function DC(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=ee.comparator(n.documentKey,t.documentKey),e!==0?e:De(n.largestBatchId,t.largestBatchId))}var LA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Uo(n){return E(this,null,function*(){if(n.code!==L.FAILED_PRECONDITION||n.message!==LA)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,o=0,s=!1;t.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&e()},l=>i(l))}),s=!0,o===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let o=t.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;e(t[u]).next(d=>{s[u]=d,++a,a===o&&i(s)},d=>r(d))}})}static doWhile(t,e){return new n((i,r)=>{let o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}};var Zp=class n{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Ht,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Vs(t,e.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=SC(i.target.error);this.V.reject(new Vs(t,r))}}static open(t,e,i,r){try{return new n(e,t.transaction(r,i))}catch(o){throw new Vs(e,o)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(W("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let e=this.transaction.objectStore(t);return new Rw(e)}},Ro=class n{constructor(t,e,i){this.name=t,this.version=e,this.p=i,n.S(Ec())===12.2&&Rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return W("SimpleDb","Removing database:",t),Rs(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Kd())return!1;if(n.v())return!0;let t=Ec(),e=n.S(t),i=0<e&&e<10,r=BA(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.C)==="YES"}static F(t,e){return t.store(e)}static S(t){let e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(t){return E(this,null,function*(){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=yield new Promise((e,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;e(s)},r.onblocked=()=>{i(new Vs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new z(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new z(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new Vs(t,s))},r.onupgradeneeded=o=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,r.transaction,o.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db})}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){return E(this,null,function*(){let o=e==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(t);let a=Zp.open(this.db,t,o?"readonly":"readwrite",i),l=r(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),V.reject(u))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,u=l.name!=="FirebaseError"&&s<3;if(W("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function BA(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}var Ow=class{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return Rs(this.B.delete())}},Vs=class extends z{constructor(t,e){super(L.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}};function $o(n){return n.name==="IndexedDbTransactionError"}var Rw=class{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(W("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Rs(i)}add(t){return W("SimpleDb","ADD",this.store.name,t,t),Rs(this.store.add(t))}get(t){return Rs(this.store.get(t)).next(e=>(e===void 0&&(e=null),W("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return W("SimpleDb","DELETE",this.store.name,t),Rs(this.store.delete(t))}count(){return W("SimpleDb","COUNT",this.store.name),Rs(this.store.count())}U(t,e){let i=this.options(t,e),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new V((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{let o=this.cursor(i),s=[];return this.W(o,(a,l)=>{s.push(l)}).next(()=>s)}}G(t,e){let i=this.store.getAll(t,e===null?void 0:e);return new V((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}j(t,e){W("SimpleDb","DELETE ALL",this.store.name);let i=this.options(t,e);i.H=!1;let r=this.cursor(i);return this.W(r,(o,s,a)=>a.delete())}J(t,e){let i;e?i=t:(i={},e=t);let r=this.cursor(i);return this.W(r,e)}Y(t){let e=this.cursor({});return new V((i,r)=>{e.onerror=o=>{let s=SC(o.target.error);r(s)},e.onsuccess=o=>{let s=o.target.result;s?t(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}W(t,e){let i=[];return new V((r,o)=>{t.onerror=s=>{o(s.target.error)},t.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let l=new Ow(a),u=e(a.primaryKey,a.value,l);if(u instanceof V){let d=u.catch(f=>(l.done(),V.reject(f)));i.push(d)}l.isDone?r():l.K===null?a.continue():a.continue(l.K)}}).next(()=>V.waitFor(i))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){let i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}};function Rs(n){return new V((t,e)=>{n.onsuccess=i=>{let r=i.target.result;t(r)},n.onerror=i=>{let r=SC(i.target.error);e(r)}})}var RM=!1;function SC(n){let t=Ro.S(Ec());if(t>=12.2&&t<13){let e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){let i=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RM||(RM=!0,setTimeout(()=>{throw i},0)),i}}return n}var Pw=class{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(t){W("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,()=>E(this,null,function*(){this.task=null;try{W("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(e){$o(e)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):yield Uo(e)}yield this.X(6e4)}))}},Nw=class{constructor(t,e){this.localStore=t,this.persistence=e}ee(t=50){return E(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.te(e,t))})}te(t,e){let i=new Set,r=e,o=!0;return V.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(s=>{if(s!==null&&!i.has(s))return W("IndexBackfiller",`Processing collection: ${s}`),this.ne(t,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>e-r)}ne(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next(()=>this.re(r,o)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>s.size)}))}re(t,e){let i=t;return e.changes.forEach((r,o)=>{let s=VA(o);DC(s,i)>0&&(i=s)}),new vi(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}};var ri=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function pd(n){return n==null}function qu(n){return n===0&&1/n==-1/0}function jA(n){return typeof n=="number"&&Number.isInteger(n)&&!qu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Mn(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=PM(t)),t=J$(n.get(e),t);return PM(t)}function J$(n,t){let e=t,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":e+="";break;case"":e+="";break;default:e+=o}}return e}function PM(n){return n+""}function ir(n){let t=n.length;if(ue(t>=2),t===2)return ue(n.charAt(0)===""&&n.charAt(1)===""),Ge.emptyPath();let e=t-2,i=[],r="";for(let o=0;o<t;){let s=n.indexOf("",o);switch((s<0||s>e)&&se(),n.charAt(s+1)){case"":let a=n.substring(o,s),l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=n.substring(o,s),r+="\0";break;case"":r+=n.substring(o,s+1);break;default:se()}o=s+2}return new Ge(i)}var NM=["userId","batchId"];function $p(n,t){return[n,Mn(t)]}function UA(n,t,e){return[n,Mn(t),e]}var Z$={},X$=["prefixPath","collectionGroup","readTime","documentId"],eG=["prefixPath","collectionGroup","documentId"],tG=["collectionGroup","readTime","prefixPath","documentId"],nG=["canonicalId","targetId"],iG=["targetId","path"],rG=["path","targetId"],oG=["collectionId","parent"],sG=["indexId","uid"],aG=["uid","sequenceNumber"],lG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cG=["indexId","uid","orderedDocumentKey"],uG=["userId","collectionPath","documentId"],dG=["userId","collectionPath","largestBatchId"],hG=["userId","collectionGroup","largestBatchId"],$A=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fG=[...$A,"documentOverlays"],GA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HA=GA,IC=[...HA,"indexConfiguration","indexState","indexEntries"],pG=IC,mG=[...IC,"globals"];var Wu=class extends Jp{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}};function Wt(n,t){let e=X(n);return Ro.F(e._e,t)}function FM(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Qs(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function zA(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var dt=class n{constructor(t,e){this.comparator=t,this.root=e||or.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,or.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,or.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new yl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new yl(this.root,t,this.comparator,!1)}getReverseIterator(){return new yl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new yl(this.root,t,this.comparator,!0)}},yl=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},or=class n{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new n(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();let t=this.left.check();if(t!==this.right.check())throw se();return t+(this.isRed()?0:1)}};or.EMPTY=null,or.RED=!0,or.BLACK=!1;or.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(t,e,i,r,o){return this}insert(t,e,i){return new or(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var st=class n{constructor(t){this.comparator=t,this.data=new dt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Xp(this.data.getIterator())}getIteratorFrom(t){return new Xp(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},Xp=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function cl(n){return n.hasNext()?n.getNext():void 0}var oi=class n{constructor(t){this.fields=t,t.sort(Pt.comparator)}static empty(){return new n([])}unionWith(t){let e=new st(Pt.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Cl(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var em=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function qA(){return typeof atob<"u"}var Ft=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new em("Invalid base64 string: "+o):o}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return De(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Ft.EMPTY_BYTE_STRING=new Ft("");var gG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(n){if(ue(!!n),typeof n=="string"){let t=0,e=gG.exec(n);if(ue(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ft(n.seconds),nanos:ft(n.nanos)}}function ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Po(n){return typeof n=="string"?Ft.fromBase64String(n):Ft.fromUint8Array(n)}function Hm(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function TC(n){let t=n.mapValue.fields.__previous_value__;return Hm(t)?TC(t):t}function Ku(n){let t=Vr(n.mapValue.fields.__local_write_time__.timestampValue);return new bt(t.seconds,t.nanos)}var Fw=class{constructor(t,e,i,r,o,s,a,l,u){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},No=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var Mo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gp={nullValue:"NULL_VALUE"};function Ls(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hm(n)?4:WA(n)?9007199254740991:zm(n)?10:11:se()}function lr(n,t){if(n===t)return!0;let e=Ls(n);if(e!==Ls(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ku(n).isEqual(Ku(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Vr(r.timestampValue),a=Vr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return Po(r.bytesValue).isEqual(Po(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return ft(r.geoPointValue.latitude)===ft(o.geoPointValue.latitude)&&ft(r.geoPointValue.longitude)===ft(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ft(r.integerValue)===ft(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=ft(r.doubleValue),a=ft(o.doubleValue);return s===a?qu(s)===qu(a):isNaN(s)&&isNaN(a)}return!1}(n,t);case 9:return Cl(n.arrayValue.values||[],t.arrayValue.values||[],lr);case 10:case 11:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(FM(s)!==FM(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!lr(s[l],a[l])))return!1;return!0}(n,t);default:return se()}}function Qu(n,t){return(n.values||[]).find(e=>lr(e,t))!==void 0}function Fo(n,t){if(n===t)return 0;let e=Ls(n),i=Ls(t);if(e!==i)return De(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,t.booleanValue);case 2:return function(o,s){let a=ft(o.integerValue||o.doubleValue),l=ft(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return kM(n.timestampValue,t.timestampValue);case 4:return kM(Ku(n),Ku(t));case 5:return De(n.stringValue,t.stringValue);case 6:return function(o,s){let a=Po(o),l=Po(s);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let d=De(a[u],l[u]);if(d!==0)return d}return De(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,s){let a=De(ft(o.latitude),ft(s.latitude));return a!==0?a:De(ft(o.longitude),ft(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return VM(n.arrayValue,t.arrayValue);case 10:return function(o,s){var a,l,u,d;let f=o.fields||{},m=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(l=m.value)===null||l===void 0?void 0:l.arrayValue,T=De(((u=y?.values)===null||u===void 0?void 0:u.length)||0,((d=D?.values)===null||d===void 0?void 0:d.length)||0);return T!==0?T:VM(y,D)}(n.mapValue,t.mapValue);case 11:return function(o,s){if(o===Mo.mapValue&&s===Mo.mapValue)return 0;if(o===Mo.mapValue)return 1;if(s===Mo.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){let m=De(l[f],d[f]);if(m!==0)return m;let y=Fo(a[l[f]],u[d[f]]);if(y!==0)return y}return De(l.length,d.length)}(n.mapValue,t.mapValue);default:throw se()}}function kM(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return De(n,t);let e=Vr(n),i=Vr(t),r=De(e.seconds,i.seconds);return r!==0?r:De(e.nanos,i.nanos)}function VM(n,t){let e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){let o=Fo(e[r],i[r]);if(o)return o}return De(e.length,i.length)}function Dl(n){return kw(n)}function kw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=Vr(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Po(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return ee.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let o of e.values||[])r?r=!1:i+=",",i+=kw(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${kw(e.fields[s])}`;return r+"}"}(n.mapValue):se()}function Bs(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Vw(n){return!!n&&"integerValue"in n}function Yu(n){return!!n&&"arrayValue"in n}function LM(n){return!!n&&"nullValue"in n}function BM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hp(n){return!!n&&"mapValue"in n}function zm(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function ju(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return Qs(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=ju(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ju(n.arrayValue.values[e]);return t}return Object.assign({},n)}function WA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var KA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function _G(n){return"nullValue"in n?Gp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Bs(No.empty(),ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?zm(n)?KA:{mapValue:{}}:se()}function yG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Bs(No.empty(),ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?KA:"mapValue"in n?zm(n)?{mapValue:{}}:Mo:se()}function jM(n,t){let e=Fo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function UM(n,t){let e=Fo(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}var wn=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Hp(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ju(e)}setAll(t){let e=Pt.emptyPath(),i={},r=[];t.forEach((s,a)=>{if(!e.isImmediateParentOf(a)){let l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=a.popLast()}s?i[a.lastSegment()]=ju(s):r.push(a.lastSegment())});let o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){let e=this.field(t.popLast());Hp(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return lr(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Hp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Qs(e,(r,o)=>t[r]=o);for(let r of i)delete t[r]}clone(){return new n(ju(this.value))}};function QA(n){let t=[];return Qs(n.fields,(e,i)=>{let r=new Pt([e]);if(Hp(i)){let o=QA(i.mapValue).fields;if(o.length===0)t.push(r);else for(let s of o)t.push(r.child(s))}else t.push(r)}),new oi(t)}var zt=class n{constructor(t,e,i,r,o,s,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new n(t,0,me.min(),me.min(),me.min(),wn.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,me.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,me.min(),me.min(),wn.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,me.min(),me.min(),wn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var cr=class{constructor(t,e){this.position=t,this.inclusive=e}};function $M(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let o=t[r],s=n.position[r];if(o.field.isKeyField()?i=ee.comparator(ee.fromName(s.referenceValue),e.key):i=Fo(s,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function GM(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!lr(n.position[e],t.position[e]))return!1;return!0}var js=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function vG(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var tm=class{},Ve=class n extends tm{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new jw(t,e,i):e==="array-contains"?new Gw(t,i):e==="in"?new nm(t,i):e==="not-in"?new Hw(t,i):e==="array-contains-any"?new zw(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Uw(t,i):new $w(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Fo(e,this.value)):e!==null&&Ls(this.value)===Ls(e)&&this.matchesComparison(Fo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},tt=class n extends tm{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new n(t,e)}matches(t){return Sl(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Sl(n){return n.op==="and"}function Lw(n){return n.op==="or"}function xC(n){return YA(n)&&Sl(n)}function YA(n){for(let t of n.filters)if(t instanceof tt)return!1;return!0}function Bw(n){if(n instanceof Ve)return n.field.canonicalString()+n.op.toString()+Dl(n.value);if(xC(n))return n.filters.map(t=>Bw(t)).join(",");{let t=n.filters.map(e=>Bw(e)).join(",");return`${n.op}(${t})`}}function JA(n,t){return n instanceof Ve?function(i,r){return r instanceof Ve&&i.op===r.op&&i.field.isEqual(r.field)&&lr(i.value,r.value)}(n,t):n instanceof tt?function(i,r){return r instanceof tt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&JA(s,r.filters[a]),!0):!1}(n,t):void se()}function ZA(n,t){let e=n.filters.concat(t);return tt.create(e,n.op)}function XA(n){return n instanceof Ve?function(e){return`${e.field.canonicalString()} ${e.op} ${Dl(e.value)}`}(n):n instanceof tt?function(e){return e.op.toString()+" {"+e.getFilters().map(XA).join(" ,")+"}"}(n):"Filter"}var jw=class extends Ve{constructor(t,e,i){super(t,e,i),this.key=ee.fromName(i.referenceValue)}matches(t){let e=ee.comparator(t.key,this.key);return this.matchesComparison(e)}},Uw=class extends Ve{constructor(t,e){super(t,"in",e),this.keys=eO("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},$w=class extends Ve{constructor(t,e){super(t,"not-in",e),this.keys=eO("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function eO(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>ee.fromName(i.referenceValue))}var Gw=class extends Ve{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return Yu(e)&&Qu(e.arrayValue,this.value)}},nm=class extends Ve{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&Qu(this.value.arrayValue,e)}},Hw=class extends Ve{constructor(t,e){super(t,"not-in",e)}matches(t){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!Qu(this.value.arrayValue,e)}},zw=class extends Ve{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!Yu(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Qu(this.value.arrayValue,i))}};var qw=class{constructor(t,e=null,i=[],r=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Ww(n,t=null,e=[],i=[],r=null,o=null,s=null){return new qw(n,t,e,i,r,o,s)}function Us(n){let t=X(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Bw(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),pd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Dl(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Dl(i)).join(",")),t.ue=e}return t.ue}function md(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!vG(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!JA(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!GM(n.startAt,t.startAt)&&GM(n.endAt,t.endAt)}function im(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function rm(n,t){return n.filters.filter(e=>e instanceof Ve&&e.field.isEqual(t))}function HM(n,t,e){let i=Gp,r=!0;for(let o of rm(n,t)){let s=Gp,a=!0;switch(o.op){case"<":case"<=":s=_G(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Gp}jM({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){let s=e.position[o];jM({value:i,inclusive:r},{value:s,inclusive:e.inclusive})<0&&(i=s,r=e.inclusive);break}}return{value:i,inclusive:r}}function zM(n,t,e){let i=Mo,r=!0;for(let o of rm(n,t)){let s=Mo,a=!0;switch(o.op){case">=":case">":s=yG(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Mo}UM({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){let s=e.position[o];UM({value:i,inclusive:r},{value:s,inclusive:e.inclusive})>0&&(i=s,r=e.inclusive);break}}return{value:i,inclusive:r}}var Li=class{constructor(t,e=null,i=[],r=[],o=null,s="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function tO(n,t,e,i,r,o,s,a){return new Li(n,t,e,i,r,o,s,a)}function jl(n){return new Li(n)}function qM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function MC(n){return n.collectionGroup!==null}function wl(n){let t=X(n);if(t.ce===null){t.ce=[];let e=new Set;for(let o of t.explicitOrderBy)t.ce.push(o),e.add(o.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new st(Pt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.ce.push(new js(o,i))}),e.has(Pt.keyField().canonicalString())||t.ce.push(new js(Pt.keyField(),i))}return t.ce}function An(n){let t=X(n);return t.le||(t.le=wG(t,wl(n))),t.le}function wG(n,t){if(n.limitType==="F")return Ww(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new js(r.field,o)});let e=n.endAt?new cr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new cr(n.startAt.position,n.startAt.inclusive):null;return Ww(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Kw(n,t){let e=n.filters.concat([t]);return new Li(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function om(n,t,e){return new Li(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function gd(n,t){return md(An(n),An(t))&&n.limitType===t.limitType}function nO(n){return`${Us(An(n))}|lt:${n.limitType}`}function pl(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>XA(r)).join(", ")}]`),pd(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Dl(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Dl(r)).join(",")),`Target(${i})`}(An(n))}; limitType=${n.limitType})`}function _d(n,t){return t.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ee.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(let o of wl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(s,a,l){let u=$M(s,a,l);return s.inclusive?u<=0:u<0}(i.startAt,wl(i),r)||i.endAt&&!function(s,a,l){let u=$M(s,a,l);return s.inclusive?u>=0:u>0}(i.endAt,wl(i),r))}(n,t)}function iO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rO(n){return(t,e)=>{let i=!1;for(let r of wl(n)){let o=bG(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function bG(n,t,e){let i=n.field.isKeyField()?ee.comparator(t.key,e.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Fo(l,u):se()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return se()}}var ur=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Qs(this.inner,(e,i)=>{for(let[r,o]of i)t(r,o)})}isEmpty(){return zA(this.inner)}size(){return this.innerSize}};var CG=new dt(ee.comparator);function Hn(){return CG}var oO=new dt(ee.comparator);function Lu(...n){let t=oO;for(let e of n)t=t.insert(e.key,e);return t}function sO(n){let t=oO;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function rr(){return Uu()}function aO(){return Uu()}function Uu(){return new ur(n=>n.toString(),(n,t)=>n.isEqual(t))}var EG=new dt(ee.comparator),DG=new st(ee.comparator);function Te(...n){let t=DG;for(let e of n)t=t.add(e);return t}var SG=new st(De);function AC(){return SG}function OC(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(t)?"-0":t}}function lO(n){return{integerValue:""+n}}function cO(n,t){return jA(t)?lO(t):OC(n,t)}var Il=class{constructor(){this._=void 0}};function IG(n,t,e){return n instanceof ko?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Hm(o)&&(o=TC(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(e,t):n instanceof Lr?dO(n,t):n instanceof Br?hO(n,t):function(r,o){let s=uO(r,o),a=WM(s)+WM(r.Pe);return Vw(s)&&Vw(r.Pe)?lO(a):OC(r.serializer,a)}(n,t)}function TG(n,t,e){return n instanceof Lr?dO(n,t):n instanceof Br?hO(n,t):e}function uO(n,t){return n instanceof Vo?function(i){return Vw(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}var ko=class extends Il{},Lr=class extends Il{constructor(t){super(),this.elements=t}};function dO(n,t){let e=fO(t);for(let i of n.elements)e.some(r=>lr(r,i))||e.push(i);return{arrayValue:{values:e}}}var Br=class extends Il{constructor(t){super(),this.elements=t}};function hO(n,t){let e=fO(t);for(let i of n.elements)e=e.filter(r=>!lr(r,i));return{arrayValue:{values:e}}}var Vo=class extends Il{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function WM(n){return ft(n.integerValue||n.doubleValue)}function fO(n){return Yu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var $s=class{constructor(t,e){this.field=t,this.transform=e}};function xG(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Lr&&r instanceof Lr||i instanceof Br&&r instanceof Br?Cl(i.elements,r.elements,lr):i instanceof Vo&&r instanceof Vo?lr(i.Pe,r.Pe):i instanceof ko&&r instanceof ko}(n.transform,t.transform)}var Qw=class{constructor(t,e){this.version=t,this.transformResults=e}},Tt=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function zp(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var Tl=class{};function pO(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Bo(n.key,Tt.none()):new Lo(n.key,n.data,Tt.none());{let e=n.data,i=wn.empty(),r=new st(Pt.comparator);for(let o of t.fields)if(!r.has(o)){let s=e.field(o);s===null&&o.length>1&&(o=o.popLast(),s=e.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Bi(n.key,i,new oi(r.toArray()),Tt.none())}}function MG(n,t,e){n instanceof Lo?function(r,o,s){let a=r.value.clone(),l=QM(r.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,t,e):n instanceof Bi?function(r,o,s){if(!zp(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=QM(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(mO(r)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,t,e):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,e)}function $u(n,t,e,i){return n instanceof Lo?function(o,s,a,l){if(!zp(o.precondition,s))return a;let u=o.value.clone(),d=YM(o.fieldTransforms,l,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,t,e,i):n instanceof Bi?function(o,s,a,l){if(!zp(o.precondition,s))return a;let u=YM(o.fieldTransforms,l,s),d=s.data;return d.setAll(mO(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,t,e,i):function(o,s,a){return zp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,t,e)}function AG(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),o=uO(i.transform,r||null);o!=null&&(e===null&&(e=wn.empty()),e.set(i.field,o))}return e||null}function KM(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Cl(i,r,(o,s)=>xG(o,s))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var Lo=class extends Tl{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Bi=class extends Tl{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function mO(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function QM(n,t,e){let i=new Map;ue(n.length===e.length);for(let r=0;r<e.length;r++){let o=n[r],s=o.transform,a=t.data.field(o.field);i.set(o.field,TG(s,a,e[r]))}return i}function YM(n,t,e){let i=new Map;for(let r of n){let o=r.transform,s=e.data.field(r.field);i.set(r.field,IG(o,s,t))}return i}var Bo=class extends Tl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ju=class extends Tl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Zu=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(t.key)&&MG(o,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=$u(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=$u(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=aO();return this.mutations.forEach(r=>{let o=t.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=e.has(r.key)?null:a;let l=pO(s,a);l!==null&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(me.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Te())}isEqual(t){return this.batchId===t.batchId&&Cl(this.mutations,t.mutations,(e,i)=>KM(e,i))&&Cl(this.baseMutations,t.baseMutations,(e,i)=>KM(e,i))}},Yw=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){ue(t.mutations.length===i.length);let r=function(){return EG}(),o=t.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new n(t,e,i,r)}};var Xu=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Jw=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var Ut,$e;function gO(n){switch(n){default:return se();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function _O(n){if(n===void 0)return Rt("GRPC error has no .code"),L.UNKNOWN;switch(n){case Ut.OK:return L.OK;case Ut.CANCELLED:return L.CANCELLED;case Ut.UNKNOWN:return L.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return L.INTERNAL;case Ut.UNAVAILABLE:return L.UNAVAILABLE;case Ut.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ut.NOT_FOUND:return L.NOT_FOUND;case Ut.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ut.ABORTED:return L.ABORTED;case Ut.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ut.DATA_LOSS:return L.DATA_LOSS;default:return se()}}($e=Ut||(Ut={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";var JM=null;function yO(){return new TextEncoder}var OG=new Do([4294967295,4294967295],0);function ZM(n){let t=yO().encode(n),e=new hw;return e.update(t),new Uint8Array(e.digest())}function XM(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Do([e,i],0),new Do([r,o],0)]}var Zw=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new ks(`Invalid padding: ${e}`);if(i<0)throw new ks(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ks(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new ks(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Do.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(Do.fromNumber(i)));return r.compare(OG)===1&&(r=new Do([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=ZM(t),[i,r]=XM(e);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new n(o,r,e);return i.forEach(a=>s.insert(a)),s}insert(t){if(this.Ie===0)return;let e=ZM(t),[i,r]=XM(e);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},ks=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ed=class n{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,td.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(me.min(),r,new dt(De),Hn(),Te())}},td=class n{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,Te(),Te(),Te())}};var bl=class{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}},sm=class{constructor(t,e){this.targetId=t,this.me=e}},am=class{constructor(t,e,i=Ft.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},lm=class{constructor(){this.fe=0,this.ge=tA(),this.pe=Ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Te(),e=Te(),i=Te();return this.ge.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:se()}}),new td(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=tA()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Xw=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=Hn(),this.qe=eA(),this.Qe=new dt(De)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:se()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){let e=t.targetId,i=t.me.count,r=this.Je(e);if(r){let o=r.target;if(im(o))if(i===0){let s=new ee(o.path);this.Ue(e,s,zt.newNoDocument(s,me.min()))}else ue(i===1);else{let s=this.Ye(e);if(s!==i){let a=this.Ze(t),l=a?this.Xe(a,t,s):1;if(l!==0){this.je(e);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,u)}JM?.et(function(d,f,m,y,D){var T,R,q,te,$,ae;let ge={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},pe=f.unchangedNames;return pe&&(ge.bloomFilter={applied:D===0,hashCount:(T=pe?.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(te=(q=(R=pe?.bits)===null||R===void 0?void 0:R.bitmap)===null||q===void 0?void 0:q.length)!==null&&te!==void 0?te:0,padding:(ae=($=pe?.bits)===null||$===void 0?void 0:$.padding)!==null&&ae!==void 0?ae:0,mightContain:M=>{var C;return(C=y?.mightContain(M))!==null&&C!==void 0&&C}}),ge}(s,t.me,this.Le.tt(),a,l))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e,s,a;try{s=Po(i).toUint8Array()}catch(l){if(l instanceof em)return yi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Zw(s,r,o)}catch(l){return yi(l instanceof ks?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,o,null),r++)}),r}rt(t){let e=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&im(a.target)){let l=new ee(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,zt.newNoDocument(l,t))}o.be&&(e.set(s,o.ve()),o.Ce())}});let i=Te();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(t));let r=new ed(t,e,this.Qe,this.ke,i);return this.ke=Hn(),this.qe=eA(),this.Qe=new dt(De),r}$e(t,e){if(!this.ze(t))return;let i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new lm,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new st(De),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||W("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new lm),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function eA(){return new dt(ee.comparator)}function tA(){return new dt(ee.comparator)}var RG={asc:"ASCENDING",desc:"DESCENDING"},PG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NG={and:"AND",or:"OR"},eb=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function tb(n,t){return n.useProto3Json||pd(t)?t:{value:t}}function xl(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function vO(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function FG(n,t){return xl(n,t.toTimestamp())}function Nt(n){return ue(!!n),me.fromTimestamp(function(e){let i=Vr(e);return new bt(i.seconds,i.nanos)}(n))}function RC(n,t){return nb(n,t).canonicalString()}function nb(n,t){let e=function(r){return new Ge(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function wO(n){let t=Ge.fromString(n);return ue(AO(t)),t}function nd(n,t){return RC(n.databaseId,t.path)}function sr(n,t){let e=wO(t);if(e.get(1)!==n.databaseId.projectId)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new ee(EO(e))}function bO(n,t){return RC(n.databaseId,t)}function CO(n){let t=wO(n);return t.length===4?Ge.emptyPath():EO(t)}function ib(n){return new Ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EO(n){return ue(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function nA(n,t,e){return{name:nd(n,t),fields:e.value.mapValue.fields}}function DO(n,t,e){let i=sr(n,t.name),r=Nt(t.updateTime),o=t.createTime?Nt(t.createTime):me.min(),s=new wn({mapValue:{fields:t.fields}}),a=zt.newFoundDocument(i,r,o,s);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function kG(n,t){return"found"in t?function(i,r){ue(!!r.found),r.found.name,r.found.updateTime;let o=sr(i,r.found.name),s=Nt(r.found.updateTime),a=r.found.createTime?Nt(r.found.createTime):me.min(),l=new wn({mapValue:{fields:r.found.fields}});return zt.newFoundDocument(o,s,a,l)}(n,t):"missing"in t?function(i,r){ue(!!r.missing),ue(!!r.readTime);let o=sr(i,r.missing),s=Nt(r.readTime);return zt.newNoDocument(o,s)}(n,t):se()}function VG(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:se()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(ue(d===void 0||typeof d=="string"),Ft.fromBase64String(d||"")):(ue(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ft.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(u){let d=u.code===void 0?L.UNKNOWN:_O(u.code);return new z(d,u.message||"")}(s);e=new am(i,r,o,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=sr(n,i.document.name),o=Nt(i.document.updateTime),s=i.document.createTime?Nt(i.document.createTime):me.min(),a=new wn({mapValue:{fields:i.document.fields}}),l=zt.newFoundDocument(r,o,s,a),u=i.targetIds||[],d=i.removedTargetIds||[];e=new bl(u,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=sr(n,i.document),o=i.readTime?Nt(i.readTime):me.min(),s=zt.newNoDocument(r,o),a=i.removedTargetIds||[];e=new bl([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=sr(n,i.document),o=i.removedTargetIds||[];e=new bl([],o,r,null)}else{if(!("filter"in t))return se();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new Jw(r,o),a=i.targetId;e=new sm(a,s)}}return e}function id(n,t){let e;if(t instanceof Lo)e={update:nA(n,t.key,t.value)};else if(t instanceof Bo)e={delete:nd(n,t.key)};else if(t instanceof Bi)e={update:nA(n,t.key,t.data),updateMask:GG(t.fieldMask)};else{if(!(t instanceof Ju))return se();e={verify:nd(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof ko)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Lr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Br)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vo)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw se()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:FG(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:se()}(n,t.precondition)),e}function rb(n,t){let e=t.currentDocument?function(o){return o.updateTime!==void 0?Tt.updateTime(Nt(o.updateTime)):o.exists!==void 0?Tt.exists(o.exists):Tt.none()}(t.currentDocument):Tt.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,a){let l=null;if("setToServerValue"in a)ue(a.setToServerValue==="REQUEST_TIME"),l=new ko;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];l=new Lr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];l=new Br(d)}else"increment"in a?l=new Vo(s,a.increment):se();let u=Pt.fromServerFormat(a.fieldPath);return new $s(u,l)}(n,r)):[];if(t.update){t.update.name;let r=sr(n,t.update.name),o=new wn({mapValue:{fields:t.update.fields}});if(t.updateMask){let s=function(l){let u=l.fieldPaths||[];return new oi(u.map(d=>Pt.fromServerFormat(d)))}(t.updateMask);return new Bi(r,o,s,e,i)}return new Lo(r,o,e,i)}if(t.delete){let r=sr(n,t.delete);return new Bo(r,e)}if(t.verify){let r=sr(n,t.verify);return new Ju(r,e)}return se()}function LG(n,t){return n&&n.length>0?(ue(t!==void 0),n.map(e=>function(r,o){let s=r.updateTime?Nt(r.updateTime):Nt(o);return s.isEqual(me.min())&&(s=Nt(o)),new Qw(s,r.transformResults||[])}(e,t))):[]}function SO(n,t){return{documents:[bO(n,t.path)]}}function IO(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=bO(n,r);let o=function(u){if(u.length!==0)return MO(tt.create(u,"and"))}(t.filters);o&&(e.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:ml(m.field),direction:jG(m.dir)}}(d))}(t.orderBy);s&&(e.structuredQuery.orderBy=s);let a=tb(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:e,parent:r}}function TO(n){let t=CO(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){ue(i===1);let d=e.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let o=[];e.where&&(o=function(f){let m=xO(f);return m instanceof tt&&xC(m)?m.getFilters():[m]}(e.where));let s=[];e.orderBy&&(s=function(f){return f.map(m=>function(D){return new js(gl(D.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(e.orderBy));let a=null;e.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,pd(m)?null:m}(e.limit));let l=null;e.startAt&&(l=function(f){let m=!!f.before,y=f.values||[];return new cr(y,m)}(e.startAt));let u=null;return e.endAt&&(u=function(f){let m=!f.before,y=f.values||[];return new cr(y,m)}(e.endAt)),tO(t,r,s,o,a,"F",l,u)}function BG(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function xO(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=gl(e.unaryFilter.field);return Ve.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=gl(e.unaryFilter.field);return Ve.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=gl(e.unaryFilter.field);return Ve.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=gl(e.unaryFilter.field);return Ve.create(s,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(n):n.fieldFilter!==void 0?function(e){return Ve.create(gl(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return tt.create(e.compositeFilter.filters.map(i=>xO(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return se()}}(e.compositeFilter.op))}(n):se()}function jG(n){return RG[n]}function UG(n){return PG[n]}function $G(n){return NG[n]}function ml(n){return{fieldPath:n.canonicalString()}}function gl(n){return Pt.fromServerFormat(n.fieldPath)}function MO(n){return n instanceof Ve?function(e){if(e.op==="=="){if(BM(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NAN"}};if(LM(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(BM(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NOT_NAN"}};if(LM(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(e.field),op:UG(e.op),value:e.value}}}(n):n instanceof tt?function(e){let i=e.getFilters().map(r=>MO(r));return i.length===1?i[0]:{compositeFilter:{op:$G(e.op),filters:i}}}(n):se()}function GG(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function AO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ml=class n{constructor(t,e,i,r,o=me.min(),s=me.min(),a=Ft.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var cm=class{constructor(t){this.ct=t}};function HG(n,t){let e;if(t.document)e=DO(n.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let i=ee.fromSegments(t.noDocument.path),r=Hs(t.noDocument.readTime);e=zt.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return se();{let i=ee.fromSegments(t.unknownDocument.path),r=Hs(t.unknownDocument.version);e=zt.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(r){let o=new bt(r[0],r[1]);return me.fromTimestamp(o)}(t.readTime)),e}function iA(n,t){let e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:um(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(o,s){return{name:nd(o,s.key),fields:s.data.value.mapValue.fields,updateTime:xl(o,s.version.toTimestamp()),createTime:xl(o,s.createTime.toTimestamp())}}(n.ct,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Gs(t.version)};else{if(!t.isUnknownDocument())return se();i.unknownDocument={path:e.path.toArray(),version:Gs(t.version)}}return i}function um(n){let t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Gs(n){let t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Hs(n){let t=new bt(n.seconds,n.nanoseconds);return me.fromTimestamp(t)}function Ps(n,t){let e=(t.baseMutations||[]).map(o=>rb(n.ct,o));for(let o=0;o<t.mutations.length-1;++o){let s=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){let a=t.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}let i=t.mutations.map(o=>rb(n.ct,o)),r=bt.fromMillis(t.localWriteTimeMs);return new Zu(t.batchId,r,e,i)}function Bu(n){let t=Hs(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?Hs(n.lastLimboFreeSnapshotVersion):me.min(),i;return i=function(o){return o.documents!==void 0}(n.query)?function(o){return ue(o.documents.length===1),An(jl(CO(o.documents[0])))}(n.query):function(o){return An(TO(o))}(n.query),new Ml(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Ft.fromBase64String(n.resumeToken))}function OO(n,t){let e=Gs(t.snapshotVersion),i=Gs(t.lastLimboFreeSnapshotVersion),r;r=im(t.target)?SO(n.ct,t.target):IO(n.ct,t.target)._t;let o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Us(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function PC(n){let t=TO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?om(t,t.limit,"L"):t}function vw(n,t){return new Xu(t.largestBatchId,rb(n.ct,t.overlayMutation))}function rA(n,t){let e=t.path.lastSegment();return[n,Mn(t.path.popLast()),e]}function oA(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:Gs(i.readTime),documentKey:Mn(i.documentKey.path),largestBatchId:i.largestBatchId}}var ob=class{getBundleMetadata(t,e){return sA(t).get(e).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:Hs(o.createTime),version:o.version}}(i)})}saveBundleMetadata(t,e){return sA(t).put(function(r){return{bundleId:r.id,createTime:Gs(Nt(r.createTime)),version:r.version}}(e))}getNamedQuery(t,e){return aA(t).get(e).next(i=>{if(i)return function(o){return{name:o.name,query:PC(o.bundledQuery),readTime:Hs(o.readTime)}}(i)})}saveNamedQuery(t,e){return aA(t).put(function(r){return{name:r.name,readTime:Gs(Nt(r.readTime)),bundledQuery:r.bundledQuery}}(e))}};function sA(n){return Wt(n,"bundles")}function aA(n){return Wt(n,"namedQueries")}var dm=class n{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){let i=e.uid||"";return new n(t,i)}getOverlay(t,e){return Nu(t).get(rA(this.userId,e)).next(i=>i?vw(this.serializer,i):null)}getOverlays(t,e){let i=rr();return V.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){let r=[];return i.forEach((o,s)=>{let a=new Xu(e,s);r.push(this.ht(t,a))}),V.waitFor(r)}removeOverlaysForBatchId(t,e,i){let r=new Set;e.forEach(s=>r.add(Mn(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Nu(t).j("collectionPathOverlayIndex",a))}),V.waitFor(o)}getOverlaysForCollection(t,e,i){let r=rr(),o=Mn(e),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Nu(t).U("collectionPathOverlayIndex",s).next(a=>{for(let l of a){let u=vw(this.serializer,l);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(t,e,i,r){let o=rr(),s,a=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Nu(t).J({index:"collectionGroupOverlayIndex",range:a},(l,u,d)=>{let f=vw(this.serializer,u);o.size()<r||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(t,e){return Nu(t).put(function(r,o,s){let[a,l,u]=rA(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:id(r.ct,s.mutation)}}(this.serializer,this.userId,e))}};function Nu(n){return Wt(n,"documentOverlays")}var sb=class{Pt(t){return Wt(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(e=>{let i=e?.value;return i?Ft.fromUint8Array(i):Ft.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.Pt(t).put({name:"sessionToken",value:e.toUint8Array()})}};var Fr=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(ft(t.integerValue));else if("doubleValue"in t){let i=ft(t.doubleValue);isNaN(i)?this.dt(e,13):(this.dt(e,15),qu(i)?e.At(0):e.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(e,20),typeof i=="string"&&(i=Vr(i)),e.Rt(`${i.seconds||""}`),e.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(Po(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.dt(e,45),e.At(i.latitude||0),e.At(i.longitude||0)}else"mapValue"in t?WA(t)?this.dt(e,Number.MAX_SAFE_INTEGER):zm(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):se()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){let i=t.fields||{};this.dt(e,55);for(let r of Object.keys(i))this.Vt(r,e),this.Tt(i[r],e)}wt(t,e){var i,r;let o=t.fields||{};this.dt(e,53);let s="value",a=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(e,15),e.At(ft(a)),this.Vt(s,e),this.Tt(o[s],e)}bt(t,e){let i=t.values||[];this.dt(e,50);for(let r of i)this.Tt(r,e)}yt(t,e){this.dt(e,37),ee.fromName(t).path.forEach(i=>{this.dt(e,60),this.Dt(i,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};Fr.vt=new Fr;function zG(n){if(n===0)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function lA(n){let t=64-function(i){let r=0;for(let o=0;o<8;++o){let s=zG(255&i[o]);if(r+=s,s!==8)break}return r}(n);return Math.ceil(t/8)}var ab=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){let e=t[Symbol.iterator](),i=e.next();for(;!i.done;)this.Ft(i.value),i=e.next();this.Mt()}xt(t){let e=t[Symbol.iterator](),i=e.next();for(;!i.done;)this.Ot(i.value),i=e.next();this.Nt()}Lt(t){for(let e of t){let i=e.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=e.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(t){for(let e of t){let i=e.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{let r=e.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(t){let e=this.qt(t),i=lA(e);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Kt(t){let e=this.qt(t),i=lA(e);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){let e=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(t),i=(128&e[0])!=0;e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ft(t){let e=255&t;e===0?(this.Ut(0),this.Ut(255)):e===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ot(t){let e=255&t;e===0?(this.Gt(0),this.Gt(255)):e===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){let e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},lb=class{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}},cb=class{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}},Ns=class{constructor(){this.jt=new ab,this.Ht=new lb(this.jt),this.Jt=new cb(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return t===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Fs=class n{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Zt(){let t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new n(this.indexId,this.documentKey,this.arrayValue,i)}};function So(n,t){let e=n.indexId-t.indexId;return e!==0?e:(e=cA(n.arrayValue,t.arrayValue),e!==0?e:(e=cA(n.directionalValue,t.directionalValue),e!==0?e:ee.comparator(n.documentKey,t.documentKey)))}function cA(n,t){for(let e=0;e<n.length&&e<t.length;++e){let i=n[e]-t[e];if(i!==0)return i}return n.length-t.length}var hm=class{constructor(t){this.Xt=new st((e,i)=>Pt.comparator(e.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(let e of t.filters){let i=e;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(t){if(ue(t.collectionGroup===this.collectionId),this.nn)return!1;let e=Aw(t);if(e!==void 0&&!this.sn(e))return!1;let i=Os(t),r=new Set,o=0,s=0;for(;o<i.length&&this.sn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let l=i[o];if(!this.on(a,l)||!this._n(this.en[s++],l))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let t=new st(Pt.comparator),e=[];for(let i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new vl(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new vl(i.field,0))}for(let i of this.en)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new vl(i.field,i.dir==="asc"?0:1)));return new El(El.UNKNOWN_ID,this.collectionId,e,zu.empty())}sn(t){for(let e of this.tn)if(this.on(e,t))return!0;return!1}on(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;let i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}_n(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}};function RO(n){var t,e;if(ue(n instanceof Ve||n instanceof tt),n instanceof Ve){if(n instanceof nm){let r=((e=(t=n.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(o=>Ve.create(n.field,"==",o)))||[];return tt.create(r,"or")}return n}let i=n.filters.map(r=>RO(r));return tt.create(i,n.op)}function qG(n){if(n.getFilters().length===0)return[];let t=hb(RO(n));return ue(PO(t)),ub(t)||db(t)?[t]:t.getFilters()}function ub(n){return n instanceof Ve}function db(n){return n instanceof tt&&xC(n)}function PO(n){return ub(n)||db(n)||function(e){if(e instanceof tt&&Lw(e)){for(let i of e.getFilters())if(!ub(i)&&!db(i))return!1;return!0}return!1}(n)}function hb(n){if(ue(n instanceof Ve||n instanceof tt),n instanceof Ve)return n;if(n.filters.length===1)return hb(n.filters[0]);let t=n.filters.map(i=>hb(i)),e=tt.create(t,n.op);return e=fm(e),PO(e)?e:(ue(e instanceof tt),ue(Sl(e)),ue(e.filters.length>1),e.filters.reduce((i,r)=>NC(i,r)))}function NC(n,t){let e;return ue(n instanceof Ve||n instanceof tt),ue(t instanceof Ve||t instanceof tt),e=n instanceof Ve?t instanceof Ve?function(r,o){return tt.create([r,o],"and")}(n,t):uA(n,t):t instanceof Ve?uA(t,n):function(r,o){if(ue(r.filters.length>0&&o.filters.length>0),Sl(r)&&Sl(o))return ZA(r,o.getFilters());let s=Lw(r)?r:o,a=Lw(r)?o:r,l=s.filters.map(u=>NC(u,a));return tt.create(l,"or")}(n,t),fm(e)}function uA(n,t){if(Sl(t))return ZA(t,n.getFilters());{let e=t.filters.map(i=>NC(n,i));return tt.create(e,"or")}}function fm(n){if(ue(n instanceof Ve||n instanceof tt),n instanceof Ve)return n;let t=n.getFilters();if(t.length===1)return fm(t[0]);if(YA(n))return n;let e=t.map(r=>fm(r)),i=[];return e.forEach(r=>{r instanceof Ve?i.push(r):r instanceof tt&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:tt.create(i,n.op)}var fb=class{constructor(){this.un=new rd}addToCollectionParentIndex(t,e){return this.un.add(e),V.resolve()}getCollectionParents(t,e){return V.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return V.resolve()}deleteFieldIndex(t,e){return V.resolve()}deleteAllFieldIndexes(t){return V.resolve()}createTargetIndexes(t,e){return V.resolve()}getDocumentsMatchingTarget(t,e){return V.resolve(null)}getIndexType(t,e){return V.resolve(0)}getFieldIndexes(t,e){return V.resolve([])}getNextCollectionGroupToUpdate(t){return V.resolve(null)}getMinOffset(t,e){return V.resolve(vi.min())}getMinOffsetFromCollectionGroup(t,e){return V.resolve(vi.min())}updateCollectionGroup(t,e,i){return V.resolve()}updateIndexEntries(t,e){return V.resolve()}},rd=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new st(Ge.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new st(Ge.comparator)).toArray()}};var Lp=new Uint8Array(0),pb=class{constructor(t,e){this.databaseId=e,this.cn=new rd,this.ln=new ur(i=>Us(i),(i,r)=>md(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.cn.has(e)){let i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.cn.add(e)});let o={collectionId:i,parent:Mn(r)};return dA(t).put(o)}return V.resolve()}getCollectionParents(t,e){let i=[],r=IDBKeyRange.bound([e,""],[FA(e),""],!1,!0);return dA(t).U(r).next(o=>{for(let s of o){if(s.collectionId!==e)break;i.push(ir(s.parent))}return i})}addFieldIndex(t,e){let i=Fu(t),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(e);delete r.indexId;let o=i.add(r);if(e.indexState){let s=dl(t);return o.next(a=>{s.put(oA(a,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return o.next()}deleteFieldIndex(t,e){let i=Fu(t),r=dl(t),o=ul(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let e=Fu(t),i=ul(t),r=dl(t);return e.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(t,e){return V.forEach(this.hn(e),i=>this.getIndexType(t,i).next(r=>{if(r===0||r===1){let o=new hm(i).an();if(o!=null)return this.addFieldIndex(t,o)}}))}getDocumentsMatchingTarget(t,e){let i=ul(t),r=!0,o=new Map;return V.forEach(this.hn(e),s=>this.Pn(t,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=Te(),a=[];return V.forEach(o,(l,u)=>{W("IndexedDbIndexManager",`Using index ${function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map(ae=>`${ae.fieldPath}:${ae.kind}`).join(",")}`}(l)} to execute ${Us(e)}`);let d=function($,ae){let ge=Aw(ae);if(ge===void 0)return null;for(let pe of rm($,ge.fieldPath))switch(pe.op){case"array-contains-any":return pe.value.arrayValue.values||[];case"array-contains":return[pe.value]}return null}(u,l),f=function($,ae){let ge=new Map;for(let pe of Os(ae))for(let M of rm($,pe.fieldPath))switch(M.op){case"==":case"in":ge.set(pe.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return ge.set(pe.fieldPath.canonicalString(),M.value),Array.from(ge.values())}return null}(u,l),m=function($,ae){let ge=[],pe=!0;for(let M of Os(ae)){let C=M.kind===0?HM($,M.fieldPath,$.startAt):zM($,M.fieldPath,$.startAt);ge.push(C.value),pe&&(pe=C.inclusive)}return new cr(ge,pe)}(u,l),y=function($,ae){let ge=[],pe=!0;for(let M of Os(ae)){let C=M.kind===0?zM($,M.fieldPath,$.endAt):HM($,M.fieldPath,$.endAt);ge.push(C.value),pe&&(pe=C.inclusive)}return new cr(ge,pe)}(u,l),D=this.In(l,u,m),T=this.In(l,u,y),R=this.Tn(l,u,f),q=this.En(l.indexId,d,D,m.inclusive,T,y.inclusive,R);return V.forEach(q,te=>i.G(te,e.limit).next($=>{$.forEach(ae=>{let ge=ee.fromSegments(ae.documentKey);s.has(ge)||(s=s.add(ge),a.push(ge))})}))}).next(()=>a)}return V.resolve(null)})}hn(t){let e=this.ln.get(t);return e||(t.filters.length===0?e=[t]:e=qG(tt.create(t.filters,"and")).map(i=>Ww(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,e),e)}En(t,e,i,r,o,s,a){let l=(e!=null?e.length:1)*Math.max(i.length,o.length),u=l/(e!=null?e.length:1),d=[];for(let f=0;f<l;++f){let m=e?this.dn(e[f/u]):Lp,y=this.An(t,m,i[f%u],r),D=this.Rn(t,m,o[f%u],s),T=a.map(R=>this.An(t,m,R,!0));d.push(...this.createRange(y,D,T))}return d}An(t,e,i,r){let o=new Fs(t,ee.empty(),e,i);return r?o:o.Zt()}Rn(t,e,i,r){let o=new Fs(t,ee.empty(),e,i);return r?o.Zt():o}Pn(t,e){let i=new hm(e),r=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(o=>{let s=null;for(let a of o)i.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(t,e){let i=2,r=this.hn(e);return V.forEach(r,o=>this.Pn(t,o).next(s=>{s?i!==0&&s.fields.length<function(l){let u=new st(Pt.comparator),d=!1;for(let f of l.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(let f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(e)&&r.length>1&&i===2?1:i)}Vn(t,e){let i=new Ns;for(let r of Os(t)){let o=e.data.field(r.fieldPath);if(o==null)return null;let s=i.Yt(r.kind);Fr.vt.It(o,s)}return i.zt()}dn(t){let e=new Ns;return Fr.vt.It(t,e.Yt(0)),e.zt()}mn(t,e){let i=new Ns;return Fr.vt.It(Bs(this.databaseId,e),i.Yt(function(o){let s=Os(o);return s.length===0?0:s[s.length-1].kind}(t))),i.zt()}Tn(t,e,i){if(i===null)return[];let r=[];r.push(new Ns);let o=0;for(let s of Os(t)){let a=i[o++];for(let l of r)if(this.fn(e,s.fieldPath)&&Yu(a))r=this.gn(r,s,a);else{let u=l.Yt(s.kind);Fr.vt.It(a,u)}}return this.pn(r)}In(t,e,i){return this.Tn(t,e,i.position)}pn(t){let e=[];for(let i=0;i<t.length;++i)e[i]=t[i].zt();return e}gn(t,e,i){let r=[...t],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let l=new Ns;l.seed(a.zt()),Fr.vt.It(s,l.Yt(e.kind)),o.push(l)}return o}fn(t,e){return!!t.filters.find(i=>i instanceof Ve&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,e){let i=Fu(t),r=dl(t);return(e?i.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.U()).next(o=>{let s=[];return V.forEach(o,a=>r.get([a.indexId,this.uid]).next(l=>{s.push(function(d,f){let m=f?new zu(f.sequenceNumber,new vi(Hs(f.readTime),new ee(ir(f.documentKey)),f.largestBatchId)):zu.empty(),y=d.fields.map(([D,T])=>new vl(Pt.fromServerFormat(D),T));return new El(d.indexId,d.collectionGroup,y,m)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:De(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){let r=Fu(t),o=dl(t);return this.yn(t).next(s=>r.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>V.forEach(a,l=>o.put(oA(l.indexId,this.uid,s,i)))))}updateIndexEntries(t,e){let i=new Map;return V.forEach(e,(r,o)=>{let s=i.get(r.collectionGroup);return(s?V.resolve(s):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),V.forEach(a,l=>this.wn(t,r,l).next(u=>{let d=this.Sn(o,l);return u.isEqual(d)?V.resolve():this.bn(t,o,l,u,d)}))))})}Dn(t,e,i,r){return ul(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,e.key),documentKey:e.key.path.toArray()})}vn(t,e,i,r){return ul(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,e.key),e.key.path.toArray()])}wn(t,e,i){let r=ul(t),o=new st(So);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,e)])},(s,a)=>{o=o.add(new Fs(i.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(t,e){let i=new st(So),r=this.Vn(e,t);if(r==null)return i;let o=Aw(e);if(o!=null){let s=t.data.field(o.fieldPath);if(Yu(s))for(let a of s.arrayValue.values||[])i=i.add(new Fs(e.indexId,t.key,this.dn(a),r))}else i=i.add(new Fs(e.indexId,t.key,Lp,r));return i}bn(t,e,i,r,o){W("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);let s=[];return function(l,u,d,f,m){let y=l.getIterator(),D=u.getIterator(),T=cl(y),R=cl(D);for(;T||R;){let q=!1,te=!1;if(T&&R){let $=d(T,R);$<0?te=!0:$>0&&(q=!0)}else T!=null?te=!0:q=!0;q?(f(R),R=cl(D)):te?(m(T),T=cl(y)):(T=cl(y),R=cl(D))}}(r,o,So,a=>{s.push(this.Dn(t,e,i,a))},a=>{s.push(this.vn(t,e,i,a))}),V.waitFor(s)}yn(t){let e=1;return dl(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((s,a)=>So(s,a)).filter((s,a,l)=>!a||So(s,l[a-1])!==0);let r=[];r.push(t);for(let s of i){let a=So(s,t),l=So(s,e);if(a===0)r[0]=t.Zt();else if(a>0&&l<0)r.push(s),r.push(s.Zt());else if(l>0)break}r.push(e);let o=[];for(let s=0;s<r.length;s+=2){if(this.Cn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Lp,[]],l=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Lp,[]];o.push(IDBKeyRange.bound(a,l))}return o}Cn(t,e){return So(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(hA)}getMinOffset(t,e){return V.mapArray(this.hn(e),i=>this.Pn(t,i).next(r=>r||se())).next(hA)}};function dA(n){return Wt(n,"collectionParents")}function ul(n){return Wt(n,"indexEntries")}function Fu(n){return Wt(n,"indexConfiguration")}function dl(n){return Wt(n,"indexState")}function hA(n){ue(n.length!==0);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){let r=n[i].indexState.offset;DC(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new vi(t.readTime,t.documentKey,e)}var fA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_i=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function NO(n,t,e){let i=n.store("mutations"),r=n.store("documentMutations"),o=[],s=IDBKeyRange.only(e.batchId),a=0,l=i.J({range:s},(d,f,m)=>(a++,m.delete()));o.push(l.next(()=>{ue(a===1)}));let u=[];for(let d of e.mutations){let f=UA(t,d.key.path,e.batchId);o.push(r.delete(f)),u.push(d.key)}return V.waitFor(o).next(()=>u)}function pm(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw se();t=n.noDocument}return JSON.stringify(t).length}_i.DEFAULT_COLLECTION_PERCENTILE=10,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_i.DEFAULT=new _i(41943040,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_i.DISABLED=new _i(-1,0,0);var mm=class n{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(t,e,i,r){ue(t.uid!=="");let o=t.isAuthenticated()?t.uid:"";return new n(o,e,i,r)}checkEmpty(t){let e=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Io(t).J({index:"userMutationsIndex",range:i},(r,o,s)=>{e=!1,s.done()}).next(()=>e)}addMutationBatch(t,e,i,r){let o=_l(t),s=Io(t);return s.add({}).next(a=>{ue(typeof a=="number");let l=new Zu(a,e,i,r),u=function(y,D,T){let R=T.baseMutations.map(te=>id(y.ct,te)),q=T.mutations.map(te=>id(y.ct,te));return{userId:D,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:R,mutations:q}}(this.serializer,this.userId,l),d=[],f=new st((m,y)=>De(m.canonicalString(),y.canonicalString()));for(let m of r){let y=UA(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),d.push(s.put(u)),d.push(o.put(y,Z$))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(t,e){return Io(t).get(e).next(i=>i?(ue(i.userId===this.userId),Ps(this.serializer,i)):null)}Mn(t,e){return this.Fn[e]?V.resolve(this.Fn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){let r=i.keys();return this.Fn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Io(t).J({index:"userMutationsIndex",range:r},(s,a,l)=>{a.userId===this.userId&&(ue(a.batchId>=i),o=Ps(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){let e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Io(t).J({index:"userMutationsIndex",range:e,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(t){let e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Io(t).U("userMutationsIndex",e).next(i=>i.map(r=>Ps(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){let i=$p(this.userId,e.path),r=IDBKeyRange.lowerBound(i),o=[];return _l(t).J({range:r},(s,a,l)=>{let[u,d,f]=s,m=ir(d);if(u===this.userId&&e.path.isEqual(m))return Io(t).get(f).next(y=>{if(!y)throw se();ue(y.userId===this.userId),o.push(Ps(this.serializer,y))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new st(De),r=[];return e.forEach(o=>{let s=$p(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=_l(t).J({range:a},(u,d,f)=>{let[m,y,D]=u,T=ir(y);m===this.userId&&o.path.isEqual(T)?i=i.add(D):f.done()});r.push(l)}),V.waitFor(r).next(()=>this.xn(t,i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,o=$p(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new st(De);return _l(t).J({range:s},(l,u,d)=>{let[f,m,y]=l,D=ir(m);f===this.userId&&i.isPrefixOf(D)?D.length===r&&(a=a.add(y)):d.done()}).next(()=>this.xn(t,a))}xn(t,e){let i=[],r=[];return e.forEach(o=>{r.push(Io(t).get(o).next(s=>{if(s===null)throw se();ue(s.userId===this.userId),i.push(Ps(this.serializer,s))}))}),V.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return NO(t._e,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.On(e.batchId)}),V.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return V.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return _l(t).J({range:i},(o,s,a)=>{if(o[0]===this.userId){let l=ir(o[1]);r.push(l)}else a.done()}).next(()=>{ue(r.length===0)})})}containsKey(t,e){return FO(t,this.userId,e)}Nn(t){return kO(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function FO(n,t,e){let i=$p(t,e.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return _l(n).J({range:o,H:!0},(a,l,u)=>{let[d,f,m]=a;d===t&&f===r&&(s=!0),u.done()}).next(()=>s)}function Io(n){return Wt(n,"mutations")}function _l(n){return Wt(n,"documentMutations")}function kO(n){return Wt(n,"mutationQueues")}var Al=class n{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var mb=class{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.qn(t).next(e=>{let i=new Al(e.highestTargetId);return e.highestTargetId=i.next(),this.Qn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(e=>me.fromTimestamp(new bt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.qn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Qn(t,r)))}addTargetData(t,e){return this.Kn(t,e).next(()=>this.qn(t).next(i=>(i.targetCount+=1,this.$n(e,i),this.Qn(t,i))))}updateTargetData(t,e){return this.Kn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>hl(t).delete(e.targetId)).next(()=>this.qn(t)).next(i=>(ue(i.targetCount>0),i.targetCount-=1,this.Qn(t,i)))}removeTargets(t,e,i){let r=0,o=[];return hl(t).J((s,a)=>{let l=Bu(a);l.sequenceNumber<=e&&i.get(l.targetId)===null&&(r++,o.push(this.removeTargetData(t,l)))}).next(()=>V.waitFor(o)).next(()=>r)}forEachTarget(t,e){return hl(t).J((i,r)=>{let o=Bu(r);e(o)})}qn(t){return pA(t).get("targetGlobalKey").next(e=>(ue(e!==null),e))}Qn(t,e){return pA(t).put("targetGlobalKey",e)}Kn(t,e){return hl(t).put(OO(this.serializer,e))}$n(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.qn(t).next(e=>e.targetCount)}getTargetData(t,e){let i=Us(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return hl(t).J({range:r,index:"queryTargetsIndex"},(s,a,l)=>{let u=Bu(a);md(e,u.target)&&(o=u,l.done())}).next(()=>o)}addMatchingKeys(t,e,i){let r=[],o=To(t);return e.forEach(s=>{let a=Mn(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(t,i,s))}),V.waitFor(r)}removeMatchingKeys(t,e,i){let r=To(t);return V.forEach(e,o=>{let s=Mn(o.path);return V.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(t,i,o)])})}removeMatchingKeysForTargetId(t,e){let i=To(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){let i=IDBKeyRange.bound([e],[e+1],!1,!0),r=To(t),o=Te();return r.J({range:i,H:!0},(s,a,l)=>{let u=ir(s[1]),d=new ee(u);o=o.add(d)}).next(()=>o)}containsKey(t,e){let i=Mn(e.path),r=IDBKeyRange.bound([i],[FA(i)],!1,!0),o=0;return To(t).J({index:"documentTargetsIndex",H:!0,range:r},([s,a],l,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(t,e){return hl(t).get(e).next(i=>i?Bu(i):null)}};function hl(n){return Wt(n,"targets")}function pA(n){return Wt(n,"targetGlobal")}function To(n){return Wt(n,"targetDocuments")}function mA([n,t],[e,i]){let r=De(n,e);return r===0?De(t,i):r}var gb=class{constructor(t){this.Un=t,this.buffer=new st(mA),this.Wn=0}Gn(){return++this.Wn}zn(t){let e=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(e);else{let i=this.buffer.last();mA(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}},_b=class{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(t){W("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>E(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(e){$o(e)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield Uo(e)}yield this.Hn(3e5)}))}},yb=class{constructor(t,e){this.Jn=t,this.params=e}calculateTargetCount(t,e){return this.Jn.Yn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return V.resolve(ri.oe);let i=new gb(e);return this.Jn.forEachTarget(t,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(t,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Jn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(fA)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fA):this.Xn(t,e))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,e){let i,r,o,s,a,l,u,d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,s=Date.now(),this.nthSequenceNumber(t,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(t,i,e))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(f=>(u=Date.now(),fl()<=Gi.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:f})))}};function WG(n,t){return new yb(n,t)}var vb=class{constructor(t,e){this.db=t,this.garbageCollector=WG(this,e)}Yn(t){let e=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}er(t){let e=0;return this.Zn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Zn(t,e){return this.tr(t,(i,r)=>e(r))}addReference(t,e,i){return Bp(t,i)}removeReference(t,e,i){return Bp(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return Bp(t,e)}nr(t,e){return function(r,o){let s=!1;return kO(r).Y(a=>FO(r,a,o).next(l=>(l&&(s=!0),V.resolve(!l)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.tr(t,(s,a)=>{if(a<=e){let l=this.nr(t,s).next(u=>{if(!u)return o++,i.getEntry(t,s).next(()=>(i.removeEntry(s,me.min()),To(t).delete(function(f){return[0,Mn(f.path)]}(s))))});r.push(l)}}).next(()=>V.waitFor(r)).next(()=>i.apply(t)).next(()=>o)}removeTarget(t,e){let i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return Bp(t,e)}tr(t,e){let i=To(t),r,o=ri.oe;return i.J({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:u})=>{s===0?(o!==ri.oe&&e(new ee(ir(r)),o),o=u,r=l):o=ri.oe}).next(()=>{o!==ri.oe&&e(new ee(ir(r)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}};function Bp(n,t){return To(n).put(function(i,r){return{targetId:0,path:Mn(i.path),sequenceNumber:r}}(t,n.currentSequenceNumber))}var gm=class{constructor(){this.changes=new ur(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,zt.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?V.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var wb=class{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return As(t).put(i)}removeEntry(t,e,i){return As(t).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],um(s),a[a.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.rr(t,i)))}getEntry(t,e){let i=zt.newInvalidDocument(e);return As(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(ku(e))},(r,o)=>{i=this.ir(e,o)}).next(()=>i)}sr(t,e){let i={size:0,document:zt.newInvalidDocument(e)};return As(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(ku(e))},(r,o)=>{i={document:this.ir(e,o),size:pm(o)}}).next(()=>i)}getEntries(t,e){let i=Hn();return this._r(t,e,(r,o)=>{let s=this.ir(r,o);i=i.insert(r,s)}).next(()=>i)}ar(t,e){let i=Hn(),r=new dt(ee.comparator);return this._r(t,e,(o,s)=>{let a=this.ir(o,s);i=i.insert(o,a),r=r.insert(o,pm(s))}).next(()=>({documents:i,ur:r}))}_r(t,e,i){if(e.isEmpty())return V.resolve();let r=new st(yA);e.forEach(l=>r=r.add(l));let o=IDBKeyRange.bound(ku(r.first()),ku(r.last())),s=r.getIterator(),a=s.getNext();return As(t).J({index:"documentKeyIndex",range:o},(l,u,d)=>{let f=ee.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&yA(a,f)<0;)i(a,null),a=s.getNext();a&&a.isEqual(f)&&(i(a,u),a=s.hasNext()?s.getNext():null),a?d.$(ku(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(t,e,i,r,o){let s=e.path,a=[s.popLast().toArray(),s.lastSegment(),um(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return As(t).U(IDBKeyRange.bound(a,l,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let d=Hn();for(let f of u){let m=this.ir(ee.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(_d(e,m)||r.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(t,e,i,r){let o=Hn(),s=_A(e,i),a=_A(e,vi.max());return As(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,u,d)=>{let f=this.ir(ee.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(f.key,f),o.size===r&&d.done()}).next(()=>o)}newChangeBuffer(t){return new bb(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return gA(t).get("remoteDocumentGlobalKey").next(e=>(ue(!!e),e))}rr(t,e){return gA(t).put("remoteDocumentGlobalKey",e)}ir(t,e){if(e){let i=HG(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(me.min())))return i}return zt.newInvalidDocument(t)}};function VO(n){return new wb(n)}var bb=class extends gm{constructor(t,e){super(),this.cr=t,this.trackRemovals=e,this.lr=new ur(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){let e=[],i=0,r=new st((o,s)=>De(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(e.push(this.cr.removeEntry(t,o,a.readTime)),s.isValidDocument()){let l=iA(this.cr.serializer,s);r=r.add(o.path.popLast());let u=pm(l);i+=u-a.size,e.push(this.cr.addEntry(t,o,l))}else if(i-=a.size,this.trackRemovals){let l=iA(this.cr.serializer,s.convertToNoDocument(me.min()));e.push(this.cr.addEntry(t,o,l))}}),r.forEach(o=>{e.push(this.cr.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.cr.updateMetadata(t,i)),V.waitFor(e)}getFromCache(t,e){return this.cr.sr(t,e).next(i=>(this.lr.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.cr.ar(t,e).next(({documents:i,ur:r})=>(r.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function gA(n){return Wt(n,"remoteDocumentGlobal")}function As(n){return Wt(n,"remoteDocumentsV14")}function ku(n){let t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function _A(n,t){let e=t.documentKey.path.toArray();return[n,um(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function yA(n,t){let e=n.path.toArray(),i=t.path.toArray(),r=0;for(let o=0;o<e.length-2&&o<i.length-2;++o)if(r=De(e[o],i[o]),r)return r;return r=De(e.length,i.length),r||(r=De(e[e.length-2],i[i.length-2]),r||De(e[e.length-1],i[i.length-1]))}var Cb=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var _m=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&$u(i.mutation,r,oi.empty(),bt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Te()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Te()){let r=rr();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let s=Lu();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(t,e){let i=rr();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Te()))}populateOverlays(t,e,i){let r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((s,a)=>{e.set(s,a)})})}computeViews(t,e,i,r){let o=Hn(),s=Uu(),a=function(){return Uu()}();return e.forEach((l,u)=>{let d=i.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof Bi)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),$u(d.mutation,u,d.mutation.getFieldMask(),bt.now())):s.set(u.key,oi.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((u,d)=>s.set(u,d)),e.forEach((u,d)=>{var f;return a.set(u,new Cb(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,e){let i=Uu(),r=new dt((s,a)=>s-a),o=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=e.get(l);if(u===null)return;let d=i.get(l)||oi.empty();d=a.applyToLocalView(u,d),i.set(l,d);let f=(r.get(a.batchId)||Te()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,d=l.value,f=aO();d.forEach(m=>{if(!o.has(m)){let y=pO(e.get(m),i.get(m));y!==null&&f.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(t,u,f))}return V.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):MC(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):V.resolve(rr()),a=-1,l=o;return s.next(u=>V.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?V.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(t,u,o)).next(()=>this.computeViews(t,l,u,Te())).next(d=>({batchId:a,changes:sO(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ee(e)).next(i=>{let r=Lu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let o=e.collectionGroup,s=Lu();return this.indexManager.getCollectionParents(t,o).next(a=>V.forEach(a,l=>{let u=function(f,m){return new Li(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(e,l.child(o));return this.getDocumentsMatchingCollectionQuery(t,u,i,r).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(s=>{o.forEach((l,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,zt.newInvalidDocument(d)))});let a=Lu();return s.forEach((l,u)=>{let d=o.get(l);d!==void 0&&$u(d.mutation,u,oi.empty(),bt.now()),_d(e,u)&&(a=a.insert(l,u))}),a})}};var Eb=class{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return V.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Nt(r.createTime)}}(e)),V.resolve()}getNamedQuery(t,e){return V.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(r){return{name:r.name,query:PC(r.bundledQuery),readTime:Nt(r.readTime)}}(e)),V.resolve()}};var Db=class{constructor(){this.overlays=new dt(ee.comparator),this.Ir=new Map}getOverlay(t,e){return V.resolve(this.overlays.get(e))}getOverlays(t,e){let i=rr();return V.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.ht(t,e,o)}),V.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),V.resolve()}getOverlaysForCollection(t,e,i){let r=rr(),o=e.length+1,s=new ee(e.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return V.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new dt((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===e&&u.largestBatchId>i){let d=o.get(u.largestBatchId);d===null&&(d=rr(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=rr(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=r)););return V.resolve(a)}ht(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new Xu(e,i));let o=this.Ir.get(e);o===void 0&&(o=Te(),this.Ir.set(e,o)),this.Ir.set(e,o.add(i.key))}};var Sb=class{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(t){return V.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,V.resolve()}};var od=class{constructor(){this.Tr=new st($t.Er),this.dr=new st($t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){let i=new $t(t,e);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Vr(new $t(t,e))}mr(t,e){t.forEach(i=>this.removeReference(i,e))}gr(t){let e=new ee(new Ge([])),i=new $t(e,t),r=new $t(e,t+1),o=[];return this.dr.forEachInRange([i,r],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){let e=new ee(new Ge([])),i=new $t(e,t),r=new $t(e,t+1),o=Te();return this.dr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(t){let e=new $t(t,0),i=this.Tr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},$t=class{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return ee.comparator(t.key,e.key)||De(t.wr,e.wr)}static Ar(t,e){return De(t.wr,e.wr)||ee.comparator(t.key,e.key)}};var Ib=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new st($t.Er)}checkEmpty(t){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Zu(o,e,i,r);this.mutationQueue.push(s);for(let a of r)this.br=this.br.add(new $t(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(t,e){return V.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.vr(i),o=r<0?0:r;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new $t(e,0),r=new $t(e,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],s=>{let a=this.Dr(s.wr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new st(De);return e.forEach(r=>{let o=new $t(r,0),s=new $t(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{i=i.add(a.wr)})}),V.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,o=i;ee.isDocumentKey(o)||(o=o.child(""));let s=new $t(new ee(o),0),a=new st(De);return this.br.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},s),V.resolve(this.Cr(a))}Cr(t){let e=[];return t.forEach(i=>{let r=this.Dr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){ue(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return V.forEach(e.mutations,r=>{let o=new $t(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,e){let i=new $t(e,0),r=this.br.firstAfterOrEqual(i);return V.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,V.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){let e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var Tb=class{constructor(t){this.Mr=t,this.docs=function(){return new dt(ee.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),o=r?r.size:0,s=this.Mr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return V.resolve(i?i.document.mutableCopy():zt.newInvalidDocument(e))}getEntries(t,e){let i=Hn();return e.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():zt.newInvalidDocument(r))}),V.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=Hn(),s=e.path,a=new ee(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:d}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||DC(VA(d),i)<=0||(r.has(d.key)||_d(e,d))&&(o=o.insert(d.key,d.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(t,e,i,r){se()}Or(t,e){return V.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new xb(this)}getSize(t){return V.resolve(this.size)}},xb=class extends gm{constructor(t){super(),this.cr=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(i)}),V.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}};var Mb=class{constructor(t){this.persistence=t,this.Nr=new ur(e=>Us(e),md),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new od,this.targetCount=0,this.kr=Al.Bn()}forEachTarget(t,e){return this.Nr.forEach((i,r)=>e(r)),V.resolve()}getLastRemoteSnapshotVersion(t){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return V.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Lr&&(this.Lr=e),V.resolve()}Kn(t){this.Nr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.kr=new Al(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,V.resolve()}updateTargetData(t,e){return this.Kn(e),V.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,V.resolve()}removeTargets(t,e,i){let r=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),V.waitFor(o).next(()=>r)}getTargetCount(t){return V.resolve(this.targetCount)}getTargetData(t,e){let i=this.Nr.get(e)||null;return V.resolve(i)}addMatchingKeys(t,e,i){return this.Br.Rr(e,i),V.resolve()}removeMatchingKeys(t,e,i){this.Br.mr(e,i);let r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(s=>{o.push(r.markPotentiallyOrphaned(t,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),V.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Br.yr(e);return V.resolve(i)}containsKey(t,e){return V.resolve(this.Br.containsKey(e))}};var ym=class{constructor(t,e){this.qr={},this.overlays={},this.Qr=new ri(0),this.Kr=!1,this.Kr=!0,this.$r=new Sb,this.referenceDelegate=t(this),this.Ur=new Mb(this),this.indexManager=new fb,this.remoteDocumentCache=function(r){return new Tb(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new cm(e),this.Gr=new Eb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Db,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.qr[t.toKey()];return i||(i=new Ib(e,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,i){W("MemoryPersistence","Starting transaction:",t);let r=new Ab(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(t,e){return V.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,e)))}},Ab=class extends Jp{constructor(t){super(),this.currentSequenceNumber=t}},vm=class n{constructor(t){this.persistence=t,this.Jr=new od,this.Yr=null}static Zr(t){return new n(t)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(t,e,i){return this.Jr.addReference(i,e),this.Xr.delete(i.toString()),V.resolve()}removeReference(t,e,i){return this.Jr.removeReference(i,e),this.Xr.add(i.toString()),V.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),V.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,i=>{let r=ee.fromPath(i);return this.ei(t,r).next(o=>{o||e.removeEntry(r,me.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(i=>{i?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return V.or([()=>V.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}};var Ob=class{constructor(t){this.serializer=t}O(t,e,i,r){let o=new Zp("createOrUpgrade",e);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(t),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NM,{unique:!0}),l.createObjectStore("documentMutations")}(t),vA(t),function(l){l.createObjectStore("remoteDocuments")}(t));let s=V.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(t),vA(t)),s=s.next(()=>function(l){let u=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:me.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(l,u){return u.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NM,{unique:!0});let f=u.store("mutations"),m=d.map(y=>f.put(y));return V.waitFor(m)})}(t,o))),s=s.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),i<5&&r>=5&&(s=s.next(()=>this.ni(o))),i<6&&r>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(t),this.ri(o)))),i<7&&r>=7&&(s=s.next(()=>this.ii(o))),i<8&&r>=8&&(s=s.next(()=>this.si(t,o))),i<9&&r>=9&&(s=s.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&r>=10&&(s=s.next(()=>this.oi(o))),i<11&&r>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(s=s.next(()=>{(function(l){let u=l.createObjectStore("documentOverlays",{keyPath:uG});u.createIndex("collectionPathOverlayIndex",dG,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",hG,{unique:!1})})(t)})),i<13&&r>=13&&(s=s.next(()=>function(l){let u=l.createObjectStore("remoteDocumentsV14",{keyPath:X$});u.createIndex("documentKeyIndex",eG),u.createIndex("collectionGroupIndex",tG)}(t)).next(()=>this._i(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ai(t,o))),i<15&&r>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:sG}).createIndex("sequenceNumberIndex",aG,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:lG}).createIndex("documentKeyIndex",cG,{unique:!1})}(t))),i<16&&r>=16&&(s=s.next(()=>{e.objectStore("indexState").clear()}).next(()=>{e.objectStore("indexEntries").clear()})),i<17&&r>=17&&(s=s.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(t)})),s}ri(t){let e=0;return t.store("remoteDocuments").J((i,r)=>{e+=pm(r)}).next(()=>{let i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(t){let e=t.store("mutationQueues"),i=t.store("mutations");return e.U().next(r=>V.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",s).next(a=>V.forEach(a,l=>{ue(l.userId===o.userId);let u=Ps(this.serializer,l);return NO(t,o.userId,u).next(()=>{})}))}))}ii(t){let e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((s,a)=>{let l=new Ge(s),u=function(f){return[0,Mn(f)]}(l);o.push(e.get(u).next(d=>d?V.resolve():(f=>e.put({targetId:0,path:Mn(f),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(o))})}si(t,e){t.createObjectStore("collectionParents",{keyPath:oG});let i=e.store("collectionParents"),r=new rd,o=s=>{if(r.add(s)){let a=s.lastSegment(),l=s.popLast();return i.put({collectionId:a,parent:Mn(l)})}};return e.store("remoteDocuments").J({H:!0},(s,a)=>{let l=new Ge(s);return o(l.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([s,a,l],u)=>{let d=ir(a);return o(d.popLast())}))}oi(t){let e=t.store("targets");return e.J((i,r)=>{let o=Bu(r),s=OO(this.serializer,o);return e.put(s)})}_i(t,e){let i=e.store("remoteDocuments"),r=[];return i.J((o,s)=>{let a=e.store("remoteDocumentsV14"),l=function(f){return f.document?new ee(Ge.fromString(f.document.name).popFirst(5)):f.noDocument?ee.fromSegments(f.noDocument.path):f.unknownDocument?ee.fromSegments(f.unknownDocument.path):se()}(s).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(u))}).next(()=>V.waitFor(r))}ai(t,e){let i=e.store("mutations"),r=VO(this.serializer),o=new ym(vm.Zr,this.serializer.ct);return i.U().next(s=>{let a=new Map;return s.forEach(l=>{var u;let d=(u=a.get(l.userId))!==null&&u!==void 0?u:Te();Ps(this.serializer,l).keys().forEach(f=>d=d.add(f)),a.set(l.userId,d)}),V.forEach(a,(l,u)=>{let d=new Gt(u),f=dm.lt(this.serializer,d),m=o.getIndexManager(d),y=mm.lt(d,this.serializer,m,o.referenceDelegate);return new _m(r,y,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Wu(e,ri.oe),l).next()})})}};function vA(n){n.createObjectStore("targetDocuments",{keyPath:iG}).createIndex("documentTargetsIndex",rG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nG,{unique:!0}),n.createObjectStore("targetGlobal")}var ww="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Rb=class n{constructor(t,e,i,r,o,s,a,l,u,d,f=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ui=o,this.window=s,this.document=a,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new z(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vb(this,r),this.Ai=e+"main",this.serializer=new cm(l),this.Ri=new Ro(this.Ai,this.hi,new Ob(this.serializer)),this.$r=new sb,this.Ur=new mb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VO(this.serializer),this.Gr=new ob,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Rt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new z(L.FAILED_PRECONDITION,ww);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new ri(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){return this.di=e=>E(this,null,function*(){if(this.started)return t(e)}),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(e=>E(this,null,function*(){e.newVersion===null&&(yield t())}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget(()=>E(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>jp(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(e=>this.isPrimary&&!e?this.bi(t).next(()=>!1):!!e&&this.Di(t).next(()=>!0))).catch(t=>{if($o(t))return W("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return Vu(t).get("owner").next(e=>V.resolve(this.vi(e)))}Ci(t){return jp(t).delete(this.clientId)}Fi(){return E(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let t=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let i=Wt(e,"clientMetadata");return i.U().next(r=>{let o=this.xi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return V.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let e of t)this.Vi.removeItem(this.Oi(e.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?V.resolve(!0):Vu(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)){if(this.vi(e)&&this.networkEnabled)return!0;if(!this.vi(e)){if(!e.allowTabSynchronization)throw new z(L.FAILED_PRECONDITION,ww);return!1}}return!(!this.networkEnabled||!this.inForeground)||jp(t).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&W("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){return E(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{let e=new Wu(t,ri.oe);return this.bi(e).next(()=>this.Ci(e))}),this.Ri.close(),this.qi()})}xi(t,e){return t.filter(i=>this.Mi(i.updateTimeMs,e)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>jp(t).U().next(e=>this.xi(e,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,e){return mm.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new pb(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return dm.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,e,i){W("IndexedDbPersistence","Starting transaction:",t);let r=e==="readonly"?"readonly":"readwrite",o=function(l){return l===17?mG:l===16?pG:l===15?IC:l===14?HA:l===13?GA:l===12?fG:l===11?$A:void se()}(this.hi),s;return this.Ri.runTransaction(t,r,o,a=>(s=new Wu(a,this.Qr?this.Qr.next():ri.oe),e==="readwrite-primary"?this.wi(s).next(l=>!!l||this.Si(s)).next(l=>{if(!l)throw Rt(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new z(L.FAILED_PRECONDITION,LA);return i(s)}).next(l=>this.Di(s).next(()=>l)):this.Ki(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(t){return Vu(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new z(L.FAILED_PRECONDITION,ww)})}Di(t){let e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vu(t).put("owner",e)}static D(){return Ro.D()}bi(t){let e=Vu(t);return e.get("owner").next(i=>this.vi(i)?(W("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):V.resolve())}Mi(t,e){let i=Date.now();return!(t<i-e)&&(!(t>i)||(Rt(`Detected an update time that is in the future: ${t} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let e=/(?:Version|Mobile)\/1[456]/;Jg()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var e;try{let i=((e=this.Vi)===null||e===void 0?void 0:e.getItem(this.Oi(t)))!==null;return W("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Rt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){Rt("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}};function Vu(n){return Wt(n,"owner")}function jp(n){return Wt(n,"clientMetadata")}function FC(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}var Pb=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.$i=i,this.Ui=r}static Wi(t,e){let i=Te(),r=Te();for(let o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(t,e.fromCache,i,r)}};var Nb=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var wm=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Jg()?8:BA(Ec())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,i,r){let o={result:null};return this.Yi(t,e).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(t,e,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Nb;return this.Xi(t,e,s).next(a=>{if(o.result=a,this.zi)return this.es(t,e,s,a.size)})}).next(()=>o.result)}es(t,e,i,r){return i.documentReadCount<this.ji?(fl()<=Gi.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",pl(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(fl()<=Gi.DEBUG&&W("QueryEngine","Query:",pl(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(fl()<=Gi.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",pl(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,An(e))):V.resolve())}Yi(t,e){if(qM(e))return V.resolve(null);let i=An(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=om(e,null,"F"),i=An(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{let s=Te(...o);return this.Ji.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{let u=this.ts(e,a);return this.ns(e,u,s,l.readTime)?this.Yi(t,om(e,null,"F")):this.rs(t,u,e,l)}))})))}Zi(t,e,i,r){return qM(e)||r.isEqual(me.min())?V.resolve(null):this.Ji.getDocuments(t,i).next(o=>{let s=this.ts(e,o);return this.ns(e,s,i,r)?V.resolve(null):(fl()<=Gi.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pl(e)),this.rs(t,s,e,kA(r,-1)).next(a=>a))})}ts(t,e){let i=new st(rO(t));return e.forEach((r,o)=>{_d(t,o)&&(i=i.add(o))}),i}ns(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(t,e,i){return fl()<=Gi.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",pl(e)),this.Ji.getDocumentsMatchingQuery(t,e,vi.min(),i)}rs(t,e,i,r){return this.Ji.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Fb=class{constructor(t,e,i,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new dt(De),this._s=new ur(o=>Us(o),md),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _m(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}};function LO(n,t,e,i){return new Fb(n,t,e,i)}function BO(n,t){return E(this,null,function*(){let e=X(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.ls(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],l=Te();for(let u of r){s.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}return e.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function KG(n,t){let e=X(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),o=e.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){let f=u.batch,m=f.keys(),y=V.resolve();return m.forEach(D=>{y=y.next(()=>d.getEntry(l,D)).next(T=>{let R=u.docVersions.get(D);ue(R!==null),T.version.compareTo(R)<0&&(f.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),d.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Te();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function jO(n){let t=X(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function QG(n,t){let e=X(n),i=t.snapshotVersion,r=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=e.cs.newChangeBuffer({trackRemovals:!0});r=e.os;let a=[];t.targetChanges.forEach((d,f)=>{let m=r.get(f);if(!m)return;a.push(e.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>e.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=m.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(f)!==null?y=y.withResumeToken(Ft.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,i)),r=r.insert(f,y),function(T,R,q){return T.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(m,y,d)&&a.push(e.Ur.updateTargetData(o,y))});let l=Hn(),u=Te();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(UO(o,s,t.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!i.isEqual(me.min())){let d=e.Ur.getLastRemoteSnapshotVersion(o).next(f=>e.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(d)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(e.os=r,o))}function UO(n,t,e){let i=Te(),r=Te();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let s=Hn();return e.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(t.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),s=s.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:r}})}function YG(n,t){let e=X(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Ol(n,t){let e=X(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Ur.getTargetData(i,t).next(o=>o?(r=o,V.resolve(r)):e.Ur.allocateTargetId(i).next(s=>(r=new Ml(t,s,"TargetPurposeListen",i.currentSequenceNumber),e.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.os=e.os.insert(i.targetId,i),e._s.set(t,i.targetId)),i})}function Rl(n,t,e){return E(this,null,function*(){let i=X(n),r=i.os.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!$o(s))throw s;W("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}i.os=i.os.remove(t),i._s.delete(r.target)})}function bm(n,t,e){let i=X(n),r=me.min(),o=Te();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,d){let f=X(l),m=f._s.get(d);return m!==void 0?V.resolve(f.os.get(m)):f.Ur.getTargetData(u,d)}(i,s,An(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>i.ss.getDocumentsMatchingQuery(s,t,e?r:me.min(),e?o:Te())).next(a=>(HO(i,iO(t),a),{documents:a,Ts:o})))}function $O(n,t){let e=X(n),i=X(e.Ur),r=e.os.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,t).next(s=>s?s.target:null))}function GO(n,t){let e=X(n),i=e.us.get(t)||me.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.cs.getAllFromCollectionGroup(r,t,kA(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(HO(e,t,r),r))}function HO(n,t,e){let i=n.us.get(t)||me.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.us.set(t,i)}function JG(n,t,e,i){return E(this,null,function*(){let r=X(n),o=Te(),s=Hn();for(let u of e){let d=t.Es(u.metadata.name);u.document&&(o=o.add(d));let f=t.ds(u);f.setReadTime(t.As(u.metadata.readTime)),s=s.insert(d,f)}let a=r.cs.newChangeBuffer({trackRemovals:!0}),l=yield Ol(r,function(d){return An(jl(Ge.fromString(`__bundle__/docs/${d}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>UO(u,a,s).next(d=>(a.apply(u),d)).next(d=>r.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>r.Ur.addMatchingKeys(u,o,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is)).next(()=>d.Ps)))})}function ZG(i,r){return E(this,arguments,function*(n,t,e=Te()){let o=yield Ol(n,An(PC(t.bundledQuery))),s=X(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let l=Nt(t.readTime);if(o.snapshotVersion.compareTo(l)>=0)return s.Gr.saveNamedQuery(a,t);let u=o.withResumeToken(Ft.EMPTY_BYTE_STRING,l);return s.os=s.os.insert(u.targetId,u),s.Ur.updateTargetData(a,u).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,e,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,t))})})}function wA(n,t){return`firestore_clients_${n}_${t}`}function bA(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function bw(n,t){return`firestore_targets_${n}_${t}`}var Cm=class n{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Rs(t,e,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new z(r.error.code,r.error.message))),s?new n(t,e,r.state,o):(Rt("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}Vs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},Gu=class n{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Rs(t,e){let i=JSON.parse(e),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new z(i.error.code,i.error.message))),o?new n(t,i.state,r):(Rt("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Vs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},Em=class n{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Rs(t,e){let i=JSON.parse(e),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=AC();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=jA(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new n(t,o):(Rt("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}},kb=class n{constructor(t,e){this.clientId=t,this.onlineState=e}static Rs(t){let e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new n(e.clientId,e.onlineState):(Rt("SharedClientState",`Failed to parse online state: ${t}`),null)}},sd=class{constructor(){this.activeTargetIds=AC()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},Hu=class{constructor(t,e,i,r,o){this.window=t,this.ui=e,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new dt(De),this.started=!1,this.bs=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=wA(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new sd),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){return E(this,null,function*(){let t=yield this.syncEngine.Qi();for(let i of t){if(i===this.ps)continue;let r=this.getItem(wA(this.persistenceKey,i));if(r){let o=Em.Rs(i,r);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let e=this.storage.getItem(this.xs);if(e){let i=this.Ls(e);i&&this.Bs(i)}for(let i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let e=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,e,i){this.qs(t,e,i),this.Qs(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){let i=this.storage.getItem(bw(this.persistenceKey,t));if(i){let r=Gu.Rs(t,i);r&&(e=r.state)}}return this.Ks.fs(t),this.Ns(),e}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(bw(this.persistenceKey,t))}updateQueryState(t,e,i){this.$s(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Qs(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){let e=this.storage.getItem(t);return W("SharedClientState","READ",t,e),e}setItem(t,e){W("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){W("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){let e=t;if(e.storageArea===this.storage){if(W("SharedClientState","EVENT",e.key,e.newValue),e.key===this.Ds)return void Rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>E(this,null,function*(){if(this.started){if(e.key!==null){if(this.Cs.test(e.key)){if(e.newValue==null){let i=this.Gs(e.key);return this.zs(i,null)}{let i=this.js(e.key,e.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(e.key)){if(e.newValue!==null){let i=this.Hs(e.key,e.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(e.key)){if(e.newValue!==null){let i=this.Ys(e.key,e.newValue);if(i)return this.Zs(i)}}else if(e.key===this.xs){if(e.newValue!==null){let i=this.Ls(e.newValue);if(i)return this.Bs(i)}}else if(e.key===this.vs){let i=function(o){let s=ri.oe;if(o!=null)try{let a=JSON.parse(o);ue(typeof a=="number"),s=a}catch(a){Rt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(e.newValue);i!==ri.oe&&this.sequenceNumberHandler(i)}else if(e.key===this.Os){let i=this.Xs(e.newValue);yield Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(e)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,e,i){let r=new Cm(this.currentUser,t,e,i),o=bA(this.persistenceKey,this.currentUser,t);this.setItem(o,r.Vs())}Qs(t){let e=bA(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Us(t){let e={clientId:this.ps,onlineState:t};this.storage.setItem(this.xs,JSON.stringify(e))}$s(t,e,i){let r=bw(this.persistenceKey,t),o=new Gu(t,e,i);this.setItem(r,o.Vs())}Ws(t){let e=JSON.stringify(Array.from(t));this.setItem(this.Os,e)}Gs(t){let e=this.Cs.exec(t);return e?e[1]:null}js(t,e){let i=this.Gs(t);return Em.Rs(i,e)}Hs(t,e){let i=this.Fs.exec(t),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Cm.Rs(new Gt(o),r,e)}Ys(t,e){let i=this.Ms.exec(t),r=Number(i[1]);return Gu.Rs(r,e)}Ls(t){return kb.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){return E(this,null,function*(){if(t.user.uid===this.currentUser.uid)return this.syncEngine.no(t.batchId,t.state,t.error);W("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,e){let i=e?this.Ss.insert(t,e):this.Ss.remove(t),r=this.ks(this.Ss),o=this.ks(i),s=[],a=[];return o.forEach(l=>{r.has(l)||s.push(l)}),r.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.io(s,a).then(()=>{this.Ss=i})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let e=AC();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}},Dm=class{constructor(){this.so=new sd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,i){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new sd,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var Vb=class{_o(t){}shutdown(){}};var Sm=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.ho)t(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Up=null;function Cw(){return Up===null?Up=function(){return 268435456+Math.round(2147483648*Math.random())}():Up++,"0x"+Up.toString(16)}var XG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Lb=class{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}};var vn="WebChannelConnection",Bb=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+e.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(e,i,r,o,s){let a=Cw(),l=this.xo(e,i.toUriEncodedString());W("RestConnection",`Sending RPC '${e}' ${a}:`,l,r);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(e,l,u,r).then(d=>(W("RestConnection",`Received RPC '${e}' ${a}: `,d),d),d=>{throw yi("RestConnection",`RPC '${e}' ${a} failed with error: `,d,"url: ",l,"request:",r),d})}Lo(e,i,r,o,s,a){return this.Mo(e,i,r,o,s)}Oo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>e[s]=o),r&&r.headers.forEach((o,s)=>e[s]=o)}xo(e,i){let r=XG[e];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,i,r){let o=Cw();return new Promise((s,a)=>{let l=new fw;l.setWithCredentials(!0),l.listenOnce(mw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Pu.NO_ERROR:let d=l.getResponseJson();W(vn,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),s(d);break;case Pu.TIMEOUT:W(vn,`RPC '${t}' ${o} timed out`),a(new z(L.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:let f=l.getStatus();if(W(vn,`RPC '${t}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let D=function(R){let q=R.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(q)>=0?q:L.UNKNOWN}(y.status);a(new z(D,y.message))}else a(new z(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new z(L.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{W(vn,`RPC '${t}' ${o} completed.`)}});let u=JSON.stringify(r);W(vn,`RPC '${t}' ${o} sending request:`,r),l.send(e,"POST",u,i,15)})}Bo(t,e,i){let r=Cw(),o=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=yw(),a=_w(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new pw({})),this.Oo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;let d=o.join("");W(vn,`Creating RPC '${t}' stream ${r}: ${d}`,l);let f=s.createWebChannel(d,l),m=!1,y=!1,D=new Lb({Io:R=>{y?W(vn,`Not sending because RPC '${t}' stream ${r} is closed:`,R):(m||(W(vn,`Opening RPC '${t}' stream ${r} transport.`),f.open(),m=!0),W(vn,`RPC '${t}' stream ${r} sending:`,R),f.send(R))},To:()=>f.close()}),T=(R,q,te)=>{R.listen(q,$=>{try{te($)}catch(ae){setTimeout(()=>{throw ae},0)}})};return T(f,ll.EventType.OPEN,()=>{y||(W(vn,`RPC '${t}' stream ${r} transport opened.`),D.yo())}),T(f,ll.EventType.CLOSE,()=>{y||(y=!0,W(vn,`RPC '${t}' stream ${r} transport closed`),D.So())}),T(f,ll.EventType.ERROR,R=>{y||(y=!0,yi(vn,`RPC '${t}' stream ${r} transport errored:`,R),D.So(new z(L.UNAVAILABLE,"The operation could not be completed")))}),T(f,ll.EventType.MESSAGE,R=>{var q;if(!y){let te=R.data[0];ue(!!te);let $=te,ae=$.error||((q=$[0])===null||q===void 0?void 0:q.error);if(ae){W(vn,`RPC '${t}' stream ${r} received error:`,ae);let ge=ae.status,pe=function(I){let A=Ut[I];if(A!==void 0)return _O(A)}(ge),M=ae.message;pe===void 0&&(pe=L.INTERNAL,M="Unknown error status: "+ge+" with message "+ae.message),y=!0,D.So(new z(pe,M)),f.close()}else W(vn,`RPC '${t}' stream ${r} received:`,te),D.bo(te)}}),T(a,gw.STAT_EVENT,R=>{R.stat===Vp.PROXY?W(vn,`RPC '${t}' stream ${r} detected buffering proxy`):R.stat===Vp.NOPROXY&&W(vn,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function zO(){return typeof window<"u"?window:null}function qp(){return typeof document<"u"?document:null}function yd(n){return new eb(n,!0)}var ad=class{constructor(t,e,i=1e3,r=1.5,o=6e4){this.ui=t,this.timerId=e,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();let e=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Im=class{constructor(t,e,i,r,o,s,a,l){this.ui=t,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ad(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return E(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){return E(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,e){return E(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===L.RESOURCE_EXHAUSTED?(Rt(e.toString()),Rt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.mo(e)})}l_(){}auth(){this.state=1;let t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===e&&this.P_(i,r)},i=>{t(()=>{let r=new z(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(t,e){let i=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>E(this,null,function*(){this.state=0,this.start()}))}I_(t){return W("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},jb=class extends Im{constructor(t,e,i,r,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();let e=VG(this.serializer,t),i=function(o){if(!("targetChange"in o))return me.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?me.min():s.readTime?Nt(s.readTime):me.min()}(t);return this.listener.d_(e,i)}A_(t){let e={};e.database=ib(this.serializer),e.addTarget=function(o,s){let a,l=s.target;if(a=im(l)?{documents:SO(o,l)}:{query:IO(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=vO(o,s.resumeToken);let u=tb(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(me.min())>0){a.readTime=xl(o,s.snapshotVersion.toTimestamp());let u=tb(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);let i=BG(this.serializer,t);i&&(e.labels=i),this.a_(e)}R_(t){let e={};e.database=ib(this.serializer),e.removeTarget=t,this.a_(e)}},Ub=class extends Im{constructor(t,e,i,r,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return ue(!!t.streamToken),this.lastStreamToken=t.streamToken,ue(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){ue(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();let e=LG(t.writeResults,t.commitTime),i=Nt(t.commitTime);return this.listener.g_(i,e)}p_(){let t={};t.database=ib(this.serializer),this.a_(t)}m_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>id(this.serializer,i))};this.a_(e)}};var $b=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(t,nb(e,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(L.UNKNOWN,o.toString())})}Lo(t,e,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(t,nb(e,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(L.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Gb=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Rt(e),this.D_=!1):W("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Hb=class{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{i.enqueueAndForget(()=>E(this,null,function*(){Go(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(l){return E(this,null,function*(){let u=X(l);u.L_.add(4),yield Ul(u),u.q_.set("Unknown"),u.L_.delete(4),yield vd(u)})}(this))}))}),this.q_=new Gb(i,r)}};function vd(n){return E(this,null,function*(){if(Go(n))for(let t of n.B_)yield t(!0)})}function Ul(n){return E(this,null,function*(){for(let t of n.B_)yield t(!1)})}function qm(n,t){let e=X(n);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),LC(e)?VC(e):Gl(e).r_()&&kC(e,t))}function Pl(n,t){let e=X(n),i=Gl(e);e.N_.delete(t),i.r_()&&qO(e,t),e.N_.size===0&&(i.r_()?i.o_():Go(e)&&e.q_.set("Unknown"))}function kC(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(me.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Gl(n).A_(t)}function qO(n,t){n.Q_.xe(t),Gl(n).R_(t)}function VC(n){n.Q_=new Xw({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Gl(n).start(),n.q_.v_()}function LC(n){return Go(n)&&!Gl(n).n_()&&n.N_.size>0}function Go(n){return X(n).L_.size===0}function WO(n){n.Q_=void 0}function e5(n){return E(this,null,function*(){n.q_.set("Online")})}function t5(n){return E(this,null,function*(){n.N_.forEach((t,e)=>{kC(n,t)})})}function n5(n,t){return E(this,null,function*(){WO(n),LC(n)?(n.q_.M_(t),VC(n)):n.q_.set("Unknown")})}function i5(n,t,e){return E(this,null,function*(){if(n.q_.set("Online"),t instanceof am&&t.state===2&&t.cause)try{yield function(r,o){return E(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.N_.delete(a),r.Q_.removeTarget(a))})}(n,t)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Tm(n,i)}else if(t instanceof bl?n.Q_.Ke(t):t instanceof sm?n.Q_.He(t):n.Q_.We(t),!e.isEqual(me.min()))try{let i=yield jO(n.localStore);e.compareTo(i)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let d=o.N_.get(u);d&&o.N_.set(u,d.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let d=o.N_.get(l);if(!d)return;o.N_.set(l,d.withResumeToken(Ft.EMPTY_BYTE_STRING,d.snapshotVersion)),qO(o,l);let f=new Ml(d.target,l,u,d.sequenceNumber);kC(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){W("RemoteStore","Failed to raise snapshot:",i),yield Tm(n,i)}})}function Tm(n,t,e){return E(this,null,function*(){if(!$o(t))throw t;n.L_.add(1),yield Ul(n),n.q_.set("Offline"),e||(e=()=>jO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield e(),n.L_.delete(1),yield vd(n)}))})}function KO(n,t){return t().catch(e=>Tm(n,e,t))}function $l(n){return E(this,null,function*(){let t=X(n),e=jo(t),i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;r5(t);)try{let r=yield YG(t.localStore,i);if(r===null){t.O_.length===0&&e.o_();break}i=r.batchId,o5(t,r)}catch(r){yield Tm(t,r)}QO(t)&&YO(t)})}function r5(n){return Go(n)&&n.O_.length<10}function o5(n,t){n.O_.push(t);let e=jo(n);e.r_()&&e.V_&&e.m_(t.mutations)}function QO(n){return Go(n)&&!jo(n).n_()&&n.O_.length>0}function YO(n){jo(n).start()}function s5(n){return E(this,null,function*(){jo(n).p_()})}function a5(n){return E(this,null,function*(){let t=jo(n);for(let e of n.O_)t.m_(e.mutations)})}function l5(n,t,e){return E(this,null,function*(){let i=n.O_.shift(),r=Yw.from(i,t,e);yield KO(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield $l(n)})}function c5(n,t){return E(this,null,function*(){t&&jo(n).V_&&(yield function(i,r){return E(this,null,function*(){if(function(s){return gO(s)&&s!==L.ABORTED}(r.code)){let o=i.O_.shift();jo(i).s_(),yield KO(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield $l(i)}})}(n,t)),QO(n)&&YO(n)})}function CA(n,t){return E(this,null,function*(){let e=X(n);e.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let i=Go(e);e.L_.add(3),yield Ul(e),i&&e.q_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),yield vd(e)})}function zb(n,t){return E(this,null,function*(){let e=X(n);t?(e.L_.delete(2),yield vd(e)):t||(e.L_.add(2),yield Ul(e),e.q_.set("Unknown"))})}function Gl(n){return n.K_||(n.K_=function(e,i,r){let o=X(e);return o.w_(),new jb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:e5.bind(null,n),Ro:t5.bind(null,n),mo:n5.bind(null,n),d_:i5.bind(null,n)}),n.B_.push(t=>E(this,null,function*(){t?(n.K_.s_(),LC(n)?VC(n):n.q_.set("Unknown")):(yield n.K_.stop(),WO(n))}))),n.K_}function jo(n){return n.U_||(n.U_=function(e,i,r){let o=X(e);return o.w_(),new Ub(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:s5.bind(null,n),mo:c5.bind(null,n),f_:a5.bind(null,n),g_:l5.bind(null,n)}),n.B_.push(t=>E(this,null,function*(){t?(n.U_.s_(),yield $l(n)):(yield n.U_.stop(),n.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var qb=class n{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){let s=Date.now()+i,a=new n(t,e,s,r,o);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Hl(n,t){if(Rt("AsyncQueue",`${t}: ${n}`),$o(n))return new z(L.UNAVAILABLE,`${t}: ${n}`);throw n}var xm=class n{constructor(t){this.comparator=t?(e,i)=>t(e,i)||ee.comparator(e.key,i.key):(e,i)=>ee.comparator(e.key,i.key),this.keyedMap=Lu(),this.sortedSet=new dt(this.comparator)}static emptySet(t){return new n(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var Mm=class{constructor(){this.W_=new dt(ee.comparator)}track(t){let e=t.doc.key,i=this.W_.get(e);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(e,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(e):t.type===1&&i.type===2?this.W_=this.W_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):se():this.W_=this.W_.insert(e,t)}G_(){let t=[];return this.W_.inorderTraversal((e,i)=>{t.push(i)}),t}},Nl=class n{constructor(t,e,i,r,o,s,a,l,u){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,e,i,r,o){let s=[];return e.forEach(a=>{s.push({type:0,doc:a})}),new n(t,e,xm.emptySet(e),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&gd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var Wb=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}},Kb=class{constructor(){this.queries=EA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,i){let r=X(e),o=r.queries;r.queries=EA(),o.forEach((s,a)=>{for(let l of a.j_)l.onError(i)})})(this,new z(L.ABORTED,"Firestore shutting down"))}};function EA(){return new ur(n=>nO(n),gd)}function BC(n,t){return E(this,null,function*(){let e=X(n),i=3,r=t.query,o=e.queries.get(r);o?!o.H_()&&t.J_()&&(i=2):(o=new Wb,i=t.J_()?0:1);try{switch(i){case 0:o.z_=yield e.onListen(r,!0);break;case 1:o.z_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(s){let a=Hl(s,`Initialization of query '${pl(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,o),o.j_.push(t),t.Z_(e.onlineState),o.z_&&t.X_(o.z_)&&UC(e)})}function jC(n,t){return E(this,null,function*(){let e=X(n),i=t.query,r=3,o=e.queries.get(i);if(o){let s=o.j_.indexOf(t);s>=0&&(o.j_.splice(s,1),o.j_.length===0?r=t.J_()?0:1:!o.H_()&&t.J_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function u5(n,t){let e=X(n),i=!1;for(let r of t){let o=r.query,s=e.queries.get(o);if(s){for(let a of s.j_)a.X_(r)&&(i=!0);s.z_=r}}i&&UC(e)}function d5(n,t,e){let i=X(n),r=i.queries.get(t);if(r)for(let o of r.j_)o.onError(e);i.queries.delete(t)}function UC(n){n.Y_.forEach(t=>{t.next()})}var Qb,DA;(DA=Qb||(Qb={})).ea="default",DA.Cache="cache";var ld=class{constructor(t,e,i){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new Nl(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;let i=e!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;let e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=Nl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Qb.Cache}};var Yb=class{constructor(t,e){this.aa=t,this.byteLength=e}ua(){return"metadata"in this.aa}};var Am=class{constructor(t){this.serializer=t}Es(t){return sr(this.serializer,t)}ds(t){return t.metadata.exists?DO(this.serializer,t.document,!1):zt.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return Nt(t)}},Jb=class{constructor(t,e,i){this.ca=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JO(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++e;let i=Ge.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ha(t){let e=new Map,i=new Am(this.serializer);for(let r of t)if(r.metadata.queries){let o=i.Es(r.metadata.name);for(let s of r.metadata.queries){let a=(e.get(s)||Te()).add(o);e.set(s,a)}}return e}complete(){return E(this,null,function*(){let t=yield JG(this.localStore,new Am(this.serializer),this.documents,this.ca.id),e=this.ha(this.documents);for(let i of this.queries)yield ZG(this.localStore,i,e.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:t}})}};function JO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Om=class{constructor(t){this.key=t}},Rm=class{constructor(t){this.key=t}},Pm=class{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Te(),this.mutatedKeys=Te(),this.Aa=rO(t),this.Ra=new xm(this.Aa)}get Va(){return this.Ta}ma(t,e){let i=e?e.fa:new Mm,r=e?e.Ra:this.Ra,o=e?e.mutatedKeys:this.mutatedKeys,s=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,f)=>{let m=r.get(d),y=_d(this.query,f)?f:null,D=!!m&&this.mutatedKeys.has(m.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?D!==T&&(i.track({type:3,doc:y}),R=!0):this.ga(m,y)||(i.track({type:2,doc:y}),R=!0,(l&&this.Aa(y,l)>0||u&&this.Aa(y,u)<0)&&(a=!0)):!m&&y?(i.track({type:0,doc:y}),R=!0):m&&!y&&(i.track({type:1,doc:m}),R=!0,(l||u)&&(a=!0)),R&&(y?(s=s.add(y),o=T?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),i.track({type:1,doc:d})}return{Ra:s,fa:i,ns:a,mutatedKeys:o}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let o=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;let s=t.fa.G_();s.sort((d,f)=>function(y,D){let T=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return T(y)-T(D)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(i),r=r!=null&&r;let a=e&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new Nl(this.query,t.Ra,o,s,t.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Mm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];let t=this.da;this.da=Te(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let e=[];return t.forEach(i=>{this.da.has(i)||e.push(new Rm(i))}),this.da.forEach(i=>{t.has(i)||e.push(new Om(i))}),e}ba(t){this.Ta=t.Ts,this.da=Te();let e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return Nl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Zb=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},Xb=class{constructor(t){this.key=t,this.va=!1}},eC=class{constructor(t,e,i,r,o,s){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new ur(a=>nO(a),gd),this.Ma=new Map,this.xa=new Set,this.Oa=new dt(ee.comparator),this.Na=new Map,this.La=new od,this.Ba={},this.ka=new Map,this.qa=Al.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function h5(n,t,e=!0){return E(this,null,function*(){let i=Wm(n),r,o=i.Fa.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield ZO(i,t,e,!0),r})}function f5(n,t){return E(this,null,function*(){let e=Wm(n);yield ZO(e,t,!0,!1)})}function ZO(n,t,e,i){return E(this,null,function*(){let r=yield Ol(n.localStore,An(t)),o=r.targetId,s=e?n.sharedClientState.addLocalQueryTarget(o):"not-current",a;return i&&(a=yield $C(n,t,o,s==="current",r.resumeToken)),n.isPrimaryClient&&e&&qm(n.remoteStore,r),a})}function $C(n,t,e,i,r){return E(this,null,function*(){n.Ka=(f,m,y)=>function(T,R,q,te){return E(this,null,function*(){let $=R.view.ma(q);$.ns&&($=yield bm(T.localStore,R.query,!1).then(({documents:M})=>R.view.ma(M,$)));let ae=te&&te.targetChanges.get(R.targetId),ge=te&&te.targetMismatches.get(R.targetId)!=null,pe=R.view.applyChanges($,T.isPrimaryClient,ae,ge);return tC(T,R.targetId,pe.wa),pe.snapshot})}(n,f,m,y);let o=yield bm(n.localStore,t,!0),s=new Pm(t,o.Ts),a=s.ma(o.documents),l=td.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),u=s.applyChanges(a,n.isPrimaryClient,l);tC(n,e,u.wa);let d=new Zb(t,e,s);return n.Fa.set(t,d),n.Ma.has(e)?n.Ma.get(e).push(t):n.Ma.set(e,[t]),u.snapshot})}function p5(n,t,e){return E(this,null,function*(){let i=X(n),r=i.Fa.get(t),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(s=>!gd(s,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Rl(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Pl(i.remoteStore,r.targetId),Fl(i,r.targetId)}).catch(Uo))):(Fl(i,r.targetId),yield Rl(i.localStore,r.targetId,!0))})}function m5(n,t){return E(this,null,function*(){let e=X(n),i=e.Fa.get(t),r=e.Ma.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Pl(e.remoteStore,i.targetId))})}function g5(n,t,e){return E(this,null,function*(){let i=qC(n);try{let r=yield function(s,a){let l=X(s),u=bt.now(),d=a.reduce((y,D)=>y.add(D.key),Te()),f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=Hn(),T=Te();return l.cs.getEntries(y,d).next(R=>{D=R,D.forEach((q,te)=>{te.isValidDocument()||(T=T.add(q))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,D)).next(R=>{f=R;let q=[];for(let te of a){let $=AG(te,f.get(te.key).overlayedDocument);$!=null&&q.push(new Bi(te.key,$,QA($.value.mapValue),Tt.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,q,a)}).next(R=>{m=R;let q=R.applyToLocalDocumentSet(f,T);return l.documentOverlayCache.saveOverlays(y,R.batchId,q)})}).then(()=>({batchId:m.batchId,changes:sO(f)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new dt(De)),u=u.insert(a,l),s.Ba[s.currentUser.toKey()]=u}(i,r.batchId,e),yield $r(i,r.changes),yield $l(i.remoteStore)}catch(r){let o=Hl(r,"Failed to persist write");e.reject(o)}})}function XO(n,t){return E(this,null,function*(){let e=X(n);try{let i=yield QG(e.localStore,t);t.targetChanges.forEach((r,o)=>{let s=e.Na.get(o);s&&(ue(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.va=!0:r.modifiedDocuments.size>0?ue(s.va):r.removedDocuments.size>0&&(ue(s.va),s.va=!1))}),yield $r(e,i,t)}catch(i){yield Uo(i)}})}function SA(n,t,e){let i=X(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.Fa.forEach((o,s)=>{let a=s.view.Z_(t);a.snapshot&&r.push(a.snapshot)}),function(s,a){let l=X(s);l.onlineState=a;let u=!1;l.queries.forEach((d,f)=>{for(let m of f.j_)m.Z_(a)&&(u=!0)}),u&&UC(l)}(i.eventManager,t),r.length&&i.Ca.d_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function _5(n,t,e){return E(this,null,function*(){let i=X(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Na.get(t),o=r&&r.key;if(o){let s=new dt(ee.comparator);s=s.insert(o,zt.newNoDocument(o,me.min()));let a=Te().add(o),l=new ed(me.min(),new Map,new dt(De),s,a);yield XO(i,l),i.Oa=i.Oa.remove(o),i.Na.delete(t),zC(i)}else yield Rl(i.localStore,t,!1).then(()=>Fl(i,t,e)).catch(Uo)})}function y5(n,t){return E(this,null,function*(){let e=X(n),i=t.batch.batchId;try{let r=yield KG(e.localStore,t);HC(e,i,null),GC(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield $r(e,r)}catch(r){yield Uo(r)}})}function v5(n,t,e){return E(this,null,function*(){let i=X(n);try{let r=yield function(s,a){let l=X(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(ue(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(i.localStore,t);HC(i,t,e),GC(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield $r(i,r)}catch(r){yield Uo(r)}})}function w5(n,t){return E(this,null,function*(){let e=X(n);Go(e.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=X(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(e.localStore);if(i===-1)return void t.resolve();let r=e.ka.get(i)||[];r.push(t),e.ka.set(i,r)}catch(i){let r=Hl(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})}function GC(n,t){(n.ka.get(t)||[]).forEach(e=>{e.resolve()}),n.ka.delete(t)}function HC(n,t,e){let i=X(n),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Ba[i.currentUser.toKey()]=r}}function Fl(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Ma.get(t))n.Fa.delete(i),e&&n.Ca.$a(i,e);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach(i=>{n.La.containsKey(i)||eR(n,i)})}function eR(n,t){n.xa.delete(t.path.canonicalString());let e=n.Oa.get(t);e!==null&&(Pl(n.remoteStore,e),n.Oa=n.Oa.remove(t),n.Na.delete(e),zC(n))}function tC(n,t,e){for(let i of e)i instanceof Om?(n.La.addReference(i.key,t),b5(n,i)):i instanceof Rm?(W("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,t),n.La.containsKey(i.key)||eR(n,i.key)):se()}function b5(n,t){let e=t.key,i=e.path.canonicalString();n.Oa.get(e)||n.xa.has(i)||(W("SyncEngine","New document in limbo: "+e),n.xa.add(i),zC(n))}function zC(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let t=n.xa.values().next().value;n.xa.delete(t);let e=new ee(Ge.fromString(t)),i=n.qa.next();n.Na.set(i,new Xb(e)),n.Oa=n.Oa.insert(e,i),qm(n.remoteStore,new Ml(An(jl(e.path)),i,"TargetPurposeLimboResolution",ri.oe))}}function $r(n,t,e){return E(this,null,function*(){let i=X(n),r=[],o=[],s=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{s.push(i.Ka(l,t,e).then(u=>{var d;if((u||e)&&i.isPrimaryClient){let f=u?!u.fromCache:(d=e?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){r.push(u);let f=Pb.Wi(l.targetId,u);o.push(f)}}))}),yield Promise.all(s),i.Ca.d_(r),yield function(l,u){return E(this,null,function*(){let d=X(l);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(u,m=>V.forEach(m.$i,y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>V.forEach(m.Ui,y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!$o(f))throw f;W("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let y=d.os.get(m),D=y.snapshotVersion,T=y.withLastLimboFreeSnapshotVersion(D);d.os=d.os.insert(m,T)}}})}(i.localStore,o))})}function C5(n,t){return E(this,null,function*(){let e=X(n);if(!e.currentUser.isEqual(t)){W("SyncEngine","User change. New user:",t.toKey());let i=yield BO(e.localStore,t);e.currentUser=t,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new z(L.CANCELLED,s))})}),o.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield $r(e,i.hs)}})}function E5(n,t){let e=X(n),i=e.Na.get(t);if(i&&i.va)return Te().add(i.key);{let r=Te(),o=e.Ma.get(t);if(!o)return r;for(let s of o){let a=e.Fa.get(s);r=r.unionWith(a.view.Va)}return r}}function D5(n,t){return E(this,null,function*(){let e=X(n),i=yield bm(e.localStore,t.query,!0),r=t.view.ba(i);return e.isPrimaryClient&&tC(e,t.targetId,r.wa),r})}function S5(n,t){return E(this,null,function*(){let e=X(n);return GO(e.localStore,t).then(i=>$r(e,i))})}function I5(n,t,e,i){return E(this,null,function*(){let r=X(n),o=yield function(a,l){let u=X(a),d=X(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,l).next(m=>m?u.localDocuments.getDocuments(f,m):V.resolve(null)))}(r.localStore,t);o!==null?(e==="pending"?yield $l(r.remoteStore):e==="acknowledged"||e==="rejected"?(HC(r,t,i||null),GC(r,t),function(a,l){X(X(a).mutationQueue).On(l)}(r.localStore,t)):se(),yield $r(r,o)):W("SyncEngine","Cannot apply mutation batch with id: "+t)})}function T5(n,t){return E(this,null,function*(){let e=X(n);if(Wm(e),qC(e),t===!0&&e.Qa!==!0){let i=e.sharedClientState.getAllActiveQueryTargets(),r=yield IA(e,i.toArray());e.Qa=!0,yield zb(e.remoteStore,!0);for(let o of r)qm(e.remoteStore,o)}else if(t===!1&&e.Qa!==!1){let i=[],r=Promise.resolve();e.Ma.forEach((o,s)=>{e.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(Fl(e,s),Rl(e.localStore,s,!0))),Pl(e.remoteStore,s)}),yield r,yield IA(e,i),function(s){let a=X(s);a.Na.forEach((l,u)=>{Pl(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new dt(ee.comparator)}(e),e.Qa=!1,yield zb(e.remoteStore,!1)}})}function IA(n,t,e){return E(this,null,function*(){let i=X(n),r=[],o=[];for(let s of t){let a,l=i.Ma.get(s);if(l&&l.length!==0){a=yield Ol(i.localStore,An(l[0]));for(let u of l){let d=i.Fa.get(u),f=yield D5(i,d);f.snapshot&&o.push(f.snapshot)}}else{let u=yield $O(i.localStore,s);a=yield Ol(i.localStore,u),yield $C(i,tR(u),s,!1,a.resumeToken)}r.push(a)}return i.Ca.d_(o),r})}function tR(n){return tO(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function x5(n){return function(e){return X(X(e).persistence).Qi()}(X(n).localStore)}function M5(n,t,e,i){return E(this,null,function*(){let r=X(n);if(r.Qa)return void W("SyncEngine","Ignoring unexpected query state notification.");let o=r.Ma.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{let s=yield GO(r.localStore,iO(o[0])),a=ed.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Ft.EMPTY_BYTE_STRING);yield $r(r,s,a);break}case"rejected":yield Rl(r.localStore,t,!0),Fl(r,t,i);break;default:se()}})}function A5(n,t,e){return E(this,null,function*(){let i=Wm(n);if(i.Qa){for(let r of t){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){W("SyncEngine","Adding an already active target "+r);continue}let o=yield $O(i.localStore,r),s=yield Ol(i.localStore,o);yield $C(i,tR(o),s.targetId,!1,s.resumeToken),qm(i.remoteStore,s)}for(let r of e)i.Ma.has(r)&&(yield Rl(i.localStore,r,!1).then(()=>{Pl(i.remoteStore,r),Fl(i,r)}).catch(Uo))}})}function Wm(n){let t=X(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=XO.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=E5.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_5.bind(null,t),t.Ca.d_=u5.bind(null,t.eventManager),t.Ca.$a=d5.bind(null,t.eventManager),t}function qC(n){let t=X(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=y5.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=v5.bind(null,t),t}function O5(n,t,e){let i=X(n);(function(o,s,a){return E(this,null,function*(){try{let l=yield s.getMetadata();if(yield function(y,D){let T=X(y),R=Nt(D.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",q=>T.Gr.getBundleMetadata(q,D.id)).then(q=>!!q&&q.createTime.compareTo(R)>=0)}(o.localStore,l))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(JO(l));let u=new Jb(l,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let m=yield u.la(d);m&&a._updateProgress(m),d=yield s.Ua()}let f=yield u.complete();return yield $r(o,f.Ia,void 0),yield function(y,D){let T=X(y);return T.persistence.runTransaction("Save bundle","readwrite",R=>T.Gr.saveBundleMetadata(R,D))}(o.localStore,l),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(l){return yi("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var cd=class{constructor(){this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=yd(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return LO(this.persistence,new wm,t.initialUser,this.serializer)}createPersistence(t){return new ym(vm.Zr,this.serializer)}createSharedClientState(t){return new Dm}terminate(){return E(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Nm=class n extends cd{constructor(t,e,i){super(),this.Wa=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){yield Qg(n.prototype,this,"initialize").call(this,t),yield this.Wa.initialize(this,t),yield qC(this.Wa.syncEngine),yield $l(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(t){return LO(this.persistence,new wm,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){let i=this.persistence.referenceDelegate.garbageCollector;return new _b(i,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){let i=new Nw(e,this.persistence);return new Pw(t.asyncQueue,i)}createPersistence(t){let e=FC(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?_i.withCacheSize(this.cacheSizeBytes):_i.DEFAULT;return new Rb(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,zO(),qp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new Dm}},nC=class n extends Nm{constructor(t,e){super(t,e,!1),this.Wa=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){return E(this,null,function*(){yield Qg(n.prototype,this,"initialize").call(this,t);let e=this.Wa.syncEngine;this.sharedClientState instanceof Hu&&(this.sharedClientState.syncEngine={no:I5.bind(null,e),ro:M5.bind(null,e),io:A5.bind(null,e),Qi:x5.bind(null,e),eo:S5.bind(null,e)},yield this.sharedClientState.start()),yield this.persistence.yi(i=>E(this,null,function*(){yield T5(this.Wa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(t){let e=zO();if(!Hu.D(e))throw new z(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=FC(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Hu(e,t.asyncQueue,i,t.clientId,t.initialUser)}},ud=class{initialize(t,e){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=C5.bind(null,this.syncEngine),yield zb(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Kb}()}createDatastore(t){let e=yd(t.databaseInfo.databaseId),i=function(o){return new Bb(o)}(t.databaseInfo);return function(o,s,a,l){return new $b(o,s,a,l)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,o,s,a){return new Hb(i,r,o,s,a)}(this.localStore,this.datastore,t.asyncQueue,e=>SA(this.syncEngine,e,0),function(){return Sm.D()?new Sm:new Vb}())}createSyncEngine(t,e){return function(r,o,s,a,l,u,d){let f=new eC(r,o,s,a,l,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return E(this,null,function*(){var t,e;yield function(r){return E(this,null,function*(){let o=X(r);W("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ul(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()})}};function TA(n,t=10240){let e=0;return{read(){return E(this,null,function*(){if(e<n.byteLength){let r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})},cancel(){return E(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var kl=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):Rt("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var iC=class{constructor(t,e){this.ja=t,this.serializer=e,this.metadata=new Ht,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.ja.cancel()}getMetadata(){return E(this,null,function*(){return this.metadata.promise})}Ua(){return E(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return E(this,null,function*(){let t=yield this.Ya();if(t===null)return null;let e=this.Ha.decode(t),i=Number(e);isNaN(i)&&this.Za(`length string (${e}) is not valid number`);let r=yield this.Xa(i);return new Yb(JSON.parse(r),t.length+i)})}eu(){return this.buffer.findIndex(t=>t===123)}Ya(){return E(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let t=this.eu();t<0&&this.Za("Reached the end of bundle when a length string is expected.");let e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e})}Xa(t){return E(this,null,function*(){for(;this.buffer.length<t;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let e=this.Ha.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e})}Za(t){throw this.ja.cancel(),new Error(`Invalid bundle format: ${t}`)}tu(){return E(this,null,function*(){let t=yield this.ja.read();if(!t.done){let e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done})}};var rC=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let e=yield function(r,o){return E(this,null,function*(){let s=X(r),a={documents:o.map(f=>nd(s.serializer,f))},l=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ge.emptyPath(),a,o.length),u=new Map;l.forEach(f=>{let m=kG(s.serializer,f);u.set(m.key.toString(),m)});let d=[];return o.forEach(f=>{let m=u.get(f.toString());ue(!!m),d.push(m)}),d})}(this.datastore,t);return e.forEach(i=>this.recordVersion(i)),e})}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Bo(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,i)=>{let r=ee.fromPath(i);this.mutations.push(new Ju(r,this.precondition(r)))}),yield function(i,r){return E(this,null,function*(){let o=X(i),s={writes:r.map(a=>id(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ge.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw se();e=me.min()}let i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new z(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){let e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(me.min())?Tt.exists(!1):Tt.updateTime(e):Tt.none()}preconditionForUpdate(t){let e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(me.min()))throw new z(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tt.updateTime(e)}return Tt.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var oC=class{constructor(t,e,i,r,o){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=o,this.nu=i.maxAttempts,this.t_=new ad(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>E(this,null,function*(){let t=new rC(this.datastore),e=this.su(t);e&&e.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ou(r)}))}).catch(i=>{this.ou(i)})}))}su(t){try{let e=this.updateFunction(t);return!pd(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ou(t){this.nu>0&&this._u(t)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(t)}_u(t){if(t.name==="FirebaseError"){let e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!gO(e)}return!1}};var sC=class{constructor(t,e,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Gt.UNAUTHENTICATED,this.clientId=Qp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>E(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=Hl(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function Wp(n,t){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>E(this,null,function*(){i.isEqual(r)||(yield BO(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function aC(n,t){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield WC(n);W("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>CA(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>CA(t.remoteStore,r)),n._onlineComponents=t})}function nR(n){return n.name==="FirebaseError"?n.code===L.FAILED_PRECONDITION||n.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function WC(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wp(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!nR(e))throw e;yi("Error using user provided cache. Falling back to memory cache: "+e),yield Wp(n,new cd)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield Wp(n,new cd);return n._offlineComponents})}function Km(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield aC(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield aC(n,new ud))),n._onlineComponents})}function iR(n){return WC(n).then(t=>t.persistence)}function KC(n){return WC(n).then(t=>t.localStore)}function rR(n){return Km(n).then(t=>t.remoteStore)}function QC(n){return Km(n).then(t=>t.syncEngine)}function R5(n){return Km(n).then(t=>t.datastore)}function Vl(n){return E(this,null,function*(){let t=yield Km(n),e=t.eventManager;return e.onListen=h5.bind(null,t.syncEngine),e.onUnlisten=p5.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=f5.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=m5.bind(null,t.syncEngine),e})}function P5(n){return n.asyncQueue.enqueue(()=>E(this,null,function*(){let t=yield iR(n),e=yield rR(n);return t.setNetworkEnabled(!0),function(r){let o=X(r);return o.L_.delete(0),vd(o)}(e)}))}function N5(n){return n.asyncQueue.enqueue(()=>E(this,null,function*(){let t=yield iR(n),e=yield rR(n);return t.setNetworkEnabled(!1),function(r){return E(this,null,function*(){let o=X(r);o.L_.add(0),yield Ul(o),o.q_.set("Offline")})}(e)}))}function F5(n,t){let e=new Ht;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(r,o,s){return E(this,null,function*(){try{let a=yield function(u,d){let f=X(u);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,d))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new z(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=Hl(a,`Failed to get document '${o} from cache`);s.reject(l)}})}(yield KC(n),t,e)})),e.promise}function oR(n,t,e={}){let i=new Ht;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(o,s,a,l,u){let d=new kl({next:m=>{s.enqueueAndForget(()=>jC(o,f));let y=m.docs.has(a);!y&&m.fromCache?u.reject(new z(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?u.reject(new z(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new ld(jl(a.path),d,{includeMetadataChanges:!0,_a:!0});return BC(o,f)}(yield Vl(n),n.asyncQueue,t,e,i)})),i.promise}function k5(n,t){let e=new Ht;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(r,o,s){return E(this,null,function*(){try{let a=yield bm(r,o,!0),l=new Pm(o,a.Ts),u=l.ma(a.documents),d=l.applyChanges(u,!1);s.resolve(d.snapshot)}catch(a){let l=Hl(a,`Failed to execute query '${o} against cache`);s.reject(l)}})}(yield KC(n),t,e)})),e.promise}function sR(n,t,e={}){let i=new Ht;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(o,s,a,l,u){let d=new kl({next:m=>{s.enqueueAndForget(()=>jC(o,f)),m.fromCache&&l.source==="server"?u.reject(new z(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new ld(a,d,{includeMetadataChanges:!0,_a:!0});return BC(o,f)}(yield Vl(n),n.asyncQueue,t,e,i)})),i.promise}function V5(n,t){let e=new kl(t);return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(r,o){X(r).Y_.add(o),o.next()}(yield Vl(n),e)})),()=>{e.za(),n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(r,o){X(r).Y_.delete(o)}(yield Vl(n),e)}))}}function L5(n,t,e,i){let r=function(s,a){let l;return l=typeof s=="string"?yO().encode(s):s,function(d,f){return new iC(d,f)}(function(d,f){if(d instanceof Uint8Array)return TA(d,f);if(d instanceof ArrayBuffer)return TA(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(e,yd(t));n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){O5(yield QC(n),r,i)}))}function B5(n,t){return n.asyncQueue.enqueue(()=>E(this,null,function*(){return function(i,r){let o=X(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,r))}(yield KC(n),t)}))}function aR(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var xA=new Map;function YC(n,t,e){if(!e)throw new z(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function JC(n,t,e,i){if(t===!0&&i===!0)throw new z(L.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function MA(n){if(!ee.isDocumentKey(n))throw new z(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AA(n){if(ee.isDocumentKey(n))throw new z(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":se()}function He(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new z(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=Qm(n);throw new z(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function lR(n,t){if(t<=0)throw new z(L.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}var Fm=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new z(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new z(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}JC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aR((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},zs=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new z(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fm(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Ew;switch(i.type){case"firstParty":return new Tw(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=xA.get(e);i&&(W("ComponentProvider","Removing Datastore"),xA.delete(e),i.terminate())}(this),Promise.resolve()}};function cR(n,t,e,i={}){var r;let o=(n=He(n,zs))._getSettings(),s=`${t}:${e}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&yi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Gt.MOCK_USER;else{a=HE(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new z(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Gt(u)}n._authCredentials=new Dw(new Kp(a,l))}}var un=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},ct=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},ar=class n extends un{constructor(t,e,i){super(t,e,jl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new ct(this.firestore,null,new ee(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function ZC(n,t,...e){if(n=mt(n),YC("collection","path",t),n instanceof zs){let i=Ge.fromString(t,...e);return AA(i),new ar(n,null,i)}{if(!(n instanceof ct||n instanceof ar))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ge.fromString(t,...e));return AA(i),new ar(n.firestore,null,i)}}function uR(n,t){if(n=He(n,zs),YC("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new un(n,null,function(i){return new Li(Ge.emptyPath(),i)}(t))}function wd(n,t,...e){if(n=mt(n),arguments.length===1&&(t=Qp.newId()),YC("doc","path",t),n instanceof zs){let i=Ge.fromString(t,...e);return MA(i),new ct(n,null,new ee(i))}{if(!(n instanceof ct||n instanceof ar))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ge.fromString(t,...e));return MA(i),new ct(n.firestore,n instanceof ar?n.converter:null,new ee(i))}}function XC(n,t){return n=mt(n),t=mt(t),(n instanceof ct||n instanceof ar)&&(t instanceof ct||t instanceof ar)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function e1(n,t){return n=mt(n),t=mt(t),n instanceof un&&t instanceof un&&n.firestore===t.firestore&&gd(n._query,t._query)&&n.converter===t.converter}var lC=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new ad(this,"async_queue_retry"),this.Eu=()=>{let e=qp();e&&W("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()};let t=qp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;let e=qp();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});let e=new Ht;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}Ru(){return E(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(t){if(!$o(t))throw t;W("AsyncQueue","Operation failed with retryable error: "+t)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(t){let e=this.au.then(()=>(this.Pu=!0,t().catch(i=>{this.hu=i,this.Pu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw Rt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=e,e}enqueueAfterDelay(t,e,i){this.du(),this.Tu.indexOf(t)>-1&&(e=0);let r=qb.createAndSchedule(this,t,e,i,o=>this.Vu(o));return this.lu.push(r),r}du(){this.hu&&se()}verifyOperationInProgress(){}mu(){return E(this,null,function*(){let t;do t=this.au,yield t;while(t!==this.au)})}fu(t){for(let e of this.lu)if(e.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.lu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){let e=this.lu.indexOf(t);this.lu.splice(e,1)}};function cC(n){return function(e,i){if(typeof e!="object"||e===null)return!1;let r=e;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}var uC=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ht,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}};var dR=-1,pt=class extends zs{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=function(){return new lC}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||hR(this),this._firestoreClient.terminate()}};function Kt(n){return n._firestoreClient||hR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function hR(n){var t,e,i;let r=n._freezeSettings(),o=function(a,l,u,d){return new Fw(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,aR(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new sC(n._authCredentials,n._appCheckCredentials,n._queue,o),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function fR(n,t){CR(n=He(n,pt));let e=Kt(n);if(e._uninitializedComponentsProvider)throw new z(L.FAILED_PRECONDITION,"SDK cache is already specified.");yi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=n._freezeSettings(),r=new ud;return mR(e,r,new Nm(r,i.cacheSizeBytes,t?.forceOwnership))}function pR(n){CR(n=He(n,pt));let t=Kt(n);if(t._uninitializedComponentsProvider)throw new z(L.FAILED_PRECONDITION,"SDK cache is already specified.");yi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings(),i=new ud;return mR(t,i,new nC(i,e.cacheSizeBytes))}function mR(n,t,e){let i=new Ht;return n.asyncQueue.enqueue(()=>E(this,null,function*(){try{yield Wp(n,e),yield aC(n,t),i.resolve()}catch(r){let o=r;if(!nR(o))throw o;yi("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function gR(n){if(n._initialized&&!n._terminated)throw new z(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new Ht;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{yield function(i){return E(this,null,function*(){if(!Ro.D())return Promise.resolve();let r=i+"main";yield Ro.delete(r)})}(FC(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function _R(n){return function(e){let i=new Ht;return e.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return w5(yield QC(e),i)})),i.promise}(Kt(n=He(n,pt)))}function yR(n){return P5(Kt(n=He(n,pt)))}function vR(n){return N5(Kt(n=He(n,pt)))}function wR(n,t){let e=Kt(n=He(n,pt)),i=new uC;return L5(e,n._databaseId,t,i),i}function bR(n,t){return B5(Kt(n=He(n,pt)),t).then(e=>e?new un(n,null,e.query):null)}function CR(n){if(n._initialized||n._terminated)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var dr=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(Ft.fromBase64String(t))}catch(e){throw new z(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(Ft.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var ji=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new z(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var jr=class{constructor(t){this._methodName=t}};var qs=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new z(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new z(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return De(this._lat,t._lat)||De(this._long,t._long)}};var dd=class{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}};var j5=/^__.*__$/,dC=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Bi(t,this.data,this.fieldMask,e,this.fieldTransforms):new Lo(t,this.data,e,this.fieldTransforms)}},km=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Bi(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function ER(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}var Vm=class n{constructor(t,e,i,r,o,s){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Su({path:i,Du:!1});return r.vu(t),r}Cu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return Lm(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(t.length===0)throw this.Mu("Document fields must not be empty");if(ER(this.wu)&&j5.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}},hC=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||yd(t)}Nu(t,e,i,r=!1){return new Vm({wu:t,methodName:e,Ou:i,path:Pt.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ys(n){let t=n._freezeSettings(),e=yd(n._databaseId);return new hC(n._databaseId,!!t.ignoreUndefinedProperties,e)}function Ym(n,t,e,i,r,o={}){let s=n.Nu(o.merge||o.mergeFields?2:0,t,e,r);i1("Data must be an object, but it was:",s,i);let a=IR(i,s),l,u;if(o.merge)l=new oi(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=_C(t,f,e);if(!s.contains(m))throw new z(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);xR(d,m)||d.push(m)}l=new oi(d),u=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=s.fieldTransforms;return new dC(new wn(a),l,u)}var hd=class n extends jr{_toFieldTransform(t){if(t.wu!==2)throw t.wu===1?t.Mu(`${this._methodName}() can only appear at the top level of your update data`):t.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof n}};function DR(n,t,e){return new Vm({wu:3,Ou:t.settings.Ou,methodName:n._methodName,Du:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var fC=class n extends jr{_toFieldTransform(t){return new $s(t.path,new ko)}isEqual(t){return t instanceof n}},pC=class n extends jr{constructor(t,e){super(t),this.Lu=e}_toFieldTransform(t){let e=DR(this,t,!0),i=this.Lu.map(o=>Js(o,e)),r=new Lr(i);return new $s(t.path,r)}isEqual(t){return t instanceof n&&Zg(this.Lu,t.Lu)}},mC=class n extends jr{constructor(t,e){super(t),this.Lu=e}_toFieldTransform(t){let e=DR(this,t,!0),i=this.Lu.map(o=>Js(o,e)),r=new Br(i);return new $s(t.path,r)}isEqual(t){return t instanceof n&&Zg(this.Lu,t.Lu)}},gC=class n extends jr{constructor(t,e){super(t),this.Bu=e}_toFieldTransform(t){let e=new Vo(t.serializer,cO(t.serializer,this.Bu));return new $s(t.path,e)}isEqual(t){return t instanceof n&&this.Bu===t.Bu}};function t1(n,t,e,i){let r=n.Nu(1,t,e);i1("Data must be an object, but it was:",r,i);let o=[],s=wn.empty();Qs(i,(l,u)=>{let d=r1(t,l,e);u=mt(u);let f=r.Cu(d);if(u instanceof hd)o.push(d);else{let m=Js(u,f);m!=null&&(o.push(d),s.set(d,m))}});let a=new oi(o);return new km(s,a,r.fieldTransforms)}function n1(n,t,e,i,r,o){let s=n.Nu(1,t,e),a=[_C(t,i,e)],l=[r];if(o.length%2!=0)throw new z(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(_C(t,o[m])),l.push(o[m+1]);let u=[],d=wn.empty();for(let m=a.length-1;m>=0;--m)if(!xR(u,a[m])){let y=a[m],D=l[m];D=mt(D);let T=s.Cu(y);if(D instanceof hd)u.push(y);else{let R=Js(D,T);R!=null&&(u.push(y),d.set(y,R))}}let f=new oi(u);return new km(d,f,s.fieldTransforms)}function SR(n,t,e,i=!1){return Js(e,n.Nu(i?4:3,t))}function Js(n,t){if(TR(n=mt(n)))return i1("Unsupported field value:",t,n),IR(n,t);if(n instanceof jr)return function(i,r){if(!ER(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Du&&t.wu!==4)throw t.Mu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let l=Js(a,r.Fu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return cO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=bt.fromDate(i);return{timestampValue:xl(r.serializer,o)}}if(i instanceof bt){let o=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:xl(r.serializer,o)}}if(i instanceof qs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof dr)return{bytesValue:vO(r.serializer,i._byteString)};if(i instanceof ct){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:RC(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof dd)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return OC(a.serializer,l)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${Qm(i)}`)}(n,t)}function IR(n,t){let e={};return zA(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qs(n,(i,r)=>{let o=Js(r,t.bu(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function TR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bt||n instanceof qs||n instanceof dr||n instanceof ct||n instanceof jr||n instanceof dd)}function i1(n,t,e){if(!TR(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=Qm(e);throw i==="an object"?t.Mu(n+" a custom object"):t.Mu(n+" "+i)}}function _C(n,t,e){if((t=mt(t))instanceof ji)return t._internalPath;if(typeof t=="string")return r1(n,t);throw Lm("Field path arguments must be of type string or ",n,!1,void 0,e)}var U5=new RegExp("[~\\*/\\[\\]]");function r1(n,t,e){if(t.search(U5)>=0)throw Lm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ji(...t.split("."))._internalPath}catch{throw Lm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Lm(n,t,e,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new z(L.INVALID_ARGUMENT,a+n+l)}function xR(n,t){return n.some(e=>e.isEqual(t))}var Ws=class{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new yC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(Jm("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},yC=class extends Ws{data(){return super.data()}};function Jm(n,t){return typeof t=="string"?r1(n,t):t instanceof ji?t._internalPath:t._delegate._internalPath}function MR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var fd=class{},Ks=class extends fd{};function Gr(n,t,...e){let i=[];t instanceof fd&&i.push(t),i=i.concat(e),function(o){let s=o.filter(l=>l instanceof vC).length,a=o.filter(l=>l instanceof Bm).length;if(s>1||s>0&&a>0)throw new z(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var Bm=class n extends Ks{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=this._parse(t);return BR(t._query,e),new un(t.firestore,t.converter,Kw(t._query,e))}_parse(t){let e=Ys(t.firestore);return function(o,s,a,l,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){RA(f,d);let y=[];for(let D of f)y.push(OA(l,o,D));m={arrayValue:{values:y}}}else m=OA(l,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||RA(f,d),m=SR(a,s,f,d==="in"||d==="not-in");return Ve.create(u,d,m)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function AR(n,t,e){let i=t,r=Jm("where",n);return Bm._create(r,i,e)}var vC=class n extends fd{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:tt.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let l of a)BR(s,l),s=Kw(s,l)}(t._query,e),new un(t.firestore,t.converter,Kw(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var wC=class n extends Ks{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new n(t,e)}_apply(t){let e=function(r,o,s){if(r.startAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new js(o,s)}(t._query,this._field,this._direction);return new un(t.firestore,t.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new Li(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}};function OR(n,t="asc"){let e=t,i=Jm("orderBy",n);return wC._create(i,e)}var jm=class n extends Ks{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){return new un(t.firestore,t.converter,om(t._query,this._limit,this._limitType))}};function RR(n){return lR("limit",n),jm._create("limit",n,"F")}function PR(n){return lR("limitToLast",n),jm._create("limitToLast",n,"L")}var Um=class n extends Ks{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=LR(t,this.type,this._docOrFields,this._inclusive);return new un(t.firestore,t.converter,function(r,o){return new Li(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(t._query,e))}};function NR(...n){return Um._create("startAt",n,!0)}function FR(...n){return Um._create("startAfter",n,!1)}var $m=class n extends Ks{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=LR(t,this.type,this._docOrFields,this._inclusive);return new un(t.firestore,t.converter,function(r,o){return new Li(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(t._query,e))}};function kR(...n){return $m._create("endBefore",n,!1)}function VR(...n){return $m._create("endAt",n,!0)}function LR(n,t,e,i){if(e[0]=mt(e[0]),e[0]instanceof Ws)return function(o,s,a,l,u){if(!l)throw new z(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of wl(o))if(f.field.isKeyField())d.push(Bs(s,l.key));else{let m=l.data.field(f.field);if(Hm(m))throw new z(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=f.field.canonicalString();throw new z(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new cr(d,u)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{let r=Ys(n.firestore);return function(s,a,l,u,d,f){let m=s.explicitOrderBy;if(d.length>m.length)throw new z(L.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<d.length;D++){let T=d[D];if(m[D].field.isKeyField()){if(typeof T!="string")throw new z(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof T}`);if(!MC(s)&&T.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${T}' contains a slash.`);let R=s.path.child(Ge.fromString(T));if(!ee.isDocumentKey(R))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);let q=new ee(R);y.push(Bs(a,q))}else{let R=SR(l,u,T);y.push(R)}}return new cr(y,f)}(n._query,n.firestore._databaseId,r,t,e,i)}}function OA(n,t,e){if(typeof(e=mt(e))=="string"){if(e==="")throw new z(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MC(t)&&e.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let i=t.path.child(Ge.fromString(e));if(!ee.isDocumentKey(i))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Bs(n,new ee(i))}if(e instanceof ct)return Bs(n,e._key);throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qm(e)}.`)}function RA(n,t){if(!Array.isArray(n)||n.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function BR(n,t){let e=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var Ll=class{convertValue(t,e="none"){switch(Ls(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ft(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Po(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw se()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return Qs(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,r;let o=(r=(i=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>ft(s.doubleValue));return new dd(o)}convertGeoPoint(t){return new qs(ft(t.latitude),ft(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=TC(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Ku(t));default:return null}}convertTimestamp(t){let e=Vr(t);return new bt(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=Ge.fromString(t);ue(AO(i));let r=new No(i.get(1),i.get(3)),o=new ee(i.popFirst(5));return r.isEqual(e)||Rt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}};function Zm(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var bC=class extends Ll{constructor(t){super(),this.firestore=t}convertBytes(t){return new dr(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new ct(this.firestore,null,e)}};var kr=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},wi=class extends Ws{constructor(t,e,i,r,o,s){super(t,e,i,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new Ao(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(Jm("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},Ao=class extends wi{data(t={}){return super.data(t)}},Ui=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new kr(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Ao(this._firestore,this._userDataWriter,i.key,i,new kr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new z(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let l=new Ao(r._firestore,r._userDataWriter,a.doc.key,a.doc,new kr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Ao(r._firestore,r._userDataWriter,a.doc.key,a.doc,new kr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:$5(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function $5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}function o1(n,t){return n instanceof wi&&t instanceof wi?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(n._document===null?t._document===null:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Ui&&t instanceof Ui&&n._firestore===t._firestore&&e1(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function jR(n){n=He(n,ct);let t=He(n.firestore,pt);return oR(Kt(t),n._key).then(e=>c1(t,n,e))}var Ur=class extends Ll{constructor(t){super(),this.firestore=t}convertBytes(t){return new dr(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new ct(this.firestore,null,e)}};function UR(n){n=He(n,ct);let t=He(n.firestore,pt),e=Kt(t),i=new Ur(t);return F5(e,n._key).then(r=>new wi(t,i,n._key,r,new kr(r!==null&&r.hasLocalMutations,!0),n.converter))}function $R(n){n=He(n,ct);let t=He(n.firestore,pt);return oR(Kt(t),n._key,{source:"server"}).then(e=>c1(t,n,e))}function GR(n){n=He(n,un);let t=He(n.firestore,pt),e=Kt(t),i=new Ur(t);return MR(n._query),sR(e,n._query).then(r=>new Ui(t,i,n,r))}function HR(n){n=He(n,un);let t=He(n.firestore,pt),e=Kt(t),i=new Ur(t);return k5(e,n._query).then(r=>new Ui(t,i,n,r))}function zR(n){n=He(n,un);let t=He(n.firestore,pt),e=Kt(t),i=new Ur(t);return sR(e,n._query,{source:"server"}).then(r=>new Ui(t,i,n,r))}function s1(n,t,e){n=He(n,ct);let i=He(n.firestore,pt),r=Zm(n.converter,t,e);return zl(i,[Ym(Ys(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,Tt.none())])}function a1(n,t,e,...i){n=He(n,ct);let r=He(n.firestore,pt),o=Ys(r),s;return s=typeof(t=mt(t))=="string"||t instanceof ji?n1(o,"updateDoc",n._key,t,e,i):t1(o,"updateDoc",n._key,t),zl(r,[s.toMutation(n._key,Tt.exists(!0))])}function qR(n){return zl(He(n.firestore,pt),[new Bo(n._key,Tt.none())])}function WR(n,t){let e=He(n.firestore,pt),i=wd(n),r=Zm(n.converter,t);return zl(e,[Ym(Ys(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Tt.exists(!1))]).then(()=>i)}function l1(n,...t){var e,i,r;n=mt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||cC(t[s])||(o=t[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(cC(t[s])){let f=t[s];t[s]=(e=f.next)===null||e===void 0?void 0:e.bind(f),t[s+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),t[s+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let l,u,d;if(n instanceof ct)u=He(n.firestore,pt),d=jl(n._key.path),l={next:f=>{t[s]&&t[s](c1(u,n,f))},error:t[s+1],complete:t[s+2]};else{let f=He(n,un);u=He(f.firestore,pt),d=f._query;let m=new Ur(u);l={next:y=>{t[s]&&t[s](new Ui(u,m,f,y))},error:t[s+1],complete:t[s+2]},MR(n._query)}return function(m,y,D,T){let R=new kl(T),q=new ld(y,R,D);return m.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return BC(yield Vl(m),q)})),()=>{R.za(),m.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return jC(yield Vl(m),q)}))}}(Kt(u),d,a,l)}function KR(n,t){return V5(Kt(n=He(n,pt)),cC(t)?t:{next:t})}function zl(n,t){return function(i,r){let o=new Ht;return i.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return g5(yield QC(i),r,o)})),o.promise}(Kt(n),t)}function c1(n,t,e){let i=e.docs.get(t._key),r=new Ur(n);return new wi(n,r,t._key,i,new kr(e.hasPendingWrites,e.fromCache),t.converter)}var G5={maxAttempts:5};var Gm=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ys(t)}set(t,e,i){this._verifyNotCommitted();let r=xo(t,this._firestore),o=Zm(r.converter,e,i),s=Ym(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,Tt.none())),this}update(t,e,i,...r){this._verifyNotCommitted();let o=xo(t,this._firestore),s;return s=typeof(e=mt(e))=="string"||e instanceof ji?n1(this._dataReader,"WriteBatch.update",o._key,e,i,r):t1(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,Tt.exists(!0))),this}delete(t){this._verifyNotCommitted();let e=xo(t,this._firestore);return this._mutations=this._mutations.concat(new Bo(e._key,Tt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function xo(n,t){if((n=mt(n)).firestore!==t)throw new z(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var CC=class extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=Ys(e)}get(e){let i=xo(e,this._firestore),r=new bC(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return se();let s=o[0];if(s.isFoundDocument())return new Ws(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new Ws(this._firestore,r,i._key,null,i.converter);throw se()})}set(e,i,r){let o=xo(e,this._firestore),s=Zm(o.converter,i,r),a=Ym(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(e,i,r,...o){let s=xo(e,this._firestore),a;return a=typeof(i=mt(i))=="string"||i instanceof ji?n1(this._dataReader,"Transaction.update",s._key,i,r,o):t1(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(e){let i=xo(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){let e=xo(t,this._firestore),i=new Ur(this._firestore);return super.get(t).then(r=>new wi(this._firestore,i,e._key,r._document,new kr(!1,!1),e.converter))}};function QR(n,t,e){n=He(n,pt);let i=Object.assign(Object.assign({},G5),e);return function(o){if(o.maxAttempts<1)throw new z(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let l=new Ht;return o.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let u=yield R5(o);new oC(o.asyncQueue,u,a,s,l).ru()})),l.promise}(Kt(n),r=>t(new CC(n,r)),i)}function YR(){return new hd("deleteField")}function JR(){return new fC("serverTimestamp")}function ZR(...n){return new pC("arrayUnion",n)}function XR(...n){return new mC("arrayRemove",n)}function eP(n){return new gC("increment",n)}(function(t,e=!0){(function(r){Bl=r})(WE),Dc(new ts("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new pt(new Sw(i.getProvider("auth-internal")),new Mw(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new No(u.options.projectId,d)}(s,r),s);return o=Object.assign({useFetchStreams:e},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),si(OM,"4.7.0",t),si(OM,"4.7.0","esm2017")})();var H5="@firebase/firestore-compat",z5="0.3.35";function m1(n,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new z("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function tP(){if(typeof Uint8Array>"u")throw new z("unimplemented","Uint8Arrays are not available in this environment.")}function nP(){if(!qA())throw new z("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Xm=class n{constructor(t){this._delegate=t}static fromBase64String(t){return nP(),new n(dr.fromBase64String(t))}static fromUint8Array(t){return tP(),new n(dr.fromUint8Array(t))}toBase64(){return nP(),this._delegate.toBase64()}toUint8Array(){return tP(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function u1(n){return q5(n,["next","error","complete"])}function q5(n,t){if(typeof n!="object"||n===null)return!1;let e=n;for(let i of t)if(i in e&&typeof e[i]=="function")return!0;return!1}var d1=class{enableIndexedDbPersistence(t,e){return fR(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return pR(t._delegate)}clearIndexedDbPersistence(t){return gR(t._delegate)}},eg=class{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof No||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){let e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&yi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,i={}){cR(this._delegate,t,e,i)}enableNetwork(){return yR(this._delegate)}disableNetwork(){return vR(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,JC("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return _R(this._delegate)}onSnapshotsInSync(t){return KR(this._delegate,t)}get app(){if(!this._appCompat)throw new z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Kl(this,ZC(this._delegate,t))}catch(e){throw On(e,"collection()","Firestore.collection()")}}doc(t){try{return new hr(this,wd(this._delegate,t))}catch(e){throw On(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ta(this,uR(this._delegate,t))}catch(e){throw On(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return QR(this._delegate,e=>t(new tg(this,e)))}batch(){return Kt(this._delegate),new ng(new Gm(this._delegate,t=>zl(this._delegate,t)))}loadBundle(t){return wR(this._delegate,t)}namedQuery(t){return bR(this._delegate,t).then(e=>e?new ta(this,e):null)}},ql=class extends Ll{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xm(new dr(t))}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return hr.forKey(e,this.firestore,null)}};function W5(n){PA(n)}var tg=class{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ql(t)}get(t){let e=Zs(t);return this._delegate.get(e).then(i=>new Xs(this._firestore,new wi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){let r=Zs(t);return i?(m1("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){let o=Zs(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){let e=Zs(t);return this._delegate.delete(e),this}},ng=class{constructor(t){this._delegate=t}set(t,e,i){let r=Zs(t);return i?(m1("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){let o=Zs(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){let e=Zs(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}},Wl=class n{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){let i=new Ao(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ea(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){let i=n.INSTANCES,r=i.get(t);r||(r=new WeakMap,i.set(t,r));let o=r.get(e);return o||(o=new n(t,new ql(t),e),r.set(e,o)),o}};Wl.INSTANCES=new WeakMap;var hr=class n{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ql(t)}static forPath(t,e,i){if(t.length%2!==0)throw new z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new n(e,new ct(e._delegate,i,new ee(t)))}static forKey(t,e,i){return new n(e,new ct(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Kl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Kl(this.firestore,ZC(this._delegate,t))}catch(e){throw On(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=mt(t),t instanceof ct?XC(this._delegate,t):!1}set(t,e){e=m1("DocumentReference.set",e);try{return e?s1(this._delegate,t,e):s1(this._delegate,t)}catch(i){throw On(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return arguments.length===1?a1(this._delegate,t):a1(this._delegate,t,e,...i)}catch(r){throw On(r,"updateDoc()","DocumentReference.update()")}}delete(){return qR(this._delegate)}onSnapshot(...t){let e=iP(t),i=rP(t,r=>new Xs(this.firestore,new wi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return l1(this._delegate,e,i)}get(t){let e;return t?.source==="cache"?e=UR(this._delegate):t?.source==="server"?e=$R(this._delegate):e=jR(this._delegate),e.then(i=>new Xs(this.firestore,new wi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(Wl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function On(n,t,e){return n.message=n.message.replace(t,e),n}function iP(n){for(let t of n)if(typeof t=="object"&&!u1(t))return t;return{}}function rP(n,t){var e,i;let r;return u1(n[0])?r=n[0]:u1(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(t(o))},error:(e=r.error)===null||e===void 0?void 0:e.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Xs=class{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new hr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return o1(this._delegate,t._delegate)}},ea=class extends Xs{data(t){let e=this._delegate.data(t);return this._delegate._converter||NA(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}},ta=class n{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ql(t)}where(t,e,i){try{return new n(this.firestore,Gr(this._delegate,AR(t,e,i)))}catch(r){throw On(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new n(this.firestore,Gr(this._delegate,OR(t,e)))}catch(i){throw On(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new n(this.firestore,Gr(this._delegate,RR(t)))}catch(e){throw On(e,"limit()","Query.limit()")}}limitToLast(t){try{return new n(this.firestore,Gr(this._delegate,PR(t)))}catch(e){throw On(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new n(this.firestore,Gr(this._delegate,NR(...t)))}catch(e){throw On(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new n(this.firestore,Gr(this._delegate,FR(...t)))}catch(e){throw On(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new n(this.firestore,Gr(this._delegate,kR(...t)))}catch(e){throw On(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new n(this.firestore,Gr(this._delegate,VR(...t)))}catch(e){throw On(e,"endAt()","Query.endAt()")}}isEqual(t){return e1(this._delegate,t._delegate)}get(t){let e;return t?.source==="cache"?e=HR(this._delegate):t?.source==="server"?e=zR(this._delegate):e=GR(this._delegate),e.then(i=>new bd(this.firestore,new Ui(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){let e=iP(t),i=rP(t,r=>new bd(this.firestore,new Ui(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return l1(this._delegate,e,i)}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(Wl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},h1=class{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new ea(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},bd=class{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ta(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new ea(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new h1(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new ea(this._firestore,i))})}isEqual(t){return o1(this._delegate,t._delegate)}},Kl=class n extends ta{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let t=this._delegate.parent;return t?new hr(this.firestore,t):null}doc(t){try{return t===void 0?new hr(this.firestore,wd(this._delegate)):new hr(this.firestore,wd(this._delegate,t))}catch(e){throw On(e,"doc()","CollectionReference.doc()")}}add(t){return WR(this._delegate,t).then(e=>new hr(this.firestore,e))}isEqual(t){return XC(this._delegate,t._delegate)}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(Wl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function Zs(n){return He(n,ct)}var f1=class n{constructor(...t){this._delegate=new ji(...t)}static documentId(){return new n(Pt.keyField().canonicalString())}isEqual(t){return t=mt(t),t instanceof ji?this._delegate._internalPath.isEqual(t._internalPath):!1}};var p1=class n{constructor(t){this._delegate=t}static serverTimestamp(){let t=JR();return t._methodName="FieldValue.serverTimestamp",new n(t)}static delete(){let t=YR();return t._methodName="FieldValue.delete",new n(t)}static arrayUnion(...t){let e=ZR(...t);return e._methodName="FieldValue.arrayUnion",new n(e)}static arrayRemove(...t){let e=XR(...t);return e._methodName="FieldValue.arrayRemove",new n(e)}static increment(t){let e=eP(t);return e._methodName="FieldValue.increment",new n(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}};var K5={Firestore:eg,GeoPoint:qs,Timestamp:bt,Blob:Xm,Transaction:tg,WriteBatch:ng,DocumentReference:hr,DocumentSnapshot:Xs,Query:ta,QueryDocumentSnapshot:ea,QuerySnapshot:bd,CollectionReference:Kl,FieldPath:f1,FieldValue:p1,setLogLevel:W5,CACHE_SIZE_UNLIMITED:dR};function Q5(n,t){n.INTERNAL.registerComponent(new ts("firestore-compat",e=>{let i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},K5)))}function Y5(n){Q5(n,(t,e)=>new eg(t,e,new d1)),n.registerVersion(H5,z5)}Y5(nn);function J5(n,t=Da){return new ye(e=>{let i;return t!=null?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}function oP(n,t){return J5(n,t)}function Z5(n,t){return oP(n,t).pipe(no(void 0),Pc(),ne(e=>{let[i,r]=e;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function y1(n,t){return oP(n,t).pipe(ne(e=>({payload:e,type:"query"})))}var ig=class{ref;afs;constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){let i=this.ref.collection(t),{ref:r,query:o}=uP(i,e);return new og(r,o,this.afs)}snapshotChanges(){return Z5(this.ref,this.afs.schedulers.outsideAngular).pipe(Gn)}valueChanges(t={}){return this.snapshotChanges().pipe(ne(({payload:e})=>t.idField?Ee(Y({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Le(this.ref.get(t)).pipe(Gn)}};function rg(n,t){return y1(n,t).pipe(no(void 0),Pc(),ne(e=>{let[i,r]=e,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{let u=o.find(f=>f.doc.ref.isEqual(a.ref)),d=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function sP(n,t,e){return rg(n,e).pipe(ss((i,r)=>X5(i,r.map(o=>o.payload),t),[]),Th(),ne(i=>i.map(r=>({type:r.type,payload:r}))))}function X5(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=eH(n,i))}),n}function g1(n,t,e,...i){let r=n.slice();return r.splice(t,e,...i),r}function eH(n,t){switch(t.type){case"added":if(!(n[t.newIndex]&&n[t.newIndex].doc.ref.isEqual(t.doc.ref)))return g1(n,t.newIndex,0,t);break;case"modified":if(n[t.oldIndex]==null||n[t.oldIndex].doc.ref.isEqual(t.doc.ref))if(t.oldIndex!==t.newIndex){let e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}else return g1(n,t.newIndex,1,t);break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return g1(n,t.oldIndex,1);break}return n}function aP(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var og=class{ref;query;afs;constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=rg(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(ne(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(no(void 0),Pc(),_t(([i,r])=>r.length>0||!i),ne(([,i])=>i),Gn)}auditTrail(t){return this.stateChanges(t).pipe(ss((e,i)=>[...e,...i],[]))}snapshotChanges(t){let e=aP(t);return sP(this.query,e,this.afs.schedulers.outsideAngular).pipe(Gn)}valueChanges(t={}){return y1(this.query,this.afs.schedulers.outsideAngular).pipe(ne(e=>e.payload.docs.map(i=>t.idField?Ee(Y({},i.data()),{[t.idField]:i.id}):i.data())),Gn)}get(t){return Le(this.query.get(t)).pipe(Gn)}add(t){return this.ref.add(t)}doc(t){return new ig(this.ref.doc(t),this.afs)}},_1=class{query;afs;constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return!t||t.length===0?rg(this.query,this.afs.schedulers.outsideAngular).pipe(Gn):rg(this.query,this.afs.schedulers.outsideAngular).pipe(ne(e=>e.filter(i=>t.indexOf(i.type)>-1)),_t(e=>e.length>0),Gn)}auditTrail(t){return this.stateChanges(t).pipe(ss((e,i)=>[...e,...i],[]))}snapshotChanges(t){let e=aP(t);return sP(this.query,e,this.afs.schedulers.outsideAngular).pipe(Gn)}valueChanges(t={}){return y1(this.query,this.afs.schedulers.outsideAngular).pipe(ne(i=>i.payload.docs.map(r=>t.idField?Y({[t.idField]:r.id},r.data()):r.data())),Gn)}get(t){return Le(this.query.get(t)).pipe(Gn)}},lP=new ie("angularfire2.enableFirestorePersistence"),cP=new ie("angularfire2.firestore.persistenceSettings"),tH=new ie("angularfire2.firestore.settings"),nH=new ie("angularfire2.firestore.use-emulator");function uP(n,t=e=>e){return{query:t(n),ref:n}}var na=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(e,i,r,o,s,a,l,u,d,f,m,y,D,T,R,q,te){this.schedulers=l;let $=Ms(e,a,i),ae=d;f&&dw($,a,m,D,T,R,y,q),[this.firestore,this.persistenceEnabled$]=al(`${$.name}.firestore`,"AngularFirestore",$.name,()=>{let ge=a.runOutsideAngular(()=>$.firestore());if(o&&ge.settings(o),ae&&ge.useEmulator(...ae),r&&!go(s)){let pe=()=>{try{return Le(ge.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(M){return typeof console<"u"&&console.warn(M),ce(!1)}};return[ge,a.runOutsideAngular(pe)]}else return[ge,ce(!1)]},[o,ae,r])}collection(e,i){let r;typeof e=="string"?r=this.firestore.collection(e):r=e;let{ref:o,query:s}=uP(r,i),a=this.schedulers.ngZone.run(()=>o);return new og(a,s,this)}collectionGroup(e,i){let r=i||(s=>s),o=this.firestore.collectionGroup(e);return new _1(r(o),this)}doc(e){let i;typeof e=="string"?i=this.firestore.doc(e):i=e;let r=this.schedulers.ngZone.run(()=>i);return new ig(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(K(Co),K(Eo,8),K(lP,8),K(tH,8),K(ln),K(Fe),K(xs),K(cP,8),K(nH,8),K(Ru,8),K(ow,8),K(sw,8),K(aw,8),K(lw,8),K(cw,8),K(uw,8),K(Pr,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),dP=(()=>{class n{constructor(){nn.registerVersion("angularfire",gi.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:lP,useValue:!0},{provide:cP,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=It({type:n});static \u0275inj=St({providers:[na]})}return n})();var Ho=(()=>{class n{constructor(){this.firestore=F(na),this.http=F(ki)}getFormFields(e){return this.firestore.collection("forms").doc(e).valueChanges().pipe(ne(i=>JSON.parse(i.json)))}saveForm(e,i){return this.firestore.collection("forms").doc(e).set(i)}getForms(){return this.firestore.collection("forms").valueChanges().pipe(ne(e=>e))}getFormById(e){return this.firestore.collection("forms").doc(e).valueChanges()}deleteForm(e){return this.firestore.collection("forms").doc(e).delete()}getData(e,i){return E(this,null,function*(){let r="https://us-central1-comemivesto-5e5f9.cloudfunctions.net/api/gen/",o=i?`${i}`:"",s=`${r}${e}${o}`,a=this.http.get(s);return yield Nn(a)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var hP=`
 
    <div class="ui-modal-dialog ">
      <div class="ui-modal-dialog-content">
        <div class="ui-modal-title">
          <span>{{title}}</span>
        </div>
        <div class="ui-modal-body-message">
          {{message}}
        </div>
        <div class="ui-modal-footer-message">
          <button class="ui-modal-button ok-button btn">OK</button>
        </div>
      </div>
    </div>
 
`,Rn=(n,t,e)=>{let i=hP.replace("{{title}}",t).replace("{{message}}",n),r=document.createElement("div");r.classList.add("modal"),r.style.display="block",r.innerHTML=i,r.querySelector(".ok-button").addEventListener("click",()=>{let o=!0;document.body.removeChild(r),e&&e(o)}),document.body.appendChild(r)},zo=(n,t,e)=>{let i=hP.replace("{{title}}",t).replace("{{message}}",n),r=document.createElement("div");r.classList.add("modal"),r.style.display="block",r.innerHTML=i;let o=document.createElement("button"),s=document.createElement("button");o.classList.add("ui-modal-button"),s.classList.add("ui-modal-button"),o.textContent="Si",s.textContent="No",r.querySelector(".ui-modal-footer-message").innerHTML="",r.querySelector(".ui-modal-footer-message").appendChild(o),r.querySelector(".ui-modal-footer-message").appendChild(s),o.addEventListener("click",()=>{let a=!0;document.body.removeChild(r),e&&e(a)}),s.addEventListener("click",()=>{let a=!1;document.body.removeChild(r),e&&e(a)}),document.body.appendChild(r)};function iH(n,t){if(n&1){let e=le();_(0,"li",7),H("dblclick",function(){let r=j(e).$implicit,o=x();return U(o.editForm(r))}),_(1,"div",8),Q(2,"span",9),k(3),v(),_(4,"div")(5,"button",10),H("click",function(){let r=j(e).$implicit,o=x();return U(o.editForm(r))}),Q(6,"span",11),v(),_(7,"button",10),H("click",function(){let r=j(e).$implicit,o=x();return U(o.deleteForm(r.nameForm))}),Q(8,"span",12),v()()()}if(n&2){let e=t.$implicit;w(3),ke(" ",e.nameForm," ")}}var fP=(()=>{class n{constructor(e){this.router=e,this.forms=[],this.formService=F(Ho)}ngOnInit(){this.loadForms()}loadForms(){this.formService.getForms().subscribe(e=>{this.forms=e})}createNewForm(){this.router.navigate(["/form-builder","new"])}editForm(e){this.router.navigate(["/form-builder",e.nameForm])}deleteForm(e){zo("Sei sicuro di voler elimare la form?","Attenzione!",i=>{i&&this.formService.deleteForm(e).then(()=>{}).catch(r=>{console.error("Errore durante l'eliminazione del form:",r)})})}static{this.\u0275fac=function(i){return new(i||n)(re(jt))}}static{this.\u0275cmp=he({type:n,selectors:[["app-form-list"]],standalone:!0,features:[fe],decls:10,vars:3,consts:[[3,"emittEventButton","caption","addButtonShow"],[1,"text"],[1,"mdi","mdi-database"],["role","alert","role","alert",1,"alert","alert-primary","d-flex","align-items-center"],[1,"mdi","mdi-lightbulb-alert-outline","me-2"],[1,"list-group","form-list"],["class","form-list-item list-group-item d-flex justify-content-between align-items-center",3,"dblclick",4,"ngFor","ngForOf"],[1,"form-list-item","list-group-item","d-flex","justify-content-between","align-items-center",3,"dblclick"],[1,""],[1,"mdi","mdi-view-list-outline","mr-3"],[1,"btn","icon-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"mdi","mdi-close","del"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0),H("emittEventButton",function(){return r.createNewForm()}),_(1,"div",1)(2,"h2"),Q(3,"span",2),k(4," Elenco form"),v()(),_(5,"div",3),Q(6,"span",4),k(7," Elenco delle Form create nell'app "),v(),_(8,"ul",5),G(9,iH,9,1,"li",6),v()()),i&2&&(b("caption","Lista dei Form")("addButtonShow",!0),w(9),b("ngForOf",r.forms))},dependencies:[Ce,lt,Xt],styles:[".form-list-item[_ngcontent-%COMP%]:hover{background-color:var(--bg-grey);cursor:pointer}"]})}}return n})();var CP=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(re(Zi),re(an))}}static{this.\u0275dir=We({type:n})}}return n})(),Sd=(()=>{class n extends CP{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Jn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,features:[Yt]})}}return n})(),ra=new ie(""),rH={provide:ra,useExisting:gn(()=>w1),multi:!0},w1=(()=>{class n extends Sd{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Jn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&H("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[Un([rH]),Yt]})}}return n})(),oH={provide:ra,useExisting:gn(()=>bi),multi:!0};function sH(){let n=Rr()?Rr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var aH=new ie(""),bi=(()=>{class n extends CP{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!sH())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(re(Zi),re(an),re(aH,8))}}static{this.\u0275dir=We({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&H("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Un([oH]),Yt]})}}return n})();function qo(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function EP(n){return n!=null&&typeof n.length=="number"}var oa=new ie(""),mg=new ie(""),lH=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Yl=class{static min(t){return cH(t)}static max(t){return uH(t)}static required(t){return DP(t)}static requiredTrue(t){return dH(t)}static email(t){return hH(t)}static minLength(t){return SP(t)}static maxLength(t){return IP(t)}static pattern(t){return fH(t)}static nullValidator(t){return ag(t)}static compose(t){return RP(t)}static composeAsync(t){return PP(t)}};function cH(n){return t=>{if(qo(t.value)||qo(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function uH(n){return t=>{if(qo(t.value)||qo(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function DP(n){return qo(n.value)?{required:!0}:null}function dH(n){return n.value===!0?null:{required:!0}}function hH(n){return qo(n.value)||lH.test(n.value)?null:{email:!0}}function SP(n){return t=>qo(t.value)||!EP(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function IP(n){return t=>EP(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function fH(n){if(!n)return ag;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(qo(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function ag(n){return null}function TP(n){return n!=null}function xP(n){return po(n)?Le(n):n}function MP(n){let t={};return n.forEach(e=>{t=e!=null?Y(Y({},t),e):t}),Object.keys(t).length===0?null:t}function AP(n,t){return t.map(e=>e(n))}function pH(n){return!n.validate}function OP(n){return n.map(t=>pH(t)?t:e=>t.validate(e))}function RP(n){if(!n)return null;let t=n.filter(TP);return t.length==0?null:function(e){return MP(AP(e,t))}}function b1(n){return n!=null?RP(OP(n)):null}function PP(n){if(!n)return null;let t=n.filter(TP);return t.length==0?null:function(e){let i=AP(e,t).map(xP);return v_(i).pipe(ne(MP))}}function C1(n){return n!=null?PP(OP(n)):null}function pP(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function NP(n){return n._rawValidators}function FP(n){return n._rawAsyncValidators}function v1(n){return n?Array.isArray(n)?n:[n]:[]}function lg(n,t){return Array.isArray(n)?n.includes(t):n===t}function mP(n,t){let e=v1(t);return v1(n).forEach(r=>{lg(e,r)||e.push(r)}),e}function gP(n,t){return v1(t).filter(e=>!lg(n,e))}var cg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=b1(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=C1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Hr=class extends cg{get formDirective(){return null}get path(){return null}},ia=class extends cg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ug=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},mH={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Lte=Ee(Y({},mH),{"[class.ng-submitted]":"isSubmitted"}),zn=(()=>{class n extends ug{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(re(ia,2))}}static{this.\u0275dir=We({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&bs("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Yt]})}}return n})(),fr=(()=>{class n extends ug{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(re(Hr,10))}}static{this.\u0275dir=We({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&bs("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Yt]})}}return n})();var Cd="VALID",sg="INVALID",Ql="PENDING",Ed="DISABLED";function kP(n){return(gg(n)?n.validators:n)||null}function gH(n){return Array.isArray(n)?b1(n):n||null}function VP(n,t){return(gg(t)?t.asyncValidators:n)||null}function _H(n){return Array.isArray(n)?C1(n):n||null}function gg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function yH(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new de(1e3,"");if(!i[e])throw new de(1001,"")}function vH(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new de(1002,"")})}var dg=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Cd}get invalid(){return this.status===sg}get pending(){return this.status==Ql}get disabled(){return this.status===Ed}get enabled(){return this.status!==Ed}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(mP(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(mP(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(gP(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(gP(t,this._rawAsyncValidators))}hasValidator(t){return lg(this._rawValidators,t)}hasAsyncValidator(t){return lg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ql,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ed,this.errors=null,this._forEachChild(i=>{i.disable(Ee(Y({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ee(Y({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Cd,this._forEachChild(i=>{i.enable(Ee(Y({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Ee(Y({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cd||this.status===Ql)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ed:Cd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ql,this._hasOwnPendingAsyncValidator=!0;let e=xP(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new oe,this.statusChanges=new oe}_calculateStatus(){return this._allControlsDisabled()?Ed:this.errors?sg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ql)?Ql:this._anyControlsHaveStatus(sg)?sg:Cd}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){gg(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=gH(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=_H(this._rawAsyncValidators)}},zr=class extends dg{constructor(t,e,i){super(kP(e),VP(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){vH(this,!0,t),Object.keys(t).forEach(i=>{yH(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Id=new ie("CallSetDisabledState",{providedIn:"root",factory:()=>_g}),_g="always";function LP(n,t){return[...t.path,n]}function hg(n,t,e=_g){E1(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),bH(n,t),EH(n,t),CH(n,t),wH(n,t)}function _P(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),pg(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function fg(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function wH(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function E1(n,t){let e=NP(n);t.validator!==null?n.setValidators(pP(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=FP(n);t.asyncValidator!==null?n.setAsyncValidators(pP(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();fg(t._rawValidators,r),fg(t._rawAsyncValidators,r)}function pg(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=NP(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=FP(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return fg(t._rawValidators,i),fg(t._rawAsyncValidators,i),e}function bH(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&BP(n,t)})}function CH(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&BP(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function BP(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function EH(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function jP(n,t){n==null,E1(n,t)}function DH(n,t){return pg(n,t)}function UP(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function SH(n){return Object.getPrototypeOf(n.constructor)===Sd}function $P(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function GP(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===bi?e=o:SH(o)?i=o:r=o}),r||i||e||null}function IH(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var TH={provide:Hr,useExisting:gn(()=>Td)},Dd=Promise.resolve(),Td=(()=>{class n extends Hr{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new oe,this.form=new zr({},b1(e),C1(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Dd.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),hg(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Dd.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Dd.then(()=>{let i=this._findContainer(e.path),r=new zr({});jP(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Dd.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Dd.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,$P(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(i){return new(i||n)(re(oa,10),re(mg,10),re(Id,8))}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&H("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[yt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Un([TH]),Yt]})}}return n})();function yP(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function vP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var yg=class extends dg{constructor(t=null,e,i){super(kP(e),VP(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gg(e)&&(e.nonNullable||e.initialValueIsDefault)&&(vP(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){yP(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){yP(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){vP(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var xH=n=>n instanceof yg;var MH={provide:ia,useExisting:gn(()=>qr)},wP=Promise.resolve(),qr=(()=>{class n extends ia{constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new yg,this._registered=!1,this.name="",this.update=new oe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=GP(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),UP(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){hg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){wP.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&iu(i);wP.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?LP(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(re(Hr,9),re(oa,10),re(mg,10),re(ra,10),re(Pi,8),re(Id,8))}}static{this.\u0275dir=We({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[yt.None,"disabled","isDisabled"],model:[yt.None,"ngModel","model"],options:[yt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Un([MH]),Yt,Tn]})}}return n})(),Jl=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),AH={provide:ra,useExisting:gn(()=>D1),multi:!0},D1=(()=>{class n extends Sd{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Jn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&H("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[Un([AH]),Yt]})}}return n})();var HP=new ie("");var OH={provide:Hr,useExisting:gn(()=>sa)},sa=(()=>{class n extends Hr{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new oe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return hg(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){_P(e.control||null,e,!1),IH(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,$P(this.form,this.directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(_P(i||null,e),xH(r)&&(hg(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);jP(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&DH(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){E1(this.form,this),this._oldForm&&pg(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(re(oa,10),re(mg,10),re(Id,8))}}static{this.\u0275dir=We({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&H("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[yt.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Un([OH]),Yt,Tn]})}}return n})();var RH={provide:ia,useExisting:gn(()=>aa)},aa=(()=>{class n extends ia{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new oe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=GP(this,o)}ngOnChanges(e){this._added||this._setUpControl(),UP(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return LP(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(re(Hr,13),re(oa,10),re(mg,10),re(ra,10),re(HP,8))}}static{this.\u0275dir=We({type:n,selectors:[["","formControlName",""]],inputs:{name:[yt.None,"formControlName","name"],isDisabled:[yt.None,"disabled","isDisabled"],model:[yt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Un([RH]),Yt,Tn]})}}return n})(),PH={provide:ra,useExisting:gn(()=>Wo),multi:!0};function zP(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function NH(n){return n.split(":")[0]}var Wo=(()=>{class n extends Sd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i=this._getOptionId(e),r=zP(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=NH(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Jn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&H("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Un([PH]),Yt]})}}return n})(),Zl=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(zP(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(re(an),re(Zi),re(Wo,9))}}static{this.\u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),FH={provide:ra,useExisting:gn(()=>vg),multi:!0};function bP(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function kH(n){return n.split(":")[0]}var vg=(()=>{class n extends Sd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);r.push(u)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=kH(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Jn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&H("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Un([FH]),Yt]})}}return n})(),Xl=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(bP(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(bP(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(re(an),re(Zi),re(vg,9))}}static{this.\u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function qP(n){return typeof n=="number"?n:parseInt(n,10)}var S1=(()=>{class n{constructor(){this._validator=ag}ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):ag,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=We({type:n,features:[Tn]})}}return n})();var VH={provide:oa,useExisting:gn(()=>xd),multi:!0};var xd=(()=>{class n extends S1{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=iu,this.createValidator=e=>DP}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Jn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&hi("required",r._enabled?"":null)},inputs:{required:"required"},features:[Un([VH]),Yt]})}}return n})();var LH={provide:oa,useExisting:gn(()=>I1),multi:!0},I1=(()=>{class n extends S1{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>qP(e),this.createValidator=e=>SP(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Jn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&hi("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[Un([LH]),Yt]})}}return n})(),BH={provide:oa,useExisting:gn(()=>T1),multi:!0},T1=(()=>{class n extends S1{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>qP(e),this.createValidator=e=>IP(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Jn(n)))(r||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&hi("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Un([BH]),Yt]})}}return n})();var WP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=St({})}}return n})();var bn=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Id,useValue:e.callSetDisabledState??_g}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=St({imports:[WP]})}}return n})(),Ko=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:HP,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Id,useValue:e.callSetDisabledState??_g}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=St({imports:[WP]})}}return n})();var jH=["*"];var UH=["dialog"];var KP={animation:!0,transitionTimerDelayMs:5},$H=(()=>{class n{constructor(){this.animation=KP.animation}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GH(n){let{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n),i=parseFloat(t),r=parseFloat(e);return(i+r)*1e3}function QP(n){return typeof n=="string"}function x1(n){return n!=null}function HH(n){return n&&n.then}function YP(n){return(n||document.body).getBoundingClientRect()}function zH(n){return t=>new ye(e=>{let i=s=>n.run(()=>e.next(s)),r=s=>n.run(()=>e.error(s)),o=()=>n.run(()=>e.complete());return t.subscribe({next:i,error:r,complete:o})})}var qH=()=>{},{transitionTimerDelayMs:WH}=KP,wg=new Map,ca=(n,t,e,i)=>{let r=i.context||{},o=wg.get(t);if(o)switch(i.runningTransition){case"continue":return qt;case"stop":n.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),wg.delete(t)}let s=e(t,i.animation,r)||qH;if(!i.animation||window.getComputedStyle(t).transitionProperty==="none")return n.run(()=>s()),ce(void 0).pipe(zH(n));let a=new qe,l=new qe,u=a.pipe(E_(!0));wg.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let d=GH(t);return n.runOutsideAngular(()=>{let f=ai(t,"transitionend").pipe(mn(u),_t(({target:y})=>y===t)),m=w_(d+WH).pipe(mn(u));b_(m,f,l).pipe(mn(u)).subscribe(()=>{wg.delete(t),n.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};var O1=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(O1||{});var wne=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||t()):!1})();var KH=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function JP(n){let t=Array.from(n.querySelectorAll(KH)).filter(e=>e.tabIndex!==-1);return[t[0],t[t.length-1]]}var QH=(n,t,e,i=!1)=>{n.runOutsideAngular(()=>{let r=ai(t,"focusin").pipe(mn(e),ne(o=>o.target));ai(t,"keydown").pipe(mn(e),_t(o=>o.which===O1.Tab),Ah(r)).subscribe(([o,s])=>{let[a,l]=JP(t);(s===a||s===t)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&ai(t,"click").pipe(mn(e),Ah(r),ne(o=>o[1])).subscribe(o=>o.focus())})};var bne=new Date(1882,10,12),Cne=new Date(2174,10,25);var Ene=1e3*60*60*24;var R1=1080,YH=24*R1,JH=12*R1+793,Dne=29*YH+JH,Sne=11*R1+204;var ZH=(()=>{class n{constructor(){this._ngbConfig=F($H),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ec=class{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}};var XH=(()=>{class n{constructor(){this._document=F(Zt)}hide(){let e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:s}=r;if(e>0){let a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=s),r.overflow=o}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ez=(()=>{class n{constructor(){this._nativeElement=F(an).nativeElement,this._zone=F(Fe)}ngOnInit(){this._zone.onStable.asObservable().pipe(Fn(1)).subscribe(()=>{ca(this._zone,this._nativeElement,(e,i)=>{i&&YP(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ca(this._zone,this._nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){i&2&&(jn("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),bs("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[fe],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return n})(),bg=class{update(t){}close(t){}dismiss(t){}},tz=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],nz=["animation","backdropClass"],M1=class{_applyWindowOptions(t,e){tz.forEach(i=>{x1(e[i])&&(t[i]=e[i])})}_applyBackdropOptions(t,e){nz.forEach(i=>{x1(e[i])&&(t[i]=e[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(mn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(mn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,e,i,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new qe,this._dismissed=new qe,this._hidden=new qe,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(t);else{let e=this._beforeDismiss();HH(e)?e.then(i=>{i!==!1&&this._dismiss(t)},()=>{}):e!==!1&&this._dismiss(t)}}_removeModalElements(){let t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ce(void 0);t.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Rc(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},A1=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(A1||{}),iz=(()=>{class n{constructor(){this._document=F(Zt),this._elRef=F(an),this._zone=F(Fe),this._closed$=new qe,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new oe,this.shown=new qe,this.hidden=new qe}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":QP(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Fn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},r=ca(this._zone,e,()=>e.classList.remove("show"),i),o=ca(this._zone,this._dialogEl.nativeElement,()=>{},i),s=Rc(r,o);return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){let e={animation:this.animation,runningTransition:"continue"},i=ca(this._zone,this._elRef.nativeElement,(o,s)=>{s&&YP(o),o.classList.add("show")},e),r=ca(this._zone,this._dialogEl.nativeElement,()=>{},e);Rc(i,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{ai(e,"keydown").pipe(mn(this._closed$),_t(r=>r.which===O1.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(A1.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let i=!1;ai(this._dialogEl.nativeElement,"mousedown").pipe(mn(this._closed$),Dt(()=>i=!1),nt(()=>ai(e,"mouseup").pipe(mn(this._closed$),Fn(1))),_t(({target:r})=>e===r)).subscribe(()=>{i=!0}),ai(e,"click").pipe(mn(this._closed$)).subscribe(({target:r})=>{e===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!i&&this._zone.run(()=>this.dismiss(A1.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){let i=e.querySelector("[ngbAutofocus]"),r=JP(e)[0];(i||r||e).focus()}}_restoreFocus(){let e=this._document.body,i=this._elWithFocus,r;i&&i.focus&&e.contains(i)?r=i:r=e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&ca(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(i&1&&kt(UH,7),i&2){let o;At(o=Ot())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){i&2&&(hi("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),jn("modal d-block"+(r.windowClass?" "+r.windowClass:"")),bs("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[fe],ngContentSelectors:jH,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,r){i&1&&(Ka(),_(0,"div",1,0)(2,"div",2),Qa(3),v()()),i&2&&jn("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return n})(),rz=(()=>{class n{constructor(){this._applicationRef=F(mo),this._injector=F(ui),this._environmentInjector=F(on),this._document=F(Zt),this._scrollBar=F(XH),this._activeWindowCmptHasChanged=new qe,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new oe;let e=F(Fe);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let i=this._windowCmpts[this._windowCmpts.length-1];QH(e,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){let e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,r){let o=r.container instanceof HTMLElement?r.container:x1(r.container)?this._document.querySelector(r.container):this._document.body;if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let s=new bg;e=r.injector||e;let a=e.get(on,null)||this._environmentInjector,l=this._getContentRef(e,a,i,s,r),u=r.backdrop!==!1?this._attachBackdrop(o):void 0,d=this._attachWindowComponent(o,l.nodes),f=new M1(d,l,u,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(d),f.hidden.pipe(Fn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),s.close=m=>{f.close(m)},s.dismiss=m=>{f.dismiss(m)},s.update=m=>{f.update(m)},f.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),d.changeDetectorRef.detectChanges(),f}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=$f(ez,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let r=$f(iz,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_getContentRef(e,i,r,o,s){return r?r instanceof Ri?this._createFromTemplateRef(r,o):QP(r)?this._createFromString(r):this._createFromComponent(e,i,r,o,s):new ec([])}_createFromTemplateRef(e,i){let r={$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}},o=e.createEmbeddedView(r);return this._applicationRef.attachView(o),new ec([o.rootNodes],o)}_createFromString(e){let i=this._document.createTextNode(`${e}`);return new ec([[i]])}_createFromComponent(e,i,r,o,s){let a=ui.create({providers:[{provide:bg,useValue:o}],parent:e}),l=$f(r,{environmentInjector:i,elementInjector:a}),u=l.location.nativeElement;return s.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new ec([[u]],l.hostView,l)}_setAriaHidden(e){let i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){let i=()=>{let r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{let i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),P1=(()=>{class n{constructor(){this._injector=F(ui),this._modalStack=F(rz),this._config=F(ZH)}open(e,i={}){let r=Y(Ee(Y({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ZP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=St({providers:[P1]})}}return n})();var Ine=new ie("live announcer delay",{providedIn:"root",factory:()=>100});function sz(n,t){n&1&&(_(0,"option",6),k(1," Caricamento in corso... "),v())}function az(n,t){if(n&1&&(_(0,"option",7),k(1),v()),n&2){let e=t.$implicit,i=x(2);b("value",e[i.valueExp]),w(),ke(" ",e[i.displayExp]," ")}}function lz(n,t){if(n&1){let e=le();Be(0),_(1,"div",2)(2,"select",3),H("change",function(r){j(e);let o=x();return U(o.onValueChange(r))}),G(3,sz,2,0,"option",4),_(4,"option"),k(5," Seleziona una opzione... "),v(),G(6,az,2,2,"option",5),v()(),je()}if(n&2){let e=x();w(),b("formGroup",e.formGroup),w(),b("formControlName",e.fieldName),w(),b("ngIf",e.isLoading),w(3),b("ngForOf",e.availableOptions)}}function cz(n,t){if(n&1&&(_(0,"option",7),k(1),v()),n&2){let e=t.$implicit,i=x(2);b("value",e[i.valueExp]),w(),ke(" ",e[i.displayExp]," ")}}function uz(n,t){if(n&1){let e=le();_(0,"select",8),H("change",function(r){j(e);let o=x();return U(o.onValueChange(r))}),G(1,cz,2,2,"option",5),v()}if(n&2){let e=x();b("multiple",!0)("formControlName",e.fieldName),w(),b("ngForOf",e.availableOptions)}}var XP=(()=>{class n{constructor(){this.disabled=!1,this.values=[],this.valueChange=new oe,this.parentValue=If(),this.formService=F(Ho),this.availableOptions=[],this.isLoading=!0,this.isRemote=!1,this.fieldName="",this.multiple=!1,Cs(()=>{this.parentValue()&&this.filterOptionsBasedOnParent()})}ngOnInit(){this.initializeOptions()}initializeOptions(){return E(this,null,function*(){this.config&&this.config.selectOptions&&(this.fieldName=this.config.name,this.formControlD=this.formGroup.get(this.fieldName),this.selectOptions=this.config.selectOptions,this.displayExp=this.selectOptions.displayExp||"value",this.valueExp=this.selectOptions.valueExp||"id",this.isRemote=this.selectOptions.remote,this.selectOptions.multiple&&(this.multiple=this.selectOptions.multiple),this.selectedValue=this.selectOptions.multiple?this.values:this.value,this.isRemote?this.availableOptions=yield this.getRemoteOptions(this.selectOptions.api):this.availableOptions=this.selectOptions.options||[],this.config.selectOptions.parent&&this.parentValue&&(this.availableOptions=this.availableOptions.filter(e=>e.parent===this.parentValue)))})}getRemoteOptions(e,i){return E(this,null,function*(){this.isLoading=!0,this.formControlD?.disable();let r=[];this.parentValue()&&(i=`/${this.parentValue()}`);try{r=yield this.formService.getData(e,i),r.length>0&&(this.isLoading=!1,this.formControlD?.enable())}catch{}return r})}filterOptionsBasedOnParent(){return E(this,null,function*(){this.isRemote?this.availableOptions=yield this.getRemoteOptions(this.selectOptions.api,this.parentValue()):this.selectOptions&&this.selectOptions.parent&&(this.availableOptions=this.selectOptions.options.filter(e=>e.parent===this.parentValue()))})}onValueChange(e){this.selectedValue=e.target.value;let i={event:e,selectedValue:this.selectedValue,component:this,selectOptions:this.selectOptions,parentField:this.selectOptions.parent};this.valueChange.emit(i)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-dynamic-select-box"]],inputs:{config:"config",formGroup:"formGroup",disabled:"disabled",value:"value",values:"values",parentValue:[yt.SignalBased,"parentValue"]},outputs:{valueChange:"valueChange"},standalone:!0,features:[fe],decls:3,vars:2,consts:[["selectMultiple",""],[4,"ngIf","ngIfElse"],[3,"formGroup"],[1,"form-control",3,"change","formControlName"],["selected","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["selected",""],[3,"value"],[1,"form-control",3,"change","multiple","formControlName"]],template:function(i,r){if(i&1&&G(0,lz,7,4,"ng-container",1)(1,uz,2,3,"ng-template",null,0,er),i&2){let o=Vt(2);b("ngIf",!r.selectOptions.multiple)("ngIfElse",o)}},dependencies:[Ce,lt,Qe,bn,Zl,Xl,Wo,vg,zn,fr,Ko,sa,aa]})}}return n})();var dz=["imageElement"],hz=["fileInput"];function fz(n,t){n&1&&(_(0,"span"),k(1,"Caricamento.."),v())}function pz(n,t){if(n&1&&(_(0,"div"),Q(1,"img",7,2),v()),n&2){let e=x();w(),b("src",e.value,di)}}var eN=(()=>{class n{constructor(){this.disabled=!1,this.value="",this.valueChange=new oe,this.maxWidth=300,this.maxHeight=1350,this.imageLoading=Xe(!0),this.format="",this.openFullScreen=!1,this.fieldName=""}ngOnInit(){}ngAfterViewInit(){this.fileBoxOptions=this.config.fileBoxOptions,this.fieldName=this.config.name,this.imageElement&&(this.imageElement.nativeElement.onload=e=>{setTimeout(()=>{this.imageLoading.set(!1)},1500)},this.imageElement.nativeElement.onerror=()=>{this.imageLoading.set(!1)}),this.imageElement||this.imageLoading.set(!1)}chooseFile(e){this.fileInput.nativeElement.click()}onFileSelected(e){return E(this,null,function*(){let i=e.target;if(i.files&&i.files[0]){let r=i.files[0];if(this.validateFile(r)){let o=new FileReader;this.imageLoading.set(!0),o.onload=s=>E(this,null,function*(){let a=s.target?.result;try{let l=this.fileBoxOptions&&this.fileBoxOptions.maxWidth?this.fileBoxOptions.maxWidth:600,u=r.type.replace("image/",""),d=yield this.resizeImage(a,l,u);this.value=d.dataUrl,this.imageLoading.set(!0),this.valueChange.emit(this.value)}catch(l){console.error("Errore durante il ridimensionamento dell'immagine:",l),this.imageLoading.set(!0)}}),o.readAsDataURL(r)}else alert("File non valido. Seleziona un file immagine di dimensioni inferiori a 2MB.")}})}validateFile(e){let i=this.fileBoxOptions?.maxSize?this.fileBoxOptions.maxSize*1024*1024:2097152,r=["image/jpeg","image/png","image/gif"];return e.size<=i&&r.includes(e.type)}resizeImage(e,i,r){return new Promise((o,s)=>{let a=new Image;a.src=e,a.onload=()=>{let l=document.createElement("canvas"),u=l.getContext("2d"),d=a.width,f=a.height;if(d>i){let y=i/a.width;l.width=i,l.height=a.height*y,d=i,f=a.height*y}u.drawImage(a,0,0,d,f);let m=l.toDataURL(`image/${r}`,.7);o({dataUrl:m,format:m.split(";")[0].split("/")[1]})},a.onerror=l=>{s(l)}})}dataURLtoBlob(e){let i=e.split(","),r=i[0].match(/:(.*?);/)[1],o=atob(i[1]),s=o.length,a=new Uint8Array(s);for(;s--;)a[s]=o.charCodeAt(s);return new Blob([a],{type:r})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-dynamic-file-box"]],viewQuery:function(i,r){if(i&1&&(kt(dz,5),kt(hz,5)),i&2){let o;At(o=Ot())&&(r.imageElement=o.first),At(o=Ot())&&(r.fileInput=o.first)}},inputs:{config:"config",formControlD:"formControlD",formGroup:"formGroup",disabled:"disabled",value:"value",maxWidth:"maxWidth",maxHeight:"maxHeight"},outputs:{valueChange:"valueChange"},standalone:!0,features:[fe],decls:8,vars:4,consts:[["imageContainer",""],["fileInput",""],["imageElement",""],[1,"image-container",3,"formGroup"],[4,"ngIf"],["type","file",1,"d-none",3,"change","formControlName"],["type","button",1,"select-photo",3,"click"],[1,"form-image","img-thumbnail",2,"width","200px","height","200px",3,"src"]],template:function(i,r){if(i&1){let o=le();_(0,"div",3,0),G(2,fz,2,0,"span",4)(3,pz,3,1,"div",4),_(4,"input",5,1),H("change",function(a){return j(o),U(r.onFileSelected(a))}),v(),_(6,"button",6),H("click",function(a){return j(o),U(r.chooseFile(a))}),k(7," Seleziona foto "),v()()}i&2&&(b("formGroup",r.formGroup),w(2),b("ngIf",r.imageLoading()),w(),b("ngIf",r.value),w(),b("formControlName",r.fieldName))},dependencies:[Ce,Qe,bn,bi,zn,fr,Ko,sa,aa],styles:[".form-image[_ngcontent-%COMP%]{object-fit:cover}"]})}}return n})();var Qo=(()=>{class n{constructor(){this.overlayData=new qe,this.currentOverlayIndex=Xe(""),this.overlayData$=this.overlayData.asObservable()}openOverlay(e){this.currentOverlayIndex.set(e.index),this.overlayData.next(e)}closeOverlay(){this.overlayData.next(null)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var gz=["*"],_z=n=>({"max-height.px":n}),tc=(()=>{class n{constructor(){this.scrollHeigth=400,this.overlayService=F(Qo)}onScroll(e){this.overlayService.closeOverlay()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-custom-scrollbar"]],inputs:{scrollHeigth:"scrollHeigth"},standalone:!0,features:[fe],ngContentSelectors:gz,decls:2,vars:3,consts:[[1,"scrollbar-container",3,"scroll","ngStyle"]],template:function(i,r){i&1&&(Ka(),_(0,"div",0),H("scroll",function(s){return r.onScroll(s)}),Qa(1),v()),i&2&&b("ngStyle",Jt(1,_z,r.scrollHeigth))},dependencies:[Ce,$n],styles:['@charset "UTF-8";.scrollbar-container[_ngcontent-%COMP%]{overflow-y:auto;padding:0;scrollbar-width:thin;scrollbar-color:#e3e3e3 #ffffff}.scrollbar-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.scrollbar-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}.scrollbar-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#e3e3e3;border-radius:10px;border:2px solid #ffffff}']})}}return n})();var yz=(n,t)=>({"mdi-eye-outline ":n,"mdi-eye-off-outline":t}),vz=()=>[];function wz(n,t){if(n&1){let e=le();Be(0),_(1,"input",13),Ae("ngModelChange",function(r){j(e);let o=x().$implicit,s=x();return Pe(s.formValues[o.name],r)||(s.formValues[o.name]=r),U(r)}),v(),je()}if(n&2){let e=x().$implicit,i=x();w(),b("type",e.typeInput)("name",e.name)("formControlName",e.name)("id",e.htmlId),Me("ngModel",i.formValues[e.name])}}function bz(n,t){n&1&&(_(0,"span",16),k(1,"Richiesto"),v())}function Cz(n,t){if(n&1&&(_(0,"label",14),k(1),G(2,bz,2,0,"span",15),v()),n&2){let e=x().$implicit;w(),ke("",e.label," "),w(),b("ngIf",e.required)}}function Ez(n,t){if(n&1&&Q(0,"input",17),n&2){let e=x().$implicit;b("type",e.typeInput?e.typeInput:"text")("name",e.name)("formControlName",e.name)("id",e==null?null:e.htmlId)("placeholder",e==null?null:e.placeholder)("maxlength",e.maxlength)("minlength",e.minlength),hi("required",e.required?!0:null)}}function Dz(n,t){if(n&1){let e=le();Be(0),_(1,"button",18),H("click",function(){j(e);let r=x().$implicit,o=x();return U(o.toggleFieldTextType(r))}),Q(2,"i",19),v(),je()}if(n&2){let e=x().$implicit;w(2),b("ngClass",Xi(1,yz,e.typeInput==="password",e.typeInput==="text"))}}function Sz(n,t){if(n&1){let e=le();Be(0),_(1,"button",18),H("click",function(){j(e);let r=x().$implicit,o=x();return U(o.onFucBtnClick(r))}),Q(2,"span",20),v(),je()}}function Iz(n,t){if(n&1&&(_(0,"textarea",21),k(1,`
                `),v()),n&2){let e=x().$implicit;b("placeholder",e.placeholder)("formControlName",e.name)}}function Tz(n,t){if(n&1){let e=le();_(0,"app-dynamic-select-box",22),H("valueChange",function(r){j(e);let o=x().$implicit,s=x();return U(s.onValueChangeSelectBox(o.name,r))}),v()}if(n&2){let e=x().$implicit,i=x();b("config",e)("formGroup",i.form)("parentValue",i.getParentValues(e.selectOptions.parent))("value",i.formValues[e.name])("values",e.selectOptions.multiple?i.formValues[e.name]:kT(5,vz))}}function xz(n,t){if(n&1){let e=le();_(0,"app-dynamic-file-box",23),H("valueChange",function(r){j(e);let o=x().$implicit,s=x();return U(s.onValueChange(o.name,r))}),v()}if(n&2){let e=x().$implicit,i=x();b("config",e)("value",i.formValues[e.name])("formGroup",i.form)}}function Mz(n,t){if(n&1&&(Be(0),G(1,wz,2,5,"ng-container",5),_(2,"div",6),G(3,Cz,3,2,"label",7),_(4,"div",8),G(5,Ez,1,8,"input",9)(6,Dz,3,4,"ng-container",5)(7,Sz,3,0,"ng-container",5)(8,Iz,2,2,"textarea",10)(9,Tz,1,6,"app-dynamic-select-box",11)(10,xz,1,3,"app-dynamic-file-box",12),v()(),je()),n&2){let e=t.$implicit,i=x();w(),b("ngIf",e.type=="hiddenBox"),w(2),b("ngIf",e.type!="hiddenBox"),w(2),b("ngIf",e.type==="textBox"),w(),b("ngIf",i.showPasswordButton[e.name]),w(),b("ngIf",e.funcButton),w(),b("ngIf",e.type==="textArea"),w(),b("ngIf",e.type==="selectBox"&&e.selectOptions),w(),b("ngIf",e.type==="fileBox")}}function Az(n,t){if(n&1){let e=le();_(0,"button",27),H("click",function(){j(e);let r=x(2);return U(r.cancellForm())}),Q(1,"span",28),_(2,"span",29),k(3),v()()}if(n&2){let e=x(2);w(3),Ye(e.closeButton)}}function Oz(n,t){if(n&1&&(_(0,"button",30),Q(1,"span",19),_(2,"span",31),k(3),v()()),n&2){let e=x(2);w(),b("ngClass",e.iconSubmitButton),w(2),Ye(e.submitButton)}}function Rz(n,t){if(n&1&&(_(0,"div",24),G(1,Az,4,1,"button",25)(2,Oz,4,2,"button",26),v()),n&2){let e=x();w(),b("ngIf",e.showBottomButtonLeft),w(),b("ngIf",e.showBottomButtonRight)}}var Yo=(()=>{class n{constructor(){this.showBottomButtons=!0,this.showBottomButtonLeft=!0,this.showBottomButtonRight=!0,this.submitFormEvent=new oe,this.functionalInputFormEvent=new oe,this.form=new zr({}),this.formValues={},this.dataSet=[],this.fields=[],this.formShow=!1,this.fieldConfigs={},this.templateService=F(Ho),this.inEdit=!0,this.parentValues=Xe({}),this.showPasswordButton={},this.closeButton="Ritorna",this.submitButton="Salva",this.iconSubmitButton="mdi-content-save-outline"}ngOnChanges(e){e.editData&&e.editData.currentValue}ngOnInit(){this.service&&(typeof this.editData>"u"&&(this.editData={},this.inEdit=!1),typeof this.idData<"u"&&(this.editData=this.idData),this.templateService.getFormFields(this.service).subscribe(e=>{this.fields=e,this.initializeForm()}),this.inputBtnLeftName&&(this.closeButton=this.inputBtnLeftName),this.inputBtnRightName&&(this.iconSubmitButton="",this.submitButton=this.inputBtnRightName))}initializeForm(){this.editData=this.editData||{};let e=new zr({});this.fields.forEach(i=>{let r=this.getValidators(i),o=this.editData[i.name]||null;console.log(i.name);try{e.addControl(i.name,new yg(o,r))}catch(s){console.error(`Error setting control for field ${i.name}:`,s)}if(i.selectOptions&&i.selectOptions.parent){let s=i.selectOptions.parent;this.parentValues.set(Ee(Y({},this.parentValues()),{[s]:this.editData[s]||""}))}i.typeInput==="password"&&(this.showPasswordButton[i.name]=!0),this.initializeFormValues(i)}),this.form=e,console.log(this.form)}getValidators(e){let i=[];return e.required&&i.push(Yl.required),typeof e.minlength<"u"&&i.push(Yl.minLength(e.minlength)),typeof e.maxlength<"u"&&i.push(Yl.maxLength(e.maxlength)),i}initializeFormValues(e){typeof this.editData[e.name]<"u"&&(this.formValues[e.name]=this.editData[e.name]),this.fieldConfigs[e.name]=e}onValueChange(e,i){let r=this.form.get(e);r&&r.value!==i&&(r.setValue(i,{emitEvent:!1}),this.formValues[e]=i)}onValueChangeSelectBox(e,i){this.onValueChange(e,i.selectedValue),e in this.parentValues()&&this.parentValues.set(Ee(Y({},this.parentValues()),{[e]:i.selectedValue})),console.log(this.parentValues())}getParentValues(e){return e?this.parentValues()[e]:null}updateCascadeOptions(e,i){let r=this.fieldConfigs[e];if(r&&r.cascadeFrom&&e===r.cascadeFrom){let o=r.cascadeOptions[i]||[];this.formValues[e]=o}}toggleFieldTextType(e){e.typeInput==="password"?e.typeInput="text":e.typeInput="password"}submitForm(){if(this.form.valid){let e={name:"submitForm",formData:this.form.value,form:this.form,inEdit:this.inEdit};this.submitFormEvent.emit(e)}else{let e=this.getInvalidFields(this.form);this.presentToast(`Mancano i seguenti campi:${e.join(", ")}`)}}cancellForm(){let e={name:"cancelForm",formData:this.form.value,form:this.form,component:this};this.submitFormEvent.emit(e)}getInvalidFields(e){let i=[];return Object.keys(e.controls).forEach(r=>{let o=e.get(r);if(o&&o.invalid){let s=this.fieldConfigs[r].label;i.push(s)}}),i}presentToast(e){return E(this,null,function*(){Rn(e,"Errore!")})}onFucBtnClick(e){let i={name:"functionalInputClick",nomeCampo:e.name,allFields:e};this.functionalInputFormEvent.emit(i)}refresh(){this.form.reset()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-dynamic-form"]],inputs:{service:"service",editData:"editData",idData:"idData",showBottomButtons:"showBottomButtons",showBottomButtonLeft:"showBottomButtonLeft",showBottomButtonRight:"showBottomButtonRight",inputBtnRightName:"inputBtnRightName",inputBtnLeftName:"inputBtnLeftName"},outputs:{submitFormEvent:"submitFormEvent",functionalInputFormEvent:"functionalInputFormEvent"},standalone:!0,features:[Tn,fe],decls:5,vars:4,consts:[[3,"ngSubmit","formGroup"],[1,"form-container"],[3,"scrollHeigth"],[4,"ngFor","ngForOf"],["class","form-footer",4,"ngIf"],[4,"ngIf"],[1,"row","mt-3","mb-3"],["class","col-sm-3 col-form-label font-medium",4,"ngIf"],[1,"col-sm-9"],["class","form-control",3,"type","name","formControlName","id","placeholder","maxlength","minlength",4,"ngIf"],["rows","4","class","form-control",3,"placeholder","formControlName",4,"ngIf"],[3,"config","formGroup","parentValue","value","values","valueChange",4,"ngIf"],[3,"config","value","formGroup","valueChange",4,"ngIf"],[1,"form-control",3,"ngModelChange","type","name","formControlName","id","ngModel"],[1,"col-sm-3","col-form-label","font-medium"],["class","badge bg-secondary",4,"ngIf"],[1,"badge","bg-secondary"],[1,"form-control",3,"type","name","formControlName","id","placeholder","maxlength","minlength"],["type","button",1,"btn","functional-btn",3,"click"],[1,"mdi",3,"ngClass"],[1,"mdi","mdi-text-box-search-outline"],["rows","4",1,"form-control",3,"placeholder","formControlName"],[3,"valueChange","config","formGroup","parentValue","value","values"],[3,"valueChange","config","value","formGroup"],[1,"form-footer"],["type","button","class","btn ana-button",3,"click",4,"ngIf"],["type","submit","class","btn ana-button btn-submit-form",4,"ngIf"],["type","button",1,"btn","ana-button",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"bottom-button-name","btn-cancel-form"],["type","submit",1,"btn","ana-button","btn-submit-form"],[1,"bottom-button-name"]],template:function(i,r){i&1&&(_(0,"form",0),H("ngSubmit",function(){return r.submitForm()}),_(1,"div",1)(2,"app-custom-scrollbar",2),G(3,Mz,11,8,"ng-container",3),v()(),G(4,Rz,3,2,"div",4),v()),i&2&&(b("formGroup",r.form),w(2),b("scrollHeigth",700),w(),b("ngForOf",r.fields),w(),b("ngIf",r.showBottomButtons))},dependencies:[Ce,Bt,lt,Qe,XP,eN,bn,Jl,bi,zn,fr,I1,T1,Ko,sa,aa,tc],styles:[".form-container[_ngcontent-%COMP%]{padding:1rem}.form-container[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.form-container[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{margin-left:-.6rem;margin-right:.5rem}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--bg-grey);padding:.6rem .5rem}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-cell[_ngcontent-%COMP%]{text-align:center}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]{font-size:1.4rem;padding:0}.form-container[_ngcontent-%COMP%]   .functional-btn[_ngcontent-%COMP%]{right:calc(var(--bs-gutter-x) * .5);position:absolute;top:var(--bs-gutter-y)}.form-footer[_ngcontent-%COMP%]{border:1px solid var(--border_color);padding:1rem;display:flex;gap:1rem;flex-direction:row;flex-wrap:nowrap;justify-content:end}"]})}}return n})();function Pz(n,t){n&1&&(_(0,"div",43),k(1,"*Nome obbligatorio"),v())}function Nz(n,t){n&1&&(_(0,"div",43),k(1,"*Tipo obbligatoria"),v())}function Fz(n,t){n&1&&(_(0,"div",43),k(1,"*Label obbligatoria"),v())}function kz(n,t){if(n&1){let e=le();_(0,"div",12)(1,"label",13),k(2,"Mostra func.bot"),v(),_(3,"div",34)(4,"input",44),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.funcButton,r)||(o.formField.funcButton=r),U(r)}),v(),_(5,"label",36),k(6," Mostra un bottone funzionale nella form "),v()()()}if(n&2){let e=x();w(4),Me("ngModel",e.formField.funcButton)}}function Vz(n,t){if(n&1){let e=le();_(0,"div",12)(1,"label",45),k(2,"Min Value"),v(),_(3,"div",46)(4,"input",47),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.min,r)||(o.formField.min=r),U(r)}),v()()()}if(n&2){let e=x();w(4),b("disabled",e.showFileOption),Me("ngModel",e.formField.min)}}function Lz(n,t){if(n&1){let e=le();_(0,"div",12)(1,"label",13),k(2,"Max Value"),v(),_(3,"div",46)(4,"input",48),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.max,r)||(o.formField.max=r),U(r)}),v()()()}if(n&2){let e=x();w(4),b("disabled",e.showFileOption),Me("ngModel",e.formField.max)}}function Bz(n,t){n&1&&(_(0,"div",43),k(1,"*link obbligatorio"),v())}function jz(n,t){n&1&&(_(0,"div",43),k(1,"*Testo del link"),v())}function Uz(n,t){if(n&1){let e=le();_(0,"div",12)(1,"div",12)(2,"label",13),k(3,"CheckBox con link"),v(),_(4,"div",34)(5,"input",49),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.checkBoxOptions.haveLink,r)||(o.formField.checkBoxOptions.haveLink=r),U(r)}),v(),_(6,"label",50),k(7,"Abilita per inserire un link nella checkbox"),v()()(),_(8,"div",12)(9,"label",13),k(10,"Link"),v(),_(11,"div",15)(12,"input",51,4),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.checkBoxOptions.hrefLink,r)||(o.formField.checkBoxOptions.hrefLink=r),U(r)}),v()(),G(14,Bz,2,0,"div",17),v(),_(15,"div",12)(16,"label",13),k(17,"Testo del link"),v(),_(18,"div",15)(19,"input",52,5),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.checkBoxOptions.hrefText,r)||(o.formField.checkBoxOptions.hrefText=r),U(r)}),v()(),G(21,jz,2,0,"div",17),v()()}if(n&2){let e=Vt(13),i=Vt(20),r=x();w(5),Me("ngModel",r.formField.checkBoxOptions.haveLink),w(7),Me("ngModel",r.formField.checkBoxOptions.hrefLink),b("required",r.formField.checkBoxOptions.haveLink===!0),w(2),b("ngIf",e.invalid&&e.touched&&r.formField.checkBoxOptions.haveLink),w(5),b("required",r.formField.checkBoxOptions.haveLink===!0),Me("ngModel",r.formField.checkBoxOptions.hrefText),w(2),b("ngIf",i.invalid&&i.touched&&r.formField.checkBoxOptions.haveLink)}}function $z(n,t){n&1&&(_(0,"div",43),k(1,"maxWidth obbligatorio"),v())}function Gz(n,t){if(n&1){let e=le();_(0,"div",12)(1,"div",12)(2,"label",13),k(3,"Larghezza massima immagine"),v(),_(4,"div",15)(5,"input",53,6),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.fileBoxOptions.maxWidth,r)||(o.formField.fileBoxOptions.maxWidth=r),U(r)}),v()(),G(7,$z,2,0,"div",17),v(),_(8,"div",12)(9,"label",13),k(10,"Altezza massima"),v(),_(11,"div",15)(12,"input",54),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.fileBoxOptions.maxheight,r)||(o.formField.fileBoxOptions.maxheight=r),U(r)}),v()()(),_(13,"div",12)(14,"label",13),k(15,"Salva foto base64"),v(),_(16,"div",34)(17,"input",55),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.fileBoxOptions.isbase64,r)||(o.formField.fileBoxOptions.isbase64=r),U(r)}),v(),_(18,"label",56),k(19,"Spunta per salvare il base64, se non lo fai lo devi gestire a mano!"),v()()(),_(20,"div",12)(21,"label",13),k(22,"Max size in MB"),v(),_(23,"div",15)(24,"input",57),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.fileBoxOptions.maxSize,r)||(o.formField.fileBoxOptions.maxSize=r),U(r)}),v()()()()}if(n&2){let e=Vt(6),i=x();w(5),Me("ngModel",i.formField.fileBoxOptions.maxWidth),w(2),b("ngIf",e.invalid&&e.touched),w(5),Me("ngModel",i.formField.fileBoxOptions.maxheight),w(5),Me("ngModel",i.formField.fileBoxOptions.isbase64),w(7),Me("ngModel",i.formField.fileBoxOptions.maxSize)}}function Hz(n,t){n&1&&(_(0,"div",43),k(1,"displayExp obbligatorio"),v())}function zz(n,t){n&1&&(_(0,"div",43),k(1,"valueExp obbligatorio"),v())}function qz(n,t){n&1&&(_(0,"div",43),k(1,"Api se remote obbligatorio"),v())}function Wz(n,t){if(n&1){let e=le();_(0,"tr",73),H("click",function(){let r=j(e).$implicit,o=x(3);return U(o.onOptionClick(r))}),_(1,"td"),k(2),v(),_(3,"td"),k(4),v(),_(5,"td"),k(6),v(),_(7,"td")(8,"button",73),H("click",function(){let r=j(e).index,o=x(3);return U(o.removeOption(r))}),k(9,"Rimuovi"),v()()()}if(n&2){let e=t.$implicit,i=x(3);w(2),ke(" ",e[i.formField.selectOptions.valueExp]," "),w(2),ke(" ",e[i.formField.selectOptions.displayExp]," "),w(2),ke(" ",e.parent," ")}}function Kz(n,t){if(n&1){let e=le();_(0,"table",66)(1,"thead")(2,"tr")(3,"td"),k(4),v(),_(5,"td"),k(6),v(),_(7,"td"),k(8,"Parent"),v(),_(9,"td"),k(10,"Azioni"),v()()(),_(11,"tbody")(12,"tr")(13,"td")(14,"input",67),Ae("ngModelChange",function(r){j(e);let o=x(2);return Pe(o.newOption[o.formField.selectOptions.valueExp],r)||(o.newOption[o.formField.selectOptions.valueExp]=r),U(r)}),v()(),_(15,"td")(16,"input",68),Ae("ngModelChange",function(r){j(e);let o=x(2);return Pe(o.newOption[o.formField.selectOptions.displayExp],r)||(o.newOption[o.formField.selectOptions.displayExp]=r),U(r)}),v()(),_(17,"td")(18,"input",69),Ae("ngModelChange",function(r){j(e);let o=x(2);return Pe(o.newOption.parent,r)||(o.newOption.parent=r),U(r)}),v()(),_(19,"td",70)(20,"button",71),H("click",function(){j(e);let r=x(2);return U(r.addOption())}),Q(21,"span",42),v()()(),G(22,Wz,10,3,"tr",72),v()()}if(n&2){let e=x(2);w(4),Ye(e.formField.selectOptions.valueExp),w(2),Ye(e.formField.selectOptions.displayExp),w(8),b("name",e.formField.selectOptions.valueExp),Me("ngModel",e.newOption[e.formField.selectOptions.valueExp]),w(2),b("name",e.formField.selectOptions.displayExp),Me("ngModel",e.newOption[e.formField.selectOptions.displayExp]),w(2),Me("ngModel",e.newOption.parent),w(4),b("ngForOf",e.formField.selectOptions.options)}}function Qz(n,t){if(n&1){let e=le();_(0,"div",12)(1,"div",12)(2,"label",13),k(3,"Multiple"),v(),_(4,"div",34)(5,"input",55),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.multiple,r)||(o.formField.selectOptions.multiple=r),U(r)}),v(),_(6,"label",56),k(7,"Select tipo multicheck"),v()()(),_(8,"div",12)(9,"label",13),k(10,"Parent ID"),v(),_(11,"div",15)(12,"input",58),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.parent,r)||(o.formField.selectOptions.parent=r),U(r)}),v()()(),_(13,"div",12)(14,"label",13),k(15,"Display Expression "),_(16,"span",14),k(17,"Richiesto"),v()(),_(18,"div",15)(19,"input",59,7),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.displayExp,r)||(o.formField.selectOptions.displayExp=r),U(r)}),v()(),G(21,Hz,2,0,"div",17),v(),_(22,"div",12)(23,"label",13),k(24,"Value Expression "),_(25,"span",14),k(26,"Richiesto"),v()(),_(27,"div",15)(28,"input",60,8),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.valueExp,r)||(o.formField.selectOptions.valueExp=r),U(r)}),v()(),G(30,zz,2,0,"div",17),v(),_(31,"div",61)(32,"div",12)(33,"label",13),k(34,"Remote dataSource"),v(),_(35,"div",34)(36,"input",62),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.remote,r)||(o.formField.selectOptions.remote=r),U(r)}),v(),_(37,"label",63),k(38,"Remote dataSource"),v()()()(),_(39,"div",12)(40,"label",13),k(41,"Api "),_(42,"span",14),k(43,"Richiesto"),v()(),_(44,"div",15)(45,"input",64,9),Ae("ngModelChange",function(r){j(e);let o=x();return Pe(o.formField.selectOptions.api,r)||(o.formField.selectOptions.api=r),U(r)}),v()(),G(47,qz,2,0,"div",17),v(),_(48,"div",61),G(49,Kz,23,8,"table",65),v()()}if(n&2){let e=Vt(20),i=Vt(29),r=Vt(46),o=x();w(5),Me("ngModel",o.formField.selectOptions.multiple),w(7),Me("ngModel",o.formField.selectOptions.parent),w(7),Me("ngModel",o.formField.selectOptions.displayExp),w(2),b("ngIf",e.invalid&&e.touched),w(7),Me("ngModel",o.formField.selectOptions.valueExp),w(2),b("ngIf",i.invalid&&i.touched),w(6),Me("ngModel",o.formField.selectOptions.remote),w(9),Me("ngModel",o.formField.selectOptions.api),b("disabled",!o.formField.selectOptions.remote),w(2),b("ngIf",r.invalid&&r.touched),w(2),b("ngIf",!(o.formField.selectOptions!=null&&o.formField.selectOptions.remote)&&(o.formField.selectOptions==null?null:o.formField.selectOptions.valueExp)&&(o.formField.selectOptions==null?null:o.formField.selectOptions.displayExp))}}var tN=(()=>{class n{constructor(){this.outPutProperties=new oe,this.showSelectOption=!1,this.showFileOption=!1,this.showCheckBoxOption=!1,this.showFileBoxOption=!1,this.showHiddenBox=!1,this.newOption={},this.optionSelIndex=-1,this.remoteSelect=!1}ngOnInit(){this.showSelectOption=!1;let e;switch(this.formField.type){case"hiddenBox":this.showHiddenBox=!0,this.formField.typeInput="hidden";break;case"checkBox":if(this.showCheckBoxOption=!0,this.formField.typeInput="boolean",this.checkBoxOptions={haveLink:!1,hrefLink:"",hrefText:""},typeof this.formField.checkBoxOptions<"u"){let r=this.formField.checkBoxOptions;this.checkBoxOptions={haveLink:r.haveLink,hrefLink:r.hrefLink,hrefText:r.hrefText}}this.formField.checkBoxOptions=this.checkBoxOptions;break;case"fileBox":if(this.showFileBoxOption=!0,this.formField.typeInput="file",this.fileBoxOptions={maxWidth:0,maxheight:0,isbase64:!0,maxSize:10},typeof this.formField.fileBoxOptions<"u"){let r=this.formField.fileBoxOptions;this.fileBoxOptions={maxWidth:r.maxWidth,maxheight:r.maxheight,isbase64:r?.isbase64,maxSize:r?.maxSize}}this.formField.fileBoxOptions=this.fileBoxOptions;break;case"selectBox":this.formField.typeInput="selectBox",this.showSelectOption=!0,this.selectOptions={multiple:!1,displayExp:"",valueExp:"",options:[],parent:"",remote:!1,api:""},typeof this.formField.selectOptions<"u"&&(e=this.formField.selectOptions,this.selectOptions={multiple:e.multiple,displayExp:e.displayExp,valueExp:e.valueExp,options:e.options,parent:e.parent,remote:e.remote,api:e.api}),this.formField.selectOptions=this.selectOptions;break;default:break}}addOption(){if(this.formField.selectOptions.remote)return;let e=this.formField.selectOptions.valueExp,i=this.formField.selectOptions.displayExp;!this.newOption[e]||!this.newOption[i]||(this.selectOptions?.options&&(this.optionSelIndex>=0?this.selectOptions.options[this.optionSelIndex]=this.newOption:this.selectOptions.options.push(this.newOption)),this.formField.selectOptions&&(this.newOption={[this.formField.selectOptions.valueExp]:"",[this.formField.selectOptions?.displayExp]:"",parent:""}),this.optionSelIndex=-1)}onOptionClick(e){let i=this.formField.selectOptions.valueExp,r=this.formField.selectOptions.displayExp;this.newOption=e,this.formField.selectOptions?.options&&(this.optionSelIndex=this.formField.selectOptions?.options.findIndex(o=>o==e))}removeOption(e){this.selectOptions?.options&&this.selectOptions.options.splice(e,1)}saveProperties(e){if(!this.formPrsValidate(e))return;let r={name:"saveProperties",formField:this.formField};this.outPutProperties.emit(r)}closeProperties(e){if(e.valid)zo("Sei sicuro di voler abbandonare?","Attenzione!",r=>{if(r){let o={name:"closeProperties",formField:this.formField};this.outPutProperties.emit(o)}});else{let r={name:"closeProperties",formField:this.formField};this.outPutProperties.emit(r)}}addValidation(e){e.validation.push({type:"",value:""})}formPrsValidate(e){return e.valid?this.showSelectOption&&this.formField.selectOptions&&!this.formField.selectOptions.remote&&this.formField.selectOptions.options?.length==0?(alert("Mancano i campi le options della select"),!1):!0:(alert("Mancano i campi obbligatori"),this.markFormGroupTouched(e),!1)}markFormGroupTouched(e){Object.keys(e.controls).forEach(i=>{e.control.get(i)?.markAsTouched({onlySelf:!0})})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-element"]],inputs:{formField:"formField"},outputs:{outPutProperties:"outPutProperties"},standalone:!0,features:[fe],decls:91,vars:23,consts:[["elementForm","ngForm"],["name","ngModel"],["typeInput","ngModel"],["label","ngModel"],["hrefLink","ngModel"],["hrefText","ngModel"],["maxWidth","ngModel"],["displayExp","ngModel"],["valueExp","ngModel"],["api","ngModel"],[1,"modal-body","form-container"],[1,""],[1,"row","mt-3","mb-3"],[1,"col-sm-3","col-form-label","font-medium"],[1,"badge","bg-secondary"],[1,"col-sm-9"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],["name","typeInput","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["value",""],["value","text"],["value","number"],["value","email"],["value","password"],["value","url"],["value","file",3,"selected"],["value","boolean",3,"selected"],["value","selectBox",3,"selected"],["value","hidden",3,"selected"],["type","text","name","label","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","placeholder",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","cssClass",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","htmlId",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","maxLength",1,"form-control",3,"ngModelChange","disabled","ngModel"],[1,"col-sm-9","form-check"],["id","required","type","checkbox","name","required",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","required",1,"form-check-label"],["class","row mt-3 mb-3",4,"ngIf"],["class","row mt-3 mb-3 ",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","ana-button",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"mdi","mdi-content-save-outline"],[1,"text-danger"],["id","funcButton","type","checkbox","name","funcButton",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","min",1,"col-sm-3","col-form-label","font-medium"],[1,"col-sm-9","form-control"],["id","min","type","number","name","min",1,"form-control",3,"ngModelChange","disabled","ngModel"],["type","number","name","max",1,"form-control",3,"ngModelChange","disabled","ngModel"],["id","hrefLink","name","hrefLink","type","checkbox",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","hrefLink",1,"form-check-label"],["id","hrefLink","name","hrefLink","type","url",1,"form-control",3,"ngModelChange","ngModel","required"],["id","hrefText","name","hrefText","type","text",1,"form-control",3,"ngModelChange","required","ngModel"],["id","maxWidth","name","maxWidth","type","number","required","",1,"form-control",3,"ngModelChange","ngModel"],["id","maxheight","name","maxheight","type","number",1,"form-control",3,"ngModelChange","ngModel"],["id","multiple","name","multiple","type","checkbox",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","multiple",1,"form-check-label"],["id","maxSize","name","maxSize","type","number",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","parent",1,"form-control",3,"ngModelChange","ngModel"],["type","text","required","","name","displayExp",1,"form-control",3,"ngModelChange","ngModel"],["type","text","required","","name","valueExp",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3","mb-3"],["id","remoted","name","remoted","type","checkbox",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","remoted",1,"form-check-label"],["type","text","required","","name","api",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","table table-sm ",4,"ngIf"],[1,"table","table-sm"],["type","text","placeholder","Nuovo Display",1,"form-control",3,"ngModelChange","name","ngModel"],["type","text","placeholder","Nuovo Value",1,"form-control",3,"ngModelChange","name","ngModel"],["type","text","name","parentT","placeholder","Nuovo Parent",1,"form-control",3,"ngModelChange","ngModel"],[1,"action-cell"],[1,"icon-button","btn","button-in-cell",3,"click"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(i,r){if(i&1){let o=le();_(0,"div",10)(1,"form",null,0)(3,"div",11)(4,"div",12)(5,"label",13),k(6,"Nome campo "),_(7,"span",14),k(8,"Richiesto"),v()(),_(9,"div",15)(10,"input",16,1),Ae("ngModelChange",function(a){return j(o),Pe(r.formField.name,a)||(r.formField.name=a),U(a)}),v()(),G(12,Pz,2,0,"div",17),v(),_(13,"div",12)(14,"label",13),k(15,"Tipo di campo "),_(16,"span",14),k(17,"Richiesto"),v()(),_(18,"div",15)(19,"select",18,2),Ae("ngModelChange",function(a){return j(o),Pe(r.formField.typeInput,a)||(r.formField.typeInput=a),U(a)}),_(21,"option",19),k(22,"Seleziona"),v(),_(23,"option",20),k(24,"Testo"),v(),_(25,"option",21),k(26,"Numerico"),v(),_(27,"option",22),k(28,"Email"),v(),_(29,"option",23),k(30,"Password"),v(),_(31,"option",24),k(32,"Url"),v(),_(33,"option",25),k(34,"file"),v(),_(35,"option",26),k(36,"Boolean"),v(),_(37,"option",27),k(38,"SelectBox"),v(),_(39,"option",28),k(40,"Nascosto/Hidden"),v()()(),G(41,Nz,2,0,"div",17),v(),_(42,"div",12)(43,"label",13),k(44,"Label "),_(45,"span",14),k(46,"Richiesto"),v()(),_(47,"div",15)(48,"input",29,3),Ae("ngModelChange",function(a){return j(o),Pe(r.formField.label,a)||(r.formField.label=a),U(a)}),v()(),G(50,Fz,2,0,"div",17),v(),_(51,"div",12)(52,"label",13),k(53,"Placeholder"),v(),_(54,"div",15)(55,"input",30),Ae("ngModelChange",function(a){return j(o),Pe(r.formField.placeholder,a)||(r.formField.placeholder=a),U(a)}),v()()(),_(56,"div",12)(57,"label",13),k(58,"CSS Class"),v(),_(59,"div",15)(60,"input",31),Ae("ngModelChange",function(a){return j(o),Pe(r.formField.cssClass,a)||(r.formField.cssClass=a),U(a)}),v()()(),_(61,"div",12)(62,"label",13),k(63,"HTML ID"),v(),_(64,"div",15)(65,"input",32),Ae("ngModelChange",function(a){return j(o),Pe(r.formField.htmlId,a)||(r.formField.htmlId=a),U(a)}),v()()(),_(66,"div",12)(67,"label",13),k(68,"Max Length"),v(),_(69,"div",15)(70,"input",33),Ae("ngModelChange",function(a){return j(o),Pe(r.formField.maxLength,a)||(r.formField.maxLength=a),U(a)}),v()()(),_(71,"div",12)(72,"label",13),k(73,"Required"),v(),_(74,"div",34)(75,"input",35),Ae("ngModelChange",function(a){return j(o),Pe(r.formField.required,a)||(r.formField.required=a),U(a)}),v(),_(76,"label",36),k(77," Campo Richiesto "),v()()(),G(78,kz,7,1,"div",37)(79,Vz,5,2,"div",37)(80,Lz,5,2,"div",37),v(),G(81,Uz,22,7,"div",38)(82,Gz,25,5,"div",38)(83,Qz,50,11,"div",38),v()(),_(84,"div",39)(85,"button",40),H("click",function(){j(o);let a=Vt(2);return U(r.closeProperties(a))}),Q(86,"span",41),k(87,"Chiudi"),v(),_(88,"button",40),H("click",function(){j(o);let a=Vt(2);return U(r.saveProperties(a))}),Q(89,"span",42),k(90,"Salva"),v()()}if(i&2){let o=Vt(11),s=Vt(49);w(10),Me("ngModel",r.formField.name),w(2),b("ngIf",o.invalid&&o.touched),w(7),Me("ngModel",r.formField.typeInput),b("disabled",r.showFileOption||r.showSelectOption||r.showHiddenBox),w(14),b("selected",r.showFileOption),w(2),b("selected",r.showCheckBoxOption),w(2),b("selected",r.showSelectOption),w(2),b("selected",r.showHiddenBox),w(2),b("ngIf",s.invalid&&s.touched),w(7),Me("ngModel",r.formField.label),w(2),b("ngIf",s.invalid&&s.touched),w(5),Me("ngModel",r.formField.placeholder),w(5),Me("ngModel",r.formField.cssClass),w(5),Me("ngModel",r.formField.htmlId),w(5),b("disabled",r.showFileOption),Me("ngModel",r.formField.maxLength),w(5),Me("ngModel",r.formField.required),w(3),b("ngIf",r.formField.type=="textBox"),w(),b("ngIf",r.formField.type=="textBox"&&r.formField.typeInput=="number"),w(),b("ngIf",r.formField.type=="textBox"&&r.formField.typeInput=="number"),w(),b("ngIf",r.showCheckBoxOption&&r.formField.checkBoxOptions),w(),b("ngIf",r.showFileBoxOption&&r.formField.fileBoxOptions),w(),b("ngIf",r.showSelectOption&&r.formField.selectOptions)}},dependencies:[Ce,lt,Qe,bn,Jl,Zl,Xl,bi,D1,w1,Wo,zn,fr,xd,qr,Td,Ko],styles:[".disabled-el[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}"]})}}return n})();var Yz=new ie("angularfire2.functions.origin"),Jz=new ie("angularfire2.functions.region"),N1=new ie("angularfire2.functions.use-emulator"),Md=(()=>{class n{httpsCallable;constructor(e,i,r,o,s,a,l,u){let d=l,f=ce(void 0).pipe(Dn(o.outsideAngular),nt(()=>import("./chunk-UGZKZQLK.js")),ne(()=>Ms(e,r,i)),ne(m=>al(`${m.name}.functions.${s||a}`,"AngularFireFunctions",m.name,()=>{let y;if(s&&a)throw new Error("REGION and ORIGIN can't be used at the same time.");return y=m.functions(s||a||void 0),d&&y.useEmulator(...d),y},[s,a,d])),Ma({bufferSize:1,refCount:!1}));return this.httpsCallable=(m,y)=>D=>Le(f).pipe(Dn(o.insideAngular),nt(T=>T.httpsCallable(m,y)(D)),ne(T=>T.data)),Fp(this,f,r)}static \u0275fac=function(i){return new(i||n)(K(Co),K(Eo,8),K(Fe),K(xs),K(Jz,8),K(Yz,8),K(N1,8),K(Pr,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),nN=(()=>{class n{constructor(){nn.registerVersion("angularfire",gi.full,"fn-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=It({type:n});static \u0275inj=St({providers:[Md]})}return n})();var pr=(()=>{class n{constructor(){this.api=xn.BASE_API_URL,this.isLoginUser=Xe(!1),this.firestore=F(na),this.angularFireAuth=F(Ru),this.httpClient=F(ki),this.auth=Sc(F(wo)),this.functions=F(Md),this.apiFire="https://us-central1-comemivesto-5e5f9.cloudfunctions.net/api"}get httpOptions(){return{headers:new Fi().set("Authorization","Bearer "+this.token).set("Content-Type","application/x-www-form-urlencoded; charset=UTF-8").set("Content-Type","application/json; charset=utf-8"),params:new pi}}set token(e){sessionStorage.setItem("token",e)}get token(){return sessionStorage.getItem("token")??""}get InfoUtenteConnesso(){let e=sessionStorage.getItem("utenteConnesso")??"";return JSON.parse(e)}getUsers(){return this.firestore.collection("users").valueChanges().pipe(ne(e=>e))}isLoggedUser(){return this.isLoginUser.set(!!this.token),!!this.token}isExistsUsers(){let e=xn.BASE_API_URL+"Account/GetUserInfo",i=this.httpOptions;return this.httpClient.get(e,i)}loginUser(e){return E(this,null,function*(){let i=`${this.apiFire}/user/login`,r=this.httpOptions;try{if(yield this.authFirebase(e)){let s=this.httpClient.post(i,e,r),a=yield Nn(s);if(a)return this.token=a,this.isLoginUser.set(!0),!0}}catch(o){return console.error(o),!1}return!1})}LogOut(){return E(this,null,function*(){let e=xn.BASE_API_URL+"Token/Logout",i=this.httpOptions,r=this.httpClient.get(e,i);return yield Nn(r)})}clearSessionStorage(){if(sessionStorage.length>0)for(let i in sessionStorage)sessionStorage.removeItem(i)}authFirebase(e){return E(this,null,function*(){try{let i=yield this.angularFireAuth.signInWithEmailAndPassword(e.email,e.password);return sessionStorage.setItem("utenteConnesso",JSON.stringify(i.user)),!0}catch(i){return console.error("Errore durante l'autenticazione:",i),!1}})}sendPasswordFirebase(e){return E(this,null,function*(){try{return yield Xg(this.auth,e),!0}catch{return!1}})}disabledUsersFirebase(e){return E(this,null,function*(){let i=`${this.apiFire}/users/disable/${e}`,r={uid:e};try{let o=this.httpClient.post(i,r),s=yield Nn(o);return console.log(s),!0}catch(o){return console.error("Errore nella disabilitazione dell'utente:",o),!1}})}deleteUsersFirebase(e){return E(this,null,function*(){let i=`${this.apiFire}/users/delete/${e}`,r={uid:e};try{let o=this.httpClient.delete(i);if(yield Nn(o)){let a=this.firestore.collection("users").ref;a=a.where("uid","==",e);try{let u=(yield a.get()).docs.map(d=>d.ref.delete());return yield Promise.all(u),this.getUsers(),!0}catch(l){return console.error("Error deleting documents:",l),!1}}return!0}catch(o){return console.error("Errore nell'eliminazione dell'utente:",o),!1}})}RecuperaPassword(e){return E(this,null,function*(){let i=xn.BASE_API_URL+"Account/RecuperaPassword?username="+e,r=this.httpOptions,o=this.httpClient.get(i,r);return yield Nn(o)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Cg=(()=>{class n{constructor(e,i){this.httpClient=e,this.activatedRoute=i,this.token="",this.userService=F(pr),this.apiUrl=xn.BASE_API_URL}get httpOptionCall(){return this.userService.httpOptions}getElenco(e,i){let r=`${this.apiUrl}${e}`;i&&(r=`${r}${i}`);let o=this.httpOptionCall;return this.httpClient.get(r,o).pipe(a=>a)}getValue(e,i,r){return E(this,null,function*(){let o="";typeof i<"u"&&(o=i);let s=r||"",a;e.includes("?")||e.includes("/")||String(i).includes("/")||String(i).includes("?")&&o?a=e+o:o?a=e+"/"+o:a=e;try{let l=xn.BASE_API_URL+a+s,u=this.httpOptionCall,d=this.httpClient.get(l,u);return yield Nn(d)}catch(l){l.status}})}actionPut(e,i,r=!0){return E(this,null,function*(){let o=r?"/"+i.id:"",s=xn.BASE_API_URL+e+o,a=this.httpOptionCall,l=this.httpClient.put(s,i,a);return yield Nn(l)})}actionInsert(e,i,r=!1){return E(this,null,function*(){let o;o=xn.BASE_API_URL;let s=o+e,a=this.httpOptionCall,l=this.httpClient.post(s,i,a);return yield Nn(l)})}actionDelete(e,i){let r=xn.BASE_API_URL+e+"/"+i,o=this.httpOptionCall,s=this.httpClient.delete(r,o);return Nn(s)}static{this.\u0275fac=function(i){return new(i||n)(K(ki),K(yn))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zz(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1&&i===0?1:r===0&&e!==0&&e%1e6===0&&i===0||!(r>=0&&r<=5)?4:5}var rN=["it",[["m.","p."],["AM","PM"],void 0],void 0,[["D","L","M","M","G","V","S"],["dom","lun","mar","mer","gio","ven","sab"],["domenica","luned\xEC","marted\xEC","mercoled\xEC","gioved\xEC","venerd\xEC","sabato"],["dom","lun","mar","mer","gio","ven","sab"]],void 0,[["G","F","M","A","M","G","L","A","S","O","N","D"],["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]],void 0,[["aC","dC"],["a.C.","d.C."],["avanti Cristo","dopo Cristo"]],1,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{BRL:[void 0,"R$"],BYN:[void 0,"Br"],EGP:[void 0,"\xA3E"],HKD:[void 0,"$"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NOK:[void 0,"NKr"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VND:[void 0,"\u20AB"]},"ltr",Zz];var Xz=["dynamicContent"],oN=n=>({"summary-item":n});function e8(n,t){if(n&1){let e=le();_(0,"span",11),H("click",function(r){j(e);let o=x().$implicit,s=x(3);return U(s.actionCell(r,o.nameEvent))}),Q(1,"span"),k(2),v()}if(n&2){let e=x().$implicit,i=x(3);b("ngStyle",i.styleData),w(),OT("btn-icon ",e.icon,""),w(),ke(" ",e.text," ")}}function t8(n,t){if(n&1&&(_(0,"li"),G(1,e8,3,5,"span",10),v()),n&2){let e=t.$implicit;w(),b("ngIf",e.visible)}}function n8(n,t){if(n&1&&(_(0,"div",8)(1,"ul"),G(2,t8,2,1,"li",9),v()()),n&2){let e=x(2);w(2),b("ngForOf",e.editorButtons)}}function i8(n,t){if(n&1){let e=le();Be(0),_(1,"div",5)(2,"button",6),H("click",function(r){j(e);let o=x();return U(o.showDialog(r))}),Q(3,"span",7),v()(),G(4,n8,3,1,"ng-template",null,1,er),je()}if(n&2){let e=x();w(2),b("ngStyle",e.styleData)}}function r8(n,t){if(n&1){let e=le();_(0,"span",13),H("click",function(r){j(e);let o=x(2);return U(o.clickTd(r))}),v()}if(n&2){let e=x(2);b("ngStyle",e.styleData)("ngClass",Jt(3,oN,e.showSummaryText))("innerHTML",e.highlightMatches(e.staticData),Mf)}}function o8(n,t){if(n&1&&(Be(0),G(1,r8,1,5,"span",12),je()),n&2){let e=x(),i=Vt(4);w(),b("ngIf",!e.showBooleanFlag&&!e.isMockDataLoading)("ngIfElse",i)}}function s8(n,t){if(n&1&&Q(0,"span",14),n&2){let e=x();b("ngStyle",e.styleData)("ngClass",Jt(2,oN,e.showSummaryText))}}function a8(n,t){if(n&1){let e=le();_(0,"div",16),H("mouseenter",function(){j(e);let r=x(2);return U(r.restShow())})("mouseleave",function(){j(e);let r=x(2);return U(r.hideTooltip())}),Q(1,"img",17),v()}if(n&2){let e=x(2);b("ngStyle",e.tooltipStyle),w(),b("src",e.toolTipImg,di)}}function l8(n,t){if(n&1&&G(0,a8,2,2,"div",15),n&2){let e=x();b("ngIf",e.colType=="campoImg")}}cx(rN);var sN=(()=>{class n{constructor(){this.overlayService=F(Qo),this.dataRow=[],this.searchText=null,this.showSummaryText=!1,this.emitClick=new oe,this.emitText=new oe,this.btnActionClick=new oe,this.isMockDataLoading=!1,this.editorButtons=[],this.styleData={},this.notEditing=!1,this.showBooleanFlag=!1,this.summaryTextHtml="",this.anagraficaService=F(Cg),this.isTooltipVisible=!1}ngAfterViewInit(){let e=this.colProperty.colAlignment?this.colProperty.colAlignment:"left";switch(this.styleData={"text-align":e},this.staticData=this.renderHtmlColumn(this.value,this.colProperty.format),this.colProperty.labelVisible=!1,this.dataField=this.colProperty.dataField,this.colType){case"editorButtons":console.log(this.colProperty),this.editorButtons=this.colProperty.editorbuttons;break;case"removeButtons":break;default:break}}renderDataColumn(e,i,r){return E(this,null,function*(){if(i.valueExpr&&i.valueExpr!="object"){let o=i.dataSource;if(!this.value||typeof i.static<"u"&&i.static)return;Array.isArray(e)?this.staticData=e:yield this.getElementValue(o,i,this.value),this.remoteData&&(i.displayExpr?(this.displayExpr=i.displayExpr,this.staticData=this.remoteData[this.displayExpr]):(this.displayExpr=i.valueExpr,this.staticData=this.remoteData[this.displayExpr]),this.staticData=this.renderHtmlColumn(this.staticData,""))}else if(i.valueExpr=="object"){if(Array.isArray(e)){let o=i.displayExpr;this.staticData=e.map(s=>s[o])}}else this.staticData=this.value})}getElementValue(e,i,r){return E(this,null,function*(){yield this.anagraficaService.getValue(e,r,"").then(s=>(s.items&&(s=s.items),this.remoteData=s,this.remoteData))})}renderHtmlColumn(e,i){let r=this.colType,o=e;switch(r){case"campo":o=this.defaultRender(e,i);break;case"campoNumber":o=this.numberRender(e,i);break;case"campoLista":o=this.listaRender(e);break;case"campoDateTime":case"campoData":o=this.dateRender(e,i);break;case"campoImg":this.toolTipImg=e,o=`<img src="${e}" class="cell-img" >`;break;case"campoButton":let s=this.colProperty.button;console.log("buttonInfo",s),o=`<button class="btn "><span class="${s.icon}"></span></button>`;break;default:o=this.defaultRender(e,i)}return o}defaultRender(e,i){if(this.showSummaryText&&e&&(this.summaryTextHtml+='<span style="padding-right:5px">Tot: </span>'),/(\d{4})([\/-])(\d{1,2})\2(\d{1,2})/.test(e))if(i){let s=new Date(e);return su(s,i,"en-US")}else{let s=new Date(e);return su(s,"dd/MM/yyyy","en-US")}if(typeof e=="boolean"){let s=this.colProperty.dataOptions;typeof s.trueText>"u"||s.falseText=="undefined"?this.showBooleanFlag=!0:e?e=s.trueText:e=s.falseText}if(typeof e=="number")if(this.styleData={"text-align":"right"},i)if(i.includes("#")){let s=e.toFixed(3).split("."),[a,l]=s,u=a.replace(/\B(?=(\d{3})+(?!\d))/g,"."),d=i.split(".")[1].length;return`${u},${l.slice(0,d)}`}else return au(e,"it-IT","1.0-3");else return au(e,"it-IT","1.0-3");return e}numberRender(e,i){if(this.styleData={"text-align":"right"},typeof e=="string"&&(e=parseFloat(e)),i)if(i.includes("#")){let r=e.toFixed(3).split("."),[o,s]=r,a=o.replace(/\B(?=(\d{3})+(?!\d))/g,"."),l=i.split(".")[1].length;return`${a},${s.slice(0,l)}`}else return au(e,"it-IT","1.0-3");else return au(e,"it-IT","1.0-3")}dateRender(e,i="dd/MM/yyyy"){let r;if(typeof e=="string"||typeof e=="number"){let o=/(\d{4})([\/-])(\d{1,2})\2(\d{1,2})/,s=/(\d{1,2})([\/-])(\d{1,2})\2(\d{4})/;if(typeof e=="string"&&o.test(e))r=new Date(e);else if(typeof e=="string"&&s.test(e)){let a=e.split(/[-\/]/),l=parseInt(a[0],10),u=parseInt(a[1],10)-1,d=parseInt(a[2],10);r=new Date(d,u,l)}else r=new Date(e)}else if(e instanceof Date)r=e;else return"Invalid date format";return isNaN(r.getTime())?"Invalid date":su(r,i,"en-US")}listaRender(e){let i=e,r=this.colProperty.customizedOptions;if(r.options&&r.options.length>0){let o=r.valueExp,s=r.displayExp;i=r.options.filter(l=>l[o]==e)[0][s]}return i}clickTd(e){this.showTooltip(e),e.value=this.staticData,this.emitClick.emit(e)}actionCell(e,i){let r={action:i,rowIndex:this.rowIndex,cancel:!1};this.btnActionClick.emit(r),r.cancel||this.overlayService.closeOverlay()}showTooltip(e){e.stopImmediatePropagation(),e.stopPropagation(),this.openOverlay(e)}showDialog(e){return E(this,null,function*(){e.stopImmediatePropagation(),e.stopPropagation(),this.openOverlay(e)})}openOverlay(e){let r=e.currentTarget.getBoundingClientRect(),o={top:r.bottom+window.scrollY,left:r.left+window.scrollX},s=window.innerWidth,a=423;o.left+a>s&&(o.left=s-a-10);let l={position:o,contentTemplate:this.dynamicContent,showBgOverlay:!1,index:this.rowIndex};this.overlayService.openOverlay(l)}restShow(){this.isTooltipVisible=!0}hideTooltip(){this.isTooltipVisible=!1}onValueChangeCheckBox(e){this.staticData=e.value}highlightMatches(e){if(!e)return"";if(!this.searchText)return this.summaryTextHtml+e;let i=new RegExp(this.searchText,"gi");return typeof e=="string"?e.replace(i,r=>`<span class="highlight">${r}</span>`):""}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-td-item"]],viewQuery:function(i,r){if(i&1&&kt(Xz,5),i&2){let o;At(o=Ot())&&(r.dynamicContent=o.first)}},inputs:{colProperty:"colProperty",colType:"colType",value:"value",rowIndex:"rowIndex",dataRow:"dataRow",searchText:"searchText",showSummaryText:"showSummaryText",isMockDataLoading:"isMockDataLoading"},outputs:{emitClick:"emitClick",emitText:"emitText",btnActionClick:"btnActionClick"},standalone:!0,features:[fe],decls:7,vars:2,consts:[["skeletonTemplate",""],["dynamicContent",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"editor-buttons-content"],[1,"button-in-cell",3,"click","ngStyle"],[1,"mdi","mdi-dots-vertical"],[1,"editor-buttons-menu"],[4,"ngFor","ngForOf"],["class","",3,"ngStyle","click",4,"ngIf"],[1,"",3,"click","ngStyle"],["class","contet-data ",3,"ngStyle","ngClass","innerHTML","click",4,"ngIf","ngIfElse"],[1,"contet-data",3,"click","ngStyle","ngClass","innerHTML"],[1,"contet-data","loadingSkeleton",3,"ngStyle","ngClass"],["class","tooltip-custom",3,"ngStyle","mouseenter","mouseleave",4,"ngIf"],[1,"tooltip-custom",3,"mouseenter","mouseleave","ngStyle"],["alt","Immagine Tooltip",3,"src"]],template:function(i,r){i&1&&(Be(0,2),G(1,i8,6,1,"ng-container",3)(2,o8,2,2,"ng-container",4),je(),G(3,s8,1,4,"ng-template",null,0,er)(5,l8,1,1,"ng-template",null,1,er)),i&2&&(b("ngSwitch",r.colType),w(),b("ngSwitchCase","editorButtons"))},dependencies:[Ce,Bt,lt,Qe,$n,Ja,ip,rp],styles:[".contet-data{width:100%;display:block;padding:1rem 1.25rem;position:relative;word-break:break-all;word-wrap:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}  .contet-data .cell-img{object-fit:cover;max-height:27px}  .highlight{background-color:var(--blueDevextreme);color:#fff}.summary-item[_ngcontent-%COMP%]{color:#99a1a8;font-weight:700;text-align:right!important}.loadingSkeleton[_ngcontent-%COMP%]{background:#eee;background:linear-gradient(110deg,#ececec 8%,#f5f5f5 18%,#ececec 33%);border-radius:5px;background-size:150% 100%;width:100%;height:100%;animation:.9s _ngcontent-%COMP%_shine linear infinite}@keyframes _ngcontent-%COMP%_shine{to{background-position-x:-150%}}.tooltip-custom[_ngcontent-%COMP%]{display:inline-block;padding:5px;background-color:#000c;color:#fff;border-radius:5px;z-index:1000}.editor-buttons-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;padding:1rem 0rem}.editor-buttons-content[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]{position:relative;background:transparent;color:var(--blueSoft)}.editor-buttons-menu[_ngcontent-%COMP%]{border-radius:.375rem;border-color:transparent;background-color:#fff}.editor-buttons-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:.1rem;margin:.3rem}.editor-buttons-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.5rem}.editor-buttons-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:1rem;font-size:1rem;margin-right:.5rem}.editor-buttons-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:var(--table-th-bg)}"]})}}return n})();var c8=["dataGridWrapper"],u8=["riga"],d8=["tbody"],nc=(n,t,e)=>({"width.px":n,"min-width.px":t,"max-width.px":e}),h8=(n,t)=>({"selected-row":n,"state-hover-detail":t}),f8=n=>({"width.px":n});function p8(n,t){n&1&&Q(0,"div",17)}function m8(n,t){if(n&1&&Q(0,"col",19),n&2){let e=t.$implicit;jn(e.class),b("span",e.span)}}function g8(n,t){if(n&1&&(_(0,"colgroup"),G(1,m8,1,3,"col",18),v()),n&2){let e=x();w(),b("ngForOf",e.colsGroup)}}function _8(n,t){if(n&1&&(_(0,"th",22),k(1),v()),n&2){let e=t.$implicit;b("colSpan",e.span),w(),ke(" ",e.caption," ")}}function y8(n,t){if(n&1&&(_(0,"tr",20),G(1,_8,2,2,"th",21),v()),n&2){let e=x();w(),b("ngForOf",e.colsGroup)}}function v8(n,t){if(n&1){let e=le();_(0,"div",26)(1,"input",27,2),H("click",function(){j(e);let r=x(3);return U(r.clickToSelectAllRows())}),v()()}if(n&2){let e=x(3);w(),b("checked",e.rowSelectedAll)}}function w8(n,t){if(n&1&&G(0,v8,3,1,"div",25),n&2){let e=x(2);b("ngIf",e.isSelIconMultipleVisible)}}function b8(n,t){n&1&&(Be(0),Q(1,"i",34),je())}function C8(n,t){n&1&&(Be(0),Q(1,"i",35),je())}function E8(n,t){n&1&&(Be(0),Q(1,"i",35),je())}function D8(n,t){if(n&1&&(Be(0)(1,31),G(2,b8,2,0,"ng-container",32)(3,C8,2,0,"ng-container",32)(4,E8,2,0,"ng-container",33),je()()),n&2){let e=x(4);w(),b("ngSwitch",e.sortDirection),w(),b("ngSwitchCase","asc"),w(),b("ngSwitchCase","desc")}}function S8(n,t){n&1&&(Be(0),Q(1,"i",35),je())}function I8(n,t){if(n&1){let e=le();_(0,"span",29),H("click",function(){j(e);let r=x(2).$implicit,o=x();return U(o.sortColumn(r.dataField))}),k(1),G(2,D8,5,3,"ng-container",30)(3,S8,2,0,"ng-template",null,3,er),v()}if(n&2){let e=Vt(4),i=x(2).$implicit,r=x();w(),ke(" ",i.caption," "),w(),b("ngIf",r.sortedColumn===i.dataField)("ngIfElse",e)}}function T8(n,t){if(n&1&&G(0,I8,5,3,"span",28),n&2){let e=x().$implicit;b("ngIf",e.type!="editorButtons")}}function x8(n,t){if(n&1&&(_(0,"th",23),G(1,w8,1,1,"ng-template",24)(2,T8,1,1,"ng-template",null,1,er),v()),n&2){let e=t.$implicit,i=Vt(3),r=x();b("align",e.colAlignment)("ngStyle",fo(4,nc,e.colWidth,e.colWidth,e.colWidth)),w(),b("ngIf",e.type=="selection"&&r.isSelIconMultipleVisible)("ngIfElse",i)}}function M8(n,t){if(n&1&&(_(0,"tbody",36)(1,"tr",37)(2,"td",38)(3,"p",39),k(4),v()()()()),n&2){let e=x();b("ngStyle",e.bodyStyle),w(2),b("colSpan",e.colsHeader.length)("width",e.tableWidth)("ngStyle",fo(5,nc,e.tableWidth,e.tableWidth,e.tableWidth)),w(2),Ye(e.textEmpty)}}function A8(n,t){if(n&1&&(Be(0),_(1,"tr",45)(2,"td",46),Q(3,"app-td-item",47),v()(),je()),n&2){let e=x(),i=e.$implicit,r=e.index,o=x(2);w(2),b("colSpan",o.groupIndexCol.colSpan),w(),b("colProperty",o.groupIndexCol)("rowIndex",r)("value",i[o.groupIndexCol.dataField])}}function O8(n,t){if(n&1){let e=le();_(0,"td",48),H("click",function(r){let o=j(e),s=o.$implicit,a=o.index,l=x().index,u=x(2);return U(u.tdClick(r,s,a,l))}),Be(1),_(2,"app-td-item",49),H("btnActionClick",function(r){j(e);let o=x(3);return U(o.btnActionClick(r))}),v(),je(),v()}if(n&2){let e=t.$implicit,i=x(),r=i.$implicit,o=i.index,s=x(2);jn(e.class),b("id",e.dataField+"_"+o)("colSpan",e.colSpan)("align","center")("title",r[e.dataField]?r[e.dataField]:"")("ngStyle",fo(12,nc,e.colWidth,e.colWidth,e.colWidth)),w(2),b("colProperty",e)("searchText",s.searchText)("rowIndex",o)("value",r[e.dataField])("colType",e.type)}}function R8(n,t){if(n&1&&(Be(0),_(1,"caption"),k(2),v(),je()),n&2){let e=t.$implicit;w(2),ke("",e.caption," ")}}function P8(n,t){if(n&1&&(_(0,"table",55)(1,"tr",37)(2,"td",22)(3,"p",39),k(4,"Nessun dato da mostrare"),v()()()()),n&2){let e=x(4);b("width",e.tableWidthDetail),w(2),b("colSpan",e.colsDetail.length)}}function N8(n,t){if(n&1&&(_(0,"th",23)(1,"span"),k(2),v()()),n&2){let e=t.$implicit;b("align",e.captionAlign)("ngStyle",fo(3,nc,e.colWidth,e.colWidth,e.colWidth)),w(2),Ye(e.caption)}}function F8(n,t){if(n&1){let e=le();_(0,"div",62),H("click",function(r){j(e);let o=x(2).index,s=x(4),a=s.$implicit,l=s.index,u=x(2);return U(u.selectRow(r,o,a,l))}),Q(1,"i",63),v()}if(n&2){let e=x(6).$implicit;b("id","selection-"+e.dataField)}}function k8(n,t){if(n&1&&(Be(0),G(1,F8,2,1,"div",61),je()),n&2){let e=x(7);w(),b("ngIf",e.isSelIconDetailVisible)}}function V8(n,t){if(n&1&&(Be(0),Q(1,"app-td-item",47),je()),n&2){let e=x(),i=e.$implicit,r=e.index,o=x().$implicit;w(),b("colProperty",i)("rowIndex",r)("value",o[i.dataField])}}function L8(n,t){if(n&1&&(_(0,"td",60),G(1,k8,2,1,"ng-container",9)(2,V8,2,3,"ng-container",9),v()),n&2){let e=t.$implicit;jn(e.class),b("width",e.colWidth)("colSpan",e.colSpan)("align",e.colAlignment)("ngStyle",fo(8,nc,e.colWidth,e.colWidth,e.colWidth)),w(),b("ngIf",e.type=="selection-detail"),w(),b("ngIf",e.type=="data-detail")}}function B8(n,t){if(n&1){let e=le();_(0,"tr",58),H("click",function(r){let o=j(e),s=o.$implicit,a=o.index,l=x(3).index,u=x(2);return U(u.selectRowDetail(r,a,s,l))}),G(1,L8,3,12,"td",59),v()}if(n&2){let e=t.index,i=x(3).index,r=x(2);b("ngClass",Xi(2,h8,r.rowSelectedDetail[e],r.isSelectedSubRow(i,e))),w(),b("ngForOf",r.colsDetail)}}function j8(n,t){if(n&1&&(_(0,"table",56)(1,"thead")(2,"tr",20),G(3,N8,3,7,"th",12),v()(),G(4,B8,2,5,"tr",57),v()),n&2){let e=x(2).index,i=x(2);b("width",i.tableWidthDetail),w(3),b("ngForOf",i.colsDetail),w(),b("ngForOf",i.colsRowDetail[e])}}function U8(n,t){if(n&1&&(_(0,"tr",50)(1,"td",51)(2,"div",52),G(3,R8,3,1,"ng-container",41)(4,P8,5,2,"table",53)(5,j8,5,3,"table",54),v()()()),n&2){let e=x(3);w(),b("colSpan",e.colsHeader.length),w(2),b("ngForOf",e.colsGroupCaption),w(),b("ngIf",e.showNullDataDetail),w(),b("ngIf",!e.showNullDataDetail)}}function $8(n,t){if(n&1){let e=le();Be(0),G(1,A8,4,4,"ng-container",9),_(2,"tr",42,5),H("dblclick",function(r){let o=j(e),s=o.$implicit,a=o.index,l=x(2);return U(l.dblRowClick(r,a,s))})("click",function(r){let o=j(e),s=o.$implicit,a=o.index,l=x(2);return U(l.selectRow(r,a,s))})("mouseenter",function(){let r=j(e).index,o=x(2);return U(o.setStateHover(r))})("mouseleave",function(r){let o=j(e).index,s=Vt(3),a=x(2);return U(a.leaveStateHover(r,s,o))}),G(4,O8,3,16,"td",43),v(),G(5,U8,6,4,"tr",44),je()}if(n&2){let e=t.$implicit,i=t.index,r=x(2);w(),b("ngIf",r.groupIndexCol&&(i===0||e[r.groupIndexCol.dataField]!==r.rowsData()[i-1][r.groupIndexCol.dataField])),w(),b("ngClass",r.updateRowClasses(i)),w(2),b("ngForOf",r.colsHeader),w(),b("ngIf",r.showDetailRow[i])}}function G8(n,t){if(n&1&&Q(0,"td",66),n&2){let e=t.$implicit;jn(e.class),b("id",e.dataField)("width",e.colWidth)("colSpan",e.colSpan)("align",e.colAlignment)("ngStyle",fo(8,nc,e.colWidth,e.colWidth,e.colWidth))("width",e.colWidth)}}function H8(n,t){if(n&1&&(Be(0),_(1,"tr",64),G(2,G8,1,12,"td",65),v(),je()),n&2){let e=x(2);w(),b("ngStyle",e.emptyRowStyleClass),w(),b("ngForOf",e.colsHeader)}}function z8(n,t){if(n&1&&(_(0,"tbody",40,4)(2,"app-custom-scrollbar"),G(3,$8,6,4,"ng-container",41)(4,H8,3,2,"ng-container",9),v()()),n&2){let e=x();b("ngStyle",e.bodyStyle),w(3),b("ngForOf",e.rowsData()),w(),b("ngIf",e.showEmptyRow)}}function q8(n,t){if(n&1&&(_(0,"td")(1,"div",68),Q(2,"app-td-item",69),v()()),n&2){let e=t.$implicit,i=x(2);w(),b("ngStyle",Jt(4,f8,e.width)),w(),b("colProperty",e)("showSummaryText",!0)("value",i.valueSumm[e.dataField])}}function W8(n,t){if(n&1&&(_(0,"tfoot",67)(1,"tr"),G(2,q8,3,6,"td",41),v()()),n&2){let e=x();w(2),b("ngForOf",e.colsHeader)}}function K8(n,t){n&1&&Q(0,"div",70)}var ic=(()=>{class n{constructor(){this.queryString="",this.queryStringInEditor="",this.isKeyID=!0,this.remoteOperation=!1,this.dataSource=If([]),this.rowsData=Xe([]),this.overrideDataSource=null,this.selectedData=[],this.tableHeight=540,this.isEditable=!1,this.modeEdit="row",this.selectionRowMode="single",this.showFilter=!1,this.showToolbarTop=!1,this.showToolbarBottom=!1,this.rowAlternate=!0,this.isEditableNewRow=!0,this.isEditableEditRow=!0,this.isEditableDeleteRow=!0,this.isSearchable=!0,this.searchType="",this.detailOptions={isRemote:!1,service:"",api:"",isEditable:!1,colonne:[],costantValue:[],queryString:"",groupDataField:""},this.justRowExpanded=!1,this.toolbarButtonsBottomLeft=[],this.toolbarButtonsBottomRight=[],this.toolbarButtonsTopLeft=[],this.toolbarButtonsTopRight=[],this.tabIndex=800,this.showFooterSummary=!1,this.emittendSelectionRow=new oe,this.emittendDblRowClick=new oe,this.emittendGridEvent=new oe,this.emittendStartEdit=new oe,this.emittendButtonExit=new oe,this.emittendCellValueChange=new oe,this.emittendToolbarClick=new oe,this.emittendBttonCellClick=new oe,this.continuousEditing=!1,this.showT=!1,this.colsHeader=[],this.colsGroup=[],this.colsDetail=[],this.rowSelected=[],this.selectedRowIndex=0,this.rowSelectedDetail=[!1],this.selectedSubRowIndex=-1,this.rowIsDisable=[],this.showNullData=!1,this.textEmpty="...",this.showNullDataDetail=!1,this.showDetailRow=[!1],this.haveDetail=!1,this.colsRowDetail=[],this.colsGroupCaption=[],this.currentLastRowHeight=0,this.lastRowOffsetHeight=0,this.bodyHeight=200,this.colsGroupShow=!1,this.isSelIconMultipleVisible=!1,this.groupIndexCol=null,this.groupedData=null,this.isSelIconDetailVisible=!1,this.isOddRow=!0,this.showEmptyRow=!1,this.pageSize=20,this.currentPage=0,this.totalRecords=0,this.isLoading=!1,this.isHovered=[!1],this.isHoveredDetatil=[!1],this.rowcustomclass=[],this.checkQueryStringError=!1,this.validationObject={},this.inEditState=!1,this.latestScrollTopPosition=0,this.enableTfoot=!1,this.valueSumm=[],this.rowSelectedAll=!1,this.showEditorCellByRow=!1,this.anagraficaService=F(Cg),this.overrideService=F(Qo),this.sortDirection="asc",this.latestSkipLoaded=0,Cs(()=>{this.dataSource()?.length>0&&this.renderGrid()},{allowSignalWrites:!0})}handleKeyDown(e){let i=document.getElementById(this.idTable),r=document.activeElement;(e.code=="Enter"||e.code=="NumpadEnter")&&setTimeout(()=>{},300),e.code=="NumpadAdd"&&setTimeout(()=>{this.continuousEditing&&this.addRow()}),e.code=="Escape"&&(e.stopPropagation(),e.preventDefault())}ngAfterViewInit(){let r=this.getBaseRemInPixels(),o=this.convertRemToPixels(1.25,r);if(console.log(`1.25rem in pixels: ${o}px`),!this.tableWidth)if(this.dataGridWrapper)this.tableWidth=this.dataGridWrapper.nativeElement.getBoundingClientRect().width-o-10;else{let s=document.getElementById("dataGridWrapper");s&&(this.tableWidth=s.offsetWidth-o-10)}this.tableWrapWidth=this.tableWidth,this.idTable||Rn("Manca ID devo aggiornare","Errore!"),typeof this.dataJson=="string"&&(this.dataJson=JSON.parse(this.dataJson))}getBaseRemInPixels(){let e=getComputedStyle(document.documentElement).fontSize;return parseFloat(e)}convertRemToPixels(e,i){return e*i}renderGrid(){return E(this,null,function*(){this.textEmpty="...",this.enableTfoot=!1,this.showFooterSummary&&(this.enableTfoot=!0,this.valueSumm=[]),this.renderToolBarGrid(this.showToolbarTop,this.showToolbarBottom),this.remoteOperation?(yield this.buildAndTestQueryString())&&(yield this.loadRemoteRecords()):(this.rowsData.set(this.dataSource()),this.totalRecords=this.rowsData().length),this.selectRowByData();let e,i=typeof this.colonne>"u"?[]:this.colonne;this.service&&i.length==0||(typeof this.colonne.find(a=>a.itemType)>"u"?e=[{itemType:"group",colSpan:this.colonne.length,caption:"",groupDataField:"",data:this.colonne}]:e=this.colonne),yield this.buildHeaderColumns(e);let r=e.filter(s=>s.itemType=="dettaglio");yield this.builDetailGrid(r,r),yield this.resizeCols(),yield this.setStyleBody(),this.enableTfoot&&this.calcSommaryCells();let o={name:"gridHasInitialized",dataSource:this.rowsData(),compnent:this,colonne:this.colsHeader};this.emittendGridEvent.emit(o)})}renderToolBarGrid(e,i){try{if(this.showToolbarBottom,this.buttonSXToolbar=[],this.buttonDXToolbar=[],e){this.showToolbarTop=e,this.buttonDXToolbar=[{id:"addRow",name:"Nuovo",text:"Nuovo",icon:"icon-plus-circled",disabled:!1,visible:this.isEditableNewRow,widget:"button"}],this.buttonSXToolbar=[{id:"searchable",name:"searchable",text:"Cerca",icon:"icon-cerca-barra",disabled:!1,visible:this.isSearchable,widget:"textBox",width:300}],typeof this.toolbarButtonsTop<"u"&&this.toolbarButtonsTop.forEach(o=>{typeof o.position<"u"?o.position=="left"?this.buttonSXToolbar.unshift(o):o.position=="right"&&this.buttonDXToolbar.unshift(o):this.buttonDXToolbar.unshift(o)});let r=this.tableHeight;this.tableHeightWrapper>0&&(r=this.tableHeightWrapper),this.tableHeightWrapper=r+26}i&&(this.showToolbarBottom=!0)}catch{}}buildHeaderColumns(e){this.colsGroup=[],this.colsHeader=[],this.colsDetail=[];let i=1;return this.selectionRowMode=="single"&&this.colsGroup.push({span:"0",caption:null,class:"single",style:"background-color: #D6EEEE"}),this.selectionRowMode=="multiple"&&(this.colsGroup.push({span:"0",caption:null,class:"nultiple",style:"background-color: #D6EEEE"}),this.isSelIconMultipleVisible=!0,this.cellSelectWidth=30,this.colsHeader.unshift({type:"selection",id:"selection",caption:"",colWidth:this.cellSelectWidth,colCaption:void 0,allowFiltering:void 0,dataField:"",labelAlignment:void 0,edit:void 0,groupDataField:void 0})),e.forEach(r=>{r.caption&&r.colSpan&&r.itemType=="group"&&(this.colsGroupShow=!0,this.colsGroup.push({span:r.colSpan,caption:r.caption,class:r.class,style:"background-color: #D6EEEE"})),r.data.forEach(o=>{i++;let s;if(typeof o.colVisible<"u"&&!o.colVisible||o.type=="empty"||o.type=="campoDesc")return;if(o.type=="campoButton"){this.colsHeader.push({type:"campoButton",search:!1,id:o.dataField,caption:o.caption,colWidth:o.colWidth?o.colWidth:o.colWidth="auto",width:o.colWidth,class:o.class,dataField:o.dataField,colSpan:o.colSpan,colAlignment:o.colAlignment,format:o.format,isEditable:!1,edit:!1,editorType:o.editorType,customizedOptions:s,validation:o.validation?o.validation:[],min:o.min,max:o.max,maxLength:o.maxLength,tabIndex:i,button:o.button,labelAlignment:void 0,groupDataField:void 0,colCaption:void 0,allowFiltering:void 0});return}let a;if(typeof o.dynamic<"u"&&(a="dynamic",s=o.dynamic,s.queryString)){let f=s.queryString;for(let m in this.dataJson)f.includes(m)&&(f=f.replace("$"+m,this.dataJson[m]));o.dynamic.queryString=f,s.queryString=f}typeof o.lista<"u"&&(a="lista",s=o.lista);let l=!0;if(typeof o.allowEditing<"u"&&(l=o.allowEditing),typeof o.colWidth<"u"){let f=o.colWidth;o.colWidth=f}else if(o.width){let f=o.width;typeof f=="string"&&f.includes("px")&&(f=f.replace("px","")),o.colWidth=f}else o.colWidth="auto";if(typeof o.groupIndex<"u"){this.groupIndexCol={customizedOptions:s,colSpan:o.colSpan,id:o.dataField,caption:o.caption,colWidth:o.colWidth?o.colWidth:o.colWidth="auto",class:o.class,dataField:o.dataField,format:o.format,dataOptions:o,min:o.min,max:o.max,maxLength:o.maxLength,tabIndex:i};return}let u=typeof o.showInSummary<"u"?o.showInSummary:!1,d=o.caption;typeof o.colCaption<"u"&&o.colCaption&&(d=o.colCaption),this.colsHeader.push({type:o.type,search:typeof this.showFilter<"u"?this.showFilter:o.allowFiltering,id:o.dataField,caption:d,colWidth:o.colWidth?Number(o.colWidth):o.colWidth="auto",width:o.colWidth,class:o.class,dataField:o.dataField,colSpan:o.colSpan,colAlignment:o.colAlignment,format:o.format,isEditable:l,editorType:o.editorType,customizedOptions:s,validation:o.validation?o.validation:[],min:o.min,max:o.max,maxLength:o.maxLength,tabIndex:i,showInSummary:u,colCaption:void 0,allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0}),this.valueSumm[o.dataField]=null})}),this.colsHeader.push({type:"editorButtons",id:"editorButtons",caption:"",search:!1,colWidth:40,class:null,isEditable:this.isEditable,edit:!1,labelAlignment:void 0,groupDataField:void 0,colCaption:void 0,allowFiltering:void 0,dataField:"",editorbuttons:[{id:"edit",nameEvent:"onEditEvent",text:"Modifica",icon:"mdi mdi-pencil-outline",disabled:!1,visible:this.isEditableEditRow,cssClass:null,widget:"button",position:"left"},{id:"delete",nameEvent:"onDeleteEvent",text:"Elimina",icon:"mdi mdi-trash-can-outline",disabled:!1,visible:this.isEditableDeleteRow,cssClass:null,widget:"button",position:"left"}]}),Promise.resolve(!0)}builDetailGrid(e,i){return E(this,null,function*(){let r=[],o="detail-grid";e.length>0&&(r=e,o=e[0].groupDataField),this.tableWidth&&(this.tableWidthDetail=this.tableWidth-90),!(!this.detailOptions||(this.detailOptions.service&&(r=this.formservice.getService(this.detailOptions.service),r=r.filter(a=>a.itemType!=null)),typeof this.detailOptions.colonne<"u"&&this.detailOptions.colonne.length>0&&(typeof this.detailOptions.colonne.find(l=>l.itemType)>"u"?r=[{itemType:"group",colSpan:this.detailOptions.colonne.length,caption:"",groupDataField:o,data:this.detailOptions.colonne}]:r=this.detailOptions.colonne),r.length==0)||(this.haveDetail=!0,this.colsHeader.findIndex(a=>a.type=="detail")>=0))&&(this.colsHeader.unshift({type:"detail",id:"detail",caption:"",search:!1,colWidth:"30",class:"detailCol",groupDataField:o,labelAlignment:void 0,edit:void 0,colCaption:void 0,allowFiltering:void 0,dataField:""}),this.colsGroupCaption=[],r.forEach(a=>{this.detailOptions.isRemote||(this.colsGroupCaption.push({span:a.colSpan,caption:a.caption,class:a.class,style:"background-color: #D6EEEE"}),this.colsGroupShow=!0,this.colsGroup.unshift({span:"1",caption:"",class:a.class+" dettaglio"})),a.data.forEach(l=>{typeof l.colVisible<"u"&&!l.colVisible||this.colsDetail.push({type:"data-detail",id:l.dataField,caption:l.caption,colWidth:l.colWidth,class:l.class,dataField:l.dataField,colSpan:l.colSpan,captionAlign:l.labelAlignment,align:l.colAlignment,format:l.format})})}),this.selectionRowMode=="detail"&&(this.isSelIconDetailVisible=!0,this.cellSelectWidth=30,this.colsDetail.unshift({type:"selection-detail",id:"selection-detail",caption:"",search:!1,colWidth:this.cellSelectWidth,class:null,dataField:null,colSpan:null,captionAlign:null,align:null,format:null,isEditable:!1,edit:!1,editorType:null,customizedOption:null,min:null,max:null,maxLength:null})),this.justRowExpanded&&this.rowsData().forEach((a,l)=>{for(let u in a)u==o&&(this.showDetailRow[l]=!0,this.colsRowDetail[l]=a[o],this.collapse(null,a,l,o))}))})}resizeCols(e){return E(this,null,function*(){let i=this.tableWrapWidth;e||(e=this.colsHeader),e=e.map(D=>(D.colWidth||(D.colCaption?D.colWidth=D.colCaption.length:D.caption?D.colWidth=D.caption.length:D.colWidth="auto"),D));let r=e.reduce((D,T)=>D+Number(T.colWidth),0),o=["icon","selection","editorButtons","removeButtons","detail","campoDesc","empty"],a=e.filter(D=>o.some(T=>T==D.type)).reduce((D,T)=>D+T.colWidth,0),l=e.filter(D=>!o.some(T=>T==D.type)),u=l.reduce((D,T)=>{if(T.colWidth!="auto")return D+Number(T.colWidth)},0),m=(i-u-a)/l.length;for(let D=0;D<l.length;D++)if(l[D].colWidth!="auto"){let T=Number(l[D].colWidth)+m,R=e.findIndex(q=>q.dataField==l[D].dataField);e[R].colWidth=T}let y=e.reduce((D,T)=>{if(T.colWidth!="auto")return D+Number(T.colWidth)},0);console.log("dddd",y)})}setCellProperty(e){let i=[];for(let r in e){let o=this.colsHeader.filter(s=>s.dataField==r);o.length>0&&(i=Ee(Y({},i),{[r]:o[0]}))}return i}onScroll(e){return E(this,null,function*(){})}isScrollingNearBottom(e){let i=e.target,r=e.target.offsetHeight-1,o=document.getElementById(this.idTable),a=(o.children.item(0).offsetHeight-1)*this.dataSource.length;return i.scrollTop>0&&i.scrollTop>=a-r-10&&i.scrollTop>=this.latestScrollTopPosition&&this.dataSource.length<=this.totalRecords?(this.latestScrollTopPosition=i.scrollTop,o.scrollTo(0,i.scrollTop-10),!0):!1}selectRowByData(){this.selectedData&&this.selectedData.length>0&&this.selectedData.forEach(e=>{this.rowSelected[this.rowsData().indexOf(e)]=!0})}alternateRowColor(e,i){i&&(this.isOddRow=!this.isOddRow)}calcSommaryCells(){this.colsHeader.forEach(e=>{this.calcolaSomma(e)})}setStyleBody(){let e=this.rowsData().length,i=27,r=this.tableHeight,o=Math.floor(r/i),s=this.tableWrapWidth;return this.bodyHeight=r,this.bodyStyle={display:"block","border-top":"1px solid #e8eaeb"},this.theadStyle={display:"block"},this.colsGroupShow&&(this.tableStyle={"width.px":s,"height.px":this.tableHeight,"overflow-y":"clip","table-layout":"auto",display:"block"},this.bodyStyle.display="unset",this.bodyStyle["overflow-y"]="unset"),Promise.resolve(!0)}loadRemoteRecords(){try{this.anagraficaService.getElenco(this.api,this.queryString).subscribe(e=>(this.dataSource=e,this.rowsData.set(e),e.totalCount&&(this.totalRecords=e.totalCount),Promise.resolve(!0)))}catch{return Promise.resolve(!1)}finally{return Promise.resolve(!0)}}buildAndTestQueryString(){if(this.queryString!=""){let e=this.queryString;if(this.queryString.includes("$")){for(let i in this.dataJson)if(i&&e.includes(i)){let r=new RegExp("\\$"+i+"\\b","g");if(!this.dataJson[i])return Promise.resolve(!1);e=e.replace(r,this.dataJson[i])}return this.queryString=e,Promise.resolve(!0)}}return Promise.resolve(!0)}addRow(){return E(this,null,function*(){let e;this.rowsData().length==0&&(this.showNullData=!1),this.colsHeader.forEach(r=>{if(r.dataField){let o=null;r.editorType=="dxNumberBox"&&(o=0),e=Ee(Y({},e),{[r.dataField]:o})}}),typeof e<"u"&&(e.isNewRow=!0,this.rowsData().push(e));let i=this.dataSource.length-1;this.rowSelected=[!1],setTimeout(()=>{this.rowSelected[i]=!0},300)})}deleteRow(e){return e==0&&this.dataSource().length==0&&this.rowsData.update(i=>i=[]),this.rowsData.update(i=>this.dataSource().splice(e,1)),this.rowsData()}btnActionClick(e){switch(console.log("btnActionClick",e),e.action){case"onEditEvent":this.startEdit(e.rowIndex,e);break;case"onDeleteEvent":this.removeRowData(e.rowIndex,e);break;default:break}}startEdit(e,i){let r={infoEvent:i,rowIndex:e,data:this.rowsData()[e],name:"buttonEditRowEvent",idTable:this.idTable,service:this.service,cancel:!1,component:this};this.emittendStartEdit.emit(r),r.cancel}removeRowData(e,i){return E(this,null,function*(){zo("Sei certo di voler eliminare questo record?","Attenzione!",r=>{if(!r)return;let o={name:"delRows",rowIndex:e,rowData:this.rowsData()[e]};if(this.emittendGridEvent.emit(o),!this.remoteOperation)this.deleteRow(e);else if(r){let s=this.rowsData()[e].id;this.anagraficaService.actionDelete(this.api,s).then(a=>{this.renderGrid()})}})})}emitButtonDynamic(e,i){switch(e.name){case"emitButtonDynamic":break;case"emitButtonType2":break;case"beforeEmitButtonDynamic":e.dataSource=this.dataSource,e.dataGridComponent=this,e.rowIndex=i,this.emittendGridEvent.emit(e);break;default:break}}saveAndExit(){let e=[];this.rowSelected.forEach((r,o)=>{r&&e.push(this.rowsData()[o])});let i={component:this,dataSelected:e,name:"onRowMultipleSelectionChange"};this.emittendSelectionRow.emit(i)}setStateHover(e){this.isHovered[e]=!0}leaveStateHover(e,i,r){this.isHovered[r]=!1}selectRow(e,i,r,o){let s=i-1,a={isRowFather:!1,isRowDetail:!1},l={event:e,rowData:r,component:this,dataSource:this.dataSource,infoRows:a,rowIndex:i,name:"onRowOnlyClick",cancel:!1};if(this.emittendSelectionRow.emit(l),l.cancel||!this.selectionRowMode)return;if(this.selectionRowMode=="detail"){this.collapse(e,r,i);return}if(this.selectionRowMode=="multiple"){this.selectRowMultiple(e,i,r);return}if(this.showDetailRow[o]){a.isRowDetail=!0,this.rowSelectedDetail=[!1],this.rowSelectedDetail[i]?this.rowSelectedDetail[i]=!1:this.rowSelectedDetail[i]=!0;let d={event:e,data:r,fatherData:this.rowsData()[o],infoRows:a,rowIndex:i,name:"onRowSelectionChange"};this.emittendSelectionRow.emit(d);return}this.rowSelected=[],this.rowSelected[i]?this.rowSelected[i]=!1:this.rowSelected[i]=!0;let u={event:e,data:r,infoRows:a,rowIndex:i,name:"onRowSelectionChange"};this.emittendSelectionRow.emit(u)}dblRowClick(e,i,r,o){let s=i-1,a={event:e,rowData:r,component:this,dataSource:this.dataSource,rowIndex:i,name:"onDblRowClick",cancel:!1};this.emittendDblRowClick.emit(a)}selectRowDetail(e,i,r,o){let s=i-1,a={isRowFather:!1,isRowDetail:!1};a.isRowDetail=!0,this.showDetailRow[o]&&(this.rowSelectedDetail[i]=!1),this.rowSelectedDetail[i]?this.rowSelectedDetail[i]=!1:this.rowSelectedDetail[i]=!0;let l={event:e,data:r,fatherData:this.rowsData()[o],infoRows:a,rowIndex:i,name:"onRowSelectionChange"};this.emittendSelectionRow.emit(l)}clickToSelectRowMultiple(e,i,r){this.rowSelected[i]?this.rowSelected[i]=!1:this.rowSelected[i]=!0,e.stopPropagation()}selectRowMultiple(e,i,r){this.rowSelected[i]?this.rowSelected[i]=!1:this.rowSelected[i]=!0,e&&(e.stopPropagation(),e.preventDefault());let s={event:e,data:r,rowIndex:i,component:this,dataSource:this.dataSource,rowsSelected:this.rowSelected[i],name:"onRowMultipleSelection"};this.emittendSelectionRow.emit(s)}clickToSelectAllRows(){this.rowSelectedAll=!1;let e=this.rowsData().length;if(e>0){if(this.rowSelected.length-1==e){this.rowSelected=[!1],this.rowSelectedAll=!1;return}for(let i=0;i<=e;i++)this.rowSelected[i]=!0;this.rowSelectedAll=!0}}removeSelAndExit(e){}chooseRow(e,i,r){this.showDetailRow[i]||this.selectRow(e,i,r)}tdClick(e,i,r,o){if(this.modeEdit!="cell")return;switch(i.type){case"campoButton":e.stopPropagation(),this.buttonClick(e,i.button,i,o);break;default:break}console.log("colInfo-->",i)}updateRowClasses(e){return{"-disabled":this.rowIsDisable[e],"selected-row":this.rowSelected[e],"state-hover":this.isHovered[e],"select-have-detail":this.isHoveredDetatil[e],"custom-class":this.rowcustomclass[e]}}collapse(e,i,r,o){var s=document.querySelectorAll(".dx-datagrid-group-opened");[].forEach.call(s,u=>{u.className=u.className.replace("dx-datagrid-group-opened","dx-datagrid-group-closed")});let a=document.querySelector(".-data-grid-wrapper ");a&&a.classList.add("scroll-bottom");let l=document.getElementById(this.idTable);if(l){let u=l.getElementsByTagName("tbody")[0].rows[r];e&&(e.stopPropagation(),e.preventDefault(),u=e.currentTarget);let d=u,f;if(d.classList.contains("dx-datagrid-group-opened")||d.classList.contains("dx-datagrid-group-closed"))f=d;else{if(d.getElementsByClassName("detailCol").length==0)return;f=d.getElementsByClassName("detailCol")[0].children[0]}if(this.showDetailRow[r]){this.showDetailRow=[!1],f.classList.remove("dx-datagrid-group-opened"),f.classList.add("dx-datagrid-group-closed");return}this.showDetailRow=[!1];let m=this.colsGroupDetail;if(this.detailOptions.isRemote){this.renderGridDetailData(this.detailOptions,i,r),f.classList.remove("dx-datagrid-group-closed"),f.classList.add("dx-datagrid-group-opened");return}else{o||(o=this.colsHeader.filter(T=>T.type=="detail")[0].groupDataField),this.showDetailRow[r]=!0,this.colsRowDetail[r]=this.rowsData()[r][o],this.colsRowDetail[r].length==0&&(this.showNullDataDetail=!0),this.showDetailRow[r]=!0;let y={cancel:!1,data:i,rowIndex:r,expandedData:this.rowsData()[r][o],name:"onRowExpanded"};this.emittendGridEvent.emit(y),f.classList.remove("dx-datagrid-group-closed"),f.classList.add("dx-datagrid-group-opened")}}}renderGridDetailData(e,i,r){return E(this,null,function*(){let o;this.showNullDataDetail=!1;let s="",a=e.api,l=e.costantValue,u;if(e.costantValue&&e.costantValue.forEach(m=>{let y=m.key,D="";typeof i[m.value]<"u"?D=i[m.value]:D=m.value,u=Ee(Y({},u),{[y]:D})}),e.queryString)if(e.queryString.includes("$")){let f=e.queryString;for(let m in i)if(f.includes(m)){var d=new RegExp("\\$"+m+"\\b","g");f.match(d)&&(f=f.replace(d,i[m]))}for(let m in u)if(f.includes(m)){var d=new RegExp("\\$"+m+"\\b","g");f.match(d)&&(f=f.replace(d,u[m]))}s=f}else s=e.queryString;this.anagraficaService.getElenco(a,s).subscribe(f=>{f.items?f=f.items:f=f,this.colsRowDetail[r]=f,this.colsRowDetail.length==0&&(this.showNullDataDetail=!0),this.showDetailRow[r]=!0;let m={cancel:!1,data:i,rowIndex:r,expandedData:this.colsRowDetail[r],name:"onRowExpanded"};this.emittendGridEvent.emit(m)})})}calcolaSomma(e){if(!e.dataField||!e.showInSummary)return 0;let i=e.dataField,r=this.rowsData().reduce((o,s)=>o+s[i],0);return this.valueSumm[i]=r}formatDate(e,i="EN"){let r=/(\d{4})([\/-])(\d{1,2})\2(\d{1,2})/,o=/(\d{1,2})([\/-])(\d{1,2})\2(\d{4})/,s=e.match(r),a=e.match(o);if(!s&&!a)return"";a&&(e.includes("-")?e=`${e.split("-")[2]}-${e.split("-")[1]}-${e.split("-")[0]}`:e.includes("/")&&(e=`${e.split("/")[2]}-${e.split("/")[1]}-${e.split("/")[0]}`));let l=new Date(e),u=l.getFullYear(),d=(l.getMonth()+1).toString().padStart(2,"0"),f=l.getDate().toString().padStart(2,"0"),m="";return i=="EN"&&(m=`${u}-${d}-${f}`),i=="it"&&(m=`${f}-${d}-${u} `),m}builderOdataSearchString(e,i,r){if(!this.searchText)return"";switch(i.toLowerCase()){case"text":case"string":return typeof r>"u"||r==="contains"?`(contains(tolower(${e}),'${this.searchText.toLowerCase()}'))`:`(startswith(tolower(${e}),'${this.searchText.toLowerCase()}'))`;case"number":let o=Number(this.searchText);return isNaN(o)?"":`(${e} eq ${o})`;case"date":case"dateTime":let s=this.formatDate(this.searchText);return typeof s<"u"?`(${e} eq ${s})`:"";case"boolean":return"";default:return typeof r>"u"||r==="contains"?`(contains(tolower(${e}),'${this.searchText.toLowerCase()}'))`:`(startswith(tolower(${e}),'${this.searchText.toLowerCase()}'))`}}searchData(e){return E(this,null,function*(){})}toolbarValueChanged(e){return E(this,null,function*(){console.log("toolbarValueChanged",e);let i=e.value,r=e.event;this.searchText=i,this.textEmpty="Sto cercando...",this.searchData(e)})}buttonEmitted(e){switch(console.log("buttonEmitted-->",e),e){case"addRow":let i={infoEventButtons:e,name:"buttonNewRowEvent",idTable:this.idTable,service:this.service,cancel:!1,component:this};this.emittendToolbarClick.emit(i),this.emittendStartEdit.emit(i),i.cancel||this.addRow();break;case 22:this.saveAndExit();break;case 23:let r={event:e,cancel:!1,name:"annullaSelezione"};this.emittendButtonExit.emit(r);break;case 0:let o={event:e,cancel:!1,name:"annullaSelezione"};this.emittendButtonExit.emit(o);break;case 21:let a={infoEventButtons:{event:e,cancel:!1,name:"newButtonClick"},name:"toolbarButtonClick"};this.emittendButtonExit.emit(a);break;default:let l={infoEventButtons:e,name:"toolbarButtonClick"};this.emittendToolbarClick.emit(l);break}}isSelectedSubRow(e,i){return this.selectedRowIndex===e&&this.selectedSubRowIndex===i}handleKeyboardEvents(e){e.key==="ArrowDown"?this.navigateByKeyboard("ArrowDown"):e.key==="ArrowUp"&&this.navigateByKeyboard("ArrowUp")}navigateByKeyboard(e){switch(this.isHoveredDetatil=[!1],e){case"ArrowDown":this.showDetailRow[this.selectedRowIndex]&&this.selectedSubRowIndex<this.colsRowDetail[this.selectedRowIndex].length-1?this.selectedSubRowIndex++:this.selectedRowIndex<this.dataSource.length-1&&(this.selectedRowIndex++,this.selectedSubRowIndex=-1);break;case"ArrowUp":this.selectedSubRowIndex===-1||this.selectedRowIndex>0?(this.selectedSubRowIndex==-1&&this.selectedRowIndex>0&&this.selectedRowIndex--,this.selectedSubRowIndex=-1):this.selectedSubRowIndex>0&&this.selectedSubRowIndex--,this.selectedRowIndex==0&&(this.selectedSubRowIndex=0);break;default:break}let i,r={isRowFather:!1,isRowDetail:!1},o=0;if(this.selectionRowMode=="detail"?(i=this.colsRowDetail[this.selectedRowIndex][this.selectedSubRowIndex],r.isRowDetail=!0,o=this.selectedSubRowIndex):this.selectionRowMode=="single"&&(i=this.rowsData()[this.selectedRowIndex],r.isRowDetail=!1,o=this.selectedSubRowIndex),Object.keys(i).length>0){let s={event:null,data:i,infoRows:r,rowIndex:o,keyPressed:e,name:"onRowSelectionChange"};this.emittendSelectionRow.emit(s)}}buttonClick(e,i,r,o){let s=i;s.dataSource=this.dataSource,s.rowData=this.rowsData()[o],s.col=r,s.rowIndex=o,s.component=this,s.event=e,this.emittendBttonCellClick.emit(s),e.stopPropagation(),e.preventDefault()}resetPageInfo(){return E(this,null,function*(){this.showNullData=!0,this.latestSkipLoaded=0,this.latestScrollTopPosition=0,this.currentPage=0})}refresh(){this.currentPage>=1&&(this.currentPage=0),this.colsHeader=[],this.rowsData.update(e=>e=[]),this.rowSelected=[!1],this.rowSelectedDetail=[!1],this.rowIsDisable=[!1],this.resetPageInfo(),this.renderGrid()}hideColumn(e){this.colsHeader.splice(e,1),this.resizeCols(this.colsHeader)}sortColumn(e){this.sortedColumn===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortedColumn=e,this.sortDirection="asc"),this.rowsData().sort((i,r)=>{let o=i[e],s=r[e];return o<s?this.sortDirection==="asc"?-1:1:o>s?this.sortDirection==="asc"?1:-1:0})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-data-grid"]],viewQuery:function(i,r){if(i&1&&(kt(c8,5),kt(u8,5),kt(d8,5)),i&2){let o;At(o=Ot())&&(r.dataGridWrapper=o.first),At(o=Ot())&&(r.righe=o),At(o=Ot())&&(r.tbody=o)}},hostBindings:function(i,r){i&1&&H("scroll",function(s){return r.handleKeyDown(s)},!1,dy)("keydown",function(s){return r.handleKeyDown(s)},!1,dy)},inputs:{idTable:"idTable",service:"service",api:"api",queryString:"queryString",queryStringInEditor:"queryStringInEditor",isKeyID:"isKeyID",remoteOperation:"remoteOperation",dataSource:[yt.SignalBased,"dataSource"],overrideDataSource:"overrideDataSource",dataJson:"dataJson",selectedData:"selectedData",tableHeight:"tableHeight",tableWidth:"tableWidth",colonne:"colonne",isEditable:"isEditable",modeEdit:"modeEdit",selectionRowMode:"selectionRowMode",showFilter:"showFilter",showToolbarTop:"showToolbarTop",showToolbarBottom:"showToolbarBottom",rowAlternate:"rowAlternate",isEditableNewRow:"isEditableNewRow",isEditableEditRow:"isEditableEditRow",isEditableDeleteRow:"isEditableDeleteRow",isSearchable:"isSearchable",searchType:"searchType",toolbarButtonsBottom:"toolbarButtonsBottom",toolbarButtonsTop:"toolbarButtonsTop",detailOptions:"detailOptions",justRowExpanded:"justRowExpanded",toolbarButtonsBottomLeft:"toolbarButtonsBottomLeft",toolbarButtonsBottomRight:"toolbarButtonsBottomRight",toolbarButtonsTopLeft:"toolbarButtonsTopLeft",toolbarButtonsTopRight:"toolbarButtonsTopRight",tabIndex:"tabIndex",showFooterSummary:"showFooterSummary",continuousEditing:"continuousEditing"},outputs:{emittendSelectionRow:"emittendSelectionRow",emittendDblRowClick:"emittendDblRowClick",emittendGridEvent:"emittendGridEvent",emittendStartEdit:"emittendStartEdit",emittendButtonExit:"emittendButtonExit",emittendCellValueChange:"emittendCellValueChange",emittendToolbarClick:"emittendToolbarClick",emittendBttonCellClick:"emittendBttonCellClick"},standalone:!0,features:[fe],decls:13,vars:11,consts:[["tableRef",""],["normalCaption",""],["checkBoxSelectAll",""],["templateName",""],["tbody",""],["riga",""],["id","dataGridWrapper",1,"-data-grid-wrapper","table-responsive"],["class","-data-grid-toolbar",4,"ngIf"],[1,"table","-data-grid","grid-line",3,"keydown","id","ngStyle"],[4,"ngIf"],[3,"ngStyle"],["class","no-events",4,"ngIf"],["scope","col",3,"align","ngStyle",4,"ngFor","ngForOf"],["class","t-body",3,"ngStyle",4,"ngIf"],["class","scroll-bottom","id","scrollBarCustom",3,"ngStyle",4,"ngIf"],["class","tableFooter",4,"ngIf"],["class","-data-grid-toolbar-bottom",4,"ngIf"],[1,"-data-grid-toolbar"],[3,"span","class",4,"ngFor","ngForOf"],[3,"span"],[1,"no-events"],[3,"colSpan",4,"ngFor","ngForOf"],[3,"colSpan"],["scope","col",3,"align","ngStyle"],[3,"ngIf","ngIfElse"],["name","selRowMAll","title","seleziona tutte le righe","icon","","class","editor-content-checkbox-table","style","display: inline-block;vertical-align: middle;line-height: 1em;margin-bottom: 0!important;text-align: center;",4,"ngIf"],["name","selRowMAll","title","seleziona tutte le righe","icon","",1,"editor-content-checkbox-table",2,"display","inline-block","vertical-align","middle","line-height","1em","margin-bottom","0!important","text-align","center"],["type","checkbox",1,"checkbox-input",3,"click","checked"],[3,"click",4,"ngIf"],[3,"click"],[4,"ngIf","ngIfElse"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"mdi","mdi-menu-up"],[1,"mdi","mdi-menu-down"],[1,"t-body",3,"ngStyle"],[1,"row-no-data"],[3,"colSpan","width","ngStyle"],[2,"text-align","center"],["id","scrollBarCustom",1,"scroll-bottom",3,"ngStyle"],[4,"ngFor","ngForOf"],[3,"dblclick","click","mouseenter","mouseleave","ngClass"],[3,"id","class","colSpan","align","title","ngStyle","click",4,"ngFor","ngForOf"],["class","no-event-hover",4,"ngIf"],[1,"group-row"],[2,"border-left","0",3,"colSpan"],[3,"colProperty","rowIndex","value"],[3,"click","id","colSpan","align","title","ngStyle"],[3,"btnActionClick","colProperty","searchText","rowIndex","value","colType"],[1,"no-event-hover"],[2,"padding","0",3,"colSpan"],[1,"col-sm-offset-1","p-2"],["class","detail--data-grid -data-grid grid-line",3,"width",4,"ngIf"],["class","detail--data-grid  grid-line",3,"width",4,"ngIf"],[1,"detail--data-grid","-data-grid","grid-line",3,"width"],[1,"detail--data-grid","grid-line",3,"width"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"click","ngClass"],[3,"width","class","colSpan","align","ngStyle",4,"ngFor","ngForOf"],[3,"width","colSpan","align","ngStyle"],["class","selection-icon","name","selRow","hint","importa dati","icon","",3,"id","click",4,"ngIf"],["name","selRow","hint","importa dati","icon","",1,"selection-icon",3,"click","id"],[1,"glyphicon","mdi","mdi","mdi-export"],[1,"empty-row",3,"ngStyle"],[3,"id","width","class","colSpan","align","ngStyle",4,"ngFor","ngForOf"],[3,"id","width","colSpan","align","ngStyle"],[1,"tableFooter"],[1,"sumWrap",3,"ngStyle"],[3,"colProperty","showSummaryText","value"],[1,"-data-grid-toolbar-bottom"]],template:function(i,r){if(i&1){let o=le();_(0,"div",6),G(1,p8,1,0,"div",7),_(2,"table",8,0),H("keydown",function(a){return j(o),U(r.handleKeyboardEvents(a))}),G(4,g8,2,1,"colgroup",9),_(5,"thead",10),G(6,y8,2,1,"tr",11),_(7,"tr"),G(8,x8,4,8,"th",12),v()(),G(9,M8,5,9,"tbody",13)(10,z8,5,3,"tbody",14)(11,W8,3,1,"tfoot",15),v()(),G(12,K8,1,0,"div",16)}i&2&&(w(),b("ngIf",r.showToolbarTop),w(),b("id",r.idTable)("ngStyle",r.tableStyle),w(2),b("ngIf",r.colsGroupShow),w(),b("ngStyle",r.theadStyle),w(),b("ngIf",r.colsGroupShow),w(2),b("ngForOf",r.colsHeader),w(),b("ngIf",r.showNullData),w(),b("ngIf",!r.showNullData),w(),b("ngIf",r.enableTfoot),w(),b("ngIf",r.showToolbarBottom))},dependencies:[Ce,Bt,lt,Qe,$n,Ja,ip,rp,sN,tc],styles:['.-data-grid-wrapper[_ngcontent-%COMP%]{border:1px solid var(--table-th-bg)}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{box-sizing:content-box;border-collapse:collapse;border-spacing:0}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--blueSoft);padding:0;background-color:var(--table-th-bg);font-weight:500;border-top:1px solid var(--border_color);border-bottom:1px solid var(--border_color)}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;display:block;padding:1rem;word-break:break-all;word-wrap:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (max-width: 1024px){.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:auto!important;max-width:unset!important;min-width:unset!important}}@media (max-width: 1024px){.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:auto!important;max-width:unset!important;min-width:unset!important}}.-data-grid[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.state-hover[_ngcontent-%COMP%]{background-color:var(--bg-grey);cursor:pointer}.-data-grid[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.alternate[_ngcontent-%COMP%]{background:var(--bg-grey)}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%], .-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]   .texteditor-input[_ngcontent-%COMP%]{border:none;height:27px;line-height:27px}.no-border[_ngcontent-%COMP%]{border:none!important}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{padding-left:3px;z-index:1;position:absolute;top:0;left:0;cursor:pointer;margin-left:-2px;margin-top:-2px;height:100%;overflow:visible}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:5px 3px 3px;color:#7ab8eb;font-size:14px}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{font:14px/1 DXIcons;content:"\\f027";font-weight:300}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e8eaeb}.-data-grid[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr.no-events[_ngcontent-%COMP%]{pointer-events:none!important}.detail--data-grid[_ngcontent-%COMP%]   tr.state-hover-detail[_ngcontent-%COMP%]{background-color:#edf0f2!important;cursor:pointer}.-data-grid[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.select-have-detail[_ngcontent-%COMP%]{background:var(--secondary)!important}.-data-grid[_ngcontent-%COMP%]   tr.row-no-data[_ngcontent-%COMP%]{pointer-events:none!important}.-data-grid[_ngcontent-%COMP%]   tr.row-no-data[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:0px solid #e8eaeb;border-right:0px solid #e8eaeb;border-bottom:0px solid #e8eaeb}.-data-grid[_ngcontent-%COMP%]   tr.selected-row[_ngcontent-%COMP%]{background:var(--secondary)!important}.-data-grid[_ngcontent-%COMP%]   tr.group-row[_ngcontent-%COMP%]{color:var(--primary);background-color:#fafafa;pointer-events:none;font-weight:600}  .-data-grid tr.group-row td .contet-data{font-weight:600!important;padding-left:10px}  .-data-grid tr.group-row td .contet-data:before{content:"-";display:inline-block}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{box-sizing:content-box;border-collapse:collapse;border-spacing:0}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top;text-align:left;border-bottom:dashed 1px #e8eaeb;border-spacing:0}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{text-align:center;display:block;width:fit-content;margin:auto}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--blueSoft);display:block;box-sizing:content-box;padding:0}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px;color:var(--blueSoft)}.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}.-data-grid[_ngcontent-%COMP%]   tr.empty-row[_ngcontent-%COMP%]{pointer-events:none}.-data-grid[_ngcontent-%COMP%]   tr.empty-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px dashed #e8eaeb;border-right:1px dashed #e8eaeb;border-bottom:1px dashed #e8eaeb}@media (max-width: 1024px){.-data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:auto!important;max-width:unset!important;min-width:unset!important}}.no-event-hover[_ngcontent-%COMP%]{background:transparent!important;cursor:auto}.detail--data-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#edf0f2!important;cursor:pointer}  .-data-grid .editor{position:relative;padding:0!important}  .-data-grid td.editor-cell{max-width:0!important;padding:0!important;vertical-align:middle}.-data-grid[_ngcontent-%COMP%]   .editable-row-operations[_ngcontent-%COMP%]{text-align:center}.-data-grid[_ngcontent-%COMP%]   .editable-row-operations[_ngcontent-%COMP%]   .link-editor[_ngcontent-%COMP%]{text-decoration:none;background-position:0 0;padding:0;margin:0 2px;vertical-align:middle}  .-data-grid td.editor-cell .editor-content.state-active{border-width:2px}  .-data-grid .input-container .texteditor-input{height:27px;line-height:27px;-webkit-appearance:none;width:100%;height:100%;outline:0;border:0;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}  .editor-content-checkbox-table{display:flex;position:relative;margin-bottom:4px!important}  .editor-content-checkbox-table *,   .editor-content-checkbox-table :after,   .editor-content-checkbox-table :before{box-sizing:border-box}  .editor-content-checkbox-table .checkbox-input{margin:0;width:0;height:0;display:inline;-webkit-appearance:none;-moz-appearance:none;appearance:none}  .editor-content-checkbox-table .checkbox-input:before{content:" ";display:inline-block;position:relative;background-position:0 0;background-size:cover;background-repeat:no-repeat;width:16px;height:16px;border-radius:0;border:1px solid #e8eaeb;background-color:#fff;cursor:pointer}  .editor-content-checkbox-table .checkbox-input:hover:before{border:1px solid var(--blueDevextreme)}  .editor-content-checkbox-table .checkbox-input:focus:active:before{border:1px solid var(--blueDevextreme)}  .editor-content-checkbox-table .checkbox-input:checked:before{content:"\\f12c";font:10px/10px Material Design Icons;display:block;height:16px;width:16px;border:1px solid var(--blueDevextreme);color:var(--blueDevextreme);background-color:#fff;text-align:center;line-height:16px}  .editor-content-checkbox [type=checkbox].checkbox-input:enabled:active:before{box-shadow:0 0 .04em,0 .06em .16em -.03em transparent inset,0 0 0 .07em #0000001a inset;background-color:#f0f0f0}  .editor-content-checkbox [type=checkbox].checkbox-input:checked:enabled:active:before{background-color:#0a7ffb;color:#00000046}  .editor-content-checkbox [type=checkbox].checkbox-input:focus:before{box-shadow:0 0 .04em,0 .06em .16em -.03em transparent inset,0 0 0 .07em #0000001a inset,0 0 0 3.3px #419fff8c,0 0 0 5px #419fff4d}  .editor-content-checkbox [type=checkbox].checkbox-input:focus:active:before{box-shadow:0 0 .04em,0 .06em .16em -.03em transparent inset,0 0 0 .07em #0000001a inset,0 0 0 3.3px #419fff8c,0 0 0 5px #419fff4d}  .editor-content-checkbox [type=checkbox].checkbox-input:disabled:before{opacity:.5}.-data-grid-toolbar[_ngcontent-%COMP%]{margin-bottom:5px;margin-top:3px;padding:2px 0}  .-data-grid-toolbar .-toolbar{padding:2px;z-index:auto}  .-data-grid-toolbar .sidebar-sticky-bottom .item-nav .item-button{border-radius:2px;border-width:1px;border-style:solid;background-color:#fff;border-color:#cacfd1;color:#333}.-data-grid-toolbar[_ngcontent-%COMP%]   .-toolbar-items-container[_ngcontent-%COMP%]   .-toolbar[_ngcontent-%COMP%]   .nav-horizontal[_ngcontent-%COMP%]{height:27px}.-data-grid-toolbar-bottom[_ngcontent-%COMP%]{margin-bottom:0;margin-top:0;padding:0}.-data-grid-toolbar-bottom[_ngcontent-%COMP%]   .-toolbar-items-container[_ngcontent-%COMP%]   .-toolbar[_ngcontent-%COMP%]   .nav-horizontal[_ngcontent-%COMP%]{height:27px}  .-data-grid-toolbar-bottom .sidebar-sticky-bottom .item-nav .item-button{background-color:transparent;color:var(--primary);border:none}  .-data-grid-toolbar-bottom .sidebar-sticky-bottom .item-nav .item-button *:hover{font-weight:700}  .-data-grid-toolbar-bottom .sidebar-sticky-bottom .item-nav .item-button .button-content span{padding-left:5px;padding-right:5px}  .error-row{border:2px solid #ff0c0c!important}  .tableFooter{border-top:1px solid #e8eaeb;border-bottom:1px solid #e8eaeb}  .tableFooter tr td{border:none!important}']})}}return n})();var mr=(()=>{class n{constructor(){this.api=xn.BASE_API_URL,this.isLoginUser=!1,this.firestore=F(na),this.httpClient=F(ki),this.auth=Sc(F(wo)),this.functions=F(Md),this.apiFire="https://us-central1-comemivesto-5e5f9.cloudfunctions.net/api",this.resultsSignal=Xe([]),this.feedUrl="https://api.tradedoubler.com/1.0/products.json",this.mySignal=Xe([])}setMySignal(e){this.mySignal.set(e)}getMySignal(){return this.mySignal()}login(){let e={headers:new Fi().set("Authorization","Bearer ").set("Content-Type","application/x-www-form-urlencoded; charset=UTF-8").set("Content-Type","application/json; charset=utf-8").set("responseType","text"),params:new pi,responseType:"text"};this.httpClient.post("http://192.168.1.170:8080/authenticate",{email:"prova2",password:"prova2"},e).subscribe(r=>{console.log(r)})}getOutfits(e,i){return E(this,null,function*(){let r=this.firestore.collection("outfits").ref;e&&e.forEach(o=>{r=r.where(o.field,o.operator,o.value)}),i&&i.forEach(o=>{r=r.orderBy(o.field,o.by)});try{let s=(yield r.get()).docs.map(a=>a.data());return this.resultsSignal=Xe(s),s}catch(o){return console.error("Error getting filtered collection:",o),[]}})}getOutfitUser(e){return E(this,null,function*(){return(yield this.firestore.collection("users").ref.where("uid","==",e).get()).docs.map(s=>s.data())})}getOutfitById(e){return E(this,null,function*(){return(yield this.firestore.collection("outfits").ref.where("id","==",e).get()).docs.map(s=>s.data())})}saveOutfitCollection(e,i,r=!0){return E(this,null,function*(){try{let o=yield this.firestore.collection("outfits");return e?(o.doc(e).set(i),r&&this.getOutfits(),!0):(o.add(i),r&&this.getOutfits(),!0)}catch{return!1}})}updateInCollection(e,i){return E(this,null,function*(){try{return this.firestore.collection("outfits").doc(e).update(i),this.getOutfits(),!0}catch(r){return console.log(r),!1}})}removeOutfit(e){return E(this,null,function*(){let i=this.firestore.collection("outfits").ref;i=i.where("id","==",e);try{let o=(yield i.get()).docs.map(s=>s.ref.delete());return yield Promise.all(o),this.getOutfits(),!0}catch(r){return console.error("Error deleting documents:",r),!1}})}JsonOutfits(){return E(this,null,function*(){try{this.getProductsFromFeed().subscribe(i=>E(this,null,function*(){return console.log("resProd",i),i.forEach(r=>E(this,null,function*(){let o=[{field:"id",operator:"==",value:r.id}];(yield this.getOutfits(o)).length==0&&((yield this.saveOutfitCollection(r.id,r,!1))||console.log("c'\xE8 stato un problema"))})),yield this.getOutfits(),!0}))}catch(e){return console.error("Errore:",e),!1}return!1})}getProductsFromFeed(e=1,i=104437){let r=`;page=${e};pageSize=100;fid=${i}?token=83C91107EA3A44C6B67AD66A2799E13653192324"`;return this.httpClient.get("https://api.tradedoubler.com/1.0/products.json;page=1;pageSize=100;fid=104437?token=83C91107EA3A44C6B67AD66A2799E13653192324").pipe(ne(o=>o.products.map(s=>this.mapToFirebase(s))))}mapToFirebase(e){let i=new Date;return{style:"C",visits:0,outfitSubCategory:["CDC"],gender:"D",createdAt:i.getTime(),editedAt:i.getTime(),id:e.offers[0].id,feedId:e.offers[0].feedId,tags:[{brend:"vestitielegantishop",x:.6,outfitCategory:"ABC",color:"",y:.6,name:e.name,id:e.offers[0].id,outfitSubCategory:"CDC",link:e.offers[0].productUrl,imageUrl:e.productImage.url,prezzo:e.offers[0].priceHistory[0].price.value}],description:e.description.replace("Controlla la tabella taglie e misure, per sapere se la taglia dell'abito \xE8 adatta alle tue misure corporee.",""),userId:"yoq2HOxUJhdn4shCUgIB8ICMBVq2",season:"E",imageUrl:e.productImage.url,status:"pending",likes:0,title:e.name,outfitCategory:["ABC"],userName:"Maria "}}getProducts(){return this.firestore.collection("outfitsProducts").valueChanges().pipe(ne(e=>e))}updateProductOutfit(e,i){try{return this.firestore.collection("outfitsProducts").doc(e).update(i),!0}catch(r){return console.log(r),!1}}removeProductOutfit(e){return E(this,null,function*(){let i=this.firestore.collection("outfitsProducts").doc(e).ref;try{return yield i.delete(),!0}catch(r){return console.error("Error deleting documents:",r),!1}})}getOutFitCategories(e){return this.firestore.collection("outfitsCategories",i=>e?i.where("parentCategory","==",e):i.where("parentCategory","==","")).valueChanges().pipe(ne(i=>i))}updateOutfitCategories(e,i){return E(this,null,function*(){try{return this.firestore.collection("outfitsCategories").doc(e).update(i),!0}catch(r){return console.log(r),!1}})}saveOutfitCategories(e){return E(this,null,function*(){try{let i=yield this.firestore.collection("outfitsCategories");return e.id?(i.doc(e.id).set(e),!0):(i.add(e),!0)}catch{return!1}})}removeOutfitCategories(e){return E(this,null,function*(){let i=this.firestore.collection("outfitsCategories").ref;i=i.where("id","==",e);try{let o=(yield i.get()).docs.map(s=>s.ref.delete());return yield Promise.all(o),this.getOutFitCategories(),!0}catch(r){return console.error("Error deleting documents:",r),!1}})}getFilteredCollection(e,i,r){return E(this,null,function*(){let o=this.firestore.collection(e).ref;i&&i.forEach(s=>{o=o.where(s.field,s.operator,s.value)}),r&&r.forEach(s=>{o=o.orderBy(s.field,s.by)});try{let a=(yield o.get()).docs.map(l=>l.data());return this.resultsSignal=Xe(a),a}catch(s){return console.error("Error getting filtered collection:",s),[]}})}saveOutfitsProducts(e,i){return E(this,null,function*(){try{let r=yield this.firestore.collection("outfitsProducts");return e?(r.doc(e).set(i),!0):(r.add(i),!0)}catch{return!1}})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Q8(n,t){if(n&1){let e=le();_(0,"app-data-grid",10),H("emittendStartEdit",function(r){j(e);let o=x();return U(o.editProduct(r))})("emittendGridEvent",function(r){j(e);let o=x();return U(o.gridEvent(r))})("emittendDblRowClick",function(r){j(e);let o=x();return U(o.gridEvent(r))}),v()}if(n&2){let e=x();b("colonne",e.colProductsGrid)("idTable",252)("dataSource",e.products)("remoteOperation",!1)("isEditable",!0)("isEditableEditRow",!0)("showToolbarBottom",!1)("showToolbarTop",!1)("isSearchable",!1)}}var Eg=(()=>{class n{constructor(){this.selectProduct=new oe,this.colProductsGrid=[{itemType:"group",data:[{type:"campo",edit:!1,groupDataField:void 0,colCaption:"id",dataField:"id",colWidth:40},{type:"campoImg",colVisible:!0,allowEditing:!0,dataField:"imageUrl",colWidth:50,class:"outfit-image",colCaption:"Immagine",allowFiltering:void 0,edit:void 0,groupDataField:void 0},{type:"campo",edit:!1,colWidth:90,groupDataField:void 0,colCaption:"Prodotto",dataField:"name"},{type:"campo",edit:!1,groupDataField:void 0,colCaption:"Categoria",dataField:"outfitSubCategory",colWidth:90},{type:"campo",edit:!1,groupDataField:void 0,colCaption:"Brend",dataField:"brend",colWidth:70},{type:"campoNumber",edit:!1,groupDataField:void 0,colCaption:"Prezzo",dataField:"price",colWidth:50,format:"#.##"},{type:"campoLista",edit:!1,groupDataField:void 0,colCaption:"Genere",dataField:"gender",colWidth:50,lista:{displayExp:"name",valueExp:"id",options:[{id:"U",name:"Uomo"},{id:"D",name:"Donna"}],multiple:!1,remote:!1,parent:null}}],groupDataField:""}],this.outFitService=F(mr),this.route=F(yn),this.router=F(jt),this.popupModal=F(en),this.products$=this.outFitService.getProducts(),this.subtitle="Elenco dei prodotti disponibili nell'app",this.showGrid=!1,this.customToolbarButtons=[{id:"toFeed",name:"toFeed",text:"Mostra prodotti da feed",disabled:!1,visible:!0,icon:"mdi mdi-database-import-outline",widget:"button"}]}ngOnInit(){this.loadProduct()}loadProduct(){this.showGrid=!1,this.products$.subscribe(e=>E(this,null,function*(){this.outFitService.setMySignal(e),this.products=this.outFitService.mySignal(),this.showGrid=!0}))}repairImages(e){return e.map(i=>i.imageUrl?Ee(Y({},i),{imageUrl:i.imageUrl.replace("http://","https://")}):i)}editProduct(e){e.cancel=!0,this.selectedProdOutfit=e.data;let i={service:"outfitProducts",editData:e.data};this.createOrEditCategories(i)}createOrEditCategories(e){let i=Math.random().toString().replace("0.","");this.popupModal.setNewPopUp(i,"DynamicFormComponent",null,800,null,e,!1,!0,"Modifica Prodotto","",!1),this.popupModal.outputComponent.subscribe(r=>E(this,null,function*(){if(r.guid==i&&r.name=="submitForm"){let o=r.formData,s,a=new Date;r.inEdit?(o.createdAt=a.getTime(),o.editedAt=a.getTime(),s=this.outFitService.updateProductOutfit(o.id,o),s&&this.loadProduct()):(o.editedAt=a.getTime(),o.createdAt=a.getTime()),s&&(this.popupModal.destroyCurrentOpenPopUpByGuid(i),this.loadProduct())}r.guid==i&&r.name=="cancelForm"&&this.popupModal.destroyCurrentOpenPopUpByGuid(i)}))}gridEvent(e){return E(this,null,function*(){if(console.log("Grid Event:",e),e.name==="onRowOnlyClick"&&this.selectProduct.emit(e),e.name==="delRows"){let i=e.rowData;(yield this.outFitService.removeProductOutfit(i.id))&&this.loadProduct()}})}eventToolbarProduct(e){return E(this,null,function*(){switch(e.name||e.id){case"toFeed":this.showFeedProductComponent();break;default:break}})}showFeedProductComponent(){let e=Math.random().toString().replace("0.",""),i={};this.popupModal.setNewPopUp(e,"ProductFromFeedComponent",null,1e3,null,i,!0,!0,"Importa Prodotti","",!0),this.popupModal.outputComponent.subscribe(r=>E(this,null,function*(){r.guid==e&&r.name=="stochiudendo"&&this.loadProduct()}))}filterProduct(e){if(console.log(this.products),console.log("filterProduct",e),e.name==="cancelForm"){this.loadProduct(),e.form.reset();return}let i=e.formData;if(i.gender&&(this.products=this.products.filter(r=>r.gender===i.gender)),i.outfitSubCategory){this.products=this.products.filter(r=>r.outfitSubCategory===i.outfitSubCategory);return}i.outfitCategory&&(this.products=this.products.filter(r=>r.outfitCategory==i.outfitCategory))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-outfit-products"]],outputs:{selectProduct:"selectProduct"},standalone:!0,features:[fe],decls:11,vars:9,consts:[[3,"emittEventButton","caption","subTitle","tip","addButtonShow","showSpinner","customToolbarButtons"],["id","accordionExample",1,"accordion","my-3"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button"],[1,"mdi","mdi-filter-outline"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"accordion-body"],[3,"submitFormEvent","service","showBottomButtons"],[3,"colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable","emittendStartEdit","emittendGridEvent","emittendDblRowClick",4,"ngIf"],[3,"emittendStartEdit","emittendGridEvent","emittendDblRowClick","colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0),H("emittEventButton",function(s){return r.eventToolbarProduct(s)}),_(1,"div",1)(2,"div",2)(3,"h2",3)(4,"button",4),Q(5,"span",5),k(6," Filtri "),v()(),_(7,"div",6)(8,"div",7)(9,"app-dynamic-form",8),H("submitFormEvent",function(s){return r.filterProduct(s)}),v()()()()(),G(10,Q8,1,9,"app-data-grid",9),v()),i&2&&(b("caption","Elenco Outfit caricati dagli utenti")("subTitle",r.subtitle)("tip","Gestisci gli Outfit, modera,cancella,sospendi....")("addButtonShow",!0)("showSpinner",!r.showGrid)("customToolbarButtons",r.customToolbarButtons),w(9),b("service","filterProduct")("showBottomButtons",!0),w(),b("ngIf",r.showGrid))},dependencies:[Ce,Qe,Xt,ic,Yo]})}}return n})();var aN=(()=>{class n{constructor(e){this.http=e,this.baseUrl="https://api.tradedoubler.com/1.0/products.json;",this.tokenStr="token=83C91107EA3A44C6B67AD66A2799E13653192324"}getProdottiFromFeed(e,i){let r=this.buildUrl(e,i);return this.http.get(r).pipe(ne(o=>o))}buildUrl(e,i){return`${this.baseUrl};page=${i};pageSize=100;fid=${e}?${this.tokenStr}`}static{this.\u0275fac=function(i){return new(i||n)(K(ki))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Y8(n,t){if(n&1&&(_(0,"option",13),k(1),v()),n&2){let e=t.$implicit;b("value",e.id),w(),ke(" ",e.name," ")}}function J8(n,t){if(n&1&&(_(0,"option",13),k(1),v()),n&2){let e=t.$implicit;b("value",e.name),w(),ke(" ",e.name," ")}}function Z8(n,t){n&1&&(_(0,"span"),k(1," Nessun Prodotto..."),v())}function X8(n,t){n&1&&(_(0,"span"),k(1,"Importato"),v())}function e6(n,t){if(n&1&&(_(0,"option",13),k(1),v()),n&2){let e=t.$implicit;b("value",e.id),w(),ke(" ",e.categoryName," ")}}function t6(n,t){if(n&1&&(_(0,"option",13),k(1),v()),n&2){let e=t.$implicit;b("value",e.id),w(),ke(" ",e.value," ")}}function n6(n,t){if(n&1&&(_(0,"option",13),k(1),v()),n&2){let e=t.$implicit;b("value",e.id),w(),ke(" ",e.value," ")}}function i6(n,t){if(n&1){let e=le();_(0,"div",14)(1,"div",15),Q(2,"img",16),_(3,"div",17),Q(4,"p",18),G(5,X8,2,0,"span",8),v(),_(6,"div",19)(7,"h5",20),k(8),v(),_(9,"p",21),k(10),v(),_(11,"p",21),k(12),v(),_(13,"form",null,0)(15,"div",22)(16,"select",23),Ae("ngModelChange",function(r){let o=j(e).$implicit;return Pe(o.selectCategories,r)||(o.selectCategories=r),U(r)}),G(17,e6,2,2,"option",4),tu(18,"async"),v(),_(19,"label",24),k(20,"Categoria"),v()(),_(21,"div",22)(22,"select",25),Ae("ngModelChange",function(r){let o=j(e).$implicit;return Pe(o.selectColor,r)||(o.selectColor=r),U(r)}),G(23,t6,2,2,"option",4),v(),_(24,"label",26),k(25,"Colore"),v()(),_(26,"div",22)(27,"select",25),Ae("ngModelChange",function(r){let o=j(e).$implicit;return Pe(o.selectGender,r)||(o.selectGender=r),U(r)}),G(28,n6,2,2,"option",4),v(),_(29,"label",26),k(30,"Genere uomo/donna"),v()(),_(31,"div",27)(32,"button",28),H("click",function(){let r=j(e).$implicit,o=x();return U(o.saveToWardrobe(r))}),k(33,"Aggiungi al guardaroba"),v()()()()()()}if(n&2){let e=t.$implicit,i=x();w(2),Vf("src",e.productImage.url,di),Vf("alt",e.name),w(2),b("innerHTML",i.splitCategories(e.categories),Mf),w(),b("ngIf",i.isJustImported(e.offers[0].id)),w(3),Ye(e.name),w(2),Ye(e.brand),w(2),ke("Prezzo: ",i.setPrice(e.offers)," \u20AC"),w(4),Me("ngModel",e.selectCategories),w(),b("ngForOf",nu(18,13,i.categories)),w(5),Me("ngModel",e.selectColor),w(),b("ngForOf",i.colors),w(4),Me("ngModel",e.selectGender),w(),b("ngForOf",i.gender)}}var lN=(()=>{class n{constructor(){this.productService=F(aN),this.outfitService=F(mr),this.pageNumber=1,this.totalProducts=0,this.stores=[{id:"44191",name:"PULL and BEAR IT"},{id:"35306",name:"PrimaDonna IT"},{id:"36745",name:"Bershka IT"},{id:"38925",name:"Julian Fashion"},{id:"39848",name:"Julian Fashion IT- Lys"},{id:"109063",name:"Brupa PF"}],this.storeCategories=[],this.selectGender=[],this.products=[],this.filterProduct=[],this.categories=this.outfitService.getFilteredCollection("outfitsCategories",[{field:"parentCategory",operator:"!=",value:""}]),this.categoryForm=new zr({}),this.colors=[{id:"N",value:"Nero",parent:null,hex:"#000000"},{id:"B",value:"Bianco",parent:null,hex:"#FFFFFF"},{id:"G",value:"Grigio",parent:null,hex:"#808080"},{id:"Bg",value:"Beige",parent:null,hex:"#F5F5DC"},{id:"BN",value:"Blu navy",parent:null,hex:"#000080"},{id:"BJ",value:"Blu Jeans",parent:null,hex:"#5DADEC"},{id:"R",value:"Rosso",parent:null,hex:"#FF0000"},{id:"VO",value:"Verde oliva",parent:null,hex:"#808000"},{id:"GS",value:"Giallo senape",parent:null,hex:"#FFDB58"},{id:"RP",value:"Rosa pallido",parent:null,hex:"#FFD1DC"},{id:"RSA",value:"Rosa",parent:null,hex:"#FFC0CB"},{id:"A",value:"Azzurro",parent:null,hex:"#ADD8E6"},{id:"M",value:"Marrone",parent:null,hex:"#964B00"},{id:"O",value:"Arancione",parent:null,hex:"#FFA500"}],this.gender=[{id:"U",value:"Uomo"},{id:"D",value:"Donna"}],this.justImported=new Set}loadProducts(){this.products.length<=this.totalProducts&&this.productService.getProdottiFromFeed(this.selectedStore,this.pageNumber).subscribe(e=>{this.products.push(...e.products),this.totalProducts=e.productHeader.totalHits,this.filterProduct=JSON.parse(JSON.stringify(this.products)),this.filterProduct.forEach(i=>E(this,null,function*(){let r=i.offers[0].id;this.storeCategories.push(i.categories[0]),i.selectedColor=null,i.selectedCategory=null,i.selectedGender=null,this.selectGender[r]=null,(yield this.outfitService.getFilteredCollection("outfitsProducts",[{field:"id",operator:"==",value:r}])).length>0&&this.justImported.add(r)})),this.storeCategories=this.storeCategories.filter((i,r,o)=>r===o.findIndex(s=>s.name===i.name)),this.storeCategories=this.storeCategories.sort((i,r)=>i.name<r.name?-1:i.name>r.name?1:0),this.selectedStoreCategory&&this.onChangeCategory()})}isJustImported(e){return this.justImported.has(e)}loadMoreProducts(){this.pageNumber++,this.filterProduct=[],this.loadProducts()}saveToWardrobe(e){return E(this,null,function*(){if(!e.selectCategories&&e.selectColor&&e.selectGender){Rn("Nessuna categoria selezionata","Errore!");return}let i=e.offers[0].priceHistory[0].price.value,r=e.offers[0].productUrl,o=e.offers[0].feedId,s=(yield this.categories).filter(m=>m.id==e.selectCategories)[0].parentCategory,a=e.productImage.url,l=e.offers[0].id,u=new Date,d={id:e.offers[0].id,price:i,name:e.name,outfitCategory:s,outfitSubCategory:e.selectCategories,brend:e.brand,color:e.selectColor,imageUrl:a.replace("http://","https://"),link:r,feedId:o,gender:e.selectGender,createdAt:u.getTime(),editedAt:u.getTime()};(yield this.outfitService.saveOutfitsProducts(l,d))&&this.justImported.add(l)})}onChangeStore(e){this.products=[],this.totalProducts=0,this.pageNumber=1,this.justImported.clear(),this.storeCategories=[],this.loadProducts()}splitCategories(e){return e.map(i=>i.name).join("-")}setPrice(e){let i="";return e.forEach(r=>{i=r.priceHistory.map(o=>o.price.value).join("-")}),i}onSelectCategories(e){}onChangeCategory(e){this.filterProduct=this.products.filter(i=>i.categories.map(r=>r.name).includes(this.selectedStoreCategory))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-product-from-feed"]],standalone:!0,features:[fe],decls:19,vars:6,consts:[["categoryForm","ngForm"],[1,"container-fluid"],[1,"form-floating"],["id","floatingSelect","aria-label","Floating label select example",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","floatingSelect"],[1,"container"],[1,"row","container-products"],[4,"ngIf"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"row"],[1,"d-grid","gap-2","col-6","mx-auto"],[1,"btn","btn-link",3,"click"],[3,"value"],[1,"col-md-4"],[1,"card","mb-4"],[1,"card-img-top",3,"src","alt"],[1,"card-img-overlay"],[1,"card-text",3,"innerHTML"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"mb-3","form-floating"],["name","outfitsCategories","required","","id","selectCategories","aria-label","Floating label select example",1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["for","selectCategories"],["name","colors","required","","id","colore","aria-label","Floating label select example",1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["for","colore"],[1,"mb-3"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(i,r){i&1&&(_(0,"div",1)(1,"div",2)(2,"select",3),Ae("ngModelChange",function(s){return Pe(r.selectedStore,s)||(r.selectedStore=s),s}),H("change",function(s){return r.onChangeStore(s)}),G(3,Y8,2,2,"option",4),v(),_(4,"label",5),k(5,"Seleziona uno store"),v()(),_(6,"div",2)(7,"select",3),Ae("ngModelChange",function(s){return Pe(r.selectedStoreCategory,s)||(r.selectedStoreCategory=s),s}),H("change",function(s){return r.onChangeCategory(s)}),G(8,J8,2,2,"option",4),v(),_(9,"label",5),k(10,"Seleziona uno store"),v()(),_(11,"div",6)(12,"div",7),G(13,Z8,2,0,"span",8)(14,i6,34,15,"div",9),v()(),_(15,"div",10)(16,"div",11)(17,"button",12),H("click",function(){return r.loadMoreProducts()}),k(18,"Carica altri prodotti"),v()()()()),i&2&&(w(2),Me("ngModel",r.selectedStore),w(),b("ngForOf",r.stores),w(4),Me("ngModel",r.selectedStoreCategory),w(),b("ngForOf",r.storeCategories),w(5),b("ngIf",r.products.length==0),w(),b("ngForOf",r.filterProduct))},dependencies:[Ce,lt,Qe,ux,bn,Jl,Zl,Xl,Wo,zn,fr,xd,qr,Td],styles:[".container-fluid[_ngcontent-%COMP%]   .container-products[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem;min-height:600px;max-height:600px;overflow-y:auto;font-size:.8rem}.container-fluid[_ngcontent-%COMP%]   .container-products[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{max-height:200px;object-fit:scale-down}.container-fluid[_ngcontent-%COMP%]   .container-products[_ngcontent-%COMP%]   .card-img-overlay[_ngcontent-%COMP%]{background-color:#e0dfdfb3;height:fit-content;font-size:.7rem;width:100%}.container-fluid[_ngcontent-%COMP%]   .container-products[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:.75rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}}return n})();var F1=[{name:"ElementComponent",component:tN},{name:"DynamicFormComponent",component:Yo},{name:"ProductFromFeedComponent",component:lN},{name:"OutfitProductsComponent",component:Eg}];var en=(()=>{class n{constructor(){this.dataFromComponent=new oe,this._popupsSet=new xt([]),this.popupsSet=this._popupsSet.asObservable(),this.currentPopupsSet=[],this._outputComponent=new xt([]),this.outputComponent=this._outputComponent.asObservable()}getComponentByName(e){return F1.find(r=>r.name===e).component||null}isComponentExistByName(e){return!!F1.find(r=>r.name===e).name}setNewPopUp(e,i,r,o="800",s,a,l=!1,u=!1,d="",f="center",m=!1){if(e||(e=Math.random().toString().replace("0.","")),typeof i>"u"||!e)return;let y=this.currentPopupsSet.findIndex(D=>D.id==e&&D.componentName==i);if(y<0){let D={componentName:i,dataToSend:r,instancedData:a,popUpWidth:o,showCaptionFooter:l,showCaptionHeader:u,accessoringData:s,action:"added",title:d,position:f,id:e,isClosablePopUp:m};this.currentPopupsSet.push(D),this._popupsSet.next(this.currentPopupsSet)}else this.currentPopupsSet[y].dataToSend=r,this.currentPopupsSet[y].action="update",this.currentPopupsSet[y].showCaptionFooter=l,this.currentPopupsSet[y].showCaptionHeader=u,this._popupsSet.next(this.currentPopupsSet)}setPopUps(e){this.currentPopupsSet=e}destroyCurrentOpenPopUp(e){let i=this.currentPopupsSet.findIndex(r=>r.componentName==e);if(i>=0){this.currentPopupsSet[i].action="remove";try{}catch(r){console.warn(r)}setTimeout(()=>{this._popupsSet.next(this.currentPopupsSet),this._outputComponent.next([]),this.currentPopupsSet.splice(i,1)},500)}}destroyCurrentOpenPopUpByGuid(e){let i=this.currentPopupsSet.findIndex(r=>r.id==e||r.componentName==e);if(i>=0){this.currentPopupsSet[i].action="remove";try{return this._popupsSet.next(this.currentPopupsSet),this.currentPopupsSet.splice(i,1),!0}catch(r){return console.warn(r),!1}}return!1}destroyOutputComponent(){this._outputComponent.next([])}destroyCurrentOpenPopUps(){this.currentPopupsSet=[],this._popupsSet.next([])}setOutputComponent(e){this._outputComponent.next(e)}getOutputComponent(e){return E(this,null,function*(){return new Promise((i,r)=>{this.outputComponent.subscribe(o=>E(this,null,function*(){o.guid===e&&o.guid==e&&i(o)}))})})}onSubScribe(){this._popupsSet.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function o6(n,t){if(n&1){let e=le();_(0,"li",19),H("click",function(r){let o=j(e).index,s=x();return U(s.onAdd(r,o))}),Q(1,"span",20),k(2),_(3,"div")(4,"button",21),H("click",function(r){let o=j(e).index,s=x();return U(s.onAdd(r,o))}),Q(5,"span",22),v()()()}if(n&2){let e=t.$implicit,i=x();w(),b("ngClass",i.elementIcons[e.type]),w(),ke(" ",e.label," ")}}function s6(n,t){if(n&1){let e=le();_(0,"div",23),H("click",function(){let r=j(e),o=r.$implicit,s=r.index,a=x();return U(a.openPropertiesModal(o,s))}),_(1,"div",24)(2,"span"),k(3),v()(),_(4,"button",25),H("click",function(){let r=j(e).index,o=x();return U(o.onRemove(r))}),Q(5,"span",26),v()()}if(n&2){let e=t.$implicit;w(3),Ye(e.label)}}var cN=(()=>{class n{constructor(e,i,r){this.modalService=e,this.route=i,this.router=r,this.elements=[{type:"textBox",label:"Text Box"},{type:"selectBox",label:"Select Box"},{type:"radio",label:"Radio Button"},{type:"checkBox",label:"Checkbox"},{type:"textArea",label:"Textarea"},{type:"fileBox",label:"FileBox"},{type:"hiddenBox",label:"Hidden box"}],this.elementIcons={textBox:"mdi mdi-signature-text",selectBox:"mdi mdi-form-select",radio:"mdi mdi-radiobox-marked",checkBox:"mdi mdi-checkbox-marked-outline",textArea:"mdi mdi-form-textarea",fileBox:"mdi mdi-file-document-outline",hiddenBox:"mdi mdi-file-hidden"},this.formElements=[],this.propertiesModal=F(en),this.formId=null,this.formTitle=this.formId?"Modifica Form":"Crea Nuovo Form",this.formName="",this.formService=F(Ho)}ngOnInit(){this.route.paramMap.subscribe(e=>{this.formId=e.get("id"),this.formId&&(this.formTitle="Modifica Form",this.loadForm(this.formId))})}loadForm(e){this.formService.getFormById(e).subscribe(i=>{i&&(this.formName=i.nameForm,this.formElements=JSON.parse(i.json))})}onAdd(e,i){e.preventDefault(),e.stopPropagation();let r=this.elements[i];this.formElements.push(Ee(Y({},r),{validation:[]}));let o=this.formElements.length-1;this.openPropertiesModal(r,o)}onRemove(e){this.formElements.splice(e,1)}openPropertiesModal(e,i){this.selectedElement=Y({},e);let r=Math.random().toString().replace("0.",""),o={formField:this.selectedElement};this.propertiesModal.setNewPopUp(r,"ElementComponent",null,800,null,o,!1,!0,"Gestione propriet\xE0","",!1),this.propertiesModal.outputComponent.subscribe(s=>{s.guid==r&&s.name=="saveProperties"&&i>=0&&(this.formElements[i]=s.formField,this.propertiesModal.destroyCurrentOpenPopUpByGuid(r),this.selectedElement={}),s.guid==r&&s.name=="closeProperties"&&this.propertiesModal.destroyCurrentOpenPopUpByGuid(r)})}addAttribute(e){let i={name:"",value:""};e.attributes.push(i)}saveForm(e){let i=JSON.stringify(this.formElements);console.log("saveForm",i);let r=this.formId==="new"?Math.random().toString().replace("0.",""):this.formId,o=this.formId=="new"?this.formName.trim():this.formId,s={nameForm:o,json:i,id:r};this.formService.saveForm(o,s).then(()=>{Rn("Form salvato con successo","Attenzione!"),this.router.navigate(["/form-list"])}).catch(a=>{console.error("Errore durante il salvataggio del form:",a)})}returnPrev(){this.router.navigate(["/form-list"])}static{this.\u0275fac=function(i){return new(i||n)(re(P1),re(yn),re(jt))}}static{this.\u0275cmp=he({type:n,selectors:[["app-form-builder"]],standalone:!0,features:[fe],decls:29,vars:6,consts:[[3,"caption"],[1,"text","border-bottom"],[1,"mdi","mdi-chevron-right"],[1,"row","mt-3","mb-3"],["for","formName",1,"col-sm-2","col-form-label","font-medium"],[1,"badge","bg-secondary"],[1,"col-sm-10"],["id","formName","type","text","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text","pt-3","mt-3"],[1,"content-formbuilder","form-view"],[1,"list-group","elements"],["class","list-group-item d-flex justify-content-between align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"form-view"],[1,"row"],["class","element",3,"click",4,"ngFor","ngForOf"],[1,"formbuilder-button","gap-3","mt-1"],[1,"ana-button","btn",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"mdi","mdi-content-save-outline"],[1,"list-group-item","d-flex","justify-content-between","align-items-center",3,"click"],[1,"iconE",3,"ngClass"],[1,"btn","icon-button","ms-2",3,"click"],[1,"mdi","mdi-plus-circle-outline"],[1,"element",3,"click"],[1,"form-element","mb-3"],[1,"icon-button","ms-2","removeEl",3,"click"],[1,"mdi","mdi-close"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0)(1,"div",1)(2,"h2"),Q(3,"span",2),k(4),v()(),_(5,"div",3)(6,"label",4),k(7,"Form Name "),_(8,"span",5),k(9,"Richiesto"),v()(),_(10,"div",6)(11,"input",7),Ae("ngModelChange",function(s){return Pe(r.formName,s)||(r.formName=s),s}),v()()(),_(12,"div",8)(13,"h3"),Q(14,"span",2),k(15,"Anteprima form"),v()(),_(16,"div",9)(17,"ul",10),G(18,o6,6,2,"li",11),v(),_(19,"div",12)(20,"div",13),G(21,s6,6,1,"div",14),v()()(),_(22,"div",15)(23,"button",16),H("click",function(){return r.returnPrev()}),Q(24,"span",17),k(25," Indietro "),v(),_(26,"button",16),H("click",function(){return r.saveForm(r.formName)}),Q(27,"span",18),k(28," Salva "),v()()()),i&2&&(b("caption",r.formTitle),w(4),eu("",r.formTitle," ",r.formName,""),w(7),Me("ngModel",r.formName),w(7),b("ngForOf",r.elements),w(3),b("ngForOf",r.formElements))},dependencies:[Ce,Bt,lt,Xt,bn,bi,zn,qr,ZP],styles:[".content-formbuilder[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:normal;align-items:normal;align-content:normal}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{flex:0 1 auto}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:.3rem;text-align:start}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .iconE[_ngcontent-%COMP%]{margin-right:.4rem;line-height:.5rem}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;line-height:.5rem}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--bg-grey)}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]{flex:1 0 auto;margin-left:10px}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]{position:relative;display:flex;flex:1 0 auto;justify-content:space-between;align-content:center}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]{border:1px solid var(--border_color);width:100%;padding:.65rem;border-radius:.375rem}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .removeEl[_ngcontent-%COMP%]{color:red;font-size:1rem}.content-formbuilder[_ngcontent-%COMP%]   .no-evt[_ngcontent-%COMP%]{pointer-events:none}.formbuilder-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:end}"]})}}return n})();var uN=(()=>{class n{transform(e){if(!e)return"";let i=new Date(Number(e)),r=String(i.getDate()).padStart(2,"0"),o=String(i.getMonth()+1).padStart(2,"0"),s=i.getFullYear();return`${r}/${o}/${s}`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=pf({name:"timestampToDate",type:n,pure:!0,standalone:!0})}}return n})();function a6(n,t){if(n&1){let e=le();_(0,"li",4),H("dblclick",function(){let r=j(e).$implicit,o=x();return U(o.editUser(r))}),_(1,"div",5)(2,"span",6),Q(3,"img",7),v(),k(4),v(),_(5,"div",8)(6,"span",9),k(7),tu(8,"timestampToDate"),v()(),_(9,"div",10)(10,"button",11),Q(11,"span",12),v(),_(12,"ul",13)(13,"li")(14,"button",14),H("click",function(){let r=j(e).$implicit,o=x();return U(o.editUser(r))}),Q(15,"span",15),k(16," Modifica "),v()(),_(17,"li")(18,"button",14),H("click",function(){let r=j(e).$implicit,o=x();return U(o.deleteUser(r.uid))}),Q(19,"span",16),k(20," Elimina "),v()(),_(21,"li")(22,"button",14),H("click",function(){let r=j(e).$implicit,o=x();return U(o.disableUser(r.uid))}),Q(23,"span",17),k(24," Disabilita "),v()(),_(25,"li")(26,"button",14),H("click",function(){let r=j(e).$implicit,o=x();return U(o.sendPasswordReset(r))}),Q(27,"span",18),k(28," Invia Password "),v()()()()()}if(n&2){let e=t.$implicit;w(3),b("src",e.photoURL||"https://ionicframework.com/docs/img/demos/avatar.svg",di)("alt",e.name),w(),eu(" ",e.displayName||e.name," ",e.email," "),w(3),Ye(nu(8,5,e.createAt))}}var dN=(()=>{class n{constructor(){this.subtitle="Elenco utenti registrati in app",this.userService=F(pr),this.propertiesModal=F(en)}ngOnInit(){this.users$=this.userService.getUsers(),this.users$.subscribe(e=>{this.users=e})}deleteUser(e){return E(this,null,function*(){console.log("deleteUser-->",this.users);let i=yield this.userService.deleteUsersFirebase(e)})}editUser(e){this.selectedUser=e;let i=Math.random().toString().replace("0.",""),r={service:"profileForm",editData:this.selectedUser};this.propertiesModal.setNewPopUp(i,"DynamicFormComponent",null,800,null,r,!1,!0,"Modifica Utente","",!1),this.propertiesModal.outputComponent.subscribe(o=>{o.guid==i&&o.name=="submitForm",o.guid==i&&o.name=="cancelForm"&&(this.selectedUser=void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(i))})}createNewuser(){let e=Math.random().toString().replace("0.",""),i={service:"testRegistrazione"};this.propertiesModal.setNewPopUp(e,"DynamicFormComponent",null,800,null,i,!1,!0,"Modifica Outfit","",!1),this.propertiesModal.outputComponent.subscribe(r=>E(this,null,function*(){r.guid==e&&r.name=="submitForm",r.guid==e&&r.name=="cancelForm"}))}sendPasswordReset(e){return E(this,null,function*(){(yield this.userService.sendPasswordFirebase(e.email))&&Rn(`Email di reset inviata a ${e.email}`,"Attenzione!")})}disableUser(e){throw this.userService.disabledUsersFirebase(e),new Error("Method not implemented.")}updateUser(e){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-users"]],standalone:!0,features:[fe],decls:4,vars:6,consts:[[3,"emittEventButton","caption","subTitle","tip","addButtonShow"],[1,"list-group","form-list"],[3,"scrollHeigth"],["class","form-list-item list-group-item d-flex justify-content-between align-items-center",3,"dblclick",4,"ngFor","ngForOf"],[1,"form-list-item","list-group-item","d-flex","justify-content-between","align-items-center",3,"dblclick"],[1,"profile-info"],[1,"img-thumbnail","profileImage"],[1,"",3,"src","alt"],[1,"data-wrapper"],[1,"data-registrazione"],[1,"dropdown"],[1,"btn","icon-button"],[1,"mdi","mdi-dots-vertical"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],[1,"btn","icon-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"mdi","mdi-close","del"],[1,"mdi","mdi-lock-off-outline"],[1,"mdi","mdi-lock-reset"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0),H("emittEventButton",function(){return r.createNewuser()}),_(1,"ul",1)(2,"app-custom-scrollbar",2),G(3,a6,29,7,"li",3),v()()()),i&2&&(b("caption","Elenco Utenti")("subTitle",r.subtitle)("tip","Gestisci il profilo utente, resetta la password,sospendi....")("addButtonShow",!0),w(2),b("scrollHeigth",500),w(),b("ngForOf",r.users))},dependencies:[Ce,lt,bn,Xt,uN,tc],styles:[".profile-info[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:flex-start;align-items:center;flex-direction:row}.profile-info[_ngcontent-%COMP%]   .profileImage[_ngcontent-%COMP%]{height:50px;overflow:hidden;display:block;width:50px;position:relative;border-radius:900px;padding:0;margin-right:.333rem}.profile-info[_ngcontent-%COMP%]   .profileImage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;-o-object-fit:cover;object-fit:cover;top:0;width:100%;height:100%}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{display:none;right:0}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}"]})}}return n})();function l6(n,t){if(n&1){let e=le();_(0,"app-data-grid",2),H("emittendStartEdit",function(r){j(e);let o=x();return U(o.editOutfit(r))})("emittendGridEvent",function(r){j(e);let o=x();return U(o.gridEvent(r))})("emittendBttonCellClick",function(r){j(e);let o=x();return U(o.approveOutfit(r))}),v()}if(n&2){let e=x();b("colonne",e.colOutfitsGrid)("idTable",2)("dataSource",e.outfits)("remoteOperation",!1)("isEditable",!0)("isEditableEditRow",!0)("showToolbarBottom",!1)("showToolbarTop",!1)("isSearchable",!1)}}var hN=(()=>{class n{constructor(){this.outfitService=F(mr),this.showGrid=!1,this.showSpinner=!1,this.outfits=this.outfitService.resultsSignal(),this.subtitle="Elenco outfit creati nell' app",this.propertiesModal=F(en),this.router=F(jt),this.colOutfitsGrid=[{itemType:"group",data:[{type:"campo",colVisible:!0,allowEditing:!0,dataField:"title",colWidth:"300",caption:"Titolo",colCaption:"Titolo",class:"outfit-title",edit:!1,groupDataField:void 0},{type:"campoImg",colVisible:!0,allowEditing:!0,dataField:"imageUrl",colWidth:"150",class:"outfit-image",colCaption:"Immagine",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campo",colVisible:!0,allowEditing:!0,dataField:"userName",colWidth:"120",caption:"utente",colCaption:"Utente",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campoDateTime",colVisible:!0,allowEditing:!0,dataField:"createdAt",colWidth:"70",caption:"Creazione",colCaption:"Creazione",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campoDateTime",colVisible:!0,allowEditing:!0,dataField:"editedAt",colWidth:"70",colCaption:"Modifica",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campo",colVisible:!0,allowEditing:!0,dataField:"status",colWidth:"80",caption:"Stato",colCaption:"Stato",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campoButton",colVisible:!0,allowEditing:!0,dataField:"",colWidth:"40",caption:"Approva",colCaption:"Stato",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0,button:{text:"",name:"cambiaStato",class:"customBrightness",location:"after",event:"cambiaStato",hint:"Approva l'outfit",icon:"mdi mdi-shield-check"}}],groupDataField:""}],this.customToolbarButtons=[{id:"toJSON",name:"toJSON",text:"Importa da Jsn",disabled:!1,visible:!0,icon:"mdi mdi-database-import-outline",widget:"button"},{id:"testLogin",name:"login",text:"Login",disabled:!1,visible:!0,icon:"mdi mdi-database-import-outline",widget:"button"}]}ngOnInit(){return E(this,null,function*(){yield this.loadOutfits()})}ngAfterViewInit(){}loadOutfits(){return E(this,null,function*(){this.showGrid=!1;let e=yield this.outfitService.getOutfits(void 0,[{field:"createdAt",by:"desc"}]);this.outfits=e;let i=this.outfits.map(r=>E(this,null,function*(){let o=yield this.getUserInfo(r.userId);return r.userName=o.displayName?o.displayName:o.email,r}));yield Promise.all(i),this.showGrid=!0})}getUserInfo(e){return E(this,null,function*(){return(yield this.outfitService.getOutfitUser(e))[0]})}eventToolbarOutfit(e){return E(this,null,function*(){let i=e.name||e.id;switch(console.log("eventToolbarOutfit",i),i){case"toJSON":this.showSpinner=!0,(yield this.outfitService.JsonOutfits())&&(this.showSpinner=!1,this.loadOutfits());break;case"addButton":this.router.navigate(["/outfit-detail"]);break;case"login":this.outfitService.login();break;default:break}})}editOutfit(e){if(typeof e<"u"&&e){e.cancel=!0,this.selectedOutfit=e.data,this.router.navigate(["/outfit-detail",this.selectedOutfit.id]);return}let i=Math.random().toString().replace("0.",""),r={service:"outfitFormAdmin",editData:this.selectedOutfit};this.propertiesModal.setNewPopUp(i,"DynamicFormComponent",null,800,null,r,!1,!0,"Modifica Outfit","",!1),this.propertiesModal.outputComponent.subscribe(o=>E(this,null,function*(){if(o.guid==i&&o.name=="submitForm"){let s=o.formData,a,l=new Date;if(o.inEdit){let u=s.color?s.color:[];s.color=u,s.editedAt=l.getTime(),a=yield this.outfitService.updateInCollection(this.selectedOutfit?.id,s)}else s.createdAt=l.getTime(),a=yield this.outfitService.saveOutfitCollection(void 0,s);a&&(this.selectedOutfit=void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(i),this.loadOutfits())}o.guid==i&&o.name=="cancelForm"&&(this.selectedOutfit=void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(i))}))}gridEvent(e){console.log("gridEvent-->",e);let i=e.name,r=e.rowData;switch(i){case"delRows":this.removeOutfit(r.id);break;default:break}}approveOutfit(e){return E(this,null,function*(){if(console.log("approveOutfit",e),e.name=="cambiaStato"){let i=e.rowData;i.status!="approved"&&(i.status="approved"),(yield this.outfitService.updateInCollection(i?.id,i))&&(this.showGrid=!1,this.loadOutfits())}})}removeOutfit(e){return E(this,null,function*(){e&&(yield this.outfitService.removeOutfit(e))&&this.loadOutfits()})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-outfits"]],standalone:!0,features:[fe],decls:2,vars:7,consts:[[3,"emittEventButton","caption","subTitle","tip","addButtonShow","showSpinner","customToolbarButtons"],[3,"colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable","emittendStartEdit","emittendGridEvent","emittendBttonCellClick",4,"ngIf"],[3,"emittendStartEdit","emittendGridEvent","emittendBttonCellClick","colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0),H("emittEventButton",function(s){return r.eventToolbarOutfit(s)}),G(1,l6,1,9,"app-data-grid",1),v()),i&2&&(b("caption","Elenco Outfit caricati dagli utenti")("subTitle",r.subtitle)("tip","Gestisci gli Outfit, modera,cancella,sospendi....")("addButtonShow",!0)("showSpinner",!r.showGrid)("customToolbarButtons",r.customToolbarButtons),w(),b("ngIf",r.showGrid))},dependencies:[Ce,Qe,ic,Xt],styles:[".outfit-title .contet-data{font-weight:500}  .outfit-image .contet-data{padding:.5rem .25rem}  .outfit-image .contet-data .cell-img{object-fit:contain;width:100%;height:100%;cursor:pointer}"]})}}return n})();function c6(n,t){if(n&1&&(_(0,"nav",3)(1,"ol",4)(2,"li",5)(3,"a",6),k(4,"Elenco categorie"),v()(),_(5,"li",7),k(6),v()()()),n&2){let e=x();w(6),Ye(e.selectedCatOutfit.categoryName)}}function u6(n,t){if(n&1){let e=le();_(0,"app-data-grid",8),H("emittendStartEdit",function(r){j(e);let o=x();return U(o.editCategoryOutfit(r))})("emittendGridEvent",function(r){j(e);let o=x();return U(o.gridEvent(r))})("emittendDblRowClick",function(r){j(e);let o=x();return U(o.dblClickRow(r))}),v()}if(n&2){let e=x();b("colonne",e.colOutfitsCategory)("idTable",2)("dataSource",e.outFitCategories)("remoteOperation",!1)("isEditable",!0)("isEditableEditRow",!0)("showToolbarBottom",!1)("showToolbarTop",!1)("isSearchable",!1)}}var k1=(()=>{class n{constructor(){this.colOutfitsCategory=[{itemType:"group",data:[{type:"campo",colVisible:!0,allowEditing:!0,dataField:"id",colWidth:"50",caption:"",colCaption:"",class:"",edit:!1,groupDataField:void 0},{type:"campoImg",colVisible:!0,allowEditing:!0,dataField:"imageUrl",colWidth:"77",class:"outfit-image",colCaption:"Immagine",allowFiltering:void 0,edit:void 0,groupDataField:void 0},{type:"campo",colVisible:!0,allowEditing:!0,dataField:"categoryName",colWidth:"200",colCaption:"Categoria",edit:void 0,groupDataField:void 0},{type:"campo",colVisible:!0,allowEditing:!0,dataField:"parentCategory",colWidth:"90",colCaption:"Parent",edit:void 0,groupDataField:void 0},{type:"campoLista",colVisible:!0,allowEditing:!0,dataField:"status",colWidth:"110",colCaption:"Stato",allowFiltering:void 0,edit:void 0,groupDataField:void 0,lista:{valueExp:"id",displayExp:"value",multiple:!1,parent:null,remote:!1,options:[{id:"1",value:"Attivo"},{id:"0",value:"Non attivo"}]}},{type:"campoNumber",colVisible:!0,allowEditing:!0,dataField:"order",colWidth:"70",colCaption:"Ordine",edit:void 0,groupDataField:void 0},{type:"campoDateTime",colVisible:!0,allowEditing:!0,dataField:"createdAt",colWidth:"110",caption:"Creazione",colCaption:"Creazione",edit:void 0,groupDataField:void 0},{type:"campoDateTime",colVisible:!0,allowEditing:!0,dataField:"editedAt",colWidth:"110",colCaption:"Ultima modifica",allowFiltering:void 0,labelAlignment:void 0,edit:void 0,groupDataField:void 0},{type:"campo",colVisible:!0,allowEditing:!0,dataField:"gender",colWidth:"90",colCaption:"Genere",edit:void 0,groupDataField:void 0}],groupDataField:""}],this.outFitService=F(mr),this.route=F(yn),this.router=F(jt),this.outFitCategories=[],this.showGrid=!1,this.showSpinner=!1,this.title="Elenco Categorie degli outifi da mostrare nell'app",this.subTitle="",this.propertiesModal=F(en),this.categoryId=null}ngOnInit(){return E(this,null,function*(){this.route.paramMap.subscribe(e=>{this.categoryId=e.get("id"),this.categoryId?(this.selectedCatOutfit=this.outFitService.mySignal(),this.title=`Elenco delle Sotto Categorie della Categoria:${this.selectedCatOutfit.categoryName}`,this.outFitCategories$=this.outFitService.getOutFitCategories(this.categoryId)):this.outFitCategories$=this.outFitService.getOutFitCategories()}),yield this.loadOutFitCategories()})}loadOutFitCategories(){return E(this,null,function*(){this.showGrid=!1,this.outFitCategories$.subscribe(e=>{this.outFitCategories=e,this.showGrid=!0})})}addCategoryOutfit(e){let i;this.categoryId&&(i={parentCategory:this.categoryId});let r={service:"outfitCategories",idData:i};this.createOrEditCategories(r)}editCategoryOutfit(e){e.cancel=!0,this.selectedCatOutfit=e.data;let i={service:"outfitCategories",editData:this.selectedCatOutfit};this.createOrEditCategories(i)}createOrEditCategories(e){let i=Math.random().toString().replace("0.","");this.propertiesModal.setNewPopUp(i,"DynamicFormComponent",null,800,null,e,!1,!0,"Modifica Outfit","",!1),this.propertiesModal.outputComponent.subscribe(r=>E(this,null,function*(){if(r.guid==i&&r.name=="submitForm"){let o=r.formData;o.parentCategory=o.parentCategory?o.parentCategory:"";let s,a=new Date;r.inEdit?(o.editedAt=a.getTime(),s=yield this.outFitService.updateOutfitCategories(o.id,o)):(o.editedAt=a.getTime(),o.createdAt=a.getTime(),s=yield this.outFitService.saveOutfitCategories(o)),s&&(this.selectedCatOutfit=this.categoryId?this.selectedCatOutfit:void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(i),this.outFitCategories$=this.outFitService.getOutFitCategories(this.categoryId),this.loadOutFitCategories())}r.guid==i&&r.name=="cancelForm"&&(this.selectedCatOutfit=this.categoryId?this.selectedCatOutfit:void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(i))}))}gridEvent(e){return E(this,null,function*(){console.log("gridEvent-->",e);let i=e.name,r=e.rowData;switch(i){case"delRows":let o=yield this.outFitService.removeOutfitCategories(r.id);break;default:break}})}dblClickRow(e){let i=e.rowData;this.outFitService.mySignal.set(e.rowData),this.router.navigate(["/outfit-category",i.id])}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-outfit-category"]],standalone:!0,features:[fe],decls:3,vars:7,consts:[[3,"emittEventButton","caption","subTitle","tip","addButtonShow","showSpinner"],["aria-label","breadcrumb",4,"ngIf"],[3,"colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable","emittendStartEdit","emittendGridEvent","emittendDblRowClick",4,"ngIf"],["aria-label","breadcrumb"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item"],["href","/outfit-category"],["aria-current","page",1,"breadcrumb-item","active"],[3,"emittendStartEdit","emittendGridEvent","emittendDblRowClick","colonne","idTable","dataSource","remoteOperation","isEditable","isEditableEditRow","showToolbarBottom","showToolbarTop","isSearchable"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0),H("emittEventButton",function(s){return r.addCategoryOutfit(s)}),G(1,c6,7,1,"nav",1)(2,u6,1,9,"app-data-grid",2),v()),i&2&&(b("caption",r.title)("subTitle",r.subTitle)("tip","Gestisci le categorie:crea,cancella,modifica....")("addButtonShow",!0)("showSpinner",!r.showGrid),w(),b("ngIf",r.selectedCatOutfit),w(),b("ngIf",r.showGrid))},dependencies:[ic,Ce,Qe,Xt]})}}return n})();var d6=["imageElement"],h6=["fileInput"],f6=n=>({darken:n});function p6(n,t){n&1&&Q(0,"span")}function m6(n,t){if(n&1){let e=le();_(0,"img",11,2),H("click",function(r){j(e);let o=x();return U(o.addTag(r))}),v()}if(n&2){let e=x();b("src",e.image(),di)("ngClass",Jt(2,f6,e.showTag()))}}function g6(n,t){if(n&1){let e=le();_(0,"div",13),H("click",function(){let r=j(e).$implicit,o=x(2);return U(o.editTag(r))}),_(1,"div",14)(2,"div",15),k(3),v(),_(4,"div",16),k(5),v(),_(6,"div",17),k(7),v()()()}if(n&2){let e=t.$implicit,i=x(2);b("ngStyle",i.tagStyle[e.id]),w(3),Ye(e.name),w(2),Ye(e.brend),w(2),Ye(e.prezzo)}}function _6(n,t){if(n&1&&(Be(0),G(1,g6,8,4,"div",12),je()),n&2){let e=x();w(),b("ngForOf",e.tags())}}function y6(n,t){if(n&1){let e=le();_(0,"button",18),H("click",function(){j(e);let r=x();return U(r.toggleTags())}),Q(1,"i",19),k(2),v()}if(n&2){let e=x();b("ngStyle",e.tagToggleButton),w(2),ke(" ",e.showTag()?"Nascondi Tags":"Mostra Tags"," ")}}function v6(n,t){if(n&1){let e=le();_(0,"button",20),H("click",function(){j(e);let r=x();return U(r.chooseFile())}),k(1," Seleziona foto "),v()}}function w6(n,t){if(n&1){let e=le();_(0,"span",21),H("click",function(){let r=j(e).$implicit,o=x();return U(o.editTag(r))}),_(1,"label"),k(2),v(),_(3,"button",22),H("click",function(){let r=j(e).$implicit,o=x();return U(o.removeTag(r.id))}),_(4,"i",23),k(5,"X"),v()()()}if(n&2){let e=t.$implicit;w(2),Ye(e.name)}}var fN=(()=>{class n{constructor(){this.image=Xe(""),this.showTag=Xe(!1),this.tags=Xe([]),this.enableSetTagsImage=!0,this.enableNewImagecaptured=Xe(!0),this.eventFotoCaptured=new oe,this.eventImageTags=new oe,this.eventBeforeFotoCaptured=new oe,this.eventImageShowFull=new oe,this.tagStyle={},this.imageLoading=Xe(!0),this.tagToggleButton={},this.format="",this.openFullScreen=!1,this.propertiesModal=F(en)}ngOnInit(){}ngAfterViewInit(){this.imageElement&&(this.imageElement.nativeElement.onload=e=>{this.imageLoading.set(!0),this.onImageLoad(e)},this.imageElement.nativeElement.onerror=()=>{this.imageLoading.set(!1)}),this.enableNewImagecaptured()&&this.imageLoading.set(!1)}onImageLoad(e){if(this.tags().length>0){let r=(this.imageElement?.nativeElement).getBoundingClientRect();this.setDisplayTag(r)}this.imageLoading.set(!1)}chooseFile(){this.fileInput.nativeElement.click()}captureImage(e){return E(this,null,function*(){if(this.tags.length>0&&typeof this.image<"u"&&!(yield this.confirmChangeFoto()))return;let i=e.target;if(i.files&&i.files[0]){let r=i.files[0];if(this.validateFile(r)){let o=new FileReader;this.imageLoading.set(!0),o.onload=s=>E(this,null,function*(){let a=s.target?.result;try{let u=r.type.replace("image/",""),d=yield this.resizeImage(a,600,600);this.image.set(d.dataUrl),this.imageLoading.set(!1)}catch(l){console.error("Errore durante il ridimensionamento dell'immagine:",l),this.imageLoading.set(!1)}}),o.readAsDataURL(r)}else Rn("File non valido. Seleziona un file immagine di dimensioni inferiori a 2MB.","Attenzione!")}})}validateFile(e){let r=["image/jpeg","image/png","image/gif"];return e.size<=5242880&&r.includes(e.type)}resizeImage(e,i,r){return new Promise((o,s)=>{let a=new Image;a.src=e,a.onload=()=>{let l=document.createElement("canvas"),u=l.getContext("2d"),d=a.width,f=a.height;if(d>i||f>r){let y=i/d,D=r/f,T=Math.min(y,D);d*=T,f*=T}l.width=d,l.height=f,u.drawImage(a,0,0,d,f);let m=l.toDataURL();o({dataUrl:m,format:m.split(";")[0].split("/")[1]})},a.onerror=l=>{s(l)}})}confirmChangeFoto(){return E(this,null,function*(){return new Promise(()=>E(this,null,function*(){return zo("Procedendo perderai anche tutti i tag associati e la priorit\xE0 acquisita nell'elenco","Attenzione!",e=>{if(e){this.tags=Xe([]),this.image=Xe("");let i={tags:this.tags};this.eventImageTags.emit(i)}})}))})}editTag(e){return E(this,null,function*(){let i=yield this.openModal(e);if(Object.keys(i).length>0){let r=this.tags(),o=r.findIndex(u=>u.id==e.id),s=i.link?i.link:"#",a=i.Images?i.Images:"";a=i.images?i.images:a,a=i.imageUrl?i.imageUrl:a,r[o]={id:e.id,name:i.name,x:e.x,y:e.y,link:s,color:i.color,brend:i.brend,images:a,prezzo:i.prezzo,outfitCategory:i.outfitCategory,outfitSubCategory:i.outfitSubCategory},this.tags.set(r);let l={tags:this.tags()};this.eventImageTags.emit(l)}})}addTag(e){return E(this,null,function*(){if(!this.enableSetTagsImage){this.eventImageShowFull.emit();return}let i="",r="",o=yield this.openModal();if(Object.keys(o).length>0){let a=(this.imageElement?.nativeElement).getBoundingClientRect(),l=(e.clientX-a.left)/a.width,u=(e.clientY-a.top)/a.height,d=o.link?o.link:"#",f=o.brend?o.brend:null,m=o.prezzo?o.prezzo:null,y=o.id?o.id:o.name.replace(" ","_"),D=o.Images?o.Images:"";D=o.imageUrl?o.imageUrl:D;let T=[];T.push({id:y,name:o.name,x:l,y:u,link:d,color:o.color,brend:f,prezzo:m,price:m,images:D,outfitCategory:o.outfitCategory,outfitSubCategory:o.outfitSubCategory}),this.tags.set(T),this.setDisplayTag(a),this.setDisplayButtonTag(a);let R={tags:this.tags()};this.eventImageTags.emit(R)}})}setDisplayTag(e){this.tags().forEach(i=>{this.tagStyle[i.id]={left:`${i.x*e.width}px`,top:`${i.y*e.height}px`}})}toggleTags(){this.showTag.update(e=>!e)}setDisplayButtonTag(e){let i=.1*e.height,r=.05*e.width;this.tagToggleButton={bottom:`${i}px`,right:`${r}px`,position:"absolute",zIndex:10}}openModal(e){return E(this,null,function*(){console.log("openModal",e);let i=Math.random().toString().replace("0.",""),r={service:"tagForm",editData:e},o={};return this.propertiesModal.setNewPopUp(i,"DynamicFormComponent",null,800,null,r,!1,!0,"Modifica Tag","",!1),new Promise((s,a)=>{this.propertiesModal.outputComponent.subscribe(l=>E(this,null,function*(){if(l.guid===i){if(l.name==="functionalInputClick"&&(this.openOutfitProducts(),console.log("functionalInputClick-->",l)),l.name==="submitForm"){let u=l.formData;this.propertiesModal.destroyCurrentOpenPopUpByGuid(i),s(u)}l.name==="cancelForm"&&(this.propertiesModal.destroyCurrentOpenPopUpByGuid(i),s(!1))}}))});return this.propertiesModal.getOutputComponent(i)})}removeTag(e){let i=this.tags().filter(r=>r.id!==e);this.tags.set(i)}openOutfitProducts(){return E(this,null,function*(){let e=Math.random().toString().replace("0.","");this.propertiesModal.setNewPopUp(e,"OutfitProductsComponent",null,1e3,null,{},!0,!0,"Prodotti Outfit","",!0),this.propertiesModal.outputComponent.subscribe(i=>E(this,null,function*(){i.guid===e&&console.log(i)}))})}dataURLtoBlob(e){let i=e.split(","),r=i[0].match(/:(.*?);/)[1],o=atob(i[1]),s=o.length,a=new Uint8Array(s);for(;s--;)a[s]=o.charCodeAt(s);return new Blob([a],{type:r})}onImageError(e){e.target.src="assets/images/fallback-image.jpg"}closeModalFullScreen(){this.openFullScreen=!1}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-foto-outfit"]],viewQuery:function(i,r){if(i&1&&(kt(d6,5),kt(h6,5)),i&2){let o;At(o=Ot())&&(r.imageElement=o.first),At(o=Ot())&&(r.fileInput=o.first)}},inputs:{image:"image",showTag:"showTag",tags:"tags",enableSetTagsImage:"enableSetTagsImage",enableNewImagecaptured:"enableNewImagecaptured"},outputs:{eventFotoCaptured:"eventFotoCaptured",eventImageTags:"eventImageTags",eventBeforeFotoCaptured:"eventBeforeFotoCaptured",eventImageShowFull:"eventImageShowFull"},standalone:!0,features:[fe],decls:11,vars:7,consts:[["imageContainer",""],["fileInput",""],["imageElement",""],[1,"image-container"],[4,"ngIf"],["class","outfit-pin-image",3,"src","ngClass","click",4,"ngIf"],["type","file","hidden","","name","file",3,"change","ngModelChange","ngModel"],["class","btn button tag-toggle-button","id","toggle-button",3,"ngStyle","click",4,"ngIf"],["class","btn button select-photo",3,"click",4,"ngIf"],[1,"chips"],["class","chips-itm shadow-sm",3,"click",4,"ngFor","ngForOf"],[1,"outfit-pin-image",3,"click","src","ngClass"],["class","tag",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"tag",3,"click","ngStyle"],[1,"card-tag-content"],[1,"item-title"],[1,"item-brend"],[1,"item-price"],["id","toggle-button",1,"btn","button","tag-toggle-button",3,"click","ngStyle"],[1,"pricetags-outline"],[1,"btn","button","select-photo",3,"click"],[1,"chips-itm","shadow-sm",3,"click"],[1,"btn","button",3,"click"],[1,"close-circle"]],template:function(i,r){if(i&1){let o=le();_(0,"div",3,0),G(2,p6,1,0,"span",4)(3,m6,2,4,"img",5)(4,_6,2,1,"ng-container",4),_(5,"input",6,1),H("change",function(a){return j(o),U(r.captureImage(a))}),Ae("ngModelChange",function(a){return j(o),Pe(r.image,a)||(r.image=a),U(a)}),v(),G(7,y6,3,2,"button",7)(8,v6,2,0,"button",8),v(),_(9,"section",9),G(10,w6,6,1,"span",10),v()}i&2&&(w(2),b("ngIf",r.imageLoading()),w(),b("ngIf",r.image),w(),b("ngIf",r.showTag()),w(),Me("ngModel",r.image),w(2),b("ngIf",r.tags().length>0),w(),b("ngIf",r.enableNewImagecaptured),w(2),b("ngForOf",r.tags()))},dependencies:[Ce,Bt,lt,Qe,$n,bn,bi,zn,qr],styles:[`@charset "UTF-8";.image-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;max-width:400px;flex-direction:column;background-color:#424242;position:relative}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:400px;border-bottom:2px solid #e0e0e0}.image-container[_ngcontent-%COMP%]   img.darken[_ngcontent-%COMP%]{opacity:.5}.image-container[_ngcontent-%COMP%]:before{content:"Carica un'immagine";color:#888;font-size:14px;position:absolute;text-align:center;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;display:none}.image-container[_ngcontent-%COMP%]:empty:before{display:block}.image-container[_ngcontent-%COMP%]   .select-photo[_ngcontent-%COMP%]{background:#424242;color:#fff}.image-container[_ngcontent-%COMP%]   #toggle-button[_ngcontent-%COMP%]{position:absolute;bottom:3px;right:3px;z-index:400;background:#0009;color:#fff;font-size:10px}.image-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{position:absolute;display:inline-block;z-index:1}.image-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .card-tag-content[_ngcontent-%COMP%]{font-size:13px;display:inline-block;width:auto;background-color:#fffc;transition:background-color .3s ease;border-radius:15px;padding:2px;margin:0;box-shadow:0 4px 6px #0000001a;position:relative;text-align:center}.image-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .card-tag-content[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{width:170px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700;color:#000}.image-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .card-tag-content[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#000;margin-top:5px}.chips[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:flex-start;align-items:center}.chips[_ngcontent-%COMP%]   .chips-itm[_ngcontent-%COMP%]{margin-right:5px;padding:3px 5px;border-radius:3px;background-color:#f0eeee;color:#000;font-size:12px;font-weight:700}.chips[_ngcontent-%COMP%]   .chips-itm[_ngcontent-%COMP%]:last-child{margin-right:0}.tag-toggle-button[_ngcontent-%COMP%]{z-index:1002;color:#fff}`]})}}return n})();var V1=(()=>{class n{constructor(){this.outfitData=Xe({}),this.activateRoute=F(yn),this.router=F(jt),this.outFitService=F(mr),this.popUpService=F(en),this.subtitle="",this.outfitTitle="",this.imageUrl=Xe(""),this.tags=Xe([])}ngOnInit(){this.fetchDataOutfit()}fetchDataOutfit(){this.activateRoute.paramMap.subscribe(e=>E(this,null,function*(){if(this.outfitId=e.get("id"),this.outfitId){let i=yield this.outFitService.getOutfitById(this.outfitId);this.outfitData.set(i[0]),this.imageUrl.set(i[0].imageUrl),this.tags.set(this.outfitData().tags)}}))}setTags(e){this.tags.update(e.tags)}submitFormOutfit(e){return E(this,null,function*(){if(e.name=="cancelForm"){this.router.navigate(["/outfits"]);return}let i=e.inEdit,r=e.formData,o=[...this.tags()];o=o.reduce((l,u)=>(l.outfitCategory.includes(u.outfitCategory)||l.outfitCategory.push(u.outfitCategory),l.outfitSubCategory.includes(u.outfitSubCategory)||l.outfitSubCategory.push(u.outfitSubCategory),l.color.includes(u.color)||l.color.push(u.color),l),{outfitCategory:[],outfitSubCategory:[],color:[]});let s=new Date,a=r;a.tags=this.tags(),a=Y(Y({},a),o),i?(a.editedAt=new Date().getTime(),(yield this.outFitService.updateInCollection(a.id,a))?this.router.navigate(["/outfit-list"]):Rn("Si \xE8 verificato un errore durante il salvataggio dell'outfit","Errore durante il salvataggio dell'outfit")):(a.editedAt=new Date().getTime(),a.createdAt=new Date().getTime(),(yield this.outFitService.saveOutfitCollection(void 0,r))?this.router.navigate(["/outfit-list"]):Rn("Si \xE8 verificato un errore durante il salvataggio dell'outfit","Errore durante il salvataggio dell'outfit"))})}btnInputEvent(e){console.log("btnInputEvent",e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-outfit-form"]],standalone:!0,features:[fe],decls:3,vars:9,consts:[[3,"caption","subTitle","tip","addButtonShow","showSpinner"],[3,"eventImageTags","image","tags"],[3,"submitFormEvent","functionalInputFormEvent","editData","service"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0)(1,"app-foto-outfit",1),H("eventImageTags",function(s){return r.setTags(s)}),v(),_(2,"app-dynamic-form",2),H("submitFormEvent",function(s){return r.submitFormOutfit(s)})("functionalInputFormEvent",function(s){return r.btnInputEvent(s)}),v()()),i&2&&(b("caption",r.outfitTitle)("subTitle",r.subtitle)("tip","...")("addButtonShow",!1)("showSpinner",!1),w(),b("image",r.imageUrl)("tags",r.tags),w(),b("editData",r.outfitData())("service","outfitForm"))},dependencies:[Xt,Yo,fN]})}}return n})();var $i=(n,t)=>{let e=F(pr),i=F(jt);return e.isLoggedUser()?!0:i.navigate(["login"])};var pN=(()=>{class n{constructor(e,i){this.usersService=e,this.router=i}login(e){return E(this,null,function*(){let i=e.formData;(yield this.usersService.loginUser(i))&&this.router.navigate(["dashboard"])})}static{this.\u0275fac=function(i){return new(i||n)(re(pr),re(jt))}}static{this.\u0275cmp=he({type:n,selectors:[["app-login"]],standalone:!0,features:[fe],decls:2,vars:5,consts:[[3,"caption","cssClass"],[3,"submitFormEvent","service","showBottomButtonLeft","inputBtnRightName"]],template:function(i,r){i&1&&(_(0,"app-anagrafica-wrapper",0)(1,"app-dynamic-form",1),H("submitFormEvent",function(s){return r.login(s)}),v()()),i&2&&(b("caption","Login")("cssClass","login-container"),w(),b("service","loginForm")("showBottomButtonLeft",!1)("inputBtnRightName","Accedi"))},dependencies:[Yo,Ce,Xt],styles:[".content-wrap.login-container{width:600px}  .content-wrap.login-container .form-container .badge{display:none}  .content-wrap.login-container .form-footer .btn-submit-form{flex:1}"]})}}return n})();var L1=[{path:"dashboard",component:pM,canActivate:[$i]},{path:"utenti",component:dN,canActivate:[$i]},{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",component:pN},{path:"form-list",component:fP,canActivate:[$i]},{path:"form-builder/:id",component:cN,canActivate:[$i]},{path:"outfit-list",component:hN,canActivate:[$i]},{path:"outfit-detail/:id",component:V1,canActivate:[$i]},{path:"outfit-detail",component:V1,canActivate:[$i]},{path:"outfit-category",component:k1,canActivate:[$i]},{path:"outfit-category/:id",component:k1,canActivate:[$i]},{path:"outfit-product-list",component:Eg,canActivate:[$i]}],Ole=Mp(L1);var mN={providers:[Mp(L1),{provide:N1,useValue:["localhost",4e3]},q0(TM.initializeApp(xn.firebase),dP,xM,nN,fM,Cx)]};var gN=(()=>{class n{constructor(){this.showHidemMenu=new oe}ngOnInit(){this.renderHeader()}renderHeader(){}toggleMenu(e){this.showHidemMenu.emit(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-header"]],outputs:{showHidemMenu:"showHidemMenu"},standalone:!0,features:[fe],decls:25,vars:0,consts:[["id","header",1,"header"],[1,"header-container"],[1,"item-left"],[1,"hamburger",3,"click"],[1,"mdi","mdi-menu"],[1,"item-center"],[1,"item-right"],[1,"flex","flex-1","items-center"],[1,"ml-auto","flex","items-center","gap-1"],["data-tw-toggle","modal","data-tw-target","#activities-panel","href","javascript:;",1,"rounded-full","p-2","hover:bg-white/5"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","data-lucide","layout-grid",1,"lucide","lucide-layout-grid","stroke-[1]","h-[18px]","w-[18px]","text-white"],["width","7","height","7","x","3","y","3","rx","1"],["width","7","height","7","x","14","y","3","rx","1"],["width","7","height","7","x","14","y","14","rx","1"],["width","7","height","7","x","3","y","14","rx","1"],["href","javascript:;",1,"request-full-screen","rounded-full","p-2","hover:bg-white/5"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","data-lucide","expand",1,"lucide","lucide-expand","stroke-[1]","h-[18px]","w-[18px]","text-white"],["d","m21 21-6-6m6 6v-4.8m0 4.8h-4.8"],["d","M3 16.2V21m0 0h4.8M3 21l6-6"],["d","M21 7.8V3m0 0h-4.8M21 3l-6 6"],["d","M3 7.8V3m0 0h4.8M3 3l6 6"],["data-tw-toggle","modal","data-tw-target","#notifications-panel","href","javascript:;",1,"rounded-full","p-2","hover:bg-white/5"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","data-lucide","bell",1,"lucide","lucide-bell","stroke-[1]","h-[18px]","w-[18px]","text-white"],["d","M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"],["d","M10.3 21a1.94 1.94 0 0 0 3.4 0"]],template:function(i,r){i&1&&(_(0,"header",0)(1,"div",1)(2,"div",2)(3,"button",3),H("click",function(s){return r.toggleMenu(s)}),Q(4,"span",4),v()(),Q(5,"div",5),_(6,"div",6)(7,"div",7)(8,"div",8)(9,"a",9),Ha(),_(10,"svg",10),Q(11,"rect",11)(12,"rect",12)(13,"rect",13)(14,"rect",14),v()(),Jc(),_(15,"a",15),Ha(),_(16,"svg",16),Q(17,"path",17)(18,"path",18)(19,"path",19)(20,"path",20),v()(),Jc(),_(21,"a",21),Ha(),_(22,"svg",22),Q(23,"path",23)(24,"path",24),v()()()()()()())},styles:[".header[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,#023957,#045072 87%);height:65px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{max-width:var(--width_container);max-height:var(--header_height);margin:auto;display:flex;flex-direction:row;flex-wrap:wrap;align-content:center;justify-content:space-between;align-items:center;color:var(--link-nav)}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]{display:none;background:var(--primary);color:var(--bianco);z-index:10002}@media (max-width: 1024px){.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]{position:absolute;display:block;top:0;left:0}}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-center[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%]{margin:0 5px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{padding-left:10px;width:150px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo-image[_ngcontent-%COMP%]{max-width:100%}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:var(--link-nav)!important}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .img-profile[_ngcontent-%COMP%]{max-width:100%;width:30px;height:30px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{position:absolute;top:35px;left:-190px;z-index:10;margin:0;padding:10px 5px;min-width:226px;background-color:#c8ced6;border:1px solid #c8ced6;box-shadow:0 16px 18px #0404071a;border-radius:4px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{display:block;color:var(--blueSoft)!important;text-align:left;line-height:22px;padding:6px 7px;text-transform:none;font-size:13px;letter-spacing:normal;position:relative;display:inline-block}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:9px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:12px;display:inline-block}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active, .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:visited, .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{background:transparent}"]})}}return n})();function b6(n,t){if(n&1&&(_(0,"li",7)(1,"a",8),Q(2,"span"),_(3,"span",9),k(4),v()()()),n&2){let e=t.$implicit;w(),b("href",e.path,di),w(),jn(e.icon),w(2),Ye(e.label)}}var _N=(()=>{class n{constructor(){this.allMenu=[],this.router=F(jt),this.initializeMenu()}initializeMenu(){let e=this.router.config;this.allMenu=[{path:"dashboard",label:"Dashboard",icon:"mdi mdi-view-dashboard-outline"},{path:"utenti",label:"Utenti Registrati",icon:"mdi mdi-account-multiple-outline"},{path:"form-list",label:"Gestione form e viste",icon:"mdi mdi-cog-outline"},{path:"outfit-list",label:"Lista outfit ",icon:"mdi mdi-wardrobe-outline"},{path:"outfit-category",label:"Lista categorie outfit ",icon:"mdi mdi-wardrobe-outline"},{path:"outfit-product-list",label:"Gestione prodotti e feed",icon:"mdi mdi-tshirt-v-outline"}]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-menu"]],standalone:!0,features:[fe],decls:8,vars:1,consts:[[1,"d-flex","flex-column","flex-shrink-0","bg-body-tertiary"],["href","/","data-bs-toggle","tooltip","data-bs-placement","right","data-bs-original-title","Icon-only",1,"d-block","p-3","link-body-emphasis","text-decoration-none"],["width","40","height","32",1,"bi","pe-none"],[0,"xlink","href","#bootstrap"],[1,"visually-hidden"],[1,"nav","nav-pills","nav-flush","flex-column","mb-auto","text-center"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],["aria-current","page","data-bs-toggle","tooltip","data-bs-placement","right","aria-label","Home","data-bs-original-title","Home",1,"nav-link",3,"href"],[1,"text"]],template:function(i,r){i&1&&(_(0,"div",0)(1,"a",1),Ha(),_(2,"svg",2),Q(3,"use",3),v(),Jc(),_(4,"span",4),k(5,"Icon-only"),v()(),_(6,"ul",5),G(7,b6,5,4,"li",6),v()()),i&2&&(w(7),b("ngForOf",r.allMenu))},dependencies:[Ce,lt],styles:[".nav[_ngcontent-%COMP%]{background:var(--bianco);border-radius:.5rem}.nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;border-width:1px 1px 0px 1px;box-shadow:0 2px 3px #0000000b;padding:.75rem .875rem;color:var(--blueSoft);font-size:20px;overflow:hidden}.nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:15px}"]})}}return n})();var C6=n=>({open:n});function E6(n,t){if(n&1){let e=le();_(0,"app-header",4),H("showHidemMenu",function(r){j(e);let o=x();return U(o.toggleMenu(r))}),v()}if(n&2){let e=x();b("toggleMenu",e.toggleMenu)}}function D6(n,t){if(n&1&&(_(0,"div",5),Q(1,"app-menu"),v()),n&2){let e=x();b("ngClass",Jt(1,C6,e.isMenuOpen))}}var yN=(()=>{class n{constructor(e){this.userService=e,this.isClose=!1,this.isLogin=!1,this.idTipoUtente=-1,this.isMenuOpen=!1,Cs(()=>{this.isLogin=this.userService.isLoginUser()})}ngOnInit(){this.isLogin=this.userService.isLoggedUser(),this.updateMenuVisibility(window.innerWidth)}updateMenuVisibility(e){e>1024?this.isMenuOpen=!0:this.isMenuOpen=!1,console.log(""+this.isMenuOpen)}toggleMenu(e){this.isMenuOpen=!this.isMenuOpen}static{this.\u0275fac=function(i){return new(i||n)(re(pr))}}static{this.\u0275cmp=he({type:n,selectors:[["app-container"]],standalone:!0,features:[fe],decls:6,vars:2,consts:[[1,"mi-container"],[3,"toggleMenu","showHidemMenu",4,"ngIf"],["class","verticalMenucontainer sidebar",3,"ngClass",4,"ngIf"],[1,"container","no-padding","ana-container"],[3,"showHidemMenu","toggleMenu"],[1,"verticalMenucontainer","sidebar",3,"ngClass"]],template:function(i,r){i&1&&(_(0,"main",0),Be(1),G(2,E6,1,1,"app-header",1)(3,D6,2,3,"div",2),je(),_(4,"div",3),Q(5,"router-outlet"),v()()),i&2&&(w(2),b("ngIf",r.isLogin),w(),b("ngIf",r.isLogin))},dependencies:[Ce,Bt,Qe,Uv,gN,_N],styles:['@charset "UTF-8";.mi-container[_ngcontent-%COMP%]   .verticalMenucontainer[_ngcontent-%COMP%]{position:absolute;left:0;overflow-x:hidden;overflow-y:auto;z-index:1001;padding-left:1.25rem;padding-right:1.25rem;box-sizing:border-box;border:1px solid var(--border_color)}@media (max-width: 1024px){.mi-container[_ngcontent-%COMP%]   .verticalMenucontainer[_ngcontent-%COMP%]{top:0;padding-left:0;border:none;display:none}.mi-container[_ngcontent-%COMP%]   .verticalMenucontainer.open[_ngcontent-%COMP%]{display:block}}  .menu-open .hamburger{background:var(--bianco)!important;color:var(--primary)!important}']})}}return n})();var S6=["overlayContent"],I6=n=>({"bg-overlay":n}),T6=(n,t)=>({top:n,left:t});function x6(n,t){if(n&1&&Q(0,"div",3),n&2){let e=x();b("ngClass",Jt(1,I6,e.showBgOverlay))}}function M6(n,t){n&1&&Ay(0)}function A6(n,t){if(n&1&&(_(0,"div",4,0),G(2,M6,1,0,"ng-container",5),v()),n&2){let e=x();b("ngStyle",Xi(3,T6,e.position().top+"px",e.position().left+"px")),w(2),b("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",e.templateContext)}}var vN=(()=>{class n{constructor(e){this.overlayService=e,this.templateContext={},this.showBgOverlay=!0,this.isVisible=Xe(!1),this.position=Xe({top:0,left:0}),this.closed=new oe,this.overlaySubscription=new gt}clickOutside(e){let i=e.target;this.overlayContentRef&&!this.overlayContentRef.nativeElement.contains(i)&&this.isVisible()&&this.closeOverlay()}ngOnInit(){this.overlaySubscription.add(this.overlayService.overlayData$.subscribe(e=>{if(!e){this.isVisible.set(!1);return}this.contentTemplate=e?.contentTemplate||null,this.openOverlay(e.position),this.showBgOverlay=e.showBgOverlay}))}openOverlay(e){this.position.set(e),this.isVisible.set(!0),setTimeout(()=>{document.querySelector(".overlay-content")?.classList.add("active")},10)}ngOnDestroy(){this.overlaySubscription.unsubscribe()}closeOverlay(){document.querySelector(".overlay-content")?.classList.remove("active"),setTimeout(()=>{this.isVisible.set(!1),this.overlayService.closeOverlay()},200)}static{this.\u0275fac=function(i){return new(i||n)(re(Qo))}}static{this.\u0275cmp=he({type:n,selectors:[["app-overlay"]],viewQuery:function(i,r){if(i&1&&kt(S6,5),i&2){let o;At(o=Ot())&&(r.overlayContentRef=o.first)}},hostBindings:function(i,r){i&1&&H("click",function(s){return r.clickOutside(s)},!1,BI)},inputs:{contentTemplate:"contentTemplate",templateContext:"templateContext",showBgOverlay:"showBgOverlay"},outputs:{closed:"closed"},standalone:!0,features:[fe],decls:2,vars:2,consts:[["overlayContent",""],["class","overlay-backdrop",3,"ngClass",4,"ngIf"],["class","overlay-content",3,"ngStyle",4,"ngIf"],[1,"overlay-backdrop",3,"ngClass"],[1,"overlay-content",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){i&1&&G(0,x6,1,3,"div",1)(1,A6,3,6,"div",2),i&2&&(b("ngIf",!1),w(),b("ngIf",r.isVisible()))},dependencies:[Ce,Bt,Qe,Ky,$n],styles:[".overlay-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;cursor:pointer}.overlay-backdrop.bg-overlay[_ngcontent-%COMP%]{background-color:#0000004d}.overlay-content[_ngcontent-%COMP%]{position:absolute;min-width:1px;min-height:1px;background-color:#fff;box-shadow:0 4px 8px #0003;padding:10px;border-radius:4px;z-index:1001;display:flex;flex-direction:column;transition:opacity .2s ease,transform .2s ease;opacity:0;transform:translateY(-10px)}.overlay-content.active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}@media (max-width: 768px){.overlay-content[_ngcontent-%COMP%]{width:90vw;left:5vw!important}}"]})}}return n})();var O6=["containerComponent"],R6=(n,t)=>({display:n,"z-index":t}),P6=n=>({"position-bottom":n}),N6=(n,t)=>({"max-width":n,width:t});function F6(n,t){if(n&1){let e=le();_(0,"app-caption",6),H("emitChiusura",function(r){j(e);let o=x();return U(o.emettiChiusura(r))}),v()}if(n&2){let e=x();b("caption",e.titlePopUp)("isClosable",e.isClosablePopUp)("cssClass","modal")("help","")}}function k6(n,t){if(n&1){let e=le();_(0,"app-caption",7),H("emitChiusura",function(r){j(e);let o=x();return U(o.emettiChiusura(r))}),v()}if(n&2){let e=x();b("isFooter",e.showCaptionFooter)}}var wN=(()=>{class n{constructor(e){this.popUpService=e,this.outputEmit=new oe,this.showCaptionHeader=!1,this.showCaptionFooter=!1,this.isPanelVisible=!1,this.zIndex=500,this.popUpWidth=null,this.isClosablePopUp=!1,this.position="center"}ngOnChanges(e){this.infoPopUp.popUpWidth&&(this.popUpWidth=this.infoPopUp.popUpWidth+"px"),this.infoPopUp.showCaptionHeader&&(this.showCaptionHeader=this.infoPopUp.showCaptionHeader),this.infoPopUp.showCaptionFooter&&(this.showCaptionFooter=this.infoPopUp.showCaptionFooter),this.infoPopUp.title&&(this.titlePopUp=this.infoPopUp.title),this.infoPopUp.class&&(this.classFade=this.infoPopUp.class)}get getMaxZIndex(){let e=document.querySelectorAll(".modal"),i=[];return e.forEach(r=>{r.classList.contains("modal-dialog")||i.push(parseFloat(window.getComputedStyle(r).zIndex))}),Math.max(...i);return Math.max(...Array.from(document.querySelectorAll("div.dx-overlay-content"),r=>parseFloat(window.getComputedStyle(r).zIndex)).filter(r=>!Number.isNaN(r)),0)}ngOnInit(){return E(this,null,function*(){this.isPanelVisible=!0,this.zIndexModalDialog=this.getMaxZIndex+1;let e=this.infoPopUp.componentName;this.accessoringData=this.infoPopUp.accessoringData,this.position=this.infoPopUp.position;let i=this.popUpService.getComponentByName(e),r=this.containerComponent.createComponent(i);r.instance.itemData=this.infoPopUp.dataToSend,r.instance.cssClass="modal-content ",this.componentName=e,this.idPopUp=this.infoPopUp.id,this.infoPopUp.popUpWidth&&(this.popUpWidth=this.infoPopUp.popUpWidth+"px"),this.infoPopUp.showCaptionHeader&&(this.showCaptionHeader=this.infoPopUp.showCaptionHeader),this.infoPopUp.showCaptionFooter&&(this.showCaptionFooter=this.infoPopUp.showCaptionFooter),this.infoPopUp.title&&(this.titlePopUp=this.infoPopUp.title),this.infoPopUp.class&&(this.classFade=this.infoPopUp.class),this.isClosablePopUp=typeof this.infoPopUp.isClosable<"u"?this.infoPopUp.isClosable:!1;let o=r.instance;if(typeof this.infoPopUp.instancedData<"u"){let s=this.infoPopUp.instancedData;for(let a in s)o[a]=s[a]}for(let s in o)r.instance[s]instanceof oe&&r.instance[s].subscribe(a=>{try{let l;typeof a=="boolean"?(l={componentName:e,accessoringData:this.accessoringData,guid:this.idPopUp,name:s},a=l):(a.componentName=e,a.accessoringData=this.accessoringData,a.guid=this.idPopUp,typeof a.name>"u"&&(a.name=s))}catch{}finally{this.popUpService.setOutputComponent(a)}})})}ngAfterViewInit(){}emettiChiusura(e){this.idPopUp?this.popUpService.destroyCurrentOpenPopUpByGuid(this.idPopUp):this.popUpService.destroyCurrentOpenPopUp(this.componentName);let i={guid:this.idPopUp,name:"stochiudendo"};this.popUpService.setOutputComponent(i),this.popUpService.destroyOutputComponent()}static{this.\u0275fac=function(i){return new(i||n)(re(en))}}static{this.\u0275cmp=he({type:n,selectors:[["app-modal-popup-content"]],viewQuery:function(i,r){if(i&1&&kt(O6,7,Bn),i&2){let o;At(o=Ot())&&(r.containerComponent=o.first)}},inputs:{infoPopUp:"infoPopUp",index:"index",componentName:"componentName",classePopup:"classePopup"},outputs:{outputEmit:"outputEmit"},standalone:!0,features:[Tn,fe],decls:6,vars:16,consts:[["containerComponent",""],["tabindex","-1","role","dialog",1,"modal","popup",3,"ngStyle","ngClass","id"],[1,"modal-dialog","formEditPopup",3,"id","ngStyle"],[3,"caption","isClosable","cssClass","help","emitChiusura",4,"ngIf"],[1,"modal-content"],[3,"isFooter","emitChiusura",4,"ngIf"],[3,"emitChiusura","caption","isClosable","cssClass","help"],[3,"emitChiusura","isFooter"]],template:function(i,r){i&1&&(_(0,"div",1)(1,"div",2),G(2,F6,1,4,"app-caption",3),Q(3,"div",4,0),G(5,k6,1,1,"app-caption",5),v()()),i&2&&(b("ngStyle",Xi(8,R6,r.isPanelVisible?"block":"none",r.zIndexModalDialog))("ngClass",Jt(11,P6,r.position=="bottom"))("ngClass",r.classFade)("id",r.idPopUp),w(),b("id",r.idPopUp)("ngStyle",Xi(13,N6,r.popUpWidth?r.popUpWidth:"",r.popUpWidth?r.popUpWidth:"")),w(),b("ngIf",r.showCaptionHeader),w(3),b("ngIf",r.showCaptionFooter))},dependencies:[Rp,Ce,Bt,Qe,$n],styles:[".popup{z-index:500;pointer-events:auto;background-color:#fffc}  .popup .modal-dialog{max-width:90%;border:1px solid var(--primary);background:#fff;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px #0000002d;border-radius:4px;pointer-events:auto;width:fit-content}  .popup .modal-dialog .caption-container.modal{border:1px solid var(--border_color)}  .popup .modal-dialog .modal-content{border:none;box-sizing:border-box;background:transparent}  .popup .modal-dialog .modal-content .formEdit{background:var(--bg-grey)}  .position-bottom .modal-dialog{z-index:501;bottom:2rem;left:0;right:0;position:fixed;max-width:96%;background:transparent}.fade-in-fwd[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fade-in-fwd .4s cubic-bezier(.39,.575,.565,1) both;animation:_ngcontent-%COMP%_fade-in-fwd .4s cubic-bezier(.39,.575,.565,1) both}@-webkit-keyframes _ngcontent-%COMP%_fade-in-fwd{0%{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@keyframes _ngcontent-%COMP%_fade-in-fwd{0%{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}.fade-out-bck[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fade-out-bck .7s cubic-bezier(.25,.46,.45,.94) both;animation:_ngcontent-%COMP%_fade-out-bck .7s cubic-bezier(.25,.46,.45,.94) both}@keyframes _ngcontent-%COMP%_fade-out-bck{0%{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}to{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}}.slide-center[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_slide-center-fw .7s cubic-bezier(.25,.46,.45,.94) none;animation:_ngcontent-%COMP%_slide-center-fw .7s cubic-bezier(.25,.46,.45,.94) none}@keyframes _ngcontent-%COMP%_slide-center-fw{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}to{-webkit-transform:translateZ(160px);transform:translateZ(160px)}}  .modal-content .modal-data-grid-wrapper{margin:auto}"]})}}return n})();function V6(n,t){if(n&1&&(_(0,"div"),Q(1,"app-modal-popup-content",2),v()),n&2){let e=t.$implicit,i=t.index,r=x();w(),b("infoPopUp",e)("index",i)("componentName",e.componentName)("classePopup",r.classe)}}var bN=(()=>{class n{constructor(){this.popups=[],this.classSlideCenter="slide-center",this.classFadeIn="fade-in-fwd",this.popUpService=F(en)}ngOnInit(){this.popUpService.popupsSet.subscribe(e=>{e.forEach((i,r)=>{i.action=="added"&&(i.action="setted",i.class=this.classSlideCenter,this.popups.push(i)),i.action=="update"&&(i.action="setted",i.class="fade-out-bck",this.popups.splice(r,1),i.class=this.classSlideCenter,setTimeout(()=>{this.popups.push(i)},500)),i.action=="remove"&&(i.class="fade-out-bck",setTimeout(()=>{this.popups.splice(r,1)},300))})})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-modal-popup-wrapper"]],standalone:!0,features:[fe],decls:2,vars:1,consts:[[1,"row"],[4,"ngFor","ngForOf"],[3,"infoPopUp","index","componentName","classePopup"]],template:function(i,r){i&1&&(_(0,"div",0),G(1,V6,2,4,"div",1),v()),i&2&&(w(),b("ngForOf",r.popups))},dependencies:[Ce,lt,wN]})}}return n})();var CN=(()=>{class n{constructor(){this.title="Admin"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-root"]],standalone:!0,features:[fe],decls:3,vars:0,template:function(i,r){i&1&&Q(0,"app-container")(1,"app-modal-popup-wrapper")(2,"app-overlay")},dependencies:[yN,vN,bN]})}}return n})();Ox(CN,mN).catch(n=>console.error(n));
