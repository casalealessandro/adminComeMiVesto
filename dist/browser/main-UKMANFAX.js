import{a as z1,b as Nu,c as W1,d as q1,e as dm,f as hm}from"./chunk-HCJFOUJG.js";import"./chunk-VKYYVJIS.js";import{A as it,B as no,C as Xn,D as ku,E as El,H as Z1,I as Fu,J as Vu,K as En,L as Nt,a as Y,b as ke,c as am,d as O,e as K1,i as lm,j as Q1,k as bl,q as cm,r as Pu,s as Y1,t as J1,v as um}from"./chunk-7UO3AAGR.js";var X1=null;var fm=1,pm=Symbol("SIGNAL");function Ve(t){let e=X1;return X1=t,e}var eE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function CR(t){if(!(_m(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===fm)){if(!t.producerMustRecompute(t)&&!mm(t)){t.dirty=!1,t.lastCleanEpoch=fm;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=fm}}function tE(t){return t&&(t.nextProducerIndex=0),Ve(t)}function nE(t,e){if(Ve(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(_m(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)gm(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function mm(t){Lu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(CR(n),i!==n.version))return!0}return!1}function iE(t){if(Lu(t),_m(t))for(let e=0;e<t.producerNode.length;e++)gm(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function gm(t,e){if(IR(t),Lu(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)gm(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Lu(r),r.producerIndexOfThis[i]=e}}function _m(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Lu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function IR(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function TR(){throw new Error}var SR=TR;function rE(t){SR=t}function ce(t){return typeof t=="function"}function fs(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Bu=fs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function io(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ft=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(ce(i))try{i()}catch(o){e=o instanceof Bu?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{oE(o)}catch(s){e=e??[],s instanceof Bu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Bu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)oE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&io(n,e)}remove(e){let{_finalizers:n}=this;n&&io(n,e),e instanceof t&&e._removeParent(this)}};ft.EMPTY=(()=>{let t=new ft;return t.closed=!0,t})();var ym=ft.EMPTY;function ju(t){return t instanceof ft||t&&"closed"in t&&ce(t.remove)&&ce(t.add)&&ce(t.unsubscribe)}function oE(t){ce(t)?t():t.unsubscribe()}var Fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ps={setTimeout(t,e,...n){let{delegate:i}=ps;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ps;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Uu(t){ps.setTimeout(()=>{let{onUnhandledError:e}=Fn;if(e)e(t);else throw t})}function ro(){}var sE=vm("C",void 0,void 0);function aE(t){return vm("E",void 0,t)}function lE(t){return vm("N",t,void 0)}function vm(t,e,n){return{kind:t,value:e,error:n}}var oo=null;function ms(t){if(Fn.useDeprecatedSynchronousErrorHandling){let e=!oo;if(e&&(oo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=oo;if(oo=null,n)throw i}}else t()}function cE(t){Fn.useDeprecatedSynchronousErrorHandling&&oo&&(oo.errorThrown=!0,oo.error=t)}var so=class extends ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ju(e)&&e.add(this)):this.destination=xR}static create(e,n,i){return new Ti(e,n,i)}next(e){this.isStopped?bm(lE(e),this):this._next(e)}error(e){this.isStopped?bm(aE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?bm(sE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},MR=Function.prototype.bind;function wm(t,e){return MR.call(t,e)}var Em=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){$u(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){$u(i)}else $u(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){$u(n)}}},Ti=class extends so{constructor(e,n,i){super();let r;if(ce(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Fn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&wm(e.next,o),error:e.error&&wm(e.error,o),complete:e.complete&&wm(e.complete,o)}):r=e}this.destination=new Em(r)}};function $u(t){Fn.useDeprecatedSynchronousErrorHandling?cE(t):Uu(t)}function AR(t){throw t}function bm(t,e){let{onStoppedNotification:n}=Fn;n&&ps.setTimeout(()=>n(t,e))}var xR={closed:!0,next:ro,error:AR,complete:ro};var gs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(t){return t}function Dm(...t){return Cm(t)}function Cm(t){return t.length===0?Pt:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var fe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=RR(n)?n:new Ti(n,i,r);return ms(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=uE(i),new i((r,o)=>{let s=new Ti({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[gs](){return this}pipe(...n){return Cm(n)(this)}toPromise(n){return n=uE(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function uE(t){var e;return(e=t??Fn.Promise)!==null&&e!==void 0?e:Promise}function OR(t){return t&&ce(t.next)&&ce(t.error)&&ce(t.complete)}function RR(t){return t&&t instanceof so||OR(t)&&ju(t)}function Im(t){return ce(t?.lift)}function ye(t){return e=>{if(Im(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(t,e,n,i,r){return new Tm(t,e,n,i,r)}var Tm=class extends so{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function _s(){return ye((t,e)=>{let n=null;t._refCount++;let i=pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var ys=class extends fe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Im(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ft;let n=this.getSubject();e.add(this.source.subscribe(pe(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ft.EMPTY)}return e}refCount(){return _s()(this)}};var dE=fs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=(()=>{class t extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new Gu(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new dE}next(n){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?ym:(this.currentObservers=null,o.push(n),new ft(()=>{this.currentObservers=null,io(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new fe;return n.source=this,n}}return t.create=(e,n)=>new Gu(e,n),t})(),Gu=class extends Le{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:ym}};var pt=class extends Le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Dl={now(){return(Dl.delegate||Date).now()},delegate:void 0};var Hu=class extends Le{constructor(e=1/0,n=1/0,i=Dl){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var zu=class extends ft{constructor(e,n){super()}schedule(e,n=0){return this}};var Cl={setInterval(t,e,...n){let{delegate:i}=Cl;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Cl;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var vs=class extends zu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return Cl.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Cl.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,io(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ws=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};ws.now=Dl.now;var bs=class extends ws{constructor(e,n=ws.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var Es=new bs(vs),Sm=Es;var Wu=class extends vs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var qu=class extends bs{};var Mm=new qu(Wu);var Ct=new fe(t=>t.complete());function Ku(t){return t&&ce(t.schedule)}function Am(t){return t[t.length-1]}function nr(t){return ce(Am(t))?t.pop():void 0}function ei(t){return Ku(Am(t))?t.pop():void 0}function hE(t,e){return typeof Am(t)=="number"?t.pop():e}var Ds=t=>t&&typeof t.length=="number"&&typeof t!="function";function Qu(t){return ce(t?.then)}function Yu(t){return ce(t[gs])}function Ju(t){return Symbol.asyncIterator&&ce(t?.[Symbol.asyncIterator])}function Zu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function NR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Xu=NR();function ed(t){return ce(t?.[Xu])}function td(t){return W1(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield Nu(n.read());if(r)return yield Nu(void 0);yield yield Nu(i)}}finally{n.releaseLock()}})}function nd(t){return ce(t?.getReader)}function Oe(t){if(t instanceof fe)return t;if(t!=null){if(Yu(t))return PR(t);if(Ds(t))return kR(t);if(Qu(t))return FR(t);if(Ju(t))return fE(t);if(ed(t))return VR(t);if(nd(t))return LR(t)}throw Zu(t)}function PR(t){return new fe(e=>{let n=t[gs]();if(ce(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kR(t){return new fe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function FR(t){return new fe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Uu)})}function VR(t){return new fe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function fE(t){return new fe(e=>{BR(t,e).catch(n=>e.error(n))})}function LR(t){return fE(td(t))}function BR(t,e){var n,i,r,o;return z1(this,void 0,void 0,function*(){try{for(n=q1(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function on(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function Zt(t,e=0){return ye((n,i)=>{n.subscribe(pe(i,r=>on(i,t,()=>i.next(r),e),()=>on(i,t,()=>i.complete(),e),r=>on(i,t,()=>i.error(r),e)))})}function Vn(t,e=0){return ye((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function pE(t,e){return Oe(t).pipe(Vn(e),Zt(e))}function mE(t,e){return Oe(t).pipe(Vn(e),Zt(e))}function gE(t,e){return new fe(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function _E(t,e){return new fe(n=>{let i;return on(n,e,()=>{i=t[Xu](),on(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>ce(i?.return)&&i.return()})}function id(t,e){if(!t)throw new Error("Iterable cannot be null");return new fe(n=>{on(n,e,()=>{let i=t[Symbol.asyncIterator]();on(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function yE(t,e){return id(td(t),e)}function vE(t,e){if(t!=null){if(Yu(t))return pE(t,e);if(Ds(t))return gE(t,e);if(Qu(t))return mE(t,e);if(Ju(t))return id(t,e);if(ed(t))return _E(t,e);if(nd(t))return yE(t,e)}throw Zu(t)}function xe(t,e){return e?vE(t,e):Oe(t)}function te(...t){let e=ei(t);return xe(t,e)}function Cs(t,e){let n=ce(t)?t:()=>t,i=r=>r.error(n());return new fe(e?r=>e.schedule(i,0,r):i)}function xm(t){return!!t&&(t instanceof fe||ce(t.lift)&&ce(t.subscribe))}var Ln=fs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Il(t,e){let n=typeof e=="object";return new Promise((i,r)=>{let o=!1,s;t.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):n?i(e.defaultValue):r(new Ln)}})})}function wE(t){return t instanceof Date&&!isNaN(t)}function J(t,e){return ye((n,i)=>{let r=0;n.subscribe(pe(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:jR}=Array;function UR(t,e){return jR(e)?t(...e):t(e)}function Is(t){return J(e=>UR(t,e))}var{isArray:$R}=Array,{getPrototypeOf:GR,prototype:HR,keys:zR}=Object;function rd(t){if(t.length===1){let e=t[0];if($R(e))return{args:e,keys:null};if(WR(e)){let n=zR(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function WR(t){return t&&typeof t=="object"&&GR(t)===HR}function od(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function Tl(...t){let e=ei(t),n=nr(t),{args:i,keys:r}=rd(t);if(i.length===0)return xe([],e);let o=new fe(qR(i,e,r?s=>od(r,s):Pt));return n?o.pipe(Is(n)):o}function qR(t,e,n=Pt){return i=>{bE(e,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)bE(e,()=>{let u=xe(t[l],e),d=!1;u.subscribe(pe(i,f=>{o[l]=f,d||(d=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function bE(t,e,n){t?on(n,t,e):e()}function EE(t,e,n,i,r,o,s,a){let l=[],u=0,d=0,f=!1,m=()=>{f&&!l.length&&!u&&e.complete()},_=M=>u<i?D(M):l.push(M),D=M=>{o&&e.next(M),u++;let A=!1;Oe(n(M,d++)).subscribe(pe(e,k=>{r?.(k),o?_(k):e.next(k)},()=>{A=!0},void 0,()=>{if(A)try{for(u--;l.length&&u<i;){let k=l.shift();s?on(e,s,()=>D(k)):D(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(pe(e,_,()=>{f=!0,m()})),()=>{a?.()}}function at(t,e,n=1/0){return ce(e)?at((i,r)=>J((o,s)=>e(i,o,r,s))(Oe(t(i,r))),n):(typeof e=="number"&&(n=e),ye((i,r)=>EE(i,r,t,n)))}function Sl(t=1/0){return at(Pt,t)}function DE(){return Sl(1)}function ir(...t){return DE()(xe(t,ei(t)))}function sd(t){return new fe(e=>{Oe(t()).subscribe(e)})}function Om(...t){let e=nr(t),{args:n,keys:i}=rd(t),r=new fe(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let d=0;d<s;d++){let f=!1;Oe(n[d]).subscribe(pe(o,m=>{f||(f=!0,u--),a[d]=m},()=>l--,void 0,()=>{(!l||!f)&&(u||o.next(i?od(i,a):a),o.complete())}))}});return e?r.pipe(Is(e)):r}var KR=["addListener","removeListener"],QR=["addEventListener","removeEventListener"],YR=["on","off"];function Dn(t,e,n,i){if(ce(n)&&(i=n,n=void 0),i)return Dn(t,e,n).pipe(Is(i));let[r,o]=XR(t)?QR.map(s=>a=>t[s](e,a,n)):JR(t)?KR.map(CE(t,e)):ZR(t)?YR.map(CE(t,e)):[];if(!r&&Ds(t))return at(s=>Dn(s,e,n))(Oe(t));if(!r)throw new TypeError("Invalid event target");return new fe(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function CE(t,e){return n=>i=>t[n](e,i)}function JR(t){return ce(t.addListener)&&ce(t.removeListener)}function ZR(t){return ce(t.on)&&ce(t.off)}function XR(t){return ce(t.addEventListener)&&ce(t.removeEventListener)}function Rm(t=0,e,n=Sm){let i=-1;return e!=null&&(Ku(e)?n=e:i=e),new fe(r=>{let o=wE(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function ad(...t){let e=ei(t),n=hE(t,1/0),i=t;return i.length?i.length===1?Oe(i[0]):Sl(n)(xe(i,e)):Ct}var{isArray:eN}=Array;function ld(t){return t.length===1&&eN(t[0])?t[0]:t}function rt(t,e){return ye((n,i)=>{let r=0;n.subscribe(pe(i,o=>t.call(e,o,r++)&&i.next(o)))})}function Nm(...t){return t=ld(t),t.length===1?Oe(t[0]):new fe(tN(t))}function tN(t){return e=>{let n=[];for(let i=0;n&&!e.closed&&i<t.length;i++)n.push(Oe(t[i]).subscribe(pe(e,r=>{if(n){for(let o=0;o<n.length;o++)o!==i&&n[o].unsubscribe();n=null}e.next(r)})))}}function Ml(...t){let e=nr(t),n=ld(t);return n.length?new fe(i=>{let r=n.map(()=>[]),o=n.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<n.length;s++)Oe(n[s]).subscribe(pe(i,a=>{if(r[s].push(a),r.every(l=>l.length)){let l=r.map(u=>u.shift());i.next(e?e(...l):l),r.some((u,d)=>!u.length&&o[d])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):Ct}function rr(t){return ye((e,n)=>{let i=null,r=!1,o;i=e.subscribe(pe(n,void 0,void 0,s=>{o=Oe(t(s,rr(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function IE(t,e,n,i,r){return(o,s)=>{let a=n,l=e,u=0;o.subscribe(pe(s,d=>{let f=u++;l=a?t(l,d,f):(a=!0,d),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function or(t,e){return ce(e)?at(t,e,1):at(t,1)}function sr(t){return ye((e,n)=>{let i=!1;e.subscribe(pe(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function sn(t){return t<=0?()=>Ct:ye((e,n)=>{let i=0;e.subscribe(pe(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function Pm(t){return J(()=>t)}function cd(t,e=Pt){return t=t??nN,ye((n,i)=>{let r,o=!0;n.subscribe(pe(i,s=>{let a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function nN(t,e){return t===e}function ud(t=iN){return ye((e,n)=>{let i=!1;e.subscribe(pe(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function iN(){return new Ln}function km(...t){return e=>ir(e,te(...t))}function Si(t){return ye((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Cn(t,e){let n=arguments.length>=2;return i=>i.pipe(t?rt((r,o)=>t(r,o,i)):Pt,sn(1),n?sr(e):ud(()=>new Ln))}function Ts(t){return t<=0?()=>Ct:ye((e,n)=>{let i=[];e.subscribe(pe(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function Fm(t,e){let n=arguments.length>=2;return i=>i.pipe(t?rt((r,o)=>t(r,o,i)):Pt,Ts(1),n?sr(e):ud(()=>new Ln))}function Al(){return ye((t,e)=>{let n,i=!1;t.subscribe(pe(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function ao(t,e){return ye(IE(t,e,arguments.length>=2,!0))}function TE(t={}){let{connector:e=()=>new Le,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,l,u=0,d=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},_=()=>{m(),s=l=void 0,d=f=!1},D=()=>{let M=s;_(),M?.unsubscribe()};return ye((M,A)=>{u++,!f&&!d&&m();let k=l=l??e();A.add(()=>{u--,u===0&&!f&&!d&&(a=Vm(D,r))}),k.subscribe(A),!s&&u>0&&(s=new Ti({next:q=>k.next(q),error:q=>{f=!0,m(),a=Vm(_,n,q),k.error(q)},complete:()=>{d=!0,m(),a=Vm(_,i),k.complete()}}),Oe(M).subscribe(s))})(o)}}function Vm(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Ti({next:()=>{i.unsubscribe(),t()}});return Oe(e(...n)).subscribe(i)}function Ss(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,TE({connector:()=>new Hu(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function ar(...t){let e=ei(t);return ye((n,i)=>{(e?ir(t,n,e):ir(t,n)).subscribe(i)})}function Ge(t,e){return ye((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(pe(i,l=>{r?.unsubscribe();let u=0,d=o++;Oe(t(l,d)).subscribe(r=pe(i,f=>i.next(e?e(l,f,d,u++):f),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function dd(t,e){return ce(e)?Ge(()=>t,e):Ge(()=>t)}function zt(t){return ye((e,n)=>{Oe(t).subscribe(pe(n,()=>n.complete(),ro)),!n.closed&&e.subscribe(n)})}function lt(t,e,n){let i=ce(t)||e||n?{next:t,error:e,complete:n}:t;return i?ye((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(pe(o,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),o.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):Pt}function hd(...t){let e=nr(t);return ye((n,i)=>{let r=t.length,o=new Array(r),s=t.map(()=>!1),a=!1;for(let l=0;l<r;l++)Oe(t[l]).subscribe(pe(i,u=>{o[l]=u,!a&&!s[l]&&(s[l]=!0,(a=s.every(Pt))&&(s=null))},ro));n.subscribe(pe(i,l=>{if(a){let u=[l,...o];i.next(e?e(...u):u)}}))})}var cD="https://g.co/ng/security#xss",se=class extends Error{constructor(e,n){super(jd(e,n)),this.code=e}};function jd(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Gl(t){return{toString:t}.toString()}var fd="__parameters__";function rN(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function uD(t,e,n){return Gl(()=>{let i=rN(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,u,d){let f=l.hasOwnProperty(fd)?l[fd]:Object.defineProperty(l,fd,{value:[]})[fd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var xl=globalThis;function ze(t){for(let e in t)if(t[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function oN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function en(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(en).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Xm(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var sN=ze({__forward_ref__:ze});function Wt(t){return t.__forward_ref__=Wt,t.toString=function(){return en(this())},t}function Xt(t){return dD(t)?t():t}function dD(t){return typeof t=="function"&&t.hasOwnProperty(sN)&&t.__forward_ref__===Wt}function Z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ut(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ud(t){return SE(t,fD)||SE(t,pD)}function hD(t){return Ud(t)!==null}function SE(t,e){return t.hasOwnProperty(e)?t[e]:null}function aN(t){let e=t&&(t[fD]||t[pD]);return e||null}function ME(t){return t&&(t.hasOwnProperty(AE)||t.hasOwnProperty(lN))?t[AE]:null}var fD=ze({\u0275prov:ze}),AE=ze({\u0275inj:ze}),pD=ze({ngInjectableDef:ze}),lN=ze({ngInjectorDef:ze}),Q=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function mD(t){return t&&!!t.\u0275providers}var cN=ze({\u0275cmp:ze}),uN=ze({\u0275dir:ze}),dN=ze({\u0275pipe:ze}),hN=ze({\u0275mod:ze}),Ed=ze({\u0275fac:ze}),Ol=ze({__NG_ELEMENT_ID__:ze}),xE=ze({__NG_ENV_ID__:ze});function Ns(t){return typeof t=="string"?t:t==null?"":String(t)}function fN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ns(t)}function pN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new se(-200,t)}function Yg(t,e){throw new se(-201,!1)}var Ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ce||{}),eg;function gD(){return eg}function In(t){let e=eg;return eg=t,e}function _D(t,e,n){let i=Ud(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Ce.Optional)return null;if(e!==void 0)return e;Yg(t,"Injector")}var mN={},Rl=mN,tg="__NG_DI_FLAG__",Dd="ngTempTokenPath",gN="ngTokenPath",_N=/\n/gm,yN="\u0275",OE="__source",Os;function vN(){return Os}function lr(t){let e=Os;return Os=t,e}function wN(t,e=Ce.Default){if(Os===void 0)throw new se(-203,!1);return Os===null?_D(t,void 0,e):Os.get(t,e&Ce.Optional?null:void 0,e)}function $(t,e=Ce.Default){return(gD()||wN)(Xt(t),e)}function V(t,e=Ce.Default){return $(t,$d(e))}function $d(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ng(t){let e=[];for(let n=0;n<t.length;n++){let i=Xt(t[n]);if(Array.isArray(i)){if(i.length===0)throw new se(900,!1);let r,o=Ce.Default;for(let s=0;s<i.length;s++){let a=i[s],l=bN(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push($(r,o))}else e.push($(i))}return e}function yD(t,e){return t[tg]=e,t.prototype[tg]=e,t}function bN(t){return t[tg]}function EN(t,e,n,i){let r=t[Dd];throw e[OE]&&r.unshift(e[OE]),t.message=DN(`
`+t.message,r,n,i),t[gN]=r,t[Dd]=null,t}function DN(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==yN?t.slice(2):t;let r=en(e);if(Array.isArray(e))r=e.map(en).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):en(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(_N,`
  `)}`}var Ni=yD(uD("Optional"),8);var Jg=yD(uD("SkipSelf"),4);function Ps(t,e){let n=t.hasOwnProperty(Ed);return n?t[Ed]:null}function CN(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function IN(t){return t.flat(Number.POSITIVE_INFINITY)}function Zg(t,e){t.forEach(n=>Array.isArray(n)?Zg(n,e):e(n))}function vD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Cd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function TN(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function SN(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function Xg(t,e,n){let i=Hl(t,e);return i>=0?t[i|1]=n:(i=~i,SN(t,i,e,n)),i}function Lm(t,e){let n=Hl(t,e);if(n>=0)return t[n|1]}function Hl(t,e){return MN(t,e,1)}function MN(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var ks={},an=[],Fs=new Q(""),wD=new Q("",-1),bD=new Q(""),Id=class{get(e,n=Rl){if(n===Rl){let i=new Error(`NullInjectorError: No provider for ${en(e)}!`);throw i.name="NullInjectorError",i}return n}},ED=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ED||{}),ii=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ii||{}),It=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(It||{});function AN(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function ig(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];ON(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function xN(t){return t===3||t===4||t===6}function ON(t){return t.charCodeAt(0)===64}function Nl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?RE(t,n,r,null,e[++i]):RE(t,n,r,null,null))}}return t}function RE(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var DD="ng-template";function RN(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&AN(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(e_(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function e_(t){return t.type===4&&t.value!==DD}function NN(t,e,n){let i=t.type===4&&!n?DD:t.value;return e===i}function PN(t,e,n){let i=4,r=t.attrs,o=r!==null?VN(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Bn(i)&&!Bn(l))return!1;if(s&&Bn(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!NN(t,l,n)||l===""&&e.length===1){if(Bn(i))return!1;s=!0}}else if(i&8){if(r===null||!RN(t,r,l,n)){if(Bn(i))return!1;s=!0}}else{let u=e[++a],d=kN(l,r,e_(t),n);if(d===-1){if(Bn(i))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=r[d+1].toLowerCase(),i&2&&u!==f){if(Bn(i))return!1;s=!0}}}}return Bn(i)||s}function Bn(t){return(t&1)===0}function kN(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return LN(e,t)}function CD(t,e,n=!1){for(let i=0;i<e.length;i++)if(PN(t,e[i],n))return!0;return!1}function FN(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function VN(t){for(let e=0;e<t.length;e++){let n=t[e];if(xN(n))return e}return t.length}function LN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function BN(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function NE(t,e){return t?":not("+e.trim()+")":e}function jN(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Bn(s)&&(e+=NE(o,r),r=""),i=s,o=o||!Bn(i);n++}return r!==""&&(e+=NE(o,r)),e}function UN(t){return t.map(jN).join(",")}function $N(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!Bn(r))break;r=o}i++}return{attrs:e,classes:n}}function Ie(t){return Gl(()=>{let e=AD(t),n=ke(Y({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ED.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ii.Emulated,styles:t.styles||an,_:null,schemas:t.schemas||null,tView:null,id:""});xD(n);let i=t.dependencies;return n.directiveDefs=kE(i,!1),n.pipeDefs=kE(i,!0),n.id=zN(n),n})}function GN(t){return ur(t)||ID(t)}function HN(t){return t!==null}function dt(t){return Gl(()=>({type:t.type,bootstrap:t.bootstrap||an,declarations:t.declarations||an,imports:t.imports||an,exports:t.exports||an,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function PE(t,e){if(t==null)return ks;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a=It.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(n[o]=a!==It.None?[i,a]:i,e[o]=s):n[o]=i}return n}function Ue(t){return Gl(()=>{let e=AD(t);return xD(e),e})}function ur(t){return t[cN]||null}function ID(t){return t[uN]||null}function TD(t){return t[dN]||null}function SD(t){let e=ur(t)||ID(t)||TD(t);return e!==null?e.standalone:!1}function MD(t,e){let n=t[hN]||null;if(!n&&e===!0)throw new Error(`Type ${en(t)} does not have '\u0275mod' property.`);return n}function AD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ks,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||an,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:PE(t.inputs,e),outputs:PE(t.outputs),debugInfo:null}}function xD(t){t.features?.forEach(e=>e(t))}function kE(t,e){if(!t)return null;let n=e?TD:GN;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(HN)}function zN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yo(t){return{\u0275providers:t}}function t_(...t){return{\u0275providers:OD(!0,t),\u0275fromNgModule:!0}}function OD(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return Zg(e,s=>{let a=s;rg(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&RD(r,o),n}function RD(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];n_(r,o=>{e(o,i)})}}function rg(t,e,n,i){if(t=Xt(t),!t)return!1;let r=null,o=ME(t),s=!o&&ur(t);if(!o&&!s){let l=t.ngModule;if(o=ME(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)rg(u,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{Zg(o.imports,d=>{rg(d,e,n,i)&&(u||=[],u.push(d))})}finally{}u!==void 0&&RD(u,e)}if(!a){let u=Ps(r)||(()=>new r);e({provide:r,useFactory:u,deps:an},r),e({provide:bD,useValue:r,multi:!0},r),e({provide:Fs,useValue:()=>$(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=t;n_(l,d=>{e(d,u)})}}else return!1;return r!==t&&t.providers!==void 0}function n_(t,e){for(let n of t)mD(n)&&(n=n.\u0275providers),Array.isArray(n)?n_(n,e):e(n)}var WN=ze({provide:String,useValue:ze});function ND(t){return t!==null&&typeof t=="object"&&WN in t}function qN(t){return!!(t&&t.useExisting)}function KN(t){return!!(t&&t.useFactory)}function Vs(t){return typeof t=="function"}function QN(t){return!!t.useClass}var Gd=new Q(""),gd={},YN={},Bm;function Hd(){return Bm===void 0&&(Bm=new Id),Bm}var kt=class{},Pl=class extends kt{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sg(e,s=>this.processProvider(s)),this.records.set(wD,Ms(void 0,this)),r.has("environment")&&this.records.set(kt,Ms(void 0,this));let o=this.records.get(Gd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(bD,an,Ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ve(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ve(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=lr(this),i=In(void 0),r;try{return e()}finally{lr(n),In(i)}}get(e,n=Rl,i=Ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xE))return e[xE](this);i=$d(i);let r,o=lr(this),s=In(void 0);try{if(!(i&Ce.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=tP(e)&&Ud(e);u&&this.injectableDefInScope(u)?l=Ms(og(e),gd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&Ce.Self?Hd():this.parent;return n=i&Ce.Optional&&n===Rl?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Dd]=a[Dd]||[]).unshift(en(e)),o)throw a;return EN(a,e,"R3InjectorError",this.source)}else throw a}finally{In(s),lr(o)}}resolveInjectorInitializers(){let e=Ve(null),n=lr(this),i=In(void 0),r;try{let o=this.get(Fs,an,Ce.Self);for(let s of o)s()}finally{lr(n),In(i),Ve(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(en(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(e){e=Xt(e);let n=Vs(e)?e:Xt(e&&e.provide),i=ZN(e);if(!Vs(e)&&e.multi===!0){let r=this.records.get(n);r||(r=Ms(void 0,gd,!0),r.factory=()=>ng(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Ve(null);try{return n.value===gd&&(n.value=YN,n.value=n.factory()),typeof n.value=="object"&&n.value&&eP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ve(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Xt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function og(t){let e=Ud(t),n=e!==null?e.factory:Ps(t);if(n!==null)return n;if(t instanceof Q)throw new se(204,!1);if(t instanceof Function)return JN(t);throw new se(204,!1)}function JN(t){if(t.length>0)throw new se(204,!1);let n=aN(t);return n!==null?()=>n.factory(t):()=>new t}function ZN(t){if(ND(t))return Ms(void 0,t.useValue);{let e=PD(t);return Ms(e,gd)}}function PD(t,e,n){let i;if(Vs(t)){let r=Xt(t);return Ps(r)||og(r)}else if(ND(t))i=()=>Xt(t.useValue);else if(KN(t))i=()=>t.useFactory(...ng(t.deps||[]));else if(qN(t))i=()=>$(Xt(t.useExisting));else{let r=Xt(t&&(t.useClass||t.provide));if(XN(t))i=()=>new r(...ng(t.deps));else return Ps(r)||og(r)}return i}function Ms(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function XN(t){return!!t.deps}function eP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function tP(t){return typeof t=="function"||typeof t=="object"&&t instanceof Q}function sg(t,e){for(let n of t)Array.isArray(n)?sg(n,e):n&&mD(n)?sg(n.\u0275providers,e):e(n)}function Pi(t,e){t instanceof Pl&&t.assertNotDestroyed();let n,i=lr(t),r=In(void 0);try{return e()}finally{lr(i),In(r)}}function nP(){return gD()!==void 0||vN()!=null}function iP(t){return typeof t=="function"}var ki=0,Ee=1,me=2,Ft=3,Un=4,mn=5,kl=6,Fl=7,$n=8,Ls=9,Gn=10,ct=11,Vl=12,FE=13,Gs=14,Hn=15,zl=16,As=17,Mi=18,zd=19,kD=20,cr=21,jm=22,uo=23,zn=25,FD=1;var ho=7,Td=8,Bs=9,pn=10,i_=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(i_||{});function lo(t){return Array.isArray(t)&&typeof t[FD]=="object"}function Fi(t){return Array.isArray(t)&&t[FD]===!0}function r_(t){return(t.flags&4)!==0}function Wd(t){return t.componentOffset>-1}function qd(t){return(t.flags&1)===1}function dr(t){return!!t.template}function rP(t){return(t[me]&512)!==0}var ag=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function VD(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function ln(){return LD}function LD(t){return t.type.prototype.ngOnChanges&&(t.setInput=sP),oP}ln.ngInherit=!0;function oP(){let t=jD(this),e=t?.current;if(e){let n=t.previous;if(n===ks)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function sP(t,e,n,i,r){let o=this.declaredInputs[i],s=jD(t)||aP(t,{previous:ks,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new ag(u&&u.currentValue,n,l===ks),VD(t,e,r,n)}var BD="__ngSimpleChanges__";function jD(t){return t[BD]||null}function aP(t,e){return t[BD]=e}var VE=null;var ti=function(t,e,n){VE?.(t,e,n)},UD="svg",lP="math",cP=!1;function uP(){return cP}function ri(t){for(;Array.isArray(t);)t=t[ki];return t}function $D(t,e){return ri(e[t])}function Tn(t,e){return ri(e[t.index])}function GD(t,e){return t.data[e]}function dP(t,e){return t[e]}function pr(t,e){let n=e[t];return lo(n)?n:n[ki]}function hP(t){return(t[me]&4)===4}function o_(t){return(t[me]&128)===128}function fP(t){return Fi(t[Ft])}function js(t,e){return e==null?null:t[e]}function HD(t){t[As]=0}function pP(t){t[me]&1024||(t[me]|=1024,o_(t)&&Ll(t))}function mP(t,e){for(;t>0;)e=e[Gs],t--;return e}function s_(t){return!!(t[me]&9216||t[uo]?.dirty)}function lg(t){t[Gn].changeDetectionScheduler?.notify(1),s_(t)?Ll(t):t[me]&64&&(uP()?(t[me]|=1024,Ll(t)):t[Gn].changeDetectionScheduler?.notify())}function Ll(t){t[Gn].changeDetectionScheduler?.notify();let e=Bl(t);for(;e!==null&&!(e[me]&8192||(e[me]|=8192,!o_(e)));)e=Bl(e)}function zD(t,e){if((t[me]&256)===256)throw new se(911,!1);t[cr]===null&&(t[cr]=[]),t[cr].push(e)}function gP(t,e){if(t[cr]===null)return;let n=t[cr].indexOf(e);n!==-1&&t[cr].splice(n,1)}function Bl(t){let e=t[Ft];return Fi(e)?e[Ft]:e}var ve={lFrame:ZD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function _P(){return ve.lFrame.elementDepthCount}function yP(){ve.lFrame.elementDepthCount++}function vP(){ve.lFrame.elementDepthCount--}function WD(){return ve.bindingsEnabled}function qD(){return ve.skipHydrationRootTNode!==null}function wP(t){return ve.skipHydrationRootTNode===t}function bP(){ve.skipHydrationRootTNode=null}function Me(){return ve.lFrame.lView}function Tt(){return ve.lFrame.tView}function ue(t){return ve.lFrame.contextLView=t,t[$n]}function de(t){return ve.lFrame.contextLView=null,t}function cn(){let t=KD();for(;t!==null&&t.type===64;)t=t.parent;return t}function KD(){return ve.lFrame.currentTNode}function EP(){let t=ve.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function vo(t,e){let n=ve.lFrame;n.currentTNode=t,n.isParent=e}function a_(){return ve.lFrame.isParent}function l_(){ve.lFrame.isParent=!1}function DP(){return ve.lFrame.contextLView}function c_(){let t=ve.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function CP(){return ve.lFrame.bindingIndex}function IP(t){return ve.lFrame.bindingIndex=t}function Kd(){return ve.lFrame.bindingIndex++}function u_(t){let e=ve.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function TP(){return ve.lFrame.inI18n}function SP(t,e){let n=ve.lFrame;n.bindingIndex=n.bindingRootIndex=t,cg(e)}function MP(){return ve.lFrame.currentDirectiveIndex}function cg(t){ve.lFrame.currentDirectiveIndex=t}function AP(t){let e=ve.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function QD(){return ve.lFrame.currentQueryIndex}function d_(t){ve.lFrame.currentQueryIndex=t}function xP(t){let e=t[Ee];return e.type===2?e.declTNode:e.type===1?t[mn]:null}function YD(t,e,n){if(n&Ce.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&Ce.Host);)if(r=xP(o),r===null||(o=o[Gs],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=ve.lFrame=JD();return i.currentTNode=e,i.lView=t,!0}function h_(t){let e=JD(),n=t[Ee];ve.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function JD(){let t=ve.lFrame,e=t===null?null:t.child;return e===null?ZD(t):e}function ZD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function XD(){let t=ve.lFrame;return ve.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var eC=XD;function f_(){let t=XD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function OP(t){return(ve.lFrame.contextLView=mP(t,ve.lFrame.contextLView))[$n]}function mr(){return ve.lFrame.selectedIndex}function fo(t){ve.lFrame.selectedIndex=t}function p_(){let t=ve.lFrame;return GD(t.tView,t.selectedIndex)}function tC(){ve.lFrame.currentNamespace=UD}function nC(){RP()}function RP(){ve.lFrame.currentNamespace=null}function NP(){return ve.lFrame.currentNamespace}var iC=!0;function Qd(){return iC}function Yd(t){iC=t}function PP(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=LD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Jd(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function _d(t,e,n){rC(t,e,3,n)}function yd(t,e,n,i){(t[me]&3)===n&&rC(t,e,n,i)}function Um(t,e){let n=t[me];(n&3)===e&&(n&=16383,n+=1,t[me]=n)}function rC(t,e,n,i){let r=i!==void 0?t[As]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(t[As]+=65536),(a<o||o==-1)&&(kP(t,n,e,l),t[As]=(t[As]&4294901760)+l+2),l++}function LE(t,e){ti(4,t,e);let n=Ve(null);try{e.call(t)}finally{Ve(n),ti(5,t,e)}}function kP(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[me]>>14<t[As]>>16&&(t[me]&3)===e&&(t[me]+=16384,LE(a,o)):LE(a,o)}var Rs=-1,po=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function FP(t){return t instanceof po}function VP(t){return(t.flags&8)!==0}function LP(t){return(t.flags&16)!==0}function oC(t){return t!==Rs}function Sd(t){return t&32767}function BP(t){return t>>16}function Md(t,e){let n=BP(t),i=e;for(;n>0;)i=i[Gs],n--;return i}var ug=!0;function BE(t){let e=ug;return ug=t,e}var jP=256,sC=jP-1,aC=5,UP=0,ni={};function $P(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Ol)&&(i=n[Ol]),i==null&&(i=n[Ol]=UP++);let r=i&sC,o=1<<r;e.data[t+(r>>aC)]|=o}function Ad(t,e){let n=lC(t,e);if(n!==-1)return n;let i=e[Ee];i.firstCreatePass&&(t.injectorIndex=e.length,$m(i.data,t),$m(e,null),$m(i.blueprint,null));let r=m_(t,e),o=t.injectorIndex;if(oC(r)){let s=Sd(r),a=Md(r,e),l=a[Ee].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=r,o}function $m(t,e){t.push(0,0,0,0,0,0,0,0,e)}function lC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function m_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=fC(r),i===null)return Rs;if(n++,r=r[Gs],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Rs}function dg(t,e,n){$P(t,e,n)}function cC(t,e,n){if(n&Ce.Optional||t!==void 0)return t;Yg(e,"NodeInjector")}function uC(t,e,n,i){if(n&Ce.Optional&&i===void 0&&(i=null),!(n&(Ce.Self|Ce.Host))){let r=t[Ls],o=In(void 0);try{return r?r.get(e,i,n&Ce.Optional):_D(e,i,n&Ce.Optional)}finally{In(o)}}return cC(i,e,n)}function dC(t,e,n,i=Ce.Default,r){if(t!==null){if(e[me]&2048&&!(i&Ce.Self)){let s=WP(t,e,n,i,ni);if(s!==ni)return s}let o=hC(t,e,n,i,ni);if(o!==ni)return o}return uC(e,n,i,r)}function hC(t,e,n,i,r){let o=HP(n);if(typeof o=="function"){if(!YD(e,t,i))return i&Ce.Host?cC(r,n,i):uC(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&Ce.Optional))Yg(n);else return s}finally{eC()}}else if(typeof o=="number"){let s=null,a=lC(t,e),l=Rs,u=i&Ce.Host?e[Hn][mn]:null;for((a===-1||i&Ce.SkipSelf)&&(l=a===-1?m_(t,e):e[a+8],l===Rs||!UE(i,!1)?a=-1:(s=e[Ee],a=Sd(l),e=Md(l,e)));a!==-1;){let d=e[Ee];if(jE(o,a,d.data)){let f=GP(a,e,n,s,i,u);if(f!==ni)return f}l=e[a+8],l!==Rs&&UE(i,e[Ee].data[a+8]===u)&&jE(o,a,e)?(s=d,a=Sd(l),e=Md(l,e)):a=-1}}return r}function GP(t,e,n,i,r,o){let s=e[Ee],a=s.data[t+8],l=i==null?Wd(a)&&ug:i!=s&&(a.type&3)!==0,u=r&Ce.Host&&o===a,d=vd(a,s,n,l,u);return d!==null?mo(e,s,d,a):ni}function vd(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,u=t.directiveEnd,d=o>>20,f=i?a:a+d,m=r?a+d:u;for(let _=f;_<m;_++){let D=s[_];if(_<l&&n===D||_>=l&&D.type===n)return _}if(r){let _=s[l];if(_&&dr(_)&&_.type===n)return l}return null}function mo(t,e,n,i){let r=t[n],o=e.data;if(FP(r)){let s=r;s.resolving&&pN(fN(o[n]));let a=BE(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?In(s.injectImpl):null,d=YD(t,i,Ce.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&PP(n,o[n],e)}finally{u!==null&&In(u),BE(a),s.resolving=!1,eC()}}return r}function HP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ol)?t[Ol]:void 0;return typeof e=="number"?e>=0?e&sC:zP:e}function jE(t,e,n){let i=1<<t;return!!(n[e+(t>>aC)]&i)}function UE(t,e){return!(t&Ce.Self)&&!(t&Ce.Host&&e)}var co=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return dC(this._tNode,this._lView,e,$d(i),n)}};function zP(){return new co(cn(),Me())}function gn(t){return Gl(()=>{let e=t.prototype.constructor,n=e[Ed]||hg(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[Ed]||hg(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function hg(t){return dD(t)?()=>{let e=hg(Xt(t));return e&&e()}:Ps(t)}function WP(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[me]&2048&&!(s[me]&512);){let a=hC(o,s,n,i|Ce.Self,ni);if(a!==ni)return a;let l=o.parent;if(!l){let u=s[kD];if(u){let d=u.get(n,ni,i);if(d!==ni)return d}l=fC(s),s=s[Gs]}o=l}return r}function fC(t){let e=t[Ee],n=e.type;return n===2?e.declTNode:n===1?t[mn]:null}function $E(t,e=null,n=null,i){let r=pC(t,e,n,i);return r.resolveInjectorInitializers(),r}function pC(t,e=null,n=null,i,r=new Set){let o=[n||an,t_(t)];return i=i||(typeof t=="object"?void 0:en(t)),new Pl(o,e||Hd(),i||null,r)}var Wn=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return $E({name:""},r,i,"");{let o=i.name??"";return $E({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=Rl,e.NULL=new Id,e.\u0275prov=Z({token:e,providedIn:"any",factory:()=>$(wD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var qP="ngOriginalError";function Gm(t){return t[qP]}var Ai=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Gm(e);for(;n&&Gm(n);)n=Gm(n);return n||null}},mC=new Q("",{providedIn:"root",factory:()=>V(Ai).handleError.bind(void 0)}),g_=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=KP,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),fg=class extends g_{constructor(e){super(),this._lView=e}onDestroy(e){return zD(this._lView,e),()=>gP(this._lView,e)}};function KP(){return new fg(Me())}function QP(){return Hs(cn(),Me())}function Hs(t,e){return new Vt(Tn(t,e))}var Vt=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=QP;let t=e;return t})();function YP(t){return t instanceof Vt?t.nativeElement:t}var pg=class extends Le{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,nP()&&(this.destroyRef=V(g_,{optional:!0})??void 0)}emit(e){let n=Ve(null);try{super.next(e)}finally{Ve(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Hm(o),r&&(r=Hm(r)),s&&(s=Hm(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof ft&&e.add(a),a}};function Hm(t){return e=>{setTimeout(t,void 0,e)}}var ge=pg;function JP(){return this._results[Symbol.iterator]()}var mg=class t{get changes(){return this._changes??=new ge}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=JP)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=IN(e);(this._changesDetected=!CN(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function gC(t){return(t.flags&128)===128}var _C=new Map,ZP=0;function XP(){return ZP++}function ek(t){_C.set(t[zd],t)}function tk(t){_C.delete(t[zd])}var GE="__ngContext__";function hr(t,e){lo(e)?(t[GE]=e[zd],ek(e)):t[GE]=e}function yC(t){return wC(t[Vl])}function vC(t){return wC(t[Un])}function wC(t){for(;t!==null&&!Fi(t);)t=t[Un];return t}var gg;function bC(t){gg=t}function nk(){if(gg!==void 0)return gg;if(typeof document<"u")return document;throw new se(210,!1)}var __=new Q("",{providedIn:"root",factory:()=>ik}),ik="ng",y_=new Q(""),Lt=new Q("",{providedIn:"platform",factory:()=>"unknown"});var v_=new Q("",{providedIn:"root",factory:()=>nk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var rk="h",ok="b";var sk=()=>null;function w_(t,e,n=!1){return sk(t,e,n)}var EC=!1,ak=new Q("",{providedIn:"root",factory:()=>EC});var xd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cD})`}};function Wl(t){return t instanceof xd?t.changingThisBreaksApplicationSecurity:t}function DC(t,e){let n=lk(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${cD})`)}return n===e}function lk(t){return t instanceof xd&&t.getTypeName()||null}var ck=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function CC(t){return t=String(t),t.match(ck)?t:"unsafe:"+t}var b_=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(b_||{});function Zd(t){let e=uk();return e?e.sanitize(b_.URL,t)||"":DC(t,"URL")?Wl(t):CC(Ns(t))}function uk(){let t=Me();return t&&t[Gn].sanitizer}var dk=/^>|^->|<!--|-->|--!>|<!-$/g,hk=/(<|>)/g,fk="\u200B$1\u200B";function pk(t){return t.replace(dk,e=>e.replace(hk,fk))}function IC(t){return t instanceof Function?t():t}var oi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(oi||{}),mk;function E_(t,e){return mk(t,e)}function xs(t,e,n,i,r){if(i!=null){let o,s=!1;Fi(i)?o=i:lo(i)&&(s=!0,i=i[ki]);let a=ri(i);t===0&&n!==null?r==null?OC(e,n,a):Od(e,n,a,r||null,!0):t===1&&n!==null?Od(e,n,a,r||null,!0):t===2?Ok(e,a,s):t===3&&e.destroyNode(a),o!=null&&Nk(e,t,o,n,r)}}function gk(t,e){return t.createText(e)}function _k(t,e,n){t.setValue(e,n)}function yk(t,e){return t.createComment(pk(e))}function TC(t,e,n){return t.createElement(e,n)}function vk(t,e){SC(t,e),e[ki]=null,e[mn]=null}function wk(t,e,n,i,r,o){i[ki]=r,i[mn]=e,eh(t,i,n,1,r,o)}function SC(t,e){e[Gn].changeDetectionScheduler?.notify(1),eh(t,e,e[ct],2,null,null)}function bk(t){let e=t[Vl];if(!e)return zm(t[Ee],t);for(;e;){let n=null;if(lo(e))n=e[Vl];else{let i=e[pn];i&&(n=i)}if(!n){for(;e&&!e[Un]&&e!==t;)lo(e)&&zm(e[Ee],e),e=e[Ft];e===null&&(e=t),lo(e)&&zm(e[Ee],e),n=e&&e[Un]}e=n}}function Ek(t,e,n,i){let r=pn+i,o=n.length;i>0&&(n[r-1][Un]=e),i<o-pn?(e[Un]=n[r],vD(n,pn+i,e)):(n.push(e),e[Un]=null),e[Ft]=n;let s=e[zl];s!==null&&n!==s&&Dk(s,e);let a=e[Mi];a!==null&&a.insertView(t),lg(e),e[me]|=128}function Dk(t,e){let n=t[Bs],r=e[Ft][Ft][Hn];e[Hn]!==r&&(t[me]|=i_.HasTransplantedViews),n===null?t[Bs]=[e]:n.push(e)}function MC(t,e){let n=t[Bs],i=n.indexOf(e);n.splice(i,1)}function _g(t,e){if(t.length<=pn)return;let n=pn+e,i=t[n];if(i){let r=i[zl];r!==null&&r!==t&&MC(r,i),e>0&&(t[n-1][Un]=i[Un]);let o=Cd(t,pn+e);vk(i[Ee],i);let s=o[Mi];s!==null&&s.detachView(o[Ee]),i[Ft]=null,i[Un]=null,i[me]&=-129}return i}function AC(t,e){if(!(e[me]&256)){let n=e[ct];n.destroyNode&&eh(t,e,n,3,null,null),bk(e)}}function zm(t,e){if(e[me]&256)return;let n=Ve(null);try{e[me]&=-129,e[me]|=256,e[uo]&&iE(e[uo]),Ik(t,e),Ck(t,e),e[Ee].type===1&&e[ct].destroy();let i=e[zl];if(i!==null&&Fi(e[Ft])){i!==e[Ft]&&MC(i,e);let r=e[Mi];r!==null&&r.detachView(t)}tk(e)}finally{Ve(n)}}function Ck(t,e){let n=t.cleanup,i=e[Fl];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(e[Fl]=null);let r=e[cr];if(r!==null){e[cr]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function Ik(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof po)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];ti(4,a,l);try{l.call(a)}finally{ti(5,a,l)}}else{ti(4,r,o);try{o.call(r)}finally{ti(5,r,o)}}}}}function xC(t,e,n){return Tk(t,e.parent,n)}function Tk(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[ki];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===ii.None||o===ii.Emulated)return null}return Tn(i,n)}}function Od(t,e,n,i,r){t.insertBefore(e,n,i,r)}function OC(t,e,n){t.appendChild(e,n)}function HE(t,e,n,i,r){i!==null?Od(t,e,n,i,r):OC(t,e,n)}function Sk(t,e,n,i){t.removeChild(e,n,i)}function D_(t,e){return t.parentNode(e)}function Mk(t,e){return t.nextSibling(e)}function RC(t,e,n){return xk(t,e,n)}function Ak(t,e,n){return t.type&40?Tn(t,n):null}var xk=Ak,zE;function Xd(t,e,n,i){let r=xC(t,i,e),o=e[ct],s=i.parent||e[mn],a=RC(s,i,e);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)HE(o,r,n[l],a,!1);else HE(o,r,n,a,!1);zE!==void 0&&zE(o,i,e,n,r)}function wd(t,e){if(e!==null){let n=e.type;if(n&3)return Tn(e,t);if(n&4)return yg(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return wd(t,i);{let r=t[e.index];return Fi(r)?yg(-1,r):ri(r)}}else{if(n&32)return E_(e,t)()||ri(t[e.index]);{let i=NC(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Bl(t[Hn]);return wd(r,i)}else return wd(t,e.next)}}}return null}function NC(t,e){if(e!==null){let i=t[Hn][mn],r=e.projection;return i.projection[r]}return null}function yg(t,e){let n=pn+t+1;if(n<e.length){let i=e[n],r=i[Ee].firstChild;if(r!==null)return wd(i,r)}return e[ho]}function Ok(t,e,n){let i=D_(t,e);i&&Sk(t,i,e,n)}function C_(t,e,n,i,r,o,s){for(;n!=null;){let a=i[n.index],l=n.type;if(s&&e===0&&(a&&hr(ri(a),i),n.flags|=2),(n.flags&32)!==32)if(l&8)C_(t,e,n.child,i,r,o,!1),xs(e,t,r,a,o);else if(l&32){let u=E_(n,i),d;for(;d=u();)xs(e,t,r,d,o);xs(e,t,r,a,o)}else l&16?PC(t,e,i,n,r,o):xs(e,t,r,a,o);n=s?n.projectionNext:n.next}}function eh(t,e,n,i,r,o){C_(n,i,t.firstChild,e,r,o,!1)}function Rk(t,e,n){let i=e[ct],r=xC(t,n,e),o=n.parent||e[mn],s=RC(o,n,e);PC(i,0,e,n,r,s)}function PC(t,e,n,i,r,o){let s=n[Hn],l=s[mn].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let d=l[u];xs(e,t,r,d,o)}else{let u=l,d=s[Ft];gC(i)&&(u.flags|=128),C_(t,e,u,d,r,o,!0)}}function Nk(t,e,n,i,r){let o=n[ho],s=ri(n);o!==s&&xs(e,t,i,o,r);for(let a=pn;a<n.length;a++){let l=n[a];eh(l[Ee],l,t,e,i,o)}}function Pk(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:oi.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=oi.Important),t.setStyle(n,i,r,o))}}function kk(t,e,n){t.setAttribute(e,"style",n)}function kC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function FC(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&ig(t,e,i),r!==null&&kC(t,e,r),o!==null&&kk(t,e,o)}var Sn={};function j(t=1){VC(Tt(),Me(),mr()+t,!1)}function VC(t,e,n,i){if(!i)if((e[me]&3)===3){let o=t.preOrderCheckHooks;o!==null&&_d(e,o,n)}else{let o=t.preOrderHooks;o!==null&&yd(e,o,0,n)}fo(n)}function ae(t,e=Ce.Default){let n=Me();if(n===null)return $(t,e);let i=cn();return dC(i,n,Xt(t),e)}function LC(t,e,n,i,r,o){let s=Ve(null);try{let a=null;r&It.SignalBased&&(a=e[i][pm]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&It.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,i):VD(e,a,i,o)}finally{Ve(s)}}function Fk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)fo(~r);else{let o=r,s=n[++i],a=n[++i];SP(s,o);let l=e[o];a(2,l)}}}finally{fo(-1)}}function th(t,e,n,i,r,o,s,a,l,u,d){let f=e.blueprint.slice();return f[ki]=r,f[me]=i|4|128|8|64,(u!==null||t&&t[me]&2048)&&(f[me]|=2048),HD(f),f[Ft]=f[Gs]=t,f[$n]=n,f[Gn]=s||t&&t[Gn],f[ct]=a||t&&t[ct],f[Ls]=l||t&&t[Ls]||null,f[mn]=o,f[zd]=XP(),f[kl]=d,f[kD]=u,f[Hn]=e.type==2?t[Hn]:f,f}function zs(t,e,n,i,r){let o=t.data[e];if(o===null)o=Vk(t,e,n,i,r),TP()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=EP();o.injectorIndex=s===null?-1:s.injectorIndex}return vo(o,!0),o}function Vk(t,e,n,i,r){let o=KD(),s=a_(),a=s?o:o&&o.parent,l=t.data[e]=Gk(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function BC(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function jC(t,e,n,i,r){let o=mr(),s=i&2;try{fo(-1),s&&e.length>zn&&VC(t,e,zn,!1),ti(s?2:0,r),n(i,r)}finally{fo(o),ti(s?3:1,r)}}function I_(t,e,n){if(r_(e)){let i=Ve(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{Ve(i)}}}function T_(t,e,n){WD()&&(Qk(t,e,n,Tn(n,e)),(n.flags&64)===64&&HC(t,e,n))}function S_(t,e,n=Tn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function UC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=M_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function M_(t,e,n,i,r,o,s,a,l,u,d){let f=zn+i,m=f+r,_=Lk(f,m),D=typeof u=="function"?u():u;return _[Ee]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:D,incompleteFirstPass:!1,ssrId:d}}function Lk(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Sn);return n}function Bk(t,e,n,i){let o=i.get(ak,EC)||n===ii.ShadowDom,s=t.selectRootElement(e,o);return jk(s),s}function jk(t){Uk(t)}var Uk=()=>null;function $k(t,e,n,i){let r=qC(e);r.push(n),t.firstCreatePass&&KC(t).push(i,r.length-1)}function Gk(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return qD()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function WE(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let a,l=It.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}t===0?qE(i,n,u,a,l):qE(i,n,u,a)}return i}function qE(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function Hk(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,s=e.attrs,a=[],l=null,u=null;for(let d=i;d<r;d++){let f=o[d],m=n?n.get(f):null,_=m?m.inputs:null,D=m?m.outputs:null;l=WE(0,f.inputs,d,l,_),u=WE(1,f.outputs,d,u,D);let M=l!==null&&s!==null&&!e_(e)?sF(l,d,s):null;a.push(M)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function zk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function $C(t,e,n,i,r,o,s,a){let l=Tn(e,n),u=e.inputs,d;!a&&u!=null&&(d=u[i])?(x_(t,n,d,i,r),Wd(e)&&Wk(n,e.index)):e.type&3?(i=zk(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(l,i,r)):e.type&12}function Wk(t,e){let n=pr(e,t);n[me]&16||(n[me]|=64)}function A_(t,e,n,i){if(WD()){let r=i===null?null:{"":-1},o=Jk(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&GC(t,e,n,s,r,a),r&&Zk(n,i,r)}n.mergedAttrs=Nl(n.mergedAttrs,n.attrs)}function GC(t,e,n,i,r,o){for(let u=0;u<i.length;u++)dg(Ad(n,e),t,i[u].type);eF(n,t.data.length,i.length);for(let u=0;u<i.length;u++){let d=i[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,l=BC(t,e,i.length,null);for(let u=0;u<i.length;u++){let d=i[u];n.mergedAttrs=Nl(n.mergedAttrs,d.hostAttrs),tF(t,n,e,l,d),Xk(l,d,r),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}Hk(t,n,o)}function qk(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Kk(s)!=a&&s.push(a),s.push(n,i,o)}}function Kk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Qk(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Wd(n)&&nF(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Ad(n,e),hr(i,e);let s=n.initialInputs;for(let a=r;a<o;a++){let l=t.data[a],u=mo(e,t,a,n);if(hr(u,e),s!==null&&oF(e,a-r,u,l,n,s),dr(l)){let d=pr(n.index,e);d[$n]=mo(e,t,a,n)}}}function HC(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=MP();try{fo(o);for(let a=i;a<r;a++){let l=t.data[a],u=e[a];cg(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Yk(l,u)}}finally{fo(-1),cg(s)}}function Yk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Jk(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(CD(e,s.selectors,!1))if(i||(i=[]),dr(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;vg(t,e,l)}else i.unshift(s),vg(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function vg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Zk(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new se(-301,!1);i.push(e[r],o)}}}function Xk(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;dr(e)&&(n[""]=t)}}function eF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function tF(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=Ps(r.type,!0)),s=new po(o,dr(r),ae);t.blueprint[i]=s,n[i]=s,qk(t,e,i,BC(t,n,r.hostVars,Sn),r)}function nF(t,e,n){let i=Tn(e,t),r=UC(n),o=t[Gn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=nh(t,th(t,r,null,s,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=a}function iF(t,e,n,i,r,o){let s=Tn(t,e);rF(e[ct],s,o,t.value,n,i,r)}function rF(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let a=s==null?Ns(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}function oF(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],d=s[a++],f=s[a++];LC(i,n,l,u,d,f)}}function sF(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(o,s[a+1],s[a+2],n[r+1]);break}}r+=2}return i}function zC(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function WC(t,e){let n=t.contentQueries;if(n!==null){let i=Ve(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];d_(o),a.contentQueries(2,e[s],s)}}}finally{Ve(i)}}}function nh(t,e){return t[Vl]?t[FE][Un]=e:t[Vl]=e,t[FE]=e,e}function wg(t,e,n){d_(0);let i=Ve(null);try{e(t,n)}finally{Ve(i)}}function qC(t){return t[Fl]||(t[Fl]=[])}function KC(t){return t.cleanup||(t.cleanup=[])}function QC(t,e){let n=t[Ls],i=n?n.get(Ai,null):null;i&&i.handleError(e)}function x_(t,e,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],u=e[s],d=t.data[s];LC(d,u,i,a,l,r)}}function YC(t,e,n){let i=$D(e,t);_k(t[ct],i,n)}function aF(t,e){let n=pr(e,t),i=n[Ee];lF(i,n);let r=n[ki];r!==null&&n[kl]===null&&(n[kl]=w_(r,n[Ls])),O_(i,n,n[$n])}function lF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function O_(t,e,n){h_(e);try{let i=t.viewQuery;i!==null&&wg(1,i,n);let r=t.template;r!==null&&jC(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Mi]?.finishViewCreation(t),t.staticContentQueries&&WC(t,e),t.staticViewQueries&&wg(2,t.viewQuery,n);let o=t.components;o!==null&&cF(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[me]&=-5,f_()}}function cF(t,e){for(let n=0;n<e.length;n++)aF(t,e[n])}function uF(t,e,n,i){let r=Ve(null);try{let o=e.tView,a=t[me]&4096?4096:16,l=th(t,o,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=t[e.index];l[zl]=u;let d=t[Mi];return d!==null&&(l[Mi]=d.createEmbeddedView(o)),O_(o,l,n),l}finally{Ve(r)}}function KE(t,e){return!e||e.firstChild===null||gC(t)}function dF(t,e,n,i=!0){let r=e[Ee];if(Ek(r,e,t,n),i){let s=yg(n,t),a=e[ct],l=D_(a,t[ho]);l!==null&&wk(r,t[mn],a,e,l,s)}let o=e[kl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Rd(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(ri(o)),Fi(o)&&hF(o,i);let s=n.type;if(s&8)Rd(t,e,n.child,i);else if(s&32){let a=E_(n,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=NC(e,n);if(Array.isArray(a))i.push(...a);else{let l=Bl(e[Hn]);Rd(l[Ee],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function hF(t,e){for(let n=pn;n<t.length;n++){let i=t[n],r=i[Ee].firstChild;r!==null&&Rd(i[Ee],i,r,e)}t[ho]!==t[ki]&&e.push(t[ho])}var JC=[];function fF(t){return t[uo]??pF(t)}function pF(t){let e=JC.pop()??Object.create(gF);return e.lView=t,e}function mF(t){t.lView[uo]!==t&&(t.lView=null,JC.push(t))}var gF=ke(Y({},eE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ll(t.lView)},consumerOnSignalRead(){this.lView[uo]=this}}),ZC=100;function XC(t,e=!0,n=0){let i=t[Gn],r=i.rendererFactory,o=!1;o||r.begin?.();try{_F(t,n)}catch(s){throw e&&QC(t,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function _F(t,e){bg(t,e);let n=0;for(;s_(t);){if(n===ZC)throw new se(103,!1);n++,bg(t,1)}}function yF(t,e,n,i){let r=e[me];if((r&256)===256)return;let o=!1;!o&&e[Gn].inlineEffectRunner?.flush(),h_(e);let s=null,a=null;!o&&vF(t)&&(a=fF(e),s=tE(a));try{HD(e),IP(t.bindingStartIndex),n!==null&&jC(t,e,n,2,i);let l=(r&3)===3;if(!o)if(l){let f=t.preOrderCheckHooks;f!==null&&_d(e,f,null)}else{let f=t.preOrderHooks;f!==null&&yd(e,f,0,null),Um(e,0)}if(wF(e),eI(e,0),t.contentQueries!==null&&WC(t,e),!o)if(l){let f=t.contentCheckHooks;f!==null&&_d(e,f)}else{let f=t.contentHooks;f!==null&&yd(e,f,1),Um(e,1)}Fk(t,e);let u=t.components;u!==null&&nI(e,u,0);let d=t.viewQuery;if(d!==null&&wg(2,d,i),!o)if(l){let f=t.viewCheckHooks;f!==null&&_d(e,f)}else{let f=t.viewHooks;f!==null&&yd(e,f,2),Um(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[jm]){for(let f of e[jm])f();e[jm]=null}o||(e[me]&=-73)}catch(l){throw Ll(e),l}finally{a!==null&&(nE(a,s),mF(a)),f_()}}function vF(t){return t.type!==2}function eI(t,e){for(let n=yC(t);n!==null;n=vC(n))for(let i=pn;i<n.length;i++){let r=n[i];tI(r,e)}}function wF(t){for(let e=yC(t);e!==null;e=vC(e)){if(!(e[me]&i_.HasTransplantedViews))continue;let n=e[Bs];for(let i=0;i<n.length;i++){let r=n[i],o=r[Ft];pP(r)}}}function bF(t,e,n){let i=pr(e,t);tI(i,n)}function tI(t,e){o_(t)&&bg(t,e)}function bg(t,e){let i=t[Ee],r=t[me],o=t[uo],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&mm(o)),o&&(o.dirty=!1),t[me]&=-9217,s)yF(i,t,i.template,t[$n]);else if(r&8192){eI(t,1);let a=i.components;a!==null&&nI(t,a,1)}}function nI(t,e,n){for(let i=0;i<e.length;i++)bF(t,e[i],n)}function R_(t){for(t[Gn].changeDetectionScheduler?.notify();t;){t[me]|=64;let e=Bl(t);if(rP(t)&&!e)return t;t=e}return null}var go=class{get rootNodes(){let e=this._lView,n=e[Ee];return Rd(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$n]}set context(e){this._lView[$n]=e}get destroyed(){return(this._lView[me]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ft];if(Fi(e)){let n=e[Td],i=n?n.indexOf(this):-1;i>-1&&(_g(e,i),Cd(n,i))}this._attachedToViewContainer=!1}AC(this._lView[Ee],this._lView)}onDestroy(e){zD(this._lView,e)}markForCheck(){R_(this._cdRefInjectingView||this._lView)}detach(){this._lView[me]&=-129}reattach(){lg(this._lView),this._lView[me]|=128}detectChanges(){this._lView[me]|=1024,XC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,SC(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e,lg(this._lView)}},xi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=CF;let t=e;return t})(),EF=xi,DF=class extends EF{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=uF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new go(r)}};function CF(){return N_(cn(),Me())}function N_(t,e){return t.type&4?new DF(e,t,Hs(t,e)):null}var W9=new RegExp(`^(\\d+)*(${ok}|${rk})*(.*)`);var IF=()=>null;function QE(t,e){return IF(t,e)}var Eg=class{},Dg=class{},Nd=class{};function TF(t){let e=Error(`No component factory found for ${en(t)}.`);return e[SF]=t,e}var SF="ngComponent";var Cg=class{resolveComponentFactory(e){throw TF(e)}},ih=(()=>{let e=class e{};e.NULL=new Cg;let t=e;return t})(),jl=class{},si=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>MF();let t=e;return t})();function MF(){let t=Me(),e=cn(),n=pr(e.index,t);return(lo(n)?n:t)[ct]}var AF=(()=>{let e=class e{};e.\u0275prov=Z({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Wm={};var YE=new Set;function P_(t){YE.has(t)||(YE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function JE(...t){}function xF(){let t=typeof xl.requestAnimationFrame=="function",e=xl[t?"requestAnimationFrame":"setTimeout"],n=xl[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Se=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ge(!1),this.onMicrotaskEmpty=new ge(!1),this.onStable=new ge(!1),this.onError=new ge(!1),typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=xF().nativeRequestAnimationFrame,NF(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new se(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,OF,JE,JE);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},OF={};function k_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function RF(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(xl,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ig(t),t.isCheckStableRunning=!0,k_(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ig(t))}function NF(t){let e=()=>{RF(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{if(PF(a))return n.invokeTask(r,o,s,a);try{return ZE(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),XE(t)}},onInvoke:(n,i,r,o,s,a,l)=>{try{return ZE(t),n.invoke(r,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),XE(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Ig(t),k_(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Ig(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function ZE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function XE(t){t._nesting--,k_(t)}function PF(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var iI=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Z({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Pd(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Xm(r,a);else if(o==2){let l=a,u=e[++s];i=Xm(i,l+": "+u+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var kd=class extends ih{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ur(e);return new Us(n,this.ngModule)}};function eD(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function kF(t){let e=t.toLowerCase();return e==="svg"?UD:e==="math"?lP:null}var Tg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=$d(i);let r=this.injector.get(e,Wm,i);return r!==Wm||n===Wm?r:this.parentInjector.get(e,n,i)}},Us=class extends Nd{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=eD(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return eD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=UN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=Ve(null);try{r=r||this.ngModule;let s=r instanceof kt?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Tg(e,s):e,l=a.get(jl,null);if(l===null)throw new se(407,!1);let u=a.get(AF,null),d=a.get(iI,null),f=a.get(Eg,null),m={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},_=l.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",M=i?Bk(_,i,this.componentDef.encapsulation,a):TC(_,D,kF(D)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let k=null;M!==null&&(k=w_(M,a,!0));let q=M_(0,null,null,1,0,null,null,null,null,null,null),U=th(null,q,null,A,null,null,m,_,a,null,k);h_(U);let K,le;try{let re=this.componentDef,b,y=null;re.findHostDirectiveDefs?(b=[],y=new Map,re.findHostDirectiveDefs(re,b,y),b.push(re)):b=[re];let w=FF(U,M),E=VF(w,M,re,b,U,m,_);le=GD(q,zn),M&&jF(_,re,M,i),n!==void 0&&UF(le,this.ngContentSelectors,n),K=BF(E,re,b,y,U,[$F]),O_(q,U,null)}finally{f_()}return new Sg(this.componentType,K,Hs(le,U),U,le)}finally{Ve(o)}}},Sg=class extends Dg{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new go(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;x_(o[Ee],o,r,e,n),this.previousInputValues.set(e,n);let s=pr(this._tNode.index,o);R_(s)}}get injector(){return new co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function FF(t,e){let n=t[Ee],i=zn;return t[i]=e,zs(n,i,2,"#host",null)}function VF(t,e,n,i,r,o,s){let a=r[Ee];LF(i,t,e,s);let l=null;e!==null&&(l=w_(e,r[Ls]));let u=o.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=th(r,UC(n),null,d,r[t.index],t,o,u,null,null,l);return a.firstCreatePass&&vg(a,t,i.length-1),nh(r,f),r[t.index]=f}function LF(t,e,n,i){for(let r of t)e.mergedAttrs=Nl(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Pd(e,e.mergedAttrs,!0),n!==null&&FC(i,n,e))}function BF(t,e,n,i,r,o){let s=cn(),a=r[Ee],l=Tn(s,r);GC(a,r,s,n,null,i);for(let d=0;d<n.length;d++){let f=s.directiveStart+d,m=mo(r,a,f,s);hr(m,r)}HC(a,r,s),l&&hr(l,r);let u=mo(r,a,s.directiveStart+s.componentOffset,s);if(t[$n]=r[$n]=u,o!==null)for(let d of o)d(u,e);return I_(a,s,r),u}function jF(t,e,n,i){if(i)ig(t,n,["ng-version","17.3.12"]);else{let{attrs:r,classes:o}=$N(e.selectors[0]);r&&ig(t,n,r),o&&o.length>0&&kC(t,n,o.join(" "))}}function UF(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function $F(){let t=cn();Jd(Me()[Ee],t)}var qn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=GF;let t=e;return t})();function GF(){let t=cn();return oI(t,Me())}var HF=qn,rI=class extends HF{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Hs(this._hostTNode,this._hostLView)}get injector(){return new co(this._hostTNode,this._hostLView)}get parentInjector(){let e=m_(this._hostTNode,this._hostLView);if(oC(e)){let n=Md(e,this._hostLView),i=Sd(e),r=n[Ee].data[i+8];return new co(r,n)}else return new co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=tD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-pn}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=QE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,KE(this._hostTNode,s)),a}createComponent(e,n,i,r,o){let s=e&&!iP(e),a;if(s)a=n;else{let D=n||{};a=D.index,i=D.injector,r=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let l=s?e:new Us(ur(e)),u=i||this.parentInjector;if(!o&&l.ngModule==null){let M=(s?u:this.parentInjector).get(kt,null);M&&(o=M)}let d=ur(l.componentType??{}),f=QE(this._lContainer,d?.id??null),m=f?.firstChild??null,_=l.create(u,r,m,o);return this.insertImpl(_.hostView,a,KE(this._hostTNode,f)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(fP(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[Ft],u=new rI(l,l[mn],l[Ft]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return dF(s,r,o,i),e.attachToViewContainerRef(),vD(qm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=tD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=_g(this._lContainer,n);i&&(Cd(qm(this._lContainer),n),AC(i[Ee],i))}detach(e){let n=this._adjustIndex(e,-1),i=_g(this._lContainer,n);return i&&Cd(qm(this._lContainer),n)!=null?new go(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function tD(t){return t[Td]}function qm(t){return t[Td]||(t[Td]=[])}function oI(t,e){let n,i=e[t.index];return Fi(i)?n=i:(n=zC(i,e,null,t),e[t.index]=n,nh(e,n)),WF(n,e,t,i),new rI(n,t,e)}function zF(t,e){let n=t[ct],i=n.createComment(""),r=Tn(e,t),o=D_(n,r);return Od(n,o,i,Mk(n,r),!1),i}var WF=QF,qF=()=>!1;function KF(t,e,n){return qF(t,e,n)}function QF(t,e,n,i){if(t[ho])return;let r;n.type&8?r=ri(i):r=zF(e,n),t[ho]=r}var Mg=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Ag=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)F_(e,n).matches!==null&&this.queries[n].setDirty()}},xg=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=iV(e):this.predicate=e}},Og=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Rg=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,YF(n,o)),this.matchTNodeWithReadOption(e,n,vd(n,e,o,!1,!1))}else i===xi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,vd(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Vt||r===qn||r===xi&&n.type&4)this.addMatch(n.index,-2);else{let o=vd(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function YF(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function JF(t,e){return t.type&11?Hs(t,e):t.type&4?N_(t,e):null}function ZF(t,e,n,i){return n===-1?JF(e,t):n===-2?XF(t,e,i):mo(t,t[Ee],n,e)}function XF(t,e,n){if(n===Vt)return Hs(e,t);if(n===xi)return N_(e,t);if(n===qn)return oI(e,t)}function sI(t,e,n,i){let r=e[Mi].queries[i];if(r.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let d=o[u];a.push(ZF(e,d,s[l+1],n.metadata.read))}}r.matches=a}return r.matches}function Ng(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=sI(t,e,r,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],d=e[-l];for(let f=pn;f<d.length;f++){let m=d[f];m[zl]===m[Ft]&&Ng(m[Ee],m,u,i)}if(d[Bs]!==null){let f=d[Bs];for(let m=0;m<f.length;m++){let _=f[m];Ng(_[Ee],_,u,i)}}}}}return i}function eV(t,e){return t[Mi].queries[e].queryList}function tV(t,e,n){let i=new mg((n&4)===4);return $k(t,e,i,i.destroy),(e[Mi]??=new Ag).queries.push(new Mg(i))-1}function nV(t,e,n){let i=Tt();return i.firstCreatePass&&(rV(i,new xg(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),tV(i,Me(),e)}function iV(t){return t.split(",").map(e=>e.trim())}function rV(t,e,n){t.queries===null&&(t.queries=new Og),t.queries.track(new Rg(e,n))}function F_(t,e){return t.queries.getByIndex(e)}function oV(t,e){let n=t[Ee],i=F_(n,e);return i.crossesNgTemplate?Ng(n,t,e,[]):sI(n,t,i,e)}function sV(t){return typeof t=="function"&&t[pm]!==void 0}function aI(t){return sV(t)&&typeof t.set=="function"}function aV(t){return Object.getPrototypeOf(t.prototype).constructor}function xt(t){let e=aV(t.type),n=!0,i=[t];for(;e;){let r;if(dr(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=pd(t.inputs),s.inputTransforms=pd(t.inputTransforms),s.declaredInputs=pd(t.declaredInputs),s.outputs=pd(t.outputs);let a=r.hostBindings;a&&hV(t,a);let l=r.viewQuery,u=r.contentQueries;if(l&&uV(t,l),u&&dV(t,u),lV(t,r),oN(t.outputs,r.outputs),dr(r)&&r.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===xt&&(n=!1)}}e=Object.getPrototypeOf(e)}cV(i)}function lV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function cV(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Nl(r.hostAttrs,n=Nl(n,r.hostAttrs))}}function pd(t){return t===ks?{}:t===an?[]:t}function uV(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function dV(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function hV(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}var fr=class{},Ul=class{};var Pg=class extends fr{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kd(this);let r=MD(e);this._bootstrapComponents=IC(r.bootstrap),this._r3Injector=pC(e,n,[{provide:fr,useValue:this},{provide:ih,useValue:this.componentFactoryResolver},...i],en(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kg=class extends Ul{constructor(e){super(),this.moduleType=e}create(e){return new Pg(this.moduleType,e,[])}};var Fd=class extends fr{constructor(e){super(),this.componentFactoryResolver=new kd(this),this.instance=null;let n=new Pl([...e.providers,{provide:fr,useValue:this},{provide:ih,useValue:this.componentFactoryResolver}],e.parent||Hd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function V_(t,e,n=null){return new Fd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var wo=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lI(t){return L_(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function fV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function L_(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function B_(t,e,n){return t[e]=n}function pV(t,e){return t[e]}function Oi(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function cI(t,e,n,i){let r=Oi(t,e,n);return Oi(t,e+1,i)||r}function mV(t){return(t.flags&32)===32}function gV(t,e,n,i,r,o,s,a,l){let u=e.consts,d=zs(e,t,4,s||null,js(u,a));A_(e,n,d,js(u,l)),Jd(e,d);let f=d.tView=M_(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function De(t,e,n,i,r,o,s,a){let l=Me(),u=Tt(),d=t+zn,f=u.firstCreatePass?gV(d,u,l,e,n,i,r,o,s):u.data[d];vo(f,!1);let m=_V(u,l,f,t);Qd()&&Xd(u,l,m,f),hr(m,l);let _=zC(m,l,m,f);return l[d]=_,nh(l,_),KF(_,f,l),qd(f)&&T_(u,l,f),s!=null&&S_(l,f,a),De}var _V=yV;function yV(t,e,n,i){return Yd(!0),e[ct].createComment("")}function ai(t,e,n,i){let r=Me(),o=Kd();if(Oi(r,o,e)){let s=Tt(),a=p_();iF(a,r,t,e,n,i)}return ai}function vV(t,e,n,i){return Oi(t,Kd(),n)?e+Ns(n)+i:Sn}function wV(t,e,n,i,r,o){let s=CP(),a=cI(t,s,n,r);return u_(2),a?e+Ns(n)+i+Ns(r)+o:Sn}function md(t,e){return t<<17|e<<2}function _o(t){return t>>17&32767}function bV(t){return(t&2)==2}function EV(t,e){return t&131071|e<<17}function Fg(t){return t|2}function $s(t){return(t&131068)>>2}function Km(t,e){return t&-131069|e<<2}function DV(t){return(t&1)===1}function Vg(t){return t|1}function CV(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=_o(s),l=$s(s);t[i]=n;let u=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Hl(f,d)>0)&&(u=!0)}else d=n;if(r)if(l!==0){let m=_o(t[a+1]);t[i+1]=md(m,a),m!==0&&(t[m+1]=Km(t[m+1],i)),t[a+1]=EV(t[a+1],i)}else t[i+1]=md(a,0),a!==0&&(t[a+1]=Km(t[a+1],i)),a=i;else t[i+1]=md(l,0),a===0?a=i:t[l+1]=Km(t[l+1],i),l=i;u&&(t[i+1]=Fg(t[i+1])),nD(t,d,i,!0),nD(t,d,i,!1),IV(e,d,t,i,o),s=md(a,l),o?e.classBindings=s:e.styleBindings=s}function IV(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Hl(o,e)>=0&&(n[i+1]=Vg(n[i+1]))}function nD(t,e,n,i){let r=t[n+1],o=e===null,s=i?_o(r):$s(r),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],u=t[s+1];TV(l,e)&&(a=!0,t[s+1]=i?Vg(u):Fg(u)),s=i?_o(u):$s(u)}a&&(t[n+1]=i?Fg(r):Vg(r))}function TV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Hl(t,e)>=0:!1}var jn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function SV(t){return t.substring(jn.key,jn.keyEnd)}function MV(t){return AV(t),uI(t,dI(t,0,jn.textEnd))}function uI(t,e){let n=jn.textEnd;return n===e?-1:(e=jn.keyEnd=xV(t,jn.key=e,n),dI(t,e,n))}function AV(t){jn.key=0,jn.keyEnd=0,jn.value=0,jn.valueEnd=0,jn.textEnd=t.length}function dI(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function xV(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function W(t,e,n){let i=Me(),r=Kd();if(Oi(i,r,e)){let o=Tt(),s=p_();$C(o,s,i,t,e,i[ct],n,!1)}return W}function Lg(t,e,n,i,r){let o=e.inputs,s=r?"class":"style";x_(t,n,o[s],s,i)}function bo(t,e){return RV(t,e,null,!0),bo}function Ws(t){NV(BV,OV,t,!0)}function OV(t,e){for(let n=MV(e);n>=0;n=uI(e,n))Xg(t,SV(e),!0)}function RV(t,e,n,i){let r=Me(),o=Tt(),s=u_(2);if(o.firstUpdatePass&&fI(o,t,s,i),e!==Sn&&Oi(r,s,e)){let a=o.data[mr()];pI(o,a,r,r[ct],t,r[s+1]=UV(e,n),i,s)}}function NV(t,e,n,i){let r=Tt(),o=u_(2);r.firstUpdatePass&&fI(r,null,o,i);let s=Me();if(n!==Sn&&Oi(s,o,n)){let a=r.data[mr()];if(mI(a,i)&&!hI(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=Xm(l,n||"")),Lg(r,a,s,n,i)}else jV(r,a,s,s[ct],s[o+1],s[o+1]=LV(t,e,n),i,o)}}function hI(t,e){return e>=t.expandoStartIndex}function fI(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[mr()],s=hI(t,n);mI(o,i)&&e===null&&!s&&(e=!1),e=PV(r,o,e,i),CV(r,o,e,n,s,i)}}function PV(t,e,n,i){let r=AP(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=Qm(null,t,e,n,i),n=$l(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=Qm(r,t,e,n,i),o===null){let l=kV(t,e,i);l!==void 0&&Array.isArray(l)&&(l=Qm(null,t,e,l[1],i),l=$l(l,e.attrs,i),FV(t,e,i,l))}else o=VV(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function kV(t,e,n){let i=n?e.classBindings:e.styleBindings;if($s(i)!==0)return t[_o(i)]}function FV(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[_o(r)]=i}function VV(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=$l(i,s,n)}return $l(i,e.attrs,n)}function Qm(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=$l(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function $l(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Xg(t,s,n?!0:e[++o]))}return t===void 0?null:t}function LV(t,e,n){if(n==null||n==="")return an;let i=[],r=Wl(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function BV(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&Xg(t,i,n)}function jV(t,e,n,i,r,o,s,a){r===Sn&&(r=an);let l=0,u=0,d=0<r.length?r[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let m=l<r.length?r[l+1]:void 0,_=u<o.length?o[u+1]:void 0,D=null,M;d===f?(l+=2,u+=2,m!==_&&(D=f,M=_)):f===null||d!==null&&d<f?(l+=2,D=d):(u+=2,D=f,M=_),D!==null&&pI(t,e,n,i,D,M,s,a),d=l<r.length?r[l]:null,f=u<o.length?o[u]:null}}function pI(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let l=t.data,u=l[a+1],d=DV(u)?iD(l,e,n,r,$s(u),s):void 0;if(!Vd(d)){Vd(o)||bV(u)&&(o=iD(l,null,n,r,a,s));let f=$D(mr(),n);Pk(i,s,f,r,o)}}function iD(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let l=t[r],u=Array.isArray(l),d=u?l[1]:l,f=d===null,m=n[r+1];m===Sn&&(m=f?an:void 0);let _=f?Lm(m,i):d===i?m:void 0;if(u&&!Vd(_)&&(_=Lm(l,i)),Vd(_)&&(a=_,s))return a;let D=t[r+1];r=s?_o(D):$s(D)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Lm(l,i))}return a}function Vd(t){return t!==void 0}function UV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=en(Wl(t)))),t}function mI(t,e){return(t.flags&(e?8:16))!==0}function $V(t,e,n,i,r,o){let s=e.consts,a=js(s,r),l=zs(e,t,2,i,a);return A_(e,n,l,js(s,o)),l.attrs!==null&&Pd(l,l.attrs,!1),l.mergedAttrs!==null&&Pd(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function T(t,e,n,i){let r=Me(),o=Tt(),s=zn+t,a=r[ct],l=o.firstCreatePass?$V(s,o,r,e,n,i):o.data[s],u=GV(o,r,l,a,e,t);r[s]=u;let d=qd(l);return vo(l,!0),FC(a,u,l),!mV(l)&&Qd()&&Xd(o,r,u,l),_P()===0&&hr(u,r),yP(),d&&(T_(o,r,l),I_(o,l,r)),i!==null&&S_(r,l),T}function S(){let t=cn();a_()?l_():(t=t.parent,vo(t,!1));let e=t;wP(e)&&bP(),vP();let n=Tt();return n.firstCreatePass&&(Jd(n,t),r_(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&VP(e)&&Lg(n,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&LP(e)&&Lg(n,e,Me(),e.stylesWithoutHost,!1),S}function ie(t,e,n,i){return T(t,e,n,i),S(),ie}var GV=(t,e,n,i,r,o)=>(Yd(!0),TC(i,r,NP()));function HV(t,e,n,i,r){let o=e.consts,s=js(o,i),a=zs(e,t,8,"ng-container",s);s!==null&&Pd(a,s,!0);let l=js(o,r);return A_(e,n,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function qs(t,e,n){let i=Me(),r=Tt(),o=t+zn,s=r.firstCreatePass?HV(o,r,i,e,n):r.data[o];vo(s,!0);let a=zV(r,i,s,t);return i[o]=a,Qd()&&Xd(r,i,a,s),hr(a,i),qd(s)&&(T_(r,i,s),I_(r,s,i)),n!=null&&S_(i,s),qs}function Ks(){let t=cn(),e=Tt();return a_()?l_():(t=t.parent,vo(t,!1)),e.firstCreatePass&&(Jd(e,t),r_(t)&&e.queries.elementEnd(t)),Ks}var zV=(t,e,n,i)=>(Yd(!0),yk(e[ct],""));function Qe(){return Me()}var Ld="en-US";var WV=Ld;function qV(t){typeof t=="string"&&(WV=t.toLowerCase().replace(/_/g,"-"))}function he(t,e,n,i){let r=Me(),o=Tt(),s=cn();return gI(o,r,r[ct],s,t,e,i),he}function KV(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[Fl],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function gI(t,e,n,i,r,o,s){let a=qd(i),u=t.firstCreatePass&&KC(t),d=e[$n],f=qC(e),m=!0;if(i.type&3||s){let M=Tn(i,e),A=s?s(M):M,k=f.length,q=s?K=>s(ri(K[i.index])):i.index,U=null;if(!s&&a&&(U=KV(t,e,r,i.index)),U!==null){let K=U.__ngLastListenerFn__||U;K.__ngNextListenerFn__=o,U.__ngLastListenerFn__=o,m=!1}else{o=oD(i,e,d,o,!1);let K=n.listen(A,r,o);f.push(o,K),u&&u.push(r,q,k,k+1)}}else o=oD(i,e,d,o,!1);let _=i.outputs,D;if(m&&_!==null&&(D=_[r])){let M=D.length;if(M)for(let A=0;A<M;A+=2){let k=D[A],q=D[A+1],le=e[k][q].subscribe(o),re=f.length;f.push(o,le),u&&u.push(r,i.index,re,-(re+1))}}}function rD(t,e,n,i){let r=Ve(null);try{return ti(6,e,n),n(i)!==!1}catch(o){return QC(t,o),!1}finally{ti(7,e,n),Ve(r)}}function oD(t,e,n,i,r){return function o(s){if(s===Function)return i;let a=t.componentOffset>-1?pr(t.index,e):e;R_(a);let l=rD(e,n,i,s),u=o.__ngNextListenerFn__;for(;u;)l=rD(e,n,u,s)&&l,u=u.__ngNextListenerFn__;return r&&l===!1&&s.preventDefault(),l}}function ee(t=1){return OP(t)}function QV(t,e){let n=null,i=FN(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?CD(t,o,!0):BN(i,o))return r}return n}function rh(t){let e=Me()[Hn][mn];if(!e.projection){let n=t?t.length:1,i=e.projection=TN(n,null),r=i.slice(),o=e.child;for(;o!==null;){let s=t?QV(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function oh(t,e=0,n){let i=Me(),r=Tt(),o=zs(r,zn+t,16,null,n||null);o.projection===null&&(o.projection=e),l_(),(!i[kl]||qD())&&(o.flags&32)!==32&&Rk(r,i,o)}function Qs(t,e,n){nV(t,e,n)}function Eo(t){let e=Me(),n=Tt(),i=QD();d_(i+1);let r=F_(n,i);if(t.dirty&&hP(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=oV(e,i);t.reset(o,YP),t.notifyOnChanges()}return!0}return!1}function Do(){return eV(Me(),QD())}function li(t){let e=DP();return dP(e,zn+t)}function B(t,e=""){let n=Me(),i=Tt(),r=t+zn,o=i.firstCreatePass?zs(i,r,1,e,null):i.data[r],s=YV(i,n,o,e,t);n[r]=s,Qd()&&Xd(i,n,s,o),vo(o,!1)}var YV=(t,e,n,i,r)=>(Yd(!0),gk(e[ct],i));function _n(t){return St("",t,""),_n}function St(t,e,n){let i=Me(),r=vV(i,t,e,n);return r!==Sn&&YC(i,mr(),r),St}function ql(t,e,n,i,r){let o=Me(),s=wV(o,t,e,n,i,r);return s!==Sn&&YC(o,mr(),s),ql}function Ye(t,e,n){aI(e)&&(e=e());let i=Me(),r=Kd();if(Oi(i,r,e)){let o=Tt(),s=p_();$C(o,s,i,t,e,i[ct],n,!1)}return Ye}function et(t,e){let n=aI(t);return n&&t.set(e),n}function Je(t,e){let n=Me(),i=Tt(),r=cn();return gI(i,n,n[ct],r,t,e),Je}function JV(t,e,n){let i=Tt();if(i.firstCreatePass){let r=dr(t);Bg(n,i.data,i.blueprint,r,!0),Bg(e,i.data,i.blueprint,r,!1)}}function Bg(t,e,n,i,r){if(t=Xt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Bg(t[o],e,n,i,r);else{let o=Tt(),s=Me(),a=cn(),l=Vs(t)?t:Xt(t.provide),u=PD(t),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Vs(t)||!t.multi){let _=new po(u,r,ae),D=Jm(l,e,r?d:d+m,f);D===-1?(dg(Ad(a,s),o,l),Ym(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(_),s.push(_)):(n[D]=_,s[D]=_)}else{let _=Jm(l,e,d+m,f),D=Jm(l,e,d,d+m),M=_>=0&&n[_],A=D>=0&&n[D];if(r&&!A||!r&&!M){dg(Ad(a,s),o,l);let k=e2(r?XV:ZV,n.length,r,i,u);!r&&A&&(n[D].providerFactory=k),Ym(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=_I(n[r?D:_],u,!r&&i);Ym(o,t,_>-1?_:D,k)}!r&&i&&A&&n[D].componentProviders++}}}function Ym(t,e,n,i){let r=Vs(e),o=QN(e);if(r||o){let l=(o?Xt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let d=u.indexOf(n);d===-1?u.push(n,[i,l]):u[d+1].push(i,l)}else u.push(n,l)}}}function _I(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Jm(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function ZV(t,e,n,i){return jg(this.multi,[])}function XV(t,e,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=mo(n,n[Ee],this.providerFactory.index,i);o=a.slice(0,s),jg(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],jg(r,o);return o}function jg(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function e2(t,e,n,i,r){let o=new po(t,n,ae);return o.multi=[],o.index=e,o.componentProviders=0,_I(o,r,i&&!n),o}function un(t,e=[]){return n=>{n.providersResolver=(i,r)=>JV(i,r?r(t):t,e)}}var t2=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=OD(!1,i.type),o=r.length>0?V_([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Z({token:e,providedIn:"environment",factory:()=>new e($(kt))});let t=e;return t})();function Te(t){P_("NgStandalone"),t.getStandaloneInjector=e=>e.get(t2).getOrCreateStandaloneInjector(t)}function yI(t,e,n){let i=c_()+t,r=Me();return r[i]===Sn?B_(r,i,n?e.call(n):e()):pV(r,i)}function j_(t,e,n,i){return n2(Me(),c_(),t,e,n,i)}function sh(t,e,n,i,r){return i2(Me(),c_(),t,e,n,i,r)}function vI(t,e){let n=t[e];return n===Sn?void 0:n}function n2(t,e,n,i,r,o){let s=e+n;return Oi(t,s,r)?B_(t,s+1,o?i.call(o,r):i(r)):vI(t,s+1)}function i2(t,e,n,i,r,o,s){let a=e+n;return cI(t,a,r,o)?B_(t,a+2,s?i.call(s,r,o):i(r,o)):vI(t,a+2)}var Ri=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},ah=new Ri("17.3.12"),lh=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var wI=new Q("");function Co(t){return!!t&&typeof t.then=="function"}function bI(t){return!!t&&typeof t.subscribe=="function"}var EI=new Q(""),DI=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=V(EI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let s=o();if(Co(s))i.push(s);else if(bI(s)){let a=new Promise((l,u)=>{s.subscribe({complete:l,error:u})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ch=new Q("");function r2(){rE(()=>{throw new se(600,!1)})}function o2(t){return t.isBoundToModule}function s2(t,e,n){try{let i=n();return Co(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var gr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(mC),this.afterRenderEffectManager=V(iI),this.externalTestViews=new Set,this.beforeRender=new Le,this.afterTick=new Le,this.componentTypes=[],this.components=[],this.isStable=V(wo).hasPendingTasks.pipe(J(i=>!i)),this._injector=V(kt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof Nd;if(!this._injector.get(DI).done){let _=!o&&SD(i),D=!1;throw new se(405,D)}let a;o?a=i:a=this._injector.get(ih).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let l=o2(a)?void 0:this._injector.get(fr),u=r||a.selector,d=a.create(Wn.NULL,[],u,l),f=d.location.nativeElement,m=d.injector.get(wI,null);return m?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Zm(this.components,d),m?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new se(101,!1);let r=Ve(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Ve(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===ZC)throw new se(103,!1);if(i){let s=r===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:l}of this._views)a2(a,s,l)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Ug(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Ug(s))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Zm(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(ch,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Zm(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new se(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zm(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function a2(t,e,n){!e&&!Ug(t)||l2(t,n,e)}function Ug(t){return s_(t)}function l2(t,e,n){let i;n?(i=0,t[me]|=1024):t[me]&64?i=0:i=1,XC(t,e,i)}var $g=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},U_=(()=>{let e=class e{compileModuleSync(i){return new kg(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=MD(i),s=IC(o.declarations).reduce((a,l)=>{let u=ur(l);return u&&a.push(new Us(u)),a},[]);return new $g(r,s)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var c2=(()=>{let e=class e{constructor(){this.zone=V(Se),this.applicationRef=V(gr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function u2(t){return[{provide:Se,useFactory:t},{provide:Fs,multi:!0,useFactory:()=>{let e=V(c2,{optional:!0});return()=>e.initialize()}},{provide:Fs,multi:!0,useFactory:()=>{let e=V(p2);return()=>{e.initialize()}}},{provide:mC,useFactory:d2}]}function d2(){let t=V(Se),e=V(Ai);return n=>t.runOutsideAngular(()=>e.handleError(n))}function h2(t){let e=u2(()=>new Se(f2(t)));return yo([[],e])}function f2(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var p2=(()=>{let e=class e{constructor(){this.subscription=new ft,this.initialized=!1,this.zone=V(Se),this.pendingTasks=V(wo)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Se.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Se.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function m2(){return typeof $localize<"u"&&$localize.locale||Ld}var uh=new Q("",{providedIn:"root",factory:()=>V(uh,Ce.Optional|Ce.SkipSelf)||m2()});var CI=new Q("");var bd=null;function g2(t=[],e){return Wn.create({name:e,providers:[{provide:Gd,useValue:"platform"},{provide:CI,useValue:new Set([()=>bd=null])},...t]})}function _2(t=[]){if(bd)return bd;let e=g2(t);return bd=e,r2(),y2(e),e}function y2(t){t.get(y_,null)?.forEach(n=>n())}function $_(){return!1}var Vi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=v2;let t=e;return t})();function v2(t){return w2(cn(),Me(),(t&16)===16)}function w2(t,e,n){if(Wd(t)&&!n){let i=pr(t.index,e);return new go(i,i)}else if(t.type&47){let i=e[Hn];return new go(i,e)}return null}var Gg=class{constructor(){}supports(e){return lI(e)}create(e){return new Hg(e)}},b2=(t,e)=>e,Hg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||b2}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<sD(i,r,o)?n:i,a=sD(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,d=l-r;if(u!=d){for(let m=0;m<u;m++){let _=m<o.length?o[m]:o[m]=0,D=_+m;d<=D&&D<u&&(o[m]=_+1)}let f=s.previousIndex;o[f]=d-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!lI(e))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,fV(e,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new zg(n,i),o,r)),e}_verifyReinsertion(e,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Bd),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Bd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Wg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},Bd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new Wg,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function sD(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}var qg=class{constructor(){}supports(e){return e instanceof Map||L_(e)}create(){return new Kg}},Kg=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||L_(e)))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,n);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new Qg(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}},Qg=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function aD(){return new G_([new Gg])}var G_=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||aD()),deps:[[e,new Jg,new Ni]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r!=null)return r;throw new se(901,!1)}};e.\u0275prov=Z({token:e,providedIn:"root",factory:aD});let t=e;return t})();function lD(){return new H_([new qg])}var H_=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||lD()),deps:[[e,new Jg,new Ni]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r)return r;throw new se(901,!1)}};e.\u0275prov=Z({token:e,providedIn:"root",factory:lD});let t=e;return t})();function II(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=_2(i),o=[h2(),...n||[]],a=new Fd({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Se);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(Ai,null),d;l.runOutsideAngular(()=>{d=l.onError.subscribe({next:_=>{u.handleError(_)}})});let f=()=>a.destroy(),m=r.get(CI);return m.add(f),a.onDestroy(()=>{d.unsubscribe(),m.delete(f)}),s2(u,l,()=>{let _=a.get(DI);return _.runInitializers(),_.donePromise.then(()=>{let D=a.get(uh,Ld);qV(D||Ld);let M=a.get(gr);return e!==void 0&&M.bootstrap(e),M})})})}catch(e){return Promise.reject(e)}}function Kl(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function dh(t,e){let n=ur(t),i=e.elementInjector||Hd();return new Us(n).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}var RI=null;function Li(){return RI}function NI(t){RI??=t}var hh=class{};var Ot=new Q(""),PI=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(C2),providedIn:"platform"});let t=e;return t})();var C2=(()=>{let e=class e extends PI{constructor(){super(),this._doc=V(Ot),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Li().getBaseHref(this._doc)}onPopState(i){let r=Li().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Li().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function kI(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function TI(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Io(t){return t&&t[0]!=="?"?"?"+t:t}var fh=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(FI),providedIn:"root"});let t=e;return t})(),I2=new Q(""),FI=(()=>{let e=class e extends fh{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(Ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return kI(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Io(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+Io(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+Io(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)($(PI),$(I2,8))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ql=(()=>{let e=class e{constructor(i){this._subject=new ge,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=M2(TI(SI(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Io(r))}normalize(i){return e.stripTrailingSlash(S2(this._basePath,SI(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Io(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Io(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=Io,e.joinWithSlash=kI,e.stripTrailingSlash=TI,e.\u0275fac=function(r){return new(r||e)($(fh))},e.\u0275prov=Z({token:e,factory:()=>T2(),providedIn:"root"});let t=e;return t})();function T2(){return new Ql($(fh))}function S2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function SI(t){return t.replace(/\/index.html$/,"")}function M2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function ph(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var z_=/\s+/,MI=[],Js=(()=>{let e=class e{constructor(i,r){this._ngEl=i,this._renderer=r,this.initialClasses=MI,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(z_):MI}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(z_):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let o=this.stateMap.get(i);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],o=i[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(z_).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(r){return new(r||e)(ae(Vt),ae(si))},e.\u0275dir=Ue({type:e,selectors:[["","ngClass",""]],inputs:{klass:[It.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var W_=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qt=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new W_(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let l=r.get(s);r.move(l,a),AI(l,o)}});for(let o=0,s=r.length;o<s;o++){let l=r.get(o).context;l.index=o,l.count=s,l.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);AI(s,o)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(ae(qn),ae(xi),ae(G_))},e.\u0275dir=Ue({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function AI(t,e){t.context.$implicit=e.item}var ci=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new q_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){xI("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){xI("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(ae(qn),ae(xi))},e.\u0275dir=Ue({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),q_=class{constructor(){this.$implicit=null,this.ngIf=null}};function xI(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${en(e)}'.`)}var VI=(()=>{let e=class e{constructor(i,r,o){this._ngEl=i,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(i){this._ngStyle=i,!this._differ&&i&&(this._differ=this._differs.find(i).create())}ngDoCheck(){if(this._differ){let i=this._differ.diff(this._ngStyle);i&&this._applyChanges(i)}}_setStyle(i,r){let[o,s]=i.split("."),a=o.indexOf("-")===-1?void 0:oi.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,s?`${r}${s}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,o,a)}_applyChanges(i){i.forEachRemovedItem(r=>this._setStyle(r.key,null)),i.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),i.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};e.\u0275fac=function(r){return new(r||e)(ae(Vt),ae(H_),ae(si))},e.\u0275dir=Ue({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})();var Ze=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({});let t=e;return t})(),LI="browser",A2="server";function _r(t){return t===A2}var Ys=class{};var Jl=class{},gh=class{},Bi=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Q_=class{encodeKey(e){return BI(e)}encodeValue(e){return BI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function R2(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}var N2=/%(\d[a-f0-9])/gi,P2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function BI(t){return encodeURIComponent(t).replace(N2,(e,n)=>P2[n]??e)}function mh(t){return`${t}`}var ui=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Q_,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=R2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map(mh):[mh(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(mh(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(mh(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Y_=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function k2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function jI(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function UI(t){return typeof Blob<"u"&&t instanceof Blob}function $I(t){return typeof FormData<"u"&&t instanceof FormData}function F2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Yl=class t{constructor(e,n,i,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(k2(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Bi,this.context??=new Y_,!this.params)this.params=new ui,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||jI(this.body)||UI(this.body)||$I(this.body)||F2(this.body)?this.body:this.body instanceof ui?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||$I(this.body)?null:UI(this.body)?this.body.type||null:jI(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ui?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((m,_)=>m.set(_,e.setHeaders[_]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,_)=>m.set(_,e.setParams[_]),d)),new t(n,i,s,{params:d,headers:u,context:f,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Zs=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Zs||{}),Zl=class{constructor(e,n=vh.Ok,i="OK"){this.headers=e.headers||new Bi,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},J_=class t extends Zl{constructor(e={}){super(e),this.type=Zs.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_h=class t extends Zl{constructor(e={}){super(e),this.type=Zs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},yh=class extends Zl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},vh=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(vh||{});function K_(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Z_=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,o={}){let s;if(i instanceof Yl)s=i;else{let u;o.headers instanceof Bi?u=o.headers:u=new Bi(o.headers);let d;o.params&&(o.params instanceof ui?d=o.params:d=new ui({fromObject:o.params})),s=new Yl(i,r,o.body!==void 0?o.body:null,{headers:u,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=te(s).pipe(or(u=>this.handler.handle(u)));if(i instanceof Yl||o.observe==="events")return a;let l=a.pipe(rt(u=>u instanceof _h));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(J(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return l.pipe(J(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new ui().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,K_(o,r))}post(i,r,o={}){return this.request("POST",i,K_(o,r))}put(i,r,o={}){return this.request("PUT",i,K_(o,r))}};e.\u0275fac=function(r){return new(r||e)($(Jl))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function WI(t,e){return e(t)}function V2(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}function L2(t,e,n){return(i,r)=>Pi(n,()=>e(i,o=>t(o,r)))}var B2=new Q(""),X_=new Q(""),j2=new Q(""),U2=new Q("");function $2(){let t=null;return(e,n)=>{t===null&&(t=(V(B2,{optional:!0})??[]).reduceRight(V2,WI));let i=V(wo),r=i.add();return t(e,n).pipe(Si(()=>i.remove(r)))}}var GI=(()=>{let e=class e extends Jl{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=V(wo);let o=V(U2,{optional:!0});this.backend=o??i}handle(i){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(X_),...this.injector.get(j2,[])]));this.chain=o.reduceRight((s,a)=>L2(s,a,this.injector),WI)}let r=this.pendingTasks.add();return this.chain(i,o=>this.backend.handle(o)).pipe(Si(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)($(gh),$(kt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();var G2=/^\)\]\}',?\n/;function H2(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var HI=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new se(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?xe(r.\u0275loadImpl()):te(null)).pipe(Ge(()=>new fe(s=>{let a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((A,k)=>a.setRequestHeader(A,k.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let A=i.detectContentTypeHeader();A!==null&&a.setRequestHeader("Content-Type",A)}if(i.responseType){let A=i.responseType.toLowerCase();a.responseType=A!=="json"?A:"text"}let l=i.serializeBody(),u=null,d=()=>{if(u!==null)return u;let A=a.statusText||"OK",k=new Bi(a.getAllResponseHeaders()),q=H2(a)||i.url;return u=new J_({headers:k,status:a.status,statusText:A,url:q}),u},f=()=>{let{headers:A,status:k,statusText:q,url:U}=d(),K=null;k!==vh.NoContent&&(K=typeof a.response>"u"?a.responseText:a.response),k===0&&(k=K?vh.Ok:0);let le=k>=200&&k<300;if(i.responseType==="json"&&typeof K=="string"){let re=K;K=K.replace(G2,"");try{K=K!==""?JSON.parse(K):null}catch(b){K=re,le&&(le=!1,K={error:b,text:K})}}le?(s.next(new _h({body:K,headers:A,status:k,statusText:q,url:U||void 0})),s.complete()):s.error(new yh({error:K,headers:A,status:k,statusText:q,url:U||void 0}))},m=A=>{let{url:k}=d(),q=new yh({error:A,status:a.status||0,statusText:a.statusText||"Unknown Error",url:k||void 0});s.error(q)},_=!1,D=A=>{_||(s.next(d()),_=!0);let k={type:Zs.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(k.total=A.total),i.responseType==="text"&&a.responseText&&(k.partialText=a.responseText),s.next(k)},M=A=>{let k={type:Zs.UploadProgress,loaded:A.loaded};A.lengthComputable&&(k.total=A.total),s.next(k)};return a.addEventListener("load",f),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),i.reportProgress&&(a.addEventListener("progress",D),l!==null&&a.upload&&a.upload.addEventListener("progress",M)),a.send(l),s.next({type:Zs.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",f),a.removeEventListener("timeout",m),i.reportProgress&&(a.removeEventListener("progress",D),l!==null&&a.upload&&a.upload.removeEventListener("progress",M)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)($(Ys))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),qI=new Q(""),z2="XSRF-TOKEN",W2=new Q("",{providedIn:"root",factory:()=>z2}),q2="X-XSRF-TOKEN",K2=new Q("",{providedIn:"root",factory:()=>q2}),wh=class{},Q2=(()=>{let e=class e{constructor(i,r,o){this.doc=i,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=ph(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)($(Ot),$(Lt),$(W2))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function Y2(t,e){let n=t.url.toLowerCase();if(!V(qI)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let i=V(wh).getToken(),r=V(K2);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var KI=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(KI||{});function J2(t,e){return{\u0275kind:t,\u0275providers:e}}function Z2(...t){let e=[Z_,HI,GI,{provide:Jl,useExisting:GI},{provide:gh,useExisting:HI},{provide:X_,useValue:Y2,multi:!0},{provide:qI,useValue:!0},{provide:wh,useClass:Q2}];for(let n of t)e.push(...n.\u0275providers);return yo(e)}var zI=new Q("");function X2(){return J2(KI.LegacyInterceptors,[{provide:zI,useFactory:$2},{provide:X_,useExisting:zI,multi:!0}])}var QI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({providers:[Z2(X2())]});let t=e;return t})();var ny=class extends hh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},iy=class t extends ny{static makeCurrent(){NI(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=eL();return n==null?null:tL(n)}resetBaseElement(){Xl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ph(document.cookie,e)}},Xl=null;function eL(){return Xl=Xl||document.querySelector("base"),Xl?Xl.getAttribute("href"):null}function tL(t){return new URL(t,document.baseURI).pathname}var nL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),ry=new Q(""),XI=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new se(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)($(ry),$(Se))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),bh=class{constructor(e){this._doc=e}},ey="ng-app-id",eT=(()=>{let e=class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_r(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${ey}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(ey),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(ey,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)($(Ot),$(__),$(v_,8),$(Lt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),ty={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sy=/%COMP%/g,tT="%COMP%",iL=`_nghost-${tT}`,rL=`_ngcontent-${tT}`,oL=!0,sL=new Q("",{providedIn:"root",factory:()=>oL});function aL(t){return rL.replace(sy,t)}function lL(t){return iL.replace(sy,t)}function nT(t,e){return e.map(n=>n.replace(sy,t))}var YI=(()=>{let e=class e{constructor(i,r,o,s,a,l,u,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=_r(l),this.defaultRenderer=new ec(i,a,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ii.ShadowDom&&(r=ke(Y({},r),{encapsulation:ii.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof Eh?o.applyToHost(i):o instanceof tc&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,l=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case ii.Emulated:s=new Eh(u,d,r,this.appId,f,a,l,m);break;case ii.ShadowDom:return new oy(u,d,i,r,a,l,this.nonce,m);default:s=new tc(u,d,r,f,a,l,m);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)($(XI),$(eT),$(__),$(sL),$(Ot),$(Lt),$(Se),$(v_))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),ec=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ty[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(JI(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(JI(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new se(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=ty[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=ty[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(oi.DashCase|oi.Important)?e.style.setProperty(n,i,r&oi.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&oi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Li().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function JI(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var oy=class extends ec{constructor(e,n,i,r,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=nT(r.id,r.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},tc=class extends ec{constructor(e,n,i,r,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?nT(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Eh=class extends tc{constructor(e,n,i,r,o,s,a,l){let u=r+"-"+i.id;super(e,n,i,o,s,a,l,u),this.contentAttr=aL(u),this.hostAttr=lL(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},cL=(()=>{let e=class e extends bh{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)($(Ot))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),ZI=["alt","control","meta","shift"],uL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},hL=(()=>{let e=class e extends bh{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Li().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),ZI.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(i,r){let o=uL[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),ZI.forEach(a=>{if(a!==o){let l=dL[a];l(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)($(Ot))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function iT(t,e){return II(Y({rootComponent:t},fL(e)))}function fL(t){return{appProviders:[...yL,...t?.providers??[]],platformProviders:_L}}function pL(){iy.makeCurrent()}function mL(){return new Ai}function gL(){return bC(document),document}var _L=[{provide:Lt,useValue:LI},{provide:y_,useValue:pL,multi:!0},{provide:Ot,useFactory:gL,deps:[]}];var yL=[{provide:Gd,useValue:"root"},{provide:Ai,useFactory:mL,deps:[]},{provide:ry,useClass:cL,multi:!0,deps:[Ot,Se,Lt]},{provide:ry,useClass:hL,multi:!0,deps:[Ot]},YI,eT,XI,{provide:jl,useExisting:YI},{provide:Ys,useClass:nL,deps:[]},[]];var rT=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)($(Ot))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var be="primary",gc=Symbol("RouteTitle"),dy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ia(t){return new dy(t)}function bL(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function EL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!di(t[n],e[n]))return!1;return!0}function di(t,e){let n=t?hy(t):void 0,i=e?hy(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!uT(t[r],e[r]))return!1;return!0}function hy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function uT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function dT(t){return t.length>0?t[t.length-1]:null}function br(t){return xm(t)?t:Co(t)?xe(Promise.resolve(t)):te(t)}var DL={exact:fT,subset:pT},hT={exact:CL,subset:IL,ignored:()=>!0};function oT(t,e,n){return DL[n.paths](t.root,e.root,n.matrixParams)&&hT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function CL(t,e){return di(t,e)}function fT(t,e,n){if(!So(t.segments,e.segments)||!Ih(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!fT(t.children[i],e.children[i],n))return!1;return!0}function IL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>uT(t[n],e[n]))}function pT(t,e,n){return mT(t,e,e.segments,n)}function mT(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!So(r,n)||e.hasChildren()||!Ih(r,n,i))}else if(t.segments.length===n.length){if(!So(t.segments,n)||!Ih(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!pT(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!So(t.segments,r)||!Ih(t.segments,r,i)||!t.children[be]?!1:mT(t.children[be],e,o,i)}}function Ih(t,e,n){return e.every((i,r)=>hT[n](t[r].parameters,i.parameters))}var yr=class{constructor(e=new je([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=ia(this.queryParams),this._queryParamMap}toString(){return ML.serialize(this)}},je=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Th(this)}},To=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ia(this.parameters),this._parameterMap}toString(){return _T(this)}};function TL(t,e){return So(t,e)&&t.every((n,i)=>di(n.parameters,e[i].parameters))}function So(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function SL(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===be&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==be&&(n=n.concat(e(r,i)))}),n}var Ly=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>new Mh,providedIn:"root"});let t=e;return t})(),Mh=class{parse(e){let n=new py(e);return new yr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${nc(e.root,!0)}`,i=OL(e.queryParams),r=typeof e.fragment=="string"?`#${AL(e.fragment)}`:"";return`${n}${i}${r}`}},ML=new Mh;function Th(t){return t.segments.map(e=>_T(e)).join("/")}function nc(t,e){if(!t.hasChildren())return Th(t);if(e){let n=t.children[be]?nc(t.children[be],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==be&&i.push(`${r}:${nc(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=SL(t,(i,r)=>r===be?[nc(t.children[be],!1)]:[`${r}:${nc(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[be]!=null?`${Th(t)}/${n[0]}`:`${Th(t)}/(${n.join("//")})`}}function gT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dh(t){return gT(t).replace(/%3B/gi,";")}function AL(t){return encodeURI(t)}function fy(t){return gT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sh(t){return decodeURIComponent(t)}function sT(t){return Sh(t.replace(/\+/g,"%20"))}function _T(t){return`${fy(t.path)}${xL(t.parameters)}`}function xL(t){return Object.entries(t).map(([e,n])=>`;${fy(e)}=${fy(n)}`).join("")}function OL(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Dh(n)}=${Dh(r)}`).join("&"):`${Dh(n)}=${Dh(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var RL=/^[^\/()?;#]+/;function ay(t){let e=t.match(RL);return e?e[0]:""}var NL=/^[^\/()?;=#]+/;function PL(t){let e=t.match(NL);return e?e[0]:""}var kL=/^[^=?&#]+/;function FL(t){let e=t.match(kL);return e?e[0]:""}var VL=/^[^&#]+/;function LL(t){let e=t.match(VL);return e?e[0]:""}var py=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[be]=new je(e,n)),i}parseSegment(){let e=ay(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new To(Sh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=PL(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=ay(this.remaining);r&&(i=r,this.capture(i))}e[Sh(n)]=Sh(i)}parseQueryParam(e){let n=FL(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=LL(this.remaining);s&&(i=s,this.capture(i))}let r=sT(n),o=sT(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=ay(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new se(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=be);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[be]:new je([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}};function yT(t){return t.segments.length>0?new je([],{[be]:t}):t}function vT(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=vT(r);if(i===be&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new je(t.segments,e);return BL(n)}function BL(t){if(t.numberOfChildren===1&&t.children[be]){let e=t.children[be];return new je(t.segments.concat(e.segments),e.children)}return t}function ra(t){return t instanceof yr}function jL(t,e,n=null,i=null){let r=wT(t);return bT(r,e,n,i)}function wT(t){let e;function n(o){let s={};for(let l of o.children){let u=n(l);s[l.outlet]=u}let a=new je(o.url,s);return o===t&&(e=a),a}let i=n(t.root),r=yT(i);return e??r}function bT(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return ly(r,r,r,n,i);let o=UL(e);if(o.toRoot())return ly(r,r,new je([],{}),n,i);let s=$L(o,r,t),a=s.processChildren?oc(s.segmentGroup,s.index,o.commands):DT(s.segmentGroup,s.index,o.commands);return ly(r,s.segmentGroup,a,n,i)}function Ah(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function lc(t){return typeof t=="object"&&t!=null&&t.outlets}function ly(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;t===e?s=n:s=ET(t,e,n);let a=yT(vT(s));return new yr(a,o,r)}function ET(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=ET(o,e,n)}),new je(t.segments,i)}var xh=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Ah(i[0]))throw new se(4003,!1);let r=i.find(lc);if(r&&r!==dT(i))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function UL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new xh(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new xh(n,e,i)}var ta=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function $L(t,e,n){if(t.isAbsolute)return new ta(e,!0,0);if(!n)return new ta(e,!1,NaN);if(n.parent===null)return new ta(n,!0,0);let i=Ah(t.commands[0])?0:1,r=n.segments.length-1+i;return GL(n,r,t.numberOfDoubleDots)}function GL(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new se(4005,!1);r=i.segments.length}return new ta(i,!1,r-o)}function HL(t){return lc(t[0])?t[0].outlets:{[be]:t}}function DT(t,e,n){if(t??=new je([],{}),t.segments.length===0&&t.hasChildren())return oc(t,e,n);let i=zL(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new je(t.segments.slice(0,i.pathIndex),{});return o.children[be]=new je(t.segments.slice(i.pathIndex),t.children),oc(o,0,r)}else return i.match&&r.length===0?new je(t.segments,{}):i.match&&!t.hasChildren()?my(t,e,n):i.match?oc(t,0,r):my(t,e,n)}function oc(t,e,n){if(n.length===0)return new je(t.segments,{});{let i=HL(n),r={};if(Object.keys(i).some(o=>o!==be)&&t.children[be]&&t.numberOfChildren===1&&t.children[be].segments.length===0){let o=oc(t.children[be],e,n);return new je(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=DT(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new je(t.segments,r)}}function zL(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let s=t.segments[r],a=n[i];if(lc(a))break;let l=`${a}`,u=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!lT(l,u,s))return o;i+=2}else{if(!lT(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function my(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(lc(o)){let l=WL(o.outlets);return new je(i,l)}if(r===0&&Ah(n[0])){let l=t.segments[e];i.push(new To(l.path,aT(n[0]))),r++;continue}let s=lc(o)?o.outlets[be]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&Ah(a)?(i.push(new To(s,aT(a))),r+=2):(i.push(new To(s,{})),r++)}return new je(i,{})}function WL(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=my(new je([],{}),0,i))}),e}function aT(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function lT(t,e,n){return t==n.path&&di(e,n.parameters)}var sc="imperative",Bt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Bt||{}),An=class{constructor(e,n){this.id=e,this.url=n}},cc=class extends An{constructor(e,n,i="imperative",r=null){super(e,n),this.type=Bt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mo=class extends An{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=Bt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(vn||{}),gy=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(gy||{}),vr=class extends An{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Bt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ao=class extends An{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Bt.NavigationSkipped}},uc=class extends An{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=Bt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Oh=class extends An{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Bt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_y=class extends An{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Bt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yy=class extends An{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=Bt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vy=class extends An{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Bt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wy=class extends An{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Bt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},by=class{constructor(e){this.route=e,this.type=Bt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ey=class{constructor(e){this.route=e,this.type=Bt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Dy=class{constructor(e){this.snapshot=e,this.type=Bt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cy=class{constructor(e){this.snapshot=e,this.type=Bt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iy=class{constructor(e){this.snapshot=e,this.type=Bt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ty=class{constructor(e){this.snapshot=e,this.type=Bt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var dc=class{},hc=class{constructor(e){this.url=e}};var Sy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Vh,this.attachRef=null}},Vh=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Sy,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=My(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=My(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Ay(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Ay(e,this._root).map(n=>n.value)}};function My(t,e){if(t===e.value)return e;for(let n of e.children){let i=My(t,n);if(i)return i}return null}function Ay(t,e){if(t===e.value)return[e];for(let n of e.children){let i=Ay(t,n);if(i.length)return i.unshift(e),i}return[]}var yn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ea(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Nh=class extends Rh{constructor(e,n){super(e),this.snapshot=n,jy(this,e)}toString(){return this.snapshot.toString()}};function CT(t){let e=qL(t),n=new pt([new To("",{})]),i=new pt({}),r=new pt({}),o=new pt({}),s=new pt(""),a=new wr(n,i,o,s,r,be,t,e.root);return a.snapshot=e.root,new Nh(new yn(a,[]),e)}function qL(t){let e={},n={},i={},r="",o=new fc([],e,i,r,n,be,t,null,{});return new Ph("",new yn(o,[]))}var wr=class{constructor(e,n,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(J(u=>u[gc]))??te(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>ia(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>ia(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function By(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:Y(Y({},e.params),t.params),data:Y(Y({},e.data),t.data),resolve:Y(Y(Y(Y({},t.data),e.data),r?.data),t._resolvedData)}:i={params:Y({},t.params),data:Y({},t.data),resolve:Y(Y({},t.data),t._resolvedData??{})},r&&TT(r)&&(i.resolve[gc]=r.title),i}var fc=class{get title(){return this.data?.[gc]}constructor(e,n,i,r,o,s,a,l,u){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ia(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ia(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ph=class extends Rh{constructor(e,n){super(n),this.url=e,jy(this,n)}toString(){return IT(this._root)}};function jy(t,e){e.value._routerState=t,e.children.forEach(n=>jy(t,n))}function IT(t){let e=t.children.length>0?` { ${t.children.map(IT).join(", ")} } `:"";return`${t.value}${e}`}function cy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,di(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),di(e.params,n.params)||t.paramsSubject.next(n.params),EL(e.url,n.url)||t.urlSubject.next(n.url),di(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function xy(t,e){let n=di(t.params,e.params)&&TL(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||xy(t.parent,e.parent))}function TT(t){return typeof t.title=="string"||t.title===null}var Uy=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=be,this.activateEvents=new ge,this.deactivateEvents=new ge,this.attachEvents=new ge,this.detachEvents=new ge,this.parentContexts=V(Vh),this.location=V(qn),this.changeDetector=V(Vi),this.environmentInjector=V(kt),this.inputBinder=V($y,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new Oy(i,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ue({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ln]});let t=e;return t})(),Oy=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===wr?this.route:e===Vh?this.childContexts:this.parent.get(e,n)}},$y=new Q("");function KL(t,e,n){let i=pc(t,e._root,n?n._root:void 0);return new Nh(i,e)}function pc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=QL(t,e,n);return new yn(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>pc(t,a)),s}}let i=YL(e.value),r=e.children.map(o=>pc(t,o));return new yn(i,r)}}function QL(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return pc(t,i,r);return pc(t,i)})}function YL(t){return new wr(new pt(t.url),new pt(t.params),new pt(t.queryParams),new pt(t.fragment),new pt(t.data),t.outlet,t.component,t)}var ST="ngNavigationCancelingError";function MT(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=ra(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=AT(!1,vn.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function AT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[ST]=!0,n.cancellationCode=e,n}function JL(t){return xT(t)&&ra(t.url)}function xT(t){return!!t&&t[ST]}var ZL=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["ng-component"]],standalone:!0,features:[Te],decls:1,vars:0,template:function(r,o){r&1&&ie(0,"router-outlet")},dependencies:[Uy],encapsulation:2});let t=e;return t})();function XL(t,e){return t.providers&&!t._injector&&(t._injector=V_(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Gy(t){let e=t.children&&t.children.map(Gy),n=e?ke(Y({},t),{children:e}):Y({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==be&&(n.component=ZL),n}function hi(t){return t.outlet||be}function eB(t,e){let n=t.filter(i=>hi(i)===e);return n.push(...t.filter(i=>hi(i)!==e)),n}function _c(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var tB=(t,e,n,i)=>J(r=>(new Ry(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Ry=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),cy(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=ea(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=ea(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=ea(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=ea(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Ty(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Cy(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(cy(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),cy(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=_c(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}},kh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},na=class{constructor(e,n){this.component=e,this.route=n}};function nB(t,e,n){let i=t._root,r=e?e._root:null;return ic(i,r,n,[i.value])}function iB(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function sa(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!hD(t)?t:e.get(t):i}function ic(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=ea(e);return t.children.forEach(s=>{rB(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ac(a,n.getContext(s),r)),r}function rB(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=oB(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new kh(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ic(t,e,a?a.children:null,i,r):ic(t,e,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new na(a.outlet.component,s))}else s&&ac(e,a,r),r.canActivateChecks.push(new kh(i)),o.component?ic(t,null,a?a.children:null,i,r):ic(t,null,n,i,r);return r}function oB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!So(t.url,e.url);case"pathParamsOrQueryParamsChange":return!So(t.url,e.url)||!di(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xy(t,e)||!di(t.queryParams,e.queryParams);case"paramsChange":default:return!xy(t,e)}}function ac(t,e,n){let i=ea(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?e?ac(s,e.children.getContext(o),n):ac(s,null,n):ac(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new na(e.outlet.component,r)):n.canDeactivateChecks.push(new na(null,r)):n.canDeactivateChecks.push(new na(null,r))}function yc(t){return typeof t=="function"}function sB(t){return typeof t=="boolean"}function aB(t){return t&&yc(t.canLoad)}function lB(t){return t&&yc(t.canActivate)}function cB(t){return t&&yc(t.canActivateChild)}function uB(t){return t&&yc(t.canDeactivate)}function dB(t){return t&&yc(t.canMatch)}function OT(t){return t instanceof Ln||t?.name==="EmptyError"}var Ch=Symbol("INITIAL_VALUE");function oa(){return Ge(t=>Tl(t.map(e=>e.pipe(sn(1),ar(Ch)))).pipe(J(e=>{for(let n of e)if(n!==!0){if(n===Ch)return Ch;if(n===!1||n instanceof yr)return n}return!0}),rt(e=>e!==Ch),sn(1)))}function hB(t,e){return at(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?te(ke(Y({},n),{guardsResult:!0})):fB(s,i,r,t).pipe(at(a=>a&&sB(a)?pB(i,o,t,e):te(a)),J(a=>ke(Y({},n),{guardsResult:a})))})}function fB(t,e,n,i){return xe(t).pipe(at(r=>vB(r.component,r.route,n,e,i)),Cn(r=>r!==!0,!0))}function pB(t,e,n,i){return xe(e).pipe(or(r=>ir(gB(r.route.parent,i),mB(r.route,i),yB(t,r.path,n),_B(t,r.route,n))),Cn(r=>r!==!0,!0))}function mB(t,e){return t!==null&&e&&e(new Iy(t)),te(!0)}function gB(t,e){return t!==null&&e&&e(new Dy(t)),te(!0)}function _B(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return te(!0);let r=i.map(o=>sd(()=>{let s=_c(e)??n,a=sa(o,s),l=lB(a)?a.canActivate(e,t):Pi(s,()=>a(e,t));return br(l).pipe(Cn())}));return te(r).pipe(oa())}function yB(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>iB(s)).filter(s=>s!==null).map(s=>sd(()=>{let a=s.guards.map(l=>{let u=_c(s.node)??n,d=sa(l,u),f=cB(d)?d.canActivateChild(i,t):Pi(u,()=>d(i,t));return br(f).pipe(Cn())});return te(a).pipe(oa())}));return te(o).pipe(oa())}function vB(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return te(!0);let s=o.map(a=>{let l=_c(e)??r,u=sa(a,l),d=uB(u)?u.canDeactivate(t,e,n,i):Pi(l,()=>u(t,e,n,i));return br(d).pipe(Cn())});return te(s).pipe(oa())}function wB(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return te(!0);let o=r.map(s=>{let a=sa(s,t),l=aB(a)?a.canLoad(e,n):Pi(t,()=>a(e,n));return br(l)});return te(o).pipe(oa(),RT(i))}function RT(t){return Dm(lt(e=>{if(ra(e))throw MT(t,e)}),J(e=>e===!0))}function bB(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return te(!0);let o=r.map(s=>{let a=sa(s,t),l=dB(a)?a.canMatch(e,n):Pi(t,()=>a(e,n));return br(l)});return te(o).pipe(oa(),RT(i))}var mc=class{constructor(e){this.segmentGroup=e||null}},Fh=class extends Error{constructor(e){super(),this.urlTree=e}};function Xs(t){return Cs(new mc(t))}function EB(t){return Cs(new se(4e3,!1))}function DB(t){return Cs(AT(!1,vn.GuardRejected))}var Ny=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return te(i);if(r.numberOfChildren>1||!r.children[be])return EB(e.redirectTo);r=r.children[be]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Fh(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new yr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new je(o,s)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new se(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Py={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CB(t,e,n,i,r){let o=Hy(t,e,n);return o.matched?(i=XL(e,i),bB(i,e,n,r).pipe(J(s=>s===!0?o:Y({},Py)))):te(o)}function Hy(t,e,n){if(e.path==="**")return IB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?Y({},Py):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||bL)(n,t,e);if(!r)return Y({},Py);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?Y(Y({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function IB(t){return{matched:!0,parameters:t.length>0?dT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function cT(t,e,n,i){return n.length>0&&MB(t,n,i)?{segmentGroup:new je(e,SB(i,new je(n,t.children))),slicedSegments:[]}:n.length===0&&AB(t,n,i)?{segmentGroup:new je(t.segments,TB(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new je(t.segments,t.children),slicedSegments:n}}function TB(t,e,n,i){let r={};for(let o of n)if(Lh(t,e,o)&&!i[hi(o)]){let s=new je([],{});r[hi(o)]=s}return Y(Y({},i),r)}function SB(t,e){let n={};n[be]=e;for(let i of t)if(i.path===""&&hi(i)!==be){let r=new je([],{});n[hi(i)]=r}return n}function MB(t,e,n){return n.some(i=>Lh(t,e,i)&&hi(i)!==be)}function AB(t,e,n){return n.some(i=>Lh(t,e,i))}function Lh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function xB(t,e,n,i){return hi(t)!==i&&(i===be||!Lh(e,n,t))?!1:Hy(e,t,n).matched}function OB(t,e,n){return e.length===0&&!t.children[n]}var ky=class{};function RB(t,e,n,i,r,o,s="emptyOnly"){return new Fy(t,e,n,i,r,s,o).recognize()}var NB=31,Fy=class{constructor(e,n,i,r,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ny(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new se(4002,`'${e.segmentGroup}'`)}recognize(){let e=cT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(n=>{let i=new fc([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,{},be,this.rootComponentType,null,{}),r=new yn(i,n),o=new Ph("",r),s=jL(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,be).pipe(rr(i=>{if(i instanceof Fh)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof mc?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=By(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(J(o=>o instanceof yn?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return xe(r).pipe(or(o=>{let s=i.children[o],a=eB(n,o);return this.processSegmentGroup(e,a,s,o)}),ao((o,s)=>(o.push(...s),o)),sr(null),Fm(),at(o=>{if(o===null)return Xs(i);let s=NT(o);return PB(s),te(s)}))}processSegment(e,n,i,r,o,s){return xe(n).pipe(or(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,o,s).pipe(rr(l=>{if(l instanceof mc)return te(null);throw l}))),Cn(a=>!!a),rr(a=>{if(OT(a))return OB(i,r,o)?te(new ky):Xs(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,o,s,a){return xB(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s):Xs(r):Xs(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:u,remainingSegments:d}=Hy(n,r,o);if(!a)return Xs(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>NB&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,f).pipe(at(m=>this.processSegment(e,i,n,m.concat(d),s,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let s=CB(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(Ge(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Ge(({routes:l})=>{let u=i._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:m}=a,_=new fc(d,m,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,FB(i),hi(i),i.component??i._loadedComponent??null,i,VB(i)),{segmentGroup:D,slicedSegments:M}=cT(n,d,f,l);if(M.length===0&&D.hasChildren())return this.processChildren(u,l,D).pipe(J(k=>k===null?null:new yn(_,k)));if(l.length===0&&M.length===0)return te(new yn(_,[]));let A=hi(i)===o;return this.processSegment(u,l,D,M,A?be:o,!0).pipe(J(k=>new yn(_,k instanceof yn?[k]:[])))}))):Xs(n)))}getChildConfig(e,n,i){return n.children?te({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?te({routes:n._loadedRoutes,injector:n._loadedInjector}):wB(e,n,i,this.urlSerializer).pipe(at(r=>r?this.configLoader.loadChildren(e,n).pipe(lt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):DB(n))):te({routes:[],injector:e})}};function PB(t){t.sort((e,n)=>e.value.outlet===be?-1:n.value.outlet===be?1:e.value.outlet.localeCompare(n.value.outlet))}function kB(t){let e=t.value.routeConfig;return e&&e.path===""}function NT(t){let e=[],n=new Set;for(let i of t){if(!kB(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=NT(i.children);e.push(new yn(i.value,r))}return e.filter(i=>!n.has(i))}function FB(t){return t.data||{}}function VB(t){return t.resolve||{}}function LB(t,e,n,i,r,o){return at(s=>RB(t,e,n,i,s.extractedUrl,r,o).pipe(J(({state:a,tree:l})=>ke(Y({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function BB(t,e){return at(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return te(n);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of PT(l))s.add(u);let a=0;return xe(s).pipe(or(l=>o.has(l)?jB(l,i,t,e):(l.data=By(l,l.parent,t).resolve,te(void 0))),lt(()=>a++),Ts(1),at(l=>a===s.size?te(n):Ct))})}function PT(t){let e=t.children.map(n=>PT(n)).flat();return[t,...e]}function jB(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!TT(r)&&(o[gc]=r.title),UB(o,t,e,i).pipe(J(s=>(t._resolvedData=s,t.data=By(t,t.parent,n).resolve,null)))}function UB(t,e,n,i){let r=hy(t);if(r.length===0)return te({});let o={};return xe(r).pipe(at(s=>$B(t[s],e,n,i).pipe(Cn(),lt(a=>{o[s]=a}))),Ts(1),Pm(o),rr(s=>OT(s)?Ct:Cs(s)))}function $B(t,e,n,i){let r=_c(e)??i,o=sa(t,r),s=o.resolve?o.resolve(e,n):Pi(r,()=>o(e,n));return br(s)}function uy(t){return Ge(e=>{let n=t(e);return n?xe(n).pipe(J(()=>e)):te(e)})}var kT=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===be);return r}getResolvedTitleForRoute(i){return i.data[gc]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(GB),providedIn:"root"});let t=e;return t})(),GB=(()=>{let e=class e extends kT{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)($(rT))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),zy=new Q("",{providedIn:"root",factory:()=>({})}),Wy=new Q(""),HB=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(U_)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return te(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=br(i.loadComponent()).pipe(J(FT),lt(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),Si(()=>{this.componentLoaders.delete(i)})),o=new ys(r,()=>new Le).pipe(_s());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=zB(r,this.compiler,i,this.onLoadEndListener).pipe(Si(()=>{this.childrenLoaders.delete(r)})),a=new ys(s,()=>new Le).pipe(_s());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zB(t,e,n,i){return br(t.loadChildren()).pipe(J(FT),at(r=>r instanceof Ul||Array.isArray(r)?te(r):xe(e.compileModuleAsync(r))),J(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(Wy,[],{optional:!0,self:!0}).flat()),{routes:s.map(Gy),injector:o}}))}function WB(t){return t&&typeof t=="object"&&"default"in t}function FT(t){return WB(t)?t.default:t}var qy=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(qB),providedIn:"root"});let t=e;return t})(),qB=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),KB=new Q("");var QB=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=V(HB),this.environmentInjector=V(kt),this.urlSerializer=V(Ly),this.rootContexts=V(Vh),this.location=V(Ql),this.inputBindingEnabled=V($y,{optional:!0})!==null,this.titleStrategy=V(kT),this.options=V(zy,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(qy),this.createViewTransition=V(KB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>te(void 0),this.rootComponentType=null;let i=o=>this.events.next(new by(o)),r=o=>this.events.next(new Ey(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ke(Y(Y({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new pt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sc,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rt(s=>s.id!==0),J(s=>ke(Y({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ge(s=>{let a=!1,l=!1;return te(s).pipe(Ge(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",vn.SupersededByNewNavigation),Ct;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ke(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!d&&f!=="reload"){let m="";return this.events.next(new Ao(u.id,this.urlSerializer.serialize(u.rawUrl),m,gy.IgnoredSameUrlNavigation)),u.resolve(null),Ct}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return te(u).pipe(Ge(m=>{let _=this.transitions?.getValue();return this.events.next(new cc(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),_!==this.transitions?.getValue()?Ct:Promise.resolve(m)}),LB(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=ke(Y({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let _=new Oh(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:m,extractedUrl:_,source:D,restoredState:M,extras:A}=u,k=new cc(m,this.urlSerializer.serialize(_),D,M);this.events.next(k);let q=CT(this.rootComponentType).snapshot;return this.currentTransition=s=ke(Y({},u),{targetSnapshot:q,urlAfterRedirects:_,extras:ke(Y({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,te(s)}else{let m="";return this.events.next(new Ao(u.id,this.urlSerializer.serialize(u.extractedUrl),m,gy.IgnoredByUrlHandlingStrategy)),u.resolve(null),Ct}}),lt(u=>{let d=new _y(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),J(u=>(this.currentTransition=s=ke(Y({},u),{guards:nB(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),hB(this.environmentInjector,u=>this.events.next(u)),lt(u=>{if(s.guardsResult=u.guardsResult,ra(u.guardsResult))throw MT(this.urlSerializer,u.guardsResult);let d=new yy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),rt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",vn.GuardRejected),!1)),uy(u=>{if(u.guards.canActivateChecks.length)return te(u).pipe(lt(d=>{let f=new vy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ge(d=>{let f=!1;return te(d).pipe(BB(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",vn.NoDataFromResolver)}}))}),lt(d=>{let f=new wy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),uy(u=>{let d=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(lt(_=>{f.component=_}),J(()=>{})));for(let _ of f.children)m.push(...d(_));return m};return Tl(d(u.targetSnapshot.root)).pipe(sr(null),sn(1))}),uy(()=>this.afterPreactivation()),Ge(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?xe(f).pipe(J(()=>s)):te(s)}),J(u=>{let d=KL(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=ke(Y({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),lt(()=>{this.events.next(new dc)}),tB(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),sn(1),lt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mo(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),zt(this.transitionAbortSubject.pipe(lt(u=>{throw u}))),Si(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",vn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),rr(u=>{if(l=!0,xT(u))this.events.next(new vr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),JL(u)?this.events.next(new hc(u.url)):s.resolve(!1);else{this.events.next(new uc(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(u))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Ct}))}))}cancelNavigationTransition(i,r,o){let s=new vr(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function YB(t){return t!==sc}var JB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(ZB),providedIn:"root"});let t=e;return t})(),Vy=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},ZB=(()=>{let e=class e extends Vy{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),VT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(XB),providedIn:"root"});let t=e;return t})(),XB=(()=>{let e=class e extends VT{constructor(){super(...arguments),this.location=V(Ql),this.urlSerializer=V(Ly),this.options=V(zy,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(qy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new yr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=CT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof cc)this.stateMemento=this.createStateMemento();else if(i instanceof Ao)this.rawUrlTree=r.initialUrl;else if(i instanceof Oh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof dc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof vr&&(i.code===vn.GuardRejected||i.code===vn.NoDataFromResolver)?this.restoreHistory(r):i instanceof uc?this.restoreHistory(r,!0):i instanceof Mo&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(rc||{});function ej(t,e){t.events.pipe(rt(n=>n instanceof Mo||n instanceof vr||n instanceof uc||n instanceof Ao),J(n=>n instanceof Mo||n instanceof Ao?rc.COMPLETE:(n instanceof vr?n.code===vn.Redirect||n.code===vn.SupersededByNewNavigation:!1)?rc.REDIRECTING:rc.FAILED),rt(n=>n!==rc.REDIRECTING),sn(1)).subscribe(()=>{e()})}function tj(t){throw t}var nj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ij={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Er=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(lh),this.stateManager=V(VT),this.options=V(zy,{optional:!0})||{},this.pendingTasks=V(wo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(QB),this.urlSerializer=V(Ly),this.location=V(Ql),this.urlHandlingStrategy=V(qy),this._events=new Le,this.errorHandler=this.options.errorHandler||tj,this.navigated=!1,this.routeReuseStrategy=V(JB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(Wy,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V($y,{optional:!0}),this.eventsSubscription=new ft,this.isNgZoneEnabled=V(Se)instanceof Se&&Se.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof vr&&r.code!==vn.Redirect&&r.code!==vn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Mo)this.navigated=!0;else if(r instanceof hc){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||YB(o.source)};this.scheduleNavigation(a,sc,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}oj(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),sc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=Y({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Gy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:a,f=null;switch(l){case"merge":f=Y(Y({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let _=o?o.snapshot:this.routerState.snapshot.root;m=wT(_)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),m=this.currentUrlTree.root}return bT(m,i,f,d??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=ra(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,sc,null,r)}navigate(i,r={skipLocationChange:!1}){return rj(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=Y({},nj):r===!1?o=Y({},ij):o=r,ra(i))return oT(this.currentUrlTree,i,o);let s=this.parseUrl(i);return oT(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,u,d;a?(l=a.resolve,u=a.reject,d=a.promise):d=new Promise((m,_)=>{l=m,u=_});let f=this.pendingTasks.add();return ej(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:l,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new se(4008,!1)}function oj(t){return!(t instanceof dc)&&!(t instanceof hc)}var sj=new Q("");function Bh(t,...e){return yo([{provide:Wy,multi:!0,useValue:t},[],{provide:wr,useFactory:aj,deps:[Er]},{provide:ch,multi:!0,useFactory:lj},e.map(n=>n.\u0275providers)])}function aj(t){return t.routerState.root}function lj(){let t=V(Wn);return e=>{let n=t.get(gr);if(e!==n.components[0])return;let i=t.get(Er),r=t.get(cj);t.get(uj)===1&&i.initialNavigation(),t.get(dj,null,Ce.Optional)?.setUpPreloading(),t.get(sj,null,Ce.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var cj=new Q("",{factory:()=>new Le}),uj=new Q("",{providedIn:"root",factory:()=>1});var dj=new Q("");var hj="firebase",fj="10.13.0";En(hj,fj,"app");var xn=new Ri("ANGULARFIRE2_VERSION");var pj=(t,e)=>{let n=e?[e]:Vu(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},ji=class{constructor(){return pj(mj)}},mj="app-check";function Ky(){}var jh=class{zone;delegate;constructor(e,n=Mm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},Qy=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ky,{},Ky,Ky)),n.pipe(lt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},xo=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new jh(Zone.current)),this.insideAngular=n.run(()=>new jh(Zone.current,Es)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)($(Se))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gj(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function dn(t){return _j(gj())(t)}function _j(t){return function(n){return n=n.lift(new Qy(t.ngZone)),n.pipe(Vn(t.outsideAngular),Zt(t.insideAngular))}}var aa=class{constructor(e){return e}},Jy=class{constructor(){return Vu()}};function yj(t){return t&&t.length===1?t[0]:new aa(Fu())}var BT=new Q("angularfire2._apps"),vj={provide:aa,useFactory:yj,deps:[[new Ni,BT]]},wj={provide:Jy,deps:[[new Ni,BT]]};var jT=(()=>{class t{constructor(n){En("angularfire",xn.full,"core"),En("angularfire",xn.full,"app"),En("angular",ah.full,n.toString())}static \u0275fac=function(i){return new(i||t)($(Lt))};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[vj,wj]})}return t})();var Dr={production:!1,BASE_API_URL:"",firebase:{apiKey:"AIzaSyBNWYDp0fPgLU0npKMC0RoS6C14fHp2mpk",authDomain:"comemivesto-5e5f9.firebaseapp.com",projectId:"comemivesto-5e5f9",storageBucket:"comemivesto-5e5f9.appspot.com",messagingSenderId:"124990581718",appId:"1:124990581718:web:51c8cbf699123bd0e8d277",measurementId:"G-8D9XBPY0Q7"}};function bj(t,e){if(t&1){let n=Qe();T(0,"button",7),he("click",function(r){ue(n);let o=ee();return de(o.onClickAddButton(r))}),ie(1,"i",8),B(2," Aggiungi "),S()}}function Ej(t,e){if(t&1){let n=Qe();T(0,"button",9),he("click",function(r){ue(n);let o=ee();return de(o.onClickCrocetta(r))}),ie(1,"i",10),S()}}var Uh=(()=>{let e=class e{constructor(){this.caption="",this.cssClass="",this.showBreadcrumb=!1,this.isFooter=!1,this.isClosable=!0,this.addButtonShow=!1,this.help="",this.idHelper=0,this.emitHelperClick=new ge,this.emitChiusura=new ge,this.emitAddEvent=new ge,this.emitNavCustomClick=new ge,this.emitButtonToolbarClick=new ge,this.emitBreadCrumbClick=new ge}hideShowToolbarMenu(i){this.emitChiusura.emit("closeToolbar")}onClickCrocetta(i){this.emitChiusura.emit(i)}onClickAddButton(i){this.emitAddEvent.emit(i)}showDropdownMenu(i,r){let o=document.getElementById(r);o!=null&&(o.classList.contains("show")||o.classList.add("show"))}hideDropdownMenu(i,r){let o=document.getElementById(r);o?.classList.remove("show")}onBreadCrumbClick(i,r,o=0){}onBreadCrumbRemoveClick(i,r,o){}emitHelpClick(i){}navigationClick(i){this.emitNavCustomClick.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-caption"]],inputs:{caption:"caption",cssClass:"cssClass",showBreadcrumb:"showBreadcrumb",breadcrumbNavigation:"breadcrumbNavigation",isFooter:"isFooter",isClosable:"isClosable",addButtonShow:"addButtonShow",help:"help",idHelper:"idHelper"},outputs:{emitHelperClick:"emitHelperClick",emitChiusura:"emitChiusura",emitAddEvent:"emitAddEvent",emitNavCustomClick:"emitNavCustomClick",emitButtonToolbarClick:"emitButtonToolbarClick",emitBreadCrumbClick:"emitBreadCrumbClick"},standalone:!0,features:[Te],decls:8,vars:4,consts:[[1,"caption-container",3,"ngClass"],[1,"item-wrap","wrap-item-title"],[1,"page-title"],[1,"item-wrap","last-item-wrap"],[1,""],["class","btn ana-button",3,"click",4,"ngIf"],["class","icon-button",3,"click",4,"ngIf"],[1,"btn","ana-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"icon-button",3,"click"],[1,"mdi","mdi-window-close"]],template:function(r,o){r&1&&(T(0,"div",0)(1,"div",1)(2,"h2",2),B(3),S()(),T(4,"div",3)(5,"div",4),De(6,bj,3,0,"button",5)(7,Ej,2,0,"button",6),S()()()),r&2&&(W("ngClass",o.cssClass),j(3),_n(o.caption),j(3),W("ngIf",o.addButtonShow),j(),W("ngIf",o.isClosable))},dependencies:[Ze,Js,ci],styles:[".caption-container[_ngcontent-%COMP%]{display:flex;width:100%;position:relative;flex-direction:row;align-content:center;justify-content:space-between;align-items:center;height:var(--height_caption)}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px 5px}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-logo-caption[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:25px}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-mButton[_ngcontent-%COMP%], .caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-breadcrumb[_ngcontent-%COMP%]{flex-grow:0}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-breadcrumb[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{margin-bottom:0}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-title[_ngcontent-%COMP%]{text-align:start}.caption-container[_ngcontent-%COMP%]   .item-wrap.last-item-wrap[_ngcontent-%COMP%]{text-align:end;min-width:150px}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.3rem;text-align:left;font-weight:500}  .vertical h2{margin-left:10%;width:50%;text-align:center}  .vertical-text{writing-mode:vertical-lr;text-orientation:upright;width:0px;font-size:24px;word-break:break-all;white-space:pre-wrap;color:#0b0b0b;font-weight:900;font-family:Montserrat}.currentModule[_ngcontent-%COMP%]{font-size:12px;margin:0;color:#fff!important;font-family:Montserrat}"]});let t=e;return t})();var Dj=["toolbarTab"],Cj=["*"];function Ij(t,e){if(t&1&&(T(0,"h2"),ie(1,"span",10),B(2),S()),t&2){let n=ee();j(2),_n(n.subTitle)}}function Tj(t,e){if(t&1&&(T(0,"div",11),ie(1,"span",12),B(2),S()),t&2){let n=ee();j(2),St(" ",n.tip," ")}}var Cr=(()=>{let e=class e{constructor(){this.caption="",this.subTitle="",this.tip="",this.addButtonShow=!1,this.helpDoc="",this.breadcrumbNavigation=[],this.emittChiusura=new ge,this.emittEventButton=new ge,this.emitToolbarLeft=new ge,this.timeInterval=0,this.itemTabs=[],this.showItemsTabs=!1}ngAfterViewInit(){this.getWindowHeight()}getWindowHeight(){let i=window.innerHeight,r=document.documentElement.clientHeight,o=Math.max(i,r),s,a,l;s=document.getElementById("header").offsetHeight,a=document.getElementById("footer").offsetHeight,setTimeout(()=>{l=document.getElementById("horizontalMenucontainer").offsetHeight,l==0&&(l=60.5),this.heightWrap=o-s-a-l,this.heightWrap=this.heightWrap-13},300)}onCrocettaClick(i){this.emittChiusura.emit(i)}buttonToolbarLeft(i){this.emitToolbarLeft.emit(i)}onAddClick(i){this.emittEventButton.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-anagrafica-wrapper"]],viewQuery:function(r,o){if(r&1&&Qs(Dj,7),r&2){let s;Eo(s=Do())&&(o.toolbarTab=s.first)}},inputs:{caption:"caption",subTitle:"subTitle",tip:"tip",addButtonShow:"addButtonShow",helpDoc:"helpDoc",breadcrumbNavigation:"breadcrumbNavigation"},outputs:{emittChiusura:"emittChiusura",emittEventButton:"emittEventButton",emitToolbarLeft:"emitToolbarLeft"},standalone:!0,features:[Te],ngContentSelectors:Cj,decls:11,vars:12,consts:[["id","cWrap",1,"content-wrap"],[1,"anagrafica-wrap"],[3,"emettiChiusura","emitAddEvent","caption","showBreadcrumb","addButtonShow","help","breadcrumbNavigation","isClosable","isFooter"],[1,"anagrafica-container"],[1,"anagrafica-row"],[1,"col-lg-12","wrapForm"],[1,"text"],[4,"ngIf"],["class","alert alert-primary d-flex align-items-centeralert-dismissible fade show","role","alert",4,"ngIf"],[3,"emettiChiusura","showBreadcrumb","isClosable","isFooter"],[1,"mdi","mdi-database"],["role","alert",1,"alert","alert-primary","d-flex","align-items-centeralert-dismissible","fade","show"],[1,"mdi","mdi-lightbulb-alert-outline","me-2"]],template:function(r,o){r&1&&(rh(),T(0,"div",0)(1,"div",1)(2,"app-caption",2),he("emettiChiusura",function(a){return o.onCrocettaClick(a)})("emitAddEvent",function(a){return o.onAddClick(a)}),S(),T(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),De(7,Ij,3,1,"h2",7),S(),De(8,Tj,3,1,"div",8),oh(9,0,["id","ng-content"]),S()()(),T(10,"app-caption",9),he("emettiChiusura",function(a){return o.onCrocettaClick(a)}),S()()()),r&2&&(j(2),W("caption",o.caption)("showBreadcrumb",!1)("addButtonShow",o.addButtonShow)("help",o.helpDoc)("breadcrumbNavigation",o.breadcrumbNavigation)("isClosable",!1)("isFooter",!1),j(5),W("ngIf",o.subTitle),j(),W("ngIf",o.tip),j(2),W("showBreadcrumb",!1)("isClosable",!1)("isFooter",!0))},dependencies:[Uh,Ze,ci],styles:['@charset "UTF-8";  .isPopUp{position:absolute;bottom:0}  .content-wrap{position:relative;overflow-y:auto;width:var(--width_container);margin:5px auto}  .content-wrap .anagrafica-wrap{margin-top:.3rem}  .content-wrap .anagrafica-wrap .anagrafica-container{box-shadow:0 3px 5px #0000000b;margin-top:.88rem;background-color:#fff;border:1px solid #e2e8f0;border-radius:.6rem}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row{position:relative;padding:1.25rem}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar{position:absolute;left:0;top:0;padding:0;width:55px;z-index:2;box-shadow:2px 0 20px #45414e12;border-top:1px solid rgba(0,0,0,.15)}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar.closed{width:0;visibility:hidden}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar.open{width:177px;display:block;visibility:visible;height:100%}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar{-moz-transition:ease .35s;-o-transition:ease .35s;-webkit-transition:ease .3s;transition:ease .35s}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .toolbar-shadow{box-shadow:2px 0 20px #45414e12!important;padding-right:0}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sidebar-sticky-top{padding:0 6px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .item-nav{display:block;height:35px;border-bottom:1px solid rgba(253,253,253,.531);width:100%;padding:0}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .item-nav .item-content i{font-size:25px!important;width:28px!important;height:28px!important;line-height:28px!important;color:#fff!important;font-weight:300!important}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sidebar-sticky-bottom .item-nav{height:26px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sub-item-nav :before{content:"\\fa14";display:block;font-family:Material Design Icons;color:#fff;width:5px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar p{font-size:12px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapForm{border:1px solid rgba(226,232,240,.6);border-radius:.6rem;padding:1.25rem}']});let t=e;return t})();var UT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[Te],decls:2,vars:0,template:function(r,o){r&1&&(T(0,"app-anagrafica-wrapper"),B(1,` dddddd
`),S())},dependencies:[Cr]});let t=e;return t})();var Mj=new Map,Aj={activated:!1,tokenObservers:[]},xj={initialized:!1,enabled:!1};function Kn(t){return Mj.get(t)||Object.assign({},Aj)}function WT(){return xj}var Oj="https://content-firebaseappcheck.googleapis.com/v1";var Rj="exchangeDebugToken",$T={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},gK=24*60*60*1e3;var Xy=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return O(this,null,function*(){this.stop();try{this.pending=new lm,this.pending.promise.catch(n=>{}),yield Nj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new lm,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Nj(t){return new Promise(e=>{setTimeout(e,t)})}var Pj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ir=new J1("appCheck","AppCheck",Pj);function qT(t){if(!Kn(t).activated)throw Ir.create("use-before-activation",{appName:t.name})}function KT(i,r){return O(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let _=yield s.getHeartbeatsHeader();_&&(o["X-Firebase-Client"]=_)}let a={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(t,a)}catch(_){throw Ir.create("fetch-network-error",{originalErrorMessage:_?.message})}if(l.status!==200)throw Ir.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(_){throw Ir.create("fetch-parse-error",{originalErrorMessage:_?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Ir.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:u.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function QT(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${Oj}/projects/${n}/apps/${i}:${Rj}?key=${r}`,body:{debug_token:e}}}var kj="firebase-app-check-database",Fj=1,e0="firebase-app-check-store";var $h=null;function Vj(){return $h||($h=new Promise((t,e)=>{try{let n=indexedDB.open(kj,Fj);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Ir.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(e0,{keyPath:"compositeKey"})}}}catch(n){e(Ir.create("storage-open",{originalErrorMessage:n?.message}))}}),$h)}function Lj(t,e){return Bj(jj(t),e)}function Bj(t,e){return O(this,null,function*(){let i=(yield Vj()).transaction(e0,"readwrite"),o=i.objectStore(e0).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},i.onerror=l=>{var u;a(Ir.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function jj(t){return`${t.options.appId}-${t.name}`}var t0=new ku("@firebase/app-check");function Zy(t,e){return Pu()?Lj(t,e).catch(n=>{t0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function YT(){return WT().enabled}function JT(){return O(this,null,function*(){let t=WT();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Uj={error:"UNKNOWN_ERROR"};function $j(t){return K1.encodeString(JSON.stringify(t),!1)}function n0(t,e=!1){return O(this,null,function*(){let n=t.app;qT(n);let i=Kn(n),r=i.token,o;if(r&&!vc(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(vc(l)?r=l:yield Zy(n,void 0))}if(!e&&r&&vc(r))return{token:r.token};let s=!1;if(YT()){i.exchangeTokenPromise||(i.exchangeTokenPromise=KT(QT(n,yield JT()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let l=yield i.exchangeTokenPromise;return yield Zy(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield Kn(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?t0.warn(l.message):t0.error(l),o=l}let a;return r?o?vc(r)?a={token:r.token,internalError:o}:a=HT(o):(a={token:r.token},i.token=r,yield Zy(n,r)):a=HT(o),s&&Wj(n,a),a})}function Gj(t){return O(this,null,function*(){let e=t.app;qT(e);let{provider:n}=Kn(e);if(YT()){let i=yield JT(),{token:r}=yield KT(QT(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function Hj(t,e,n,i){let{app:r}=t,o=Kn(r),s={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&vc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),GT(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>GT(t))}function ZT(t,e){let n=Kn(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function GT(t){let{app:e}=t,n=Kn(e),i=n.tokenRefresher;i||(i=zj(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function zj(t){let{app:e}=t;return new Xy(()=>O(this,null,function*(){let n=Kn(e),i;if(n.token?i=yield n0(t,!0):i=yield n0(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Kn(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},$T.RETRIAL_MIN_WAIT,$T.RETRIAL_MAX_WAIT)}function Wj(t,e){let n=Kn(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function vc(t){return t.expireTimeMillis-Date.now()>0}function HT(t){return{token:$j(Uj),error:t}}var i0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Kn(this.app);for(let n of e)ZT(this.app,n.next);return Promise.resolve()}};function qj(t,e){return new i0(t,e)}function Kj(t){return{getToken:e=>n0(t,e),getLimitedUseToken:()=>Gj(t),addTokenListener:e=>Hj(t,"INTERNAL",e),removeTokenListener:e=>ZT(t.app,e)}}var Qj="@firebase/app-check",Yj="0.8.7";var Jj="app-check",zT="app-check-internal";function Zj(){El(new no(Jj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return qj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(zT).initialize()})),El(new no(zT,t=>{let e=t.getProvider("app-check").getImmediate();return Kj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),En(Qj,Yj)}Zj();var Xj=["localhost","0.0.0.0","127.0.0.1"],MK=typeof window<"u"&&Xj.includes(window.location.hostname);var eU="firebase",tU="10.13.0";Nt.registerVersion(eU,tU,"app-compat");var nU=["ngOnDestroy"],Hh=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(nU.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(u=>n.run(()=>u)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,u)=>s.then(d=>{let f=d?.(...u);return i?.spy?.apply&&i.spy.apply(o,u,f),f})})})});var Gh=class{constructor(e){return e}},Tr=new Q("angularfire2.app.options"),Sr=new Q("angularfire2.app.name");function Oo(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=Nt.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>Nt.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;iU("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Gh(s)}var iU=(t,...e)=>{$_()&&typeof console<"u"&&console[t](...e)},rU={provide:Gh,useFactory:Oo,deps:[Tr,Se,[new Ni,Sr]]},eS=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:Tr,useValue:n},{provide:Sr,useValue:i}]}}constructor(n){Nt.registerVersion("angularfire",xn.full,"core"),Nt.registerVersion("angularfire",xn.full,"app-compat"),Nt.registerVersion("angular",ah.full,n.toString())}static \u0275fac=function(i){return new(i||t)($(Lt))};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[rU]})}return t})();function la(t,e,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return oU(r,s)||(XT("error",`${e} was already initialized on the ${n} Firebase App with different settings.${sU?" You may need to reload as Firebase is not HMR aware.":""}`),XT("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function oU(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var sU=typeof module<"u"&&!!module.hot,XT=(t,...e)=>{$_()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var o0=new Q("angularfire2.auth.use-emulator"),s0=new Q("angularfire2.auth.settings"),a0=new Q("angularfire2.auth.tenant-id"),l0=new Q("angularfire2.auth.langugage-code"),c0=new Q("angularfire2.auth.use-device-language"),u0=new Q("angularfire.auth.persistence"),d0=(t,e,n,i,r,o,s,a)=>la(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let l=e.runOutsideAngular(()=>t.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(let[u,d]of Object.entries(s))l.settings[u]=d;return a&&l.setPersistence(a),l},[n,i,r,o,s,a]),h0=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,l,u,d,f,m,_){let D=new Le,M=te(void 0).pipe(Zt(s.outsideAngular),Ge(()=>o.runOutsideAngular(()=>import("./chunk-T7Z74EPC.js"))),J(()=>Oo(n,o,i)),J(A=>d0(A,o,a,u,d,f,l,m)),Ss({bufferSize:1,refCount:!1}));if(_r(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=te(null);else{M.pipe(Cn()).subscribe();let A=M.pipe(Ge(U=>U.getRedirectResult().then(K=>K,()=>null)),dn,Ss({bufferSize:1,refCount:!1})),k=M.pipe(Ge(U=>new fe(K=>({unsubscribe:o.runOutsideAngular(()=>U.onAuthStateChanged(le=>K.next(le),le=>K.error(le),()=>K.complete()))})))),q=M.pipe(Ge(U=>new fe(K=>({unsubscribe:o.runOutsideAngular(()=>U.onIdTokenChanged(le=>K.next(le),le=>K.error(le),()=>K.complete()))}))));this.authState=A.pipe(dd(k),Vn(s.outsideAngular),Zt(s.insideAngular)),this.user=A.pipe(dd(q),Vn(s.outsideAngular),Zt(s.insideAngular)),this.idToken=this.user.pipe(Ge(U=>U?xe(U.getIdToken()):te(null))),this.idTokenResult=this.user.pipe(Ge(U=>U?xe(U.getIdTokenResult()):te(null))),this.credential=ad(A,D,this.authState.pipe(rt(U=>!U))).pipe(J(U=>U?.user?U:null),Vn(s.outsideAngular),Zt(s.insideAngular))}return Hh(this,M,o,{spy:{apply:(A,k,q)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&q.then(U=>D.next(U))}}})}static \u0275fac=function(i){return new(i||t)($(Tr),$(Sr,8),$(Lt),$(Se),$(xo),$(o0,8),$(s0,8),$(a0,8),$(l0,8),$(c0,8),$(u0,8),$(ji,8))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),tS=(()=>{class t{constructor(){Nt.registerVersion("angularfire",xn.full,"auth-compat")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[h0]})}return t})();var nS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iS={};var Mr,f0;(function(){var t;function e(b,y){function w(){}w.prototype=y.prototype,b.D=y.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(E,C,x){for(var v=Array(arguments.length-2),Di=2;Di<arguments.length;Di++)v[Di-2]=arguments[Di];return y.prototype[C].apply(E,v)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)E[C]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(C=0;16>C;++C)E[C]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=b.g[0],w=b.g[1],C=b.g[2];var x=b.g[3],v=y+(x^w&(C^x))+E[0]+3614090360&4294967295;y=w+(v<<7&4294967295|v>>>25),v=x+(C^y&(w^C))+E[1]+3905402710&4294967295,x=y+(v<<12&4294967295|v>>>20),v=C+(w^x&(y^w))+E[2]+606105819&4294967295,C=x+(v<<17&4294967295|v>>>15),v=w+(y^C&(x^y))+E[3]+3250441966&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(x^w&(C^x))+E[4]+4118548399&4294967295,y=w+(v<<7&4294967295|v>>>25),v=x+(C^y&(w^C))+E[5]+1200080426&4294967295,x=y+(v<<12&4294967295|v>>>20),v=C+(w^x&(y^w))+E[6]+2821735955&4294967295,C=x+(v<<17&4294967295|v>>>15),v=w+(y^C&(x^y))+E[7]+4249261313&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(x^w&(C^x))+E[8]+1770035416&4294967295,y=w+(v<<7&4294967295|v>>>25),v=x+(C^y&(w^C))+E[9]+2336552879&4294967295,x=y+(v<<12&4294967295|v>>>20),v=C+(w^x&(y^w))+E[10]+4294925233&4294967295,C=x+(v<<17&4294967295|v>>>15),v=w+(y^C&(x^y))+E[11]+2304563134&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(x^w&(C^x))+E[12]+1804603682&4294967295,y=w+(v<<7&4294967295|v>>>25),v=x+(C^y&(w^C))+E[13]+4254626195&4294967295,x=y+(v<<12&4294967295|v>>>20),v=C+(w^x&(y^w))+E[14]+2792965006&4294967295,C=x+(v<<17&4294967295|v>>>15),v=w+(y^C&(x^y))+E[15]+1236535329&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(C^x&(w^C))+E[1]+4129170786&4294967295,y=w+(v<<5&4294967295|v>>>27),v=x+(w^C&(y^w))+E[6]+3225465664&4294967295,x=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(x^y))+E[11]+643717713&4294967295,C=x+(v<<14&4294967295|v>>>18),v=w+(x^y&(C^x))+E[0]+3921069994&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(C^x&(w^C))+E[5]+3593408605&4294967295,y=w+(v<<5&4294967295|v>>>27),v=x+(w^C&(y^w))+E[10]+38016083&4294967295,x=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(x^y))+E[15]+3634488961&4294967295,C=x+(v<<14&4294967295|v>>>18),v=w+(x^y&(C^x))+E[4]+3889429448&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(C^x&(w^C))+E[9]+568446438&4294967295,y=w+(v<<5&4294967295|v>>>27),v=x+(w^C&(y^w))+E[14]+3275163606&4294967295,x=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(x^y))+E[3]+4107603335&4294967295,C=x+(v<<14&4294967295|v>>>18),v=w+(x^y&(C^x))+E[8]+1163531501&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(C^x&(w^C))+E[13]+2850285829&4294967295,y=w+(v<<5&4294967295|v>>>27),v=x+(w^C&(y^w))+E[2]+4243563512&4294967295,x=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(x^y))+E[7]+1735328473&4294967295,C=x+(v<<14&4294967295|v>>>18),v=w+(x^y&(C^x))+E[12]+2368359562&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(w^C^x)+E[5]+4294588738&4294967295,y=w+(v<<4&4294967295|v>>>28),v=x+(y^w^C)+E[8]+2272392833&4294967295,x=y+(v<<11&4294967295|v>>>21),v=C+(x^y^w)+E[11]+1839030562&4294967295,C=x+(v<<16&4294967295|v>>>16),v=w+(C^x^y)+E[14]+4259657740&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(w^C^x)+E[1]+2763975236&4294967295,y=w+(v<<4&4294967295|v>>>28),v=x+(y^w^C)+E[4]+1272893353&4294967295,x=y+(v<<11&4294967295|v>>>21),v=C+(x^y^w)+E[7]+4139469664&4294967295,C=x+(v<<16&4294967295|v>>>16),v=w+(C^x^y)+E[10]+3200236656&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(w^C^x)+E[13]+681279174&4294967295,y=w+(v<<4&4294967295|v>>>28),v=x+(y^w^C)+E[0]+3936430074&4294967295,x=y+(v<<11&4294967295|v>>>21),v=C+(x^y^w)+E[3]+3572445317&4294967295,C=x+(v<<16&4294967295|v>>>16),v=w+(C^x^y)+E[6]+76029189&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(w^C^x)+E[9]+3654602809&4294967295,y=w+(v<<4&4294967295|v>>>28),v=x+(y^w^C)+E[12]+3873151461&4294967295,x=y+(v<<11&4294967295|v>>>21),v=C+(x^y^w)+E[15]+530742520&4294967295,C=x+(v<<16&4294967295|v>>>16),v=w+(C^x^y)+E[2]+3299628645&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(C^(w|~x))+E[0]+4096336452&4294967295,y=w+(v<<6&4294967295|v>>>26),v=x+(w^(y|~C))+E[7]+1126891415&4294967295,x=y+(v<<10&4294967295|v>>>22),v=C+(y^(x|~w))+E[14]+2878612391&4294967295,C=x+(v<<15&4294967295|v>>>17),v=w+(x^(C|~y))+E[5]+4237533241&4294967295,w=C+(v<<21&4294967295|v>>>11),v=y+(C^(w|~x))+E[12]+1700485571&4294967295,y=w+(v<<6&4294967295|v>>>26),v=x+(w^(y|~C))+E[3]+2399980690&4294967295,x=y+(v<<10&4294967295|v>>>22),v=C+(y^(x|~w))+E[10]+4293915773&4294967295,C=x+(v<<15&4294967295|v>>>17),v=w+(x^(C|~y))+E[1]+2240044497&4294967295,w=C+(v<<21&4294967295|v>>>11),v=y+(C^(w|~x))+E[8]+1873313359&4294967295,y=w+(v<<6&4294967295|v>>>26),v=x+(w^(y|~C))+E[15]+4264355552&4294967295,x=y+(v<<10&4294967295|v>>>22),v=C+(y^(x|~w))+E[6]+2734768916&4294967295,C=x+(v<<15&4294967295|v>>>17),v=w+(x^(C|~y))+E[13]+1309151649&4294967295,w=C+(v<<21&4294967295|v>>>11),v=y+(C^(w|~x))+E[4]+4149444226&4294967295,y=w+(v<<6&4294967295|v>>>26),v=x+(w^(y|~C))+E[11]+3174756917&4294967295,x=y+(v<<10&4294967295|v>>>22),v=C+(y^(x|~w))+E[2]+718787259&4294967295,C=x+(v<<15&4294967295|v>>>17),v=w+(x^(C|~y))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(C+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+C&4294967295,b.g[3]=b.g[3]+x&4294967295}i.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var w=y-this.blockSize,E=this.B,C=this.h,x=0;x<y;){if(C==0)for(;x<=w;)r(this,b,x),x+=this.blockSize;if(typeof b=="string"){for(;x<y;)if(E[C++]=b.charCodeAt(x++),C==this.blockSize){r(this,E),C=0;break}}else for(;x<y;)if(E[C++]=b[x++],C==this.blockSize){r(this,E),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var w=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=w&255,w/=256;for(this.u(b),b=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)b[w++]=this.g[y]>>>E&255;return b};function o(b,y){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=y(b)}function s(b,y){this.h=y;for(var w=[],E=!0,C=b.length-1;0<=C;C--){var x=b[C]|0;E&&x==y||(w[C]=x,E=!1)}this.g=w}var a={};function l(b){return-128<=b&&128>b?o(b,function(y){return new s([y|0],0>y?-1:0)}):new s([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return A(u(-b));for(var y=[],w=1,E=0;b>=w;E++)y[E]=b/w|0,w*=4294967296;return new s(y,0)}function d(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return A(d(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(y,8)),E=f,C=0;C<b.length;C+=8){var x=Math.min(8,b.length-C),v=parseInt(b.substring(C,C+x),y);8>x?(x=u(Math.pow(y,x)),E=E.j(x).add(u(v))):(E=E.j(w),E=E.add(u(v)))}return E}var f=l(0),m=l(1),_=l(16777216);t=s.prototype,t.m=function(){if(M(this))return-A(this).m();for(var b=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);b+=(0<=E?E:4294967296+E)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D(this))return"0";if(M(this))return"-"+A(this).toString(b);for(var y=u(Math.pow(b,6)),w=this,E="";;){var C=K(w,y).g;w=k(w,C.j(y));var x=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=C,D(w))return x+E;for(;6>x.length;)x="0"+x;E=x+E}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function D(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function M(b){return b.h==-1}t.l=function(b){return b=k(this,b),M(b)?-1:D(b)?0:1};function A(b){for(var y=b.g.length,w=[],E=0;E<y;E++)w[E]=~b.g[E];return new s(w,~b.h).add(m)}t.abs=function(){return M(this)?A(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0,C=0;C<=y;C++){var x=E+(this.i(C)&65535)+(b.i(C)&65535),v=(x>>>16)+(this.i(C)>>>16)+(b.i(C)>>>16);E=v>>>16,x&=65535,v&=65535,w[C]=v<<16|x}return new s(w,w[w.length-1]&-2147483648?-1:0)};function k(b,y){return b.add(A(y))}t.j=function(b){if(D(this)||D(b))return f;if(M(this))return M(b)?A(this).j(A(b)):A(A(this).j(b));if(M(b))return A(this.j(A(b)));if(0>this.l(_)&&0>b.l(_))return u(this.m()*b.m());for(var y=this.g.length+b.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<b.g.length;C++){var x=this.i(E)>>>16,v=this.i(E)&65535,Di=b.i(C)>>>16,nl=b.i(C)&65535;w[2*E+2*C]+=v*nl,q(w,2*E+2*C),w[2*E+2*C+1]+=x*nl,q(w,2*E+2*C+1),w[2*E+2*C+1]+=v*Di,q(w,2*E+2*C+1),w[2*E+2*C+2]+=x*Di,q(w,2*E+2*C+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function q(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function U(b,y){this.g=b,this.h=y}function K(b,y){if(D(y))throw Error("division by zero");if(D(b))return new U(f,f);if(M(b))return y=K(A(b),y),new U(A(y.g),A(y.h));if(M(y))return y=K(b,A(y)),new U(A(y.g),y.h);if(30<b.g.length){if(M(b)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(b);)w=le(w),E=le(E);var C=re(w,1),x=re(E,1);for(E=re(E,2),w=re(w,2);!D(E);){var v=x.add(E);0>=v.l(b)&&(C=C.add(w),x=v),E=re(E,1),w=re(w,1)}return y=k(b,C.j(y)),new U(C,y)}for(C=f;0<=b.l(y);){for(w=Math.max(1,Math.floor(b.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),x=u(w),v=x.j(y);M(v)||0<v.l(b);)w-=E,x=u(w),v=x.j(y);D(x)&&(x=m),C=C.add(x),b=k(b,v)}return new U(C,b)}t.A=function(b){return K(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&b.i(E);return new s(w,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|b.i(E);return new s(w,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^b.i(E);return new s(w,this.h^b.h)};function le(b){for(var y=b.g.length+1,w=[],E=0;E<y;E++)w[E]=b.i(E)<<1|b.i(E-1)>>>31;return new s(w,b.h)}function re(b,y){var w=y>>5;y%=32;for(var E=b.g.length-w,C=[],x=0;x<E;x++)C[x]=0<y?b.i(x+w)>>>y|b.i(x+w+1)<<32-y:b.i(x+w);return new s(C,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,f0=iS.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Mr=iS.Integer=s}).apply(typeof nS<"u"?nS:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ui={};var p0,m0,ca,g0,wc,Wh,_0,y0,v0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=n(this);function r(c,h){if(h)e:{var p=i;c=c.split(".");for(var g=0;g<c.length-1;g++){var I=c[g];if(!(I in p))break e;p=p[I]}c=c[c.length-1],g=p[c],h=h(g),h!=g&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,g=!1,I={next:function(){if(!g&&p<c.length){var P=p++;return{value:h(P,c[P]),done:!1}}return g=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}r("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function l(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function u(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,g),c.apply(h,I)}}return function(){return c.apply(h,arguments)}}function m(c,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function _(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function D(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(g,I,P){for(var G=Array(arguments.length-2),He=2;He<arguments.length;He++)G[He-2]=arguments[He];return h.prototype[I].apply(g,G)}}function M(c){let h=c.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=c[g];return p}return[]}function A(c,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(l(g)){let I=c.length||0,P=g.length||0;c.length=I+P;for(let G=0;G<P;G++)c[I+G]=g[G]}else c.push(g)}}class k{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(c){return/^[\s\xa0]*$/.test(c)}function U(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function K(c){return K[" "](c),c}K[" "]=function(){};var le=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function re(c,h,p){for(let g in c)h.call(p,c[g],g,c)}function b(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function y(c){let h={};for(let p in c)h[p]=c[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,h){let p,g;for(let I=1;I<arguments.length;I++){g=arguments[I];for(p in g)c[p]=g[p];for(let P=0;P<w.length;P++)p=w[P],Object.prototype.hasOwnProperty.call(g,p)&&(c[p]=g[p])}}function C(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function x(c){a.setTimeout(()=>{throw c},0)}function v(){var c=Fp;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class Di{constructor(){this.h=this.g=null}add(h,p){let g=nl.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var nl=new k(()=>new HO,c=>c.reset());class HO{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let il,rl=!1,Fp=new Di,Hb=()=>{let c=a.Promise.resolve(void 0);il=()=>{c.then(zO)}};var zO=()=>{for(var c;c=v();){try{c.h.call(c.g)}catch(p){x(p)}var h=nl;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}rl=!1};function Zi(){this.s=this.s,this.C=this.C}Zi.prototype.s=!1,Zi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Zi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ut(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}Ut.prototype.h=function(){this.defaultPrevented=!0};var WO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function ol(c,h){if(Ut.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(le){e:{try{K(h.nodeName);var I=!0;break e}catch{}I=!1}I||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:qO[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ol.aa.h.call(this)}}D(ol,Ut);var qO={2:"touch",3:"pen",4:"mouse"};ol.prototype.h=function(){ol.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var sl="closure_listenable_"+(1e6*Math.random()|0),KO=0;function QO(c,h,p,g,I){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=I,this.key=++KO,this.da=this.fa=!1}function gu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function _u(c){this.src=c,this.g={},this.h=0}_u.prototype.add=function(c,h,p,g,I){var P=c.toString();c=this.g[P],c||(c=this.g[P]=[],this.h++);var G=Lp(c,h,g,I);return-1<G?(h=c[G],p||(h.fa=!1)):(h=new QO(h,this.src,P,!!g,I),h.fa=p,c.push(h)),h};function Vp(c,h){var p=h.type;if(p in c.g){var g=c.g[p],I=Array.prototype.indexOf.call(g,h,void 0),P;(P=0<=I)&&Array.prototype.splice.call(g,I,1),P&&(gu(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Lp(c,h,p,g){for(var I=0;I<c.length;++I){var P=c[I];if(!P.da&&P.listener==h&&P.capture==!!p&&P.ha==g)return I}return-1}var Bp="closure_lm_"+(1e6*Math.random()|0),jp={};function zb(c,h,p,g,I){if(g&&g.once)return qb(c,h,p,g,I);if(Array.isArray(h)){for(var P=0;P<h.length;P++)zb(c,h[P],p,g,I);return null}return p=Hp(p),c&&c[sl]?c.K(h,p,u(g)?!!g.capture:!!g,I):Wb(c,h,p,!1,g,I)}function Wb(c,h,p,g,I,P){if(!h)throw Error("Invalid event type");var G=u(I)?!!I.capture:!!I,He=$p(c);if(He||(c[Bp]=He=new _u(c)),p=He.add(h,p,g,G,P),p.proxy)return p;if(g=YO(),p.proxy=g,g.src=c,g.listener=p,c.addEventListener)WO||(I=G),I===void 0&&(I=!1),c.addEventListener(h.toString(),g,I);else if(c.attachEvent)c.attachEvent(Qb(h.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function YO(){function c(p){return h.call(c.src,c.listener,p)}let h=JO;return c}function qb(c,h,p,g,I){if(Array.isArray(h)){for(var P=0;P<h.length;P++)qb(c,h[P],p,g,I);return null}return p=Hp(p),c&&c[sl]?c.L(h,p,u(g)?!!g.capture:!!g,I):Wb(c,h,p,!0,g,I)}function Kb(c,h,p,g,I){if(Array.isArray(h))for(var P=0;P<h.length;P++)Kb(c,h[P],p,g,I);else g=u(g)?!!g.capture:!!g,p=Hp(p),c&&c[sl]?(c=c.i,h=String(h).toString(),h in c.g&&(P=c.g[h],p=Lp(P,p,g,I),-1<p&&(gu(P[p]),Array.prototype.splice.call(P,p,1),P.length==0&&(delete c.g[h],c.h--)))):c&&(c=$p(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Lp(h,p,g,I)),(p=-1<c?h[c]:null)&&Up(p))}function Up(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[sl])Vp(h.i,c);else{var p=c.type,g=c.proxy;h.removeEventListener?h.removeEventListener(p,g,c.capture):h.detachEvent?h.detachEvent(Qb(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=$p(h))?(Vp(p,c),p.h==0&&(p.src=null,h[Bp]=null)):gu(c)}}}function Qb(c){return c in jp?jp[c]:jp[c]="on"+c}function JO(c,h){if(c.da)c=!0;else{h=new ol(h,this);var p=c.listener,g=c.ha||c.src;c.fa&&Up(c),c=p.call(g,h)}return c}function $p(c){return c=c[Bp],c instanceof _u?c:null}var Gp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hp(c){return typeof c=="function"?c:(c[Gp]||(c[Gp]=function(h){return c.handleEvent(h)}),c[Gp])}function $t(){Zi.call(this),this.i=new _u(this),this.M=this,this.F=null}D($t,Zi),$t.prototype[sl]=!0,$t.prototype.removeEventListener=function(c,h,p,g){Kb(this,c,h,p,g)};function Yt(c,h){var p,g=c.F;if(g)for(p=[];g;g=g.F)p.push(g);if(c=c.M,g=h.type||h,typeof h=="string")h=new Ut(h,c);else if(h instanceof Ut)h.target=h.target||c;else{var I=h;h=new Ut(g,c),E(h,I)}if(I=!0,p)for(var P=p.length-1;0<=P;P--){var G=h.g=p[P];I=yu(G,g,!0,h)&&I}if(G=h.g=c,I=yu(G,g,!0,h)&&I,I=yu(G,g,!1,h)&&I,p)for(P=0;P<p.length;P++)G=h.g=p[P],I=yu(G,g,!1,h)&&I}$t.prototype.N=function(){if($t.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],g=0;g<p.length;g++)gu(p[g]);delete c.g[h],c.h--}}this.F=null},$t.prototype.K=function(c,h,p,g){return this.i.add(String(c),h,!1,p,g)},$t.prototype.L=function(c,h,p,g){return this.i.add(String(c),h,!0,p,g)};function yu(c,h,p,g){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var I=!0,P=0;P<h.length;++P){var G=h[P];if(G&&!G.da&&G.capture==p){var He=G.listener,Rt=G.ha||G.src;G.fa&&Vp(c.i,G),I=He.call(Rt,g)!==!1&&I}}return I&&!g.defaultPrevented}function Yb(c,h,p){if(typeof c=="function")p&&(c=m(c,p));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function Jb(c){c.g=Yb(()=>{c.g=null,c.i&&(c.i=!1,Jb(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class ZO extends Zi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Jb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function al(c){Zi.call(this),this.h=c,this.g={}}D(al,Zi);var Zb=[];function Xb(c){re(c.g,function(h,p){this.g.hasOwnProperty(p)&&Up(h)},c),c.g={}}al.prototype.N=function(){al.aa.N.call(this),Xb(this)},al.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zp=a.JSON.stringify,XO=a.JSON.parse,eR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Wp(){}Wp.prototype.h=null;function e1(c){return c.h||(c.h=c.i())}function t1(){}var ll={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qp(){Ut.call(this,"d")}D(qp,Ut);function Kp(){Ut.call(this,"c")}D(Kp,Ut);var Zr={},n1=null;function vu(){return n1=n1||new $t}Zr.La="serverreachability";function i1(c){Ut.call(this,Zr.La,c)}D(i1,Ut);function cl(c){let h=vu();Yt(h,new i1(h))}Zr.STAT_EVENT="statevent";function r1(c,h){Ut.call(this,Zr.STAT_EVENT,c),this.stat=h}D(r1,Ut);function Jt(c){let h=vu();Yt(h,new r1(h,c))}Zr.Ma="timingevent";function o1(c,h){Ut.call(this,Zr.Ma,c),this.size=h}D(o1,Ut);function ul(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function dl(){this.g=!0}dl.prototype.xa=function(){this.g=!1};function tR(c,h,p,g,I,P){c.info(function(){if(c.g)if(P)for(var G="",He=P.split("&"),Rt=0;Rt<He.length;Rt++){var Fe=He[Rt].split("=");if(1<Fe.length){var Gt=Fe[0];Fe=Fe[1];var Ht=Gt.split("_");G=2<=Ht.length&&Ht[1]=="type"?G+(Gt+"="+Fe+"&"):G+(Gt+"=redacted&")}}else G=null;else G=P;return"XMLHTTP REQ ("+g+") [attempt "+I+"]: "+h+`
`+p+`
`+G})}function nR(c,h,p,g,I,P,G){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+I+"]: "+h+`
`+p+`
`+P+" "+G})}function cs(c,h,p,g){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+rR(c,p)+(g?" "+g:"")})}function iR(c,h){c.info(function(){return"TIMEOUT: "+h})}dl.prototype.info=function(){};function rR(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var g=p[c];if(!(2>g.length)){var I=g[1];if(Array.isArray(I)&&!(1>I.length)){var P=I[0];if(P!="noop"&&P!="stop"&&P!="close")for(var G=1;G<I.length;G++)I[G]=""}}}}return zp(p)}catch{return h}}var wu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},s1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qp;function bu(){}D(bu,Wp),bu.prototype.g=function(){return new XMLHttpRequest},bu.prototype.i=function(){return{}},Qp=new bu;function Xi(c,h,p,g){this.j=c,this.i=h,this.l=p,this.R=g||1,this.U=new al(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new a1}function a1(){this.i=null,this.g="",this.h=!1}var l1={},Yp={};function Jp(c,h,p){c.L=1,c.v=Iu(Ci(h)),c.m=p,c.P=!0,c1(c,null)}function c1(c,h){c.F=Date.now(),Eu(c),c.A=Ci(c.v);var p=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),D1(p.i,"t",g),c.C=0,p=c.j.J,c.h=new a1,c.g=U1(c.j,p?h:null,!c.m),0<c.O&&(c.M=new ZO(m(c.Y,c,c.g),c.O)),h=c.U,p=c.g,g=c.ca;var I="readystatechange";Array.isArray(I)||(I&&(Zb[0]=I.toString()),I=Zb);for(var P=0;P<I.length;P++){var G=zb(p,I[P],g||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),cl(),tR(c.i,c.u,c.A,c.l,c.R,c.m)}Xi.prototype.ca=function(c){c=c.target;let h=this.M;h&&Ii(c)==3?h.j():this.Y(c)},Xi.prototype.Y=function(c){try{if(c==this.g)e:{let Ht=Ii(this.g);var h=this.g.Ba();let hs=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||x1(this.g)))){this.J||Ht!=4||h==7||(h==8||0>=hs?cl(3):cl(2)),Zp(this);var p=this.g.Z();this.X=p;t:if(u1(this)){var g=x1(this.g);c="";var I=g.length,P=Ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),hl(this);var G="";break t}this.h.i=new a.TextDecoder}for(h=0;h<I;h++)this.h.h=!0,c+=this.h.i.decode(g[h],{stream:!(P&&h==I-1)});g.length=0,this.h.g+=c,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=p==200,nR(this.i,this.u,this.A,this.l,this.R,Ht,p),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Rt=this.g;if((He=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(He)){var Fe=He;break t}}Fe=null}if(p=Fe)cs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xp(this,p);else{this.o=!1,this.s=3,Jt(12),Xr(this),hl(this);break e}}if(this.P){p=!0;let kn;for(;!this.J&&this.C<G.length;)if(kn=oR(this,G),kn==Yp){Ht==4&&(this.s=4,Jt(14),p=!1),cs(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==l1){this.s=4,Jt(15),cs(this.i,this.l,G,"[Invalid Chunk]"),p=!1;break}else cs(this.i,this.l,kn,null),Xp(this,kn);if(u1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||G.length!=0||this.h.h||(this.s=1,Jt(16),p=!1),this.o=this.o&&p,!p)cs(this.i,this.l,G,"[Invalid Chunked Response]"),Xr(this),hl(this);else if(0<G.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),om(Gt),Gt.M=!0,Jt(11))}}else cs(this.i,this.l,G,null),Xp(this,G);Ht==4&&Xr(this),this.o&&!this.J&&(Ht==4?V1(this.j,this):(this.o=!1,Eu(this)))}else ER(this.g),p==400&&0<G.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),Xr(this),hl(this)}}}catch{}finally{}};function u1(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function oR(c,h){var p=c.C,g=h.indexOf(`
`,p);return g==-1?Yp:(p=Number(h.substring(p,g)),isNaN(p)?l1:(g+=1,g+p>h.length?Yp:(h=h.slice(g,g+p),c.C=g+p,h)))}Xi.prototype.cancel=function(){this.J=!0,Xr(this)};function Eu(c){c.S=Date.now()+c.I,d1(c,c.I)}function d1(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ul(m(c.ba,c),h)}function Zp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Xi.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(iR(this.i,this.A),this.L!=2&&(cl(),Jt(17)),Xr(this),this.s=2,hl(this)):d1(this,this.S-c)};function hl(c){c.j.G==0||c.J||V1(c.j,c)}function Xr(c){Zp(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,Xb(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function Xp(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||em(p.h,c))){if(!c.K&&em(p.h,c)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var I=g;if(I[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)xu(p),Mu(p);else break e;rm(p),Jt(18)}}else p.za=I[1],0<p.za-p.T&&37500>I[2]&&p.F&&p.v==0&&!p.C&&(p.C=ul(m(p.Za,p),6e3));if(1>=p1(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else to(p,11)}else if((c.K||p.g==c)&&xu(p),!q(h))for(I=p.Da.g.parse(h),h=0;h<I.length;h++){let Fe=I[h];if(p.T=Fe[0],Fe=Fe[1],p.G==2)if(Fe[0]=="c"){p.K=Fe[1],p.ia=Fe[2];let Gt=Fe[3];Gt!=null&&(p.la=Gt,p.j.info("VER="+p.la));let Ht=Fe[4];Ht!=null&&(p.Aa=Ht,p.j.info("SVER="+p.Aa));let hs=Fe[5];hs!=null&&typeof hs=="number"&&0<hs&&(g=1.5*hs,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let kn=c.g;if(kn){let Ru=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ru){var P=g.h;P.g||Ru.indexOf("spdy")==-1&&Ru.indexOf("quic")==-1&&Ru.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(tm(P,P.h),P.h=null))}if(g.D){let sm=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;sm&&(g.ya=sm,Ke(g.I,g.D,sm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var G=c;if(g.qa=j1(g,g.J?g.ia:null,g.W),G.K){m1(g.h,G);var He=G,Rt=g.L;Rt&&(He.I=Rt),He.B&&(Zp(He),Eu(He)),g.g=G}else k1(g);0<p.i.length&&Au(p)}else Fe[0]!="stop"&&Fe[0]!="close"||to(p,7);else p.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?to(p,7):im(p):Fe[0]!="noop"&&p.l&&p.l.ta(Fe),p.v=0)}}cl(4)}catch{}}var sR=class{constructor(c,h){this.g=c,this.map=h}};function h1(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function f1(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function p1(c){return c.h?1:c.g?c.g.size:0}function em(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function tm(c,h){c.g?c.g.add(h):c.h=h}function m1(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}h1.prototype.cancel=function(){if(this.i=g1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function g1(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return M(c.i)}function aR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var h=[],p=c.length,g=0;g<p;g++)h.push(c[g]);return h}h=[],p=0;for(g in c)h[p++]=c[g];return h}function lR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let g in c)h[p++]=g;return h}}}function _1(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=lR(c),g=aR(c),I=g.length,P=0;P<I;P++)h.call(void 0,g[P],p&&p[P],c)}var y1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cR(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var g=c[p].indexOf("="),I=null;if(0<=g){var P=c[p].substring(0,g);I=c[p].substring(g+1)}else P=c[p];h(P,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function eo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof eo){this.h=c.h,Du(this,c.j),this.o=c.o,this.g=c.g,Cu(this,c.s),this.l=c.l;var h=c.i,p=new ml;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),v1(this,p),this.m=c.m}else c&&(h=String(c).match(y1))?(this.h=!1,Du(this,h[1]||"",!0),this.o=fl(h[2]||""),this.g=fl(h[3]||"",!0),Cu(this,h[4]),this.l=fl(h[5]||"",!0),v1(this,h[6]||"",!0),this.m=fl(h[7]||"")):(this.h=!1,this.i=new ml(null,this.h))}eo.prototype.toString=function(){var c=[],h=this.j;h&&c.push(pl(h,w1,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(pl(h,w1,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(pl(p,p.charAt(0)=="/"?hR:dR,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",pl(p,pR)),c.join("")};function Ci(c){return new eo(c)}function Du(c,h,p){c.j=p?fl(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Cu(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function v1(c,h,p){h instanceof ml?(c.i=h,mR(c.i,c.h)):(p||(h=pl(h,fR)),c.i=new ml(h,c.h))}function Ke(c,h,p){c.i.set(h,p)}function Iu(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function fl(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function pl(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,uR),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function uR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var w1=/[#\/\?@]/g,dR=/[#\?:]/g,hR=/[#\?]/g,fR=/[#\?@]/g,pR=/#/g;function ml(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function er(c){c.g||(c.g=new Map,c.h=0,c.i&&cR(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ml.prototype,t.add=function(c,h){er(this),this.i=null,c=us(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function b1(c,h){er(c),h=us(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function E1(c,h){return er(c),h=us(c,h),c.g.has(h)}t.forEach=function(c,h){er(this),this.g.forEach(function(p,g){p.forEach(function(I){c.call(h,I,g,this)},this)},this)},t.na=function(){er(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let I=c[g];for(let P=0;P<I.length;P++)p.push(h[g])}return p},t.V=function(c){er(this);let h=[];if(typeof c=="string")E1(this,c)&&(h=h.concat(this.g.get(us(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},t.set=function(c,h){return er(this),this.i=null,c=us(this,c),E1(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},t.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function D1(c,h,p){b1(c,h),0<p.length&&(c.i=null,c.g.set(us(c,h),M(p)),c.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let P=encodeURIComponent(String(g)),G=this.V(g);for(g=0;g<G.length;g++){var I=P;G[g]!==""&&(I+="="+encodeURIComponent(String(G[g]))),c.push(I)}}return this.i=c.join("&")};function us(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function mR(c,h){h&&!c.j&&(er(c),c.i=null,c.g.forEach(function(p,g){var I=g.toLowerCase();g!=I&&(b1(this,g),D1(this,I,p))},c)),c.j=h}function gR(c,h){let p=new dl;if(a.Image){let g=new Image;g.onload=_(tr,p,"TestLoadImage: loaded",!0,h,g),g.onerror=_(tr,p,"TestLoadImage: error",!1,h,g),g.onabort=_(tr,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=_(tr,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else h(!1)}function _R(c,h){let p=new dl,g=new AbortController,I=setTimeout(()=>{g.abort(),tr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:g.signal}).then(P=>{clearTimeout(I),P.ok?tr(p,"TestPingServer: ok",!0,h):tr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(I),tr(p,"TestPingServer: error",!1,h)})}function tr(c,h,p,g,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),g(p)}catch{}}function yR(){this.g=new eR}function vR(c,h,p){let g=p||"";try{_1(c,function(I,P){let G=I;u(I)&&(G=zp(I)),h.push(g+P+"="+encodeURIComponent(G))})}catch(I){throw h.push(g+"type="+encodeURIComponent("_badmap")),I}}function gl(c){this.l=c.Ub||null,this.j=c.eb||!1}D(gl,Wp),gl.prototype.g=function(){return new Tu(this.l,this.j)},gl.prototype.i=function(c){return function(){return c}}({});function Tu(c,h){$t.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Tu,$t),t=Tu.prototype,t.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,yl(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_l(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,yl(this)),this.g&&(this.readyState=3,yl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;C1(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function C1(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?_l(this):yl(this),this.readyState==3&&C1(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,_l(this))},t.Qa=function(c){this.g&&(this.response=c,_l(this))},t.ga=function(){this.g&&_l(this)};function _l(c){c.readyState=4,c.l=null,c.j=null,c.v=null,yl(c)}t.setRequestHeader=function(c,h){this.u.append(c,h)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function yl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Tu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function I1(c){let h="";return re(c,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function nm(c,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=I1(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Ke(c,h,p))}function st(c){$t.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(st,$t);var wR=/^https?$/i,bR=["POST","PUT"];t=st.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qp.g(),this.v=this.o?e1(this.o):e1(Qp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(P){T1(this,P);return}if(c=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var I in g)p.set(I,g[I]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let P of g.keys())p.set(P,g.get(P));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(P=>P.toLowerCase()=="content-type"),I=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bR,h,void 0))||g||I||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[P,G]of p)this.g.setRequestHeader(P,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{A1(this),this.u=!0,this.g.send(c),this.u=!1}catch(P){T1(this,P)}};function T1(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,S1(c),Su(c)}function S1(c){c.A||(c.A=!0,Yt(c,"complete"),Yt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Yt(this,"complete"),Yt(this,"abort"),Su(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Su(this,!0)),st.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?M1(this):this.bb())},t.bb=function(){M1(this)};function M1(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Ii(c)!=4||c.Z()!=2)){if(c.u&&Ii(c)==4)Yb(c.Ea,0,c);else if(Yt(c,"readystatechange"),Ii(c)==4){c.h=!1;try{let G=c.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=G===0){var I=String(c.D).match(y1)[1]||null;!I&&a.self&&a.self.location&&(I=a.self.location.protocol.slice(0,-1)),g=!wR.test(I?I.toLowerCase():"")}p=g}if(p)Yt(c,"complete"),Yt(c,"success");else{c.m=6;try{var P=2<Ii(c)?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.Z()+"]",S1(c)}}finally{Su(c)}}}}function Su(c,h){if(c.g){A1(c);let p=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Yt(c,"ready");try{p.onreadystatechange=g}catch{}}}function A1(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ii(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ii(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),XO(h)}};function x1(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ER(c){let h={};c=(c.g&&2<=Ii(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(q(c[g]))continue;var p=C(c[g]);let I=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let P=h[I]||[];h[I]=P,P.push(p)}b(h,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vl(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function O1(c){this.Aa=0,this.i=[],this.j=new dl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vl("baseRetryDelayMs",5e3,c),this.cb=vl("retryDelaySeedMs",1e4,c),this.Wa=vl("forwardChannelMaxRetries",2,c),this.wa=vl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new h1(c&&c.concurrentRequestLimit),this.Da=new yR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=O1.prototype,t.la=8,t.G=1,t.connect=function(c,h,p,g){Jt(0),this.W=c,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=j1(this,null,this.W),Au(this)};function im(c){if(R1(c),c.G==3){var h=c.U++,p=Ci(c.I);if(Ke(p,"SID",c.K),Ke(p,"RID",h),Ke(p,"TYPE","terminate"),wl(c,p),h=new Xi(c,c.j,h),h.L=2,h.v=Iu(Ci(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=U1(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Eu(h)}B1(c)}function Mu(c){c.g&&(om(c),c.g.cancel(),c.g=null)}function R1(c){Mu(c),c.u&&(a.clearTimeout(c.u),c.u=null),xu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Au(c){if(!f1(c.h)&&!c.s){c.s=!0;var h=c.Ga;il||Hb(),rl||(il(),rl=!0),Fp.add(h,c),c.B=0}}function DR(c,h){return p1(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ul(m(c.Ga,c,h),L1(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let I=new Xi(this,this.j,c),P=this.o;if(this.S&&(P?(P=y(P),E(P,this.S)):P=this.S),this.m!==null||this.O||(I.H=P,P=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=P1(this,I,h),p=Ci(this.I),Ke(p,"RID",c),Ke(p,"CVER",22),this.D&&Ke(p,"X-HTTP-Session-Id",this.D),wl(this,p),P&&(this.O?h="headers="+encodeURIComponent(String(I1(P)))+"&"+h:this.m&&nm(p,this.m,P)),tm(this.h,I),this.Ua&&Ke(p,"TYPE","init"),this.P?(Ke(p,"$req",h),Ke(p,"SID","null"),I.T=!0,Jp(I,p,null)):Jp(I,p,h),this.G=2}}else this.G==3&&(c?N1(this,c):this.i.length==0||f1(this.h)||N1(this))};function N1(c,h){var p;h?p=h.l:p=c.U++;let g=Ci(c.I);Ke(g,"SID",c.K),Ke(g,"RID",p),Ke(g,"AID",c.T),wl(c,g),c.m&&c.o&&nm(g,c.m,c.o),p=new Xi(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=P1(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),tm(c.h,p),Jp(p,g,h)}function wl(c,h){c.H&&re(c.H,function(p,g){Ke(h,g,p)}),c.l&&_1({},function(p,g){Ke(h,g,p)})}function P1(c,h,p){p=Math.min(c.i.length,p);var g=c.l?m(c.l.Na,c.l,c):null;e:{var I=c.i;let P=-1;for(;;){let G=["count="+p];P==-1?0<p?(P=I[0].g,G.push("ofs="+P)):P=0:G.push("ofs="+P);let He=!0;for(let Rt=0;Rt<p;Rt++){let Fe=I[Rt].g,Gt=I[Rt].map;if(Fe-=P,0>Fe)P=Math.max(0,I[Rt].g-100),He=!1;else try{vR(Gt,G,"req"+Fe+"_")}catch{g&&g(Gt)}}if(He){g=G.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,g}function k1(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;il||Hb(),rl||(il(),rl=!0),Fp.add(h,c),c.v=0}}function rm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ul(m(c.Fa,c),L1(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,F1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ul(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jt(10),Mu(this),F1(this))};function om(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function F1(c){c.g=new Xi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=Ci(c.qa);Ke(h,"RID","rpc"),Ke(h,"SID",c.K),Ke(h,"AID",c.T),Ke(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(h,"TO",c.ja),Ke(h,"TYPE","xmlhttp"),wl(c,h),c.m&&c.o&&nm(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Iu(Ci(h)),p.m=null,p.P=!0,c1(p,c)}t.Za=function(){this.C!=null&&(this.C=null,Mu(this),rm(this),Jt(19))};function xu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function V1(c,h){var p=null;if(c.g==h){xu(c),om(c),c.g=null;var g=2}else if(em(c.h,h))p=h.D,m1(c.h,h),g=1;else return;if(c.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var I=c.B;g=vu(),Yt(g,new o1(g,p)),Au(c)}else k1(c);else if(I=h.s,I==3||I==0&&0<h.X||!(g==1&&DR(c,h)||g==2&&rm(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),I){case 1:to(c,5);break;case 4:to(c,10);break;case 3:to(c,6);break;default:to(c,2)}}}function L1(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function to(c,h){if(c.j.info("Error code "+h),h==2){var p=m(c.fb,c),g=c.Xa;let I=!g;g=new eo(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Du(g,"https"),Iu(g),I?gR(g.toString(),p):_R(g.toString(),p)}else Jt(2);c.G=0,c.l&&c.l.sa(h),B1(c),R1(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function B1(c){if(c.G=0,c.ka=[],c.l){let h=g1(c.h);(h.length!=0||c.i.length!=0)&&(A(c.ka,h),A(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function j1(c,h,p){var g=p instanceof eo?Ci(p):new eo(p);if(g.g!="")h&&(g.g=h+"."+g.g),Cu(g,g.s);else{var I=a.location;g=I.protocol,h=h?h+"."+I.hostname:I.hostname,I=+I.port;var P=new eo(null);g&&Du(P,g),h&&(P.g=h),I&&Cu(P,I),p&&(P.l=p),g=P}return p=c.D,h=c.ya,p&&h&&Ke(g,p,h),Ke(g,"VER",c.la),wl(c,g),g}function U1(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new st(new gl({eb:p})):new st(c.pa),h.Ha(c.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $1(){}t=$1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ou(){}Ou.prototype.g=function(c,h){return new fn(c,h)};function fn(c,h){$t.call(this),this.g=new O1(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!q(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new ds(this)}D(fn,$t),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){im(this.g)},fn.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=zp(c),c=p);h.i.push(new sR(h.Ya++,c)),h.G==3&&Au(h)},fn.prototype.N=function(){this.g.l=null,delete this.j,im(this.g),delete this.g,fn.aa.N.call(this)};function G1(c){qp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}D(G1,qp);function H1(){Kp.call(this),this.status=1}D(H1,Kp);function ds(c){this.g=c}D(ds,$1),ds.prototype.ua=function(){Yt(this.g,"a")},ds.prototype.ta=function(c){Yt(this.g,new G1(c))},ds.prototype.sa=function(c){Yt(this.g,new H1)},ds.prototype.ra=function(){Yt(this.g,"b")},Ou.prototype.createWebChannel=Ou.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,v0=Ui.createWebChannelTransport=function(){return new Ou},y0=Ui.getStatEventTarget=function(){return vu()},_0=Ui.Event=Zr,Wh=Ui.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wu.NO_ERROR=0,wu.TIMEOUT=8,wu.HTTP_ERROR=6,wc=Ui.ErrorCode=wu,s1.COMPLETE="complete",g0=Ui.EventType=s1,t1.EventType=ll,ll.OPEN="a",ll.CLOSE="b",ll.ERROR="c",ll.MESSAGE="d",$t.prototype.listen=$t.prototype.K,ca=Ui.WebChannel=t1,m0=Ui.FetchXmlHttpFactory=gl,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,p0=Ui.XhrIo=st}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});var rS="@firebase/firestore";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var ja="10.13.0";var kr=new ku("@firebase/firestore");function pa(){return kr.logLevel}function sM(t){kr.setLogLevel(t)}function L(t,...e){if(kr.logLevel<=Xn.DEBUG){let n=e.map(Cw);kr.debug(`Firestore (${ja}): ${t}`,...n)}}function mt(t,...e){if(kr.logLevel<=Xn.ERROR){let n=e.map(Cw);kr.error(`Firestore (${ja}): ${t}`,...n)}}function Rn(t,...e){if(kr.logLevel<=Xn.WARN){let n=e.map(Cw);kr.warn(`Firestore (${ja}): ${t}`,...n)}}function Cw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function X(t="Unexpected state"){let e=`FIRESTORE (${ja}) INTERNAL ASSERTION FAILED: `+t;throw mt(e),new Error(e)}function ne(t,e){t||X()}function aM(t,e){t||X()}function H(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends Y1{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Et=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var rf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},C0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}},I0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},T0=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve(),o=new Et;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Et,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>O(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Et)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ne(typeof i.accessToken=="string"),new rf(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new bt(e)}},S0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},M0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new S0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},A0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},x0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne(typeof n.token=="string"),this.R=n.token,new A0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function cU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var of=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=cU(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function _e(t,e){return t<e?-1:t>e?1:0}function Da(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function lM(t){return t+"\0"}var ot=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var oe=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ot(0,0))}static max(){return new t(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var sf=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(),i===void 0?i=e.length-n:i>e.length-n&&X(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ne=class t extends sf{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},uU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gt=class t extends sf{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return uU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new F(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new F(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ne.fromString(e))}static fromName(e){return new t(Ne.fromString(e).popFirst(5))}static empty(){return new t(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ne(e.slice()))}};var Ca=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function O0(t){return t.fields.find(e=>e.kind===2)}function No(t){return t.fields.filter(e=>e.kind!==2)}Ca.UNKNOWN_ID=-1;var wa=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Rc=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Nn.min())}};function cM(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=oe.fromTimestamp(i===1e9?new ot(n+1,0):new ot(n,i));return new Nn(r,z.empty(),e)}function uM(t){return new Nn(t.readTime,t.key,-1)}var Nn=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(oe.min(),z.empty(),-1)}static max(){return new t(oe.max(),z.empty(),-1)}};function Iw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}var dM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",af=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zr(t){return O(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==dM)throw t;L("LocalStore","Unexpectedly lost primary lease")})}var R=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&n()},l=>i(l))}),s=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;n(e[u]).next(d=>{s[u]=d,++a,a===o&&i(s)},d=>r(d))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var lf=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Et,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Bo(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=Tw(i.target.error);this.V.reject(new Bo(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new Bo(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(L("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new N0(n)}},Fr=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(bl())===12.2&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return L("SimpleDb","Removing database:",e),Po(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Pu())return!1;if(t.v())return!0;let e=bl(),n=t.S(e),i=0<n&&n<10,r=hM(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return O(this,null,function*(){return this.db||(L("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;n(s)},r.onblocked=()=>{i(new Bo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new F(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new F(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new Bo(e,s))},r.onupgradeneeded=o=>{L("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,r.transaction,o.oldVersion,this.version).next(()=>{L("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return O(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=lf.open(this.db,e,o?"readonly":"readwrite",i),l=r(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),R.reject(u))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,u=l.name!=="FirebaseError"&&s<3;if(L("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function hM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var R0=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Po(this.B.delete())}},Bo=class extends F{constructor(e,n){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Wr(t){return t.name==="IndexedDbTransactionError"}var N0=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(L("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(L("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Po(i)}add(e){return L("SimpleDb","ADD",this.store.name,e,e),Po(this.store.add(e))}get(e){return Po(this.store.get(e)).next(n=>(n===void 0&&(n=null),L("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return L("SimpleDb","DELETE",this.store.name,e),Po(this.store.delete(e))}count(){return L("SimpleDb","COUNT",this.store.name),Po(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new R((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{let o=this.cursor(i),s=[];return this.W(o,(a,l)=>{s.push(l)}).next(()=>s)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new R((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}j(e,n){L("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,s,a)=>a.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new R((i,r)=>{n.onerror=o=>{let s=Tw(o.target.error);r(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}W(e,n){let i=[];return new R((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let l=new R0(a),u=n(a.primaryKey,a.value,l);if(u instanceof R){let d=u.catch(f=>(l.done(),R.reject(f)));i.push(d)}l.isDone?r():l.K===null?a.continue():a.continue(l.K)}}).next(()=>R.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Po(t){return new R((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=Tw(i.target.error);n(r)}})}var oS=!1;function Tw(t){let e=Fr.S(bl());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oS||(oS=!0,setTimeout(()=>{throw i},0)),i}}return t}var P0=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){L("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>O(this,null,function*(){this.task=null;try{L("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Wr(n)?L("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield zr(n)}yield this.X(6e4)}))}},k0=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return O(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return R.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!i.has(s))return L("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(r,o)).next(a=>(L("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let s=uM(o);Iw(s,i)>0&&(i=s)}),new Nn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var wn=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function tu(t){return t==null}function Nc(t){return t===0&&1/t==-1/0}function fM(t){return typeof t=="number"&&Number.isInteger(t)&&!Nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function tn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sS(e)),e=dU(t.get(n),e);return sS(e)}function dU(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function sS(t){return t+""}function fi(t){let e=t.length;if(ne(e>=2),e===2)return ne(t.charAt(0)===""&&t.charAt(1)===""),Ne.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&X(),t.charAt(s+1)){case"":let a=t.substring(o,s),l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=t.substring(o,s),r+="\0";break;case"":r+=t.substring(o,s+1);break;default:X()}o=s+2}return new Ne(i)}var aS=["userId","batchId"];function Jh(t,e){return[t,tn(e)]}function pM(t,e,n){return[t,tn(e),n]}var hU={},fU=["prefixPath","collectionGroup","readTime","documentId"],pU=["prefixPath","collectionGroup","documentId"],mU=["collectionGroup","readTime","prefixPath","documentId"],gU=["canonicalId","targetId"],_U=["targetId","path"],yU=["path","targetId"],vU=["collectionId","parent"],wU=["indexId","uid"],bU=["uid","sequenceNumber"],EU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DU=["indexId","uid","orderedDocumentKey"],CU=["userId","collectionPath","documentId"],IU=["userId","collectionPath","largestBatchId"],TU=["userId","collectionGroup","largestBatchId"],mM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],SU=[...mM,"documentOverlays"],gM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_M=gM,Sw=[..._M,"indexConfiguration","indexState","indexEntries"],MU=Sw,AU=[...Sw,"globals"];var Pc=class extends af{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Mt(t,e){let n=H(t);return Fr.F(n._e,e)}function lS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Xe=class t{constructor(e,n){this.comparator=e,this.root=n||mi.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mi.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new va(this.root,e,this.comparator,!1)}getReverseIterator(){return new va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new va(this.root,e,this.comparator,!0)}},va=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mi=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();let e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}};mi.EMPTY=null,mi.RED=!0,mi.BLACK=!1;mi.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,i,r,o){return this}insert(e,n,i){return new mi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var We=class t{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cf(this.data.getIterator())}getIteratorFrom(e){return new cf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},cf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ua(t){return t.hasNext()?t.getNext():void 0}var bn=class t{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new t([])}unionWith(e){let n=new We(gt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var uf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function vM(){return typeof atob<"u"}var yt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new uf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yt.EMPTY_BYTE_STRING=new yt("");var xU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(t){if(ne(!!t),typeof t=="string"){let e=0,n=xU.exec(t);if(ne(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vr(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}function ep(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Mw(t){let e=t.mapValue.fields.__previous_value__;return ep(e)?Mw(e):e}function kc(t){let e=Hi(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}var F0=class{constructor(e,n,i,r,o,s,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},Lr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Nr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zh={nullValue:"NULL_VALUE"};function jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ep(t)?4:wM(t)?9007199254740991:tp(t)?10:11:X()}function yi(t,e){if(t===e)return!0;let n=jo(t);if(n!==jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kc(t).isEqual(kc(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Hi(r.timestampValue),a=Hi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Vr(r.bytesValue).isEqual(Vr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return tt(r.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(r.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return tt(r.integerValue)===tt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=tt(r.doubleValue),a=tt(o.doubleValue);return s===a?Nc(s)===Nc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Da(t.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(lS(s)!==lS(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!yi(s[l],a[l])))return!1;return!0}(t,e);default:return X()}}function Fc(t,e){return(t.values||[]).find(n=>yi(n,e))!==void 0}function Br(t,e){if(t===e)return 0;let n=jo(t),i=jo(e);if(n!==i)return _e(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=tt(o.integerValue||o.doubleValue),l=tt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return cS(t.timestampValue,e.timestampValue);case 4:return cS(kc(t),kc(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Vr(o),l=Vr(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let d=_e(a[u],l[u]);if(d!==0)return d}return _e(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=_e(tt(o.latitude),tt(s.latitude));return a!==0?a:_e(tt(o.longitude),tt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return uS(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,d;let f=o.fields||{},m=s.fields||{},_=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(l=m.value)===null||l===void 0?void 0:l.arrayValue,M=_e(((u=_?.values)===null||u===void 0?void 0:u.length)||0,((d=D?.values)===null||d===void 0?void 0:d.length)||0);return M!==0?M:uS(_,D)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Nr.mapValue&&s===Nr.mapValue)return 0;if(o===Nr.mapValue)return 1;if(s===Nr.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){let m=_e(l[f],d[f]);if(m!==0)return m;let _=Br(a[l[f]],u[d[f]]);if(_!==0)return _}return _e(l.length,d.length)}(t.mapValue,e.mapValue);default:throw X()}}function cS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);let n=Hi(t),i=Hi(e),r=_e(n.seconds,i.seconds);return r!==0?r:_e(n.nanos,i.nanos)}function uS(t,e){let n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){let o=Br(n[r],i[r]);if(o)return o}return _e(n.length,i.length)}function Ia(t){return V0(t)}function V0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Hi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=V0(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${V0(n.fields[s])}`;return r+"}"}(t.mapValue):X()}function Uo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function L0(t){return!!t&&"integerValue"in t}function Vc(t){return!!t&&"arrayValue"in t}function dS(t){return!!t&&"nullValue"in t}function hS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xh(t){return!!t&&"mapValue"in t}function tp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Sc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Jo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Sc(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var bM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function OU(t){return"nullValue"in t?Zh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Uo(Lr.empty(),z.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?tp(t)?bM:{mapValue:{}}:X()}function RU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Uo(Lr.empty(),z.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?bM:"mapValue"in t?tp(t)?{mapValue:{}}:Nr:X()}function fS(t,e){let n=Br(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function pS(t,e){let n=Br(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Qt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Xh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(n)}setAll(e){let n=gt.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}s?i[a.lastSegment()]=Sc(s):r.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());Xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Xh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Jo(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(Sc(this.value))}};function EM(t){let e=[];return Jo(t.fields,(n,i)=>{let r=new gt([n]);if(Xh(i)){let o=EM(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new bn(e)}var Dt=class t{constructor(e,n,i,r,o,s,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,oe.min(),oe.min(),oe.min(),Qt.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,oe.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,oe.min(),oe.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,oe.min(),oe.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var vi=class{constructor(e,n){this.position=e,this.inclusive=n}};function mS(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],s=t.position[r];if(o.field.isKeyField()?i=z.comparator(z.fromName(s.referenceValue),n.key):i=Br(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function gS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yi(t.position[n],e.position[n]))return!1;return!0}var $o=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function NU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var df=class{},Ae=class t extends df{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new U0(e,n,i):n==="array-contains"?new H0(e,i):n==="in"?new hf(e,i):n==="not-in"?new z0(e,i):n==="array-contains-any"?new W0(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new $0(e,i):new G0(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Br(n,this.value)):n!==null&&jo(this.value)===jo(n)&&this.matchesComparison(Br(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$e=class t extends df{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Ta(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ta(t){return t.op==="and"}function B0(t){return t.op==="or"}function Aw(t){return DM(t)&&Ta(t)}function DM(t){for(let e of t.filters)if(e instanceof $e)return!1;return!0}function j0(t){if(t instanceof Ae)return t.field.canonicalString()+t.op.toString()+Ia(t.value);if(Aw(t))return t.filters.map(e=>j0(e)).join(",");{let e=t.filters.map(n=>j0(n)).join(",");return`${t.op}(${e})`}}function CM(t,e){return t instanceof Ae?function(i,r){return r instanceof Ae&&i.op===r.op&&i.field.isEqual(r.field)&&yi(i.value,r.value)}(t,e):t instanceof $e?function(i,r){return r instanceof $e&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&CM(s,r.filters[a]),!0):!1}(t,e):void X()}function IM(t,e){let n=t.filters.concat(e);return $e.create(n,t.op)}function TM(t){return t instanceof Ae?function(n){return`${n.field.canonicalString()} ${n.op} ${Ia(n.value)}`}(t):t instanceof $e?function(n){return n.op.toString()+" {"+n.getFilters().map(TM).join(" ,")+"}"}(t):"Filter"}var U0=class extends Ae{constructor(e,n,i){super(e,n,i),this.key=z.fromName(i.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},$0=class extends Ae{constructor(e,n){super(e,"in",n),this.keys=SM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},G0=class extends Ae{constructor(e,n){super(e,"not-in",n),this.keys=SM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function SM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>z.fromName(i.referenceValue))}var H0=class extends Ae{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Vc(n)&&Fc(n.arrayValue,this.value)}},hf=class extends Ae{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Fc(this.value.arrayValue,n)}},z0=class extends Ae{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Fc(this.value.arrayValue,n)}},W0=class extends Ae{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Vc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Fc(this.value.arrayValue,i))}};var q0=class{constructor(e,n=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function K0(t,e=null,n=[],i=[],r=null,o=null,s=null){return new q0(t,e,n,i,r,o,s)}function Go(t){let e=H(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>j0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),tu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ia(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ia(i)).join(",")),e.ue=n}return e.ue}function nu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gS(t.startAt,e.startAt)&&gS(t.endAt,e.endAt)}function ff(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function pf(t,e){return t.filters.filter(n=>n instanceof Ae&&n.field.isEqual(e))}function _S(t,e,n){let i=Zh,r=!0;for(let o of pf(t,e)){let s=Zh,a=!0;switch(o.op){case"<":case"<=":s=OU(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Zh}fS({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];fS({value:i,inclusive:r},{value:s,inclusive:n.inclusive})<0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}function yS(t,e,n){let i=Nr,r=!0;for(let o of pf(t,e)){let s=Nr,a=!0;switch(o.op){case">=":case">":s=RU(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Nr}pS({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];pS({value:i,inclusive:r},{value:s,inclusive:n.inclusive})>0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}var Qn=class{constructor(e,n=null,i=[],r=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function MM(t,e,n,i,r,o,s,a){return new Qn(t,e,n,i,r,o,s,a)}function Ua(t){return new Qn(t)}function vS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xw(t){return t.collectionGroup!==null}function ba(t){let e=H(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new We(gt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new $o(o,i))}),n.has(gt.keyField().canonicalString())||e.ce.push(new $o(gt.keyField(),i))}return e.ce}function nn(t){let e=H(t);return e.le||(e.le=PU(e,ba(t))),e.le}function PU(t,e){if(t.limitType==="F")return K0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new $o(r.field,o)});let n=t.endAt?new vi(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new vi(t.startAt.position,t.startAt.inclusive):null;return K0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Q0(t,e){let n=t.filters.concat([e]);return new Qn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function mf(t,e,n){return new Qn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function iu(t,e){return nu(nn(t),nn(e))&&t.limitType===e.limitType}function AM(t){return`${Go(nn(t))}|lt:${t.limitType}`}function ma(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>TM(r)).join(", ")}]`),tu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ia(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ia(r)).join(",")),`Target(${i})`}(nn(t))}; limitType=${t.limitType})`}function ru(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):z.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of ba(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,a,l){let u=mS(s,a,l);return s.inclusive?u<=0:u<0}(i.startAt,ba(i),r)||i.endAt&&!function(s,a,l){let u=mS(s,a,l);return s.inclusive?u>=0:u>0}(i.endAt,ba(i),r))}(t,e)}function xM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OM(t){return(e,n)=>{let i=!1;for(let r of ba(t)){let o=kU(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function kU(t,e,n){let i=t.field.isKeyField()?z.comparator(e.key,n.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Br(l,u):X()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X()}}var wi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Jo(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return yM(this.inner)}size(){return this.innerSize}};var FU=new Xe(z.comparator);function hn(){return FU}var RM=new Xe(z.comparator);function Ic(...t){let e=RM;for(let n of t)e=e.insert(n.key,n);return e}function NM(t){let e=RM;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function pi(){return Mc()}function PM(){return Mc()}function Mc(){return new wi(t=>t.toString(),(t,e)=>t.isEqual(e))}var VU=new Xe(z.comparator),LU=new We(z.comparator);function we(...t){let e=LU;for(let n of t)e=e.add(n);return e}var BU=new We(_e);function Ow(){return BU}function Rw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function kM(t){return{integerValue:""+t}}function FM(t,e){return fM(e)?kM(e):Rw(t,e)}var Sa=class{constructor(){this._=void 0}};function jU(t,e,n){return t instanceof jr?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&ep(o)&&(o=Mw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof zi?LM(t,e):t instanceof Wi?BM(t,e):function(r,o){let s=VM(r,o),a=wS(s)+wS(r.Pe);return L0(s)&&L0(r.Pe)?kM(a):Rw(r.serializer,a)}(t,e)}function UU(t,e,n){return t instanceof zi?LM(t,e):t instanceof Wi?BM(t,e):n}function VM(t,e){return t instanceof Ur?function(i){return L0(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var jr=class extends Sa{},zi=class extends Sa{constructor(e){super(),this.elements=e}};function LM(t,e){let n=jM(e);for(let i of t.elements)n.some(r=>yi(r,i))||n.push(i);return{arrayValue:{values:n}}}var Wi=class extends Sa{constructor(e){super(),this.elements=e}};function BM(t,e){let n=jM(e);for(let i of t.elements)n=n.filter(r=>!yi(r,i));return{arrayValue:{values:n}}}var Ur=class extends Sa{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function wS(t){return tt(t.integerValue||t.doubleValue)}function jM(t){return Vc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ho=class{constructor(e,n){this.field=e,this.transform=n}};function $U(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof zi&&r instanceof zi||i instanceof Wi&&r instanceof Wi?Da(i.elements,r.elements,yi):i instanceof Ur&&r instanceof Ur?yi(i.Pe,r.Pe):i instanceof jr&&r instanceof jr}(t.transform,e.transform)}var Y0=class{constructor(e,n){this.version=e,this.transformResults=n}},ht=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ef(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ma=class{};function UM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gr(t.key,ht.none()):new $r(t.key,t.data,ht.none());{let n=t.data,i=Qt.empty(),r=new We(gt.comparator);for(let o of e.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Yn(t.key,i,new bn(r.toArray()),ht.none())}}function GU(t,e,n){t instanceof $r?function(r,o,s){let a=r.value.clone(),l=ES(r.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Yn?function(r,o,s){if(!ef(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=ES(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll($M(r)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ac(t,e,n,i){return t instanceof $r?function(o,s,a,l){if(!ef(o.precondition,s))return a;let u=o.value.clone(),d=DS(o.fieldTransforms,l,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof Yn?function(o,s,a,l){if(!ef(o.precondition,s))return a;let u=DS(o.fieldTransforms,l,s),d=s.data;return d.setAll($M(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,i):function(o,s,a){return ef(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function HU(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=VM(i.transform,r||null);o!=null&&(n===null&&(n=Qt.empty()),n.set(i.field,o))}return n||null}function bS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Da(i,r,(o,s)=>$U(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var $r=class extends Ma{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Yn=class extends Ma{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function $M(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function ES(t,e,n){let i=new Map;ne(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,UU(s,a,n[r]))}return i}function DS(t,e,n){let i=new Map;for(let r of t){let o=r.transform,s=n.data.field(r.field);i.set(r.field,jU(o,s,e))}return i}var Gr=class extends Ma{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Lc=class extends Ma{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Bc=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&GU(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ac(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Ac(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=PM();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(r.key)?null:a;let l=UM(s,a);l!==null&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(oe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,(n,i)=>bS(n,i))&&Da(this.baseMutations,e.baseMutations,(n,i)=>bS(n,i))}},J0=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ne(e.mutations.length===i.length);let r=function(){return VU}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new t(e,n,i,r)}};var jc=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Z0=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var vt,Re;function GM(t){switch(t){default:return X();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function HM(t){if(t===void 0)return mt("GRPC error has no .code"),N.UNKNOWN;switch(t){case vt.OK:return N.OK;case vt.CANCELLED:return N.CANCELLED;case vt.UNKNOWN:return N.UNKNOWN;case vt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case vt.INTERNAL:return N.INTERNAL;case vt.UNAVAILABLE:return N.UNAVAILABLE;case vt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case vt.NOT_FOUND:return N.NOT_FOUND;case vt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case vt.ABORTED:return N.ABORTED;case vt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case vt.DATA_LOSS:return N.DATA_LOSS;default:return X()}}(Re=vt||(vt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";var CS=null;function zM(){return new TextEncoder}var zU=new Mr([4294967295,4294967295],0);function IS(t){let e=zM().encode(t),n=new f0;return n.update(e),new Uint8Array(n.digest())}function TS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Mr([n,i],0),new Mr([r,o],0)]}var X0=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Lo(`Invalid padding: ${n}`);if(i<0)throw new Lo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Lo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Lo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Mr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Mr.fromNumber(i)));return r.compare(zU)===1&&(r=new Mr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=IS(e),[i,r]=TS(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,r,n);return i.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=IS(e),[i,r]=TS(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Lo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Uc=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(oe.min(),r,new Xe(_e),hn(),we())}},$c=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,we(),we(),we())}};var Ea=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},gf=class{constructor(e,n){this.targetId=e,this.me=n}},_f=class{constructor(e,n,i=yt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},yf=class{constructor(){this.fe=0,this.ge=MS(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=we(),n=we(),i=we();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:X()}}),new $c(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=MS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},ev=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=hn(),this.qe=SS(),this.Qe=new Xe(_e)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(ff(o))if(i===0){let s=new z(o.path);this.Ue(n,s,Dt.newNoDocument(s,oe.min()))}else ne(i===1);else{let s=this.Ye(n);if(s!==i){let a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(n);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}CS?.et(function(d,f,m,_,D){var M,A,k,q,U,K;let le={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},re=f.unchangedNames;return re&&(le.bloomFilter={applied:D===0,hashCount:(M=re?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(q=(k=(A=re?.bits)===null||A===void 0?void 0:A.bitmap)===null||k===void 0?void 0:k.length)!==null&&q!==void 0?q:0,padding:(K=(U=re?.bits)===null||U===void 0?void 0:U.padding)!==null&&K!==void 0?K:0,mightContain:b=>{var y;return(y=_?.mightContain(b))!==null&&y!==void 0&&y}}),le}(s,e.me,this.Le.tt(),a,l))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,a;try{s=Vr(i).toUint8Array()}catch(l){if(l instanceof uf)return Rn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new X0(s,r,o)}catch(l){return Rn(l instanceof Lo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&ff(a.target)){let l=new z(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,Dt.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let i=we();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let r=new Uc(e,n,this.Qe,this.ke,i);return this.ke=hn(),this.qe=SS(),this.Qe=new Xe(_e),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new yf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new We(_e),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new yf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function SS(){return new Xe(z.comparator)}function MS(){return new Xe(z.comparator)}var WU={asc:"ASCENDING",desc:"DESCENDING"},qU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KU={and:"AND",or:"OR"},tv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function nv(t,e){return t.useProto3Json||tu(e)?e:{value:e}}function Aa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QU(t,e){return Aa(t,e.toTimestamp())}function _t(t){return ne(!!t),oe.fromTimestamp(function(n){let i=Hi(n);return new ot(i.seconds,i.nanos)}(t))}function Nw(t,e){return iv(t,e).canonicalString()}function iv(t,e){let n=function(r){return new Ne(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qM(t){let e=Ne.fromString(t);return ne(iA(e)),e}function Gc(t,e){return Nw(t.databaseId,e.path)}function gi(t,e){let n=qM(e);if(n.get(1)!==t.databaseId.projectId)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(YM(n))}function KM(t,e){return Nw(t.databaseId,e)}function QM(t){let e=qM(t);return e.length===4?Ne.emptyPath():YM(e)}function rv(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YM(t){return ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function AS(t,e,n){return{name:Gc(t,e),fields:n.value.mapValue.fields}}function JM(t,e,n){let i=gi(t,e.name),r=_t(e.updateTime),o=e.createTime?_t(e.createTime):oe.min(),s=new Qt({mapValue:{fields:e.fields}}),a=Dt.newFoundDocument(i,r,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function YU(t,e){return"found"in e?function(i,r){ne(!!r.found),r.found.name,r.found.updateTime;let o=gi(i,r.found.name),s=_t(r.found.updateTime),a=r.found.createTime?_t(r.found.createTime):oe.min(),l=new Qt({mapValue:{fields:r.found.fields}});return Dt.newFoundDocument(o,s,a,l)}(t,e):"missing"in e?function(i,r){ne(!!r.missing),ne(!!r.readTime);let o=gi(i,r.missing),s=_t(r.readTime);return Dt.newNoDocument(o,s)}(t,e):X()}function JU(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(ne(d===void 0||typeof d=="string"),yt.fromBase64String(d||"")):(ne(d===void 0||d instanceof Buffer||d instanceof Uint8Array),yt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?N.UNKNOWN:HM(u.code);return new F(d,u.message||"")}(s);n=new _f(i,r,o,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=gi(t,i.document.name),o=_t(i.document.updateTime),s=i.document.createTime?_t(i.document.createTime):oe.min(),a=new Qt({mapValue:{fields:i.document.fields}}),l=Dt.newFoundDocument(r,o,s,a),u=i.targetIds||[],d=i.removedTargetIds||[];n=new Ea(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=gi(t,i.document),o=i.readTime?_t(i.readTime):oe.min(),s=Dt.newNoDocument(r,o),a=i.removedTargetIds||[];n=new Ea([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=gi(t,i.document),o=i.removedTargetIds||[];n=new Ea([],o,r,null)}else{if(!("filter"in e))return X();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new Z0(r,o),a=i.targetId;n=new gf(a,s)}}return n}function Hc(t,e){let n;if(e instanceof $r)n={update:AS(t,e.key,e.value)};else if(e instanceof Gr)n={delete:Gc(t,e.key)};else if(e instanceof Yn)n={update:AS(t,e.key,e.data),updateMask:i$(e.fieldMask)};else{if(!(e instanceof Lc))return X();n={verify:Gc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof jr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ur)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw X()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:QU(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:X()}(t,e.precondition)),n}function ov(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?ht.updateTime(_t(o.updateTime)):o.exists!==void 0?ht.exists(o.exists):ht.none()}(e.currentDocument):ht.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let l=null;if("setToServerValue"in a)ne(a.setToServerValue==="REQUEST_TIME"),l=new jr;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];l=new zi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];l=new Wi(d)}else"increment"in a?l=new Ur(s,a.increment):X();let u=gt.fromServerFormat(a.fieldPath);return new Ho(u,l)}(t,r)):[];if(e.update){e.update.name;let r=gi(t,e.update.name),o=new Qt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(l){let u=l.fieldPaths||[];return new bn(u.map(d=>gt.fromServerFormat(d)))}(e.updateMask);return new Yn(r,o,s,n,i)}return new $r(r,o,n,i)}if(e.delete){let r=gi(t,e.delete);return new Gr(r,n)}if(e.verify){let r=gi(t,e.verify);return new Lc(r,n)}return X()}function ZU(t,e){return t&&t.length>0?(ne(e!==void 0),t.map(n=>function(r,o){let s=r.updateTime?_t(r.updateTime):_t(o);return s.isEqual(oe.min())&&(s=_t(o)),new Y0(s,r.transformResults||[])}(n,e))):[]}function ZM(t,e){return{documents:[KM(t,e.path)]}}function XM(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=KM(t,r);let o=function(u){if(u.length!==0)return nA($e.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:ga(m.field),direction:e$(m.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=nv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function eA(t){let e=QM(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){ne(i===1);let d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){let m=tA(f);return m instanceof $e&&Aw(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(m=>function(D){return new $o(_a(D.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,tu(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){let m=!!f.before,_=f.values||[];return new vi(_,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){let m=!f.before,_=f.values||[];return new vi(_,m)}(n.endAt)),MM(e,r,s,o,a,"F",l,u)}function XU(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=_a(n.unaryFilter.field);return Ae.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=_a(n.unaryFilter.field);return Ae.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=_a(n.unaryFilter.field);return Ae.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=_a(n.unaryFilter.field);return Ae.create(s,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Ae.create(_a(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $e.create(n.compositeFilter.filters.map(i=>tA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function e$(t){return WU[t]}function t$(t){return qU[t]}function n$(t){return KU[t]}function ga(t){return{fieldPath:t.canonicalString()}}function _a(t){return gt.fromServerFormat(t.fieldPath)}function nA(t){return t instanceof Ae?function(n){if(n.op==="=="){if(hS(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NAN"}};if(dS(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hS(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NAN"}};if(dS(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ga(n.field),op:t$(n.op),value:n.value}}}(t):t instanceof $e?function(n){let i=n.getFilters().map(r=>nA(r));return i.length===1?i[0]:{compositeFilter:{op:n$(n.op),filters:i}}}(t):X()}function i$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var xa=class t{constructor(e,n,i,r,o=oe.min(),s=oe.min(),a=yt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var vf=class{constructor(e){this.ct=e}};function r$(t,e){let n;if(e.document)n=JM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=z.fromSegments(e.noDocument.path),r=Wo(e.noDocument.readTime);n=Dt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return X();{let i=z.fromSegments(e.unknownDocument.path),r=Wo(e.unknownDocument.version);n=Dt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new ot(r[0],r[1]);return oe.fromTimestamp(o)}(e.readTime)),n}function xS(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:wf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,s){return{name:Gc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Aa(o,s.version.toTimestamp()),createTime:Aa(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:zo(e.version)};else{if(!e.isUnknownDocument())return X();i.unknownDocument={path:n.path.toArray(),version:zo(e.version)}}return i}function wf(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wo(t){let e=new ot(t.seconds,t.nanoseconds);return oe.fromTimestamp(e)}function ko(t,e){let n=(e.baseMutations||[]).map(o=>ov(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>ov(t.ct,o)),r=ot.fromMillis(e.localWriteTimeMs);return new Bc(e.batchId,r,n,i)}function Tc(t){let e=Wo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Wo(t.lastLimboFreeSnapshotVersion):oe.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return ne(o.documents.length===1),nn(Ua(QM(o.documents[0])))}(t.query):function(o){return nn(eA(o))}(t.query),new xa(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yt.fromBase64String(t.resumeToken))}function rA(t,e){let n=zo(e.snapshotVersion),i=zo(e.lastLimboFreeSnapshotVersion),r;r=ff(e.target)?ZM(t.ct,e.target):XM(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Go(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Pw(t){let e=eA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mf(e,e.limit,"L"):e}function w0(t,e){return new jc(e.largestBatchId,ov(t.ct,e.overlayMutation))}function OS(t,e){let n=e.path.lastSegment();return[t,tn(e.path.popLast()),n]}function RS(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:zo(i.readTime),documentKey:tn(i.documentKey.path),largestBatchId:i.largestBatchId}}var sv=class{getBundleMetadata(e,n){return NS(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:Wo(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return NS(e).put(function(r){return{bundleId:r.id,createTime:zo(_t(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return PS(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:Pw(o.bundledQuery),readTime:Wo(o.readTime)}}(i)})}saveNamedQuery(e,n){return PS(e).put(function(r){return{name:r.name,readTime:zo(_t(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function NS(t){return Mt(t,"bundles")}function PS(t){return Mt(t,"namedQueries")}var bf=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return bc(e).get(OS(this.userId,n)).next(i=>i?w0(this.serializer,i):null)}getOverlays(e,n){let i=pi();return R.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,s)=>{let a=new jc(n,s);r.push(this.ht(e,a))}),R.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(s=>r.add(tn(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(bc(e).j("collectionPathOverlayIndex",a))}),R.waitFor(o)}getOverlaysForCollection(e,n,i){let r=pi(),o=tn(n),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return bc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let l of a){let u=w0(this.serializer,l);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=pi(),s,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bc(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,d)=>{let f=w0(this.serializer,u);o.size()<r||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,n){return bc(e).put(function(r,o,s){let[a,l,u]=OS(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Hc(r.ct,s.mutation)}}(this.serializer,this.userId,n))}};function bc(t){return Mt(t,"documentOverlays")}var av=class{Pt(e){return Mt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let i=n?.value;return i?yt.fromUint8Array(i):yt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var $i=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(tt(e.integerValue));else if("doubleValue"in e){let i=tt(e.doubleValue);isNaN(i)?this.dt(n,13):(this.dt(n,15),Nc(i)?n.At(0):n.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(n,20),typeof i=="string"&&(i=Hi(i)),n.Rt(`${i.seconds||""}`),n.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Vr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(n,45),n.At(i.latitude||0),n.At(i.longitude||0)}else"mapValue"in e?wM(e)?this.dt(n,Number.MAX_SAFE_INTEGER):tp(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):X()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let i=e.fields||{};this.dt(n,55);for(let r of Object.keys(i))this.Vt(r,n),this.Tt(i[r],n)}wt(e,n){var i,r;let o=e.fields||{};this.dt(n,53);let s="value",a=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(n,15),n.At(tt(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let i=e.values||[];this.dt(n,50);for(let r of i)this.Tt(r,n)}yt(e,n){this.dt(n,37),z.fromName(e).path.forEach(i=>{this.dt(n,60),this.Dt(i,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};$i.vt=new $i;function o$(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function kS(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let s=o$(255&i[o]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}var lv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ft(i.value),i=n.next();this.Mt()}xt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ot(i.value),i=n.next();this.Nt()}Lt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=n.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{let r=n.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(e){let n=this.qt(e),i=kS(n);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}Kt(e){let n=this.qt(e),i=kS(n);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ft(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){let n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},cv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},uv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Fo=class{constructor(){this.jt=new lv,this.Ht=new cv(this.jt),this.Jt=new uv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Vo=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Zt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function Ar(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=FS(t.arrayValue,e.arrayValue),n!==0?n:(n=FS(t.directionalValue,e.directionalValue),n!==0?n:z.comparator(t.documentKey,e.documentKey)))}function FS(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var Ef=class{constructor(e){this.Xt=new We((n,i)=>gt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let n of e.filters){let i=n;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(e){if(ne(e.collectionGroup===this.collectionId),this.nn)return!1;let n=O0(e);if(n!==void 0&&!this.sn(n))return!1;let i=No(e),r=new Set,o=0,s=0;for(;o<i.length&&this.sn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let l=i[o];if(!this.on(a,l)||!this._n(this.en[s++],l))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new We(gt.comparator),n=[];for(let i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new wa(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new wa(i.field,0))}for(let i of this.en)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new wa(i.field,i.dir==="asc"?0:1)));return new Ca(Ca.UNKNOWN_ID,this.collectionId,n,Rc.empty())}sn(e){for(let n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function oA(t){var e,n;if(ne(t instanceof Ae||t instanceof $e),t instanceof Ae){if(t instanceof hf){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Ae.create(t.field,"==",o)))||[];return $e.create(r,"or")}return t}let i=t.filters.map(r=>oA(r));return $e.create(i,t.op)}function s$(t){if(t.getFilters().length===0)return[];let e=fv(oA(t));return ne(sA(e)),dv(e)||hv(e)?[e]:e.getFilters()}function dv(t){return t instanceof Ae}function hv(t){return t instanceof $e&&Aw(t)}function sA(t){return dv(t)||hv(t)||function(n){if(n instanceof $e&&B0(n)){for(let i of n.getFilters())if(!dv(i)&&!hv(i))return!1;return!0}return!1}(t)}function fv(t){if(ne(t instanceof Ae||t instanceof $e),t instanceof Ae)return t;if(t.filters.length===1)return fv(t.filters[0]);let e=t.filters.map(i=>fv(i)),n=$e.create(e,t.op);return n=Df(n),sA(n)?n:(ne(n instanceof $e),ne(Ta(n)),ne(n.filters.length>1),n.filters.reduce((i,r)=>kw(i,r)))}function kw(t,e){let n;return ne(t instanceof Ae||t instanceof $e),ne(e instanceof Ae||e instanceof $e),n=t instanceof Ae?e instanceof Ae?function(r,o){return $e.create([r,o],"and")}(t,e):VS(t,e):e instanceof Ae?VS(e,t):function(r,o){if(ne(r.filters.length>0&&o.filters.length>0),Ta(r)&&Ta(o))return IM(r,o.getFilters());let s=B0(r)?r:o,a=B0(r)?o:r,l=s.filters.map(u=>kw(u,a));return $e.create(l,"or")}(t,e),Df(n)}function VS(t,e){if(Ta(e))return IM(e,t.getFilters());{let n=e.filters.map(i=>kw(t,i));return $e.create(n,"or")}}function Df(t){if(ne(t instanceof Ae||t instanceof $e),t instanceof Ae)return t;let e=t.getFilters();if(e.length===1)return Df(e[0]);if(DM(t))return t;let n=e.map(r=>Df(r)),i=[];return n.forEach(r=>{r instanceof Ae?i.push(r):r instanceof $e&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:$e.create(i,t.op)}var pv=class{constructor(){this.un=new zc}addToCollectionParentIndex(e,n){return this.un.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(Nn.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(Nn.min())}updateCollectionGroup(e,n,i){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}},zc=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new We(Ne.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new We(Ne.comparator)).toArray()}};var qh=new Uint8Array(0),mv=class{constructor(e,n){this.databaseId=n,this.cn=new zc,this.ln=new wi(i=>Go(i),(i,r)=>nu(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});let o={collectionId:i,parent:tn(r)};return LS(e).put(o)}return R.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[lM(n),""],!1,!0);return LS(e).U(r).next(o=>{for(let s of o){if(s.collectionId!==n)break;i.push(fi(s.parent))}return i})}addFieldIndex(e,n){let i=Ec(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let s=ha(e);return o.next(a=>{s.put(RS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=Ec(e),r=ha(e),o=da(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Ec(e),i=da(e),r=ha(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return R.forEach(this.hn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new Ef(i).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=da(e),r=!0,o=new Map;return R.forEach(this.hn(n),s=>this.Pn(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=we(),a=[];return R.forEach(o,(l,u)=>{L("IndexedDbIndexManager",`Using index ${function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(l)} to execute ${Go(n)}`);let d=function(U,K){let le=O0(K);if(le===void 0)return null;for(let re of pf(U,le.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null}(u,l),f=function(U,K){let le=new Map;for(let re of No(K))for(let b of pf(U,re.fieldPath))switch(b.op){case"==":case"in":le.set(re.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return le.set(re.fieldPath.canonicalString(),b.value),Array.from(le.values())}return null}(u,l),m=function(U,K){let le=[],re=!0;for(let b of No(K)){let y=b.kind===0?_S(U,b.fieldPath,U.startAt):yS(U,b.fieldPath,U.startAt);le.push(y.value),re&&(re=y.inclusive)}return new vi(le,re)}(u,l),_=function(U,K){let le=[],re=!0;for(let b of No(K)){let y=b.kind===0?yS(U,b.fieldPath,U.endAt):_S(U,b.fieldPath,U.endAt);le.push(y.value),re&&(re=y.inclusive)}return new vi(le,re)}(u,l),D=this.In(l,u,m),M=this.In(l,u,_),A=this.Tn(l,u,f),k=this.En(l.indexId,d,D,m.inclusive,M,_.inclusive,A);return R.forEach(k,q=>i.G(q,n.limit).next(U=>{U.forEach(K=>{let le=z.fromSegments(K.documentKey);s.has(le)||(s=s.add(le),a.push(le))})}))}).next(()=>a)}return R.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=s$($e.create(e.filters,"and")).map(i=>K0(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,i,r,o,s,a){let l=(n!=null?n.length:1)*Math.max(i.length,o.length),u=l/(n!=null?n.length:1),d=[];for(let f=0;f<l;++f){let m=n?this.dn(n[f/u]):qh,_=this.An(e,m,i[f%u],r),D=this.Rn(e,m,o[f%u],s),M=a.map(A=>this.An(e,m,A,!0));d.push(...this.createRange(_,D,M))}return d}An(e,n,i,r){let o=new Vo(e,z.empty(),n,i);return r?o:o.Zt()}Rn(e,n,i,r){let o=new Vo(e,z.empty(),n,i);return r?o.Zt():o}Pn(e,n){let i=new Ef(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(let a of o)i.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let i=2,r=this.hn(n);return R.forEach(r,o=>this.Pn(e,o).next(s=>{s?i!==0&&s.fields.length<function(l){let u=new We(gt.comparator),d=!1;for(let f of l.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(let f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}Vn(e,n){let i=new Fo;for(let r of No(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let s=i.Yt(r.kind);$i.vt.It(o,s)}return i.zt()}dn(e){let n=new Fo;return $i.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){let i=new Fo;return $i.vt.It(Uo(this.databaseId,n),i.Yt(function(o){let s=No(o);return s.length===0?0:s[s.length-1].kind}(e))),i.zt()}Tn(e,n,i){if(i===null)return[];let r=[];r.push(new Fo);let o=0;for(let s of No(e)){let a=i[o++];for(let l of r)if(this.fn(n,s.fieldPath)&&Vc(a))r=this.gn(r,s,a);else{let u=l.Yt(s.kind);$i.vt.It(a,u)}}return this.pn(r)}In(e,n,i){return this.Tn(e,n,i.position)}pn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].zt();return n}gn(e,n,i){let r=[...e],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let l=new Fo;l.seed(a.zt()),$i.vt.It(s,l.Yt(n.kind)),o.push(l)}return o}fn(e,n){return!!e.filters.find(i=>i instanceof Ae&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=Ec(e),r=ha(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let s=[];return R.forEach(o,a=>r.get([a.indexId,this.uid]).next(l=>{s.push(function(d,f){let m=f?new Rc(f.sequenceNumber,new Nn(Wo(f.readTime),new z(fi(f.documentKey)),f.largestBatchId)):Rc.empty(),_=d.fields.map(([D,M])=>new wa(gt.fromServerFormat(D),M));return new Ca(d.indexId,d.collectionGroup,_,m)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:_e(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=Ec(e),o=ha(e);return this.yn(e).next(s=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>R.forEach(a,l=>o.put(RS(l.indexId,this.uid,s,i)))))}updateIndexEntries(e,n){let i=new Map;return R.forEach(n,(r,o)=>{let s=i.get(r.collectionGroup);return(s?R.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),R.forEach(a,l=>this.wn(e,r,l).next(u=>{let d=this.Sn(o,l);return u.isEqual(d)?R.resolve():this.bn(e,o,l,u,d)}))))})}Dn(e,n,i,r){return da(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,n.key),documentKey:n.key.path.toArray()})}vn(e,n,i,r){return da(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,n.key),n.key.path.toArray()])}wn(e,n,i){let r=da(e),o=new We(Ar);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,n)])},(s,a)=>{o=o.add(new Vo(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,n){let i=new We(Ar),r=this.Vn(n,e);if(r==null)return i;let o=O0(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Vc(s))for(let a of s.arrayValue.values||[])i=i.add(new Vo(n.indexId,e.key,this.dn(a),r))}else i=i.add(new Vo(n.indexId,e.key,qh,r));return i}bn(e,n,i,r,o){L("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(l,u,d,f,m){let _=l.getIterator(),D=u.getIterator(),M=ua(_),A=ua(D);for(;M||A;){let k=!1,q=!1;if(M&&A){let U=d(M,A);U<0?q=!0:U>0&&(k=!0)}else M!=null?q=!0:k=!0;k?(f(A),A=ua(D)):q?(m(M),M=ua(_)):(M=ua(_),A=ua(D))}}(r,o,Ar,a=>{s.push(this.Dn(e,n,i,a))},a=>{s.push(this.vn(e,n,i,a))}),R.waitFor(s)}yn(e){let n=1;return ha(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((s,a)=>Ar(s,a)).filter((s,a,l)=>!a||Ar(s,l[a-1])!==0);let r=[];r.push(e);for(let s of i){let a=Ar(s,e),l=Ar(s,n);if(a===0)r[0]=e.Zt();else if(a>0&&l<0)r.push(s),r.push(s.Zt());else if(l>0)break}r.push(n);let o=[];for(let s=0;s<r.length;s+=2){if(this.Cn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,qh,[]],l=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,qh,[]];o.push(IDBKeyRange.bound(a,l))}return o}Cn(e,n){return Ar(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(BS)}getMinOffset(e,n){return R.mapArray(this.hn(n),i=>this.Pn(e,i).next(r=>r||X())).next(BS)}};function LS(t){return Mt(t,"collectionParents")}function da(t){return Mt(t,"indexEntries")}function Ec(t){return Mt(t,"indexConfiguration")}function ha(t){return Mt(t,"indexState")}function BS(t){ne(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;Iw(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Nn(e.readTime,e.documentKey,n)}var jS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},On=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function aA(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,l=i.J({range:s},(d,f,m)=>(a++,m.delete()));o.push(l.next(()=>{ne(a===1)}));let u=[];for(let d of n.mutations){let f=pM(e,d.key.path,n.batchId);o.push(r.delete(f)),u.push(d.key)}return R.waitFor(o).next(()=>u)}function Cf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw X();e=t.noDocument}return JSON.stringify(e).length}On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(41943040,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);var If=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(e,n,i,r){ne(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xr(e).J({index:"userMutationsIndex",range:i},(r,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=ya(e),s=xr(e);return s.add({}).next(a=>{ne(typeof a=="number");let l=new Bc(a,n,i,r),u=function(_,D,M){let A=M.baseMutations.map(q=>Hc(_.ct,q)),k=M.mutations.map(q=>Hc(_.ct,q));return{userId:D,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:A,mutations:k}}(this.serializer,this.userId,l),d=[],f=new We((m,_)=>_e(m.canonicalString(),_.canonicalString()));for(let m of r){let _=pM(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),d.push(s.put(u)),d.push(o.put(_,hU))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),R.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return xr(e).get(n).next(i=>i?(ne(i.userId===this.userId),ko(this.serializer,i)):null)}Mn(e,n){return this.Fn[n]?R.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Fn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return xr(e).J({index:"userMutationsIndex",range:r},(s,a,l)=>{a.userId===this.userId&&(ne(a.batchId>=i),o=ko(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return xr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xr(e).U("userMutationsIndex",n).next(i=>i.map(r=>ko(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=Jh(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return ya(e).J({range:r},(s,a,l)=>{let[u,d,f]=s,m=fi(d);if(u===this.userId&&n.path.isEqual(m))return xr(e).get(f).next(_=>{if(!_)throw X();ne(_.userId===this.userId),o.push(ko(this.serializer,_))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new We(_e),r=[];return n.forEach(o=>{let s=Jh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=ya(e).J({range:a},(u,d,f)=>{let[m,_,D]=u,M=fi(_);m===this.userId&&o.path.isEqual(M)?i=i.add(D):f.done()});r.push(l)}),R.waitFor(r).next(()=>this.xn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=Jh(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new We(_e);return ya(e).J({range:s},(l,u,d)=>{let[f,m,_]=l,D=fi(m);f===this.userId&&i.isPrefixOf(D)?D.length===r&&(a=a.add(_)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(xr(e).get(o).next(s=>{if(s===null)throw X();ne(s.userId===this.userId),i.push(ko(this.serializer,s))}))}),R.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return aA(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),R.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return R.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return ya(e).J({range:i},(o,s,a)=>{if(o[0]===this.userId){let l=fi(o[1]);r.push(l)}else a.done()}).next(()=>{ne(r.length===0)})})}containsKey(e,n){return lA(e,this.userId,n)}Nn(e){return cA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function lA(t,e,n){let i=Jh(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return ya(t).J({range:o,H:!0},(a,l,u)=>{let[d,f,m]=a;d===e&&f===r&&(s=!0),u.done()}).next(()=>s)}function xr(t){return Mt(t,"mutations")}function ya(t){return Mt(t,"documentMutations")}function cA(t){return Mt(t,"mutationQueues")}var Oa=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var gv=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{let i=new Oa(n.highestTargetId);return n.highestTargetId=i.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>oe.fromTimestamp(new ot(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.qn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Qn(e,r)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(i=>(i.targetCount+=1,this.$n(n,i),this.Qn(e,i))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>fa(e).delete(n.targetId)).next(()=>this.qn(e)).next(i=>(ne(i.targetCount>0),i.targetCount-=1,this.Qn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return fa(e).J((s,a)=>{let l=Tc(a);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,o.push(this.removeTargetData(e,l)))}).next(()=>R.waitFor(o)).next(()=>r)}forEachTarget(e,n){return fa(e).J((i,r)=>{let o=Tc(r);n(o)})}qn(e){return US(e).get("targetGlobalKey").next(n=>(ne(n!==null),n))}Qn(e,n){return US(e).put("targetGlobalKey",n)}Kn(e,n){return fa(e).put(rA(this.serializer,n))}$n(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=Go(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return fa(e).J({range:r,index:"queryTargetsIndex"},(s,a,l)=>{let u=Tc(a);nu(n,u.target)&&(o=u,l.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=Or(e);return n.forEach(s=>{let a=tn(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,s))}),R.waitFor(r)}removeMatchingKeys(e,n,i){let r=Or(e);return R.forEach(n,o=>{let s=tn(o.path);return R.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=Or(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Or(e),o=we();return r.J({range:i,H:!0},(s,a,l)=>{let u=fi(s[1]),d=new z(u);o=o.add(d)}).next(()=>o)}containsKey(e,n){let i=tn(n.path),r=IDBKeyRange.bound([i],[lM(i)],!1,!0),o=0;return Or(e).J({index:"documentTargetsIndex",H:!0,range:r},([s,a],l,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,n){return fa(e).get(n).next(i=>i?Tc(i):null)}};function fa(t){return Mt(t,"targets")}function US(t){return Mt(t,"targetGlobal")}function Or(t){return Mt(t,"targetDocuments")}function $S([t,e],[n,i]){let r=_e(t,n);return r===0?_e(e,i):r}var _v=class{constructor(e){this.Un=e,this.buffer=new We($S),this.Wn=0}Gn(){return++this.Wn}zn(e){let n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();$S(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},yv=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){L("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>O(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wr(n)?L("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield zr(n)}yield this.Hn(3e5)}))}},vv=class{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return R.resolve(wn.oe);let i=new _v(n);return this.Jn.forEachTarget(e,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(e,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(jS)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jS):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let i,r,o,s,a,l,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,s=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(e,i,n))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(u=Date.now(),pa()<=Xn.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:f})))}};function a$(t,e){return new vv(t,e)}var wv=class{constructor(e,n){this.db=e,this.garbageCollector=a$(this,n)}Yn(e){let n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}er(e){let n=0;return this.Zn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(i,r)=>n(r))}addReference(e,n,i){return Kh(e,i)}removeReference(e,n,i){return Kh(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Kh(e,n)}nr(e,n){return function(r,o){let s=!1;return cA(r).Y(a=>lA(r,a,o).next(l=>(l&&(s=!0),R.resolve(!l)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.tr(e,(s,a)=>{if(a<=n){let l=this.nr(e,s).next(u=>{if(!u)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,oe.min()),Or(e).delete(function(f){return[0,tn(f.path)]}(s))))});r.push(l)}}).next(()=>R.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Kh(e,n)}tr(e,n){let i=Or(e),r,o=wn.oe;return i.J({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:u})=>{s===0?(o!==wn.oe&&n(new z(fi(r)),o),o=u,r=l):o=wn.oe}).next(()=>{o!==wn.oe&&n(new z(fi(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Kh(t,e){return Or(t).put(function(i,r){return{targetId:0,path:tn(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var Tf=class{constructor(){this.changes=new wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?R.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var bv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Ro(e).put(i)}removeEntry(e,n,i){return Ro(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],wf(s),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.rr(e,i)))}getEntry(e,n){let i=Dt.newInvalidDocument(n);return Ro(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Dc(n))},(r,o)=>{i=this.ir(n,o)}).next(()=>i)}sr(e,n){let i={size:0,document:Dt.newInvalidDocument(n)};return Ro(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Dc(n))},(r,o)=>{i={document:this.ir(n,o),size:Cf(o)}}).next(()=>i)}getEntries(e,n){let i=hn();return this._r(e,n,(r,o)=>{let s=this.ir(r,o);i=i.insert(r,s)}).next(()=>i)}ar(e,n){let i=hn(),r=new Xe(z.comparator);return this._r(e,n,(o,s)=>{let a=this.ir(o,s);i=i.insert(o,a),r=r.insert(o,Cf(s))}).next(()=>({documents:i,ur:r}))}_r(e,n,i){if(n.isEmpty())return R.resolve();let r=new We(zS);n.forEach(l=>r=r.add(l));let o=IDBKeyRange.bound(Dc(r.first()),Dc(r.last())),s=r.getIterator(),a=s.getNext();return Ro(e).J({index:"documentKeyIndex",range:o},(l,u,d)=>{let f=z.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&zS(a,f)<0;)i(a,null),a=s.getNext();a&&a.isEqual(f)&&(i(a,u),a=s.hasNext()?s.getNext():null),a?d.$(Dc(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),wf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ro(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let d=hn();for(let f of u){let m=this.ir(z.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(ru(n,m)||r.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,i,r){let o=hn(),s=HS(n,i),a=HS(n,Nn.max());return Ro(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,u,d)=>{let f=this.ir(z.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(f.key,f),o.size===r&&d.done()}).next(()=>o)}newChangeBuffer(e){return new Ev(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return GS(e).get("remoteDocumentGlobalKey").next(n=>(ne(!!n),n))}rr(e,n){return GS(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){let i=r$(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(oe.min())))return i}return Dt.newInvalidDocument(e)}};function uA(t){return new bv(t)}var Ev=class extends Tf{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new wi(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new We((o,s)=>_e(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(n.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let l=xS(this.cr.serializer,s);r=r.add(o.path.popLast());let u=Cf(l);i+=u-a.size,n.push(this.cr.addEntry(e,o,l))}else if(i-=a.size,this.trackRemovals){let l=xS(this.cr.serializer,s.convertToNoDocument(oe.min()));n.push(this.cr.addEntry(e,o,l))}}),r.forEach(o=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.cr.updateMetadata(e,i)),R.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(i=>(this.lr.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:i,ur:r})=>(r.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function GS(t){return Mt(t,"remoteDocumentGlobal")}function Ro(t){return Mt(t,"remoteDocumentsV14")}function Dc(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HS(t,e){let n=e.documentKey.path.toArray();return[t,wf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function zS(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=_e(n[o],i[o]),r)return r;return r=_e(n.length,i.length),r||(r=_e(n[n.length-2],i[i.length-2]),r||_e(n[n.length-1],i[i.length-1]))}var Dv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Sf=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ac(i.mutation,r,bn.empty(),ot.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,we()).next(()=>i))}getLocalViewOfDocuments(e,n,i=we()){let r=pi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let s=Ic();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let i=pi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,we()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,i,r){let o=hn(),s=Mc(),a=function(){return Mc()}();return n.forEach((l,u)=>{let d=i.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof Yn)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),Ac(d.mutation,u,d.mutation.getFieldMask(),ot.now())):s.set(u.key,bn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new Dv(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let i=Mc(),r=new Xe((s,a)=>s-a),o=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=n.get(l);if(u===null)return;let d=i.get(l)||bn.empty();d=a.applyToLocalView(u,d),i.set(l,d);let f=(r.get(a.batchId)||we()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,d=l.value,f=PM();d.forEach(m=>{if(!o.has(m)){let _=UM(n.get(m),i.get(m));_!==null&&f.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return R.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):R.resolve(pi()),a=-1,l=o;return s.next(u=>R.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?R.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,we())).next(d=>({batchId:a,changes:NM(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(i=>{let r=Ic();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,s=Ic();return this.indexManager.getCollectionParents(e,o).next(a=>R.forEach(a,l=>{let u=function(f,m){return new Qn(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(s=>{o.forEach((l,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Dt.newInvalidDocument(d)))});let a=Ic();return s.forEach((l,u)=>{let d=o.get(l);d!==void 0&&Ac(d.mutation,u,bn.empty(),ot.now()),ru(n,u)&&(a=a.insert(l,u))}),a})}};var Cv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return R.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:_t(r.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:Pw(r.bundledQuery),readTime:_t(r.readTime)}}(n)),R.resolve()}};var Iv=class{constructor(){this.overlays=new Xe(z.comparator),this.Ir=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){let i=pi();return R.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),R.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),R.resolve()}getOverlaysForCollection(e,n,i){let r=pi(),o=n.length+1,s=new z(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return R.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Xe((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let d=o.get(u.largestBatchId);d===null&&(d=pi(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=pi(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=r)););return R.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new jc(n,i));let o=this.Ir.get(n);o===void 0&&(o=we(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}};var Tv=class{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,R.resolve()}};var Wc=class{constructor(){this.Tr=new We(wt.Er),this.dr=new We(wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let i=new wt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new wt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){let n=new z(new Ne([])),i=new wt(n,e),r=new wt(n,e+1),o=[];return this.dr.forEachInRange([i,r],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new z(new Ne([])),i=new wt(n,e),r=new wt(n,e+1),o=we();return this.dr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new wt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},wt=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return z.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||z.comparator(e.key,n.key)}};var Sv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new We(wt.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Bc(o,n,i,r);this.mutationQueue.push(s);for(let a of r)this.br=this.br.add(new wt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(s)}lookupMutationBatch(e,n){return R.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.vr(i),o=r<0?0:r;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new wt(n,0),r=new wt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],s=>{let a=this.Dr(s.wr);o.push(a)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new We(_e);return n.forEach(r=>{let o=new wt(r,0),s=new wt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{i=i.add(a.wr)})}),R.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;z.isDocumentKey(o)||(o=o.child(""));let s=new wt(new z(o),0),a=new We(_e);return this.br.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},s),R.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ne(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return R.forEach(n.mutations,r=>{let o=new wt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){let i=new wt(n,0),r=this.br.firstAfterOrEqual(i);return R.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Mv=class{constructor(e){this.Mr=e,this.docs=function(){return new Xe(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return R.resolve(i?i.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let i=hn();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Dt.newInvalidDocument(r))}),R.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=hn(),s=n.path,a=new z(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:d}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Iw(uM(d),i)<=0||(r.has(d.key)||ru(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,n,i,r){X()}Or(e,n){return R.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Av(this)}getSize(e){return R.resolve(this.size)}},Av=class extends Tf{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),R.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var xv=class{constructor(e){this.persistence=e,this.Nr=new wi(n=>Go(n),nu),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wc,this.targetCount=0,this.kr=Oa.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),R.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Oa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.Kn(n),R.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),R.waitFor(o).next(()=>r)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){let i=this.Nr.get(n)||null;return R.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),R.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),R.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Br.yr(n);return R.resolve(i)}containsKey(e,n){return R.resolve(this.Br.containsKey(n))}};var Mf=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new wn(0),this.Kr=!1,this.Kr=!0,this.$r=new Tv,this.referenceDelegate=e(this),this.Ur=new xv(this),this.indexManager=new pv,this.remoteDocumentCache=function(r){return new Mv(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new vf(n),this.Gr=new Cv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Iv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new Sv(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){L("MemoryPersistence","Starting transaction:",e);let r=new Ov(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return R.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}},Ov=class extends af{constructor(e){super(),this.currentSequenceNumber=e}},Af=class t{constructor(e){this.persistence=e,this.Jr=new Wc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),R.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),R.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,i=>{let r=z.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return R.or([()=>R.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Rv=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new lf("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aS,{unique:!0}),l.createObjectStore("documentMutations")}(e),WS(e),function(l){l.createObjectStore("remoteDocuments")}(e));let s=R.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),WS(e)),s=s.next(()=>function(l){let u=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:oe.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(l,u){return u.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aS,{unique:!0});let f=u.store("mutations"),m=d.map(_=>f.put(_));return R.waitFor(m)})}(e,o))),s=s.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(s=s.next(()=>this.ni(o))),i<6&&r>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),i<7&&r>=7&&(s=s.next(()=>this.ii(o))),i<8&&r>=8&&(s=s.next(()=>this.si(e,o))),i<9&&r>=9&&(s=s.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(s=s.next(()=>this.oi(o))),i<11&&r>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{(function(l){let u=l.createObjectStore("documentOverlays",{keyPath:CU});u.createIndex("collectionPathOverlayIndex",IU,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",TU,{unique:!1})})(e)})),i<13&&r>=13&&(s=s.next(()=>function(l){let u=l.createObjectStore("remoteDocumentsV14",{keyPath:fU});u.createIndex("documentKeyIndex",pU),u.createIndex("collectionGroupIndex",mU)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ai(e,o))),i<15&&r>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:wU}).createIndex("sequenceNumberIndex",bU,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:EU}).createIndex("documentKeyIndex",DU,{unique:!1})}(e))),i<16&&r>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),i<17&&r>=17&&(s=s.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=Cf(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>R.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",s).next(a=>R.forEach(a,l=>{ne(l.userId===o.userId);let u=ko(this.serializer,l);return aA(e,o.userId,u).next(()=>{})}))}))}ii(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((s,a)=>{let l=new Ne(s),u=function(f){return[0,tn(f)]}(l);o.push(n.get(u).next(d=>d?R.resolve():(f=>n.put({targetId:0,path:tn(f),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>R.waitFor(o))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:vU});let i=n.store("collectionParents"),r=new zc,o=s=>{if(r.add(s)){let a=s.lastSegment(),l=s.popLast();return i.put({collectionId:a,parent:tn(l)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let l=new Ne(s);return o(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,l],u)=>{let d=fi(a);return o(d.popLast())}))}oi(e){let n=e.store("targets");return n.J((i,r)=>{let o=Tc(r),s=rA(this.serializer,o);return n.put(s)})}_i(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,s)=>{let a=n.store("remoteDocumentsV14"),l=function(f){return f.document?new z(Ne.fromString(f.document.name).popFirst(5)):f.noDocument?z.fromSegments(f.noDocument.path):f.unknownDocument?z.fromSegments(f.unknownDocument.path):X()}(s).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(u))}).next(()=>R.waitFor(r))}ai(e,n){let i=n.store("mutations"),r=uA(this.serializer),o=new Mf(Af.Zr,this.serializer.ct);return i.U().next(s=>{let a=new Map;return s.forEach(l=>{var u;let d=(u=a.get(l.userId))!==null&&u!==void 0?u:we();ko(this.serializer,l).keys().forEach(f=>d=d.add(f)),a.set(l.userId,d)}),R.forEach(a,(l,u)=>{let d=new bt(u),f=bf.lt(this.serializer,d),m=o.getIndexManager(d),_=If.lt(d,this.serializer,m,o.referenceDelegate);return new Sf(r,_,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Pc(n,wn.oe),l).next()})})}};function WS(t){t.createObjectStore("targetDocuments",{keyPath:_U}).createIndex("documentTargetsIndex",yU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gU,{unique:!0}),t.createObjectStore("targetGlobal")}var b0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Nv=class t{constructor(e,n,i,r,o,s,a,l,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.ui=o,this.window=s,this.document=a,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!t.D())throw new F(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wv(this,r),this.Ai=n+"main",this.serializer=new vf(l),this.Ri=new Fr(this.Ai,this.hi,new Rv(this.serializer)),this.$r=new av,this.Ur=new gv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uA(this.serializer),this.Gr=new sv,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&mt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(N.FAILED_PRECONDITION,b0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new wn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=n=>O(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(n=>O(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>O(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Wr(e))return L("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return L("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Cc(e).get("owner").next(n=>R.resolve(this.vi(n)))}Ci(e){return Qh(e).delete(this.clientId)}Fi(){return O(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=Mt(n,"clientMetadata");return i.U().next(r=>{let o=this.xi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return R.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let n of e)this.Vi.removeItem(this.Oi(n.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?R.resolve(!0):Cc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new F(N.FAILED_PRECONDITION,b0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qh(e).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&L("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return O(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Pc(e,wn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()})}xi(e,n){return e.filter(i=>this.Mi(i.updateTimeMs,n)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Qh(e).U().next(n=>this.xi(n,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return If.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return bf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,i){L("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(l){return l===17?AU:l===16?MU:l===15?Sw:l===14?_M:l===13?gM:l===12?SU:l===11?mM:void X()}(this.hi),s;return this.Ri.runTransaction(e,r,o,a=>(s=new Pc(a,this.Qr?this.Qr.next():wn.oe),n==="readwrite-primary"?this.wi(s).next(l=>!!l||this.Si(s)).next(l=>{if(!l)throw mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new F(N.FAILED_PRECONDITION,dM);return i(s)}).next(l=>this.Di(s).next(()=>l)):this.Ki(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Cc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(N.FAILED_PRECONDITION,b0)})}Di(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cc(e).put("owner",n)}static D(){return Fr.D()}bi(e){let n=Cc(e);return n.get("owner").next(i=>this.vi(i)?(L("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):R.resolve())}Mi(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(mt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let n=/(?:Version|Mobile)\/1[456]/;cm()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{let i=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return L("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return mt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){mt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Cc(t){return Mt(t,"owner")}function Qh(t){return Mt(t,"clientMetadata")}function Fw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Pv=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=we(),r=we();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var kv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var xf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cm()?8:hM(bl())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new kv;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(pa()<=Xn.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",ma(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(pa()<=Xn.DEBUG&&L("QueryEngine","Query:",ma(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(pa()<=Xn.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",ma(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(n))):R.resolve())}Yi(e,n){if(vS(n))return R.resolve(null);let i=nn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=mf(n,null,"F"),i=nn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=we(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{let u=this.ts(n,a);return this.ns(n,u,s,l.readTime)?this.Yi(e,mf(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,i,r){return vS(n)||r.isEqual(oe.min())?R.resolve(null):this.Ji.getDocuments(e,i).next(o=>{let s=this.ts(n,o);return this.ns(n,s,i,r)?R.resolve(null):(pa()<=Xn.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ma(n)),this.rs(e,s,n,cM(r,-1)).next(a=>a))})}ts(e,n){let i=new We(OM(e));return n.forEach((r,o)=>{ru(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return pa()<=Xn.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",ma(n)),this.Ji.getDocumentsMatchingQuery(e,n,Nn.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Fv=class{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Xe(_e),this._s=new wi(o=>Go(o),nu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function dA(t,e,n,i){return new Fv(t,e,n,i)}function hA(t,e){return O(this,null,function*(){let n=H(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],l=we();for(let u of r){s.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function l$(t,e){let n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){let f=u.batch,m=f.keys(),_=R.resolve();return m.forEach(D=>{_=_.next(()=>d.getEntry(l,D)).next(M=>{let A=u.docVersions.get(D);ne(A!==null),M.version.compareTo(A)<0&&(f.applyToRemoteDocument(M,u),M.isValidDocument()&&(M.setReadTime(u.commitVersion),d.addEntry(M)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=we();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function fA(t){let e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function c$(t,e){let n=H(t),i=e.snapshotVersion,r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let m=r.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(o,d.addedDocuments,f)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(yt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(f,_),function(M,A,k){return M.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,_,d)&&a.push(n.Ur.updateTargetData(o,_))});let l=hn(),u=we();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(pA(o,s,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!i.isEqual(oe.min())){let d=n.Ur.getLastRemoteSnapshotVersion(o).next(f=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(d)}return R.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(n.os=r,o))}function pA(t,e,n){let i=we(),r=we();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let s=hn();return n.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:r}})}function u$(t,e){let n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ra(t,e){let n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,R.resolve(r)):n.Ur.allocateTargetId(i).next(s=>(r=new xa(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}function Na(t,e,n){return O(this,null,function*(){let i=H(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Wr(s))throw s;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function Of(t,e,n){let i=H(t),r=oe.min(),o=we();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,d){let f=H(l),m=f._s.get(d);return m!==void 0?R.resolve(f.os.get(m)):f.Ur.getTargetData(u,d)}(i,s,nn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>i.ss.getDocumentsMatchingQuery(s,e,n?r:oe.min(),n?o:we())).next(a=>(_A(i,xM(e),a),{documents:a,Ts:o})))}function mA(t,e){let n=H(t),i=H(n.Ur),r=n.os.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(s=>s?s.target:null))}function gA(t,e){let n=H(t),i=n.us.get(e)||oe.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.cs.getAllFromCollectionGroup(r,e,cM(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(_A(n,e,r),r))}function _A(t,e,n){let i=t.us.get(e)||oe.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}function d$(t,e,n,i){return O(this,null,function*(){let r=H(t),o=we(),s=hn();for(let u of n){let d=e.Es(u.metadata.name);u.document&&(o=o.add(d));let f=e.ds(u);f.setReadTime(e.As(u.metadata.readTime)),s=s.insert(d,f)}let a=r.cs.newChangeBuffer({trackRemovals:!0}),l=yield Ra(r,function(d){return nn(Ua(Ne.fromString(`__bundle__/docs/${d}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>pA(u,a,s).next(d=>(a.apply(u),d)).next(d=>r.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>r.Ur.addMatchingKeys(u,o,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is)).next(()=>d.Ps)))})}function h$(i,r){return O(this,arguments,function*(t,e,n=we()){let o=yield Ra(t,nn(Pw(e.bundledQuery))),s=H(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let l=_t(e.readTime);if(o.snapshotVersion.compareTo(l)>=0)return s.Gr.saveNamedQuery(a,e);let u=o.withResumeToken(yt.EMPTY_BYTE_STRING,l);return s.os=s.os.insert(u.targetId,u),s.Ur.updateTargetData(a,u).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,n,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function qS(t,e){return`firestore_clients_${t}_${e}`}function KS(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function E0(t,e){return`firestore_targets_${t}_${e}`}var Rf=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Rs(e,n,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new F(r.error.code,r.error.message))),s?new t(e,n,r.state,o):(mt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},xc=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Rs(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new F(i.error.code,i.error.message))),o?new t(e,i.state,r):(mt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Nf=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=Ow();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=fM(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(mt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Vv=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(mt("SharedClientState",`Failed to parse online state: ${e}`),null)}},qc=class{constructor(){this.activeTargetIds=Ow()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Oc=class{constructor(e,n,i,r,o){this.window=e,this.ui=n,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Xe(_e),this.started=!1,this.bs=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=qS(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new qc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return O(this,null,function*(){let e=yield this.syncEngine.Qi();for(let i of e){if(i===this.ps)continue;let r=this.getItem(qS(this.persistenceKey,i));if(r){let o=Nf.Rs(i,r);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let n=this.storage.getItem(this.xs);if(n){let i=this.Ls(n);i&&this.Bs(i)}for(let i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,i){this.qs(e,n,i),this.Qs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(E0(this.persistenceKey,e));if(i){let r=xc.Rs(e,i);r&&(n=r.state)}}return this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(E0(this.persistenceKey,e))}updateQueryState(e,n,i){this.$s(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Qs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return L("SharedClientState","READ",e,n),n}setItem(e,n){L("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){L("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let n=e;if(n.storageArea===this.storage){if(L("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>O(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let i=this.Gs(n.key);return this.zs(i,null)}{let i=this.js(n.key,n.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let i=this.Hs(n.key,n.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){let i=this.Ys(n.key,n.newValue);if(i)return this.Zs(i)}}else if(n.key===this.xs){if(n.newValue!==null){let i=this.Ls(n.newValue);if(i)return this.Bs(i)}}else if(n.key===this.vs){let i=function(o){let s=wn.oe;if(o!=null)try{let a=JSON.parse(o);ne(typeof a=="number"),s=a}catch(a){mt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);i!==wn.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Os){let i=this.Xs(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,i){let r=new Rf(this.currentUser,e,n,i),o=KS(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Vs())}Qs(e){let n=KS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){let n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,i){let r=E0(this.persistenceKey,e),o=new xc(e,n,i);this.setItem(r,o.Vs())}Ws(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){let n=this.Cs.exec(e);return n?n[1]:null}js(e,n){let i=this.Gs(e);return Nf.Rs(i,n)}Hs(e,n){let i=this.Fs.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Rf.Rs(new bt(o),r,n)}Ys(e,n){let i=this.Ms.exec(e),r=Number(i[1]);return xc.Rs(r,n)}Ls(e){return Vv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return O(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);L("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){let i=n?this.Ss.insert(e,n):this.Ss.remove(e),r=this.ks(this.Ss),o=this.ks(i),s=[],a=[];return o.forEach(l=>{r.has(l)||s.push(l)}),r.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.io(s,a).then(()=>{this.Ss=i})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Ow();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},Pf=class{constructor(){this.so=new qc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qc,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Lv=class{_o(e){}shutdown(){}};var kf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Yh=null;function D0(){return Yh===null?Yh=function(){return 268435456+Math.round(2147483648*Math.random())}():Yh++,"0x"+Yh.toString(16)}var f$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Bv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Kt="WebChannelConnection",jv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,s){let a=D0(),l=this.xo(n,i.toUriEncodedString());L("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(n,l,u,r).then(d=>(L("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Rn("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",r),d})}Lo(n,i,r,o,s,a){return this.Mo(n,i,r,o,s)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ja}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}xo(n,i){let r=f$[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){let o=D0();return new Promise((s,a)=>{let l=new p0;l.setWithCredentials(!0),l.listenOnce(g0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case wc.NO_ERROR:let d=l.getResponseJson();L(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case wc.TIMEOUT:L(Kt,`RPC '${e}' ${o} timed out`),a(new F(N.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:let f=l.getStatus();if(L(Kt,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let _=m?.error;if(_&&_.status&&_.message){let D=function(A){let k=A.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(k)>=0?k:N.UNKNOWN}(_.status);a(new F(D,_.message))}else a(new F(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new F(N.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{L(Kt,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);L(Kt,`RPC '${e}' ${o} sending request:`,r),l.send(n,"POST",u,i,15)})}Bo(e,n,i){let r=D0(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=v0(),a=y0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new m0({})),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;let d=o.join("");L(Kt,`Creating RPC '${e}' stream ${r}: ${d}`,l);let f=s.createWebChannel(d,l),m=!1,_=!1,D=new Bv({Io:A=>{_?L(Kt,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(m||(L(Kt,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),L(Kt,`RPC '${e}' stream ${r} sending:`,A),f.send(A))},To:()=>f.close()}),M=(A,k,q)=>{A.listen(k,U=>{try{q(U)}catch(K){setTimeout(()=>{throw K},0)}})};return M(f,ca.EventType.OPEN,()=>{_||(L(Kt,`RPC '${e}' stream ${r} transport opened.`),D.yo())}),M(f,ca.EventType.CLOSE,()=>{_||(_=!0,L(Kt,`RPC '${e}' stream ${r} transport closed`),D.So())}),M(f,ca.EventType.ERROR,A=>{_||(_=!0,Rn(Kt,`RPC '${e}' stream ${r} transport errored:`,A),D.So(new F(N.UNAVAILABLE,"The operation could not be completed")))}),M(f,ca.EventType.MESSAGE,A=>{var k;if(!_){let q=A.data[0];ne(!!q);let U=q,K=U.error||((k=U[0])===null||k===void 0?void 0:k.error);if(K){L(Kt,`RPC '${e}' stream ${r} received error:`,K);let le=K.status,re=function(w){let E=vt[w];if(E!==void 0)return HM(E)}(le),b=K.message;re===void 0&&(re=N.INTERNAL,b="Unknown error status: "+le+" with message "+K.message),_=!0,D.So(new F(re,b)),f.close()}else L(Kt,`RPC '${e}' stream ${r} received:`,q),D.bo(q)}}),M(a,_0.STAT_EVENT,A=>{A.stat===Wh.PROXY?L(Kt,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===Wh.NOPROXY&&L(Kt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function yA(){return typeof window<"u"?window:null}function tf(){return typeof document<"u"?document:null}function ou(t){return new tv(t,!0)}var Kc=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&L("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ff=class{constructor(e,n,i,r,o,s,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Kc(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return O(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return O(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return O(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(mt(n.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{let r=new F(N.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){let i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>O(this,null,function*(){this.state=0,this.start()}))}I_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Uv=class extends Ff{constructor(e,n,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=JU(this.serializer,e),i=function(o){if(!("targetChange"in o))return oe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?oe.min():s.readTime?_t(s.readTime):oe.min()}(e);return this.listener.d_(n,i)}A_(e){let n={};n.database=rv(this.serializer),n.addTarget=function(o,s){let a,l=s.target;if(a=ff(l)?{documents:ZM(o,l)}:{query:XM(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=WM(o,s.resumeToken);let u=nv(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(oe.min())>0){a.readTime=Aa(o,s.snapshotVersion.toTimestamp());let u=nv(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let i=XU(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){let n={};n.database=rv(this.serializer),n.removeTarget=e,this.a_(n)}},$v=class extends Ff{constructor(e,n,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ne(!!e.streamToken),this.lastStreamToken=e.streamToken,ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=ZU(e.writeResults,e.commitTime),i=_t(e.commitTime);return this.listener.g_(i,n)}p_(){let e={};e.database=rv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Hc(this.serializer,i))};this.a_(n)}};var Gv=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,iv(n,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(N.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,iv(n,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(N.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Hv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(mt(n),this.D_=!1):L("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var zv=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{i.enqueueAndForget(()=>O(this,null,function*(){qr(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(l){return O(this,null,function*(){let u=H(l);u.L_.add(4),yield $a(u),u.q_.set("Unknown"),u.L_.delete(4),yield su(u)})}(this))}))}),this.q_=new Hv(i,r)}};function su(t){return O(this,null,function*(){if(qr(t))for(let e of t.B_)yield e(!0)})}function $a(t){return O(this,null,function*(){for(let e of t.B_)yield e(!1)})}function np(t,e){let n=H(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Bw(n)?Lw(n):Ha(n).r_()&&Vw(n,e))}function Pa(t,e){let n=H(t),i=Ha(n);n.N_.delete(e),i.r_()&&vA(n,e),n.N_.size===0&&(i.r_()?i.o_():qr(n)&&n.q_.set("Unknown"))}function Vw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ha(t).A_(e)}function vA(t,e){t.Q_.xe(e),Ha(t).R_(e)}function Lw(t){t.Q_=new ev({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ha(t).start(),t.q_.v_()}function Bw(t){return qr(t)&&!Ha(t).n_()&&t.N_.size>0}function qr(t){return H(t).L_.size===0}function wA(t){t.Q_=void 0}function p$(t){return O(this,null,function*(){t.q_.set("Online")})}function m$(t){return O(this,null,function*(){t.N_.forEach((e,n)=>{Vw(t,e)})})}function g$(t,e){return O(this,null,function*(){wA(t),Bw(t)?(t.q_.M_(e),Lw(t)):t.q_.set("Unknown")})}function _$(t,e,n){return O(this,null,function*(){if(t.q_.set("Online"),e instanceof _f&&e.state===2&&e.cause)try{yield function(r,o){return O(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.N_.delete(a),r.Q_.removeTarget(a))})}(t,e)}catch(i){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Vf(t,i)}else if(e instanceof Ea?t.Q_.Ke(e):e instanceof gf?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{let i=yield fA(t.localStore);n.compareTo(i)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let d=o.N_.get(u);d&&o.N_.set(u,d.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let d=o.N_.get(l);if(!d)return;o.N_.set(l,d.withResumeToken(yt.EMPTY_BYTE_STRING,d.snapshotVersion)),vA(o,l);let f=new xa(d.target,l,u,d.sequenceNumber);Vw(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){L("RemoteStore","Failed to raise snapshot:",i),yield Vf(t,i)}})}function Vf(t,e,n){return O(this,null,function*(){if(!Wr(e))throw e;t.L_.add(1),yield $a(t),t.q_.set("Offline"),n||(n=()=>fA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>O(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield su(t)}))})}function bA(t,e){return e().catch(n=>Vf(t,n,e))}function Ga(t){return O(this,null,function*(){let e=H(t),n=Hr(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;y$(e);)try{let r=yield u$(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,v$(e,r)}catch(r){yield Vf(e,r)}EA(e)&&DA(e)})}function y$(t){return qr(t)&&t.O_.length<10}function v$(t,e){t.O_.push(e);let n=Hr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function EA(t){return qr(t)&&!Hr(t).n_()&&t.O_.length>0}function DA(t){Hr(t).start()}function w$(t){return O(this,null,function*(){Hr(t).p_()})}function b$(t){return O(this,null,function*(){let e=Hr(t);for(let n of t.O_)e.m_(n.mutations)})}function E$(t,e,n){return O(this,null,function*(){let i=t.O_.shift(),r=J0.from(i,e,n);yield bA(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Ga(t)})}function D$(t,e){return O(this,null,function*(){e&&Hr(t).V_&&(yield function(i,r){return O(this,null,function*(){if(function(s){return GM(s)&&s!==N.ABORTED}(r.code)){let o=i.O_.shift();Hr(i).s_(),yield bA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Ga(i)}})}(t,e)),EA(t)&&DA(t)})}function QS(t,e){return O(this,null,function*(){let n=H(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let i=qr(n);n.L_.add(3),yield $a(n),i&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield su(n)})}function Wv(t,e){return O(this,null,function*(){let n=H(t);e?(n.L_.delete(2),yield su(n)):e||(n.L_.add(2),yield $a(n),n.q_.set("Unknown"))})}function Ha(t){return t.K_||(t.K_=function(n,i,r){let o=H(n);return o.w_(),new Uv(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:p$.bind(null,t),Ro:m$.bind(null,t),mo:g$.bind(null,t),d_:_$.bind(null,t)}),t.B_.push(e=>O(this,null,function*(){e?(t.K_.s_(),Bw(t)?Lw(t):t.q_.set("Unknown")):(yield t.K_.stop(),wA(t))}))),t.K_}function Hr(t){return t.U_||(t.U_=function(n,i,r){let o=H(n);return o.w_(),new $v(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:w$.bind(null,t),mo:D$.bind(null,t),f_:b$.bind(null,t),g_:E$.bind(null,t)}),t.B_.push(e=>O(this,null,function*(){e?(t.U_.s_(),yield Ga(t)):(yield t.U_.stop(),t.O_.length>0&&(L("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var qv=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let s=Date.now()+i,a=new t(e,n,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function za(t,e){if(mt("AsyncQueue",`${e}: ${t}`),Wr(t))return new F(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Lf=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||z.comparator(n.key,i.key):(n,i)=>z.comparator(n.key,i.key),this.keyedMap=Ic(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Bf=class{constructor(){this.W_=new Xe(z.comparator)}track(e){let n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}},ka=class t{constructor(e,n,i,r,o,s,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Lf.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var Kv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Qv=class{constructor(){this.queries=YS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){let r=H(n),o=r.queries;r.queries=YS(),o.forEach((s,a)=>{for(let l of a.j_)l.onError(i)})})(this,new F(N.ABORTED,"Firestore shutting down"))}};function YS(){return new wi(t=>AM(t),iu)}function jw(t,e){return O(this,null,function*(){let n=H(t),i=3,r=e.query,o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new Kv,i=e.J_()?0:1);try{switch(i){case 0:o.z_=yield n.onListen(r,!0);break;case 1:o.z_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(s){let a=za(s,`Initialization of query '${ma(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&$w(n)})}function Uw(t,e){return O(this,null,function*(){let n=H(t),i=e.query,r=3,o=n.queries.get(i);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function C$(t,e){let n=H(t),i=!1;for(let r of e){let o=r.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(r)&&(i=!0);s.z_=r}}i&&$w(n)}function I$(t,e,n){let i=H(t),r=i.queries.get(e);if(r)for(let o of r.j_)o.onError(n);i.queries.delete(e)}function $w(t){t.Y_.forEach(e=>{e.next()})}var Yv,JS;(JS=Yv||(Yv={})).ea="default",JS.Cache="cache";var Qc=class{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new ka(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yv.Cache}};var Jv=class{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}};var jf=class{constructor(e){this.serializer=e}Es(e){return gi(this.serializer,e)}ds(e){return e.metadata.exists?JM(this.serializer,e.document,!1):Dt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return _t(e)}},Zv=class{constructor(e,n,i){this.ca=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CA(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;let i=Ne.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){let n=new Map,i=new jf(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Es(r.metadata.name);for(let s of r.metadata.queries){let a=(n.get(s)||we()).add(o);n.set(s,a)}}return n}complete(){return O(this,null,function*(){let e=yield d$(this.localStore,new jf(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(let i of this.queries)yield h$(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function CA(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Uf=class{constructor(e){this.key=e}},$f=class{constructor(e){this.key=e}},Gf=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=we(),this.mutatedKeys=we(),this.Aa=OM(e),this.Ra=new Lf(this.Aa)}get Va(){return this.Ta}ma(e,n){let i=n?n.fa:new Bf,r=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,f)=>{let m=r.get(d),_=ru(this.query,f)?f:null,D=!!m&&this.mutatedKeys.has(m.key),M=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),A=!1;m&&_?m.data.isEqual(_.data)?D!==M&&(i.track({type:3,doc:_}),A=!0):this.ga(m,_)||(i.track({type:2,doc:_}),A=!0,(l&&this.Aa(_,l)>0||u&&this.Aa(_,u)<0)&&(a=!0)):!m&&_?(i.track({type:0,doc:_}),A=!0):m&&!_&&(i.track({type:1,doc:m}),A=!0,(l||u)&&(a=!0)),A&&(_?(s=s.add(_),o=M?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),i.track({type:1,doc:d})}return{Ra:s,fa:i,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(_,D){let M=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return M(_)-M(D)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(i),r=r!=null&&r;let a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new ka(this.query,e.Ra,o,s,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Bf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=we(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let n=[];return e.forEach(i=>{this.da.has(i)||n.push(new $f(i))}),this.da.forEach(i=>{e.has(i)||n.push(new Uf(i))}),n}ba(e){this.Ta=e.Ts,this.da=we();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ka.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Xv=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},ew=class{constructor(e){this.key=e,this.va=!1}},tw=class{constructor(e,n,i,r,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new wi(a=>AM(a),iu),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(z.comparator),this.Na=new Map,this.La=new Wc,this.Ba={},this.ka=new Map,this.qa=Oa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function T$(t,e,n=!0){return O(this,null,function*(){let i=ip(t),r,o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield IA(i,e,n,!0),r})}function S$(t,e){return O(this,null,function*(){let n=ip(t);yield IA(n,e,!0,!1)})}function IA(t,e,n,i){return O(this,null,function*(){let r=yield Ra(t.localStore,nn(e)),o=r.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return i&&(a=yield Gw(t,e,o,s==="current",r.resumeToken)),t.isPrimaryClient&&n&&np(t.remoteStore,r),a})}function Gw(t,e,n,i,r){return O(this,null,function*(){t.Ka=(f,m,_)=>function(M,A,k,q){return O(this,null,function*(){let U=A.view.ma(k);U.ns&&(U=yield Of(M.localStore,A.query,!1).then(({documents:b})=>A.view.ma(b,U)));let K=q&&q.targetChanges.get(A.targetId),le=q&&q.targetMismatches.get(A.targetId)!=null,re=A.view.applyChanges(U,M.isPrimaryClient,K,le);return nw(M,A.targetId,re.wa),re.snapshot})}(t,f,m,_);let o=yield Of(t.localStore,e,!0),s=new Gf(e,o.Ts),a=s.ma(o.documents),l=$c.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=s.applyChanges(a,t.isPrimaryClient,l);nw(t,n,u.wa);let d=new Xv(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot})}function M$(t,e,n){return O(this,null,function*(){let i=H(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(s=>!iu(s,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Na(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Pa(i.remoteStore,r.targetId),Fa(i,r.targetId)}).catch(zr))):(Fa(i,r.targetId),yield Na(i.localStore,r.targetId,!0))})}function A$(t,e){return O(this,null,function*(){let n=H(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Pa(n.remoteStore,i.targetId))})}function x$(t,e,n){return O(this,null,function*(){let i=qw(t);try{let r=yield function(s,a){let l=H(s),u=ot.now(),d=a.reduce((_,D)=>_.add(D.key),we()),f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let D=hn(),M=we();return l.cs.getEntries(_,d).next(A=>{D=A,D.forEach((k,q)=>{q.isValidDocument()||(M=M.add(k))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,D)).next(A=>{f=A;let k=[];for(let q of a){let U=HU(q,f.get(q.key).overlayedDocument);U!=null&&k.push(new Yn(q.key,U,EM(U.value.mapValue),ht.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,k,a)}).next(A=>{m=A;let k=A.applyToLocalDocumentSet(f,M);return l.documentOverlayCache.saveOverlays(_,A.batchId,k)})}).then(()=>({batchId:m.batchId,changes:NM(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new Xe(_e)),u=u.insert(a,l),s.Ba[s.currentUser.toKey()]=u}(i,r.batchId,n),yield Qi(i,r.changes),yield Ga(i.remoteStore)}catch(r){let o=za(r,"Failed to persist write");n.reject(o)}})}function TA(t,e){return O(this,null,function*(){let n=H(t);try{let i=yield c$(n.localStore,e);e.targetChanges.forEach((r,o)=>{let s=n.Na.get(o);s&&(ne(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.va=!0:r.modifiedDocuments.size>0?ne(s.va):r.removedDocuments.size>0&&(ne(s.va),s.va=!1))}),yield Qi(n,i,e)}catch(i){yield zr(i)}})}function ZS(t,e,n){let i=H(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){let l=H(s);l.onlineState=a;let u=!1;l.queries.forEach((d,f)=>{for(let m of f.j_)m.Z_(a)&&(u=!0)}),u&&$w(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function O$(t,e,n){return O(this,null,function*(){let i=H(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Na.get(e),o=r&&r.key;if(o){let s=new Xe(z.comparator);s=s.insert(o,Dt.newNoDocument(o,oe.min()));let a=we().add(o),l=new Uc(oe.min(),new Map,new Xe(_e),s,a);yield TA(i,l),i.Oa=i.Oa.remove(o),i.Na.delete(e),Ww(i)}else yield Na(i.localStore,e,!1).then(()=>Fa(i,e,n)).catch(zr)})}function R$(t,e){return O(this,null,function*(){let n=H(t),i=e.batch.batchId;try{let r=yield l$(n.localStore,e);zw(n,i,null),Hw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Qi(n,r)}catch(r){yield zr(r)}})}function N$(t,e,n){return O(this,null,function*(){let i=H(t);try{let r=yield function(s,a){let l=H(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(ne(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(i.localStore,e);zw(i,e,n),Hw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield Qi(i,r)}catch(r){yield zr(r)}})}function P$(t,e){return O(this,null,function*(){let n=H(t);qr(n.remoteStore)||L("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=H(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===-1)return void e.resolve();let r=n.ka.get(i)||[];r.push(e),n.ka.set(i,r)}catch(i){let r=za(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function Hw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function zw(t,e,n){let i=H(t),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Fa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||SA(t,i)})}function SA(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Pa(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ww(t))}function nw(t,e,n){for(let i of n)i instanceof Uf?(t.La.addReference(i.key,e),k$(t,i)):i instanceof $f?(L("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||SA(t,i.key)):X()}function k$(t,e){let n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(L("SyncEngine","New document in limbo: "+n),t.xa.add(i),Ww(t))}function Ww(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new z(Ne.fromString(e)),i=t.qa.next();t.Na.set(i,new ew(n)),t.Oa=t.Oa.insert(n,i),np(t.remoteStore,new xa(nn(Ua(n.path)),i,"TargetPurposeLimboResolution",wn.oe))}}function Qi(t,e,n){return O(this,null,function*(){let i=H(t),r=[],o=[],s=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{s.push(i.Ka(l,e,n).then(u=>{var d;if((u||n)&&i.isPrimaryClient){let f=u?!u.fromCache:(d=n?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){r.push(u);let f=Pv.Wi(l.targetId,u);o.push(f)}}))}),yield Promise.all(s),i.Ca.d_(r),yield function(l,u){return O(this,null,function*(){let d=H(l);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>R.forEach(u,m=>R.forEach(m.$i,_=>d.persistence.referenceDelegate.addReference(f,m.targetId,_)).next(()=>R.forEach(m.Ui,_=>d.persistence.referenceDelegate.removeReference(f,m.targetId,_)))))}catch(f){if(!Wr(f))throw f;L("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let _=d.os.get(m),D=_.snapshotVersion,M=_.withLastLimboFreeSnapshotVersion(D);d.os=d.os.insert(m,M)}}})}(i.localStore,o))})}function F$(t,e){return O(this,null,function*(){let n=H(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let i=yield hA(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new F(N.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Qi(n,i.hs)}})}function V$(t,e){let n=H(t),i=n.Na.get(e);if(i&&i.va)return we().add(i.key);{let r=we(),o=n.Ma.get(e);if(!o)return r;for(let s of o){let a=n.Fa.get(s);r=r.unionWith(a.view.Va)}return r}}function L$(t,e){return O(this,null,function*(){let n=H(t),i=yield Of(n.localStore,e.query,!0),r=e.view.ba(i);return n.isPrimaryClient&&nw(n,e.targetId,r.wa),r})}function B$(t,e){return O(this,null,function*(){let n=H(t);return gA(n.localStore,e).then(i=>Qi(n,i))})}function j$(t,e,n,i){return O(this,null,function*(){let r=H(t),o=yield function(a,l){let u=H(a),d=H(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,l).next(m=>m?u.localDocuments.getDocuments(f,m):R.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield Ga(r.remoteStore):n==="acknowledged"||n==="rejected"?(zw(r,e,i||null),Hw(r,e),function(a,l){H(H(a).mutationQueue).On(l)}(r.localStore,e)):X(),yield Qi(r,o)):L("SyncEngine","Cannot apply mutation batch with id: "+e)})}function U$(t,e){return O(this,null,function*(){let n=H(t);if(ip(n),qw(n),e===!0&&n.Qa!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield XS(n,i.toArray());n.Qa=!0,yield Wv(n.remoteStore,!0);for(let o of r)np(n.remoteStore,o)}else if(e===!1&&n.Qa!==!1){let i=[],r=Promise.resolve();n.Ma.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(Fa(n,s),Na(n.localStore,s,!0))),Pa(n.remoteStore,s)}),yield r,yield XS(n,i),function(s){let a=H(s);a.Na.forEach((l,u)=>{Pa(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Xe(z.comparator)}(n),n.Qa=!1,yield Wv(n.remoteStore,!1)}})}function XS(t,e,n){return O(this,null,function*(){let i=H(t),r=[],o=[];for(let s of e){let a,l=i.Ma.get(s);if(l&&l.length!==0){a=yield Ra(i.localStore,nn(l[0]));for(let u of l){let d=i.Fa.get(u),f=yield L$(i,d);f.snapshot&&o.push(f.snapshot)}}else{let u=yield mA(i.localStore,s);a=yield Ra(i.localStore,u),yield Gw(i,MA(u),s,!1,a.resumeToken)}r.push(a)}return i.Ca.d_(o),r})}function MA(t){return MM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $$(t){return function(n){return H(H(n).persistence).Qi()}(H(t).localStore)}function G$(t,e,n,i){return O(this,null,function*(){let r=H(t);if(r.Qa)return void L("SyncEngine","Ignoring unexpected query state notification.");let o=r.Ma.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield gA(r.localStore,xM(o[0])),a=Uc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yt.EMPTY_BYTE_STRING);yield Qi(r,s,a);break}case"rejected":yield Na(r.localStore,e,!0),Fa(r,e,i);break;default:X()}})}function H$(t,e,n){return O(this,null,function*(){let i=ip(t);if(i.Qa){for(let r of e){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){L("SyncEngine","Adding an already active target "+r);continue}let o=yield mA(i.localStore,r),s=yield Ra(i.localStore,o);yield Gw(i,MA(o),s.targetId,!1,s.resumeToken),np(i.remoteStore,s)}for(let r of n)i.Ma.has(r)&&(yield Na(i.localStore,r,!1).then(()=>{Pa(i.remoteStore,r),Fa(i,r)}).catch(zr))}})}function ip(t){let e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O$.bind(null,e),e.Ca.d_=C$.bind(null,e.eventManager),e.Ca.$a=I$.bind(null,e.eventManager),e}function qw(t){let e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N$.bind(null,e),e}function z$(t,e,n){let i=H(t);(function(o,s,a){return O(this,null,function*(){try{let l=yield s.getMetadata();if(yield function(_,D){let M=H(_),A=_t(D.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",k=>M.Gr.getBundleMetadata(k,D.id)).then(k=>!!k&&k.createTime.compareTo(A)>=0)}(o.localStore,l))return yield s.close(),a._completeWith(function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(CA(l));let u=new Zv(l,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let m=yield u.la(d);m&&a._updateProgress(m),d=yield s.Ua()}let f=yield u.complete();return yield Qi(o,f.Ia,void 0),yield function(_,D){let M=H(_);return M.persistence.runTransaction("Save bundle","readwrite",A=>M.Gr.saveBundleMetadata(A,D))}(o.localStore,l),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(l){return Rn("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Yc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){this.serializer=ou(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return dA(this.persistence,new xf,e.initialUser,this.serializer)}createPersistence(e){return new Mf(Af.Zr,this.serializer)}createSharedClientState(e){return new Pf}terminate(){return O(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Hf=class t extends Yc{constructor(e,n,i){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){yield am(t.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield qw(this.Wa.syncEngine),yield Ga(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return dA(this.persistence,new xf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new yv(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new k0(n,this.persistence);return new P0(e.asyncQueue,i)}createPersistence(e){let n=Fw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new Nv(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,yA(),tf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Pf}},iw=class t extends Hf{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return O(this,null,function*(){yield am(t.prototype,this,"initialize").call(this,e);let n=this.Wa.syncEngine;this.sharedClientState instanceof Oc&&(this.sharedClientState.syncEngine={no:j$.bind(null,n),ro:G$.bind(null,n),io:H$.bind(null,n),Qi:$$.bind(null,n),eo:B$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.yi(i=>O(this,null,function*(){yield U$(this.Wa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=yA();if(!Oc.D(n))throw new F(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=Fw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Oc(n,e.asyncQueue,i,e.clientId,e.initialUser)}},Jc=class{initialize(e,n){return O(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ZS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=F$.bind(null,this.syncEngine),yield Wv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Qv}()}createDatastore(e){let n=ou(e.databaseInfo.databaseId),i=function(o){return new jv(o)}(e.databaseInfo);return function(o,s,a,l){return new Gv(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,s,a){return new zv(i,r,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>ZS(this.syncEngine,n,0),function(){return kf.D()?new kf:new Lv}())}createSyncEngine(e,n){return function(r,o,s,a,l,u,d){let f=new tw(r,o,s,a,l,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return O(this,null,function*(){var e,n;yield function(r){return O(this,null,function*(){let o=H(r);L("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield $a(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};function eM(t,e=10240){let n=0;return{read(){return O(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return O(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Va=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var rw=class{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new Et,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.ja.cancel()}getMetadata(){return O(this,null,function*(){return this.metadata.promise})}Ua(){return O(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return O(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let n=this.Ha.decode(e),i=Number(n);isNaN(i)&&this.Za(`length string (${n}) is not valid number`);let r=yield this.Xa(i);return new Jv(JSON.parse(r),e.length+i)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return O(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Xa(e){return O(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let n=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return O(this,null,function*(){let e=yield this.ja.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var ow=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return O(this,null,function*(){let s=H(r),a={documents:o.map(f=>Gc(s.serializer,f))},l=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ne.emptyPath(),a,o.length),u=new Map;l.forEach(f=>{let m=YU(s.serializer,f);u.set(m.key.toString(),m)});let d=[];return o.forEach(f=>{let m=u.get(f.toString());ne(!!m),d.push(m)}),d})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=z.fromPath(i);this.mutations.push(new Lc(r,this.precondition(r)))}),yield function(i,r){return O(this,null,function*(){let o=H(i),s={writes:r.map(a=>Hc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ne.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X();n=oe.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new F(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(oe.min())?ht.exists(!1):ht.updateTime(n):ht.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(oe.min()))throw new F(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ht.updateTime(n)}return ht.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var sw=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.nu=i.maxAttempts,this.t_=new Kc(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>O(this,null,function*(){let e=new ow(this.datastore),n=this.su(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ou(r)}))}).catch(i=>{this.ou(i)})}))}su(e){try{let n=this.updateFunction(e);return!tu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!GM(n)}return!1}};var aw=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=bt.UNAUTHENTICATED,this.clientId=of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>O(this,null,function*(){L("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(L("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=za(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function nf(t,e){return O(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>O(this,null,function*(){i.isEqual(r)||(yield hA(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function lw(t,e){return O(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Kw(t);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>QS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>QS(e.remoteStore,r)),t._onlineComponents=e})}function AA(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Kw(t){return O(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!AA(n))throw n;Rn("Error using user provided cache. Falling back to memory cache: "+n),yield nf(t,new Yc)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield nf(t,new Yc);return t._offlineComponents})}function rp(t){return O(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield lw(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield lw(t,new Jc))),t._onlineComponents})}function xA(t){return Kw(t).then(e=>e.persistence)}function Qw(t){return Kw(t).then(e=>e.localStore)}function OA(t){return rp(t).then(e=>e.remoteStore)}function Yw(t){return rp(t).then(e=>e.syncEngine)}function W$(t){return rp(t).then(e=>e.datastore)}function La(t){return O(this,null,function*(){let e=yield rp(t),n=e.eventManager;return n.onListen=T$.bind(null,e.syncEngine),n.onUnlisten=M$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=A$.bind(null,e.syncEngine),n})}function q$(t){return t.asyncQueue.enqueue(()=>O(this,null,function*(){let e=yield xA(t),n=yield OA(t);return e.setNetworkEnabled(!0),function(r){let o=H(r);return o.L_.delete(0),su(o)}(n)}))}function K$(t){return t.asyncQueue.enqueue(()=>O(this,null,function*(){let e=yield xA(t),n=yield OA(t);return e.setNetworkEnabled(!1),function(r){return O(this,null,function*(){let o=H(r);o.L_.add(0),yield $a(o),o.q_.set("Offline")})}(n)}))}function Q$(t,e){let n=new Et;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(r,o,s){return O(this,null,function*(){try{let a=yield function(u,d){let f=H(u);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,d))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new F(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=za(a,`Failed to get document '${o} from cache`);s.reject(l)}})}(yield Qw(t),e,n)})),n.promise}function RA(t,e,n={}){let i=new Et;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,l,u){let d=new Va({next:m=>{s.enqueueAndForget(()=>Uw(o,f));let _=m.docs.has(a);!_&&m.fromCache?u.reject(new F(N.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?u.reject(new F(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Qc(Ua(a.path),d,{includeMetadataChanges:!0,_a:!0});return jw(o,f)}(yield La(t),t.asyncQueue,e,n,i)})),i.promise}function Y$(t,e){let n=new Et;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(r,o,s){return O(this,null,function*(){try{let a=yield Of(r,o,!0),l=new Gf(o,a.Ts),u=l.ma(a.documents),d=l.applyChanges(u,!1);s.resolve(d.snapshot)}catch(a){let l=za(a,`Failed to execute query '${o} against cache`);s.reject(l)}})}(yield Qw(t),e,n)})),n.promise}function NA(t,e,n={}){let i=new Et;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,l,u){let d=new Va({next:m=>{s.enqueueAndForget(()=>Uw(o,f)),m.fromCache&&l.source==="server"?u.reject(new F(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Qc(a,d,{includeMetadataChanges:!0,_a:!0});return jw(o,f)}(yield La(t),t.asyncQueue,e,n,i)})),i.promise}function J$(t,e){let n=new Va(e);return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(r,o){H(r).Y_.add(o),o.next()}(yield La(t),n)})),()=>{n.za(),t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(r,o){H(r).Y_.delete(o)}(yield La(t),n)}))}}function Z$(t,e,n,i){let r=function(s,a){let l;return l=typeof s=="string"?zM().encode(s):s,function(d,f){return new rw(d,f)}(function(d,f){if(d instanceof Uint8Array)return eM(d,f);if(d instanceof ArrayBuffer)return eM(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,ou(e));t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){z$(yield Yw(t),r,i)}))}function X$(t,e){return t.asyncQueue.enqueue(()=>O(this,null,function*(){return function(i,r){let o=H(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,r))}(yield Qw(t),e)}))}function PA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var tM=new Map;function Jw(t,e,n){if(!n)throw new F(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Zw(t,e,n,i){if(e===!0&&i===!0)throw new F(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nM(t){if(!z.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iM(t){if(z.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function op(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Pe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=op(t);throw new F(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function kA(t,e){if(e<=0)throw new F(N.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var zf=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new F(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Zw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qo=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zf(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new C0;switch(i.type){case"firstParty":return new M0(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new F(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=tM.get(n);i&&(L("ComponentProvider","Removing Datastore"),tM.delete(n),i.terminate())}(this),Promise.resolve()}};function FA(t,e,n,i={}){var r;let o=(t=Pe(t,qo))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=bt.MOCK_USER;else{a=Q1(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new F(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new bt(u)}t._authCredentials=new I0(new rf(a,l))}}var jt=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},qe=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},_i=class t extends jt{constructor(e,n,i){super(e,n,Ua(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Xw(t,e,...n){if(t=it(t),Jw("collection","path",e),t instanceof qo){let i=Ne.fromString(e,...n);return iM(i),new _i(t,null,i)}{if(!(t instanceof qe||t instanceof _i))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ne.fromString(e,...n));return iM(i),new _i(t.firestore,null,i)}}function VA(t,e){if(t=Pe(t,qo),Jw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jt(t,null,function(i){return new Qn(Ne.emptyPath(),i)}(e))}function au(t,e,...n){if(t=it(t),arguments.length===1&&(e=of.newId()),Jw("doc","path",e),t instanceof qo){let i=Ne.fromString(e,...n);return nM(i),new qe(t,null,new z(i))}{if(!(t instanceof qe||t instanceof _i))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ne.fromString(e,...n));return nM(i),new qe(t.firestore,t instanceof _i?t.converter:null,new z(i))}}function eb(t,e){return t=it(t),e=it(e),(t instanceof qe||t instanceof _i)&&(e instanceof qe||e instanceof _i)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function tb(t,e){return t=it(t),e=it(e),t instanceof jt&&e instanceof jt&&t.firestore===e.firestore&&iu(t._query,e._query)&&t.converter===e.converter}var cw=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Kc(this,"async_queue_retry"),this.Eu=()=>{let n=tf();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=tf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new Et;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return O(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Wr(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(i=>{this.hu=i,this.Pu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw mt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=n,n}enqueueAfterDelay(e,n,i){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let r=qv.createAndSchedule(this,e,n,i,o=>this.Vu(o));return this.lu.push(r),r}du(){this.hu&&X()}verifyOperationInProgress(){}mu(){return O(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function uw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var dw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Et,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var LA=-1,nt=class extends qo{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new cw}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||BA(this),this._firestoreClient.terminate()}};function At(t){return t._firestoreClient||BA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function BA(t){var e,n,i;let r=t._freezeSettings(),o=function(a,l,u,d){return new F0(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,PA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new aw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function jA(t,e){QA(t=Pe(t,nt));let n=At(t);if(n._uninitializedComponentsProvider)throw new F(N.FAILED_PRECONDITION,"SDK cache is already specified.");Rn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new Jc;return $A(n,r,new Hf(r,i.cacheSizeBytes,e?.forceOwnership))}function UA(t){QA(t=Pe(t,nt));let e=At(t);if(e._uninitializedComponentsProvider)throw new F(N.FAILED_PRECONDITION,"SDK cache is already specified.");Rn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new Jc;return $A(e,i,new iw(i,n.cacheSizeBytes))}function $A(t,e,n){let i=new Et;return t.asyncQueue.enqueue(()=>O(this,null,function*(){try{yield nf(t,n),yield lw(t,e),i.resolve()}catch(r){let o=r;if(!AA(o))throw o;Rn("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function GA(t){if(t._initialized&&!t._terminated)throw new F(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Et;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{yield function(i){return O(this,null,function*(){if(!Fr.D())return Promise.resolve();let r=i+"main";yield Fr.delete(r)})}(Fw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function HA(t){return function(n){let i=new Et;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return P$(yield Yw(n),i)})),i.promise}(At(t=Pe(t,nt)))}function zA(t){return q$(At(t=Pe(t,nt)))}function WA(t){return K$(At(t=Pe(t,nt)))}function qA(t,e){let n=At(t=Pe(t,nt)),i=new dw;return Z$(n,t._databaseId,e,i),i}function KA(t,e){return X$(At(t=Pe(t,nt)),e).then(n=>n?new jt(t,null,n.query):null)}function QA(t){if(t._initialized||t._terminated)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var bi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(yt.fromBase64String(e))}catch(n){throw new F(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Jn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qi=class{constructor(e){this._methodName=e}};var Ko=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}};var Zc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}};var e3=/^__.*__$/,hw=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new $r(e,this.data,n,this.fieldTransforms)}},Wf=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function YA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}var qf=class t{constructor(e,n,i,r,o,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Su({path:i,Du:!1});return r.vu(e),r}Cu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Kf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(YA(this.wu)&&e3.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},fw=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ou(e)}Nu(e,n,i,r=!1){return new qf({wu:e,methodName:n,Ou:i,path:gt.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Zo(t){let e=t._freezeSettings(),n=ou(t._databaseId);return new fw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sp(t,e,n,i,r,o={}){let s=t.Nu(o.merge||o.mergeFields?2:0,e,n,r);rb("Data must be an object, but it was:",s,i);let a=XA(i,s),l,u;if(o.merge)l=new bn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=yw(e,f,n);if(!s.contains(m))throw new F(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);tx(d,m)||d.push(m)}l=new bn(d),u=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=s.fieldTransforms;return new hw(new Qt(a),l,u)}var Xc=class t extends qi{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function JA(t,e,n){return new qf({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var pw=class t extends qi{_toFieldTransform(e){return new Ho(e.path,new jr)}isEqual(e){return e instanceof t}},mw=class t extends qi{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=JA(this,e,!0),i=this.Lu.map(o=>Xo(o,n)),r=new zi(i);return new Ho(e.path,r)}isEqual(e){return e instanceof t&&um(this.Lu,e.Lu)}},gw=class t extends qi{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=JA(this,e,!0),i=this.Lu.map(o=>Xo(o,n)),r=new Wi(i);return new Ho(e.path,r)}isEqual(e){return e instanceof t&&um(this.Lu,e.Lu)}},_w=class t extends qi{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){let n=new Ur(e.serializer,FM(e.serializer,this.Bu));return new Ho(e.path,n)}isEqual(e){return e instanceof t&&this.Bu===e.Bu}};function nb(t,e,n,i){let r=t.Nu(1,e,n);rb("Data must be an object, but it was:",r,i);let o=[],s=Qt.empty();Jo(i,(l,u)=>{let d=ob(e,l,n);u=it(u);let f=r.Cu(d);if(u instanceof Xc)o.push(d);else{let m=Xo(u,f);m!=null&&(o.push(d),s.set(d,m))}});let a=new bn(o);return new Wf(s,a,r.fieldTransforms)}function ib(t,e,n,i,r,o){let s=t.Nu(1,e,n),a=[yw(e,i,n)],l=[r];if(o.length%2!=0)throw new F(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(yw(e,o[m])),l.push(o[m+1]);let u=[],d=Qt.empty();for(let m=a.length-1;m>=0;--m)if(!tx(u,a[m])){let _=a[m],D=l[m];D=it(D);let M=s.Cu(_);if(D instanceof Xc)u.push(_);else{let A=Xo(D,M);A!=null&&(u.push(_),d.set(_,A))}}let f=new bn(u);return new Wf(d,f,s.fieldTransforms)}function ZA(t,e,n,i=!1){return Xo(n,t.Nu(i?4:3,e))}function Xo(t,e){if(ex(t=it(t)))return rb("Unsupported field value:",e,t),XA(t,e);if(t instanceof qi)return function(i,r){if(!YA(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let l=Xo(a,r.Fu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=it(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return FM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=ot.fromDate(i);return{timestampValue:Aa(r.serializer,o)}}if(i instanceof ot){let o=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Aa(r.serializer,o)}}if(i instanceof Ko)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof bi)return{bytesValue:WM(r.serializer,i._byteString)};if(i instanceof qe){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Nw(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Zc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return Rw(a.serializer,l)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${op(i)}`)}(t,e)}function XA(t,e){let n={};return yM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jo(t,(i,r)=>{let o=Xo(r,e.bu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function ex(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof Ko||t instanceof bi||t instanceof qe||t instanceof qi||t instanceof Zc)}function rb(t,e,n){if(!ex(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=op(n);throw i==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+i)}}function yw(t,e,n){if((e=it(e))instanceof Jn)return e._internalPath;if(typeof e=="string")return ob(t,e);throw Kf("Field path arguments must be of type string or ",t,!1,void 0,n)}var t3=new RegExp("[~\\*/\\[\\]]");function ob(t,e,n){if(e.search(t3)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jn(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kf(t,e,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new F(N.INVALID_ARGUMENT,a+t+l)}function tx(t,e){return t.some(n=>n.isEqual(e))}var Qo=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new vw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(ap("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},vw=class extends Qo{data(){return super.data()}};function ap(t,e){return typeof e=="string"?ob(t,e):e instanceof Jn?e._internalPath:e._delegate._internalPath}function nx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var eu=class{},Yo=class extends eu{};function Yi(t,e,...n){let i=[];e instanceof eu&&i.push(e),i=i.concat(n),function(o){let s=o.filter(l=>l instanceof ww).length,a=o.filter(l=>l instanceof Qf).length;if(s>1||s>0&&a>0)throw new F(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var Qf=class t extends Yo{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return hx(e._query,n),new jt(e.firestore,e.converter,Q0(e._query,n))}_parse(e){let n=Zo(e.firestore);return function(o,s,a,l,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new F(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){oM(f,d);let _=[];for(let D of f)_.push(rM(l,o,D));m={arrayValue:{values:_}}}else m=rM(l,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||oM(f,d),m=ZA(a,s,f,d==="in"||d==="not-in");return Ae.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function ix(t,e,n){let i=e,r=ap("where",t);return Qf._create(r,i,n)}var ww=class t extends eu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:$e.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let l of a)hx(s,l),s=Q0(s,l)}(e._query,n),new jt(e.firestore,e.converter,Q0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var bw=class t extends Yo{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,s){if(r.startAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $o(o,s)}(e._query,this._field,this._direction);return new jt(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new Qn(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function rx(t,e="asc"){let n=e,i=ap("orderBy",t);return bw._create(i,n)}var Yf=class t extends Yo{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new jt(e.firestore,e.converter,mf(e._query,this._limit,this._limitType))}};function ox(t){return kA("limit",t),Yf._create("limit",t,"F")}function sx(t){return kA("limitToLast",t),Yf._create("limitToLast",t,"L")}var Jf=class t extends Yo{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=dx(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(r,o){return new Qn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function ax(...t){return Jf._create("startAt",t,!0)}function lx(...t){return Jf._create("startAfter",t,!1)}var Zf=class t extends Yo{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=dx(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(r,o){return new Qn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function cx(...t){return Zf._create("endBefore",t,!1)}function ux(...t){return Zf._create("endAt",t,!0)}function dx(t,e,n,i){if(n[0]=it(n[0]),n[0]instanceof Qo)return function(o,s,a,l,u){if(!l)throw new F(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of ba(o))if(f.field.isKeyField())d.push(Uo(s,l.key));else{let m=l.data.field(f.field);if(ep(m))throw new F(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let _=f.field.canonicalString();throw new F(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}d.push(m)}return new vi(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=Zo(t.firestore);return function(s,a,l,u,d,f){let m=s.explicitOrderBy;if(d.length>m.length)throw new F(N.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let _=[];for(let D=0;D<d.length;D++){let M=d[D];if(m[D].field.isKeyField()){if(typeof M!="string")throw new F(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof M}`);if(!xw(s)&&M.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${M}' contains a slash.`);let A=s.path.child(Ne.fromString(M));if(!z.isDocumentKey(A))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);let k=new z(A);_.push(Uo(a,k))}else{let A=ZA(l,u,M);_.push(A)}}return new vi(_,f)}(t._query,t.firestore._databaseId,r,e,n,i)}}function rM(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xw(e)&&n.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Ne.fromString(n));if(!z.isDocumentKey(i))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Uo(t,new z(i))}if(n instanceof qe)return Uo(t,n._key);throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${op(n)}.`)}function oM(t,e){if(!Array.isArray(t)||t.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hx(t,e){let n=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Ba=class{convertValue(e,n="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Jo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;let o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>tt(s.doubleValue));return new Zc(o)}convertGeoPoint(e){return new Ko(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=Mw(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(kc(e));default:return null}}convertTimestamp(e){let n=Hi(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Ne.fromString(e);ne(iA(i));let r=new Lr(i.get(1),i.get(3)),o=new z(i.popFirst(5));return r.isEqual(n)||mt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function lp(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var Ew=class extends Ba{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}};var Gi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Pn=class extends Qo{constructor(e,n,i,r,o,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Pr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(ap("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Pr=class extends Pn{data(e={}){return super.data(e)}},Zn=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Gi(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Pr(this._firestore,this._userDataWriter,i.key,i,new Gi(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let l=new Pr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Gi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Pr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Gi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:n3(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function n3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}function sb(t,e){return t instanceof Pn&&e instanceof Pn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Zn&&e instanceof Zn&&t._firestore===e._firestore&&tb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function fx(t){t=Pe(t,qe);let e=Pe(t.firestore,nt);return RA(At(e),t._key).then(n=>ub(e,t,n))}var Ki=class extends Ba{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}};function px(t){t=Pe(t,qe);let e=Pe(t.firestore,nt),n=At(e),i=new Ki(e);return Q$(n,t._key).then(r=>new Pn(e,i,t._key,r,new Gi(r!==null&&r.hasLocalMutations,!0),t.converter))}function mx(t){t=Pe(t,qe);let e=Pe(t.firestore,nt);return RA(At(e),t._key,{source:"server"}).then(n=>ub(e,t,n))}function gx(t){t=Pe(t,jt);let e=Pe(t.firestore,nt),n=At(e),i=new Ki(e);return nx(t._query),NA(n,t._query).then(r=>new Zn(e,i,t,r))}function _x(t){t=Pe(t,jt);let e=Pe(t.firestore,nt),n=At(e),i=new Ki(e);return Y$(n,t._query).then(r=>new Zn(e,i,t,r))}function yx(t){t=Pe(t,jt);let e=Pe(t.firestore,nt),n=At(e),i=new Ki(e);return NA(n,t._query,{source:"server"}).then(r=>new Zn(e,i,t,r))}function ab(t,e,n){t=Pe(t,qe);let i=Pe(t.firestore,nt),r=lp(t.converter,e,n);return Wa(i,[sp(Zo(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,ht.none())])}function lb(t,e,n,...i){t=Pe(t,qe);let r=Pe(t.firestore,nt),o=Zo(r),s;return s=typeof(e=it(e))=="string"||e instanceof Jn?ib(o,"updateDoc",t._key,e,n,i):nb(o,"updateDoc",t._key,e),Wa(r,[s.toMutation(t._key,ht.exists(!0))])}function vx(t){return Wa(Pe(t.firestore,nt),[new Gr(t._key,ht.none())])}function wx(t,e){let n=Pe(t.firestore,nt),i=au(t),r=lp(t.converter,e);return Wa(n,[sp(Zo(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,ht.exists(!1))]).then(()=>i)}function cb(t,...e){var n,i,r;t=it(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||uw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(uw(e[s])){let f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[s+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let l,u,d;if(t instanceof qe)u=Pe(t.firestore,nt),d=Ua(t._key.path),l={next:f=>{e[s]&&e[s](ub(u,t,f))},error:e[s+1],complete:e[s+2]};else{let f=Pe(t,jt);u=Pe(f.firestore,nt),d=f._query;let m=new Ki(u);l={next:_=>{e[s]&&e[s](new Zn(u,m,f,_))},error:e[s+1],complete:e[s+2]},nx(t._query)}return function(m,_,D,M){let A=new Va(M),k=new Qc(_,A,D);return m.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return jw(yield La(m),k)})),()=>{A.za(),m.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return Uw(yield La(m),k)}))}}(At(u),d,a,l)}function bx(t,e){return J$(At(t=Pe(t,nt)),uw(e)?e:{next:e})}function Wa(t,e){return function(i,r){let o=new Et;return i.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return x$(yield Yw(i),r,o)})),o.promise}(At(t),e)}function ub(t,e,n){let i=n.docs.get(e._key),r=new Ki(t);return new Pn(t,r,e._key,i,new Gi(n.hasPendingWrites,n.fromCache),e.converter)}var i3={maxAttempts:5};var Xf=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Zo(e)}set(e,n,i){this._verifyNotCommitted();let r=Rr(e,this._firestore),o=lp(r.converter,n,i),s=sp(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,ht.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=Rr(e,this._firestore),s;return s=typeof(n=it(n))=="string"||n instanceof Jn?ib(this._dataReader,"WriteBatch.update",o._key,n,i,r):nb(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,ht.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Rr(e,this._firestore);return this._mutations=this._mutations.concat(new Gr(n._key,ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Rr(t,e){if((t=it(t)).firestore!==e)throw new F(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Dw=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Zo(n)}get(n){let i=Rr(n,this._firestore),r=new Ew(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return X();let s=o[0];if(s.isFoundDocument())return new Qo(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new Qo(this._firestore,r,i._key,null,i.converter);throw X()})}set(n,i,r){let o=Rr(n,this._firestore),s=lp(o.converter,i,r),a=sp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(n,i,r,...o){let s=Rr(n,this._firestore),a;return a=typeof(i=it(i))=="string"||i instanceof Jn?ib(this._dataReader,"Transaction.update",s._key,i,r,o):nb(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(n){let i=Rr(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Rr(e,this._firestore),i=new Ki(this._firestore);return super.get(e).then(r=>new Pn(this._firestore,i,n._key,r._document,new Gi(!1,!1),n.converter))}};function Ex(t,e,n){t=Pe(t,nt);let i=Object.assign(Object.assign({},i3),n);return function(o){if(o.maxAttempts<1)throw new F(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let l=new Et;return o.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){let u=yield W$(o);new sw(o.asyncQueue,u,a,s,l).ru()})),l.promise}(At(t),r=>e(new Dw(t,r)),i)}function Dx(){return new Xc("deleteField")}function Cx(){return new pw("serverTimestamp")}function Ix(...t){return new mw("arrayUnion",t)}function Tx(...t){return new gw("arrayRemove",t)}function Sx(t){return new _w("increment",t)}(function(e,n=!0){(function(r){ja=r})(Z1),El(new no("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new nt(new T0(i.getProvider("auth-internal")),new x0(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new F(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lr(u.options.projectId,d)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),En(rS,"4.7.0",e),En(rS,"4.7.0","esm2017")})();var r3="@firebase/firestore-compat",o3="0.3.35";function gb(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function Mx(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function Ax(){if(!vM())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}var cp=class t{constructor(e){this._delegate=e}static fromBase64String(e){return Ax(),new t(bi.fromBase64String(e))}static fromUint8Array(e){return Mx(),new t(bi.fromUint8Array(e))}toBase64(){return Ax(),this._delegate.toBase64()}toUint8Array(){return Mx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function db(t){return s3(t,["next","error","complete"])}function s3(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var hb=class{enableIndexedDbPersistence(e,n){return jA(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return UA(e._delegate)}clearIndexedDbPersistence(e){return GA(e._delegate)}},up=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Lr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Rn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){FA(this._delegate,e,n,i)}enableNetwork(){return zA(this._delegate)}disableNetwork(){return WA(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Zw("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return HA(this._delegate)}onSnapshotsInSync(e){return bx(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qa(this,Xw(this._delegate,e))}catch(n){throw rn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ei(this,au(this._delegate,e))}catch(n){throw rn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new is(this,VA(this._delegate,e))}catch(n){throw rn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Ex(this._delegate,n=>e(new dp(this,n)))}batch(){return At(this._delegate),new hp(new Xf(this._delegate,e=>Wa(this._delegate,e)))}loadBundle(e){return qA(this._delegate,e)}namedQuery(e){return KA(this._delegate,e).then(n=>n?new is(this,n):null)}},qa=class extends Ba{constructor(e){super(),this.firestore=e}convertBytes(e){return new cp(new bi(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Ei.forKey(n,this.firestore,null)}};function a3(t){sM(t)}var dp=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new qa(e)}get(e){let n=es(e);return this._delegate.get(n).then(i=>new ts(this._firestore,new Pn(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=es(e);return i?(gb("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=es(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=es(e);return this._delegate.delete(n),this}},hp=class{constructor(e){this._delegate=e}set(e,n,i){let r=es(e);return i?(gb("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=es(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=es(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Ka=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new Pr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ns(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new qa(e),n),r.set(n,o)),o}};Ka.INSTANCES=new WeakMap;var Ei=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qa(e)}static forPath(e,n,i){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new qe(n._delegate,i,new z(e)))}static forKey(e,n,i){return new t(n,new qe(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Qa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qa(this.firestore,Xw(this._delegate,e))}catch(n){throw rn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=it(e),e instanceof qe?eb(this._delegate,e):!1}set(e,n){n=gb("DocumentReference.set",n);try{return n?ab(this._delegate,e,n):ab(this._delegate,e)}catch(i){throw rn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?lb(this._delegate,e):lb(this._delegate,e,n,...i)}catch(r){throw rn(r,"updateDoc()","DocumentReference.update()")}}delete(){return vx(this._delegate)}onSnapshot(...e){let n=xx(e),i=Ox(e,r=>new ts(this.firestore,new Pn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return cb(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=px(this._delegate):e?.source==="server"?n=mx(this._delegate):n=fx(this._delegate),n.then(i=>new ts(this.firestore,new Pn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ka.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function rn(t,e,n){return t.message=t.message.replace(e,n),t}function xx(t){for(let e of t)if(typeof e=="object"&&!db(e))return e;return{}}function Ox(t,e){var n,i;let r;return db(t[0])?r=t[0]:db(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var ts=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ei(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return sb(this._delegate,e._delegate)}},ns=class extends ts{data(e){let n=this._delegate.data(e);return this._delegate._converter||aM(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},is=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qa(e)}where(e,n,i){try{return new t(this.firestore,Yi(this._delegate,ix(e,n,i)))}catch(r){throw rn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Yi(this._delegate,rx(e,n)))}catch(i){throw rn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Yi(this._delegate,ox(e)))}catch(n){throw rn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Yi(this._delegate,sx(e)))}catch(n){throw rn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Yi(this._delegate,ax(...e)))}catch(n){throw rn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Yi(this._delegate,lx(...e)))}catch(n){throw rn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Yi(this._delegate,cx(...e)))}catch(n){throw rn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Yi(this._delegate,ux(...e)))}catch(n){throw rn(n,"endAt()","Query.endAt()")}}isEqual(e){return tb(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=_x(this._delegate):e?.source==="server"?n=yx(this._delegate):n=gx(this._delegate),n.then(i=>new lu(this.firestore,new Zn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=xx(e),i=Ox(e,r=>new lu(this.firestore,new Zn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return cb(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ka.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},fb=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ns(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},lu=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ns(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new fb(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new ns(this._firestore,i))})}isEqual(e){return sb(this._delegate,e._delegate)}},Qa=class t extends is{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Ei(this.firestore,e):null}doc(e){try{return e===void 0?new Ei(this.firestore,au(this._delegate)):new Ei(this.firestore,au(this._delegate,e))}catch(n){throw rn(n,"doc()","CollectionReference.doc()")}}add(e){return wx(this._delegate,e).then(n=>new Ei(this.firestore,n))}isEqual(e){return eb(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ka.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function es(t){return Pe(t,qe)}var pb=class t{constructor(...e){this._delegate=new Jn(...e)}static documentId(){return new t(gt.keyField().canonicalString())}isEqual(e){return e=it(e),e instanceof Jn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var mb=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=Cx();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=Dx();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=Ix(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=Tx(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=Sx(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var l3={Firestore:up,GeoPoint:Ko,Timestamp:ot,Blob:cp,Transaction:dp,WriteBatch:hp,DocumentReference:Ei,DocumentSnapshot:ts,Query:is,QueryDocumentSnapshot:ns,QuerySnapshot:lu,CollectionReference:Qa,FieldPath:pb,FieldValue:mb,setLogLevel:a3,CACHE_SIZE_UNLIMITED:LA};function c3(t,e){t.INTERNAL.registerComponent(new no("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},l3)))}function u3(t){c3(t,(e,n)=>new up(e,n,new hb)),t.registerVersion(r3,o3)}u3(Nt);function d3(t,e=Es){return new fe(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function Rx(t,e){return d3(t,e)}function h3(t,e){return Rx(t,e).pipe(ar(void 0),Al(),J(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function vb(t,e){return Rx(t,e).pipe(J(n=>({payload:n,type:"query"})))}var fp=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=Vx(i,n);return new mp(r,o,this.afs)}snapshotChanges(){return h3(this.ref,this.afs.schedulers.outsideAngular).pipe(dn)}valueChanges(e={}){return this.snapshotChanges().pipe(J(({payload:n})=>e.idField?ke(Y({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return xe(this.ref.get(e)).pipe(dn)}};function pp(t,e){return vb(t,e).pipe(ar(void 0),Al(),J(n=>{let[i,r]=n,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{let u=o.find(f=>f.doc.ref.isEqual(a.ref)),d=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function Nx(t,e,n){return pp(t,n).pipe(ao((i,r)=>f3(i,r.map(o=>o.payload),e),[]),cd(),J(i=>i.map(r=>({type:r.type,payload:r}))))}function f3(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=p3(t,i))}),t}function _b(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function p3(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return _b(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return _b(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _b(t,e.oldIndex,1);break}return t}function Px(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var mp=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=pp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(J(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(ar(void 0),Al(),rt(([i,r])=>r.length>0||!i),J(([,i])=>i),dn)}auditTrail(e){return this.stateChanges(e).pipe(ao((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=Px(e);return Nx(this.query,n,this.afs.schedulers.outsideAngular).pipe(dn)}valueChanges(e={}){return vb(this.query,this.afs.schedulers.outsideAngular).pipe(J(n=>n.payload.docs.map(i=>e.idField?ke(Y({},i.data()),{[e.idField]:i.id}):i.data())),dn)}get(e){return xe(this.query.get(e)).pipe(dn)}add(e){return this.ref.add(e)}doc(e){return new fp(this.ref.doc(e),this.afs)}},yb=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?pp(this.query,this.afs.schedulers.outsideAngular).pipe(dn):pp(this.query,this.afs.schedulers.outsideAngular).pipe(J(n=>n.filter(i=>e.indexOf(i.type)>-1)),rt(n=>n.length>0),dn)}auditTrail(e){return this.stateChanges(e).pipe(ao((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=Px(e);return Nx(this.query,n,this.afs.schedulers.outsideAngular).pipe(dn)}valueChanges(e={}){return vb(this.query,this.afs.schedulers.outsideAngular).pipe(J(i=>i.payload.docs.map(r=>e.idField?Y({[e.idField]:r.id},r.data()):r.data())),dn)}get(e){return xe(this.query.get(e)).pipe(dn)}},kx=new Q("angularfire2.enableFirestorePersistence"),Fx=new Q("angularfire2.firestore.persistenceSettings"),m3=new Q("angularfire2.firestore.settings"),g3=new Q("angularfire2.firestore.use-emulator");function Vx(t,e=n=>n){return{query:e(t),ref:t}}var cu=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,s,a,l,u,d,f,m,_,D,M,A,k,q){this.schedulers=l;let U=Oo(n,a,i),K=d;f&&d0(U,a,m,D,M,A,_,k),[this.firestore,this.persistenceEnabled$]=la(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{let le=a.runOutsideAngular(()=>U.firestore());if(o&&le.settings(o),K&&le.useEmulator(...K),r&&!_r(s)){let re=()=>{try{return xe(le.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(b){return typeof console<"u"&&console.warn(b),te(!1)}};return[le,a.runOutsideAngular(re)]}else return[le,te(!1)]},[o,K,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:s}=Vx(r,i),a=this.schedulers.ngZone.run(()=>o);return new mp(a,s,this)}collectionGroup(n,i){let r=i||(s=>s),o=this.firestore.collectionGroup(n);return new yb(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new fp(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)($(Tr),$(Sr,8),$(kx,8),$(m3,8),$(Lt),$(Se),$(xo),$(Fx,8),$(g3,8),$(h0,8),$(o0,8),$(s0,8),$(a0,8),$(l0,8),$(c0,8),$(u0,8),$(ji,8))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),Lx=(()=>{class t{constructor(){Nt.registerVersion("angularfire",xn.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:kx,useValue:!0},{provide:Fx,useValue:n}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[cu]})}return t})();var Ya=(()=>{let e=class e{constructor(){this.firestore=V(cu)}getFormFields(i){return this.firestore.collection("forms").doc(i).valueChanges().pipe(J(r=>JSON.parse(r.json)))}saveForm(i,r){return this.firestore.collection("forms").doc(i).set(r)}getForms(){return this.firestore.collection("forms").valueChanges().pipe(J(i=>i))}getFormById(i){return this.firestore.collection("forms").doc(i).valueChanges()}deleteForm(i){return this.firestore.collection("forms").doc(i).delete()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Bx=`
 
    <div class="ui-modal-dialog ">
      <div class="ui-modal-dialog-content">
        <div class="ui-modal-title">
          <span>{{title}}</span>
        </div>
        <div class="ui-modal-body-message">
          {{message}}
        </div>
        <div class="ui-modal-footer-message">
          <button class="ui-modal-button ok-button btn">OK</button>
        </div>
      </div>
    </div>
 
`,Ja=(t,e,n)=>{let i=Bx.replace("{{title}}",e).replace("{{message}}",t),r=document.createElement("div");r.classList.add("modal"),r.style.display="block",r.innerHTML=i,r.querySelector(".ok-button").addEventListener("click",()=>{let o=!0;document.body.removeChild(r),n&&n(o)}),document.body.appendChild(r)},gp=(t,e,n)=>{let i=Bx.replace("{{title}}",e).replace("{{message}}",t),r=document.createElement("div");r.classList.add("modal"),r.style.display="block",r.innerHTML=i;let o=document.createElement("button"),s=document.createElement("button");o.classList.add("ui-modal-button"),s.classList.add("ui-modal-button"),o.textContent="Si",s.textContent="No",r.querySelector(".ui-modal-footer-message").innerHTML="",r.querySelector(".ui-modal-footer-message").appendChild(o),r.querySelector(".ui-modal-footer-message").appendChild(s),o.addEventListener("click",()=>{let a=!0;document.body.removeChild(r),n&&n(a)}),s.addEventListener("click",()=>{let a=!1;document.body.removeChild(r),n&&n(a)}),document.body.appendChild(r)};function _3(t,e){if(t&1){let n=Qe();T(0,"li",7),he("dblclick",function(){let r=ue(n).$implicit,o=ee();return de(o.editForm(r))}),T(1,"div",8),ie(2,"span",9),B(3),S(),T(4,"div")(5,"button",10),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.editForm(r))}),ie(6,"span",11),S(),T(7,"button",10),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.deleteForm(r.nameForm))}),ie(8,"span",12),S()()()}if(t&2){let n=e.$implicit;j(3),St(" ",n.nameForm," ")}}var jx=(()=>{let e=class e{constructor(i){this.router=i,this.forms=[],this.formService=V(Ya)}ngOnInit(){this.loadForms()}loadForms(){this.formService.getForms().subscribe(i=>{this.forms=i})}createNewForm(){this.router.navigate(["/form-builder","new"])}editForm(i){this.router.navigate(["/form-builder",i.nameForm])}deleteForm(i){gp("Sei sicuro di voler elimare la form?","Attenzione!",r=>{r&&this.formService.deleteForm(i).then(()=>{}).catch(o=>{console.error("Errore durante l'eliminazione del form:",o)})})}};e.\u0275fac=function(r){return new(r||e)(ae(Er))},e.\u0275cmp=Ie({type:e,selectors:[["app-form-list"]],standalone:!0,features:[Te],decls:10,vars:3,consts:[[3,"emittEventButton","caption","addButtonShow"],[1,"text"],[1,"mdi","mdi-database"],["role","alert","role","alert",1,"alert","alert-primary","d-flex","align-items-center"],[1,"mdi","mdi-lightbulb-alert-outline","me-2"],[1,"list-group","form-list"],["class","form-list-item list-group-item d-flex justify-content-between align-items-center",3,"dblclick",4,"ngFor","ngForOf"],[1,"form-list-item","list-group-item","d-flex","justify-content-between","align-items-center",3,"dblclick"],[1,""],[1,"mdi","mdi-view-list-outline","mr-3"],[1,"btn","icon-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"mdi","mdi-close","del"]],template:function(r,o){r&1&&(T(0,"app-anagrafica-wrapper",0),he("emittEventButton",function(){return o.createNewForm()}),T(1,"div",1)(2,"h2"),ie(3,"span",2),B(4," Elenco form"),S()(),T(5,"div",3),ie(6,"span",4),B(7," Elenco delle Form create nell'app "),S(),T(8,"ul",5),De(9,_3,9,1,"li",6),S()()),r&2&&(W("caption","Lista dei Form")("addButtonShow",!0),j(9),W("ngForOf",o.forms))},dependencies:[Ze,qt,Cr],styles:[".form-list-item[_ngcontent-%COMP%]:hover{background-color:var(--bg-grey);cursor:pointer}"]});let t=e;return t})();var Qx=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(ae(si),ae(Vt))},e.\u0275dir=Ue({type:e});let t=e;return t})(),fu=(()=>{let e=class e extends Qx{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,features:[xt]});let t=e;return t})(),ss=new Q(""),y3={provide:ss,useExisting:Wt(()=>bb),multi:!0},bb=(()=>{let e=class e extends fu{writeValue(i){this.setProperty("checked",i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&he("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[un([y3]),xt]});let t=e;return t})(),v3={provide:ss,useExisting:Wt(()=>Qr),multi:!0};function w3(){let t=Li()?Li().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var b3=new Q(""),Qr=(()=>{let e=class e extends Qx{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!w3())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(ae(si),ae(Vt),ae(b3,8))},e.\u0275dir=Ue({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&he("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[un([v3]),xt]});let t=e;return t})();function Kr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function Yx(t){return t!=null&&typeof t.length=="number"}var as=new Q(""),Tp=new Q(""),E3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Xa=class{static min(e){return D3(e)}static max(e){return C3(e)}static required(e){return Jx(e)}static requiredTrue(e){return I3(e)}static email(e){return T3(e)}static minLength(e){return Zx(e)}static maxLength(e){return Xx(e)}static pattern(e){return S3(e)}static nullValidator(e){return yp(e)}static compose(e){return oO(e)}static composeAsync(e){return sO(e)}};function D3(t){return e=>{if(Kr(e.value)||Kr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function C3(t){return e=>{if(Kr(e.value)||Kr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Jx(t){return Kr(t.value)?{required:!0}:null}function I3(t){return t.value===!0?null:{required:!0}}function T3(t){return Kr(t.value)||E3.test(t.value)?null:{email:!0}}function Zx(t){return e=>Kr(e.value)||!Yx(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function Xx(t){return e=>Yx(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function S3(t){if(!t)return yp;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(Kr(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function yp(t){return null}function eO(t){return t!=null}function tO(t){return Co(t)?xe(t):t}function nO(t){let e={};return t.forEach(n=>{e=n!=null?Y(Y({},e),n):e}),Object.keys(e).length===0?null:e}function iO(t,e){return e.map(n=>n(t))}function M3(t){return!t.validate}function rO(t){return t.map(e=>M3(e)?e:n=>e.validate(n))}function oO(t){if(!t)return null;let e=t.filter(eO);return e.length==0?null:function(n){return nO(iO(n,e))}}function Eb(t){return t!=null?oO(rO(t)):null}function sO(t){if(!t)return null;let e=t.filter(eO);return e.length==0?null:function(n){let i=iO(n,e).map(tO);return Om(i).pipe(J(nO))}}function Db(t){return t!=null?sO(rO(t)):null}function Ux(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function aO(t){return t._rawValidators}function lO(t){return t._rawAsyncValidators}function wb(t){return t?Array.isArray(t)?t:[t]:[]}function vp(t,e){return Array.isArray(t)?t.includes(e):t===e}function $x(t,e){let n=wb(e);return wb(t).forEach(r=>{vp(n,r)||n.push(r)}),n}function Gx(t,e){return wb(e).filter(n=>!vp(t,n))}var wp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Eb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Db(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ji=class extends wp{get formDirective(){return null}get path(){return null}},rs=class extends wp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},bp=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},A3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},hY=ke(Y({},A3),{"[class.ng-submitted]":"isSubmitted"}),el=(()=>{let e=class e extends bp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(ae(rs,2))},e.\u0275dir=Ue({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&bo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[xt]});let t=e;return t})(),Sp=(()=>{let e=class e extends bp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(ae(Ji,10))},e.\u0275dir=Ue({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&bo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[xt]});let t=e;return t})();var uu="VALID",_p="INVALID",Za="PENDING",du="DISABLED";function cO(t){return(Mp(t)?t.validators:t)||null}function x3(t){return Array.isArray(t)?Eb(t):t||null}function uO(t,e){return(Mp(e)?e.asyncValidators:t)||null}function O3(t){return Array.isArray(t)?Db(t):t||null}function Mp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function R3(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new se(1e3,"");if(!i[n])throw new se(1001,"")}function N3(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new se(1002,"")})}var Ep=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===uu}get invalid(){return this.status===_p}get pending(){return this.status==Za}get disabled(){return this.status===du}get enabled(){return this.status!==du}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($x(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($x(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Gx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Gx(e,this._rawAsyncValidators))}hasValidator(e){return vp(this._rawValidators,e)}hasAsyncValidator(e){return vp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Za,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=du,this.errors=null,this._forEachChild(i=>{i.disable(ke(Y({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ke(Y({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=uu,this._forEachChild(i=>{i.enable(ke(Y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ke(Y({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===uu||this.status===Za)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?du:uu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Za,this._hasOwnPendingAsyncValidator=!0;let n=tO(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ge,this.statusChanges=new ge}_calculateStatus(){return this._allControlsDisabled()?du:this.errors?_p:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Za)?Za:this._anyControlsHaveStatus(_p)?_p:uu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Mp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=x3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=O3(this._rawAsyncValidators)}},os=class extends Ep{constructor(e,n,i){super(cO(n),uO(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){N3(this,!0,e),Object.keys(e).forEach(i=>{R3(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var pu=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>Ap}),Ap="always";function dO(t,e){return[...e.path,t]}function Dp(t,e,n=Ap){Cb(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),k3(t,e),V3(t,e),F3(t,e),P3(t,e)}function Hx(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Ip(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Cp(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function P3(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Cb(t,e){let n=aO(t);e.validator!==null?t.setValidators(Ux(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=lO(t);e.asyncValidator!==null?t.setAsyncValidators(Ux(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Cp(e._rawValidators,r),Cp(e._rawAsyncValidators,r)}function Ip(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=aO(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let r=lO(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(n=!0,t.setAsyncValidators(o))}}}let i=()=>{};return Cp(e._rawValidators,i),Cp(e._rawAsyncValidators,i),n}function k3(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&hO(t,e)})}function F3(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&hO(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function hO(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function V3(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function fO(t,e){t==null,Cb(t,e)}function L3(t,e){return Ip(t,e)}function pO(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function B3(t){return Object.getPrototypeOf(t.constructor)===fu}function mO(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function gO(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===Qr?n=o:B3(o)?i=o:r=o}),r||i||n||null}function j3(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var U3={provide:Ji,useExisting:Wt(()=>Ib)},hu=Promise.resolve(),Ib=(()=>{let e=class e extends Ji{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ge,this.form=new os({},Eb(i),Db(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){hu.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),Dp(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){hu.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){hu.then(()=>{let r=this._findContainer(i.path),o=new os({});fO(o,i),r.registerControl(i.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){hu.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){hu.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,mO(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(ae(as,10),ae(Tp,10),ae(pu,8))},e.\u0275dir=Ue({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&he("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[It.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[un([U3]),xt]});let t=e;return t})();function zx(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Wx(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var xp=class extends Ep{constructor(e=null,n,i){super(cO(n),uO(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Wx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Wx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $3=t=>t instanceof xp;var G3={provide:rs,useExisting:Wt(()=>mu)},qx=Promise.resolve(),mu=(()=>{let e=class e extends rs{constructor(i,r,o,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new xp,this._registered=!1,this.name="",this.update=new ge,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=gO(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),pO(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Dp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){qx.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&Kl(r);qx.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?dO(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(ae(Ji,9),ae(as,10),ae(Tp,10),ae(ss,10),ae(Vi,8),ae(pu,8))},e.\u0275dir=Ue({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[It.None,"disabled","isDisabled"],model:[It.None,"ngModel","model"],options:[It.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[un([G3]),xt,ln]});let t=e;return t})(),Op=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ue({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),H3={provide:ss,useExisting:Wt(()=>Tb),multi:!0},Tb=(()=>{let e=class e extends fu{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&he("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[un([H3]),xt]});let t=e;return t})();var _O=new Q("");var z3={provide:Ji,useExisting:Wt(()=>Sb)},Sb=(()=>{let e=class e extends Ji{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ge,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ip(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return Dp(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){Hx(i.control||null,i,!1),j3(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,mO(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,o=this.form.get(i.path);r!==o&&(Hx(r||null,i),$3(o)&&(Dp(o,i,this.callSetDisabledState),i.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);fO(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&L3(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Cb(this.form,this),this._oldForm&&Ip(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(ae(as,10),ae(Tp,10),ae(pu,8))},e.\u0275dir=Ue({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&he("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[It.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[un([z3]),xt,ln]});let t=e;return t})();var W3={provide:rs,useExisting:Wt(()=>Mb)},Mb=(()=>{let e=class e extends rs{set isDisabled(i){}constructor(i,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ge,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=gO(this,s)}ngOnChanges(i){this._added||this._setUpControl(),pO(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return dO(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(ae(Ji,13),ae(as,10),ae(Tp,10),ae(ss,10),ae(_O,8))},e.\u0275dir=Ue({type:e,selectors:[["","formControlName",""]],inputs:{name:[It.None,"formControlName","name"],isDisabled:[It.None,"disabled","isDisabled"],model:[It.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[un([W3]),xt,ln]});let t=e;return t})(),q3={provide:ss,useExisting:Wt(()=>Rp),multi:!0};function yO(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function K3(t){return t.split(":")[0]}var Rp=(()=>{let e=class e extends fu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),o=yO(r,i);this.setProperty("value",o)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=K3(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&he("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[un([q3]),xt]});let t=e;return t})(),vO=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(yO(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(ae(Vt),ae(si),ae(Rp,9))},e.\u0275dir=Ue({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),Q3={provide:ss,useExisting:Wt(()=>wO),multi:!0};function Kx(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Y3(t){return t.split(":")[0]}var wO=(()=>{let e=class e extends fu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let o=i.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let l=0;l<a.length;l++){let u=a[l],d=this._getOptionValue(u.value);o.push(d)}}else{let a=r.options;for(let l=0;l<a.length;l++){let u=a[l];if(u.selected){let d=this._getOptionValue(u.value);o.push(d)}}}this.value=o,i(o)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=Y3(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&he("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[un([Q3]),xt]});let t=e;return t})(),bO=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(Kx(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(Kx(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(ae(Vt),ae(si),ae(wO,9))},e.\u0275dir=Ue({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();function EO(t){return typeof t=="number"?t:parseInt(t,10)}var Ab=(()=>{let e=class e{constructor(){this._validator=yp}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):yp,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ue({type:e,features:[ln]});let t=e;return t})();var J3={provide:as,useExisting:Wt(()=>xb),multi:!0};var xb=(()=>{let e=class e extends Ab{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Kl,this.createValidator=i=>Jx}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){r&2&&ai("required",o._enabled?"":null)},inputs:{required:"required"},features:[un([J3]),xt]});let t=e;return t})();var Z3={provide:as,useExisting:Wt(()=>Ob),multi:!0},Ob=(()=>{let e=class e extends Ab{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=i=>EO(i),this.createValidator=i=>Zx(i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,o){r&2&&ai("minlength",o._enabled?o.minlength:null)},inputs:{minlength:"minlength"},features:[un([Z3]),xt]});let t=e;return t})(),X3={provide:as,useExisting:Wt(()=>Rb),multi:!0},Rb=(()=>{let e=class e extends Ab{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=i=>EO(i),this.createValidator=i=>Xx(i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,o){r&2&&ai("maxlength",o._enabled?o.maxlength:null)},inputs:{maxlength:"maxlength"},features:[un([X3]),xt]});let t=e;return t})();var DO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({});let t=e;return t})();var Yr=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:pu,useValue:i.callSetDisabledState??Ap}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({imports:[DO]});let t=e;return t})(),Np=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:_O,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:pu,useValue:i.callSetDisabledState??Ap}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({imports:[DO]});let t=e;return t})();var e4=["*"];var t4=["dialog"];var CO={animation:!0,transitionTimerDelayMs:5},n4=(()=>{let e=class e{constructor(){this.animation=CO.animation}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function i4(t){let{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t),i=parseFloat(e),r=parseFloat(n);return(i+r)*1e3}function IO(t){return typeof t=="string"}function Pb(t){return t!=null}function r4(t){return t&&t.then}function TO(t){return(t||document.body).getBoundingClientRect()}function o4(t){return e=>new fe(n=>{let i=s=>t.run(()=>n.next(s)),r=s=>t.run(()=>n.error(s)),o=()=>t.run(()=>n.complete());return e.subscribe({next:i,error:r,complete:o})})}var s4=()=>{},{transitionTimerDelayMs:a4}=CO,Pp=new Map,ls=(t,e,n,i)=>{let r=i.context||{},o=Pp.get(e);if(o)switch(i.runningTransition){case"continue":return Ct;case"stop":t.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),Pp.delete(e)}let s=n(e,i.animation,r)||s4;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return t.run(()=>s()),te(void 0).pipe(o4(t));let a=new Le,l=new Le,u=a.pipe(km(!0));Pp.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let d=i4(e);return t.runOutsideAngular(()=>{let f=Dn(e,"transitionend").pipe(zt(u),rt(({target:_})=>_===e)),m=Rm(d+a4).pipe(zt(u));Nm(m,f,l).pipe(zt(u)).subscribe(()=>{Pp.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};var Vb=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(Vb||{});var oJ=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||e()):!1})();var l4=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function SO(t){let e=Array.from(t.querySelectorAll(l4)).filter(n=>n.tabIndex!==-1);return[e[0],e[e.length-1]]}var c4=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{let r=Dn(e,"focusin").pipe(zt(n),J(o=>o.target));Dn(e,"keydown").pipe(zt(n),rt(o=>o.which===Vb.Tab),hd(r)).subscribe(([o,s])=>{let[a,l]=SO(e);(s===a||s===e)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&Dn(e,"click").pipe(zt(n),hd(r),J(o=>o[1])).subscribe(o=>o.focus())})};var sJ=new Date(1882,10,12),aJ=new Date(2174,10,25);var lJ=1e3*60*60*24;var Lb=1080,u4=24*Lb,d4=12*Lb+793,cJ=29*u4+d4,uJ=11*Lb+204;var h4=(()=>{let e=class e{constructor(){this._ngbConfig=V(n4),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tl=class{constructor(e,n,i){this.nodes=e,this.viewRef=n,this.componentRef=i}};var f4=(()=>{let e=class e{constructor(){this._document=V(Ot)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,o=r.style,{overflow:s,paddingRight:a}=o;if(i>0){let l=parseFloat(window.getComputedStyle(r).paddingRight);o.paddingRight=`${l+i}px`}return o.overflow="hidden",()=>{i>0&&(o.paddingRight=a),o.overflow=s}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),p4=(()=>{let e=class e{constructor(){this._nativeElement=V(Vt).nativeElement,this._zone=V(Se)}ngOnInit(){this._zone.onStable.asObservable().pipe(sn(1)).subscribe(()=>{ls(this._zone,this._nativeElement,(i,r)=>{r&&TO(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ls(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,o){r&2&&(Ws("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),bo("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Te],decls:0,vars:0,template:function(r,o){},encapsulation:2});let t=e;return t})(),kp=class{update(e){}close(e){}dismiss(e){}},m4=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],g4=["animation","backdropClass"],kb=class{_applyWindowOptions(e,n){m4.forEach(i=>{Pb(n[i])&&(e[i]=n[i])})}_applyBackdropOptions(e,n){g4.forEach(i=>{Pb(n[i])&&(e[i]=n[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(zt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(zt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,n,i,r){this._windowCmptRef=e,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Le,this._dismissed=new Le,this._hidden=new Le,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let n=this._beforeDismiss();r4(n)?n.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):n!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():te(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Ml(e,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},Fb=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(Fb||{}),_4=(()=>{let e=class e{constructor(){this._document=V(Ot),this._elRef=V(Vt),this._zone=V(Se),this._closed$=new Le,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ge,this.shown=new Le,this.hidden=new Le}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":IO(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(sn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,r={animation:this.animation,runningTransition:"stop"},o=ls(this._zone,i,()=>i.classList.remove("show"),r),s=ls(this._zone,this._dialogEl.nativeElement,()=>{},r),a=Ml(o,s);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let i={animation:this.animation,runningTransition:"continue"},r=ls(this._zone,this._elRef.nativeElement,(s,a)=>{a&&TO(s),s.classList.add("show")},i),o=ls(this._zone,this._dialogEl.nativeElement,()=>{},i);Ml(r,o).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{Dn(i,"keydown").pipe(zt(this._closed$),rt(o=>o.which===Vb.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(Fb.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let r=!1;Dn(this._dialogEl.nativeElement,"mousedown").pipe(zt(this._closed$),lt(()=>r=!1),Ge(()=>Dn(i,"mouseup").pipe(zt(this._closed$),sn(1))),rt(({target:o})=>i===o)).subscribe(()=>{r=!0}),Dn(i,"click").pipe(zt(this._closed$)).subscribe(({target:o})=>{i===o&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!r&&this._zone.run(()=>this.dismiss(Fb.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let r=i.querySelector("[ngbAutofocus]"),o=SO(i)[0];(r||o||i).focus()}}_restoreFocus(){let i=this._document.body,r=this._elWithFocus,o;r&&r.focus&&i.contains(r)?o=r:o=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&ls(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(r,o){if(r&1&&Qs(t4,7),r&2){let s;Eo(s=Do())&&(o._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,o){r&2&&(ai("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),Ws("modal d-block"+(o.windowClass?" "+o.windowClass:"")),bo("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Te],ngContentSelectors:e4,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,o){r&1&&(rh(),T(0,"div",1,0)(2,"div",2),oh(3),S()()),r&2&&Ws("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let t=e;return t})(),y4=(()=>{let e=class e{constructor(){this._applicationRef=V(gr),this._injector=V(Wn),this._environmentInjector=V(kt),this._document=V(Ot),this._scrollBar=V(f4),this._activeWindowCmptHasChanged=new Le,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new ge;let i=V(Se);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let r=this._windowCmpts[this._windowCmpts.length-1];c4(i,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,r,o){let s=o.container instanceof HTMLElement?o.container:Pb(o.container)?this._document.querySelector(o.container):this._document.body;if(!s)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new kp;i=o.injector||i;let l=i.get(kt,null)||this._environmentInjector,u=this._getContentRef(i,l,r,a,o),d=o.backdrop!==!1?this._attachBackdrop(s):void 0,f=this._attachWindowComponent(s,u.nodes),m=new kb(f,u,d,o.beforeDismiss);return this._registerModalRef(m),this._registerWindowCmpt(f),m.hidden.pipe(sn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=_=>{m.close(_)},a.dismiss=_=>{m.dismiss(_)},a.update=_=>{m.update(_)},m.update(o),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),d&&d.instance&&d.changeDetectorRef.detectChanges(),f.changeDetectorRef.detectChanges(),m}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(r=>r.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let r=dh(p4,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_attachWindowComponent(i,r){let o=dh(_4,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_getContentRef(i,r,o,s,a){return o?o instanceof xi?this._createFromTemplateRef(o,s):IO(o)?this._createFromString(o):this._createFromComponent(i,r,o,s,a):new tl([])}_createFromTemplateRef(i,r){let o={$implicit:r,close(a){r.close(a)},dismiss(a){r.dismiss(a)}},s=i.createEmbeddedView(o);return this._applicationRef.attachView(s),new tl([s.rootNodes],s)}_createFromString(i){let r=this._document.createTextNode(`${i}`);return new tl([[r]])}_createFromComponent(i,r,o,s,a){let l=Wn.create({providers:[{provide:kp,useValue:s}],parent:i}),u=dh(o,{environmentInjector:r,elementInjector:l}),d=u.location.nativeElement;return a.scrollable&&d.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new tl([[d]],u.hostView,u)}_setAriaHidden(i){let r=i.parentElement;r&&i!==this._document.body&&(Array.from(r.children).forEach(o=>{o!==i&&o.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,r)=>{i?r.setAttribute("aria-hidden",i):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let r=()=>{let o=this._modalRefs.indexOf(i);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(r,r)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let r=this._windowCmpts.indexOf(i);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bb=(()=>{let e=class e{constructor(){this._injector=V(Wn),this._modalStack=V(y4),this._config=V(h4)}open(i,r={}){let o=Y(ke(Y({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._injector,i,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),MO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({providers:[Bb]});let t=e;return t})();var dJ=new Q("live announcer delay",{providedIn:"root",factory:()=>100});function w4(t,e){if(t&1&&(T(0,"option",2),B(1),S()),t&2){let n=e.$implicit,i=ee();W("value",n[i.valueExp]),j(),St(" ",n[i.displayExp]," ")}}var AO=(()=>{let e=class e{constructor(){this.disabled=!1,this.values=[],this.valueChange=new ge,this.availableOptions=[],this.multiple=!1}ngOnInit(){this.initializeOptions()}initializeOptions(){this.config&&this.config.selectOptions&&(this.selectOptions=this.config.selectOptions,this.displayExp=this.selectOptions.displayExp||"value",this.valueExp=this.selectOptions.valueExp||"id",this.availableOptions=this.selectOptions.options||[],this.config.selectOptions.parent&&this.parentValue&&(this.availableOptions=this.availableOptions.filter(i=>i.parent===this.parentValue)),this.selectedValue=this.selectOptions.multiple?this.values:this.value,this.formControlD?.setValue(this.selectedValue),this.multiple=this.selectOptions.multiple||!1)}ngOnChanges(i){(i.parentValue||i.config)&&typeof i.parentValue.currentValue<"u"&&i.parentValue.currentValue!==""&&this.filterOptionsBasedOnParent()}filterOptionsBasedOnParent(){let i=this.selectOptions;i&&i.parent&&this.parentValue?this.availableOptions=i.options.filter(r=>r.parent===this.parentValue):this.availableOptions=i.options}onValueChange(i){this.selectedValue=i.detail.value,this.valueChange.emit(this.selectedValue)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-dynamic-select-box"]],inputs:{config:"config",formControlD:"formControlD",parentValue:"parentValue",disabled:"disabled",value:"value",values:"values"},outputs:{valueChange:"valueChange"},standalone:!0,features:[ln,Te],decls:3,vars:4,consts:[[3,"ionChange","multiple","value","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(r,o){r&1&&(T(0,"div")(1,"select",0),he("ionChange",function(a){return o.onValueChange(a)}),De(2,w4,2,2,"option",1),S()()),r&2&&(j(),W("multiple",o.selectOptions.multiple)("value",o.selectedValue)("disabled",o.disabled),j(),W("ngForOf",o.availableOptions))},dependencies:[Ze,qt]});let t=e;return t})();var b4=()=>[];function E4(t,e){t&1&&(T(0,"span",15),B(1,"Richiesto"),S())}function D4(t,e){if(t&1&&ie(0,"input",16),t&2){let n=ee().$implicit;W("type",n.typeInput?n.typeInput:"text")("name",n.name)("formControlName",n.name)("id",n.htmlId)("placeholder",n.placeholder)("maxlength",n.maxlength)("minlength",n.minlength),ai("required",n.required?!0:null)}}function C4(t,e){if(t&1&&(T(0,"textarea",17),B(1,`  
              `),S()),t&2){let n=ee().$implicit;W("placeholder",n.placeholder)}}function I4(t,e){if(t&1){let n=Qe();T(0,"app-dynamic-select-box",18),he("valueChange",function(r){ue(n);let o=ee().$implicit,s=ee();return de(s.onValueChange(o.name,r))}),S()}if(t&2){let n=ee().$implicit,i=ee();W("config",n)("parentValue",i.formValues[(n.selectOptions==null?null:n.selectOptions.parent)||""])("value",i.formValues[n.name])("values",n.selectOptions!=null&&n.selectOptions.multiple?i.formValues[n.name]:yI(4,b4))}}function T4(t,e){if(t&1&&(qs(0),T(1,"div",8)(2,"label",9),B(3),De(4,E4,2,0,"span",10),S(),T(5,"div",11),De(6,D4,1,8,"input",12)(7,C4,2,1,"textarea",13)(8,I4,1,5,"app-dynamic-select-box",14),S()(),Ks()),t&2){let n=e.$implicit,i=ee();j(3),St("",n.label," "),j(),W("ngIf",n.required),j(),W("formGroup",i.form),j(),W("ngIf",n.type==="textBox"),j(),W("ngIf",n.type==="textArea"),j(),W("ngIf",n.type==="selectBox")}}var xO=(()=>{let e=class e{constructor(){this.submitFormEvent=new ge,this.form=new os({}),this.formValues={},this.dataSet=[],this.fields=[],this.formShow=!1,this.fieldConfigs=[],this.templateService=V(Ya)}ngOnInit(){this.service&&(typeof this.editData>"u"&&(this.editData={}),this.templateService.getFormFields(this.service).subscribe(i=>{this.fields=i,this.initializeForm()}))}initializeForm(){this.editData=this.editData||{};let i=new os({});this.fields.forEach(r=>{let o=this.getValidators(r),s=this.editData[r.name]||null;i.addControl(r.name,new xp(s,o)),this.initializeFormValues(r)}),this.form=i}getValidators(i){let r=[];return i.required&&r.push(Xa.required),typeof i.minlength<"u"&&r.push(Xa.minLength(i.minlength)),typeof i.maxlength<"u"&&r.push(Xa.maxLength(i.maxlength)),r}initializeFormValues(i){typeof this.editData[i.name]<"u"&&(this.formValues[i.name]=this.editData[i.name]),this.fieldConfigs[i.name]=i}onValueChange(i,r){let o=this.form.get(i);o&&o.value!==r&&(o.setValue(r,{emitEvent:!1}),this.formValues[i]=r),this.fieldConfigs[i]&&this.updateCascadeOptions(i,r)}updateCascadeOptions(i,r){let o=this.fieldConfigs[i];if(o&&o.cascadeFrom&&i===o.cascadeFrom){let s=o.cascadeOptions[r]||[];this.formValues[i]=s}}submitForm(){if(this.form.valid){let i={name:"submitForm",formData:this.form.value,form:this.form};this.submitFormEvent.emit(i)}else{let i=this.getInvalidFields(this.form);this.presentToast(`Mancano i seguenti campi:${i.join(", ")}`)}}cancellForm(){let i={name:"cancelForm",formData:this.form.value,form:this.form};this.submitFormEvent.emit(i)}getInvalidFields(i){let r=[];return Object.keys(i.controls).forEach(o=>{let s=i.get(o);if(s&&s.invalid){let a=this.fieldConfigs[o].label;r.push(a)}}),r}presentToast(i){return O(this,null,function*(){Ja(i,"Errore!")})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-dynamic-form"]],inputs:{service:"service",editData:"editData"},outputs:{submitFormEvent:"submitFormEvent"},standalone:!0,features:[Te],decls:10,vars:2,consts:[[3,"ngSubmit","formGroup"],[1,"form-container"],[4,"ngFor","ngForOf"],[1,"form-footer"],["type","button",1,"btn","ana-button",3,"click"],[1,"mdi","mdi-keyboard-return"],["type","submit",1,"btn","ana-button"],[1,"mdi","mdi-content-save-outline"],[1,"row","mt-3","mb-3"],[1,"col-sm-3","col-form-label","font-medium"],["class","badge bg-secondary",4,"ngIf"],[1,"col-sm-9",3,"formGroup"],["class","form-control",3,"type","name","formControlName","id","placeholder","maxlength","minlength",4,"ngIf"],["rows","4",3,"placeholder",4,"ngIf"],[3,"config","parentValue","value","values","valueChange",4,"ngIf"],[1,"badge","bg-secondary"],[1,"form-control",3,"type","name","formControlName","id","placeholder","maxlength","minlength"],["rows","4",3,"placeholder"],[3,"valueChange","config","parentValue","value","values"]],template:function(r,o){r&1&&(T(0,"form",0),he("ngSubmit",function(){return o.submitForm()}),T(1,"div",1),De(2,T4,9,6,"ng-container",2),S(),T(3,"div",3)(4,"button",4),he("click",function(){return o.cancellForm()}),ie(5,"span",5),B(6,"Chiudi"),S(),T(7,"button",6),ie(8,"span",7),B(9,"Salva"),S()()()),r&2&&(W("formGroup",o.form),j(2),W("ngForOf",o.fields))},dependencies:[Ze,qt,ci,AO,Yr,Op,Qr,el,Sp,Ob,Rb,Np,Sb,Mb],styles:[".form-container[_ngcontent-%COMP%]{max-height:750px;overflow-y:scroll;padding:1rem}.form-container[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.form-container[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{margin-left:-.6rem;margin-right:.5rem}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--bg-grey);padding:.6rem .5rem}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-cell[_ngcontent-%COMP%]{text-align:center}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]{font-size:1.4rem;padding:0}.form-footer[_ngcontent-%COMP%]{border:1px solid var(--border_color);padding:1rem;display:flex;gap:1rem;flex-direction:row;flex-wrap:nowrap;justify-content:end}"]});let t=e;return t})();function S4(t,e){t&1&&(T(0,"div",39),B(1,"*Nome obbligatorio"),S())}function M4(t,e){t&1&&(T(0,"div",39),B(1,"*Tipo obbligatoria"),S())}function A4(t,e){t&1&&(T(0,"div",39),B(1,"*Label obbligatoria"),S())}function x4(t,e){if(t&1){let n=Qe();T(0,"div",10)(1,"label",11),B(2,"Mostra func.bot"),S(),T(3,"div",30)(4,"input",40),Je("ngModelChange",function(r){ue(n);let o=ee();return et(o.formField.funcButton,r)||(o.formField.funcButton=r),de(r)}),S(),T(5,"label",32),B(6," Mostra un bottone funzionale nella form "),S()()()}if(t&2){let n=ee();j(4),Ye("ngModel",n.formField.funcButton)}}function O4(t,e){if(t&1){let n=Qe();T(0,"div",10)(1,"label",41),B(2,"Min Value"),S(),T(3,"div",42)(4,"input",43),Je("ngModelChange",function(r){ue(n);let o=ee();return et(o.formField.min,r)||(o.formField.min=r),de(r)}),S()()()}if(t&2){let n=ee();j(4),W("disabled",n.showFileOption),Ye("ngModel",n.formField.min)}}function R4(t,e){if(t&1){let n=Qe();T(0,"div",10)(1,"label",11),B(2,"Max Value"),S(),T(3,"div",42)(4,"input",44),Je("ngModelChange",function(r){ue(n);let o=ee();return et(o.formField.max,r)||(o.formField.max=r),de(r)}),S()()()}if(t&2){let n=ee();j(4),W("disabled",n.showFileOption),Ye("ngModel",n.formField.max)}}function N4(t,e){t&1&&(T(0,"div",39),B(1,"*link obbligatorio"),S())}function P4(t,e){t&1&&(T(0,"div",39),B(1,"*Testo del link"),S())}function k4(t,e){if(t&1){let n=Qe();T(0,"div",10)(1,"div",10)(2,"label",11),B(3,"CheckBox con link"),S(),T(4,"div",30)(5,"input",45),Je("ngModelChange",function(r){ue(n);let o=ee();return et(o.formField.checkBoxOptions.haveLink,r)||(o.formField.checkBoxOptions.haveLink=r),de(r)}),S(),T(6,"label",46),B(7,"Abilita per inserire un link nella checkbox"),S()()(),T(8,"div",10)(9,"label",11),B(10,"Link"),S(),T(11,"div",13)(12,"input",47,4),Je("ngModelChange",function(r){ue(n);let o=ee();return et(o.formField.checkBoxOptions.hrefLink,r)||(o.formField.checkBoxOptions.hrefLink=r),de(r)}),S()(),De(14,N4,2,0,"div",15),S(),T(15,"div",10)(16,"label",11),B(17,"Testo del link"),S(),T(18,"div",13)(19,"input",48,5),Je("ngModelChange",function(r){ue(n);let o=ee();return et(o.formField.checkBoxOptions.hrefText,r)||(o.formField.checkBoxOptions.hrefText=r),de(r)}),S()(),De(21,P4,2,0,"div",15),S()()}if(t&2){let n=li(13),i=li(20),r=ee();j(5),Ye("ngModel",r.formField.checkBoxOptions.haveLink),j(7),Ye("ngModel",r.formField.checkBoxOptions.hrefLink),W("required",r.formField.checkBoxOptions.haveLink===!0),j(2),W("ngIf",n.invalid&&n.touched&&r.formField.checkBoxOptions.haveLink),j(5),W("required",r.formField.checkBoxOptions.haveLink===!0),Ye("ngModel",r.formField.checkBoxOptions.hrefText),j(2),W("ngIf",i.invalid&&i.touched&&r.formField.checkBoxOptions.haveLink)}}function F4(t,e){t&1&&(T(0,"div",39),B(1,"displayExp obbligatorio"),S())}function V4(t,e){t&1&&(T(0,"div",39),B(1,"valueExp obbligatorio"),S())}function L4(t,e){if(t&1){let n=Qe();T(0,"tr",63),he("click",function(){let r=ue(n).$implicit,o=ee(3);return de(o.onOptionClick(r))}),T(1,"td"),B(2),S(),T(3,"td"),B(4),S(),T(5,"td"),B(6),S(),T(7,"td")(8,"button",63),he("click",function(){let r=ue(n).index,o=ee(3);return de(o.removeOption(r))}),B(9,"Rimuovi"),S()()()}if(t&2){let n=e.$implicit,i=ee(3);j(2),St(" ",n[i.formField.selectOptions.valueExp]," "),j(2),St(" ",n[i.formField.selectOptions.displayExp]," "),j(2),St(" ",n.parent," ")}}function B4(t,e){if(t&1){let n=Qe();T(0,"table",56)(1,"thead")(2,"tr")(3,"td"),B(4),S(),T(5,"td"),B(6),S(),T(7,"td"),B(8,"Parent"),S(),T(9,"td"),B(10,"Azioni"),S()()(),T(11,"tbody")(12,"tr")(13,"td")(14,"input",57),Je("ngModelChange",function(r){ue(n);let o=ee(2);return et(o.newOption[o.formField.selectOptions.valueExp],r)||(o.newOption[o.formField.selectOptions.valueExp]=r),de(r)}),S()(),T(15,"td")(16,"input",58),Je("ngModelChange",function(r){ue(n);let o=ee(2);return et(o.newOption[o.formField.selectOptions.displayExp],r)||(o.newOption[o.formField.selectOptions.displayExp]=r),de(r)}),S()(),T(17,"td")(18,"input",59),Je("ngModelChange",function(r){ue(n);let o=ee(2);return et(o.newOption.parent,r)||(o.newOption.parent=r),de(r)}),S()(),T(19,"td",60)(20,"button",61),he("click",function(){ue(n);let r=ee(2);return de(r.addOption())}),ie(21,"span",38),S()()(),De(22,L4,10,3,"tr",62),S()()}if(t&2){let n=ee(2);j(4),_n(n.formField.selectOptions.valueExp),j(2),_n(n.formField.selectOptions.displayExp),j(8),W("name",n.formField.selectOptions.valueExp),Ye("ngModel",n.newOption[n.formField.selectOptions.valueExp]),j(2),W("name",n.formField.selectOptions.displayExp),Ye("ngModel",n.newOption[n.formField.selectOptions.displayExp]),j(2),Ye("ngModel",n.newOption.parent),j(4),W("ngForOf",n.formField.selectOptions.options)}}function j4(t,e){if(t&1){let n=Qe();T(0,"div",10)(1,"div",10)(2,"label",11),B(3,"Multiple"),S(),T(4,"div",30)(5,"input",49),Je("ngModelChange",function(r){ue(n);let o=ee();return et(o.formField.selectOptions.multiple,r)||(o.formField.selectOptions.multiple=r),de(r)}),S(),T(6,"label",50),B(7,"Select tipo multicheck"),S()()(),T(8,"div",10)(9,"label",11),B(10,"Parent ID"),S(),T(11,"div",13)(12,"input",51),Je("ngModelChange",function(r){ue(n);let o=ee();return et(o.formField.selectOptions.parent,r)||(o.formField.selectOptions.parent=r),de(r)}),S()()(),T(13,"div",10)(14,"label",11),B(15,"Display Expression "),T(16,"span",12),B(17,"Richiesto"),S()(),T(18,"div",13)(19,"input",52,6),Je("ngModelChange",function(r){ue(n);let o=ee();return et(o.formField.selectOptions.displayExp,r)||(o.formField.selectOptions.displayExp=r),de(r)}),S()(),De(21,F4,2,0,"div",15),S(),T(22,"div",10)(23,"label",11),B(24,"Value Expression "),T(25,"span",12),B(26,"Richiesto"),S()(),T(27,"div",13)(28,"input",53,7),Je("ngModelChange",function(r){ue(n);let o=ee();return et(o.formField.selectOptions.valueExp,r)||(o.formField.selectOptions.valueExp=r),de(r)}),S()(),De(30,V4,2,0,"div",15),S(),T(31,"div",54),De(32,B4,23,8,"table",55),S()()}if(t&2){let n=li(20),i=li(29),r=ee();j(5),Ye("ngModel",r.formField.selectOptions.multiple),j(7),Ye("ngModel",r.formField.selectOptions.parent),j(7),Ye("ngModel",r.formField.selectOptions.displayExp),j(2),W("ngIf",n.invalid&&n.touched),j(7),Ye("ngModel",r.formField.selectOptions.valueExp),j(2),W("ngIf",i.invalid&&i.touched),j(2),W("ngIf",r.formField.selectOptions.valueExp&&r.formField.selectOptions.displayExp)}}var OO=(()=>{let e=class e{constructor(){this.outPutProperties=new ge,this.showSelectOption=!1,this.showFileOption=!1,this.showCheckBoxOption=!1,this.newOption={},this.optionSelIndex=-1}ngOnInit(){this.showSelectOption=!1;let i;switch(this.formField.type){case"checkBox":if(this.showCheckBoxOption=!0,this.formField.typeInput="boolean",this.checkBoxOptions={haveLink:!1,hrefLink:void 0,hrefText:""},typeof this.formField.checkBoxOptions<"u"){let o=this.formField.checkBoxOptions;this.checkBoxOptions={haveLink:o.haveLink,hrefLink:o.hrefLink,hrefText:o.hrefText}}this.formField.checkBoxOptions=this.checkBoxOptions;break;case"fileBox":this.showFileOption=!0,this.formField.typeInput="file";break;case"selectBox":this.showSelectOption=!0,this.selectOptions={multiple:!1,displayExp:"",valueExp:"",options:[],parent:""},typeof this.formField.selectOptions<"u"&&(i=this.formField.selectOptions,this.selectOptions={multiple:i.multiple,displayExp:i.displayExp,valueExp:i.valueExp,options:i.options,parent:i.parent}),this.formField.selectOptions=this.selectOptions;break;default:break}}addOption(){let i=this.formField.selectOptions.valueExp,r=this.formField.selectOptions.displayExp;!this.newOption[i]||!this.newOption[r]||(this.optionSelIndex>=0?this.selectOptions.options[this.optionSelIndex]=this.newOption:this.selectOptions.options.push(this.newOption),this.formField.selectOptions&&(this.newOption={[this.formField.selectOptions.valueExp]:"",[this.formField.selectOptions?.displayExp]:"",parent:""}),this.optionSelIndex=-1)}onOptionClick(i){let r=this.formField.selectOptions.valueExp,o=this.formField.selectOptions.displayExp;this.newOption=i,this.formField.selectOptions?.options&&(this.optionSelIndex=this.formField.selectOptions?.options.findIndex(s=>s==i))}removeOption(i){this.selectOptions.options.splice(i,1)}saveProperties(i){if(!this.formPrsValidate(i))return;let o={name:"saveProperties",formField:this.formField};this.outPutProperties.emit(o)}closeProperties(i){if(i.valid)gp("Sei sicuro di voler abbandonare?","Attenzione!",o=>{if(o){let s={name:"closeProperties",formField:this.formField};this.outPutProperties.emit(s)}});else{let o={name:"closeProperties",formField:this.formField};this.outPutProperties.emit(o)}}addValidation(i){i.validation.push({type:"",value:""})}formPrsValidate(i){return i.valid?this.showSelectOption&&this.formField.selectOptions&&this.formField.selectOptions.options.length==0?(alert("Mancano i campi le options della select"),!1):!0:(alert("Mancano i campi obbligatori"),this.markFormGroupTouched(i),!1)}markFormGroupTouched(i){Object.keys(i.controls).forEach(r=>{i.control.get(r)?.markAsTouched({onlySelf:!0})})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-element"]],inputs:{formField:"formField"},outputs:{outPutProperties:"outPutProperties"},standalone:!0,features:[Te],decls:86,vars:20,consts:[["elementForm","ngForm"],["name","ngModel"],["typeInput","ngModel"],["label","ngModel"],["hrefLink","ngModel"],["hrefText","ngModel"],["displayExp","ngModel"],["valueExp","ngModel"],[1,"modal-body","form-container"],[1,""],[1,"row","mt-3","mb-3"],[1,"col-sm-3","col-form-label","font-medium"],[1,"badge","bg-secondary"],[1,"col-sm-9"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],["name","typeInput","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["value",""],["value","text"],["value","number"],["value","email"],["value","password"],["value","url"],["value","file",3,"selected"],["value","boolean",3,"selected"],["type","text","name","label","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","placeholder",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","cssClass",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","htmlId",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","maxLength",1,"form-control",3,"ngModelChange","disabled","ngModel"],[1,"col-sm-9","form-check"],["id","required","type","checkbox","name","required",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","required",1,"form-check-label"],["class","row mt-3 mb-3",4,"ngIf"],["class","row mt-3 mb-3 ",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","ana-button",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"mdi","mdi-content-save-outline"],[1,"text-danger"],["id","funcButton","type","checkbox","name","funcButton",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","min",1,"col-sm-3","col-form-label","font-medium"],[1,"col-sm-9","form-control"],["id","min","type","number","name","min",1,"form-control",3,"ngModelChange","disabled","ngModel"],["type","number","name","max",1,"form-control",3,"ngModelChange","disabled","ngModel"],["id","hrefLink","name","hrefLink","type","checkbox",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","hrefLink",1,"form-check-label"],["id","hrefLink","name","hrefLink","type","url",1,"form-control",3,"ngModelChange","ngModel","required"],["id","hrefText","name","hrefText","type","text",1,"form-control",3,"ngModelChange","required","ngModel"],["id","multiple","name","multiple","type","checkbox",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","multiple",1,"form-check-label"],["type","text","name","parent",1,"form-control",3,"ngModelChange","ngModel"],["type","text","required","","name","displayExp",1,"form-control",3,"ngModelChange","ngModel"],["type","text","required","","name","valueExp",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3","mb-3"],["class","table table-sm ",4,"ngIf"],[1,"table","table-sm"],["type","text","placeholder","Nuovo Display",1,"form-control",3,"ngModelChange","name","ngModel"],["type","text","placeholder","Nuovo Value",1,"form-control",3,"ngModelChange","name","ngModel"],["type","text","name","parentT","placeholder","Nuovo Parent",1,"form-control",3,"ngModelChange","ngModel"],[1,"action-cell"],[1,"icon-button","btn","button-in-cell",3,"click"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(r,o){if(r&1){let s=Qe();T(0,"div",8)(1,"form",null,0)(3,"div",9)(4,"div",10)(5,"label",11),B(6,"Nome campo "),T(7,"span",12),B(8,"Richiesto"),S()(),T(9,"div",13)(10,"input",14,1),Je("ngModelChange",function(l){return ue(s),et(o.formField.name,l)||(o.formField.name=l),de(l)}),S()(),De(12,S4,2,0,"div",15),S(),T(13,"div",10)(14,"label",11),B(15,"Tipo di campo "),T(16,"span",12),B(17,"Richiesto"),S()(),T(18,"div",13)(19,"select",16,2),Je("ngModelChange",function(l){return ue(s),et(o.formField.typeInput,l)||(o.formField.typeInput=l),de(l)}),T(21,"option",17),B(22,"Seleziona"),S(),T(23,"option",18),B(24,"Testo"),S(),T(25,"option",19),B(26,"Numerico"),S(),T(27,"option",20),B(28,"Email"),S(),T(29,"option",21),B(30,"Password"),S(),T(31,"option",22),B(32,"Url"),S(),T(33,"option",23),B(34,"file"),S(),T(35,"option",24),B(36,"Boolean"),S()()(),De(37,M4,2,0,"div",15),S(),T(38,"div",10)(39,"label",11),B(40,"Label "),T(41,"span",12),B(42,"Richiesto"),S()(),T(43,"div",13)(44,"input",25,3),Je("ngModelChange",function(l){return ue(s),et(o.formField.label,l)||(o.formField.label=l),de(l)}),S()(),De(46,A4,2,0,"div",15),S(),T(47,"div",10)(48,"label",11),B(49,"Placeholder"),S(),T(50,"div",13)(51,"input",26),Je("ngModelChange",function(l){return ue(s),et(o.formField.placeholder,l)||(o.formField.placeholder=l),de(l)}),S()()(),T(52,"div",10)(53,"label",11),B(54,"CSS Class"),S(),T(55,"div",13)(56,"input",27),Je("ngModelChange",function(l){return ue(s),et(o.formField.cssClass,l)||(o.formField.cssClass=l),de(l)}),S()()(),T(57,"div",10)(58,"label",11),B(59,"HTML ID"),S(),T(60,"div",13)(61,"input",28),Je("ngModelChange",function(l){return ue(s),et(o.formField.htmlId,l)||(o.formField.htmlId=l),de(l)}),S()()(),T(62,"div",10)(63,"label",11),B(64,"Max Length"),S(),T(65,"div",13)(66,"input",29),Je("ngModelChange",function(l){return ue(s),et(o.formField.maxLength,l)||(o.formField.maxLength=l),de(l)}),S()()(),T(67,"div",10)(68,"label",11),B(69,"Required"),S(),T(70,"div",30)(71,"input",31),Je("ngModelChange",function(l){return ue(s),et(o.formField.required,l)||(o.formField.required=l),de(l)}),S(),T(72,"label",32),B(73," Campo Richiesto "),S()()(),De(74,x4,7,1,"div",33)(75,O4,5,2,"div",33)(76,R4,5,2,"div",33),S(),De(77,k4,22,7,"div",34)(78,j4,33,7,"div",34),S()(),T(79,"div",35)(80,"button",36),he("click",function(){ue(s);let l=li(2);return de(o.closeProperties(l))}),ie(81,"span",37),B(82,"Chiudi"),S(),T(83,"button",36),he("click",function(){ue(s);let l=li(2);return de(o.saveProperties(l))}),ie(84,"span",38),B(85,"Salva"),S()()}if(r&2){let s=li(11),a=li(45);j(10),Ye("ngModel",o.formField.name),j(2),W("ngIf",s.invalid&&s.touched),j(7),Ye("ngModel",o.formField.typeInput),W("disabled",o.showFileOption),j(14),W("selected",o.showFileOption),j(2),W("selected",o.showCheckBoxOption),j(2),W("ngIf",a.invalid&&a.touched),j(7),Ye("ngModel",o.formField.label),j(2),W("ngIf",a.invalid&&a.touched),j(5),Ye("ngModel",o.formField.placeholder),j(5),Ye("ngModel",o.formField.cssClass),j(5),Ye("ngModel",o.formField.htmlId),j(5),W("disabled",o.showFileOption),Ye("ngModel",o.formField.maxLength),j(5),Ye("ngModel",o.formField.required),j(3),W("ngIf",o.formField.type=="textBox"),j(),W("ngIf",o.formField.type=="textBox"&&o.formField.typeInput=="number"),j(),W("ngIf",o.formField.type=="textBox"&&o.formField.typeInput=="number"),j(),W("ngIf",o.showCheckBoxOption&&o.formField.checkBoxOptions),j(),W("ngIf",o.showSelectOption&&o.formField.selectOptions)}},dependencies:[Ze,qt,ci,Yr,Op,vO,bO,Qr,Tb,bb,Rp,el,Sp,xb,mu,Ib,Np],styles:[".disabled-el[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}"]});let t=e;return t})();var jb=[{name:"ElementComponent",component:OO},{name:"DynamicFormComponent",component:xO}];var Jr=(()=>{let e=class e{constructor(){this.dataFromComponent=new ge,this._popupsSet=new pt([]),this.popupsSet=this._popupsSet.asObservable(),this.currentPopupsSet=[],this._outputComponent=new pt([]),this.outputComponent=this._outputComponent.asObservable()}getComponentByName(i){return jb.find(o=>o.name===i).component||null}isComponentExistByName(i){return!!jb.find(o=>o.name===i).name}setNewPopUp(i,r,o,s="800",a,l,u=!1,d=!1,f="",m="center",_=!1){if(i||(i=Math.random().toString().replace("0.","")),typeof r>"u"||!i)return;let D=this.currentPopupsSet.findIndex(M=>M.id==i&&M.componentName==r);if(D<0){let M={componentName:r,dataToSend:o,instancedData:l,popUpWidth:s,showCaptionFooter:u,showCaptionHeader:d,accessoringData:a,action:"added",title:f,position:m,id:i,isClosablePopUp:_};this.currentPopupsSet.push(M),this._popupsSet.next(this.currentPopupsSet)}else this.currentPopupsSet[D].dataToSend=o,this.currentPopupsSet[D].action="update",this.currentPopupsSet[D].showCaptionFooter=u,this.currentPopupsSet[D].showCaptionHeader=d,this._popupsSet.next(this.currentPopupsSet)}setPopUps(i){this.currentPopupsSet=i}destroyCurrentOpenPopUp(i){let r=this.currentPopupsSet.findIndex(o=>o.componentName==i);if(r>=0){this.currentPopupsSet[r].action="remove";try{}catch(o){console.warn(o)}setTimeout(()=>{this._popupsSet.next(this.currentPopupsSet),this._outputComponent.next([]),this.currentPopupsSet.splice(r,1)},500)}}destroyCurrentOpenPopUpByGuid(i){let r=this.currentPopupsSet.findIndex(o=>o.id==i||o.componentName==i);if(r>=0){this.currentPopupsSet[r].action="remove";try{return this._popupsSet.next(this.currentPopupsSet),this.currentPopupsSet.splice(r,1),!0}catch(o){return console.warn(o),!1}}return!1}destroyOutputComponent(){this._outputComponent.next([])}destroyCurrentOpenPopUps(){this.currentPopupsSet=[],this._popupsSet.next([])}setOutputComponent(i){this._outputComponent.next(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $4(t,e){if(t&1){let n=Qe();T(0,"li",19),he("click",function(r){let o=ue(n).index,s=ee();return de(s.onAdd(r,o))}),ie(1,"span",20),B(2),T(3,"div")(4,"button",21),he("click",function(r){let o=ue(n).index,s=ee();return de(s.onAdd(r,o))}),ie(5,"span",22),S()()()}if(t&2){let n=e.$implicit,i=ee();j(),W("ngClass",i.elementIcons[n.type]),j(),St(" ",n.label," ")}}function G4(t,e){if(t&1){let n=Qe();T(0,"div",23),he("click",function(){let r=ue(n),o=r.$implicit,s=r.index,a=ee();return de(a.openPropertiesModal(o,s))}),T(1,"div",24)(2,"span"),B(3),S()(),T(4,"button",25),he("click",function(){let r=ue(n).index,o=ee();return de(o.onRemove(r))}),ie(5,"span",26),S()()}if(t&2){let n=e.$implicit;j(3),_n(n.label)}}var RO=(()=>{let e=class e{constructor(i,r,o){this.modalService=i,this.route=r,this.router=o,this.elements=[{type:"textBox",label:"Text Box"},{type:"selectBox",label:"Select Box"},{type:"radio",label:"Radio Button"},{type:"checkBox",label:"Checkbox"},{type:"textArea",label:"Textarea"},{type:"fileBox",label:"FileBox"}],this.elementIcons={textBox:"mdi mdi-signature-text",selectBox:"mdi mdi-form-select",radio:"mdi mdi-radiobox-marked",checkBox:"mdi mdi-checkbox-marked-outline",textArea:"mdi mdi-form-textarea",fileBox:"mdi mdi-file-document-outline"},this.formElements=[],this.propertiesModal=V(Jr),this.formId=null,this.formTitle=this.formId?"Modifica Form":"Crea Nuovo Form",this.formName="",this.formService=V(Ya)}ngOnInit(){this.route.paramMap.subscribe(i=>{this.formId=i.get("id"),this.formId&&(this.formTitle="Modifica Form",this.loadForm(this.formId))})}loadForm(i){this.formService.getFormById(i).subscribe(r=>{r&&(this.formName=r.nameForm,this.formElements=JSON.parse(r.json))})}onAdd(i,r){i.preventDefault(),i.stopPropagation();let o=this.elements[r];this.formElements.push(ke(Y({},o),{validation:[]}));let s=this.formElements.length-1;this.openPropertiesModal(o,s)}onRemove(i){this.formElements.splice(i,1)}openPropertiesModal(i,r){this.selectedElement=Y({},i);let o=Math.random().toString().replace("0.",""),s={formField:this.selectedElement};this.propertiesModal.setNewPopUp(o,"ElementComponent",null,800,null,s,!1,!0,"Gestione propriet\xE0","",!1),this.propertiesModal.outputComponent.subscribe(a=>{a.guid==o&&a.name=="saveProperties"&&r>=0&&(this.formElements[r]=a.formField,this.propertiesModal.destroyCurrentOpenPopUpByGuid(o),this.selectedElement={}),a.guid==o&&a.name=="closeProperties"&&this.propertiesModal.destroyCurrentOpenPopUpByGuid(o)})}addAttribute(i){let r={name:"",value:""};i.attributes.push(r)}saveForm(i){let r=JSON.stringify(this.formElements);console.log("saveForm",r);let o=this.formId==="new"?Math.random().toString().replace("0.",""):this.formId,s=this.formId=="new"?this.formName.trim():this.formId,a={nameForm:s,json:r,id:o};this.formService.saveForm(s,a).then(()=>{Ja("Form salvato con successo","Attenzione!"),this.router.navigate(["/form-list"])}).catch(l=>{console.error("Errore durante il salvataggio del form:",l)})}returnPrev(){this.router.navigate(["/form-list"])}};e.\u0275fac=function(r){return new(r||e)(ae(Bb),ae(wr),ae(Er))},e.\u0275cmp=Ie({type:e,selectors:[["app-form-builder"]],standalone:!0,features:[Te],decls:29,vars:6,consts:[[3,"caption"],[1,"text","border-bottom"],[1,"mdi","mdi-chevron-right"],[1,"row","mt-3","mb-3"],["for","formName",1,"col-sm-2","col-form-label","font-medium"],[1,"badge","bg-secondary"],[1,"col-sm-10"],["id","formName","type","text","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text","pt-3","mt-3"],[1,"content-formbuilder","form-view"],[1,"list-group","elements"],["class","list-group-item d-flex justify-content-between align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"form-view"],[1,"row"],["class","element",3,"click",4,"ngFor","ngForOf"],[1,"formbuilder-button","gap-3","mt-1"],[1,"ana-button","btn",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"mdi","mdi-content-save-outline"],[1,"list-group-item","d-flex","justify-content-between","align-items-center",3,"click"],[1,"iconE",3,"ngClass"],[1,"btn","icon-button","ms-2",3,"click"],[1,"mdi","mdi-plus-circle-outline"],[1,"element",3,"click"],[1,"form-element","mb-3"],[1,"icon-button","ms-2","removeEl",3,"click"],[1,"mdi","mdi-close"]],template:function(r,o){r&1&&(T(0,"app-anagrafica-wrapper",0)(1,"div",1)(2,"h2"),ie(3,"span",2),B(4),S()(),T(5,"div",3)(6,"label",4),B(7,"Form Name "),T(8,"span",5),B(9,"Richiesto"),S()(),T(10,"div",6)(11,"input",7),Je("ngModelChange",function(a){return et(o.formName,a)||(o.formName=a),a}),S()()(),T(12,"div",8)(13,"h3"),ie(14,"span",2),B(15,"Anteprima form"),S()(),T(16,"div",9)(17,"ul",10),De(18,$4,6,2,"li",11),S(),T(19,"div",12)(20,"div",13),De(21,G4,6,1,"div",14),S()()(),T(22,"div",15)(23,"button",16),he("click",function(){return o.returnPrev()}),ie(24,"span",17),B(25," Indietro "),S(),T(26,"button",16),he("click",function(){return o.saveForm(o.formName)}),ie(27,"span",18),B(28," Salva "),S()()()),r&2&&(W("caption",o.formTitle),j(4),ql("",o.formTitle," ",o.formName,""),j(7),Ye("ngModel",o.formName),j(7),W("ngForOf",o.elements),j(3),W("ngForOf",o.formElements))},dependencies:[Ze,Js,qt,Cr,Yr,Qr,el,mu,MO],styles:[".content-formbuilder[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:normal;align-items:normal;align-content:normal}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{flex:0 1 auto}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:.3rem;text-align:start}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .iconE[_ngcontent-%COMP%]{margin-right:.4rem;line-height:.5rem}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;line-height:.5rem}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--bg-grey)}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]{flex:1 0 auto;margin-left:10px}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]{position:relative;display:flex;flex:1 0 auto;justify-content:space-between;align-content:center}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]{border:1px solid var(--border_color);width:100%;padding:.65rem;border-radius:.375rem}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .removeEl[_ngcontent-%COMP%]{color:red;font-size:1rem}.content-formbuilder[_ngcontent-%COMP%]   .no-evt[_ngcontent-%COMP%]{pointer-events:none}.formbuilder-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:end}"]});let t=e;return t})();var H4=new Q("angularfire2.functions.origin"),z4=new Q("angularfire2.functions.region"),Ub=new Q("angularfire2.functions.use-emulator"),$b=(()=>{class t{httpsCallable;constructor(n,i,r,o,s,a,l,u){let d=l,f=te(void 0).pipe(Zt(o.outsideAngular),Ge(()=>import("./chunk-UGZKZQLK.js")),J(()=>Oo(n,r,i)),J(m=>la(`${m.name}.functions.${s||a}`,"AngularFireFunctions",m.name,()=>{let _;if(s&&a)throw new Error("REGION and ORIGIN can't be used at the same time.");return _=m.functions(s||a||void 0),d&&_.useEmulator(...d),_},[s,a,d])),Ss({bufferSize:1,refCount:!1}));return this.httpsCallable=(m,_)=>D=>xe(f).pipe(Zt(o.insideAngular),Ge(M=>M.httpsCallable(m,_)(D)),J(M=>M.data)),Hh(this,f,r)}static \u0275fac=function(i){return new(i||t)($(Tr),$(Sr,8),$(Se),$(xo),$(z4,8),$(H4,8),$(Ub,8),$(ji,8))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),NO=(()=>{class t{constructor(){Nt.registerVersion("angularfire",xn.full,"fn-compat")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[$b]})}return t})();var PO=(()=>{let e=class e{constructor(){this.api=Dr.BASE_API_URL,this.isLoginUser=!1,this.firestore=V(cu),this.httpClient=V(Z_),this.auth=hm(V(aa)),this.functions=V($b),this.apiFire="https://us-central1-comemivesto-5e5f9.cloudfunctions.net/api"}get httpOptions(){return{headers:new Bi().set("Authorization","Bearer "+this.token).set("Content-Type","application/x-www-form-urlencoded; charset=UTF-8").set("Content-Type","application/json; charset=utf-8"),params:new ui}}get InfoUtenteConnesso(){let i=sessionStorage.getItem("utenteConnesso")??"";return JSON.parse(i)}getUsers(){return this.firestore.collection("users").valueChanges().pipe(J(i=>i))}isLoggedUser(){return this.isExistsUsers().pipe(J(i=>i&&i.id&&!i.sospeso))}isExistsUsers(){let i=Dr.BASE_API_URL+"Account/GetUserInfo",r=this.httpOptions;return this.httpClient.get(i,r)}loginUser(i){let r=Dr.BASE_API_URL+"Token/login",o=this.httpOptions;return this.httpClient.post(r,i,o)}LogOut(){return O(this,null,function*(){let i=Dr.BASE_API_URL+"Token/Logout",r=this.httpOptions,o=this.httpClient.get(i,r);return yield Il(o)})}clearSessionStorage(){if(sessionStorage.length>0)for(let r in sessionStorage)sessionStorage.removeItem(r)}set token(i){sessionStorage.setItem("token",i),this.sessionToken=i}get token(){return sessionStorage.getItem("token")??""}sendPasswordFirebase(i){return O(this,null,function*(){try{return yield dm(this.auth,i),!0}catch{return!1}})}disabledUsersFirebase(i){return O(this,null,function*(){let r=`${this.apiFire}/users/disable/${i}`,o={uid:i};try{let s=this.httpClient.post(r,o),a=yield Il(s);return console.log(a),!0}catch(s){return console.error("Errore nella disabilitazione dell'utente:",s),!1}})}RecuperaPassword(i){return O(this,null,function*(){let r=Dr.BASE_API_URL+"Account/RecuperaPassword?username="+i,o=this.httpOptions,s=this.httpClient.get(r,o);return yield Il(s)})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function W4(t,e){if(t&1){let n=Qe();T(0,"li",3),he("dblclick",function(){let r=ue(n).$implicit,o=ee();return de(o.editUser(r))}),T(1,"div",4)(2,"span",5),ie(3,"img",6),S(),B(4),S(),T(5,"div",7)(6,"button",8),ie(7,"span",9),S(),T(8,"ul",10)(9,"li")(10,"button",11),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.editUser(r))}),ie(11,"span",12),B(12," Modifica "),S()(),T(13,"li")(14,"button",11),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.deleteUser(r))}),ie(15,"span",13),B(16," Elimina "),S()(),T(17,"li")(18,"button",11),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.disableUser(r.uid))}),ie(19,"span",14),B(20," Disabilita "),S()(),T(21,"li")(22,"button",11),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.sendPasswordReset(r))}),ie(23,"span",15),B(24," Invia Password "),S()()()()()}if(t&2){let n=e.$implicit;j(3),W("src",n.photoURL||"https://ionicframework.com/docs/img/demos/avatar.svg",Zd)("alt",n.name),j(),ql(" ",n.displayName||n.name," ",n.email," ")}}var kO=(()=>{let e=class e{constructor(){this.subtitle="Elenco utenti registrati in app",this.userService=V(PO),this.propertiesModal=V(Jr)}ngOnInit(){this.users$=this.userService.getUsers(),this.users$.subscribe(i=>{this.users=i})}deleteUser(i){throw new Error("Method not implemented.")}editUser(i){this.selectedUser=i;let r=Math.random().toString().replace("0.",""),o={service:"profileForm",editData:this.selectedUser};this.propertiesModal.setNewPopUp(r,"DynamicFormComponent",null,800,null,o,!1,!0,"Modifica Utente","",!1),this.propertiesModal.outputComponent.subscribe(s=>{s.guid==r&&s.name=="submitForm",s.guid==r&&s.name=="cancelForm"&&(this.selectedUser=void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(r))})}createNewuser(){throw new Error("Method not implemented.")}sendPasswordReset(i){return O(this,null,function*(){(yield this.userService.sendPasswordFirebase(i.email))&&Ja(`Email di reset inviata a ${i.email}`,"Attenzione!")})}disableUser(i){throw this.userService.disabledUsersFirebase(i),new Error("Method not implemented.")}updateUser(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-users"]],standalone:!0,features:[Te],decls:3,vars:5,consts:[[3,"emittEventButton","caption","subTitle","tip","addButtonShow"],[1,"list-group","form-list"],["class","form-list-item list-group-item d-flex justify-content-between align-items-center",3,"dblclick",4,"ngFor","ngForOf"],[1,"form-list-item","list-group-item","d-flex","justify-content-between","align-items-center",3,"dblclick"],[1,"profile-info"],[1,"img-thumbnail","profileImage"],[1,"",3,"src","alt"],[1,"dropdown"],[1,"btn","icon-button"],[1,"mdi","mdi-dots-vertical"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],[1,"btn","icon-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"mdi","mdi-close","del"],[1,"mdi","mdi-lock-off-outline"],[1,"mdi","mdi-lock-reset"]],template:function(r,o){r&1&&(T(0,"app-anagrafica-wrapper",0),he("emittEventButton",function(){return o.createNewuser()}),T(1,"ul",1),De(2,W4,25,4,"li",2),S()()),r&2&&(W("caption","Elenco Utenti")("subTitle",o.subtitle)("tip","Gestisci il profilo utente, resetta la password,sospendi....")("addButtonShow",!0),j(2),W("ngForOf",o.users))},dependencies:[Ze,qt,Yr,Cr],styles:[".profile-info[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:flex-start;align-items:center;flex-direction:row}.profile-info[_ngcontent-%COMP%]   .profileImage[_ngcontent-%COMP%]{height:50px;overflow:hidden;display:block;width:50px;position:relative;border-radius:900px;padding:0;margin-right:.333rem}.profile-info[_ngcontent-%COMP%]   .profileImage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;-o-object-fit:cover;object-fit:cover;top:0;width:100%;height:100%}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{display:none;right:0}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}"]});let t=e;return t})();var Gb=[{path:"dashboard",component:UT},{path:"utenti",component:kO},{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"form-list",component:jx},{path:"form-builder/:id",component:RO}],Iee=Bh(Gb);var FO={providers:[Bh(Gb),{provide:Ub,useValue:["localhost",4e3]},t_(eS.initializeApp(Dr.firebase),Lx,tS,NO,jT,QI)]};var VO=(()=>{let e=class e{constructor(){}ngOnInit(){this.dateCopy=new Date}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-footer"]],standalone:!0,features:[Te],decls:11,vars:1,consts:[["id","footer",1,"footer"],[1,"content"],["src","../../../assets/images/logo_sx.png",1,"sx-logo"],[1,"text","indent"],[1,""],[1,"text","text-end","px-2"]],template:function(r,o){r&1&&(T(0,"footer",0)(1,"div",1),ie(2,"img",2),T(3,"div",3)(4,"h2",4),B(5),S()(),T(6,"div",5)(7,"p")(8,"span"),B(9,"Partita IVA: "),S(),ie(10,"span"),S()()()()),r&2&&(j(5),St("\xA9 ",o.dateCopy," Come mi vesto srl "))},styles:[".footer[_ngcontent-%COMP%]{background-color:var(--primary);width:100%;padding:5px;min-height:var(--height_footer)}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{max-width:var(--width_container);margin:0 auto;color:#fff;display:flex;flex-direction:row;flex-wrap:nowrap;align-content:center;justify-content:space-between;align-items:center}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#fff;width:100%;padding-left:40px}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400;margin:0;text-align:left;font-size:10px;color:#fff}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 2px;font-size:12px}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .sx-logo[_ngcontent-%COMP%]{margin-top:1px;width:fit-content;height:40px;display:block}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dx-logo[_ngcontent-%COMP%]{width:fit-content;margin-top:10px;height:25px;display:block}"]});let t=e;return t})();var LO=(()=>{let e=class e{constructor(){}ngOnInit(){this.renderHeader()}renderHeader(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-header"]],standalone:!0,features:[Te],decls:16,vars:0,consts:[["id","header",1,"header"],[1,"header-container"],[1,"item-left"],[1,"item-center"],["aria-label","breadcrumb",1,"itm-container","justify-content-center"],[1,"nav"],[1,"nav-item"],["href","/",1,"nav-link","active"],["href","/form-list",1,"nav-link"],["href","/utenti",1,"nav-link"],[1,"item-right"]],template:function(r,o){r&1&&(T(0,"header",0)(1,"div",1),ie(2,"div",2),T(3,"div",3)(4,"nav",4)(5,"ul",5)(6,"li",6)(7,"a",7),B(8,"Home"),S()(),T(9,"li",6)(10,"a",8),B(11,"Gestione form"),S()(),T(12,"li",6)(13,"a",9),B(14,"Gestione Utenti"),S()()()()(),ie(15,"div",10),S()())},styles:[".header[_ngcontent-%COMP%]{background-color:var(--primary);height:65px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{max-width:var(--width_container);max-height:var(--header_height);margin:auto;display:flex;flex-direction:row;flex-wrap:wrap;align-content:center;justify-content:space-between;align-items:center;color:var(--link-nav)}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-center[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%]{margin:0 5px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{padding-left:10px;width:150px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo-image[_ngcontent-%COMP%]{max-width:100%}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:var(--link-nav)!important}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .img-profile[_ngcontent-%COMP%]{max-width:100%;width:30px;height:30px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{position:absolute;top:35px;left:-190px;z-index:10;margin:0;padding:10px 5px;min-width:226px;background-color:#c8ced6;border:1px solid #c8ced6;box-shadow:0 16px 18px #0404071a;border-radius:4px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{display:block;color:var(--blueSoft)!important;text-align:left;line-height:22px;padding:6px 7px;text-transform:none;font-size:13px;letter-spacing:normal;position:relative;display:inline-block}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:9px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:12px;display:inline-block}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active, .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:visited, .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{background:transparent}"]});let t=e;return t})();function q4(t,e){if(t&1&&(T(0,"li",7)(1,"a",8),ie(2,"span"),T(3,"span",9),B(4),S()()()),t&2){let n=e.$implicit;j(),W("href",n.path,Zd),j(),Ws(n.icon),j(2),_n(n.label)}}var BO=(()=>{let e=class e{constructor(){this.allMenu=[],this.router=V(Er),this.initializeMenu()}initializeMenu(){let i=this.router.config;this.allMenu=[{path:"dashboard",label:"Dashboard",icon:"mdi mdi-view-dashboard-outline"},{path:"utenti",label:"Utenti Registrati",icon:"mdi mdi-account-multiple-outline"},{path:"form-list",label:"Gestione form e viste",icon:"mdi mdi-cog-outline"}]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-menu"]],standalone:!0,features:[Te],decls:8,vars:1,consts:[[1,"d-flex","flex-column","flex-shrink-0","bg-body-tertiary"],["href","/","data-bs-toggle","tooltip","data-bs-placement","right","data-bs-original-title","Icon-only",1,"d-block","p-3","link-body-emphasis","text-decoration-none"],["width","40","height","32",1,"bi","pe-none"],[0,"xlink","href","#bootstrap"],[1,"visually-hidden"],[1,"nav","nav-pills","nav-flush","flex-column","mb-auto","text-center"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],["aria-current","page","data-bs-toggle","tooltip","data-bs-placement","right","aria-label","Home","data-bs-original-title","Home",1,"nav-link",3,"href"],[1,"text"]],template:function(r,o){r&1&&(T(0,"div",0)(1,"a",1),tC(),T(2,"svg",2),ie(3,"use",3),S(),nC(),T(4,"span",4),B(5,"Icon-only"),S()(),T(6,"ul",5),De(7,q4,5,4,"li",6),S()()),r&2&&(j(7),W("ngForOf",o.allMenu))},dependencies:[Ze,qt],styles:[".nav[_ngcontent-%COMP%]{background:var(--bianco);border-radius:.5rem}.nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;border-width:1px 1px 0px 1px;box-shadow:0 2px 3px #0000000b;padding:.75rem .875rem;color:var(--blueSoft);font-size:20px;overflow:hidden}.nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:15px}"]});let t=e;return t})();var K4=["containerComponent"],Q4=(t,e)=>({display:t,"z-index":e}),Y4=t=>({"position-bottom":t}),J4=(t,e)=>({"max-width":t,width:e});function Z4(t,e){if(t&1){let n=Qe();T(0,"app-caption",6),he("emettiChiusura",function(r){ue(n);let o=ee();return de(o.emettiChiusura(r))}),S()}if(t&2){let n=ee();W("caption",n.titlePopUp)("isClosable",n.isClosablePopUp)("cssClass","modal")("help","")}}function X4(t,e){if(t&1){let n=Qe();T(0,"app-caption",7),he("emettiChiusura",function(r){ue(n);let o=ee();return de(o.emettiChiusura(r))}),S()}if(t&2){let n=ee();W("isFooter",n.showCaptionFooter)}}var jO=(()=>{let e=class e{constructor(i){this.popUpService=i,this.outputEmit=new ge,this.showCaptionHeader=!1,this.showCaptionFooter=!1,this.isPanelVisible=!1,this.zIndex=500,this.popUpWidth=null,this.isClosablePopUp=!1,this.position="center"}ngOnChanges(i){this.infoPopUp.popUpWidth&&(this.popUpWidth=this.infoPopUp.popUpWidth+"px"),this.infoPopUp.showCaptionHeader&&(this.showCaptionHeader=this.infoPopUp.showCaptionHeader),this.infoPopUp.showCaptionFooter&&(this.showCaptionFooter=this.infoPopUp.showCaptionFooter),this.infoPopUp.title&&(this.titlePopUp=this.infoPopUp.title),this.infoPopUp.class&&(this.classFade=this.infoPopUp.class)}get getMaxZIndex(){let i=document.querySelectorAll(".modal"),r=[];return i.forEach(o=>{o.classList.contains("modal-dialog")||r.push(parseFloat(window.getComputedStyle(o).zIndex))}),Math.max(...r);return Math.max(...Array.from(document.querySelectorAll("div.dx-overlay-content"),o=>parseFloat(window.getComputedStyle(o).zIndex)).filter(o=>!Number.isNaN(o)),0)}ngOnInit(){return O(this,null,function*(){this.isPanelVisible=!0,this.zIndexModalDialog=this.getMaxZIndex+1;let i=this.infoPopUp.componentName;this.accessoringData=this.infoPopUp.accessoringData,this.position=this.infoPopUp.position;let r=this.popUpService.getComponentByName(i),o=this.containerComponent.createComponent(r);o.instance.itemData=this.infoPopUp.dataToSend,o.instance.cssClass="modal-content ",this.componentName=i,this.idPopUp=this.infoPopUp.id,this.infoPopUp.popUpWidth&&(this.popUpWidth=this.infoPopUp.popUpWidth+"px"),this.infoPopUp.showCaptionHeader&&(this.showCaptionHeader=this.infoPopUp.showCaptionHeader),this.infoPopUp.showCaptionFooter&&(this.showCaptionFooter=this.infoPopUp.showCaptionFooter),this.infoPopUp.title&&(this.titlePopUp=this.infoPopUp.title),this.infoPopUp.class&&(this.classFade=this.infoPopUp.class),this.isClosablePopUp=typeof this.infoPopUp.isClosable<"u"?this.infoPopUp.isClosable:!1;let s=o.instance;if(typeof this.infoPopUp.instancedData<"u"){let a=this.infoPopUp.instancedData;for(let l in a)s[l]=a[l]}for(let a in s)o.instance[a]instanceof ge&&o.instance[a].subscribe(l=>{try{let u;typeof l=="boolean"?(u={componentName:i,accessoringData:this.accessoringData,guid:this.idPopUp,name:a},l=u):(l.componentName=i,l.accessoringData=this.accessoringData,l.guid=this.idPopUp,typeof l.name>"u"&&(l.name=a))}catch{}finally{this.popUpService.setOutputComponent(l)}})})}ngAfterViewInit(){}emettiChiusura(i){this.idPopUp?this.popUpService.destroyCurrentOpenPopUpByGuid(this.idPopUp):this.popUpService.destroyCurrentOpenPopUp(this.componentName),this.popUpService.destroyOutputComponent()}};e.\u0275fac=function(r){return new(r||e)(ae(Jr))},e.\u0275cmp=Ie({type:e,selectors:[["app-modal-popup-content"]],viewQuery:function(r,o){if(r&1&&Qs(K4,7,qn),r&2){let s;Eo(s=Do())&&(o.containerComponent=s.first)}},inputs:{infoPopUp:"infoPopUp",index:"index",componentName:"componentName",classePopup:"classePopup"},outputs:{outputEmit:"outputEmit"},standalone:!0,features:[ln,Te],decls:6,vars:16,consts:[["containerComponent",""],["tabindex","-1","role","dialog","aria-hidden","true",1,"modal","popup",3,"ngStyle","ngClass","id"],[1,"modal-dialog","formEditPopup",3,"id","ngStyle"],[3,"caption","isClosable","cssClass","help","emettiChiusura",4,"ngIf"],[1,"modal-content"],[3,"isFooter","emettiChiusura",4,"ngIf"],[3,"emettiChiusura","caption","isClosable","cssClass","help"],[3,"emettiChiusura","isFooter"]],template:function(r,o){r&1&&(T(0,"div",1)(1,"div",2),De(2,Z4,1,4,"app-caption",3),ie(3,"div",4,0),De(5,X4,1,1,"app-caption",5),S()()),r&2&&(W("ngStyle",sh(8,Q4,o.isPanelVisible?"block":"none",o.zIndexModalDialog))("ngClass",j_(11,Y4,o.position=="bottom"))("ngClass",o.classFade)("id",o.idPopUp),j(),W("id",o.idPopUp)("ngStyle",sh(13,J4,o.popUpWidth?o.popUpWidth:"",o.popUpWidth?o.popUpWidth:"")),j(),W("ngIf",o.showCaptionHeader),j(3),W("ngIf",o.showCaptionFooter))},dependencies:[Uh,Ze,Js,ci,VI],styles:[".popup{z-index:500;pointer-events:auto;background-color:#fffc}  .popup .modal-dialog{max-width:90%;border:1px solid var(--primary);background:#fff;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px #0000002d;border-radius:4px;pointer-events:auto;width:fit-content}  .popup .modal-dialog .caption-container.modal{border:1px solid var(--border_color)}  .popup .modal-dialog .modal-content{border:none;box-sizing:border-box;background:transparent}  .popup .modal-dialog .modal-content .formEdit{background:var(--bg-grey)}  .position-bottom .modal-dialog{z-index:501;bottom:2rem;left:0;right:0;position:fixed;max-width:96%;background:transparent}.fade-in-fwd[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fade-in-fwd .4s cubic-bezier(.39,.575,.565,1) both;animation:_ngcontent-%COMP%_fade-in-fwd .4s cubic-bezier(.39,.575,.565,1) both}@-webkit-keyframes _ngcontent-%COMP%_fade-in-fwd{0%{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@keyframes _ngcontent-%COMP%_fade-in-fwd{0%{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}.fade-out-bck[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fade-out-bck .7s cubic-bezier(.25,.46,.45,.94) both;animation:_ngcontent-%COMP%_fade-out-bck .7s cubic-bezier(.25,.46,.45,.94) both}@keyframes _ngcontent-%COMP%_fade-out-bck{0%{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}to{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}}.slide-center[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_slide-center-fw .7s cubic-bezier(.25,.46,.45,.94) none;animation:_ngcontent-%COMP%_slide-center-fw .7s cubic-bezier(.25,.46,.45,.94) none}@keyframes _ngcontent-%COMP%_slide-center-fw{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}to{-webkit-transform:translateZ(160px);transform:translateZ(160px)}}  .modal-content .modal-data-grid-wrapper{margin:auto}"]});let t=e;return t})();function eG(t,e){if(t&1&&(T(0,"div"),ie(1,"app-modal-popup-content",2),S()),t&2){let n=e.$implicit,i=e.index,r=ee();j(),W("infoPopUp",n)("index",i)("componentName",n.componentName)("classePopup",r.classe)}}var UO=(()=>{let e=class e{constructor(){this.popups=[],this.classSlideCenter="slide-center",this.classFadeIn="fade-in-fwd",this.popUpService=V(Jr)}ngOnInit(){this.popUpService.popupsSet.subscribe(i=>{i.forEach((r,o)=>{r.action=="added"&&(r.action="setted",r.class=this.classSlideCenter,this.popups.push(r)),r.action=="update"&&(r.action="setted",r.class="fade-out-bck",this.popups.splice(o,1),r.class=this.classSlideCenter,setTimeout(()=>{this.popups.push(r)},500)),r.action=="remove"&&(r.class="fade-out-bck",setTimeout(()=>{this.popups.splice(o,1)},300))})})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-modal-popup-wrapper"]],standalone:!0,features:[Te],decls:2,vars:1,consts:[[1,"row"],[4,"ngFor","ngForOf"],[3,"infoPopUp","index","componentName","classePopup"]],template:function(r,o){r&1&&(T(0,"div",0),De(1,eG,2,4,"div",1),S()),r&2&&(j(),W("ngForOf",o.popups))},dependencies:[Ze,qt,jO]});let t=e;return t})();var $O=(()=>{let e=class e{constructor(){this.isClose=!1,this.isLogin=!1,this.idTipoUtente=-1,this.subMenu=null,this.showSubMenu=!1}ngOnInit(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-container"]],standalone:!0,features:[Te],decls:9,vars:0,consts:[[1,"mi-container"],[1,"verticalMenucontainer","sidebar"],[1,"container","no-padding","ana-container"]],template:function(r,o){r&1&&(T(0,"main",0),qs(1),ie(2,"app-header"),T(3,"div",1),ie(4,"app-menu"),S(),Ks(),T(5,"div",2),ie(6,"router-outlet")(7,"app-modal-popup-wrapper"),S(),ie(8,"app-footer"),S())},dependencies:[Ze,Uy,VO,LO,BO,UO],styles:[".mi-container[_ngcontent-%COMP%]   .verticalMenucontainer[_ngcontent-%COMP%]{height:100%;position:absolute;left:0;overflow-x:hidden;overflow-y:auto;padding-bottom:.75rem;padding-left:1.25rem;padding-right:1.25rem;box-sizing:border-box;border:1px solid var(--border_color)}"]});let t=e;return t})();var GO=(()=>{let e=class e{constructor(){this.title="Admin"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-root"]],standalone:!0,features:[Te],decls:1,vars:0,template:function(r,o){r&1&&ie(0,"app-container")},dependencies:[$O]});let t=e;return t})();iT(GO,FO).catch(t=>console.error(t));
