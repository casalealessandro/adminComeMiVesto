import{a as H1,b as Ru,c as z1,d as q1,e as um,f as dm}from"./chunk-HCJFOUJG.js";import"./chunk-VKYYVJIS.js";import{A as nt,B as to,C as Xn,D as Nu,E as bl,H as J1,I as ku,J as Fu,K as bn,L as Pt,a as Y,b as ke,c as sm,d as O,e as W1,i as am,j as K1,k as wl,q as lm,r as Pu,s as Q1,t as Y1,v as cm}from"./chunk-7UO3AAGR.js";var Z1=null;var hm=1,fm=Symbol("SIGNAL");function Ve(t){let e=Z1;return Z1=t,e}var X1={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function wR(t){if(!(gm(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===hm)){if(!t.producerMustRecompute(t)&&!pm(t)){t.dirty=!1,t.lastCleanEpoch=hm;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=hm}}function eE(t){return t&&(t.nextProducerIndex=0),Ve(t)}function tE(t,e){if(Ve(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(gm(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)mm(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function pm(t){Vu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(wR(n),i!==n.version))return!0}return!1}function nE(t){if(Vu(t),gm(t))for(let e=0;e<t.producerNode.length;e++)mm(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function mm(t,e){if(bR(t),Vu(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)mm(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Vu(r),r.producerIndexOfThis[i]=e}}function gm(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Vu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function bR(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ER(){throw new Error}var DR=ER;function iE(t){DR=t}function ce(t){return typeof t=="function"}function hs(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Lu=hs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function no(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ft=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(ce(i))try{i()}catch(o){e=o instanceof Lu?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{rE(o)}catch(s){e=e??[],s instanceof Lu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Lu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)rE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&no(n,e)}remove(e){let{_finalizers:n}=this;n&&no(n,e),e instanceof t&&e._removeParent(this)}};ft.EMPTY=(()=>{let t=new ft;return t.closed=!0,t})();var _m=ft.EMPTY;function Bu(t){return t instanceof ft||t&&"closed"in t&&ce(t.remove)&&ce(t.add)&&ce(t.unsubscribe)}function rE(t){ce(t)?t():t.unsubscribe()}var Nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fs={setTimeout(t,e,...n){let{delegate:i}=fs;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=fs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ju(t){fs.setTimeout(()=>{let{onUnhandledError:e}=Nn;if(e)e(t);else throw t})}function io(){}var oE=ym("C",void 0,void 0);function sE(t){return ym("E",void 0,t)}function aE(t){return ym("N",t,void 0)}function ym(t,e,n){return{kind:t,value:e,error:n}}var ro=null;function ps(t){if(Nn.useDeprecatedSynchronousErrorHandling){let e=!ro;if(e&&(ro={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=ro;if(ro=null,n)throw i}}else t()}function lE(t){Nn.useDeprecatedSynchronousErrorHandling&&ro&&(ro.errorThrown=!0,ro.error=t)}var oo=class extends ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Bu(e)&&e.add(this)):this.destination=TR}static create(e,n,i){return new Ti(e,n,i)}next(e){this.isStopped?wm(aE(e),this):this._next(e)}error(e){this.isStopped?wm(sE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wm(oE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},CR=Function.prototype.bind;function vm(t,e){return CR.call(t,e)}var bm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Uu(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Uu(i)}else Uu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Uu(n)}}},Ti=class extends oo{constructor(e,n,i){super();let r;if(ce(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Nn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&vm(e.next,o),error:e.error&&vm(e.error,o),complete:e.complete&&vm(e.complete,o)}):r=e}this.destination=new bm(r)}};function Uu(t){Nn.useDeprecatedSynchronousErrorHandling?lE(t):ju(t)}function IR(t){throw t}function wm(t,e){let{onStoppedNotification:n}=Nn;n&&fs.setTimeout(()=>n(t,e))}var TR={closed:!0,next:io,error:IR,complete:io};var ms=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(t){return t}function Em(...t){return Dm(t)}function Dm(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var fe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=MR(n)?n:new Ti(n,i,r);return ps(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=cE(i),new i((r,o)=>{let s=new Ti({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[ms](){return this}pipe(...n){return Dm(n)(this)}toPromise(n){return n=cE(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function cE(t){var e;return(e=t??Nn.Promise)!==null&&e!==void 0?e:Promise}function SR(t){return t&&ce(t.next)&&ce(t.error)&&ce(t.complete)}function MR(t){return t&&t instanceof oo||SR(t)&&Bu(t)}function Cm(t){return ce(t?.lift)}function ye(t){return e=>{if(Cm(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(t,e,n,i,r){return new Im(t,e,n,i,r)}var Im=class extends oo{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function gs(){return ye((t,e)=>{let n=null;t._refCount++;let i=pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var _s=class extends fe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Cm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ft;let n=this.getSubject();e.add(this.source.subscribe(pe(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ft.EMPTY)}return e}refCount(){return gs()(this)}};var uE=hs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=(()=>{class t extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new $u(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new uE}next(n){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?_m:(this.currentObservers=null,o.push(n),new ft(()=>{this.currentObservers=null,no(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new fe;return n.source=this,n}}return t.create=(e,n)=>new $u(e,n),t})(),$u=class extends Le{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:_m}};var pt=class extends Le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var El={now(){return(El.delegate||Date).now()},delegate:void 0};var Gu=class extends Le{constructor(e=1/0,n=1/0,i=El){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var Hu=class extends ft{constructor(e,n){super()}schedule(e,n=0){return this}};var Dl={setInterval(t,e,...n){let{delegate:i}=Dl;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Dl;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ys=class extends Hu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return Dl.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Dl.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,no(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var vs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};vs.now=El.now;var ws=class extends vs{constructor(e,n=vs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var bs=new ws(ys),Tm=bs;var zu=class extends ys{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var qu=class extends ws{};var Sm=new qu(zu);var Ct=new fe(t=>t.complete());function Wu(t){return t&&ce(t.schedule)}function Mm(t){return t[t.length-1]}function nr(t){return ce(Mm(t))?t.pop():void 0}function ei(t){return Wu(Mm(t))?t.pop():void 0}function dE(t,e){return typeof Mm(t)=="number"?t.pop():e}var Es=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ku(t){return ce(t?.then)}function Qu(t){return ce(t[ms])}function Yu(t){return Symbol.asyncIterator&&ce(t?.[Symbol.asyncIterator])}function Ju(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function AR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Zu=AR();function Xu(t){return ce(t?.[Zu])}function ed(t){return z1(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield Ru(n.read());if(r)return yield Ru(void 0);yield yield Ru(i)}}finally{n.releaseLock()}})}function td(t){return ce(t?.getReader)}function Oe(t){if(t instanceof fe)return t;if(t!=null){if(Qu(t))return xR(t);if(Es(t))return OR(t);if(Ku(t))return RR(t);if(Yu(t))return hE(t);if(Xu(t))return PR(t);if(td(t))return NR(t)}throw Ju(t)}function xR(t){return new fe(e=>{let n=t[ms]();if(ce(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function OR(t){return new fe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function RR(t){return new fe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ju)})}function PR(t){return new fe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function hE(t){return new fe(e=>{kR(t,e).catch(n=>e.error(n))})}function NR(t){return hE(ed(t))}function kR(t,e){var n,i,r,o;return H1(this,void 0,void 0,function*(){try{for(n=q1(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function rn(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function Jt(t,e=0){return ye((n,i)=>{n.subscribe(pe(i,r=>rn(i,t,()=>i.next(r),e),()=>rn(i,t,()=>i.complete(),e),r=>rn(i,t,()=>i.error(r),e)))})}function kn(t,e=0){return ye((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function fE(t,e){return Oe(t).pipe(kn(e),Jt(e))}function pE(t,e){return Oe(t).pipe(kn(e),Jt(e))}function mE(t,e){return new fe(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function gE(t,e){return new fe(n=>{let i;return rn(n,e,()=>{i=t[Zu](),rn(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>ce(i?.return)&&i.return()})}function nd(t,e){if(!t)throw new Error("Iterable cannot be null");return new fe(n=>{rn(n,e,()=>{let i=t[Symbol.asyncIterator]();rn(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function _E(t,e){return nd(ed(t),e)}function yE(t,e){if(t!=null){if(Qu(t))return fE(t,e);if(Es(t))return mE(t,e);if(Ku(t))return pE(t,e);if(Yu(t))return nd(t,e);if(Xu(t))return gE(t,e);if(td(t))return _E(t,e)}throw Ju(t)}function Me(t,e){return e?yE(t,e):Oe(t)}function te(...t){let e=ei(t);return Me(t,e)}function Ds(t,e){let n=ce(t)?t:()=>t,i=r=>r.error(n());return new fe(e?r=>e.schedule(i,0,r):i)}function Am(t){return!!t&&(t instanceof fe||ce(t.lift)&&ce(t.subscribe))}var Fn=hs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Cl(t,e){let n=typeof e=="object";return new Promise((i,r)=>{let o=!1,s;t.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):n?i(e.defaultValue):r(new Fn)}})})}function vE(t){return t instanceof Date&&!isNaN(t)}function J(t,e){return ye((n,i)=>{let r=0;n.subscribe(pe(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:FR}=Array;function VR(t,e){return FR(e)?t(...e):t(e)}function Cs(t){return J(e=>VR(t,e))}var{isArray:LR}=Array,{getPrototypeOf:BR,prototype:jR,keys:UR}=Object;function id(t){if(t.length===1){let e=t[0];if(LR(e))return{args:e,keys:null};if($R(e)){let n=UR(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function $R(t){return t&&typeof t=="object"&&BR(t)===jR}function rd(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function Il(...t){let e=ei(t),n=nr(t),{args:i,keys:r}=id(t);if(i.length===0)return Me([],e);let o=new fe(GR(i,e,r?s=>rd(r,s):Nt));return n?o.pipe(Cs(n)):o}function GR(t,e,n=Nt){return i=>{wE(e,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)wE(e,()=>{let u=Me(t[l],e),d=!1;u.subscribe(pe(i,f=>{o[l]=f,d||(d=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function wE(t,e,n){t?rn(n,t,e):e()}function bE(t,e,n,i,r,o,s,a){let l=[],u=0,d=0,f=!1,m=()=>{f&&!l.length&&!u&&e.complete()},_=T=>u<i?D(T):l.push(T),D=T=>{o&&e.next(T),u++;let M=!1;Oe(n(T,d++)).subscribe(pe(e,k=>{r?.(k),o?_(k):e.next(k)},()=>{M=!0},void 0,()=>{if(M)try{for(u--;l.length&&u<i;){let k=l.shift();s?rn(e,s,()=>D(k)):D(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(pe(e,_,()=>{f=!0,m()})),()=>{a?.()}}function at(t,e,n=1/0){return ce(e)?at((i,r)=>J((o,s)=>e(i,o,r,s))(Oe(t(i,r))),n):(typeof e=="number"&&(n=e),ye((i,r)=>bE(i,r,t,n)))}function Tl(t=1/0){return at(Nt,t)}function EE(){return Tl(1)}function ir(...t){return EE()(Me(t,ei(t)))}function od(t){return new fe(e=>{Oe(t()).subscribe(e)})}function xm(...t){let e=nr(t),{args:n,keys:i}=id(t),r=new fe(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let d=0;d<s;d++){let f=!1;Oe(n[d]).subscribe(pe(o,m=>{f||(f=!0,u--),a[d]=m},()=>l--,void 0,()=>{(!l||!f)&&(u||o.next(i?rd(i,a):a),o.complete())}))}});return e?r.pipe(Cs(e)):r}var HR=["addListener","removeListener"],zR=["addEventListener","removeEventListener"],qR=["on","off"];function En(t,e,n,i){if(ce(n)&&(i=n,n=void 0),i)return En(t,e,n).pipe(Cs(i));let[r,o]=QR(t)?zR.map(s=>a=>t[s](e,a,n)):WR(t)?HR.map(DE(t,e)):KR(t)?qR.map(DE(t,e)):[];if(!r&&Es(t))return at(s=>En(s,e,n))(Oe(t));if(!r)throw new TypeError("Invalid event target");return new fe(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function DE(t,e){return n=>i=>t[n](e,i)}function WR(t){return ce(t.addListener)&&ce(t.removeListener)}function KR(t){return ce(t.on)&&ce(t.off)}function QR(t){return ce(t.addEventListener)&&ce(t.removeEventListener)}function Om(t=0,e,n=Tm){let i=-1;return e!=null&&(Wu(e)?n=e:i=e),new fe(r=>{let o=vE(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function sd(...t){let e=ei(t),n=dE(t,1/0),i=t;return i.length?i.length===1?Oe(i[0]):Tl(n)(Me(i,e)):Ct}var{isArray:YR}=Array;function ad(t){return t.length===1&&YR(t[0])?t[0]:t}function it(t,e){return ye((n,i)=>{let r=0;n.subscribe(pe(i,o=>t.call(e,o,r++)&&i.next(o)))})}function Rm(...t){return t=ad(t),t.length===1?Oe(t[0]):new fe(JR(t))}function JR(t){return e=>{let n=[];for(let i=0;n&&!e.closed&&i<t.length;i++)n.push(Oe(t[i]).subscribe(pe(e,r=>{if(n){for(let o=0;o<n.length;o++)o!==i&&n[o].unsubscribe();n=null}e.next(r)})))}}function Sl(...t){let e=nr(t),n=ad(t);return n.length?new fe(i=>{let r=n.map(()=>[]),o=n.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<n.length;s++)Oe(n[s]).subscribe(pe(i,a=>{if(r[s].push(a),r.every(l=>l.length)){let l=r.map(u=>u.shift());i.next(e?e(...l):l),r.some((u,d)=>!u.length&&o[d])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):Ct}function rr(t){return ye((e,n)=>{let i=null,r=!1,o;i=e.subscribe(pe(n,void 0,void 0,s=>{o=Oe(t(s,rr(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function CE(t,e,n,i,r){return(o,s)=>{let a=n,l=e,u=0;o.subscribe(pe(s,d=>{let f=u++;l=a?t(l,d,f):(a=!0,d),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function or(t,e){return ce(e)?at(t,e,1):at(t,1)}function sr(t){return ye((e,n)=>{let i=!1;e.subscribe(pe(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function on(t){return t<=0?()=>Ct:ye((e,n)=>{let i=0;e.subscribe(pe(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function Pm(t){return J(()=>t)}function ld(t,e=Nt){return t=t??ZR,ye((n,i)=>{let r,o=!0;n.subscribe(pe(i,s=>{let a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function ZR(t,e){return t===e}function cd(t=XR){return ye((e,n)=>{let i=!1;e.subscribe(pe(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function XR(){return new Fn}function Nm(...t){return e=>ir(e,te(...t))}function Si(t){return ye((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Dn(t,e){let n=arguments.length>=2;return i=>i.pipe(t?it((r,o)=>t(r,o,i)):Nt,on(1),n?sr(e):cd(()=>new Fn))}function Is(t){return t<=0?()=>Ct:ye((e,n)=>{let i=[];e.subscribe(pe(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function km(t,e){let n=arguments.length>=2;return i=>i.pipe(t?it((r,o)=>t(r,o,i)):Nt,Is(1),n?sr(e):cd(()=>new Fn))}function Ml(){return ye((t,e)=>{let n,i=!1;t.subscribe(pe(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function so(t,e){return ye(CE(t,e,arguments.length>=2,!0))}function IE(t={}){let{connector:e=()=>new Le,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,l,u=0,d=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},_=()=>{m(),s=l=void 0,d=f=!1},D=()=>{let T=s;_(),T?.unsubscribe()};return ye((T,M)=>{u++,!f&&!d&&m();let k=l=l??e();M.add(()=>{u--,u===0&&!f&&!d&&(a=Fm(D,r))}),k.subscribe(M),!s&&u>0&&(s=new Ti({next:q=>k.next(q),error:q=>{f=!0,m(),a=Fm(_,n,q),k.error(q)},complete:()=>{d=!0,m(),a=Fm(_,i),k.complete()}}),Oe(T).subscribe(s))})(o)}}function Fm(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Ti({next:()=>{i.unsubscribe(),t()}});return Oe(e(...n)).subscribe(i)}function Ts(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,IE({connector:()=>new Gu(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function ar(...t){let e=ei(t);return ye((n,i)=>{(e?ir(t,n,e):ir(t,n)).subscribe(i)})}function Ge(t,e){return ye((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(pe(i,l=>{r?.unsubscribe();let u=0,d=o++;Oe(t(l,d)).subscribe(r=pe(i,f=>i.next(e?e(l,f,d,u++):f),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function ud(t,e){return ce(e)?Ge(()=>t,e):Ge(()=>t)}function zt(t){return ye((e,n)=>{Oe(t).subscribe(pe(n,()=>n.complete(),io)),!n.closed&&e.subscribe(n)})}function lt(t,e,n){let i=ce(t)||e||n?{next:t,error:e,complete:n}:t;return i?ye((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(pe(o,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),o.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):Nt}function dd(...t){let e=nr(t);return ye((n,i)=>{let r=t.length,o=new Array(r),s=t.map(()=>!1),a=!1;for(let l=0;l<r;l++)Oe(t[l]).subscribe(pe(i,u=>{o[l]=u,!a&&!s[l]&&(s[l]=!0,(a=s.every(Nt))&&(s=null))},io));n.subscribe(pe(i,l=>{if(a){let u=[l,...o];i.next(e?e(...u):u)}}))})}var lD="https://g.co/ng/security#xss",oe=class extends Error{constructor(e,n){super(Bd(e,n)),this.code=e}};function Bd(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function $l(t){return{toString:t}.toString()}var hd="__parameters__";function eP(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function cD(t,e,n){return $l(()=>{let i=eP(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,u,d){let f=l.hasOwnProperty(hd)?l[hd]:Object.defineProperty(l,hd,{value:[]})[hd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var Al=globalThis;function ze(t){for(let e in t)if(t[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function tP(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Xt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Xt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Zm(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var nP=ze({__forward_ref__:ze});function qt(t){return t.__forward_ref__=qt,t.toString=function(){return Xt(this())},t}function Zt(t){return uD(t)?t():t}function uD(t){return typeof t=="function"&&t.hasOwnProperty(nP)&&t.__forward_ref__===qt}function Z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ut(t){return{providers:t.providers||[],imports:t.imports||[]}}function jd(t){return TE(t,hD)||TE(t,fD)}function dD(t){return jd(t)!==null}function TE(t,e){return t.hasOwnProperty(e)?t[e]:null}function iP(t){let e=t&&(t[hD]||t[fD]);return e||null}function SE(t){return t&&(t.hasOwnProperty(ME)||t.hasOwnProperty(rP))?t[ME]:null}var hD=ze({\u0275prov:ze}),ME=ze({\u0275inj:ze}),fD=ze({ngInjectableDef:ze}),rP=ze({ngInjectorDef:ze}),K=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function pD(t){return t&&!!t.\u0275providers}var oP=ze({\u0275cmp:ze}),sP=ze({\u0275dir:ze}),aP=ze({\u0275pipe:ze}),lP=ze({\u0275mod:ze}),bd=ze({\u0275fac:ze}),xl=ze({__NG_ELEMENT_ID__:ze}),AE=ze({__NG_ENV_ID__:ze});function Rs(t){return typeof t=="string"?t:t==null?"":String(t)}function cP(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Rs(t)}function uP(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new oe(-200,t)}function Qg(t,e){throw new oe(-201,!1)}var De=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(De||{}),Xm;function mD(){return Xm}function Cn(t){let e=Xm;return Xm=t,e}function gD(t,e,n){let i=jd(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&De.Optional)return null;if(e!==void 0)return e;Qg(t,"Injector")}var dP={},Ol=dP,eg="__NG_DI_FLAG__",Ed="ngTempTokenPath",hP="ngTokenPath",fP=/\n/gm,pP="\u0275",xE="__source",xs;function mP(){return xs}function lr(t){let e=xs;return xs=t,e}function gP(t,e=De.Default){if(xs===void 0)throw new oe(-203,!1);return xs===null?gD(t,void 0,e):xs.get(t,e&De.Optional?null:void 0,e)}function $(t,e=De.Default){return(mD()||gP)(Zt(t),e)}function V(t,e=De.Default){return $(t,Ud(e))}function Ud(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function tg(t){let e=[];for(let n=0;n<t.length;n++){let i=Zt(t[n]);if(Array.isArray(i)){if(i.length===0)throw new oe(900,!1);let r,o=De.Default;for(let s=0;s<i.length;s++){let a=i[s],l=_P(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push($(r,o))}else e.push($(i))}return e}function _D(t,e){return t[eg]=e,t.prototype[eg]=e,t}function _P(t){return t[eg]}function yP(t,e,n,i){let r=t[Ed];throw e[xE]&&r.unshift(e[xE]),t.message=vP(`
`+t.message,r,n,i),t[hP]=r,t[Ed]=null,t}function vP(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==pP?t.slice(2):t;let r=Xt(e);if(Array.isArray(e))r=e.map(Xt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Xt(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(fP,`
  `)}`}var Pi=_D(cD("Optional"),8);var Yg=_D(cD("SkipSelf"),4);function Ps(t,e){let n=t.hasOwnProperty(bd);return n?t[bd]:null}function wP(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function bP(t){return t.flat(Number.POSITIVE_INFINITY)}function Jg(t,e){t.forEach(n=>Array.isArray(n)?Jg(n,e):e(n))}function yD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Dd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function EP(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function DP(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function Zg(t,e,n){let i=Gl(t,e);return i>=0?t[i|1]=n:(i=~i,DP(t,i,e,n)),i}function Vm(t,e){let n=Gl(t,e);if(n>=0)return t[n|1]}function Gl(t,e){return CP(t,e,1)}function CP(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var Ns={},sn=[],ks=new K(""),vD=new K("",-1),wD=new K(""),Cd=class{get(e,n=Ol){if(n===Ol){let i=new Error(`NullInjectorError: No provider for ${Xt(e)}!`);throw i.name="NullInjectorError",i}return n}},bD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(bD||{}),ii=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ii||{}),It=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(It||{});function IP(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function ng(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];SP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function TP(t){return t===3||t===4||t===6}function SP(t){return t.charCodeAt(0)===64}function Rl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?OE(t,n,r,null,e[++i]):OE(t,n,r,null,null))}}return t}function OE(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var ED="ng-template";function MP(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&IP(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(Xg(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Xg(t){return t.type===4&&t.value!==ED}function AP(t,e,n){let i=t.type===4&&!n?ED:t.value;return e===i}function xP(t,e,n){let i=4,r=t.attrs,o=r!==null?PP(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Vn(i)&&!Vn(l))return!1;if(s&&Vn(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!AP(t,l,n)||l===""&&e.length===1){if(Vn(i))return!1;s=!0}}else if(i&8){if(r===null||!MP(t,r,l,n)){if(Vn(i))return!1;s=!0}}else{let u=e[++a],d=OP(l,r,Xg(t),n);if(d===-1){if(Vn(i))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=r[d+1].toLowerCase(),i&2&&u!==f){if(Vn(i))return!1;s=!0}}}}return Vn(i)||s}function Vn(t){return(t&1)===0}function OP(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return NP(e,t)}function DD(t,e,n=!1){for(let i=0;i<e.length;i++)if(xP(t,e[i],n))return!0;return!1}function RP(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function PP(t){for(let e=0;e<t.length;e++){let n=t[e];if(TP(n))return e}return t.length}function NP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function kP(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function RE(t,e){return t?":not("+e.trim()+")":e}function FP(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Vn(s)&&(e+=RE(o,r),r=""),i=s,o=o||!Vn(i);n++}return r!==""&&(e+=RE(o,r)),e}function VP(t){return t.map(FP).join(",")}function LP(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!Vn(r))break;r=o}i++}return{attrs:e,classes:n}}function Ae(t){return $l(()=>{let e=MD(t),n=ke(Y({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===bD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ii.Emulated,styles:t.styles||sn,_:null,schemas:t.schemas||null,tView:null,id:""});AD(n);let i=t.dependencies;return n.directiveDefs=NE(i,!1),n.pipeDefs=NE(i,!0),n.id=UP(n),n})}function BP(t){return ur(t)||CD(t)}function jP(t){return t!==null}function dt(t){return $l(()=>({type:t.type,bootstrap:t.bootstrap||sn,declarations:t.declarations||sn,imports:t.imports||sn,exports:t.exports||sn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function PE(t,e){if(t==null)return Ns;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a=It.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(n[o]=a!==It.None?[i,a]:i,e[o]=s):n[o]=i}return n}function Ue(t){return $l(()=>{let e=MD(t);return AD(e),e})}function ur(t){return t[oP]||null}function CD(t){return t[sP]||null}function ID(t){return t[aP]||null}function TD(t){let e=ur(t)||CD(t)||ID(t);return e!==null?e.standalone:!1}function SD(t,e){let n=t[lP]||null;if(!n&&e===!0)throw new Error(`Type ${Xt(t)} does not have '\u0275mod' property.`);return n}function MD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ns,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||sn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:PE(t.inputs,e),outputs:PE(t.outputs),debugInfo:null}}function AD(t){t.features?.forEach(e=>e(t))}function NE(t,e){if(!t)return null;let n=e?ID:BP;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(jP)}function UP(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function _o(t){return{\u0275providers:t}}function e_(...t){return{\u0275providers:xD(!0,t),\u0275fromNgModule:!0}}function xD(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return Jg(e,s=>{let a=s;ig(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&OD(r,o),n}function OD(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];t_(r,o=>{e(o,i)})}}function ig(t,e,n,i){if(t=Zt(t),!t)return!1;let r=null,o=SE(t),s=!o&&ur(t);if(!o&&!s){let l=t.ngModule;if(o=SE(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)ig(u,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{Jg(o.imports,d=>{ig(d,e,n,i)&&(u||=[],u.push(d))})}finally{}u!==void 0&&OD(u,e)}if(!a){let u=Ps(r)||(()=>new r);e({provide:r,useFactory:u,deps:sn},r),e({provide:wD,useValue:r,multi:!0},r),e({provide:ks,useValue:()=>$(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=t;t_(l,d=>{e(d,u)})}}else return!1;return r!==t&&t.providers!==void 0}function t_(t,e){for(let n of t)pD(n)&&(n=n.\u0275providers),Array.isArray(n)?t_(n,e):e(n)}var $P=ze({provide:String,useValue:ze});function RD(t){return t!==null&&typeof t=="object"&&$P in t}function GP(t){return!!(t&&t.useExisting)}function HP(t){return!!(t&&t.useFactory)}function Fs(t){return typeof t=="function"}function zP(t){return!!t.useClass}var $d=new K(""),md={},qP={},Lm;function Gd(){return Lm===void 0&&(Lm=new Cd),Lm}var kt=class{},Pl=class extends kt{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,og(e,s=>this.processProvider(s)),this.records.set(vD,Ss(void 0,this)),r.has("environment")&&this.records.set(kt,Ss(void 0,this));let o=this.records.get($d);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(wD,sn,De.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ve(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ve(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=lr(this),i=Cn(void 0),r;try{return e()}finally{lr(n),Cn(i)}}get(e,n=Ol,i=De.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(AE))return e[AE](this);i=Ud(i);let r,o=lr(this),s=Cn(void 0);try{if(!(i&De.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=JP(e)&&jd(e);u&&this.injectableDefInScope(u)?l=Ss(rg(e),md):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&De.Self?Gd():this.parent;return n=i&De.Optional&&n===Ol?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ed]=a[Ed]||[]).unshift(Xt(e)),o)throw a;return yP(a,e,"R3InjectorError",this.source)}else throw a}finally{Cn(s),lr(o)}}resolveInjectorInitializers(){let e=Ve(null),n=lr(this),i=Cn(void 0),r;try{let o=this.get(ks,sn,De.Self);for(let s of o)s()}finally{lr(n),Cn(i),Ve(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Xt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(e){e=Zt(e);let n=Fs(e)?e:Zt(e&&e.provide),i=KP(e);if(!Fs(e)&&e.multi===!0){let r=this.records.get(n);r||(r=Ss(void 0,md,!0),r.factory=()=>tg(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Ve(null);try{return n.value===md&&(n.value=qP,n.value=n.factory()),typeof n.value=="object"&&n.value&&YP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ve(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Zt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function rg(t){let e=jd(t),n=e!==null?e.factory:Ps(t);if(n!==null)return n;if(t instanceof K)throw new oe(204,!1);if(t instanceof Function)return WP(t);throw new oe(204,!1)}function WP(t){if(t.length>0)throw new oe(204,!1);let n=iP(t);return n!==null?()=>n.factory(t):()=>new t}function KP(t){if(RD(t))return Ss(void 0,t.useValue);{let e=PD(t);return Ss(e,md)}}function PD(t,e,n){let i;if(Fs(t)){let r=Zt(t);return Ps(r)||rg(r)}else if(RD(t))i=()=>Zt(t.useValue);else if(HP(t))i=()=>t.useFactory(...tg(t.deps||[]));else if(GP(t))i=()=>$(Zt(t.useExisting));else{let r=Zt(t&&(t.useClass||t.provide));if(QP(t))i=()=>new r(...tg(t.deps));else return Ps(r)||rg(r)}return i}function Ss(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function QP(t){return!!t.deps}function YP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function JP(t){return typeof t=="function"||typeof t=="object"&&t instanceof K}function og(t,e){for(let n of t)Array.isArray(n)?og(n,e):n&&pD(n)?og(n.\u0275providers,e):e(n)}function Ni(t,e){t instanceof Pl&&t.assertNotDestroyed();let n,i=lr(t),r=Cn(void 0);try{return e()}finally{lr(i),Cn(r)}}function ZP(){return mD()!==void 0||mP()!=null}function XP(t){return typeof t=="function"}var ki=0,Ee=1,me=2,Ft=3,Bn=4,mn=5,Nl=6,kl=7,jn=8,Vs=9,Un=10,ct=11,Fl=12,kE=13,$s=14,$n=15,Hl=16,Ms=17,Mi=18,Hd=19,ND=20,cr=21,Bm=22,co=23,Gn=25,kD=1;var uo=7,Id=8,Ls=9,pn=10,n_=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(n_||{});function ao(t){return Array.isArray(t)&&typeof t[kD]=="object"}function Fi(t){return Array.isArray(t)&&t[kD]===!0}function i_(t){return(t.flags&4)!==0}function zd(t){return t.componentOffset>-1}function qd(t){return(t.flags&1)===1}function dr(t){return!!t.template}function eN(t){return(t[me]&512)!==0}var sg=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function FD(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function an(){return VD}function VD(t){return t.type.prototype.ngOnChanges&&(t.setInput=nN),tN}an.ngInherit=!0;function tN(){let t=BD(this),e=t?.current;if(e){let n=t.previous;if(n===Ns)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function nN(t,e,n,i,r){let o=this.declaredInputs[i],s=BD(t)||iN(t,{previous:Ns,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new sg(u&&u.currentValue,n,l===Ns),FD(t,e,r,n)}var LD="__ngSimpleChanges__";function BD(t){return t[LD]||null}function iN(t,e){return t[LD]=e}var FE=null;var ti=function(t,e,n){FE?.(t,e,n)},rN="svg",oN="math",sN=!1;function aN(){return sN}function ri(t){for(;Array.isArray(t);)t=t[ki];return t}function jD(t,e){return ri(e[t])}function In(t,e){return ri(e[t.index])}function UD(t,e){return t.data[e]}function lN(t,e){return t[e]}function pr(t,e){let n=e[t];return ao(n)?n:n[ki]}function cN(t){return(t[me]&4)===4}function r_(t){return(t[me]&128)===128}function uN(t){return Fi(t[Ft])}function Bs(t,e){return e==null?null:t[e]}function $D(t){t[Ms]=0}function dN(t){t[me]&1024||(t[me]|=1024,r_(t)&&Vl(t))}function hN(t,e){for(;t>0;)e=e[$s],t--;return e}function o_(t){return!!(t[me]&9216||t[co]?.dirty)}function ag(t){t[Un].changeDetectionScheduler?.notify(1),o_(t)?Vl(t):t[me]&64&&(aN()?(t[me]|=1024,Vl(t)):t[Un].changeDetectionScheduler?.notify())}function Vl(t){t[Un].changeDetectionScheduler?.notify();let e=Ll(t);for(;e!==null&&!(e[me]&8192||(e[me]|=8192,!r_(e)));)e=Ll(e)}function GD(t,e){if((t[me]&256)===256)throw new oe(911,!1);t[cr]===null&&(t[cr]=[]),t[cr].push(e)}function fN(t,e){if(t[cr]===null)return;let n=t[cr].indexOf(e);n!==-1&&t[cr].splice(n,1)}function Ll(t){let e=t[Ft];return Fi(e)?e[Ft]:e}var be={lFrame:YD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function pN(){return be.lFrame.elementDepthCount}function mN(){be.lFrame.elementDepthCount++}function gN(){be.lFrame.elementDepthCount--}function HD(){return be.bindingsEnabled}function zD(){return be.skipHydrationRootTNode!==null}function _N(t){return be.skipHydrationRootTNode===t}function yN(){be.skipHydrationRootTNode=null}function Te(){return be.lFrame.lView}function Tt(){return be.lFrame.tView}function ue(t){return be.lFrame.contextLView=t,t[jn]}function de(t){return be.lFrame.contextLView=null,t}function ln(){let t=qD();for(;t!==null&&t.type===64;)t=t.parent;return t}function qD(){return be.lFrame.currentTNode}function vN(){let t=be.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function yo(t,e){let n=be.lFrame;n.currentTNode=t,n.isParent=e}function s_(){return be.lFrame.isParent}function a_(){be.lFrame.isParent=!1}function wN(){return be.lFrame.contextLView}function l_(){let t=be.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function bN(){return be.lFrame.bindingIndex}function EN(t){return be.lFrame.bindingIndex=t}function Wd(){return be.lFrame.bindingIndex++}function c_(t){let e=be.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function DN(){return be.lFrame.inI18n}function CN(t,e){let n=be.lFrame;n.bindingIndex=n.bindingRootIndex=t,lg(e)}function IN(){return be.lFrame.currentDirectiveIndex}function lg(t){be.lFrame.currentDirectiveIndex=t}function TN(t){let e=be.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function WD(){return be.lFrame.currentQueryIndex}function u_(t){be.lFrame.currentQueryIndex=t}function SN(t){let e=t[Ee];return e.type===2?e.declTNode:e.type===1?t[mn]:null}function KD(t,e,n){if(n&De.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&De.Host);)if(r=SN(o),r===null||(o=o[$s],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=be.lFrame=QD();return i.currentTNode=e,i.lView=t,!0}function d_(t){let e=QD(),n=t[Ee];be.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function QD(){let t=be.lFrame,e=t===null?null:t.child;return e===null?YD(t):e}function YD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function JD(){let t=be.lFrame;return be.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ZD=JD;function h_(){let t=JD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function MN(t){return(be.lFrame.contextLView=hN(t,be.lFrame.contextLView))[jn]}function mr(){return be.lFrame.selectedIndex}function ho(t){be.lFrame.selectedIndex=t}function f_(){let t=be.lFrame;return UD(t.tView,t.selectedIndex)}function AN(){return be.lFrame.currentNamespace}var XD=!0;function Kd(){return XD}function Qd(t){XD=t}function xN(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=VD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Yd(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function gd(t,e,n){eC(t,e,3,n)}function _d(t,e,n,i){(t[me]&3)===n&&eC(t,e,n,i)}function jm(t,e){let n=t[me];(n&3)===e&&(n&=16383,n+=1,t[me]=n)}function eC(t,e,n,i){let r=i!==void 0?t[Ms]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(t[Ms]+=65536),(a<o||o==-1)&&(ON(t,n,e,l),t[Ms]=(t[Ms]&4294901760)+l+2),l++}function VE(t,e){ti(4,t,e);let n=Ve(null);try{e.call(t)}finally{Ve(n),ti(5,t,e)}}function ON(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[me]>>14<t[Ms]>>16&&(t[me]&3)===e&&(t[me]+=16384,VE(a,o)):VE(a,o)}var Os=-1,fo=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function RN(t){return t instanceof fo}function PN(t){return(t.flags&8)!==0}function NN(t){return(t.flags&16)!==0}function tC(t){return t!==Os}function Td(t){return t&32767}function kN(t){return t>>16}function Sd(t,e){let n=kN(t),i=e;for(;n>0;)i=i[$s],n--;return i}var cg=!0;function LE(t){let e=cg;return cg=t,e}var FN=256,nC=FN-1,iC=5,VN=0,ni={};function LN(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(xl)&&(i=n[xl]),i==null&&(i=n[xl]=VN++);let r=i&nC,o=1<<r;e.data[t+(r>>iC)]|=o}function Md(t,e){let n=rC(t,e);if(n!==-1)return n;let i=e[Ee];i.firstCreatePass&&(t.injectorIndex=e.length,Um(i.data,t),Um(e,null),Um(i.blueprint,null));let r=p_(t,e),o=t.injectorIndex;if(tC(r)){let s=Td(r),a=Sd(r,e),l=a[Ee].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=r,o}function Um(t,e){t.push(0,0,0,0,0,0,0,0,e)}function rC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function p_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=cC(r),i===null)return Os;if(n++,r=r[$s],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Os}function ug(t,e,n){LN(t,e,n)}function oC(t,e,n){if(n&De.Optional||t!==void 0)return t;Qg(e,"NodeInjector")}function sC(t,e,n,i){if(n&De.Optional&&i===void 0&&(i=null),!(n&(De.Self|De.Host))){let r=t[Vs],o=Cn(void 0);try{return r?r.get(e,i,n&De.Optional):gD(e,i,n&De.Optional)}finally{Cn(o)}}return oC(i,e,n)}function aC(t,e,n,i=De.Default,r){if(t!==null){if(e[me]&2048&&!(i&De.Self)){let s=$N(t,e,n,i,ni);if(s!==ni)return s}let o=lC(t,e,n,i,ni);if(o!==ni)return o}return sC(e,n,i,r)}function lC(t,e,n,i,r){let o=jN(n);if(typeof o=="function"){if(!KD(e,t,i))return i&De.Host?oC(r,n,i):sC(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&De.Optional))Qg(n);else return s}finally{ZD()}}else if(typeof o=="number"){let s=null,a=rC(t,e),l=Os,u=i&De.Host?e[$n][mn]:null;for((a===-1||i&De.SkipSelf)&&(l=a===-1?p_(t,e):e[a+8],l===Os||!jE(i,!1)?a=-1:(s=e[Ee],a=Td(l),e=Sd(l,e)));a!==-1;){let d=e[Ee];if(BE(o,a,d.data)){let f=BN(a,e,n,s,i,u);if(f!==ni)return f}l=e[a+8],l!==Os&&jE(i,e[Ee].data[a+8]===u)&&BE(o,a,e)?(s=d,a=Td(l),e=Sd(l,e)):a=-1}}return r}function BN(t,e,n,i,r,o){let s=e[Ee],a=s.data[t+8],l=i==null?zd(a)&&cg:i!=s&&(a.type&3)!==0,u=r&De.Host&&o===a,d=yd(a,s,n,l,u);return d!==null?po(e,s,d,a):ni}function yd(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,u=t.directiveEnd,d=o>>20,f=i?a:a+d,m=r?a+d:u;for(let _=f;_<m;_++){let D=s[_];if(_<l&&n===D||_>=l&&D.type===n)return _}if(r){let _=s[l];if(_&&dr(_)&&_.type===n)return l}return null}function po(t,e,n,i){let r=t[n],o=e.data;if(RN(r)){let s=r;s.resolving&&uP(cP(o[n]));let a=LE(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Cn(s.injectImpl):null,d=KD(t,i,De.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&xN(n,o[n],e)}finally{u!==null&&Cn(u),LE(a),s.resolving=!1,ZD()}}return r}function jN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(xl)?t[xl]:void 0;return typeof e=="number"?e>=0?e&nC:UN:e}function BE(t,e,n){let i=1<<t;return!!(n[e+(t>>iC)]&i)}function jE(t,e){return!(t&De.Self)&&!(t&De.Host&&e)}var lo=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return aC(this._tNode,this._lView,e,Ud(i),n)}};function UN(){return new lo(ln(),Te())}function gn(t){return $l(()=>{let e=t.prototype.constructor,n=e[bd]||dg(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[bd]||dg(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function dg(t){return uD(t)?()=>{let e=dg(Zt(t));return e&&e()}:Ps(t)}function $N(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[me]&2048&&!(s[me]&512);){let a=lC(o,s,n,i|De.Self,ni);if(a!==ni)return a;let l=o.parent;if(!l){let u=s[ND];if(u){let d=u.get(n,ni,i);if(d!==ni)return d}l=cC(s),s=s[$s]}o=l}return r}function cC(t){let e=t[Ee],n=e.type;return n===2?e.declTNode:n===1?t[mn]:null}function UE(t,e=null,n=null,i){let r=uC(t,e,n,i);return r.resolveInjectorInitializers(),r}function uC(t,e=null,n=null,i,r=new Set){let o=[n||sn,e_(t)];return i=i||(typeof t=="object"?void 0:Xt(t)),new Pl(o,e||Gd(),i||null,r)}var Hn=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return UE({name:""},r,i,"");{let o=i.name??"";return UE({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=Ol,e.NULL=new Cd,e.\u0275prov=Z({token:e,providedIn:"any",factory:()=>$(vD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var GN="ngOriginalError";function $m(t){return t[GN]}var Ai=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&$m(e);for(;n&&$m(n);)n=$m(n);return n||null}},dC=new K("",{providedIn:"root",factory:()=>V(Ai).handleError.bind(void 0)}),m_=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=HN,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),hg=class extends m_{constructor(e){super(),this._lView=e}onDestroy(e){return GD(this._lView,e),()=>fN(this._lView,e)}};function HN(){return new hg(Te())}function zN(){return Gs(ln(),Te())}function Gs(t,e){return new Vt(In(t,e))}var Vt=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=zN;let t=e;return t})();function qN(t){return t instanceof Vt?t.nativeElement:t}var fg=class extends Le{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,ZP()&&(this.destroyRef=V(m_,{optional:!0})??void 0)}emit(e){let n=Ve(null);try{super.next(e)}finally{Ve(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Gm(o),r&&(r=Gm(r)),s&&(s=Gm(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof ft&&e.add(a),a}};function Gm(t){return e=>{setTimeout(t,void 0,e)}}var ge=fg;function WN(){return this._results[Symbol.iterator]()}var pg=class t{get changes(){return this._changes??=new ge}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=WN)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=bP(e);(this._changesDetected=!wP(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function hC(t){return(t.flags&128)===128}var fC=new Map,KN=0;function QN(){return KN++}function YN(t){fC.set(t[Hd],t)}function JN(t){fC.delete(t[Hd])}var $E="__ngContext__";function hr(t,e){ao(e)?(t[$E]=e[Hd],YN(e)):t[$E]=e}function pC(t){return gC(t[Fl])}function mC(t){return gC(t[Bn])}function gC(t){for(;t!==null&&!Fi(t);)t=t[Bn];return t}var mg;function _C(t){mg=t}function ZN(){if(mg!==void 0)return mg;if(typeof document<"u")return document;throw new oe(210,!1)}var g_=new K("",{providedIn:"root",factory:()=>XN}),XN="ng",__=new K(""),Lt=new K("",{providedIn:"platform",factory:()=>"unknown"});var y_=new K("",{providedIn:"root",factory:()=>ZN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ek="h",tk="b";var nk=()=>null;function v_(t,e,n=!1){return nk(t,e,n)}var yC=!1,ik=new K("",{providedIn:"root",factory:()=>yC});var Ad=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lD})`}};function zl(t){return t instanceof Ad?t.changingThisBreaksApplicationSecurity:t}function vC(t,e){let n=rk(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${lD})`)}return n===e}function rk(t){return t instanceof Ad&&t.getTypeName()||null}var ok=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wC(t){return t=String(t),t.match(ok)?t:"unsafe:"+t}var w_=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(w_||{});function bC(t){let e=sk();return e?e.sanitize(w_.URL,t)||"":vC(t,"URL")?zl(t):wC(Rs(t))}function sk(){let t=Te();return t&&t[Un].sanitizer}var ak=/^>|^->|<!--|-->|--!>|<!-$/g,lk=/(<|>)/g,ck="\u200B$1\u200B";function uk(t){return t.replace(ak,e=>e.replace(lk,ck))}function EC(t){return t instanceof Function?t():t}var oi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(oi||{}),dk;function b_(t,e){return dk(t,e)}function As(t,e,n,i,r){if(i!=null){let o,s=!1;Fi(i)?o=i:ao(i)&&(s=!0,i=i[ki]);let a=ri(i);t===0&&n!==null?r==null?MC(e,n,a):xd(e,n,a,r||null,!0):t===1&&n!==null?xd(e,n,a,r||null,!0):t===2?Sk(e,a,s):t===3&&e.destroyNode(a),o!=null&&Ak(e,t,o,n,r)}}function hk(t,e){return t.createText(e)}function fk(t,e,n){t.setValue(e,n)}function pk(t,e){return t.createComment(uk(e))}function DC(t,e,n){return t.createElement(e,n)}function mk(t,e){CC(t,e),e[ki]=null,e[mn]=null}function gk(t,e,n,i,r,o){i[ki]=r,i[mn]=e,Zd(t,i,n,1,r,o)}function CC(t,e){e[Un].changeDetectionScheduler?.notify(1),Zd(t,e,e[ct],2,null,null)}function _k(t){let e=t[Fl];if(!e)return Hm(t[Ee],t);for(;e;){let n=null;if(ao(e))n=e[Fl];else{let i=e[pn];i&&(n=i)}if(!n){for(;e&&!e[Bn]&&e!==t;)ao(e)&&Hm(e[Ee],e),e=e[Ft];e===null&&(e=t),ao(e)&&Hm(e[Ee],e),n=e&&e[Bn]}e=n}}function yk(t,e,n,i){let r=pn+i,o=n.length;i>0&&(n[r-1][Bn]=e),i<o-pn?(e[Bn]=n[r],yD(n,pn+i,e)):(n.push(e),e[Bn]=null),e[Ft]=n;let s=e[Hl];s!==null&&n!==s&&vk(s,e);let a=e[Mi];a!==null&&a.insertView(t),ag(e),e[me]|=128}function vk(t,e){let n=t[Ls],r=e[Ft][Ft][$n];e[$n]!==r&&(t[me]|=n_.HasTransplantedViews),n===null?t[Ls]=[e]:n.push(e)}function IC(t,e){let n=t[Ls],i=n.indexOf(e);n.splice(i,1)}function gg(t,e){if(t.length<=pn)return;let n=pn+e,i=t[n];if(i){let r=i[Hl];r!==null&&r!==t&&IC(r,i),e>0&&(t[n-1][Bn]=i[Bn]);let o=Dd(t,pn+e);mk(i[Ee],i);let s=o[Mi];s!==null&&s.detachView(o[Ee]),i[Ft]=null,i[Bn]=null,i[me]&=-129}return i}function TC(t,e){if(!(e[me]&256)){let n=e[ct];n.destroyNode&&Zd(t,e,n,3,null,null),_k(e)}}function Hm(t,e){if(e[me]&256)return;let n=Ve(null);try{e[me]&=-129,e[me]|=256,e[co]&&nE(e[co]),bk(t,e),wk(t,e),e[Ee].type===1&&e[ct].destroy();let i=e[Hl];if(i!==null&&Fi(e[Ft])){i!==e[Ft]&&IC(i,e);let r=e[Mi];r!==null&&r.detachView(t)}JN(e)}finally{Ve(n)}}function wk(t,e){let n=t.cleanup,i=e[kl];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(e[kl]=null);let r=e[cr];if(r!==null){e[cr]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function bk(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof fo)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];ti(4,a,l);try{l.call(a)}finally{ti(5,a,l)}}else{ti(4,r,o);try{o.call(r)}finally{ti(5,r,o)}}}}}function SC(t,e,n){return Ek(t,e.parent,n)}function Ek(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[ki];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===ii.None||o===ii.Emulated)return null}return In(i,n)}}function xd(t,e,n,i,r){t.insertBefore(e,n,i,r)}function MC(t,e,n){t.appendChild(e,n)}function GE(t,e,n,i,r){i!==null?xd(t,e,n,i,r):MC(t,e,n)}function Dk(t,e,n,i){t.removeChild(e,n,i)}function E_(t,e){return t.parentNode(e)}function Ck(t,e){return t.nextSibling(e)}function AC(t,e,n){return Tk(t,e,n)}function Ik(t,e,n){return t.type&40?In(t,n):null}var Tk=Ik,HE;function Jd(t,e,n,i){let r=SC(t,i,e),o=e[ct],s=i.parent||e[mn],a=AC(s,i,e);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)GE(o,r,n[l],a,!1);else GE(o,r,n,a,!1);HE!==void 0&&HE(o,i,e,n,r)}function vd(t,e){if(e!==null){let n=e.type;if(n&3)return In(e,t);if(n&4)return _g(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return vd(t,i);{let r=t[e.index];return Fi(r)?_g(-1,r):ri(r)}}else{if(n&32)return b_(e,t)()||ri(t[e.index]);{let i=xC(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Ll(t[$n]);return vd(r,i)}else return vd(t,e.next)}}}return null}function xC(t,e){if(e!==null){let i=t[$n][mn],r=e.projection;return i.projection[r]}return null}function _g(t,e){let n=pn+t+1;if(n<e.length){let i=e[n],r=i[Ee].firstChild;if(r!==null)return vd(i,r)}return e[uo]}function Sk(t,e,n){let i=E_(t,e);i&&Dk(t,i,e,n)}function D_(t,e,n,i,r,o,s){for(;n!=null;){let a=i[n.index],l=n.type;if(s&&e===0&&(a&&hr(ri(a),i),n.flags|=2),(n.flags&32)!==32)if(l&8)D_(t,e,n.child,i,r,o,!1),As(e,t,r,a,o);else if(l&32){let u=b_(n,i),d;for(;d=u();)As(e,t,r,d,o);As(e,t,r,a,o)}else l&16?OC(t,e,i,n,r,o):As(e,t,r,a,o);n=s?n.projectionNext:n.next}}function Zd(t,e,n,i,r,o){D_(n,i,t.firstChild,e,r,o,!1)}function Mk(t,e,n){let i=e[ct],r=SC(t,n,e),o=n.parent||e[mn],s=AC(o,n,e);OC(i,0,e,n,r,s)}function OC(t,e,n,i,r,o){let s=n[$n],l=s[mn].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let d=l[u];As(e,t,r,d,o)}else{let u=l,d=s[Ft];hC(i)&&(u.flags|=128),D_(t,e,u,d,r,o,!0)}}function Ak(t,e,n,i,r){let o=n[uo],s=ri(n);o!==s&&As(e,t,i,o,r);for(let a=pn;a<n.length;a++){let l=n[a];Zd(l[Ee],l,t,e,i,o)}}function xk(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:oi.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=oi.Important),t.setStyle(n,i,r,o))}}function Ok(t,e,n){t.setAttribute(e,"style",n)}function RC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function PC(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&ng(t,e,i),r!==null&&RC(t,e,r),o!==null&&Ok(t,e,o)}var Tn={};function U(t=1){NC(Tt(),Te(),mr()+t,!1)}function NC(t,e,n,i){if(!i)if((e[me]&3)===3){let o=t.preOrderCheckHooks;o!==null&&gd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&_d(e,o,0,n)}ho(n)}function se(t,e=De.Default){let n=Te();if(n===null)return $(t,e);let i=ln();return aC(i,n,Zt(t),e)}function kC(t,e,n,i,r,o){let s=Ve(null);try{let a=null;r&It.SignalBased&&(a=e[i][fm]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&It.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,i):FD(e,a,i,o)}finally{Ve(s)}}function Rk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)ho(~r);else{let o=r,s=n[++i],a=n[++i];CN(s,o);let l=e[o];a(2,l)}}}finally{ho(-1)}}function Xd(t,e,n,i,r,o,s,a,l,u,d){let f=e.blueprint.slice();return f[ki]=r,f[me]=i|4|128|8|64,(u!==null||t&&t[me]&2048)&&(f[me]|=2048),$D(f),f[Ft]=f[$s]=t,f[jn]=n,f[Un]=s||t&&t[Un],f[ct]=a||t&&t[ct],f[Vs]=l||t&&t[Vs]||null,f[mn]=o,f[Hd]=QN(),f[Nl]=d,f[ND]=u,f[$n]=e.type==2?t[$n]:f,f}function Hs(t,e,n,i,r){let o=t.data[e];if(o===null)o=Pk(t,e,n,i,r),DN()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=vN();o.injectorIndex=s===null?-1:s.injectorIndex}return yo(o,!0),o}function Pk(t,e,n,i,r){let o=qD(),s=s_(),a=s?o:o&&o.parent,l=t.data[e]=Bk(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function FC(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function VC(t,e,n,i,r){let o=mr(),s=i&2;try{ho(-1),s&&e.length>Gn&&NC(t,e,Gn,!1),ti(s?2:0,r),n(i,r)}finally{ho(o),ti(s?3:1,r)}}function C_(t,e,n){if(i_(e)){let i=Ve(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{Ve(i)}}}function I_(t,e,n){HD()&&(zk(t,e,n,In(n,e)),(n.flags&64)===64&&UC(t,e,n))}function T_(t,e,n=In){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function LC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=S_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function S_(t,e,n,i,r,o,s,a,l,u,d){let f=Gn+i,m=f+r,_=Nk(f,m),D=typeof u=="function"?u():u;return _[Ee]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:D,incompleteFirstPass:!1,ssrId:d}}function Nk(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Tn);return n}function kk(t,e,n,i){let o=i.get(ik,yC)||n===ii.ShadowDom,s=t.selectRootElement(e,o);return Fk(s),s}function Fk(t){Vk(t)}var Vk=()=>null;function Lk(t,e,n,i){let r=HC(e);r.push(n),t.firstCreatePass&&zC(t).push(i,r.length-1)}function Bk(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return zD()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function zE(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let a,l=It.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}t===0?qE(i,n,u,a,l):qE(i,n,u,a)}return i}function qE(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function jk(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,s=e.attrs,a=[],l=null,u=null;for(let d=i;d<r;d++){let f=o[d],m=n?n.get(f):null,_=m?m.inputs:null,D=m?m.outputs:null;l=zE(0,f.inputs,d,l,_),u=zE(1,f.outputs,d,u,D);let T=l!==null&&s!==null&&!Xg(e)?nF(l,d,s):null;a.push(T)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function Uk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function BC(t,e,n,i,r,o,s,a){let l=In(e,n),u=e.inputs,d;!a&&u!=null&&(d=u[i])?(A_(t,n,d,i,r),zd(e)&&$k(n,e.index)):e.type&3?(i=Uk(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(l,i,r)):e.type&12}function $k(t,e){let n=pr(e,t);n[me]&16||(n[me]|=64)}function M_(t,e,n,i){if(HD()){let r=i===null?null:{"":-1},o=Wk(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&jC(t,e,n,s,r,a),r&&Kk(n,i,r)}n.mergedAttrs=Rl(n.mergedAttrs,n.attrs)}function jC(t,e,n,i,r,o){for(let u=0;u<i.length;u++)ug(Md(n,e),t,i[u].type);Yk(n,t.data.length,i.length);for(let u=0;u<i.length;u++){let d=i[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,l=FC(t,e,i.length,null);for(let u=0;u<i.length;u++){let d=i[u];n.mergedAttrs=Rl(n.mergedAttrs,d.hostAttrs),Jk(t,n,e,l,d),Qk(l,d,r),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}jk(t,n,o)}function Gk(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Hk(s)!=a&&s.push(a),s.push(n,i,o)}}function Hk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function zk(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;zd(n)&&Zk(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Md(n,e),hr(i,e);let s=n.initialInputs;for(let a=r;a<o;a++){let l=t.data[a],u=po(e,t,a,n);if(hr(u,e),s!==null&&tF(e,a-r,u,l,n,s),dr(l)){let d=pr(n.index,e);d[jn]=po(e,t,a,n)}}}function UC(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=IN();try{ho(o);for(let a=i;a<r;a++){let l=t.data[a],u=e[a];lg(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&qk(l,u)}}finally{ho(-1),lg(s)}}function qk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Wk(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(DD(e,s.selectors,!1))if(i||(i=[]),dr(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;yg(t,e,l)}else i.unshift(s),yg(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function yg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Kk(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new oe(-301,!1);i.push(e[r],o)}}}function Qk(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;dr(e)&&(n[""]=t)}}function Yk(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Jk(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=Ps(r.type,!0)),s=new fo(o,dr(r),se);t.blueprint[i]=s,n[i]=s,Gk(t,e,i,FC(t,n,r.hostVars,Tn),r)}function Zk(t,e,n){let i=In(e,t),r=LC(n),o=t[Un].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=eh(t,Xd(t,r,null,s,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=a}function Xk(t,e,n,i,r,o){let s=In(t,e);eF(e[ct],s,o,t.value,n,i,r)}function eF(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let a=s==null?Rs(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}function tF(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],d=s[a++],f=s[a++];kC(i,n,l,u,d,f)}}function nF(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(o,s[a+1],s[a+2],n[r+1]);break}}r+=2}return i}function $C(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function GC(t,e){let n=t.contentQueries;if(n!==null){let i=Ve(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];u_(o),a.contentQueries(2,e[s],s)}}}finally{Ve(i)}}}function eh(t,e){return t[Fl]?t[kE][Bn]=e:t[Fl]=e,t[kE]=e,e}function vg(t,e,n){u_(0);let i=Ve(null);try{e(t,n)}finally{Ve(i)}}function HC(t){return t[kl]||(t[kl]=[])}function zC(t){return t.cleanup||(t.cleanup=[])}function qC(t,e){let n=t[Vs],i=n?n.get(Ai,null):null;i&&i.handleError(e)}function A_(t,e,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],u=e[s],d=t.data[s];kC(d,u,i,a,l,r)}}function WC(t,e,n){let i=jD(e,t);fk(t[ct],i,n)}function iF(t,e){let n=pr(e,t),i=n[Ee];rF(i,n);let r=n[ki];r!==null&&n[Nl]===null&&(n[Nl]=v_(r,n[Vs])),x_(i,n,n[jn])}function rF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function x_(t,e,n){d_(e);try{let i=t.viewQuery;i!==null&&vg(1,i,n);let r=t.template;r!==null&&VC(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Mi]?.finishViewCreation(t),t.staticContentQueries&&GC(t,e),t.staticViewQueries&&vg(2,t.viewQuery,n);let o=t.components;o!==null&&oF(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[me]&=-5,h_()}}function oF(t,e){for(let n=0;n<e.length;n++)iF(t,e[n])}function sF(t,e,n,i){let r=Ve(null);try{let o=e.tView,a=t[me]&4096?4096:16,l=Xd(t,o,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=t[e.index];l[Hl]=u;let d=t[Mi];return d!==null&&(l[Mi]=d.createEmbeddedView(o)),x_(o,l,n),l}finally{Ve(r)}}function WE(t,e){return!e||e.firstChild===null||hC(t)}function aF(t,e,n,i=!0){let r=e[Ee];if(yk(r,e,t,n),i){let s=_g(n,t),a=e[ct],l=E_(a,t[uo]);l!==null&&gk(r,t[mn],a,e,l,s)}let o=e[Nl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Od(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(ri(o)),Fi(o)&&lF(o,i);let s=n.type;if(s&8)Od(t,e,n.child,i);else if(s&32){let a=b_(n,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=xC(e,n);if(Array.isArray(a))i.push(...a);else{let l=Ll(e[$n]);Od(l[Ee],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function lF(t,e){for(let n=pn;n<t.length;n++){let i=t[n],r=i[Ee].firstChild;r!==null&&Od(i[Ee],i,r,e)}t[uo]!==t[ki]&&e.push(t[uo])}var KC=[];function cF(t){return t[co]??uF(t)}function uF(t){let e=KC.pop()??Object.create(hF);return e.lView=t,e}function dF(t){t.lView[co]!==t&&(t.lView=null,KC.push(t))}var hF=ke(Y({},X1),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Vl(t.lView)},consumerOnSignalRead(){this.lView[co]=this}}),QC=100;function YC(t,e=!0,n=0){let i=t[Un],r=i.rendererFactory,o=!1;o||r.begin?.();try{fF(t,n)}catch(s){throw e&&qC(t,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function fF(t,e){wg(t,e);let n=0;for(;o_(t);){if(n===QC)throw new oe(103,!1);n++,wg(t,1)}}function pF(t,e,n,i){let r=e[me];if((r&256)===256)return;let o=!1;!o&&e[Un].inlineEffectRunner?.flush(),d_(e);let s=null,a=null;!o&&mF(t)&&(a=cF(e),s=eE(a));try{$D(e),EN(t.bindingStartIndex),n!==null&&VC(t,e,n,2,i);let l=(r&3)===3;if(!o)if(l){let f=t.preOrderCheckHooks;f!==null&&gd(e,f,null)}else{let f=t.preOrderHooks;f!==null&&_d(e,f,0,null),jm(e,0)}if(gF(e),JC(e,0),t.contentQueries!==null&&GC(t,e),!o)if(l){let f=t.contentCheckHooks;f!==null&&gd(e,f)}else{let f=t.contentHooks;f!==null&&_d(e,f,1),jm(e,1)}Rk(t,e);let u=t.components;u!==null&&XC(e,u,0);let d=t.viewQuery;if(d!==null&&vg(2,d,i),!o)if(l){let f=t.viewCheckHooks;f!==null&&gd(e,f)}else{let f=t.viewHooks;f!==null&&_d(e,f,2),jm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Bm]){for(let f of e[Bm])f();e[Bm]=null}o||(e[me]&=-73)}catch(l){throw Vl(e),l}finally{a!==null&&(tE(a,s),dF(a)),h_()}}function mF(t){return t.type!==2}function JC(t,e){for(let n=pC(t);n!==null;n=mC(n))for(let i=pn;i<n.length;i++){let r=n[i];ZC(r,e)}}function gF(t){for(let e=pC(t);e!==null;e=mC(e)){if(!(e[me]&n_.HasTransplantedViews))continue;let n=e[Ls];for(let i=0;i<n.length;i++){let r=n[i],o=r[Ft];dN(r)}}}function _F(t,e,n){let i=pr(e,t);ZC(i,n)}function ZC(t,e){r_(t)&&wg(t,e)}function wg(t,e){let i=t[Ee],r=t[me],o=t[co],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&pm(o)),o&&(o.dirty=!1),t[me]&=-9217,s)pF(i,t,i.template,t[jn]);else if(r&8192){JC(t,1);let a=i.components;a!==null&&XC(t,a,1)}}function XC(t,e,n){for(let i=0;i<e.length;i++)_F(t,e[i],n)}function O_(t){for(t[Un].changeDetectionScheduler?.notify();t;){t[me]|=64;let e=Ll(t);if(eN(t)&&!e)return t;t=e}return null}var mo=class{get rootNodes(){let e=this._lView,n=e[Ee];return Od(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jn]}set context(e){this._lView[jn]=e}get destroyed(){return(this._lView[me]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ft];if(Fi(e)){let n=e[Id],i=n?n.indexOf(this):-1;i>-1&&(gg(e,i),Dd(n,i))}this._attachedToViewContainer=!1}TC(this._lView[Ee],this._lView)}onDestroy(e){GD(this._lView,e)}markForCheck(){O_(this._cdRefInjectingView||this._lView)}detach(){this._lView[me]&=-129}reattach(){ag(this._lView),this._lView[me]|=128}detectChanges(){this._lView[me]|=1024,YC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,CC(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=e,ag(this._lView)}},xi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=wF;let t=e;return t})(),yF=xi,vF=class extends yF{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=sF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new mo(r)}};function wF(){return R_(ln(),Te())}function R_(t,e){return t.type&4?new vF(e,t,Gs(t,e)):null}var U6=new RegExp(`^(\\d+)*(${tk}|${ek})*(.*)`);var bF=()=>null;function KE(t,e){return bF(t,e)}var bg=class{},Eg=class{},Rd=class{};function EF(t){let e=Error(`No component factory found for ${Xt(t)}.`);return e[DF]=t,e}var DF="ngComponent";var Dg=class{resolveComponentFactory(e){throw EF(e)}},th=(()=>{let e=class e{};e.NULL=new Dg;let t=e;return t})(),Bl=class{},si=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>CF();let t=e;return t})();function CF(){let t=Te(),e=ln(),n=pr(e.index,t);return(ao(n)?n:t)[ct]}var IF=(()=>{let e=class e{};e.\u0275prov=Z({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),zm={};var QE=new Set;function P_(t){QE.has(t)||(QE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function YE(...t){}function TF(){let t=typeof Al.requestAnimationFrame=="function",e=Al[t?"requestAnimationFrame":"setTimeout"],n=Al[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Ie=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ge(!1),this.onMicrotaskEmpty=new ge(!1),this.onStable=new ge(!1),this.onError=new ge(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=TF().nativeRequestAnimationFrame,AF(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new oe(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,SF,YE,YE);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},SF={};function N_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function MF(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Al,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Cg(t),t.isCheckStableRunning=!0,N_(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Cg(t))}function AF(t){let e=()=>{MF(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{if(xF(a))return n.invokeTask(r,o,s,a);try{return JE(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),ZE(t)}},onInvoke:(n,i,r,o,s,a,l)=>{try{return JE(t),n.invoke(r,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),ZE(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Cg(t),N_(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Cg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function JE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ZE(t){t._nesting--,N_(t)}function xF(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var eI=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Z({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Pd(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Zm(r,a);else if(o==2){let l=a,u=e[++s];i=Zm(i,l+": "+u+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var Nd=class extends th{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ur(e);return new js(n,this.ngModule)}};function XE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function OF(t){let e=t.toLowerCase();return e==="svg"?rN:e==="math"?oN:null}var Ig=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Ud(i);let r=this.injector.get(e,zm,i);return r!==zm||n===zm?r:this.parentInjector.get(e,n,i)}},js=class extends Rd{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=XE(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return XE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=VP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=Ve(null);try{r=r||this.ngModule;let s=r instanceof kt?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ig(e,s):e,l=a.get(Bl,null);if(l===null)throw new oe(407,!1);let u=a.get(IF,null),d=a.get(eI,null),f=a.get(bg,null),m={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},_=l.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",T=i?kk(_,i,this.componentDef.encapsulation,a):DC(_,D,OF(D)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let k=null;T!==null&&(k=v_(T,a,!0));let q=S_(0,null,null,1,0,null,null,null,null,null,null),j=Xd(null,q,null,M,null,null,m,_,a,null,k);d_(j);let W,le;try{let ie=this.componentDef,b,y=null;ie.findHostDirectiveDefs?(b=[],y=new Map,ie.findHostDirectiveDefs(ie,b,y),b.push(ie)):b=[ie];let w=RF(j,T),E=PF(w,T,ie,b,j,m,_);le=UD(q,Gn),T&&FF(_,ie,T,i),n!==void 0&&VF(le,this.ngContentSelectors,n),W=kF(E,ie,b,y,j,[LF]),x_(q,j,null)}finally{h_()}return new Tg(this.componentType,W,Gs(le,j),j,le)}finally{Ve(o)}}},Tg=class extends Eg{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new mo(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;A_(o[Ee],o,r,e,n),this.previousInputValues.set(e,n);let s=pr(this._tNode.index,o);O_(s)}}get injector(){return new lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function RF(t,e){let n=t[Ee],i=Gn;return t[i]=e,Hs(n,i,2,"#host",null)}function PF(t,e,n,i,r,o,s){let a=r[Ee];NF(i,t,e,s);let l=null;e!==null&&(l=v_(e,r[Vs]));let u=o.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=Xd(r,LC(n),null,d,r[t.index],t,o,u,null,null,l);return a.firstCreatePass&&yg(a,t,i.length-1),eh(r,f),r[t.index]=f}function NF(t,e,n,i){for(let r of t)e.mergedAttrs=Rl(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Pd(e,e.mergedAttrs,!0),n!==null&&PC(i,n,e))}function kF(t,e,n,i,r,o){let s=ln(),a=r[Ee],l=In(s,r);jC(a,r,s,n,null,i);for(let d=0;d<n.length;d++){let f=s.directiveStart+d,m=po(r,a,f,s);hr(m,r)}UC(a,r,s),l&&hr(l,r);let u=po(r,a,s.directiveStart+s.componentOffset,s);if(t[jn]=r[jn]=u,o!==null)for(let d of o)d(u,e);return C_(a,s,r),u}function FF(t,e,n,i){if(i)ng(t,n,["ng-version","17.3.12"]);else{let{attrs:r,classes:o}=LP(e.selectors[0]);r&&ng(t,n,r),o&&o.length>0&&RC(t,n,o.join(" "))}}function VF(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function LF(){let t=ln();Yd(Te()[Ee],t)}var zn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=BF;let t=e;return t})();function BF(){let t=ln();return nI(t,Te())}var jF=zn,tI=class extends jF{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Gs(this._hostTNode,this._hostLView)}get injector(){return new lo(this._hostTNode,this._hostLView)}get parentInjector(){let e=p_(this._hostTNode,this._hostLView);if(tC(e)){let n=Sd(e,this._hostLView),i=Td(e),r=n[Ee].data[i+8];return new lo(r,n)}else return new lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=eD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-pn}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=KE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,WE(this._hostTNode,s)),a}createComponent(e,n,i,r,o){let s=e&&!XP(e),a;if(s)a=n;else{let D=n||{};a=D.index,i=D.injector,r=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let l=s?e:new js(ur(e)),u=i||this.parentInjector;if(!o&&l.ngModule==null){let T=(s?u:this.parentInjector).get(kt,null);T&&(o=T)}let d=ur(l.componentType??{}),f=KE(this._lContainer,d?.id??null),m=f?.firstChild??null,_=l.create(u,r,m,o);return this.insertImpl(_.hostView,a,WE(this._hostTNode,f)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(uN(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[Ft],u=new tI(l,l[mn],l[Ft]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return aF(s,r,o,i),e.attachToViewContainerRef(),yD(qm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=eD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=gg(this._lContainer,n);i&&(Dd(qm(this._lContainer),n),TC(i[Ee],i))}detach(e){let n=this._adjustIndex(e,-1),i=gg(this._lContainer,n);return i&&Dd(qm(this._lContainer),n)!=null?new mo(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function eD(t){return t[Id]}function qm(t){return t[Id]||(t[Id]=[])}function nI(t,e){let n,i=e[t.index];return Fi(i)?n=i:(n=$C(i,e,null,t),e[t.index]=n,eh(e,n)),$F(n,e,t,i),new tI(n,t,e)}function UF(t,e){let n=t[ct],i=n.createComment(""),r=In(e,t),o=E_(n,r);return xd(n,o,i,Ck(n,r),!1),i}var $F=zF,GF=()=>!1;function HF(t,e,n){return GF(t,e,n)}function zF(t,e,n,i){if(t[uo])return;let r;n.type&8?r=ri(i):r=UF(e,n),t[uo]=r}var Sg=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Mg=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)k_(e,n).matches!==null&&this.queries[n].setDirty()}},Ag=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=XF(e):this.predicate=e}},xg=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Og=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,qF(n,o)),this.matchTNodeWithReadOption(e,n,yd(n,e,o,!1,!1))}else i===xi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,yd(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Vt||r===zn||r===xi&&n.type&4)this.addMatch(n.index,-2);else{let o=yd(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function qF(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function WF(t,e){return t.type&11?Gs(t,e):t.type&4?R_(t,e):null}function KF(t,e,n,i){return n===-1?WF(e,t):n===-2?QF(t,e,i):po(t,t[Ee],n,e)}function QF(t,e,n){if(n===Vt)return Gs(e,t);if(n===xi)return R_(e,t);if(n===zn)return nI(e,t)}function iI(t,e,n,i){let r=e[Mi].queries[i];if(r.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let d=o[u];a.push(KF(e,d,s[l+1],n.metadata.read))}}r.matches=a}return r.matches}function Rg(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=iI(t,e,r,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],d=e[-l];for(let f=pn;f<d.length;f++){let m=d[f];m[Hl]===m[Ft]&&Rg(m[Ee],m,u,i)}if(d[Ls]!==null){let f=d[Ls];for(let m=0;m<f.length;m++){let _=f[m];Rg(_[Ee],_,u,i)}}}}}return i}function YF(t,e){return t[Mi].queries[e].queryList}function JF(t,e,n){let i=new pg((n&4)===4);return Lk(t,e,i,i.destroy),(e[Mi]??=new Mg).queries.push(new Sg(i))-1}function ZF(t,e,n){let i=Tt();return i.firstCreatePass&&(eV(i,new Ag(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),JF(i,Te(),e)}function XF(t){return t.split(",").map(e=>e.trim())}function eV(t,e,n){t.queries===null&&(t.queries=new xg),t.queries.track(new Og(e,n))}function k_(t,e){return t.queries.getByIndex(e)}function tV(t,e){let n=t[Ee],i=k_(n,e);return i.crossesNgTemplate?Rg(n,t,e,[]):iI(n,t,i,e)}function nV(t){return typeof t=="function"&&t[fm]!==void 0}function rI(t){return nV(t)&&typeof t.set=="function"}function iV(t){return Object.getPrototypeOf(t.prototype).constructor}function xt(t){let e=iV(t.type),n=!0,i=[t];for(;e;){let r;if(dr(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new oe(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=fd(t.inputs),s.inputTransforms=fd(t.inputTransforms),s.declaredInputs=fd(t.declaredInputs),s.outputs=fd(t.outputs);let a=r.hostBindings;a&&lV(t,a);let l=r.viewQuery,u=r.contentQueries;if(l&&sV(t,l),u&&aV(t,u),rV(t,r),tP(t.outputs,r.outputs),dr(r)&&r.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===xt&&(n=!1)}}e=Object.getPrototypeOf(e)}oV(i)}function rV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function oV(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Rl(r.hostAttrs,n=Rl(n,r.hostAttrs))}}function fd(t){return t===Ns?{}:t===sn?[]:t}function sV(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function aV(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function lV(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}var fr=class{},jl=class{};var Pg=class extends fr{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Nd(this);let r=SD(e);this._bootstrapComponents=EC(r.bootstrap),this._r3Injector=uC(e,n,[{provide:fr,useValue:this},{provide:th,useValue:this.componentFactoryResolver},...i],Xt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ng=class extends jl{constructor(e){super(),this.moduleType=e}create(e){return new Pg(this.moduleType,e,[])}};var kd=class extends fr{constructor(e){super(),this.componentFactoryResolver=new Nd(this),this.instance=null;let n=new Pl([...e.providers,{provide:fr,useValue:this},{provide:th,useValue:this.componentFactoryResolver}],e.parent||Gd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function F_(t,e,n=null){return new kd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var vo=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function oI(t){return V_(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function cV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function V_(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function L_(t,e,n){return t[e]=n}function uV(t,e){return t[e]}function Oi(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function sI(t,e,n,i){let r=Oi(t,e,n);return Oi(t,e+1,i)||r}function dV(t){return(t.flags&32)===32}function hV(t,e,n,i,r,o,s,a,l){let u=e.consts,d=Hs(e,t,4,s||null,Bs(u,a));M_(e,n,d,Bs(u,l)),Yd(e,d);let f=d.tView=S_(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Ce(t,e,n,i,r,o,s,a){let l=Te(),u=Tt(),d=t+Gn,f=u.firstCreatePass?hV(d,u,l,e,n,i,r,o,s):u.data[d];yo(f,!1);let m=fV(u,l,f,t);Kd()&&Jd(u,l,m,f),hr(m,l);let _=$C(m,l,m,f);return l[d]=_,eh(l,_),HF(_,f,l),qd(f)&&I_(u,l,f),s!=null&&T_(l,f,a),Ce}var fV=pV;function pV(t,e,n,i){return Qd(!0),e[ct].createComment("")}function ai(t,e,n,i){let r=Te(),o=Wd();if(Oi(r,o,e)){let s=Tt(),a=f_();Xk(a,r,t,e,n,i)}return ai}function mV(t,e,n,i){return Oi(t,Wd(),n)?e+Rs(n)+i:Tn}function gV(t,e,n,i,r,o){let s=bN(),a=sI(t,s,n,r);return c_(2),a?e+Rs(n)+i+Rs(r)+o:Tn}function pd(t,e){return t<<17|e<<2}function go(t){return t>>17&32767}function _V(t){return(t&2)==2}function yV(t,e){return t&131071|e<<17}function kg(t){return t|2}function Us(t){return(t&131068)>>2}function Wm(t,e){return t&-131069|e<<2}function vV(t){return(t&1)===1}function Fg(t){return t|1}function wV(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=go(s),l=Us(s);t[i]=n;let u=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Gl(f,d)>0)&&(u=!0)}else d=n;if(r)if(l!==0){let m=go(t[a+1]);t[i+1]=pd(m,a),m!==0&&(t[m+1]=Wm(t[m+1],i)),t[a+1]=yV(t[a+1],i)}else t[i+1]=pd(a,0),a!==0&&(t[a+1]=Wm(t[a+1],i)),a=i;else t[i+1]=pd(l,0),a===0?a=i:t[l+1]=Wm(t[l+1],i),l=i;u&&(t[i+1]=kg(t[i+1])),tD(t,d,i,!0),tD(t,d,i,!1),bV(e,d,t,i,o),s=pd(a,l),o?e.classBindings=s:e.styleBindings=s}function bV(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Gl(o,e)>=0&&(n[i+1]=Fg(n[i+1]))}function tD(t,e,n,i){let r=t[n+1],o=e===null,s=i?go(r):Us(r),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],u=t[s+1];EV(l,e)&&(a=!0,t[s+1]=i?Fg(u):kg(u)),s=i?go(u):Us(u)}a&&(t[n+1]=i?kg(r):Fg(r))}function EV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Gl(t,e)>=0:!1}var Ln={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function DV(t){return t.substring(Ln.key,Ln.keyEnd)}function CV(t){return IV(t),aI(t,lI(t,0,Ln.textEnd))}function aI(t,e){let n=Ln.textEnd;return n===e?-1:(e=Ln.keyEnd=TV(t,Ln.key=e,n),lI(t,e,n))}function IV(t){Ln.key=0,Ln.keyEnd=0,Ln.value=0,Ln.valueEnd=0,Ln.textEnd=t.length}function lI(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function TV(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Q(t,e,n){let i=Te(),r=Wd();if(Oi(i,r,e)){let o=Tt(),s=f_();BC(o,s,i,t,e,i[ct],n,!1)}return Q}function Vg(t,e,n,i,r){let o=e.inputs,s=r?"class":"style";A_(t,n,o[s],s,i)}function wo(t,e){return MV(t,e,null,!0),wo}function nh(t){AV(kV,SV,t,!0)}function SV(t,e){for(let n=CV(e);n>=0;n=aI(e,n))Zg(t,DV(e),!0)}function MV(t,e,n,i){let r=Te(),o=Tt(),s=c_(2);if(o.firstUpdatePass&&uI(o,t,s,i),e!==Tn&&Oi(r,s,e)){let a=o.data[mr()];dI(o,a,r,r[ct],t,r[s+1]=VV(e,n),i,s)}}function AV(t,e,n,i){let r=Tt(),o=c_(2);r.firstUpdatePass&&uI(r,null,o,i);let s=Te();if(n!==Tn&&Oi(s,o,n)){let a=r.data[mr()];if(hI(a,i)&&!cI(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=Zm(l,n||"")),Vg(r,a,s,n,i)}else FV(r,a,s,s[ct],s[o+1],s[o+1]=NV(t,e,n),i,o)}}function cI(t,e){return e>=t.expandoStartIndex}function uI(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[mr()],s=cI(t,n);hI(o,i)&&e===null&&!s&&(e=!1),e=xV(r,o,e,i),wV(r,o,e,n,s,i)}}function xV(t,e,n,i){let r=TN(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=Km(null,t,e,n,i),n=Ul(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=Km(r,t,e,n,i),o===null){let l=OV(t,e,i);l!==void 0&&Array.isArray(l)&&(l=Km(null,t,e,l[1],i),l=Ul(l,e.attrs,i),RV(t,e,i,l))}else o=PV(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function OV(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Us(i)!==0)return t[go(i)]}function RV(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[go(r)]=i}function PV(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=Ul(i,s,n)}return Ul(i,e.attrs,n)}function Km(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=Ul(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function Ul(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Zg(t,s,n?!0:e[++o]))}return t===void 0?null:t}function NV(t,e,n){if(n==null||n==="")return sn;let i=[],r=zl(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function kV(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&Zg(t,i,n)}function FV(t,e,n,i,r,o,s,a){r===Tn&&(r=sn);let l=0,u=0,d=0<r.length?r[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let m=l<r.length?r[l+1]:void 0,_=u<o.length?o[u+1]:void 0,D=null,T;d===f?(l+=2,u+=2,m!==_&&(D=f,T=_)):f===null||d!==null&&d<f?(l+=2,D=d):(u+=2,D=f,T=_),D!==null&&dI(t,e,n,i,D,T,s,a),d=l<r.length?r[l]:null,f=u<o.length?o[u]:null}}function dI(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let l=t.data,u=l[a+1],d=vV(u)?nD(l,e,n,r,Us(u),s):void 0;if(!Fd(d)){Fd(o)||_V(u)&&(o=nD(l,null,n,r,a,s));let f=jD(mr(),n);xk(i,s,f,r,o)}}function nD(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let l=t[r],u=Array.isArray(l),d=u?l[1]:l,f=d===null,m=n[r+1];m===Tn&&(m=f?sn:void 0);let _=f?Vm(m,i):d===i?m:void 0;if(u&&!Fd(_)&&(_=Vm(l,i)),Fd(_)&&(a=_,s))return a;let D=t[r+1];r=s?go(D):Us(D)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Vm(l,i))}return a}function Fd(t){return t!==void 0}function VV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Xt(zl(t)))),t}function hI(t,e){return(t.flags&(e?8:16))!==0}function LV(t,e,n,i,r,o){let s=e.consts,a=Bs(s,r),l=Hs(e,t,2,i,a);return M_(e,n,l,Bs(s,o)),l.attrs!==null&&Pd(l,l.attrs,!1),l.mergedAttrs!==null&&Pd(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function S(t,e,n,i){let r=Te(),o=Tt(),s=Gn+t,a=r[ct],l=o.firstCreatePass?LV(s,o,r,e,n,i):o.data[s],u=BV(o,r,l,a,e,t);r[s]=u;let d=qd(l);return yo(l,!0),PC(a,u,l),!dV(l)&&Kd()&&Jd(o,r,u,l),pN()===0&&hr(u,r),mN(),d&&(I_(o,r,l),C_(o,l,r)),i!==null&&T_(r,l),S}function A(){let t=ln();s_()?a_():(t=t.parent,yo(t,!1));let e=t;_N(e)&&yN(),gN();let n=Tt();return n.firstCreatePass&&(Yd(n,t),i_(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&PN(e)&&Vg(n,e,Te(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&NN(e)&&Vg(n,e,Te(),e.stylesWithoutHost,!1),A}function ae(t,e,n,i){return S(t,e,n,i),A(),ae}var BV=(t,e,n,i,r,o)=>(Qd(!0),DC(i,r,AN()));function jV(t,e,n,i,r){let o=e.consts,s=Bs(o,i),a=Hs(e,t,8,"ng-container",s);s!==null&&Pd(a,s,!0);let l=Bs(o,r);return M_(e,n,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function zs(t,e,n){let i=Te(),r=Tt(),o=t+Gn,s=r.firstCreatePass?jV(o,r,i,e,n):r.data[o];yo(s,!0);let a=UV(r,i,s,t);return i[o]=a,Kd()&&Jd(r,i,a,s),hr(a,i),qd(s)&&(I_(r,i,s),C_(r,s,i)),n!=null&&T_(i,s),zs}function qs(){let t=ln(),e=Tt();return s_()?a_():(t=t.parent,yo(t,!1)),e.firstCreatePass&&(Yd(e,t),i_(t)&&e.queries.elementEnd(t)),qs}var UV=(t,e,n,i)=>(Qd(!0),pk(e[ct],""));function Qe(){return Te()}var Vd="en-US";var $V=Vd;function GV(t){typeof t=="string"&&($V=t.toLowerCase().replace(/_/g,"-"))}function he(t,e,n,i){let r=Te(),o=Tt(),s=ln();return fI(o,r,r[ct],s,t,e,i),he}function HV(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[kl],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function fI(t,e,n,i,r,o,s){let a=qd(i),u=t.firstCreatePass&&zC(t),d=e[jn],f=HC(e),m=!0;if(i.type&3||s){let T=In(i,e),M=s?s(T):T,k=f.length,q=s?W=>s(ri(W[i.index])):i.index,j=null;if(!s&&a&&(j=HV(t,e,r,i.index)),j!==null){let W=j.__ngLastListenerFn__||j;W.__ngNextListenerFn__=o,j.__ngLastListenerFn__=o,m=!1}else{o=rD(i,e,d,o,!1);let W=n.listen(M,r,o);f.push(o,W),u&&u.push(r,q,k,k+1)}}else o=rD(i,e,d,o,!1);let _=i.outputs,D;if(m&&_!==null&&(D=_[r])){let T=D.length;if(T)for(let M=0;M<T;M+=2){let k=D[M],q=D[M+1],le=e[k][q].subscribe(o),ie=f.length;f.push(o,le),u&&u.push(r,i.index,ie,-(ie+1))}}}function iD(t,e,n,i){let r=Ve(null);try{return ti(6,e,n),n(i)!==!1}catch(o){return qC(t,o),!1}finally{ti(7,e,n),Ve(r)}}function rD(t,e,n,i,r){return function o(s){if(s===Function)return i;let a=t.componentOffset>-1?pr(t.index,e):e;O_(a);let l=iD(e,n,i,s),u=o.__ngNextListenerFn__;for(;u;)l=iD(e,n,u,s)&&l,u=u.__ngNextListenerFn__;return r&&l===!1&&s.preventDefault(),l}}function ee(t=1){return MN(t)}function zV(t,e){let n=null,i=RP(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?DD(t,o,!0):kP(i,o))return r}return n}function ih(t){let e=Te()[$n][mn];if(!e.projection){let n=t?t.length:1,i=e.projection=EP(n,null),r=i.slice(),o=e.child;for(;o!==null;){let s=t?zV(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function rh(t,e=0,n){let i=Te(),r=Tt(),o=Hs(r,Gn+t,16,null,n||null);o.projection===null&&(o.projection=e),a_(),(!i[Nl]||zD())&&(o.flags&32)!==32&&Mk(r,i,o)}function Ws(t,e,n){ZF(t,e,n)}function bo(t){let e=Te(),n=Tt(),i=WD();u_(i+1);let r=k_(n,i);if(t.dirty&&cN(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=tV(e,i);t.reset(o,qN),t.notifyOnChanges()}return!0}return!1}function Eo(){return YF(Te(),WD())}function li(t){let e=wN();return lN(e,Gn+t)}function B(t,e=""){let n=Te(),i=Tt(),r=t+Gn,o=i.firstCreatePass?Hs(i,r,1,e,null):i.data[r],s=qV(i,n,o,e,t);n[r]=s,Kd()&&Jd(i,n,s,o),yo(o,!1)}var qV=(t,e,n,i,r)=>(Qd(!0),hk(e[ct],i));function qn(t){return St("",t,""),qn}function St(t,e,n){let i=Te(),r=mV(i,t,e,n);return r!==Tn&&WC(i,mr(),r),St}function ql(t,e,n,i,r){let o=Te(),s=gV(o,t,e,n,i,r);return s!==Tn&&WC(o,mr(),s),ql}function Ye(t,e,n){rI(e)&&(e=e());let i=Te(),r=Wd();if(Oi(i,r,e)){let o=Tt(),s=f_();BC(o,s,i,t,e,i[ct],n,!1)}return Ye}function Xe(t,e){let n=rI(t);return n&&t.set(e),n}function Je(t,e){let n=Te(),i=Tt(),r=ln();return fI(i,n,n[ct],r,t,e),Je}function WV(t,e,n){let i=Tt();if(i.firstCreatePass){let r=dr(t);Lg(n,i.data,i.blueprint,r,!0),Lg(e,i.data,i.blueprint,r,!1)}}function Lg(t,e,n,i,r){if(t=Zt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Lg(t[o],e,n,i,r);else{let o=Tt(),s=Te(),a=ln(),l=Fs(t)?t:Zt(t.provide),u=PD(t),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Fs(t)||!t.multi){let _=new fo(u,r,se),D=Ym(l,e,r?d:d+m,f);D===-1?(ug(Md(a,s),o,l),Qm(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(_),s.push(_)):(n[D]=_,s[D]=_)}else{let _=Ym(l,e,d+m,f),D=Ym(l,e,d,d+m),T=_>=0&&n[_],M=D>=0&&n[D];if(r&&!M||!r&&!T){ug(Md(a,s),o,l);let k=YV(r?QV:KV,n.length,r,i,u);!r&&M&&(n[D].providerFactory=k),Qm(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=pI(n[r?D:_],u,!r&&i);Qm(o,t,_>-1?_:D,k)}!r&&i&&M&&n[D].componentProviders++}}}function Qm(t,e,n,i){let r=Fs(e),o=zP(e);if(r||o){let l=(o?Zt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let d=u.indexOf(n);d===-1?u.push(n,[i,l]):u[d+1].push(i,l)}else u.push(n,l)}}}function pI(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ym(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function KV(t,e,n,i){return Bg(this.multi,[])}function QV(t,e,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=po(n,n[Ee],this.providerFactory.index,i);o=a.slice(0,s),Bg(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Bg(r,o);return o}function Bg(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function YV(t,e,n,i,r){let o=new fo(t,n,se);return o.multi=[],o.index=e,o.componentProviders=0,pI(o,r,i&&!n),o}function cn(t,e=[]){return n=>{n.providersResolver=(i,r)=>WV(i,r?r(t):t,e)}}var JV=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=xD(!1,i.type),o=r.length>0?F_([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Z({token:e,providedIn:"environment",factory:()=>new e($(kt))});let t=e;return t})();function xe(t){P_("NgStandalone"),t.getStandaloneInjector=e=>e.get(JV).getOrCreateStandaloneInjector(t)}function mI(t,e,n){let i=l_()+t,r=Te();return r[i]===Tn?L_(r,i,n?e.call(n):e()):uV(r,i)}function B_(t,e,n,i){return ZV(Te(),l_(),t,e,n,i)}function oh(t,e,n,i,r){return XV(Te(),l_(),t,e,n,i,r)}function gI(t,e){let n=t[e];return n===Tn?void 0:n}function ZV(t,e,n,i,r,o){let s=e+n;return Oi(t,s,r)?L_(t,s+1,o?i.call(o,r):i(r)):gI(t,s+1)}function XV(t,e,n,i,r,o,s){let a=e+n;return sI(t,a,r,o)?L_(t,a+2,s?i.call(s,r,o):i(r,o)):gI(t,a+2)}var Ri=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},sh=new Ri("17.3.12"),ah=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var _I=new K("");function Do(t){return!!t&&typeof t.then=="function"}function yI(t){return!!t&&typeof t.subscribe=="function"}var vI=new K(""),wI=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=V(vI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let s=o();if(Do(s))i.push(s);else if(yI(s)){let a=new Promise((l,u)=>{s.subscribe({complete:l,error:u})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lh=new K("");function e2(){iE(()=>{throw new oe(600,!1)})}function t2(t){return t.isBoundToModule}function n2(t,e,n){try{let i=n();return Do(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var gr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(dC),this.afterRenderEffectManager=V(eI),this.externalTestViews=new Set,this.beforeRender=new Le,this.afterTick=new Le,this.componentTypes=[],this.components=[],this.isStable=V(vo).hasPendingTasks.pipe(J(i=>!i)),this._injector=V(kt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof Rd;if(!this._injector.get(wI).done){let _=!o&&TD(i),D=!1;throw new oe(405,D)}let a;o?a=i:a=this._injector.get(th).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let l=t2(a)?void 0:this._injector.get(fr),u=r||a.selector,d=a.create(Hn.NULL,[],u,l),f=d.location.nativeElement,m=d.injector.get(_I,null);return m?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Jm(this.components,d),m?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new oe(101,!1);let r=Ve(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Ve(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===QC)throw new oe(103,!1);if(i){let s=r===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:l}of this._views)i2(a,s,l)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>jg(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>jg(s))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Jm(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(lh,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Jm(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new oe(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Jm(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function i2(t,e,n){!e&&!jg(t)||r2(t,n,e)}function jg(t){return o_(t)}function r2(t,e,n){let i;n?(i=0,t[me]|=1024):t[me]&64?i=0:i=1,YC(t,e,i)}var Ug=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},j_=(()=>{let e=class e{compileModuleSync(i){return new Ng(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=SD(i),s=EC(o.declarations).reduce((a,l)=>{let u=ur(l);return u&&a.push(new js(u)),a},[]);return new Ug(r,s)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var o2=(()=>{let e=class e{constructor(){this.zone=V(Ie),this.applicationRef=V(gr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function s2(t){return[{provide:Ie,useFactory:t},{provide:ks,multi:!0,useFactory:()=>{let e=V(o2,{optional:!0});return()=>e.initialize()}},{provide:ks,multi:!0,useFactory:()=>{let e=V(u2);return()=>{e.initialize()}}},{provide:dC,useFactory:a2}]}function a2(){let t=V(Ie),e=V(Ai);return n=>t.runOutsideAngular(()=>e.handleError(n))}function l2(t){let e=s2(()=>new Ie(c2(t)));return _o([[],e])}function c2(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var u2=(()=>{let e=class e{constructor(){this.subscription=new ft,this.initialized=!1,this.zone=V(Ie),this.pendingTasks=V(vo)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function d2(){return typeof $localize<"u"&&$localize.locale||Vd}var ch=new K("",{providedIn:"root",factory:()=>V(ch,De.Optional|De.SkipSelf)||d2()});var bI=new K("");var wd=null;function h2(t=[],e){return Hn.create({name:e,providers:[{provide:$d,useValue:"platform"},{provide:bI,useValue:new Set([()=>wd=null])},...t]})}function f2(t=[]){if(wd)return wd;let e=h2(t);return wd=e,e2(),p2(e),e}function p2(t){t.get(__,null)?.forEach(n=>n())}function U_(){return!1}var Vi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=m2;let t=e;return t})();function m2(t){return g2(ln(),Te(),(t&16)===16)}function g2(t,e,n){if(zd(t)&&!n){let i=pr(t.index,e);return new mo(i,i)}else if(t.type&47){let i=e[$n];return new mo(i,e)}return null}var $g=class{constructor(){}supports(e){return oI(e)}create(e){return new Gg(e)}},_2=(t,e)=>e,Gg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||_2}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<oD(i,r,o)?n:i,a=oD(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,d=l-r;if(u!=d){for(let m=0;m<u;m++){let _=m<o.length?o[m]:o[m]=0,D=_+m;d<=D&&D<u&&(o[m]=_+1)}let f=s.previousIndex;o[f]=d-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!oI(e))throw new oe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,cV(e,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new Hg(n,i),o,r)),e}_verifyReinsertion(e,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ld),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ld),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Hg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},zg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},Ld=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new zg,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function oD(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}var qg=class{constructor(){}supports(e){return e instanceof Map||V_(e)}create(){return new Wg}},Wg=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||V_(e)))throw new oe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,n);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new Kg(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}},Kg=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function sD(){return new $_([new $g])}var $_=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||sD()),deps:[[e,new Yg,new Pi]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r!=null)return r;throw new oe(901,!1)}};e.\u0275prov=Z({token:e,providedIn:"root",factory:sD});let t=e;return t})();function aD(){return new G_([new qg])}var G_=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||aD()),deps:[[e,new Yg,new Pi]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r)return r;throw new oe(901,!1)}};e.\u0275prov=Z({token:e,providedIn:"root",factory:aD});let t=e;return t})();function EI(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=f2(i),o=[l2(),...n||[]],a=new kd({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Ie);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(Ai,null),d;l.runOutsideAngular(()=>{d=l.onError.subscribe({next:_=>{u.handleError(_)}})});let f=()=>a.destroy(),m=r.get(bI);return m.add(f),a.onDestroy(()=>{d.unsubscribe(),m.delete(f)}),n2(u,l,()=>{let _=a.get(wI);return _.runInitializers(),_.donePromise.then(()=>{let D=a.get(ch,Vd);GV(D||Vd);let T=a.get(gr);return e!==void 0&&T.bootstrap(e),T})})})}catch(e){return Promise.reject(e)}}function Wl(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function uh(t,e){let n=ur(t),i=e.elementInjector||Gd();return new js(n).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}var AI=null;function Li(){return AI}function xI(t){AI??=t}var dh=class{};var Ot=new K(""),OI=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(w2),providedIn:"platform"});let t=e;return t})();var w2=(()=>{let e=class e extends OI{constructor(){super(),this._doc=V(Ot),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Li().getBaseHref(this._doc)}onPopState(i){let r=Li().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Li().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function RI(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function DI(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Co(t){return t&&t[0]!=="?"?"?"+t:t}var hh=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(PI),providedIn:"root"});let t=e;return t})(),b2=new K(""),PI=(()=>{let e=class e extends hh{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(Ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return RI(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Co(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+Co(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+Co(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)($(OI),$(b2,8))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Kl=(()=>{let e=class e{constructor(i){this._subject=new ge,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=C2(DI(CI(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Co(r))}normalize(i){return e.stripTrailingSlash(D2(this._basePath,CI(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Co(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Co(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=Co,e.joinWithSlash=RI,e.stripTrailingSlash=DI,e.\u0275fac=function(r){return new(r||e)($(hh))},e.\u0275prov=Z({token:e,factory:()=>E2(),providedIn:"root"});let t=e;return t})();function E2(){return new Kl($(hh))}function D2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function CI(t){return t.replace(/\/index.html$/,"")}function C2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function fh(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var H_=/\s+/,II=[],Qs=(()=>{let e=class e{constructor(i,r){this._ngEl=i,this._renderer=r,this.initialClasses=II,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(H_):II}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(H_):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let o=this.stateMap.get(i);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],o=i[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(H_).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(r){return new(r||e)(se(Vt),se(si))},e.\u0275dir=Ue({type:e,selectors:[["","ngClass",""]],inputs:{klass:[It.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var z_=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},un=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new z_(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let l=r.get(s);r.move(l,a),TI(l,o)}});for(let o=0,s=r.length;o<s;o++){let l=r.get(o).context;l.index=o,l.count=s,l.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);TI(s,o)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(se(zn),se(xi),se($_))},e.\u0275dir=Ue({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function TI(t,e){t.context.$implicit=e.item}var ci=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new q_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){SI("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){SI("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(se(zn),se(xi))},e.\u0275dir=Ue({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),q_=class{constructor(){this.$implicit=null,this.ngIf=null}};function SI(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Xt(e)}'.`)}var NI=(()=>{let e=class e{constructor(i,r,o){this._ngEl=i,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(i){this._ngStyle=i,!this._differ&&i&&(this._differ=this._differs.find(i).create())}ngDoCheck(){if(this._differ){let i=this._differ.diff(this._ngStyle);i&&this._applyChanges(i)}}_setStyle(i,r){let[o,s]=i.split("."),a=o.indexOf("-")===-1?void 0:oi.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,s?`${r}${s}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,o,a)}_applyChanges(i){i.forEachRemovedItem(r=>this._setStyle(r.key,null)),i.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),i.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};e.\u0275fac=function(r){return new(r||e)(se(Vt),se(G_),se(si))},e.\u0275dir=Ue({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})();var rt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({});let t=e;return t})(),kI="browser",I2="server";function _r(t){return t===I2}var Ks=class{};var Yl=class{},mh=class{},Bi=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var K_=class{encodeKey(e){return FI(e)}encodeValue(e){return FI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function M2(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}var A2=/%(\d[a-f0-9])/gi,x2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function FI(t){return encodeURIComponent(t).replace(A2,(e,n)=>x2[n]??e)}function ph(t){return`${t}`}var ui=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new K_,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=M2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map(ph):[ph(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(ph(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(ph(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Q_=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function O2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function VI(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function LI(t){return typeof Blob<"u"&&t instanceof Blob}function BI(t){return typeof FormData<"u"&&t instanceof FormData}function R2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Ql=class t{constructor(e,n,i,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(O2(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Bi,this.context??=new Q_,!this.params)this.params=new ui,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||VI(this.body)||LI(this.body)||BI(this.body)||R2(this.body)?this.body:this.body instanceof ui?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||BI(this.body)?null:LI(this.body)?this.body.type||null:VI(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ui?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((m,_)=>m.set(_,e.setHeaders[_]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,_)=>m.set(_,e.setParams[_]),d)),new t(n,i,s,{params:d,headers:u,context:f,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Ys=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Ys||{}),Jl=class{constructor(e,n=yh.Ok,i="OK"){this.headers=e.headers||new Bi,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Y_=class t extends Jl{constructor(e={}){super(e),this.type=Ys.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},gh=class t extends Jl{constructor(e={}){super(e),this.type=Ys.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_h=class extends Jl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},yh=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(yh||{});function W_(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var J_=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,o={}){let s;if(i instanceof Ql)s=i;else{let u;o.headers instanceof Bi?u=o.headers:u=new Bi(o.headers);let d;o.params&&(o.params instanceof ui?d=o.params:d=new ui({fromObject:o.params})),s=new Ql(i,r,o.body!==void 0?o.body:null,{headers:u,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=te(s).pipe(or(u=>this.handler.handle(u)));if(i instanceof Ql||o.observe==="events")return a;let l=a.pipe(it(u=>u instanceof gh));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(J(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return l.pipe(J(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new ui().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,W_(o,r))}post(i,r,o={}){return this.request("POST",i,W_(o,r))}put(i,r,o={}){return this.request("PUT",i,W_(o,r))}};e.\u0275fac=function(r){return new(r||e)($(Yl))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function GI(t,e){return e(t)}function P2(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}function N2(t,e,n){return(i,r)=>Ni(n,()=>e(i,o=>t(o,r)))}var k2=new K(""),Z_=new K(""),F2=new K(""),V2=new K("");function L2(){let t=null;return(e,n)=>{t===null&&(t=(V(k2,{optional:!0})??[]).reduceRight(P2,GI));let i=V(vo),r=i.add();return t(e,n).pipe(Si(()=>i.remove(r)))}}var jI=(()=>{let e=class e extends Yl{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=V(vo);let o=V(V2,{optional:!0});this.backend=o??i}handle(i){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Z_),...this.injector.get(F2,[])]));this.chain=o.reduceRight((s,a)=>N2(s,a,this.injector),GI)}let r=this.pendingTasks.add();return this.chain(i,o=>this.backend.handle(o)).pipe(Si(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)($(mh),$(kt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();var B2=/^\)\]\}',?\n/;function j2(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var UI=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new oe(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Me(r.\u0275loadImpl()):te(null)).pipe(Ge(()=>new fe(s=>{let a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((M,k)=>a.setRequestHeader(M,k.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let M=i.detectContentTypeHeader();M!==null&&a.setRequestHeader("Content-Type",M)}if(i.responseType){let M=i.responseType.toLowerCase();a.responseType=M!=="json"?M:"text"}let l=i.serializeBody(),u=null,d=()=>{if(u!==null)return u;let M=a.statusText||"OK",k=new Bi(a.getAllResponseHeaders()),q=j2(a)||i.url;return u=new Y_({headers:k,status:a.status,statusText:M,url:q}),u},f=()=>{let{headers:M,status:k,statusText:q,url:j}=d(),W=null;k!==yh.NoContent&&(W=typeof a.response>"u"?a.responseText:a.response),k===0&&(k=W?yh.Ok:0);let le=k>=200&&k<300;if(i.responseType==="json"&&typeof W=="string"){let ie=W;W=W.replace(B2,"");try{W=W!==""?JSON.parse(W):null}catch(b){W=ie,le&&(le=!1,W={error:b,text:W})}}le?(s.next(new gh({body:W,headers:M,status:k,statusText:q,url:j||void 0})),s.complete()):s.error(new _h({error:W,headers:M,status:k,statusText:q,url:j||void 0}))},m=M=>{let{url:k}=d(),q=new _h({error:M,status:a.status||0,statusText:a.statusText||"Unknown Error",url:k||void 0});s.error(q)},_=!1,D=M=>{_||(s.next(d()),_=!0);let k={type:Ys.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(k.total=M.total),i.responseType==="text"&&a.responseText&&(k.partialText=a.responseText),s.next(k)},T=M=>{let k={type:Ys.UploadProgress,loaded:M.loaded};M.lengthComputable&&(k.total=M.total),s.next(k)};return a.addEventListener("load",f),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),i.reportProgress&&(a.addEventListener("progress",D),l!==null&&a.upload&&a.upload.addEventListener("progress",T)),a.send(l),s.next({type:Ys.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",f),a.removeEventListener("timeout",m),i.reportProgress&&(a.removeEventListener("progress",D),l!==null&&a.upload&&a.upload.removeEventListener("progress",T)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)($(Ks))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),HI=new K(""),U2="XSRF-TOKEN",$2=new K("",{providedIn:"root",factory:()=>U2}),G2="X-XSRF-TOKEN",H2=new K("",{providedIn:"root",factory:()=>G2}),vh=class{},z2=(()=>{let e=class e{constructor(i,r,o){this.doc=i,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=fh(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)($(Ot),$(Lt),$($2))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function q2(t,e){let n=t.url.toLowerCase();if(!V(HI)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let i=V(vh).getToken(),r=V(H2);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var zI=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(zI||{});function W2(t,e){return{\u0275kind:t,\u0275providers:e}}function K2(...t){let e=[J_,UI,jI,{provide:Yl,useExisting:jI},{provide:mh,useExisting:UI},{provide:Z_,useValue:q2,multi:!0},{provide:HI,useValue:!0},{provide:vh,useClass:z2}];for(let n of t)e.push(...n.\u0275providers);return _o(e)}var $I=new K("");function Q2(){return W2(zI.LegacyInterceptors,[{provide:$I,useFactory:L2},{provide:Z_,useExisting:$I,multi:!0}])}var qI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({providers:[K2(Q2())]});let t=e;return t})();var ty=class extends dh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ny=class t extends ty{static makeCurrent(){xI(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Y2();return n==null?null:J2(n)}resetBaseElement(){Zl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fh(document.cookie,e)}},Zl=null;function Y2(){return Zl=Zl||document.querySelector("base"),Zl?Zl.getAttribute("href"):null}function J2(t){return new URL(t,document.baseURI).pathname}var Z2=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),iy=new K(""),YI=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)($(iy),$(Ie))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),wh=class{constructor(e){this._doc=e}},X_="ng-app-id",JI=(()=>{let e=class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_r(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${X_}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(X_),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(X_,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)($(Ot),$(g_),$(y_,8),$(Lt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),ey={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},oy=/%COMP%/g,ZI="%COMP%",X2=`_nghost-${ZI}`,eL=`_ngcontent-${ZI}`,tL=!0,nL=new K("",{providedIn:"root",factory:()=>tL});function iL(t){return eL.replace(oy,t)}function rL(t){return X2.replace(oy,t)}function XI(t,e){return e.map(n=>n.replace(oy,t))}var WI=(()=>{let e=class e{constructor(i,r,o,s,a,l,u,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=_r(l),this.defaultRenderer=new Xl(i,a,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ii.ShadowDom&&(r=ke(Y({},r),{encapsulation:ii.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof bh?o.applyToHost(i):o instanceof ec&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,l=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case ii.Emulated:s=new bh(u,d,r,this.appId,f,a,l,m);break;case ii.ShadowDom:return new ry(u,d,i,r,a,l,this.nonce,m);default:s=new ec(u,d,r,f,a,l,m);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)($(YI),$(JI),$(g_),$(nL),$(Ot),$(Lt),$(Ie),$(y_))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),Xl=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ey[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(KI(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(KI(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new oe(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=ey[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=ey[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(oi.DashCase|oi.Important)?e.style.setProperty(n,i,r&oi.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&oi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Li().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function KI(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ry=class extends Xl{constructor(e,n,i,r,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=XI(r.id,r.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ec=class extends Xl{constructor(e,n,i,r,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?XI(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},bh=class extends ec{constructor(e,n,i,r,o,s,a,l){let u=r+"-"+i.id;super(e,n,i,o,s,a,l,u),this.contentAttr=iL(u),this.hostAttr=rL(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},oL=(()=>{let e=class e extends wh{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)($(Ot))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),QI=["alt","control","meta","shift"],sL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},aL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},lL=(()=>{let e=class e extends wh{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Li().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),QI.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(i,r){let o=sL[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),QI.forEach(a=>{if(a!==o){let l=aL[a];l(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)($(Ot))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function eT(t,e){return EI(Y({rootComponent:t},cL(e)))}function cL(t){return{appProviders:[...pL,...t?.providers??[]],platformProviders:fL}}function uL(){ny.makeCurrent()}function dL(){return new Ai}function hL(){return _C(document),document}var fL=[{provide:Lt,useValue:kI},{provide:__,useValue:uL,multi:!0},{provide:Ot,useFactory:hL,deps:[]}];var pL=[{provide:$d,useValue:"root"},{provide:Ai,useFactory:dL,deps:[]},{provide:iy,useClass:oL,multi:!0,deps:[Ot,Ie,Lt]},{provide:iy,useClass:lL,multi:!0,deps:[Ot]},WI,JI,YI,{provide:Bl,useExisting:WI},{provide:Ks,useClass:Z2,deps:[]},[]];var tT=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)($(Ot))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var we="primary",mc=Symbol("RouteTitle"),uy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ta(t){return new uy(t)}function _L(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function yL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!di(t[n],e[n]))return!1;return!0}function di(t,e){let n=t?dy(t):void 0,i=e?dy(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!aT(t[r],e[r]))return!1;return!0}function dy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function aT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function lT(t){return t.length>0?t[t.length-1]:null}function br(t){return Am(t)?t:Do(t)?Me(Promise.resolve(t)):te(t)}var vL={exact:uT,subset:dT},cT={exact:wL,subset:bL,ignored:()=>!0};function nT(t,e,n){return vL[n.paths](t.root,e.root,n.matrixParams)&&cT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function wL(t,e){return di(t,e)}function uT(t,e,n){if(!To(t.segments,e.segments)||!Ch(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!uT(t.children[i],e.children[i],n))return!1;return!0}function bL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>aT(t[n],e[n]))}function dT(t,e,n){return hT(t,e,e.segments,n)}function hT(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!To(r,n)||e.hasChildren()||!Ch(r,n,i))}else if(t.segments.length===n.length){if(!To(t.segments,n)||!Ch(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!dT(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!To(t.segments,r)||!Ch(t.segments,r,i)||!t.children[we]?!1:hT(t.children[we],e,o,i)}}function Ch(t,e,n){return e.every((i,r)=>cT[n](t[r].parameters,i.parameters))}var yr=class{constructor(e=new je([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=ta(this.queryParams),this._queryParamMap}toString(){return CL.serialize(this)}},je=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ih(this)}},Io=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ta(this.parameters),this._parameterMap}toString(){return pT(this)}};function EL(t,e){return To(t,e)&&t.every((n,i)=>di(n.parameters,e[i].parameters))}function To(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function DL(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===we&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==we&&(n=n.concat(e(r,i)))}),n}var Vy=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>new Sh,providedIn:"root"});let t=e;return t})(),Sh=class{parse(e){let n=new fy(e);return new yr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${tc(e.root,!0)}`,i=SL(e.queryParams),r=typeof e.fragment=="string"?`#${IL(e.fragment)}`:"";return`${n}${i}${r}`}},CL=new Sh;function Ih(t){return t.segments.map(e=>pT(e)).join("/")}function tc(t,e){if(!t.hasChildren())return Ih(t);if(e){let n=t.children[we]?tc(t.children[we],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==we&&i.push(`${r}:${tc(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=DL(t,(i,r)=>r===we?[tc(t.children[we],!1)]:[`${r}:${tc(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[we]!=null?`${Ih(t)}/${n[0]}`:`${Ih(t)}/(${n.join("//")})`}}function fT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Eh(t){return fT(t).replace(/%3B/gi,";")}function IL(t){return encodeURI(t)}function hy(t){return fT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Th(t){return decodeURIComponent(t)}function iT(t){return Th(t.replace(/\+/g,"%20"))}function pT(t){return`${hy(t.path)}${TL(t.parameters)}`}function TL(t){return Object.entries(t).map(([e,n])=>`;${hy(e)}=${hy(n)}`).join("")}function SL(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Eh(n)}=${Eh(r)}`).join("&"):`${Eh(n)}=${Eh(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var ML=/^[^\/()?;#]+/;function sy(t){let e=t.match(ML);return e?e[0]:""}var AL=/^[^\/()?;=#]+/;function xL(t){let e=t.match(AL);return e?e[0]:""}var OL=/^[^=?&#]+/;function RL(t){let e=t.match(OL);return e?e[0]:""}var PL=/^[^&#]+/;function NL(t){let e=t.match(PL);return e?e[0]:""}var fy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[we]=new je(e,n)),i}parseSegment(){let e=sy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(e),new Io(Th(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=xL(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=sy(this.remaining);r&&(i=r,this.capture(i))}e[Th(n)]=Th(i)}parseQueryParam(e){let n=RL(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=NL(this.remaining);s&&(i=s,this.capture(i))}let r=iT(n),o=iT(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=sy(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new oe(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=we);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[we]:new je([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new oe(4011,!1)}};function mT(t){return t.segments.length>0?new je([],{[we]:t}):t}function gT(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=gT(r);if(i===we&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new je(t.segments,e);return kL(n)}function kL(t){if(t.numberOfChildren===1&&t.children[we]){let e=t.children[we];return new je(t.segments.concat(e.segments),e.children)}return t}function na(t){return t instanceof yr}function FL(t,e,n=null,i=null){let r=_T(t);return yT(r,e,n,i)}function _T(t){let e;function n(o){let s={};for(let l of o.children){let u=n(l);s[l.outlet]=u}let a=new je(o.url,s);return o===t&&(e=a),a}let i=n(t.root),r=mT(i);return e??r}function yT(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return ay(r,r,r,n,i);let o=VL(e);if(o.toRoot())return ay(r,r,new je([],{}),n,i);let s=LL(o,r,t),a=s.processChildren?rc(s.segmentGroup,s.index,o.commands):wT(s.segmentGroup,s.index,o.commands);return ay(r,s.segmentGroup,a,n,i)}function Mh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ac(t){return typeof t=="object"&&t!=null&&t.outlets}function ay(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;t===e?s=n:s=vT(t,e,n);let a=mT(gT(s));return new yr(a,o,r)}function vT(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=vT(o,e,n)}),new je(t.segments,i)}var Ah=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Mh(i[0]))throw new oe(4003,!1);let r=i.find(ac);if(r&&r!==lT(i))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function VL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ah(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Ah(n,e,i)}var Xs=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function LL(t,e,n){if(t.isAbsolute)return new Xs(e,!0,0);if(!n)return new Xs(e,!1,NaN);if(n.parent===null)return new Xs(n,!0,0);let i=Mh(t.commands[0])?0:1,r=n.segments.length-1+i;return BL(n,r,t.numberOfDoubleDots)}function BL(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new oe(4005,!1);r=i.segments.length}return new Xs(i,!1,r-o)}function jL(t){return ac(t[0])?t[0].outlets:{[we]:t}}function wT(t,e,n){if(t??=new je([],{}),t.segments.length===0&&t.hasChildren())return rc(t,e,n);let i=UL(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new je(t.segments.slice(0,i.pathIndex),{});return o.children[we]=new je(t.segments.slice(i.pathIndex),t.children),rc(o,0,r)}else return i.match&&r.length===0?new je(t.segments,{}):i.match&&!t.hasChildren()?py(t,e,n):i.match?rc(t,0,r):py(t,e,n)}function rc(t,e,n){if(n.length===0)return new je(t.segments,{});{let i=jL(n),r={};if(Object.keys(i).some(o=>o!==we)&&t.children[we]&&t.numberOfChildren===1&&t.children[we].segments.length===0){let o=rc(t.children[we],e,n);return new je(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=wT(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new je(t.segments,r)}}function UL(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let s=t.segments[r],a=n[i];if(ac(a))break;let l=`${a}`,u=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!oT(l,u,s))return o;i+=2}else{if(!oT(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function py(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(ac(o)){let l=$L(o.outlets);return new je(i,l)}if(r===0&&Mh(n[0])){let l=t.segments[e];i.push(new Io(l.path,rT(n[0]))),r++;continue}let s=ac(o)?o.outlets[we]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&Mh(a)?(i.push(new Io(s,rT(a))),r+=2):(i.push(new Io(s,{})),r++)}return new je(i,{})}function $L(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=py(new je([],{}),0,i))}),e}function rT(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function oT(t,e,n){return t==n.path&&di(e,n.parameters)}var oc="imperative",Bt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Bt||{}),Sn=class{constructor(e,n){this.id=e,this.url=n}},lc=class extends Sn{constructor(e,n,i="imperative",r=null){super(e,n),this.type=Bt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},So=class extends Sn{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=Bt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(yn||{}),my=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(my||{}),vr=class extends Sn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Bt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mo=class extends Sn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Bt.NavigationSkipped}},cc=class extends Sn{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=Bt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xh=class extends Sn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Bt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gy=class extends Sn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Bt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_y=class extends Sn{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=Bt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yy=class extends Sn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Bt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vy=class extends Sn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Bt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wy=class{constructor(e){this.route=e,this.type=Bt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},by=class{constructor(e){this.route=e,this.type=Bt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ey=class{constructor(e){this.snapshot=e,this.type=Bt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dy=class{constructor(e){this.snapshot=e,this.type=Bt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cy=class{constructor(e){this.snapshot=e,this.type=Bt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iy=class{constructor(e){this.snapshot=e,this.type=Bt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var uc=class{},dc=class{constructor(e){this.url=e}};var Ty=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Fh,this.attachRef=null}},Fh=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Ty,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Oh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Sy(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=Sy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=My(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return My(e,this._root).map(n=>n.value)}};function Sy(t,e){if(t===e.value)return e;for(let n of e.children){let i=Sy(t,n);if(i)return i}return null}function My(t,e){if(t===e.value)return[e];for(let n of e.children){let i=My(t,n);if(i.length)return i.unshift(e),i}return[]}var _n=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Zs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Rh=class extends Oh{constructor(e,n){super(e),this.snapshot=n,By(this,e)}toString(){return this.snapshot.toString()}};function bT(t){let e=GL(t),n=new pt([new Io("",{})]),i=new pt({}),r=new pt({}),o=new pt({}),s=new pt(""),a=new wr(n,i,o,s,r,we,t,e.root);return a.snapshot=e.root,new Rh(new _n(a,[]),e)}function GL(t){let e={},n={},i={},r="",o=new hc([],e,i,r,n,we,t,null,{});return new Ph("",new _n(o,[]))}var wr=class{constructor(e,n,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(J(u=>u[mc]))??te(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>ta(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>ta(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ly(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:Y(Y({},e.params),t.params),data:Y(Y({},e.data),t.data),resolve:Y(Y(Y(Y({},t.data),e.data),r?.data),t._resolvedData)}:i={params:Y({},t.params),data:Y({},t.data),resolve:Y(Y({},t.data),t._resolvedData??{})},r&&DT(r)&&(i.resolve[mc]=r.title),i}var hc=class{get title(){return this.data?.[mc]}constructor(e,n,i,r,o,s,a,l,u){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ta(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ta(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ph=class extends Oh{constructor(e,n){super(n),this.url=e,By(this,n)}toString(){return ET(this._root)}};function By(t,e){e.value._routerState=t,e.children.forEach(n=>By(t,n))}function ET(t){let e=t.children.length>0?` { ${t.children.map(ET).join(", ")} } `:"";return`${t.value}${e}`}function ly(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,di(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),di(e.params,n.params)||t.paramsSubject.next(n.params),yL(e.url,n.url)||t.urlSubject.next(n.url),di(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ay(t,e){let n=di(t.params,e.params)&&EL(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||Ay(t.parent,e.parent))}function DT(t){return typeof t.title=="string"||t.title===null}var jy=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=we,this.activateEvents=new ge,this.deactivateEvents=new ge,this.attachEvents=new ge,this.detachEvents=new ge,this.parentContexts=V(Fh),this.location=V(zn),this.changeDetector=V(Vi),this.environmentInjector=V(kt),this.inputBinder=V(Uy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new xy(i,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ue({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[an]});let t=e;return t})(),xy=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===wr?this.route:e===Fh?this.childContexts:this.parent.get(e,n)}},Uy=new K("");function HL(t,e,n){let i=fc(t,e._root,n?n._root:void 0);return new Rh(i,e)}function fc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=zL(t,e,n);return new _n(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>fc(t,a)),s}}let i=qL(e.value),r=e.children.map(o=>fc(t,o));return new _n(i,r)}}function zL(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return fc(t,i,r);return fc(t,i)})}function qL(t){return new wr(new pt(t.url),new pt(t.params),new pt(t.queryParams),new pt(t.fragment),new pt(t.data),t.outlet,t.component,t)}var CT="ngNavigationCancelingError";function IT(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=na(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=TT(!1,yn.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function TT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[CT]=!0,n.cancellationCode=e,n}function WL(t){return ST(t)&&na(t.url)}function ST(t){return!!t&&t[CT]}var KL=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["ng-component"]],standalone:!0,features:[xe],decls:1,vars:0,template:function(r,o){r&1&&ae(0,"router-outlet")},dependencies:[jy],encapsulation:2});let t=e;return t})();function QL(t,e){return t.providers&&!t._injector&&(t._injector=F_(t.providers,e,`Route: ${t.path}`)),t._injector??e}function $y(t){let e=t.children&&t.children.map($y),n=e?ke(Y({},t),{children:e}):Y({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==we&&(n.component=KL),n}function hi(t){return t.outlet||we}function YL(t,e){let n=t.filter(i=>hi(i)===e);return n.push(...t.filter(i=>hi(i)!==e)),n}function gc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var JL=(t,e,n,i)=>J(r=>(new Oy(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Oy=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),ly(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Zs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Zs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Zs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Zs(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Iy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Dy(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(ly(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ly(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=gc(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}},Nh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ea=class{constructor(e,n){this.component=e,this.route=n}};function ZL(t,e,n){let i=t._root,r=e?e._root:null;return nc(i,r,n,[i.value])}function XL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ra(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!dD(t)?t:e.get(t):i}function nc(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Zs(e);return t.children.forEach(s=>{eB(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>sc(a,n.getContext(s),r)),r}function eB(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=tB(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Nh(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?nc(t,e,a?a.children:null,i,r):nc(t,e,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ea(a.outlet.component,s))}else s&&sc(e,a,r),r.canActivateChecks.push(new Nh(i)),o.component?nc(t,null,a?a.children:null,i,r):nc(t,null,n,i,r);return r}function tB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!To(t.url,e.url);case"pathParamsOrQueryParamsChange":return!To(t.url,e.url)||!di(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ay(t,e)||!di(t.queryParams,e.queryParams);case"paramsChange":default:return!Ay(t,e)}}function sc(t,e,n){let i=Zs(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?e?sc(s,e.children.getContext(o),n):sc(s,null,n):sc(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ea(e.outlet.component,r)):n.canDeactivateChecks.push(new ea(null,r)):n.canDeactivateChecks.push(new ea(null,r))}function _c(t){return typeof t=="function"}function nB(t){return typeof t=="boolean"}function iB(t){return t&&_c(t.canLoad)}function rB(t){return t&&_c(t.canActivate)}function oB(t){return t&&_c(t.canActivateChild)}function sB(t){return t&&_c(t.canDeactivate)}function aB(t){return t&&_c(t.canMatch)}function MT(t){return t instanceof Fn||t?.name==="EmptyError"}var Dh=Symbol("INITIAL_VALUE");function ia(){return Ge(t=>Il(t.map(e=>e.pipe(on(1),ar(Dh)))).pipe(J(e=>{for(let n of e)if(n!==!0){if(n===Dh)return Dh;if(n===!1||n instanceof yr)return n}return!0}),it(e=>e!==Dh),on(1)))}function lB(t,e){return at(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?te(ke(Y({},n),{guardsResult:!0})):cB(s,i,r,t).pipe(at(a=>a&&nB(a)?uB(i,o,t,e):te(a)),J(a=>ke(Y({},n),{guardsResult:a})))})}function cB(t,e,n,i){return Me(t).pipe(at(r=>mB(r.component,r.route,n,e,i)),Dn(r=>r!==!0,!0))}function uB(t,e,n,i){return Me(e).pipe(or(r=>ir(hB(r.route.parent,i),dB(r.route,i),pB(t,r.path,n),fB(t,r.route,n))),Dn(r=>r!==!0,!0))}function dB(t,e){return t!==null&&e&&e(new Cy(t)),te(!0)}function hB(t,e){return t!==null&&e&&e(new Ey(t)),te(!0)}function fB(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return te(!0);let r=i.map(o=>od(()=>{let s=gc(e)??n,a=ra(o,s),l=rB(a)?a.canActivate(e,t):Ni(s,()=>a(e,t));return br(l).pipe(Dn())}));return te(r).pipe(ia())}function pB(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>XL(s)).filter(s=>s!==null).map(s=>od(()=>{let a=s.guards.map(l=>{let u=gc(s.node)??n,d=ra(l,u),f=oB(d)?d.canActivateChild(i,t):Ni(u,()=>d(i,t));return br(f).pipe(Dn())});return te(a).pipe(ia())}));return te(o).pipe(ia())}function mB(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return te(!0);let s=o.map(a=>{let l=gc(e)??r,u=ra(a,l),d=sB(u)?u.canDeactivate(t,e,n,i):Ni(l,()=>u(t,e,n,i));return br(d).pipe(Dn())});return te(s).pipe(ia())}function gB(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return te(!0);let o=r.map(s=>{let a=ra(s,t),l=iB(a)?a.canLoad(e,n):Ni(t,()=>a(e,n));return br(l)});return te(o).pipe(ia(),AT(i))}function AT(t){return Em(lt(e=>{if(na(e))throw IT(t,e)}),J(e=>e===!0))}function _B(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return te(!0);let o=r.map(s=>{let a=ra(s,t),l=aB(a)?a.canMatch(e,n):Ni(t,()=>a(e,n));return br(l)});return te(o).pipe(ia(),AT(i))}var pc=class{constructor(e){this.segmentGroup=e||null}},kh=class extends Error{constructor(e){super(),this.urlTree=e}};function Js(t){return Ds(new pc(t))}function yB(t){return Ds(new oe(4e3,!1))}function vB(t){return Ds(TT(!1,yn.GuardRejected))}var Ry=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return te(i);if(r.numberOfChildren>1||!r.children[we])return yB(e.redirectTo);r=r.children[we]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new kh(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new yr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new je(o,s)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new oe(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Py={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wB(t,e,n,i,r){let o=Gy(t,e,n);return o.matched?(i=QL(e,i),_B(i,e,n,r).pipe(J(s=>s===!0?o:Y({},Py)))):te(o)}function Gy(t,e,n){if(e.path==="**")return bB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?Y({},Py):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||_L)(n,t,e);if(!r)return Y({},Py);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?Y(Y({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function bB(t){return{matched:!0,parameters:t.length>0?lT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function sT(t,e,n,i){return n.length>0&&CB(t,n,i)?{segmentGroup:new je(e,DB(i,new je(n,t.children))),slicedSegments:[]}:n.length===0&&IB(t,n,i)?{segmentGroup:new je(t.segments,EB(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new je(t.segments,t.children),slicedSegments:n}}function EB(t,e,n,i){let r={};for(let o of n)if(Vh(t,e,o)&&!i[hi(o)]){let s=new je([],{});r[hi(o)]=s}return Y(Y({},i),r)}function DB(t,e){let n={};n[we]=e;for(let i of t)if(i.path===""&&hi(i)!==we){let r=new je([],{});n[hi(i)]=r}return n}function CB(t,e,n){return n.some(i=>Vh(t,e,i)&&hi(i)!==we)}function IB(t,e,n){return n.some(i=>Vh(t,e,i))}function Vh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function TB(t,e,n,i){return hi(t)!==i&&(i===we||!Vh(e,n,t))?!1:Gy(e,t,n).matched}function SB(t,e,n){return e.length===0&&!t.children[n]}var Ny=class{};function MB(t,e,n,i,r,o,s="emptyOnly"){return new ky(t,e,n,i,r,s,o).recognize()}var AB=31,ky=class{constructor(e,n,i,r,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ry(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new oe(4002,`'${e.segmentGroup}'`)}recognize(){let e=sT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(n=>{let i=new hc([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,{},we,this.rootComponentType,null,{}),r=new _n(i,n),o=new Ph("",r),s=FL(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,we).pipe(rr(i=>{if(i instanceof kh)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof pc?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=Ly(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(J(o=>o instanceof _n?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return Me(r).pipe(or(o=>{let s=i.children[o],a=YL(n,o);return this.processSegmentGroup(e,a,s,o)}),so((o,s)=>(o.push(...s),o)),sr(null),km(),at(o=>{if(o===null)return Js(i);let s=xT(o);return xB(s),te(s)}))}processSegment(e,n,i,r,o,s){return Me(n).pipe(or(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,o,s).pipe(rr(l=>{if(l instanceof pc)return te(null);throw l}))),Dn(a=>!!a),rr(a=>{if(MT(a))return SB(i,r,o)?te(new Ny):Js(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,o,s,a){return TB(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s):Js(r):Js(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:u,remainingSegments:d}=Gy(n,r,o);if(!a)return Js(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>AB&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,f).pipe(at(m=>this.processSegment(e,i,n,m.concat(d),s,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let s=wB(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(Ge(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Ge(({routes:l})=>{let u=i._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:m}=a,_=new hc(d,m,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,RB(i),hi(i),i.component??i._loadedComponent??null,i,PB(i)),{segmentGroup:D,slicedSegments:T}=sT(n,d,f,l);if(T.length===0&&D.hasChildren())return this.processChildren(u,l,D).pipe(J(k=>k===null?null:new _n(_,k)));if(l.length===0&&T.length===0)return te(new _n(_,[]));let M=hi(i)===o;return this.processSegment(u,l,D,T,M?we:o,!0).pipe(J(k=>new _n(_,k instanceof _n?[k]:[])))}))):Js(n)))}getChildConfig(e,n,i){return n.children?te({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?te({routes:n._loadedRoutes,injector:n._loadedInjector}):gB(e,n,i,this.urlSerializer).pipe(at(r=>r?this.configLoader.loadChildren(e,n).pipe(lt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):vB(n))):te({routes:[],injector:e})}};function xB(t){t.sort((e,n)=>e.value.outlet===we?-1:n.value.outlet===we?1:e.value.outlet.localeCompare(n.value.outlet))}function OB(t){let e=t.value.routeConfig;return e&&e.path===""}function xT(t){let e=[],n=new Set;for(let i of t){if(!OB(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=xT(i.children);e.push(new _n(i.value,r))}return e.filter(i=>!n.has(i))}function RB(t){return t.data||{}}function PB(t){return t.resolve||{}}function NB(t,e,n,i,r,o){return at(s=>MB(t,e,n,i,s.extractedUrl,r,o).pipe(J(({state:a,tree:l})=>ke(Y({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function kB(t,e){return at(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return te(n);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of OT(l))s.add(u);let a=0;return Me(s).pipe(or(l=>o.has(l)?FB(l,i,t,e):(l.data=Ly(l,l.parent,t).resolve,te(void 0))),lt(()=>a++),Is(1),at(l=>a===s.size?te(n):Ct))})}function OT(t){let e=t.children.map(n=>OT(n)).flat();return[t,...e]}function FB(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!DT(r)&&(o[mc]=r.title),VB(o,t,e,i).pipe(J(s=>(t._resolvedData=s,t.data=Ly(t,t.parent,n).resolve,null)))}function VB(t,e,n,i){let r=dy(t);if(r.length===0)return te({});let o={};return Me(r).pipe(at(s=>LB(t[s],e,n,i).pipe(Dn(),lt(a=>{o[s]=a}))),Is(1),Pm(o),rr(s=>MT(s)?Ct:Ds(s)))}function LB(t,e,n,i){let r=gc(e)??i,o=ra(t,r),s=o.resolve?o.resolve(e,n):Ni(r,()=>o(e,n));return br(s)}function cy(t){return Ge(e=>{let n=t(e);return n?Me(n).pipe(J(()=>e)):te(e)})}var RT=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===we);return r}getResolvedTitleForRoute(i){return i.data[mc]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(BB),providedIn:"root"});let t=e;return t})(),BB=(()=>{let e=class e extends RT{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)($(tT))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hy=new K("",{providedIn:"root",factory:()=>({})}),zy=new K(""),jB=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(j_)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return te(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=br(i.loadComponent()).pipe(J(PT),lt(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),Si(()=>{this.componentLoaders.delete(i)})),o=new _s(r,()=>new Le).pipe(gs());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=UB(r,this.compiler,i,this.onLoadEndListener).pipe(Si(()=>{this.childrenLoaders.delete(r)})),a=new _s(s,()=>new Le).pipe(gs());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function UB(t,e,n,i){return br(t.loadChildren()).pipe(J(PT),at(r=>r instanceof jl||Array.isArray(r)?te(r):Me(e.compileModuleAsync(r))),J(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(zy,[],{optional:!0,self:!0}).flat()),{routes:s.map($y),injector:o}}))}function $B(t){return t&&typeof t=="object"&&"default"in t}function PT(t){return $B(t)?t.default:t}var qy=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(GB),providedIn:"root"});let t=e;return t})(),GB=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),HB=new K("");var zB=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=V(jB),this.environmentInjector=V(kt),this.urlSerializer=V(Vy),this.rootContexts=V(Fh),this.location=V(Kl),this.inputBindingEnabled=V(Uy,{optional:!0})!==null,this.titleStrategy=V(RT),this.options=V(Hy,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(qy),this.createViewTransition=V(HB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>te(void 0),this.rootComponentType=null;let i=o=>this.events.next(new wy(o)),r=o=>this.events.next(new by(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ke(Y(Y({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new pt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oc,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(it(s=>s.id!==0),J(s=>ke(Y({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ge(s=>{let a=!1,l=!1;return te(s).pipe(Ge(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",yn.SupersededByNewNavigation),Ct;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ke(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!d&&f!=="reload"){let m="";return this.events.next(new Mo(u.id,this.urlSerializer.serialize(u.rawUrl),m,my.IgnoredSameUrlNavigation)),u.resolve(null),Ct}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return te(u).pipe(Ge(m=>{let _=this.transitions?.getValue();return this.events.next(new lc(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),_!==this.transitions?.getValue()?Ct:Promise.resolve(m)}),NB(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=ke(Y({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let _=new xh(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:m,extractedUrl:_,source:D,restoredState:T,extras:M}=u,k=new lc(m,this.urlSerializer.serialize(_),D,T);this.events.next(k);let q=bT(this.rootComponentType).snapshot;return this.currentTransition=s=ke(Y({},u),{targetSnapshot:q,urlAfterRedirects:_,extras:ke(Y({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,te(s)}else{let m="";return this.events.next(new Mo(u.id,this.urlSerializer.serialize(u.extractedUrl),m,my.IgnoredByUrlHandlingStrategy)),u.resolve(null),Ct}}),lt(u=>{let d=new gy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),J(u=>(this.currentTransition=s=ke(Y({},u),{guards:ZL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),lB(this.environmentInjector,u=>this.events.next(u)),lt(u=>{if(s.guardsResult=u.guardsResult,na(u.guardsResult))throw IT(this.urlSerializer,u.guardsResult);let d=new _y(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),it(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",yn.GuardRejected),!1)),cy(u=>{if(u.guards.canActivateChecks.length)return te(u).pipe(lt(d=>{let f=new yy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ge(d=>{let f=!1;return te(d).pipe(kB(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",yn.NoDataFromResolver)}}))}),lt(d=>{let f=new vy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),cy(u=>{let d=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(lt(_=>{f.component=_}),J(()=>{})));for(let _ of f.children)m.push(...d(_));return m};return Il(d(u.targetSnapshot.root)).pipe(sr(null),on(1))}),cy(()=>this.afterPreactivation()),Ge(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?Me(f).pipe(J(()=>s)):te(s)}),J(u=>{let d=HL(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=ke(Y({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),lt(()=>{this.events.next(new uc)}),JL(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),on(1),lt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new So(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),zt(this.transitionAbortSubject.pipe(lt(u=>{throw u}))),Si(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",yn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),rr(u=>{if(l=!0,ST(u))this.events.next(new vr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),WL(u)?this.events.next(new dc(u.url)):s.resolve(!1);else{this.events.next(new cc(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(u))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Ct}))}))}cancelNavigationTransition(i,r,o){let s=new vr(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qB(t){return t!==oc}var WB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(KB),providedIn:"root"});let t=e;return t})(),Fy=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},KB=(()=>{let e=class e extends Fy{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),NT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(QB),providedIn:"root"});let t=e;return t})(),QB=(()=>{let e=class e extends NT{constructor(){super(...arguments),this.location=V(Kl),this.urlSerializer=V(Vy),this.options=V(Hy,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(qy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new yr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=bT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof lc)this.stateMemento=this.createStateMemento();else if(i instanceof Mo)this.rawUrlTree=r.initialUrl;else if(i instanceof xh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof uc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof vr&&(i.code===yn.GuardRejected||i.code===yn.NoDataFromResolver)?this.restoreHistory(r):i instanceof cc?this.restoreHistory(r,!0):i instanceof So&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ic=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ic||{});function YB(t,e){t.events.pipe(it(n=>n instanceof So||n instanceof vr||n instanceof cc||n instanceof Mo),J(n=>n instanceof So||n instanceof Mo?ic.COMPLETE:(n instanceof vr?n.code===yn.Redirect||n.code===yn.SupersededByNewNavigation:!1)?ic.REDIRECTING:ic.FAILED),it(n=>n!==ic.REDIRECTING),on(1)).subscribe(()=>{e()})}function JB(t){throw t}var ZB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},oa=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(ah),this.stateManager=V(NT),this.options=V(Hy,{optional:!0})||{},this.pendingTasks=V(vo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(zB),this.urlSerializer=V(Vy),this.location=V(Kl),this.urlHandlingStrategy=V(qy),this._events=new Le,this.errorHandler=this.options.errorHandler||JB,this.navigated=!1,this.routeReuseStrategy=V(WB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(zy,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(Uy,{optional:!0}),this.eventsSubscription=new ft,this.isNgZoneEnabled=V(Ie)instanceof Ie&&Ie.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof vr&&r.code!==yn.Redirect&&r.code!==yn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof So)this.navigated=!0;else if(r instanceof dc){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||qB(o.source)};this.scheduleNavigation(a,oc,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}tj(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=Y({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map($y),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:a,f=null;switch(l){case"merge":f=Y(Y({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let _=o?o.snapshot:this.routerState.snapshot.root;m=_T(_)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),m=this.currentUrlTree.root}return yT(m,i,f,d??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=na(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,oc,null,r)}navigate(i,r={skipLocationChange:!1}){return ej(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=Y({},ZB):r===!1?o=Y({},XB):o=r,na(i))return nT(this.currentUrlTree,i,o);let s=this.parseUrl(i);return nT(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,u,d;a?(l=a.resolve,u=a.reject,d=a.promise):d=new Promise((m,_)=>{l=m,u=_});let f=this.pendingTasks.add();return YB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:l,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ej(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new oe(4008,!1)}function tj(t){return!(t instanceof uc)&&!(t instanceof dc)}var nj=new K("");function Lh(t,...e){return _o([{provide:zy,multi:!0,useValue:t},[],{provide:wr,useFactory:ij,deps:[oa]},{provide:lh,multi:!0,useFactory:rj},e.map(n=>n.\u0275providers)])}function ij(t){return t.routerState.root}function rj(){let t=V(Hn);return e=>{let n=t.get(gr);if(e!==n.components[0])return;let i=t.get(oa),r=t.get(oj);t.get(sj)===1&&i.initialNavigation(),t.get(aj,null,De.Optional)?.setUpPreloading(),t.get(nj,null,De.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var oj=new K("",{factory:()=>new Le}),sj=new K("",{providedIn:"root",factory:()=>1});var aj=new K("");var lj="firebase",cj="10.13.0";bn(lj,cj,"app");var Mn=new Ri("ANGULARFIRE2_VERSION");var uj=(t,e)=>{let n=e?[e]:Fu(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},ji=class{constructor(){return uj(dj)}},dj="app-check";function Wy(){}var Bh=class{zone;delegate;constructor(e,n=Sm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},Ky=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wy,{},Wy,Wy)),n.pipe(lt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ao=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Bh(Zone.current)),this.insideAngular=n.run(()=>new Bh(Zone.current,bs)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)($(Ie))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hj(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function dn(t){return fj(hj())(t)}function fj(t){return function(n){return n=n.lift(new Ky(t.ngZone)),n.pipe(kn(t.outsideAngular),Jt(t.insideAngular))}}var sa=class{constructor(e){return e}},Yy=class{constructor(){return Fu()}};function pj(t){return t&&t.length===1?t[0]:new sa(ku())}var FT=new K("angularfire2._apps"),mj={provide:sa,useFactory:pj,deps:[[new Pi,FT]]},gj={provide:Yy,deps:[[new Pi,FT]]};var VT=(()=>{class t{constructor(n){bn("angularfire",Mn.full,"core"),bn("angularfire",Mn.full,"app"),bn("angular",sh.full,n.toString())}static \u0275fac=function(i){return new(i||t)($(Lt))};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[mj,gj]})}return t})();var Er={BASE_API_URL:"",firebase:{apiKey:"AIzaSyBNWYDp0fPgLU0npKMC0RoS6C14fHp2mpk",authDomain:"comemivesto-5e5f9.firebaseapp.com",projectId:"comemivesto-5e5f9",storageBucket:"comemivesto-5e5f9.appspot.com",messagingSenderId:"124990581718",appId:"1:124990581718:web:51c8cbf699123bd0e8d277",measurementId:"G-8D9XBPY0Q7"}};function _j(t,e){if(t&1){let n=Qe();S(0,"button",7),he("click",function(r){ue(n);let o=ee();return de(o.onClickAddButton(r))}),ae(1,"i",8),B(2," Aggiungi "),A()}}function yj(t,e){if(t&1){let n=Qe();S(0,"button",9),he("click",function(r){ue(n);let o=ee();return de(o.onClickCrocetta(r))}),ae(1,"i",10),A()}}var jh=(()=>{let e=class e{constructor(){this.caption="",this.cssClass="",this.showBreadcrumb=!1,this.isFooter=!1,this.isClosable=!0,this.addButtonShow=!1,this.help="",this.idHelper=0,this.emitHelperClick=new ge,this.emitChiusura=new ge,this.emitAddEvent=new ge,this.emitNavCustomClick=new ge,this.emitButtonToolbarClick=new ge,this.emitBreadCrumbClick=new ge}hideShowToolbarMenu(i){this.emitChiusura.emit("closeToolbar")}onClickCrocetta(i){this.emitChiusura.emit(i)}onClickAddButton(i){this.emitAddEvent.emit(i)}showDropdownMenu(i,r){let o=document.getElementById(r);o!=null&&(o.classList.contains("show")||o.classList.add("show"))}hideDropdownMenu(i,r){let o=document.getElementById(r);o?.classList.remove("show")}onBreadCrumbClick(i,r,o=0){}onBreadCrumbRemoveClick(i,r,o){}emitHelpClick(i){}navigationClick(i){this.emitNavCustomClick.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-caption"]],inputs:{caption:"caption",cssClass:"cssClass",showBreadcrumb:"showBreadcrumb",breadcrumbNavigation:"breadcrumbNavigation",isFooter:"isFooter",isClosable:"isClosable",addButtonShow:"addButtonShow",help:"help",idHelper:"idHelper"},outputs:{emitHelperClick:"emitHelperClick",emitChiusura:"emitChiusura",emitAddEvent:"emitAddEvent",emitNavCustomClick:"emitNavCustomClick",emitButtonToolbarClick:"emitButtonToolbarClick",emitBreadCrumbClick:"emitBreadCrumbClick"},standalone:!0,features:[xe],decls:8,vars:4,consts:[[1,"caption-container",3,"ngClass"],[1,"item-wrap","wrap-item-title"],[1,"page-title"],[1,"item-wrap","last-item-wrap"],[1,""],["class","btn ana-button",3,"click",4,"ngIf"],["class","icon-button",3,"click",4,"ngIf"],[1,"btn","ana-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"icon-button",3,"click"],[1,"mdi","mdi-window-close"]],template:function(r,o){r&1&&(S(0,"div",0)(1,"div",1)(2,"h2",2),B(3),A()(),S(4,"div",3)(5,"div",4),Ce(6,_j,3,0,"button",5)(7,yj,2,0,"button",6),A()()()),r&2&&(Q("ngClass",o.cssClass),U(3),qn(o.caption),U(3),Q("ngIf",o.addButtonShow),U(),Q("ngIf",o.isClosable))},dependencies:[rt,Qs,ci],styles:[".caption-container[_ngcontent-%COMP%]{display:flex;width:100%;position:relative;flex-direction:row;align-content:center;justify-content:space-between;align-items:center;height:var(--height_caption)}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px 5px}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-logo-caption[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:25px}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-mButton[_ngcontent-%COMP%], .caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-breadcrumb[_ngcontent-%COMP%]{flex-grow:0}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-breadcrumb[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{margin-bottom:0}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-title[_ngcontent-%COMP%]{text-align:start}.caption-container[_ngcontent-%COMP%]   .item-wrap.last-item-wrap[_ngcontent-%COMP%]{text-align:end;min-width:150px}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.3rem;text-align:left;font-weight:500}  .vertical h2{margin-left:10%;width:50%;text-align:center}  .vertical-text{writing-mode:vertical-lr;text-orientation:upright;width:0px;font-size:24px;word-break:break-all;white-space:pre-wrap;color:#0b0b0b;font-weight:900;font-family:Montserrat}.currentModule[_ngcontent-%COMP%]{font-size:12px;margin:0;color:#fff!important;font-family:Montserrat}"]});let t=e;return t})();var vj=["toolbarTab"],wj=["*"];function bj(t,e){if(t&1&&(S(0,"h2"),ae(1,"span",10),B(2),A()),t&2){let n=ee();U(2),qn(n.subTitle)}}function Ej(t,e){if(t&1&&(S(0,"div",11),ae(1,"span",12),B(2),A()),t&2){let n=ee();U(2),St(" ",n.tip," ")}}var Dr=(()=>{let e=class e{constructor(){this.caption="",this.subTitle="",this.tip="",this.addButtonShow=!1,this.helpDoc="",this.breadcrumbNavigation=[],this.emittChiusura=new ge,this.emittEventButton=new ge,this.emitToolbarLeft=new ge,this.timeInterval=0,this.itemTabs=[],this.showItemsTabs=!1}ngAfterViewInit(){this.getWindowHeight()}getWindowHeight(){let i=window.innerHeight,r=document.documentElement.clientHeight,o=Math.max(i,r),s,a,l;s=document.getElementById("header").offsetHeight,a=document.getElementById("footer").offsetHeight,setTimeout(()=>{l=document.getElementById("horizontalMenucontainer").offsetHeight,l==0&&(l=60.5),this.heightWrap=o-s-a-l,this.heightWrap=this.heightWrap-13},300)}onCrocettaClick(i){this.emittChiusura.emit(i)}buttonToolbarLeft(i){this.emitToolbarLeft.emit(i)}onAddClick(i){this.emittEventButton.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-anagrafica-wrapper"]],viewQuery:function(r,o){if(r&1&&Ws(vj,7),r&2){let s;bo(s=Eo())&&(o.toolbarTab=s.first)}},inputs:{caption:"caption",subTitle:"subTitle",tip:"tip",addButtonShow:"addButtonShow",helpDoc:"helpDoc",breadcrumbNavigation:"breadcrumbNavigation"},outputs:{emittChiusura:"emittChiusura",emittEventButton:"emittEventButton",emitToolbarLeft:"emitToolbarLeft"},standalone:!0,features:[xe],ngContentSelectors:wj,decls:11,vars:12,consts:[["id","cWrap",1,"content-wrap"],[1,"anagrafica-wrap"],[3,"emettiChiusura","emitAddEvent","caption","showBreadcrumb","addButtonShow","help","breadcrumbNavigation","isClosable","isFooter"],[1,"anagrafica-container"],[1,"anagrafica-row"],[1,"col-lg-12","wrapForm"],[1,"text"],[4,"ngIf"],["class","alert alert-primary d-flex align-items-centeralert-dismissible fade show","role","alert",4,"ngIf"],[3,"emettiChiusura","showBreadcrumb","isClosable","isFooter"],[1,"mdi","mdi-database"],["role","alert",1,"alert","alert-primary","d-flex","align-items-centeralert-dismissible","fade","show"],[1,"mdi","mdi-lightbulb-alert-outline","me-2"]],template:function(r,o){r&1&&(ih(),S(0,"div",0)(1,"div",1)(2,"app-caption",2),he("emettiChiusura",function(a){return o.onCrocettaClick(a)})("emitAddEvent",function(a){return o.onAddClick(a)}),A(),S(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),Ce(7,bj,3,1,"h2",7),A(),Ce(8,Ej,3,1,"div",8),rh(9,0,["id","ng-content"]),A()()(),S(10,"app-caption",9),he("emettiChiusura",function(a){return o.onCrocettaClick(a)}),A()()()),r&2&&(U(2),Q("caption",o.caption)("showBreadcrumb",!1)("addButtonShow",o.addButtonShow)("help",o.helpDoc)("breadcrumbNavigation",o.breadcrumbNavigation)("isClosable",!1)("isFooter",!1),U(5),Q("ngIf",o.subTitle),U(),Q("ngIf",o.tip),U(2),Q("showBreadcrumb",!1)("isClosable",!1)("isFooter",!0))},dependencies:[jh,rt,ci],styles:['@charset "UTF-8";  .isPopUp{position:absolute;bottom:0}  .content-wrap{position:relative;overflow-y:auto;width:var(--width_container);margin:5px auto}  .content-wrap .anagrafica-wrap{margin-top:.3rem}  .content-wrap .anagrafica-wrap .anagrafica-container{box-shadow:0 3px 5px #0000000b;margin-top:.88rem;background-color:#fff;border:1px solid #e2e8f0;border-radius:.6rem}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row{position:relative;padding:1.25rem}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar{position:absolute;left:0;top:0;padding:0;width:55px;z-index:2;box-shadow:2px 0 20px #45414e12;border-top:1px solid rgba(0,0,0,.15)}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar.closed{width:0;visibility:hidden}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar.open{width:177px;display:block;visibility:visible;height:100%}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar{-moz-transition:ease .35s;-o-transition:ease .35s;-webkit-transition:ease .3s;transition:ease .35s}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .toolbar-shadow{box-shadow:2px 0 20px #45414e12!important;padding-right:0}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sidebar-sticky-top{padding:0 6px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .item-nav{display:block;height:35px;border-bottom:1px solid rgba(253,253,253,.531);width:100%;padding:0}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .item-nav .item-content i{font-size:25px!important;width:28px!important;height:28px!important;line-height:28px!important;color:#fff!important;font-weight:300!important}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sidebar-sticky-bottom .item-nav{height:26px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sub-item-nav :before{content:"\\fa14";display:block;font-family:Material Design Icons;color:#fff;width:5px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar p{font-size:12px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapForm{border:1px solid rgba(226,232,240,.6);border-radius:.6rem;padding:1.25rem}']});let t=e;return t})();var LT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[xe],decls:2,vars:0,template:function(r,o){r&1&&(S(0,"app-anagrafica-wrapper"),B(1,` dddddd
`),A())},dependencies:[Dr]});let t=e;return t})();var Cj=new Map,Ij={activated:!1,tokenObservers:[]},Tj={initialized:!1,enabled:!1};function Kn(t){return Cj.get(t)||Object.assign({},Ij)}function GT(){return Tj}var Sj="https://content-firebaseappcheck.googleapis.com/v1";var Mj="exchangeDebugToken",BT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},dK=24*60*60*1e3;var Zy=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return O(this,null,function*(){this.stop();try{this.pending=new am,this.pending.promise.catch(n=>{}),yield Aj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new am,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Aj(t){return new Promise(e=>{setTimeout(e,t)})}var xj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Cr=new Y1("appCheck","AppCheck",xj);function HT(t){if(!Kn(t).activated)throw Cr.create("use-before-activation",{appName:t.name})}function zT(i,r){return O(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let _=yield s.getHeartbeatsHeader();_&&(o["X-Firebase-Client"]=_)}let a={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(t,a)}catch(_){throw Cr.create("fetch-network-error",{originalErrorMessage:_?.message})}if(l.status!==200)throw Cr.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(_){throw Cr.create("fetch-parse-error",{originalErrorMessage:_?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Cr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:u.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function qT(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${Sj}/projects/${n}/apps/${i}:${Mj}?key=${r}`,body:{debug_token:e}}}var Oj="firebase-app-check-database",Rj=1,Xy="firebase-app-check-store";var Uh=null;function Pj(){return Uh||(Uh=new Promise((t,e)=>{try{let n=indexedDB.open(Oj,Rj);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Cr.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Xy,{keyPath:"compositeKey"})}}}catch(n){e(Cr.create("storage-open",{originalErrorMessage:n?.message}))}}),Uh)}function Nj(t,e){return kj(Fj(t),e)}function kj(t,e){return O(this,null,function*(){let i=(yield Pj()).transaction(Xy,"readwrite"),o=i.objectStore(Xy).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},i.onerror=l=>{var u;a(Cr.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function Fj(t){return`${t.options.appId}-${t.name}`}var e0=new Nu("@firebase/app-check");function Jy(t,e){return Pu()?Nj(t,e).catch(n=>{e0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function WT(){return GT().enabled}function KT(){return O(this,null,function*(){let t=GT();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Vj={error:"UNKNOWN_ERROR"};function Lj(t){return W1.encodeString(JSON.stringify(t),!1)}function t0(t,e=!1){return O(this,null,function*(){let n=t.app;HT(n);let i=Kn(n),r=i.token,o;if(r&&!yc(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(yc(l)?r=l:yield Jy(n,void 0))}if(!e&&r&&yc(r))return{token:r.token};let s=!1;if(WT()){i.exchangeTokenPromise||(i.exchangeTokenPromise=zT(qT(n,yield KT()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let l=yield i.exchangeTokenPromise;return yield Jy(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield Kn(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?e0.warn(l.message):e0.error(l),o=l}let a;return r?o?yc(r)?a={token:r.token,internalError:o}:a=UT(o):(a={token:r.token},i.token=r,yield Jy(n,r)):a=UT(o),s&&$j(n,a),a})}function Bj(t){return O(this,null,function*(){let e=t.app;HT(e);let{provider:n}=Kn(e);if(WT()){let i=yield KT(),{token:r}=yield zT(qT(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function jj(t,e,n,i){let{app:r}=t,o=Kn(r),s={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&yc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),jT(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>jT(t))}function QT(t,e){let n=Kn(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function jT(t){let{app:e}=t,n=Kn(e),i=n.tokenRefresher;i||(i=Uj(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function Uj(t){let{app:e}=t;return new Zy(()=>O(this,null,function*(){let n=Kn(e),i;if(n.token?i=yield t0(t,!0):i=yield t0(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Kn(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},BT.RETRIAL_MIN_WAIT,BT.RETRIAL_MAX_WAIT)}function $j(t,e){let n=Kn(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function yc(t){return t.expireTimeMillis-Date.now()>0}function UT(t){return{token:Lj(Vj),error:t}}var n0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Kn(this.app);for(let n of e)QT(this.app,n.next);return Promise.resolve()}};function Gj(t,e){return new n0(t,e)}function Hj(t){return{getToken:e=>t0(t,e),getLimitedUseToken:()=>Bj(t),addTokenListener:e=>jj(t,"INTERNAL",e),removeTokenListener:e=>QT(t.app,e)}}var zj="@firebase/app-check",qj="0.8.7";var Wj="app-check",$T="app-check-internal";function Kj(){bl(new to(Wj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Gj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider($T).initialize()})),bl(new to($T,t=>{let e=t.getProvider("app-check").getImmediate();return Hj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),bn(zj,qj)}Kj();var Qj=["localhost","0.0.0.0","127.0.0.1"],DK=typeof window<"u"&&Qj.includes(window.location.hostname);var Yj="firebase",Jj="10.13.0";Pt.registerVersion(Yj,Jj,"app-compat");var Zj=["ngOnDestroy"],Gh=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(Zj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(u=>n.run(()=>u)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,u)=>s.then(d=>{let f=d?.(...u);return i?.spy?.apply&&i.spy.apply(o,u,f),f})})})});var $h=class{constructor(e){return e}},Ir=new K("angularfire2.app.options"),Tr=new K("angularfire2.app.name");function xo(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=Pt.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>Pt.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;Xj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new $h(s)}var Xj=(t,...e)=>{U_()&&typeof console<"u"&&console[t](...e)},eU={provide:$h,useFactory:xo,deps:[Ir,Ie,[new Pi,Tr]]},JT=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:Ir,useValue:n},{provide:Tr,useValue:i}]}}constructor(n){Pt.registerVersion("angularfire",Mn.full,"core"),Pt.registerVersion("angularfire",Mn.full,"app-compat"),Pt.registerVersion("angular",sh.full,n.toString())}static \u0275fac=function(i){return new(i||t)($(Lt))};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[eU]})}return t})();function aa(t,e,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return tU(r,s)||(YT("error",`${e} was already initialized on the ${n} Firebase App with different settings.${nU?" You may need to reload as Firebase is not HMR aware.":""}`),YT("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function tU(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var nU=typeof module<"u"&&!!module.hot,YT=(t,...e)=>{U_()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var r0=new K("angularfire2.auth.use-emulator"),o0=new K("angularfire2.auth.settings"),s0=new K("angularfire2.auth.tenant-id"),a0=new K("angularfire2.auth.langugage-code"),l0=new K("angularfire2.auth.use-device-language"),c0=new K("angularfire.auth.persistence"),u0=(t,e,n,i,r,o,s,a)=>aa(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let l=e.runOutsideAngular(()=>t.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(let[u,d]of Object.entries(s))l.settings[u]=d;return a&&l.setPersistence(a),l},[n,i,r,o,s,a]),d0=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,l,u,d,f,m,_){let D=new Le,T=te(void 0).pipe(Jt(s.outsideAngular),Ge(()=>o.runOutsideAngular(()=>import("./chunk-T7Z74EPC.js"))),J(()=>xo(n,o,i)),J(M=>u0(M,o,a,u,d,f,l,m)),Ts({bufferSize:1,refCount:!1}));if(_r(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=te(null);else{T.pipe(Dn()).subscribe();let M=T.pipe(Ge(j=>j.getRedirectResult().then(W=>W,()=>null)),dn,Ts({bufferSize:1,refCount:!1})),k=T.pipe(Ge(j=>new fe(W=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(le=>W.next(le),le=>W.error(le),()=>W.complete()))})))),q=T.pipe(Ge(j=>new fe(W=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(le=>W.next(le),le=>W.error(le),()=>W.complete()))}))));this.authState=M.pipe(ud(k),kn(s.outsideAngular),Jt(s.insideAngular)),this.user=M.pipe(ud(q),kn(s.outsideAngular),Jt(s.insideAngular)),this.idToken=this.user.pipe(Ge(j=>j?Me(j.getIdToken()):te(null))),this.idTokenResult=this.user.pipe(Ge(j=>j?Me(j.getIdTokenResult()):te(null))),this.credential=sd(M,D,this.authState.pipe(it(j=>!j))).pipe(J(j=>j?.user?j:null),kn(s.outsideAngular),Jt(s.insideAngular))}return Gh(this,T,o,{spy:{apply:(M,k,q)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&q.then(j=>D.next(j))}}})}static \u0275fac=function(i){return new(i||t)($(Ir),$(Tr,8),$(Lt),$(Ie),$(Ao),$(r0,8),$(o0,8),$(s0,8),$(a0,8),$(l0,8),$(c0,8),$(ji,8))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),ZT=(()=>{class t{constructor(){Pt.registerVersion("angularfire",Mn.full,"auth-compat")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[d0]})}return t})();var XT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eS={};var Sr,h0;(function(){var t;function e(b,y){function w(){}w.prototype=y.prototype,b.D=y.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(E,C,x){for(var v=Array(arguments.length-2),Di=2;Di<arguments.length;Di++)v[Di-2]=arguments[Di];return y.prototype[C].apply(E,v)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)E[C]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(C=0;16>C;++C)E[C]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=b.g[0],w=b.g[1],C=b.g[2];var x=b.g[3],v=y+(x^w&(C^x))+E[0]+3614090360&4294967295;y=w+(v<<7&4294967295|v>>>25),v=x+(C^y&(w^C))+E[1]+3905402710&4294967295,x=y+(v<<12&4294967295|v>>>20),v=C+(w^x&(y^w))+E[2]+606105819&4294967295,C=x+(v<<17&4294967295|v>>>15),v=w+(y^C&(x^y))+E[3]+3250441966&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(x^w&(C^x))+E[4]+4118548399&4294967295,y=w+(v<<7&4294967295|v>>>25),v=x+(C^y&(w^C))+E[5]+1200080426&4294967295,x=y+(v<<12&4294967295|v>>>20),v=C+(w^x&(y^w))+E[6]+2821735955&4294967295,C=x+(v<<17&4294967295|v>>>15),v=w+(y^C&(x^y))+E[7]+4249261313&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(x^w&(C^x))+E[8]+1770035416&4294967295,y=w+(v<<7&4294967295|v>>>25),v=x+(C^y&(w^C))+E[9]+2336552879&4294967295,x=y+(v<<12&4294967295|v>>>20),v=C+(w^x&(y^w))+E[10]+4294925233&4294967295,C=x+(v<<17&4294967295|v>>>15),v=w+(y^C&(x^y))+E[11]+2304563134&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(x^w&(C^x))+E[12]+1804603682&4294967295,y=w+(v<<7&4294967295|v>>>25),v=x+(C^y&(w^C))+E[13]+4254626195&4294967295,x=y+(v<<12&4294967295|v>>>20),v=C+(w^x&(y^w))+E[14]+2792965006&4294967295,C=x+(v<<17&4294967295|v>>>15),v=w+(y^C&(x^y))+E[15]+1236535329&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(C^x&(w^C))+E[1]+4129170786&4294967295,y=w+(v<<5&4294967295|v>>>27),v=x+(w^C&(y^w))+E[6]+3225465664&4294967295,x=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(x^y))+E[11]+643717713&4294967295,C=x+(v<<14&4294967295|v>>>18),v=w+(x^y&(C^x))+E[0]+3921069994&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(C^x&(w^C))+E[5]+3593408605&4294967295,y=w+(v<<5&4294967295|v>>>27),v=x+(w^C&(y^w))+E[10]+38016083&4294967295,x=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(x^y))+E[15]+3634488961&4294967295,C=x+(v<<14&4294967295|v>>>18),v=w+(x^y&(C^x))+E[4]+3889429448&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(C^x&(w^C))+E[9]+568446438&4294967295,y=w+(v<<5&4294967295|v>>>27),v=x+(w^C&(y^w))+E[14]+3275163606&4294967295,x=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(x^y))+E[3]+4107603335&4294967295,C=x+(v<<14&4294967295|v>>>18),v=w+(x^y&(C^x))+E[8]+1163531501&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(C^x&(w^C))+E[13]+2850285829&4294967295,y=w+(v<<5&4294967295|v>>>27),v=x+(w^C&(y^w))+E[2]+4243563512&4294967295,x=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(x^y))+E[7]+1735328473&4294967295,C=x+(v<<14&4294967295|v>>>18),v=w+(x^y&(C^x))+E[12]+2368359562&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(w^C^x)+E[5]+4294588738&4294967295,y=w+(v<<4&4294967295|v>>>28),v=x+(y^w^C)+E[8]+2272392833&4294967295,x=y+(v<<11&4294967295|v>>>21),v=C+(x^y^w)+E[11]+1839030562&4294967295,C=x+(v<<16&4294967295|v>>>16),v=w+(C^x^y)+E[14]+4259657740&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(w^C^x)+E[1]+2763975236&4294967295,y=w+(v<<4&4294967295|v>>>28),v=x+(y^w^C)+E[4]+1272893353&4294967295,x=y+(v<<11&4294967295|v>>>21),v=C+(x^y^w)+E[7]+4139469664&4294967295,C=x+(v<<16&4294967295|v>>>16),v=w+(C^x^y)+E[10]+3200236656&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(w^C^x)+E[13]+681279174&4294967295,y=w+(v<<4&4294967295|v>>>28),v=x+(y^w^C)+E[0]+3936430074&4294967295,x=y+(v<<11&4294967295|v>>>21),v=C+(x^y^w)+E[3]+3572445317&4294967295,C=x+(v<<16&4294967295|v>>>16),v=w+(C^x^y)+E[6]+76029189&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(w^C^x)+E[9]+3654602809&4294967295,y=w+(v<<4&4294967295|v>>>28),v=x+(y^w^C)+E[12]+3873151461&4294967295,x=y+(v<<11&4294967295|v>>>21),v=C+(x^y^w)+E[15]+530742520&4294967295,C=x+(v<<16&4294967295|v>>>16),v=w+(C^x^y)+E[2]+3299628645&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(C^(w|~x))+E[0]+4096336452&4294967295,y=w+(v<<6&4294967295|v>>>26),v=x+(w^(y|~C))+E[7]+1126891415&4294967295,x=y+(v<<10&4294967295|v>>>22),v=C+(y^(x|~w))+E[14]+2878612391&4294967295,C=x+(v<<15&4294967295|v>>>17),v=w+(x^(C|~y))+E[5]+4237533241&4294967295,w=C+(v<<21&4294967295|v>>>11),v=y+(C^(w|~x))+E[12]+1700485571&4294967295,y=w+(v<<6&4294967295|v>>>26),v=x+(w^(y|~C))+E[3]+2399980690&4294967295,x=y+(v<<10&4294967295|v>>>22),v=C+(y^(x|~w))+E[10]+4293915773&4294967295,C=x+(v<<15&4294967295|v>>>17),v=w+(x^(C|~y))+E[1]+2240044497&4294967295,w=C+(v<<21&4294967295|v>>>11),v=y+(C^(w|~x))+E[8]+1873313359&4294967295,y=w+(v<<6&4294967295|v>>>26),v=x+(w^(y|~C))+E[15]+4264355552&4294967295,x=y+(v<<10&4294967295|v>>>22),v=C+(y^(x|~w))+E[6]+2734768916&4294967295,C=x+(v<<15&4294967295|v>>>17),v=w+(x^(C|~y))+E[13]+1309151649&4294967295,w=C+(v<<21&4294967295|v>>>11),v=y+(C^(w|~x))+E[4]+4149444226&4294967295,y=w+(v<<6&4294967295|v>>>26),v=x+(w^(y|~C))+E[11]+3174756917&4294967295,x=y+(v<<10&4294967295|v>>>22),v=C+(y^(x|~w))+E[2]+718787259&4294967295,C=x+(v<<15&4294967295|v>>>17),v=w+(x^(C|~y))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(C+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+C&4294967295,b.g[3]=b.g[3]+x&4294967295}i.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var w=y-this.blockSize,E=this.B,C=this.h,x=0;x<y;){if(C==0)for(;x<=w;)r(this,b,x),x+=this.blockSize;if(typeof b=="string"){for(;x<y;)if(E[C++]=b.charCodeAt(x++),C==this.blockSize){r(this,E),C=0;break}}else for(;x<y;)if(E[C++]=b[x++],C==this.blockSize){r(this,E),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var w=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=w&255,w/=256;for(this.u(b),b=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)b[w++]=this.g[y]>>>E&255;return b};function o(b,y){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=y(b)}function s(b,y){this.h=y;for(var w=[],E=!0,C=b.length-1;0<=C;C--){var x=b[C]|0;E&&x==y||(w[C]=x,E=!1)}this.g=w}var a={};function l(b){return-128<=b&&128>b?o(b,function(y){return new s([y|0],0>y?-1:0)}):new s([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return M(u(-b));for(var y=[],w=1,E=0;b>=w;E++)y[E]=b/w|0,w*=4294967296;return new s(y,0)}function d(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return M(d(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(y,8)),E=f,C=0;C<b.length;C+=8){var x=Math.min(8,b.length-C),v=parseInt(b.substring(C,C+x),y);8>x?(x=u(Math.pow(y,x)),E=E.j(x).add(u(v))):(E=E.j(w),E=E.add(u(v)))}return E}var f=l(0),m=l(1),_=l(16777216);t=s.prototype,t.m=function(){if(T(this))return-M(this).m();for(var b=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);b+=(0<=E?E:4294967296+E)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D(this))return"0";if(T(this))return"-"+M(this).toString(b);for(var y=u(Math.pow(b,6)),w=this,E="";;){var C=W(w,y).g;w=k(w,C.j(y));var x=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=C,D(w))return x+E;for(;6>x.length;)x="0"+x;E=x+E}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function D(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function T(b){return b.h==-1}t.l=function(b){return b=k(this,b),T(b)?-1:D(b)?0:1};function M(b){for(var y=b.g.length,w=[],E=0;E<y;E++)w[E]=~b.g[E];return new s(w,~b.h).add(m)}t.abs=function(){return T(this)?M(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0,C=0;C<=y;C++){var x=E+(this.i(C)&65535)+(b.i(C)&65535),v=(x>>>16)+(this.i(C)>>>16)+(b.i(C)>>>16);E=v>>>16,x&=65535,v&=65535,w[C]=v<<16|x}return new s(w,w[w.length-1]&-2147483648?-1:0)};function k(b,y){return b.add(M(y))}t.j=function(b){if(D(this)||D(b))return f;if(T(this))return T(b)?M(this).j(M(b)):M(M(this).j(b));if(T(b))return M(this.j(M(b)));if(0>this.l(_)&&0>b.l(_))return u(this.m()*b.m());for(var y=this.g.length+b.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<b.g.length;C++){var x=this.i(E)>>>16,v=this.i(E)&65535,Di=b.i(C)>>>16,tl=b.i(C)&65535;w[2*E+2*C]+=v*tl,q(w,2*E+2*C),w[2*E+2*C+1]+=x*tl,q(w,2*E+2*C+1),w[2*E+2*C+1]+=v*Di,q(w,2*E+2*C+1),w[2*E+2*C+2]+=x*Di,q(w,2*E+2*C+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function q(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function j(b,y){this.g=b,this.h=y}function W(b,y){if(D(y))throw Error("division by zero");if(D(b))return new j(f,f);if(T(b))return y=W(M(b),y),new j(M(y.g),M(y.h));if(T(y))return y=W(b,M(y)),new j(M(y.g),y.h);if(30<b.g.length){if(T(b)||T(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(b);)w=le(w),E=le(E);var C=ie(w,1),x=ie(E,1);for(E=ie(E,2),w=ie(w,2);!D(E);){var v=x.add(E);0>=v.l(b)&&(C=C.add(w),x=v),E=ie(E,1),w=ie(w,1)}return y=k(b,C.j(y)),new j(C,y)}for(C=f;0<=b.l(y);){for(w=Math.max(1,Math.floor(b.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),x=u(w),v=x.j(y);T(v)||0<v.l(b);)w-=E,x=u(w),v=x.j(y);D(x)&&(x=m),C=C.add(x),b=k(b,v)}return new j(C,b)}t.A=function(b){return W(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&b.i(E);return new s(w,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|b.i(E);return new s(w,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^b.i(E);return new s(w,this.h^b.h)};function le(b){for(var y=b.g.length+1,w=[],E=0;E<y;E++)w[E]=b.i(E)<<1|b.i(E-1)>>>31;return new s(w,b.h)}function ie(b,y){var w=y>>5;y%=32;for(var E=b.g.length-w,C=[],x=0;x<E;x++)C[x]=0<y?b.i(x+w)>>>y|b.i(x+w+1)<<32-y:b.i(x+w);return new s(C,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,h0=eS.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Sr=eS.Integer=s}).apply(typeof XT<"u"?XT:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ui={};var f0,p0,la,m0,vc,zh,g0,_0,y0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=n(this);function r(c,h){if(h)e:{var p=i;c=c.split(".");for(var g=0;g<c.length-1;g++){var I=c[g];if(!(I in p))break e;p=p[I]}c=c[c.length-1],g=p[c],h=h(g),h!=g&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,g=!1,I={next:function(){if(!g&&p<c.length){var N=p++;return{value:h(N,c[N]),done:!1}}return g=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}r("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function l(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function u(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,g),c.apply(h,I)}}return function(){return c.apply(h,arguments)}}function m(c,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function _(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function D(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(g,I,N){for(var G=Array(arguments.length-2),He=2;He<arguments.length;He++)G[He-2]=arguments[He];return h.prototype[I].apply(g,G)}}function T(c){let h=c.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=c[g];return p}return[]}function M(c,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(l(g)){let I=c.length||0,N=g.length||0;c.length=I+N;for(let G=0;G<N;G++)c[I+G]=g[G]}else c.push(g)}}class k{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(c){return/^[\s\xa0]*$/.test(c)}function j(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function W(c){return W[" "](c),c}W[" "]=function(){};var le=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ie(c,h,p){for(let g in c)h.call(p,c[g],g,c)}function b(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function y(c){let h={};for(let p in c)h[p]=c[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,h){let p,g;for(let I=1;I<arguments.length;I++){g=arguments[I];for(p in g)c[p]=g[p];for(let N=0;N<w.length;N++)p=w[N],Object.prototype.hasOwnProperty.call(g,p)&&(c[p]=g[p])}}function C(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function x(c){a.setTimeout(()=>{throw c},0)}function v(){var c=kp;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class Di{constructor(){this.h=this.g=null}add(h,p){let g=tl.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var tl=new k(()=>new jO,c=>c.reset());class jO{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let nl,il=!1,kp=new Di,Gb=()=>{let c=a.Promise.resolve(void 0);nl=()=>{c.then(UO)}};var UO=()=>{for(var c;c=v();){try{c.h.call(c.g)}catch(p){x(p)}var h=tl;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}il=!1};function Zi(){this.s=this.s,this.C=this.C}Zi.prototype.s=!1,Zi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Zi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ut(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}Ut.prototype.h=function(){this.defaultPrevented=!0};var $O=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function rl(c,h){if(Ut.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(le){e:{try{W(h.nodeName);var I=!0;break e}catch{}I=!1}I||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:GO[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&rl.aa.h.call(this)}}D(rl,Ut);var GO={2:"touch",3:"pen",4:"mouse"};rl.prototype.h=function(){rl.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ol="closure_listenable_"+(1e6*Math.random()|0),HO=0;function zO(c,h,p,g,I){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=I,this.key=++HO,this.da=this.fa=!1}function mu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gu(c){this.src=c,this.g={},this.h=0}gu.prototype.add=function(c,h,p,g,I){var N=c.toString();c=this.g[N],c||(c=this.g[N]=[],this.h++);var G=Vp(c,h,g,I);return-1<G?(h=c[G],p||(h.fa=!1)):(h=new zO(h,this.src,N,!!g,I),h.fa=p,c.push(h)),h};function Fp(c,h){var p=h.type;if(p in c.g){var g=c.g[p],I=Array.prototype.indexOf.call(g,h,void 0),N;(N=0<=I)&&Array.prototype.splice.call(g,I,1),N&&(mu(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Vp(c,h,p,g){for(var I=0;I<c.length;++I){var N=c[I];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==g)return I}return-1}var Lp="closure_lm_"+(1e6*Math.random()|0),Bp={};function Hb(c,h,p,g,I){if(g&&g.once)return qb(c,h,p,g,I);if(Array.isArray(h)){for(var N=0;N<h.length;N++)Hb(c,h[N],p,g,I);return null}return p=Gp(p),c&&c[ol]?c.K(h,p,u(g)?!!g.capture:!!g,I):zb(c,h,p,!1,g,I)}function zb(c,h,p,g,I,N){if(!h)throw Error("Invalid event type");var G=u(I)?!!I.capture:!!I,He=Up(c);if(He||(c[Lp]=He=new gu(c)),p=He.add(h,p,g,G,N),p.proxy)return p;if(g=qO(),p.proxy=g,g.src=c,g.listener=p,c.addEventListener)$O||(I=G),I===void 0&&(I=!1),c.addEventListener(h.toString(),g,I);else if(c.attachEvent)c.attachEvent(Kb(h.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function qO(){function c(p){return h.call(c.src,c.listener,p)}let h=WO;return c}function qb(c,h,p,g,I){if(Array.isArray(h)){for(var N=0;N<h.length;N++)qb(c,h[N],p,g,I);return null}return p=Gp(p),c&&c[ol]?c.L(h,p,u(g)?!!g.capture:!!g,I):zb(c,h,p,!0,g,I)}function Wb(c,h,p,g,I){if(Array.isArray(h))for(var N=0;N<h.length;N++)Wb(c,h[N],p,g,I);else g=u(g)?!!g.capture:!!g,p=Gp(p),c&&c[ol]?(c=c.i,h=String(h).toString(),h in c.g&&(N=c.g[h],p=Vp(N,p,g,I),-1<p&&(mu(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete c.g[h],c.h--)))):c&&(c=Up(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Vp(h,p,g,I)),(p=-1<c?h[c]:null)&&jp(p))}function jp(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[ol])Fp(h.i,c);else{var p=c.type,g=c.proxy;h.removeEventListener?h.removeEventListener(p,g,c.capture):h.detachEvent?h.detachEvent(Kb(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=Up(h))?(Fp(p,c),p.h==0&&(p.src=null,h[Lp]=null)):mu(c)}}}function Kb(c){return c in Bp?Bp[c]:Bp[c]="on"+c}function WO(c,h){if(c.da)c=!0;else{h=new rl(h,this);var p=c.listener,g=c.ha||c.src;c.fa&&jp(c),c=p.call(g,h)}return c}function Up(c){return c=c[Lp],c instanceof gu?c:null}var $p="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gp(c){return typeof c=="function"?c:(c[$p]||(c[$p]=function(h){return c.handleEvent(h)}),c[$p])}function $t(){Zi.call(this),this.i=new gu(this),this.M=this,this.F=null}D($t,Zi),$t.prototype[ol]=!0,$t.prototype.removeEventListener=function(c,h,p,g){Wb(this,c,h,p,g)};function Qt(c,h){var p,g=c.F;if(g)for(p=[];g;g=g.F)p.push(g);if(c=c.M,g=h.type||h,typeof h=="string")h=new Ut(h,c);else if(h instanceof Ut)h.target=h.target||c;else{var I=h;h=new Ut(g,c),E(h,I)}if(I=!0,p)for(var N=p.length-1;0<=N;N--){var G=h.g=p[N];I=_u(G,g,!0,h)&&I}if(G=h.g=c,I=_u(G,g,!0,h)&&I,I=_u(G,g,!1,h)&&I,p)for(N=0;N<p.length;N++)G=h.g=p[N],I=_u(G,g,!1,h)&&I}$t.prototype.N=function(){if($t.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],g=0;g<p.length;g++)mu(p[g]);delete c.g[h],c.h--}}this.F=null},$t.prototype.K=function(c,h,p,g){return this.i.add(String(c),h,!1,p,g)},$t.prototype.L=function(c,h,p,g){return this.i.add(String(c),h,!0,p,g)};function _u(c,h,p,g){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var I=!0,N=0;N<h.length;++N){var G=h[N];if(G&&!G.da&&G.capture==p){var He=G.listener,Rt=G.ha||G.src;G.fa&&Fp(c.i,G),I=He.call(Rt,g)!==!1&&I}}return I&&!g.defaultPrevented}function Qb(c,h,p){if(typeof c=="function")p&&(c=m(c,p));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function Yb(c){c.g=Qb(()=>{c.g=null,c.i&&(c.i=!1,Yb(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class KO extends Zi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Yb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sl(c){Zi.call(this),this.h=c,this.g={}}D(sl,Zi);var Jb=[];function Zb(c){ie(c.g,function(h,p){this.g.hasOwnProperty(p)&&jp(h)},c),c.g={}}sl.prototype.N=function(){sl.aa.N.call(this),Zb(this)},sl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hp=a.JSON.stringify,QO=a.JSON.parse,YO=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function zp(){}zp.prototype.h=null;function Xb(c){return c.h||(c.h=c.i())}function e1(){}var al={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qp(){Ut.call(this,"d")}D(qp,Ut);function Wp(){Ut.call(this,"c")}D(Wp,Ut);var Jr={},t1=null;function yu(){return t1=t1||new $t}Jr.La="serverreachability";function n1(c){Ut.call(this,Jr.La,c)}D(n1,Ut);function ll(c){let h=yu();Qt(h,new n1(h))}Jr.STAT_EVENT="statevent";function i1(c,h){Ut.call(this,Jr.STAT_EVENT,c),this.stat=h}D(i1,Ut);function Yt(c){let h=yu();Qt(h,new i1(h,c))}Jr.Ma="timingevent";function r1(c,h){Ut.call(this,Jr.Ma,c),this.size=h}D(r1,Ut);function cl(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function ul(){this.g=!0}ul.prototype.xa=function(){this.g=!1};function JO(c,h,p,g,I,N){c.info(function(){if(c.g)if(N)for(var G="",He=N.split("&"),Rt=0;Rt<He.length;Rt++){var Fe=He[Rt].split("=");if(1<Fe.length){var Gt=Fe[0];Fe=Fe[1];var Ht=Gt.split("_");G=2<=Ht.length&&Ht[1]=="type"?G+(Gt+"="+Fe+"&"):G+(Gt+"=redacted&")}}else G=null;else G=N;return"XMLHTTP REQ ("+g+") [attempt "+I+"]: "+h+`
`+p+`
`+G})}function ZO(c,h,p,g,I,N,G){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+I+"]: "+h+`
`+p+`
`+N+" "+G})}function ls(c,h,p,g){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+eR(c,p)+(g?" "+g:"")})}function XO(c,h){c.info(function(){return"TIMEOUT: "+h})}ul.prototype.info=function(){};function eR(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var g=p[c];if(!(2>g.length)){var I=g[1];if(Array.isArray(I)&&!(1>I.length)){var N=I[0];if(N!="noop"&&N!="stop"&&N!="close")for(var G=1;G<I.length;G++)I[G]=""}}}}return Hp(p)}catch{return h}}var vu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},o1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kp;function wu(){}D(wu,zp),wu.prototype.g=function(){return new XMLHttpRequest},wu.prototype.i=function(){return{}},Kp=new wu;function Xi(c,h,p,g){this.j=c,this.i=h,this.l=p,this.R=g||1,this.U=new sl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new s1}function s1(){this.i=null,this.g="",this.h=!1}var a1={},Qp={};function Yp(c,h,p){c.L=1,c.v=Cu(Ci(h)),c.m=p,c.P=!0,l1(c,null)}function l1(c,h){c.F=Date.now(),bu(c),c.A=Ci(c.v);var p=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),E1(p.i,"t",g),c.C=0,p=c.j.J,c.h=new s1,c.g=j1(c.j,p?h:null,!c.m),0<c.O&&(c.M=new KO(m(c.Y,c,c.g),c.O)),h=c.U,p=c.g,g=c.ca;var I="readystatechange";Array.isArray(I)||(I&&(Jb[0]=I.toString()),I=Jb);for(var N=0;N<I.length;N++){var G=Hb(p,I[N],g||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),ll(),JO(c.i,c.u,c.A,c.l,c.R,c.m)}Xi.prototype.ca=function(c){c=c.target;let h=this.M;h&&Ii(c)==3?h.j():this.Y(c)},Xi.prototype.Y=function(c){try{if(c==this.g)e:{let Ht=Ii(this.g);var h=this.g.Ba();let ds=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||A1(this.g)))){this.J||Ht!=4||h==7||(h==8||0>=ds?ll(3):ll(2)),Jp(this);var p=this.g.Z();this.X=p;t:if(c1(this)){var g=A1(this.g);c="";var I=g.length,N=Ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zr(this),dl(this);var G="";break t}this.h.i=new a.TextDecoder}for(h=0;h<I;h++)this.h.h=!0,c+=this.h.i.decode(g[h],{stream:!(N&&h==I-1)});g.length=0,this.h.g+=c,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=p==200,ZO(this.i,this.u,this.A,this.l,this.R,Ht,p),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Rt=this.g;if((He=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(He)){var Fe=He;break t}}Fe=null}if(p=Fe)ls(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zp(this,p);else{this.o=!1,this.s=3,Yt(12),Zr(this),dl(this);break e}}if(this.P){p=!0;let Pn;for(;!this.J&&this.C<G.length;)if(Pn=tR(this,G),Pn==Qp){Ht==4&&(this.s=4,Yt(14),p=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==a1){this.s=4,Yt(15),ls(this.i,this.l,G,"[Invalid Chunk]"),p=!1;break}else ls(this.i,this.l,Pn,null),Zp(this,Pn);if(c1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||G.length!=0||this.h.h||(this.s=1,Yt(16),p=!1),this.o=this.o&&p,!p)ls(this.i,this.l,G,"[Invalid Chunked Response]"),Zr(this),dl(this);else if(0<G.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),rm(Gt),Gt.M=!0,Yt(11))}}else ls(this.i,this.l,G,null),Zp(this,G);Ht==4&&Zr(this),this.o&&!this.J&&(Ht==4?F1(this.j,this):(this.o=!1,bu(this)))}else yR(this.g),p==400&&0<G.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),Zr(this),dl(this)}}}catch{}finally{}};function c1(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function tR(c,h){var p=c.C,g=h.indexOf(`
`,p);return g==-1?Qp:(p=Number(h.substring(p,g)),isNaN(p)?a1:(g+=1,g+p>h.length?Qp:(h=h.slice(g,g+p),c.C=g+p,h)))}Xi.prototype.cancel=function(){this.J=!0,Zr(this)};function bu(c){c.S=Date.now()+c.I,u1(c,c.I)}function u1(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=cl(m(c.ba,c),h)}function Jp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Xi.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(XO(this.i,this.A),this.L!=2&&(ll(),Yt(17)),Zr(this),this.s=2,dl(this)):u1(this,this.S-c)};function dl(c){c.j.G==0||c.J||F1(c.j,c)}function Zr(c){Jp(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,Zb(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function Zp(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||Xp(p.h,c))){if(!c.K&&Xp(p.h,c)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var I=g;if(I[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Au(p),Su(p);else break e;im(p),Yt(18)}}else p.za=I[1],0<p.za-p.T&&37500>I[2]&&p.F&&p.v==0&&!p.C&&(p.C=cl(m(p.Za,p),6e3));if(1>=f1(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else eo(p,11)}else if((c.K||p.g==c)&&Au(p),!q(h))for(I=p.Da.g.parse(h),h=0;h<I.length;h++){let Fe=I[h];if(p.T=Fe[0],Fe=Fe[1],p.G==2)if(Fe[0]=="c"){p.K=Fe[1],p.ia=Fe[2];let Gt=Fe[3];Gt!=null&&(p.la=Gt,p.j.info("VER="+p.la));let Ht=Fe[4];Ht!=null&&(p.Aa=Ht,p.j.info("SVER="+p.Aa));let ds=Fe[5];ds!=null&&typeof ds=="number"&&0<ds&&(g=1.5*ds,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let Pn=c.g;if(Pn){let Ou=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ou){var N=g.h;N.g||Ou.indexOf("spdy")==-1&&Ou.indexOf("quic")==-1&&Ou.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(em(N,N.h),N.h=null))}if(g.D){let om=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;om&&(g.ya=om,Ke(g.I,g.D,om))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var G=c;if(g.qa=B1(g,g.J?g.ia:null,g.W),G.K){p1(g.h,G);var He=G,Rt=g.L;Rt&&(He.I=Rt),He.B&&(Jp(He),bu(He)),g.g=G}else N1(g);0<p.i.length&&Mu(p)}else Fe[0]!="stop"&&Fe[0]!="close"||eo(p,7);else p.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?eo(p,7):nm(p):Fe[0]!="noop"&&p.l&&p.l.ta(Fe),p.v=0)}}ll(4)}catch{}}var nR=class{constructor(c,h){this.g=c,this.map=h}};function d1(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function h1(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function f1(c){return c.h?1:c.g?c.g.size:0}function Xp(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function em(c,h){c.g?c.g.add(h):c.h=h}function p1(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}d1.prototype.cancel=function(){if(this.i=m1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function m1(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return T(c.i)}function iR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var h=[],p=c.length,g=0;g<p;g++)h.push(c[g]);return h}h=[],p=0;for(g in c)h[p++]=c[g];return h}function rR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let g in c)h[p++]=g;return h}}}function g1(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=rR(c),g=iR(c),I=g.length,N=0;N<I;N++)h.call(void 0,g[N],p&&p[N],c)}var _1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oR(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var g=c[p].indexOf("="),I=null;if(0<=g){var N=c[p].substring(0,g);I=c[p].substring(g+1)}else N=c[p];h(N,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function Xr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Xr){this.h=c.h,Eu(this,c.j),this.o=c.o,this.g=c.g,Du(this,c.s),this.l=c.l;var h=c.i,p=new pl;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),y1(this,p),this.m=c.m}else c&&(h=String(c).match(_1))?(this.h=!1,Eu(this,h[1]||"",!0),this.o=hl(h[2]||""),this.g=hl(h[3]||"",!0),Du(this,h[4]),this.l=hl(h[5]||"",!0),y1(this,h[6]||"",!0),this.m=hl(h[7]||"")):(this.h=!1,this.i=new pl(null,this.h))}Xr.prototype.toString=function(){var c=[],h=this.j;h&&c.push(fl(h,v1,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(fl(h,v1,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(fl(p,p.charAt(0)=="/"?lR:aR,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",fl(p,uR)),c.join("")};function Ci(c){return new Xr(c)}function Eu(c,h,p){c.j=p?hl(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Du(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function y1(c,h,p){h instanceof pl?(c.i=h,dR(c.i,c.h)):(p||(h=fl(h,cR)),c.i=new pl(h,c.h))}function Ke(c,h,p){c.i.set(h,p)}function Cu(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function hl(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function fl(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,sR),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function sR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var v1=/[#\/\?@]/g,aR=/[#\?:]/g,lR=/[#\?]/g,cR=/[#\?@]/g,uR=/#/g;function pl(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function er(c){c.g||(c.g=new Map,c.h=0,c.i&&oR(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=pl.prototype,t.add=function(c,h){er(this),this.i=null,c=cs(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function w1(c,h){er(c),h=cs(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function b1(c,h){return er(c),h=cs(c,h),c.g.has(h)}t.forEach=function(c,h){er(this),this.g.forEach(function(p,g){p.forEach(function(I){c.call(h,I,g,this)},this)},this)},t.na=function(){er(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let I=c[g];for(let N=0;N<I.length;N++)p.push(h[g])}return p},t.V=function(c){er(this);let h=[];if(typeof c=="string")b1(this,c)&&(h=h.concat(this.g.get(cs(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},t.set=function(c,h){return er(this),this.i=null,c=cs(this,c),b1(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},t.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function E1(c,h,p){w1(c,h),0<p.length&&(c.i=null,c.g.set(cs(c,h),T(p)),c.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let N=encodeURIComponent(String(g)),G=this.V(g);for(g=0;g<G.length;g++){var I=N;G[g]!==""&&(I+="="+encodeURIComponent(String(G[g]))),c.push(I)}}return this.i=c.join("&")};function cs(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function dR(c,h){h&&!c.j&&(er(c),c.i=null,c.g.forEach(function(p,g){var I=g.toLowerCase();g!=I&&(w1(this,g),E1(this,I,p))},c)),c.j=h}function hR(c,h){let p=new ul;if(a.Image){let g=new Image;g.onload=_(tr,p,"TestLoadImage: loaded",!0,h,g),g.onerror=_(tr,p,"TestLoadImage: error",!1,h,g),g.onabort=_(tr,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=_(tr,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else h(!1)}function fR(c,h){let p=new ul,g=new AbortController,I=setTimeout(()=>{g.abort(),tr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:g.signal}).then(N=>{clearTimeout(I),N.ok?tr(p,"TestPingServer: ok",!0,h):tr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(I),tr(p,"TestPingServer: error",!1,h)})}function tr(c,h,p,g,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),g(p)}catch{}}function pR(){this.g=new YO}function mR(c,h,p){let g=p||"";try{g1(c,function(I,N){let G=I;u(I)&&(G=Hp(I)),h.push(g+N+"="+encodeURIComponent(G))})}catch(I){throw h.push(g+"type="+encodeURIComponent("_badmap")),I}}function ml(c){this.l=c.Ub||null,this.j=c.eb||!1}D(ml,zp),ml.prototype.g=function(){return new Iu(this.l,this.j)},ml.prototype.i=function(c){return function(){return c}}({});function Iu(c,h){$t.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Iu,$t),t=Iu.prototype,t.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,_l(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gl(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,_l(this)),this.g&&(this.readyState=3,_l(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;D1(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function D1(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?gl(this):_l(this),this.readyState==3&&D1(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,gl(this))},t.Qa=function(c){this.g&&(this.response=c,gl(this))},t.ga=function(){this.g&&gl(this)};function gl(c){c.readyState=4,c.l=null,c.j=null,c.v=null,_l(c)}t.setRequestHeader=function(c,h){this.u.append(c,h)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function _l(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function C1(c){let h="";return ie(c,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function tm(c,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=C1(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Ke(c,h,p))}function st(c){$t.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(st,$t);var gR=/^https?$/i,_R=["POST","PUT"];t=st.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kp.g(),this.v=this.o?Xb(this.o):Xb(Kp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(N){I1(this,N);return}if(c=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var I in g)p.set(I,g[I]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let N of g.keys())p.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),I=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(_R,h,void 0))||g||I||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,G]of p)this.g.setRequestHeader(N,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{M1(this),this.u=!0,this.g.send(c),this.u=!1}catch(N){I1(this,N)}};function I1(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,T1(c),Tu(c)}function T1(c){c.A||(c.A=!0,Qt(c,"complete"),Qt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Qt(this,"complete"),Qt(this,"abort"),Tu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tu(this,!0)),st.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?S1(this):this.bb())},t.bb=function(){S1(this)};function S1(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Ii(c)!=4||c.Z()!=2)){if(c.u&&Ii(c)==4)Qb(c.Ea,0,c);else if(Qt(c,"readystatechange"),Ii(c)==4){c.h=!1;try{let G=c.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=G===0){var I=String(c.D).match(_1)[1]||null;!I&&a.self&&a.self.location&&(I=a.self.location.protocol.slice(0,-1)),g=!gR.test(I?I.toLowerCase():"")}p=g}if(p)Qt(c,"complete"),Qt(c,"success");else{c.m=6;try{var N=2<Ii(c)?c.g.statusText:""}catch{N=""}c.l=N+" ["+c.Z()+"]",T1(c)}}finally{Tu(c)}}}}function Tu(c,h){if(c.g){M1(c);let p=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Qt(c,"ready");try{p.onreadystatechange=g}catch{}}}function M1(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ii(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ii(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),QO(h)}};function A1(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function yR(c){let h={};c=(c.g&&2<=Ii(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(q(c[g]))continue;var p=C(c[g]);let I=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[I]||[];h[I]=N,N.push(p)}b(h,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yl(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function x1(c){this.Aa=0,this.i=[],this.j=new ul,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yl("baseRetryDelayMs",5e3,c),this.cb=yl("retryDelaySeedMs",1e4,c),this.Wa=yl("forwardChannelMaxRetries",2,c),this.wa=yl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new d1(c&&c.concurrentRequestLimit),this.Da=new pR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=x1.prototype,t.la=8,t.G=1,t.connect=function(c,h,p,g){Yt(0),this.W=c,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=B1(this,null,this.W),Mu(this)};function nm(c){if(O1(c),c.G==3){var h=c.U++,p=Ci(c.I);if(Ke(p,"SID",c.K),Ke(p,"RID",h),Ke(p,"TYPE","terminate"),vl(c,p),h=new Xi(c,c.j,h),h.L=2,h.v=Cu(Ci(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=j1(h.j,null),h.g.ea(h.v)),h.F=Date.now(),bu(h)}L1(c)}function Su(c){c.g&&(rm(c),c.g.cancel(),c.g=null)}function O1(c){Su(c),c.u&&(a.clearTimeout(c.u),c.u=null),Au(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Mu(c){if(!h1(c.h)&&!c.s){c.s=!0;var h=c.Ga;nl||Gb(),il||(nl(),il=!0),kp.add(h,c),c.B=0}}function vR(c,h){return f1(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=cl(m(c.Ga,c,h),V1(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let I=new Xi(this,this.j,c),N=this.o;if(this.S&&(N?(N=y(N),E(N,this.S)):N=this.S),this.m!==null||this.O||(I.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=P1(this,I,h),p=Ci(this.I),Ke(p,"RID",c),Ke(p,"CVER",22),this.D&&Ke(p,"X-HTTP-Session-Id",this.D),vl(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(C1(N)))+"&"+h:this.m&&tm(p,this.m,N)),em(this.h,I),this.Ua&&Ke(p,"TYPE","init"),this.P?(Ke(p,"$req",h),Ke(p,"SID","null"),I.T=!0,Yp(I,p,null)):Yp(I,p,h),this.G=2}}else this.G==3&&(c?R1(this,c):this.i.length==0||h1(this.h)||R1(this))};function R1(c,h){var p;h?p=h.l:p=c.U++;let g=Ci(c.I);Ke(g,"SID",c.K),Ke(g,"RID",p),Ke(g,"AID",c.T),vl(c,g),c.m&&c.o&&tm(g,c.m,c.o),p=new Xi(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=P1(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),em(c.h,p),Yp(p,g,h)}function vl(c,h){c.H&&ie(c.H,function(p,g){Ke(h,g,p)}),c.l&&g1({},function(p,g){Ke(h,g,p)})}function P1(c,h,p){p=Math.min(c.i.length,p);var g=c.l?m(c.l.Na,c.l,c):null;e:{var I=c.i;let N=-1;for(;;){let G=["count="+p];N==-1?0<p?(N=I[0].g,G.push("ofs="+N)):N=0:G.push("ofs="+N);let He=!0;for(let Rt=0;Rt<p;Rt++){let Fe=I[Rt].g,Gt=I[Rt].map;if(Fe-=N,0>Fe)N=Math.max(0,I[Rt].g-100),He=!1;else try{mR(Gt,G,"req"+Fe+"_")}catch{g&&g(Gt)}}if(He){g=G.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,g}function N1(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;nl||Gb(),il||(nl(),il=!0),kp.add(h,c),c.v=0}}function im(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=cl(m(c.Fa,c),V1(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,k1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=cl(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Su(this),k1(this))};function rm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function k1(c){c.g=new Xi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=Ci(c.qa);Ke(h,"RID","rpc"),Ke(h,"SID",c.K),Ke(h,"AID",c.T),Ke(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(h,"TO",c.ja),Ke(h,"TYPE","xmlhttp"),vl(c,h),c.m&&c.o&&tm(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Cu(Ci(h)),p.m=null,p.P=!0,l1(p,c)}t.Za=function(){this.C!=null&&(this.C=null,Su(this),im(this),Yt(19))};function Au(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function F1(c,h){var p=null;if(c.g==h){Au(c),rm(c),c.g=null;var g=2}else if(Xp(c.h,h))p=h.D,p1(c.h,h),g=1;else return;if(c.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var I=c.B;g=yu(),Qt(g,new r1(g,p)),Mu(c)}else N1(c);else if(I=h.s,I==3||I==0&&0<h.X||!(g==1&&vR(c,h)||g==2&&im(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),I){case 1:eo(c,5);break;case 4:eo(c,10);break;case 3:eo(c,6);break;default:eo(c,2)}}}function V1(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function eo(c,h){if(c.j.info("Error code "+h),h==2){var p=m(c.fb,c),g=c.Xa;let I=!g;g=new Xr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Eu(g,"https"),Cu(g),I?hR(g.toString(),p):fR(g.toString(),p)}else Yt(2);c.G=0,c.l&&c.l.sa(h),L1(c),O1(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function L1(c){if(c.G=0,c.ka=[],c.l){let h=m1(c.h);(h.length!=0||c.i.length!=0)&&(M(c.ka,h),M(c.ka,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.ra()}}function B1(c,h,p){var g=p instanceof Xr?Ci(p):new Xr(p);if(g.g!="")h&&(g.g=h+"."+g.g),Du(g,g.s);else{var I=a.location;g=I.protocol,h=h?h+"."+I.hostname:I.hostname,I=+I.port;var N=new Xr(null);g&&Eu(N,g),h&&(N.g=h),I&&Du(N,I),p&&(N.l=p),g=N}return p=c.D,h=c.ya,p&&h&&Ke(g,p,h),Ke(g,"VER",c.la),vl(c,g),g}function j1(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new st(new ml({eb:p})):new st(c.pa),h.Ha(c.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function U1(){}t=U1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xu(){}xu.prototype.g=function(c,h){return new fn(c,h)};function fn(c,h){$t.call(this),this.g=new x1(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!q(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new us(this)}D(fn,$t),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){nm(this.g)},fn.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Hp(c),c=p);h.i.push(new nR(h.Ya++,c)),h.G==3&&Mu(h)},fn.prototype.N=function(){this.g.l=null,delete this.j,nm(this.g),delete this.g,fn.aa.N.call(this)};function $1(c){qp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}D($1,qp);function G1(){Wp.call(this),this.status=1}D(G1,Wp);function us(c){this.g=c}D(us,U1),us.prototype.ua=function(){Qt(this.g,"a")},us.prototype.ta=function(c){Qt(this.g,new $1(c))},us.prototype.sa=function(c){Qt(this.g,new G1)},us.prototype.ra=function(){Qt(this.g,"b")},xu.prototype.createWebChannel=xu.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,y0=Ui.createWebChannelTransport=function(){return new xu},_0=Ui.getStatEventTarget=function(){return yu()},g0=Ui.Event=Jr,zh=Ui.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vu.NO_ERROR=0,vu.TIMEOUT=8,vu.HTTP_ERROR=6,vc=Ui.ErrorCode=vu,o1.COMPLETE="complete",m0=Ui.EventType=o1,e1.EventType=al,al.OPEN="a",al.CLOSE="b",al.ERROR="c",al.MESSAGE="d",$t.prototype.listen=$t.prototype.K,la=Ui.WebChannel=e1,p0=Ui.FetchXmlHttpFactory=ml,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,f0=Ui.XhrIo=st}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});var tS="@firebase/firestore";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var Ba="10.13.0";var Nr=new Nu("@firebase/firestore");function fa(){return Nr.logLevel}function iM(t){Nr.setLogLevel(t)}function L(t,...e){if(Nr.logLevel<=Xn.DEBUG){let n=e.map(Dw);Nr.debug(`Firestore (${Ba}): ${t}`,...n)}}function mt(t,...e){if(Nr.logLevel<=Xn.ERROR){let n=e.map(Dw);Nr.error(`Firestore (${Ba}): ${t}`,...n)}}function xn(t,...e){if(Nr.logLevel<=Xn.WARN){let n=e.map(Dw);Nr.warn(`Firestore (${Ba}): ${t}`,...n)}}function Dw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function X(t="Unexpected state"){let e=`FIRESTORE (${Ba}) INTERNAL ASSERTION FAILED: `+t;throw mt(e),new Error(e)}function ne(t,e){t||X()}function rM(t,e){t||X()}function H(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends Q1{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Et=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var nf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},D0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}},C0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},I0=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve(),o=new Et;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Et,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>O(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Et)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ne(typeof i.accessToken=="string"),new nf(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new bt(e)}},T0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},S0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new T0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},M0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},A0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne(typeof n.token=="string"),this.R=n.token,new M0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function oU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var rf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=oU(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function _e(t,e){return t<e?-1:t>e?1:0}function Ea(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function oM(t){return t+"\0"}var ot=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var re=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ot(0,0))}static max(){return new t(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var of=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(),i===void 0?i=e.length-n:i>e.length-n&&X(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Pe=class t extends of{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new F(P.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},sU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gt=class t extends of{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return sU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new F(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new F(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new F(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(Pe.fromString(e))}static fromName(e){return new t(Pe.fromString(e).popFirst(5))}static empty(){return new t(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Pe(e.slice()))}};var Da=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function x0(t){return t.fields.find(e=>e.kind===2)}function Ro(t){return t.fields.filter(e=>e.kind!==2)}Da.UNKNOWN_ID=-1;var va=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Oc=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,On.min())}};function sM(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=re.fromTimestamp(i===1e9?new ot(n+1,0):new ot(n,i));return new On(r,z.empty(),e)}function aM(t){return new On(t.readTime,t.key,-1)}var On=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(re.min(),z.empty(),-1)}static max(){return new t(re.max(),z.empty(),-1)}};function Cw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}var lM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Hr(t){return O(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==lM)throw t;L("LocalStore","Unexpectedly lost primary lease")})}var R=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&n()},l=>i(l))}),s=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;n(e[u]).next(d=>{s[u]=d,++a,a===o&&i(s)},d=>r(d))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var af=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Et,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Lo(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=Iw(i.target.error);this.V.reject(new Lo(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new Lo(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(L("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new R0(n)}},kr=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(wl())===12.2&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return L("SimpleDb","Removing database:",e),Po(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Pu())return!1;if(t.v())return!0;let e=wl(),n=t.S(e),i=0<n&&n<10,r=cM(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return O(this,null,function*(){return this.db||(L("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;n(s)},r.onblocked=()=>{i(new Lo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new F(P.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new F(P.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new Lo(e,s))},r.onupgradeneeded=o=>{L("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,r.transaction,o.oldVersion,this.version).next(()=>{L("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return O(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=af.open(this.db,e,o?"readonly":"readwrite",i),l=r(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),R.reject(u))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,u=l.name!=="FirebaseError"&&s<3;if(L("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function cM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var O0=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Po(this.B.delete())}},Lo=class extends F{constructor(e,n){super(P.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function zr(t){return t.name==="IndexedDbTransactionError"}var R0=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(L("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(L("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Po(i)}add(e){return L("SimpleDb","ADD",this.store.name,e,e),Po(this.store.add(e))}get(e){return Po(this.store.get(e)).next(n=>(n===void 0&&(n=null),L("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return L("SimpleDb","DELETE",this.store.name,e),Po(this.store.delete(e))}count(){return L("SimpleDb","COUNT",this.store.name),Po(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new R((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{let o=this.cursor(i),s=[];return this.W(o,(a,l)=>{s.push(l)}).next(()=>s)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new R((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}j(e,n){L("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,s,a)=>a.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new R((i,r)=>{n.onerror=o=>{let s=Iw(o.target.error);r(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}W(e,n){let i=[];return new R((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let l=new O0(a),u=n(a.primaryKey,a.value,l);if(u instanceof R){let d=u.catch(f=>(l.done(),R.reject(f)));i.push(d)}l.isDone?r():l.K===null?a.continue():a.continue(l.K)}}).next(()=>R.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Po(t){return new R((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=Iw(i.target.error);n(r)}})}var nS=!1;function Iw(t){let e=kr.S(wl());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nS||(nS=!0,setTimeout(()=>{throw i},0)),i}}return t}var P0=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){L("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>O(this,null,function*(){this.task=null;try{L("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){zr(n)?L("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Hr(n)}yield this.X(6e4)}))}},N0=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return O(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return R.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!i.has(s))return L("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(r,o)).next(a=>(L("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let s=aM(o);Cw(s,i)>0&&(i=s)}),new On(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var vn=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function eu(t){return t==null}function Rc(t){return t===0&&1/t==-1/0}function uM(t){return typeof t=="number"&&Number.isInteger(t)&&!Rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function en(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=iS(e)),e=aU(t.get(n),e);return iS(e)}function aU(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function iS(t){return t+""}function fi(t){let e=t.length;if(ne(e>=2),e===2)return ne(t.charAt(0)===""&&t.charAt(1)===""),Pe.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&X(),t.charAt(s+1)){case"":let a=t.substring(o,s),l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=t.substring(o,s),r+="\0";break;case"":r+=t.substring(o,s+1);break;default:X()}o=s+2}return new Pe(i)}var rS=["userId","batchId"];function Yh(t,e){return[t,en(e)]}function dM(t,e,n){return[t,en(e),n]}var lU={},cU=["prefixPath","collectionGroup","readTime","documentId"],uU=["prefixPath","collectionGroup","documentId"],dU=["collectionGroup","readTime","prefixPath","documentId"],hU=["canonicalId","targetId"],fU=["targetId","path"],pU=["path","targetId"],mU=["collectionId","parent"],gU=["indexId","uid"],_U=["uid","sequenceNumber"],yU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vU=["indexId","uid","orderedDocumentKey"],wU=["userId","collectionPath","documentId"],bU=["userId","collectionPath","largestBatchId"],EU=["userId","collectionGroup","largestBatchId"],hM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DU=[...hM,"documentOverlays"],fM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pM=fM,Tw=[...pM,"indexConfiguration","indexState","indexEntries"],CU=Tw,IU=[...Tw,"globals"];var Pc=class extends sf{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Mt(t,e){let n=H(t);return kr.F(n._e,e)}function oS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ze=class t{constructor(e,n){this.comparator=e,this.root=n||mi.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mi.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ya(this.root,e,this.comparator,!0)}},ya=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mi=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();let e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}};mi.EMPTY=null,mi.RED=!0,mi.BLACK=!1;mi.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,i,r,o){return this}insert(e,n,i){return new mi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class t{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lf(this.data.getIterator())}getIteratorFrom(e){return new lf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},lf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ca(t){return t.hasNext()?t.getNext():void 0}var wn=class t{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new t([])}unionWith(e){let n=new qe(gt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var cf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function gM(){return typeof atob<"u"}var yt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new cf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yt.EMPTY_BYTE_STRING=new yt("");var TU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(t){if(ne(!!t),typeof t=="string"){let e=0,n=TU.exec(t);if(ne(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fr(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}function Xf(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Sw(t){let e=t.mapValue.fields.__previous_value__;return Xf(e)?Sw(e):e}function Nc(t){let e=Hi(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}var k0=class{constructor(e,n,i,r,o,s,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},Vr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Rr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jh={nullValue:"NULL_VALUE"};function Bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xf(t)?4:_M(t)?9007199254740991:ep(t)?10:11:X()}function yi(t,e){if(t===e)return!0;let n=Bo(t);if(n!==Bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nc(t).isEqual(Nc(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Hi(r.timestampValue),a=Hi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Fr(r.bytesValue).isEqual(Fr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return et(r.geoPointValue.latitude)===et(o.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return et(r.integerValue)===et(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=et(r.doubleValue),a=et(o.doubleValue);return s===a?Rc(s)===Rc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ea(t.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(oS(s)!==oS(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!yi(s[l],a[l])))return!1;return!0}(t,e);default:return X()}}function kc(t,e){return(t.values||[]).find(n=>yi(n,e))!==void 0}function Lr(t,e){if(t===e)return 0;let n=Bo(t),i=Bo(e);if(n!==i)return _e(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=et(o.integerValue||o.doubleValue),l=et(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return sS(t.timestampValue,e.timestampValue);case 4:return sS(Nc(t),Nc(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Fr(o),l=Fr(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let d=_e(a[u],l[u]);if(d!==0)return d}return _e(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=_e(et(o.latitude),et(s.latitude));return a!==0?a:_e(et(o.longitude),et(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return aS(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,d;let f=o.fields||{},m=s.fields||{},_=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(l=m.value)===null||l===void 0?void 0:l.arrayValue,T=_e(((u=_?.values)===null||u===void 0?void 0:u.length)||0,((d=D?.values)===null||d===void 0?void 0:d.length)||0);return T!==0?T:aS(_,D)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Rr.mapValue&&s===Rr.mapValue)return 0;if(o===Rr.mapValue)return 1;if(s===Rr.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){let m=_e(l[f],d[f]);if(m!==0)return m;let _=Lr(a[l[f]],u[d[f]]);if(_!==0)return _}return _e(l.length,d.length)}(t.mapValue,e.mapValue);default:throw X()}}function sS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);let n=Hi(t),i=Hi(e),r=_e(n.seconds,i.seconds);return r!==0?r:_e(n.nanos,i.nanos)}function aS(t,e){let n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){let o=Lr(n[r],i[r]);if(o)return o}return _e(n.length,i.length)}function Ca(t){return F0(t)}function F0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Hi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=F0(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${F0(n.fields[s])}`;return r+"}"}(t.mapValue):X()}function jo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function V0(t){return!!t&&"integerValue"in t}function Fc(t){return!!t&&"arrayValue"in t}function lS(t){return!!t&&"nullValue"in t}function cS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zh(t){return!!t&&"mapValue"in t}function ep(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Tc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Yo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Tc(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _M(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var yM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function SU(t){return"nullValue"in t?Jh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?jo(Vr.empty(),z.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ep(t)?yM:{mapValue:{}}:X()}function MU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?jo(Vr.empty(),z.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?yM:"mapValue"in t?ep(t)?{mapValue:{}}:Rr:X()}function uS(t,e){let n=Lr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function dS(t,e){let n=Lr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Kt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(n)}setAll(e){let n=gt.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}s?i[a.lastSegment()]=Tc(s):r.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Zh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Yo(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(Tc(this.value))}};function vM(t){let e=[];return Yo(t.fields,(n,i)=>{let r=new gt([n]);if(Zh(i)){let o=vM(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new wn(e)}var Dt=class t{constructor(e,n,i,r,o,s,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,re.min(),re.min(),re.min(),Kt.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,re.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,re.min(),re.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,re.min(),re.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var vi=class{constructor(e,n){this.position=e,this.inclusive=n}};function hS(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],s=t.position[r];if(o.field.isKeyField()?i=z.comparator(z.fromName(s.referenceValue),n.key):i=Lr(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function fS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yi(t.position[n],e.position[n]))return!1;return!0}var Uo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function AU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var uf=class{},Se=class t extends uf{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new j0(e,n,i):n==="array-contains"?new G0(e,i):n==="in"?new df(e,i):n==="not-in"?new H0(e,i):n==="array-contains-any"?new z0(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new U0(e,i):new $0(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Lr(n,this.value)):n!==null&&Bo(this.value)===Bo(n)&&this.matchesComparison(Lr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$e=class t extends uf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Ia(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ia(t){return t.op==="and"}function L0(t){return t.op==="or"}function Mw(t){return wM(t)&&Ia(t)}function wM(t){for(let e of t.filters)if(e instanceof $e)return!1;return!0}function B0(t){if(t instanceof Se)return t.field.canonicalString()+t.op.toString()+Ca(t.value);if(Mw(t))return t.filters.map(e=>B0(e)).join(",");{let e=t.filters.map(n=>B0(n)).join(",");return`${t.op}(${e})`}}function bM(t,e){return t instanceof Se?function(i,r){return r instanceof Se&&i.op===r.op&&i.field.isEqual(r.field)&&yi(i.value,r.value)}(t,e):t instanceof $e?function(i,r){return r instanceof $e&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&bM(s,r.filters[a]),!0):!1}(t,e):void X()}function EM(t,e){let n=t.filters.concat(e);return $e.create(n,t.op)}function DM(t){return t instanceof Se?function(n){return`${n.field.canonicalString()} ${n.op} ${Ca(n.value)}`}(t):t instanceof $e?function(n){return n.op.toString()+" {"+n.getFilters().map(DM).join(" ,")+"}"}(t):"Filter"}var j0=class extends Se{constructor(e,n,i){super(e,n,i),this.key=z.fromName(i.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},U0=class extends Se{constructor(e,n){super(e,"in",n),this.keys=CM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},$0=class extends Se{constructor(e,n){super(e,"not-in",n),this.keys=CM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function CM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>z.fromName(i.referenceValue))}var G0=class extends Se{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Fc(n)&&kc(n.arrayValue,this.value)}},df=class extends Se{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&kc(this.value.arrayValue,n)}},H0=class extends Se{constructor(e,n){super(e,"not-in",n)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!kc(this.value.arrayValue,n)}},z0=class extends Se{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Fc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>kc(this.value.arrayValue,i))}};var q0=class{constructor(e,n=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function W0(t,e=null,n=[],i=[],r=null,o=null,s=null){return new q0(t,e,n,i,r,o,s)}function $o(t){let e=H(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>B0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),eu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ca(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ca(i)).join(",")),e.ue=n}return e.ue}function tu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!AU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fS(t.startAt,e.startAt)&&fS(t.endAt,e.endAt)}function hf(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ff(t,e){return t.filters.filter(n=>n instanceof Se&&n.field.isEqual(e))}function pS(t,e,n){let i=Jh,r=!0;for(let o of ff(t,e)){let s=Jh,a=!0;switch(o.op){case"<":case"<=":s=SU(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Jh}uS({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];uS({value:i,inclusive:r},{value:s,inclusive:n.inclusive})<0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}function mS(t,e,n){let i=Rr,r=!0;for(let o of ff(t,e)){let s=Rr,a=!0;switch(o.op){case">=":case">":s=MU(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Rr}dS({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];dS({value:i,inclusive:r},{value:s,inclusive:n.inclusive})>0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}var Qn=class{constructor(e,n=null,i=[],r=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function IM(t,e,n,i,r,o,s,a){return new Qn(t,e,n,i,r,o,s,a)}function ja(t){return new Qn(t)}function gS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Aw(t){return t.collectionGroup!==null}function wa(t){let e=H(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new qe(gt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Uo(o,i))}),n.has(gt.keyField().canonicalString())||e.ce.push(new Uo(gt.keyField(),i))}return e.ce}function tn(t){let e=H(t);return e.le||(e.le=xU(e,wa(t))),e.le}function xU(t,e){if(t.limitType==="F")return W0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new Uo(r.field,o)});let n=t.endAt?new vi(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new vi(t.startAt.position,t.startAt.inclusive):null;return W0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function K0(t,e){let n=t.filters.concat([e]);return new Qn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pf(t,e,n){return new Qn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nu(t,e){return tu(tn(t),tn(e))&&t.limitType===e.limitType}function TM(t){return`${$o(tn(t))}|lt:${t.limitType}`}function pa(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>DM(r)).join(", ")}]`),eu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ca(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ca(r)).join(",")),`Target(${i})`}(tn(t))}; limitType=${t.limitType})`}function iu(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):z.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of wa(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,a,l){let u=hS(s,a,l);return s.inclusive?u<=0:u<0}(i.startAt,wa(i),r)||i.endAt&&!function(s,a,l){let u=hS(s,a,l);return s.inclusive?u>=0:u>0}(i.endAt,wa(i),r))}(t,e)}function SM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MM(t){return(e,n)=>{let i=!1;for(let r of wa(t)){let o=OU(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function OU(t,e,n){let i=t.field.isKeyField()?z.comparator(e.key,n.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Lr(l,u):X()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X()}}var wi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return mM(this.inner)}size(){return this.innerSize}};var RU=new Ze(z.comparator);function hn(){return RU}var AM=new Ze(z.comparator);function Cc(...t){let e=AM;for(let n of t)e=e.insert(n.key,n);return e}function xM(t){let e=AM;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function pi(){return Sc()}function OM(){return Sc()}function Sc(){return new wi(t=>t.toString(),(t,e)=>t.isEqual(e))}var PU=new Ze(z.comparator),NU=new qe(z.comparator);function ve(...t){let e=NU;for(let n of t)e=e.add(n);return e}var kU=new qe(_e);function xw(){return kU}function Ow(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(e)?"-0":e}}function RM(t){return{integerValue:""+t}}function PM(t,e){return uM(e)?RM(e):Ow(t,e)}var Ta=class{constructor(){this._=void 0}};function FU(t,e,n){return t instanceof Br?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Xf(o)&&(o=Sw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof zi?kM(t,e):t instanceof qi?FM(t,e):function(r,o){let s=NM(r,o),a=_S(s)+_S(r.Pe);return V0(s)&&V0(r.Pe)?RM(a):Ow(r.serializer,a)}(t,e)}function VU(t,e,n){return t instanceof zi?kM(t,e):t instanceof qi?FM(t,e):n}function NM(t,e){return t instanceof jr?function(i){return V0(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var Br=class extends Ta{},zi=class extends Ta{constructor(e){super(),this.elements=e}};function kM(t,e){let n=VM(e);for(let i of t.elements)n.some(r=>yi(r,i))||n.push(i);return{arrayValue:{values:n}}}var qi=class extends Ta{constructor(e){super(),this.elements=e}};function FM(t,e){let n=VM(e);for(let i of t.elements)n=n.filter(r=>!yi(r,i));return{arrayValue:{values:n}}}var jr=class extends Ta{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function _S(t){return et(t.integerValue||t.doubleValue)}function VM(t){return Fc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Go=class{constructor(e,n){this.field=e,this.transform=n}};function LU(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof zi&&r instanceof zi||i instanceof qi&&r instanceof qi?Ea(i.elements,r.elements,yi):i instanceof jr&&r instanceof jr?yi(i.Pe,r.Pe):i instanceof Br&&r instanceof Br}(t.transform,e.transform)}var Q0=class{constructor(e,n){this.version=e,this.transformResults=n}},ht=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Xh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Sa=class{};function LM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $r(t.key,ht.none()):new Ur(t.key,t.data,ht.none());{let n=t.data,i=Kt.empty(),r=new qe(gt.comparator);for(let o of e.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Yn(t.key,i,new wn(r.toArray()),ht.none())}}function BU(t,e,n){t instanceof Ur?function(r,o,s){let a=r.value.clone(),l=vS(r.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Yn?function(r,o,s){if(!Xh(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=vS(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(BM(r)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Mc(t,e,n,i){return t instanceof Ur?function(o,s,a,l){if(!Xh(o.precondition,s))return a;let u=o.value.clone(),d=wS(o.fieldTransforms,l,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof Yn?function(o,s,a,l){if(!Xh(o.precondition,s))return a;let u=wS(o.fieldTransforms,l,s),d=s.data;return d.setAll(BM(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,i):function(o,s,a){return Xh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function jU(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=NM(i.transform,r||null);o!=null&&(n===null&&(n=Kt.empty()),n.set(i.field,o))}return n||null}function yS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ea(i,r,(o,s)=>LU(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ur=class extends Sa{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Yn=class extends Sa{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function BM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function vS(t,e,n){let i=new Map;ne(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,VU(s,a,n[r]))}return i}function wS(t,e,n){let i=new Map;for(let r of t){let o=r.transform,s=n.data.field(r.field);i.set(r.field,FU(o,s,e))}return i}var $r=class extends Sa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Vc=class extends Sa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Lc=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&BU(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Mc(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Mc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=OM();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(r.key)?null:a;let l=LM(s,a);l!==null&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(re.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(n,i)=>yS(n,i))&&Ea(this.baseMutations,e.baseMutations,(n,i)=>yS(n,i))}},Y0=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ne(e.mutations.length===i.length);let r=function(){return PU}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new t(e,n,i,r)}};var Bc=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var J0=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var vt,Re;function jM(t){switch(t){default:return X();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function UM(t){if(t===void 0)return mt("GRPC error has no .code"),P.UNKNOWN;switch(t){case vt.OK:return P.OK;case vt.CANCELLED:return P.CANCELLED;case vt.UNKNOWN:return P.UNKNOWN;case vt.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case vt.INTERNAL:return P.INTERNAL;case vt.UNAVAILABLE:return P.UNAVAILABLE;case vt.UNAUTHENTICATED:return P.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case vt.NOT_FOUND:return P.NOT_FOUND;case vt.ALREADY_EXISTS:return P.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return P.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case vt.ABORTED:return P.ABORTED;case vt.OUT_OF_RANGE:return P.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return P.UNIMPLEMENTED;case vt.DATA_LOSS:return P.DATA_LOSS;default:return X()}}(Re=vt||(vt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";var bS=null;function $M(){return new TextEncoder}var UU=new Sr([4294967295,4294967295],0);function ES(t){let e=$M().encode(t),n=new h0;return n.update(e),new Uint8Array(n.digest())}function DS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Sr([n,i],0),new Sr([r,o],0)]}var Z0=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Vo(`Invalid padding: ${n}`);if(i<0)throw new Vo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Vo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Vo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Sr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Sr.fromNumber(i)));return r.compare(UU)===1&&(r=new Sr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=ES(e),[i,r]=DS(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,r,n);return i.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=ES(e),[i,r]=DS(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Vo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var jc=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(re.min(),r,new Ze(_e),hn(),ve())}},Uc=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,ve(),ve(),ve())}};var ba=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},mf=class{constructor(e,n){this.targetId=e,this.me=n}},gf=class{constructor(e,n,i=yt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},_f=class{constructor(){this.fe=0,this.ge=IS(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),n=ve(),i=ve();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:X()}}),new Uc(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=IS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},X0=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=hn(),this.qe=CS(),this.Qe=new Ze(_e)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(hf(o))if(i===0){let s=new z(o.path);this.Ue(n,s,Dt.newNoDocument(s,re.min()))}else ne(i===1);else{let s=this.Ye(n);if(s!==i){let a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(n);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}bS?.et(function(d,f,m,_,D){var T,M,k,q,j,W;let le={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},ie=f.unchangedNames;return ie&&(le.bloomFilter={applied:D===0,hashCount:(T=ie?.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(q=(k=(M=ie?.bits)===null||M===void 0?void 0:M.bitmap)===null||k===void 0?void 0:k.length)!==null&&q!==void 0?q:0,padding:(W=(j=ie?.bits)===null||j===void 0?void 0:j.padding)!==null&&W!==void 0?W:0,mightContain:b=>{var y;return(y=_?.mightContain(b))!==null&&y!==void 0&&y}}),le}(s,e.me,this.Le.tt(),a,l))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,a;try{s=Fr(i).toUint8Array()}catch(l){if(l instanceof cf)return xn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Z0(s,r,o)}catch(l){return xn(l instanceof Vo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&hf(a.target)){let l=new z(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,Dt.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let i=ve();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let r=new jc(e,n,this.Qe,this.ke,i);return this.ke=hn(),this.qe=CS(),this.Qe=new Ze(_e),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new _f,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qe(_e),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _f),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function CS(){return new Ze(z.comparator)}function IS(){return new Ze(z.comparator)}var $U={asc:"ASCENDING",desc:"DESCENDING"},GU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HU={and:"AND",or:"OR"},ev=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function tv(t,e){return t.useProto3Json||eu(e)?e:{value:e}}function Ma(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zU(t,e){return Ma(t,e.toTimestamp())}function _t(t){return ne(!!t),re.fromTimestamp(function(n){let i=Hi(n);return new ot(i.seconds,i.nanos)}(t))}function Rw(t,e){return nv(t,e).canonicalString()}function nv(t,e){let n=function(r){return new Pe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function HM(t){let e=Pe.fromString(t);return ne(eA(e)),e}function $c(t,e){return Rw(t.databaseId,e.path)}function gi(t,e){let n=HM(e);if(n.get(1)!==t.databaseId.projectId)throw new F(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(WM(n))}function zM(t,e){return Rw(t.databaseId,e)}function qM(t){let e=HM(t);return e.length===4?Pe.emptyPath():WM(e)}function iv(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WM(t){return ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function TS(t,e,n){return{name:$c(t,e),fields:n.value.mapValue.fields}}function KM(t,e,n){let i=gi(t,e.name),r=_t(e.updateTime),o=e.createTime?_t(e.createTime):re.min(),s=new Kt({mapValue:{fields:e.fields}}),a=Dt.newFoundDocument(i,r,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function qU(t,e){return"found"in e?function(i,r){ne(!!r.found),r.found.name,r.found.updateTime;let o=gi(i,r.found.name),s=_t(r.found.updateTime),a=r.found.createTime?_t(r.found.createTime):re.min(),l=new Kt({mapValue:{fields:r.found.fields}});return Dt.newFoundDocument(o,s,a,l)}(t,e):"missing"in e?function(i,r){ne(!!r.missing),ne(!!r.readTime);let o=gi(i,r.missing),s=_t(r.readTime);return Dt.newNoDocument(o,s)}(t,e):X()}function WU(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(ne(d===void 0||typeof d=="string"),yt.fromBase64String(d||"")):(ne(d===void 0||d instanceof Buffer||d instanceof Uint8Array),yt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?P.UNKNOWN:UM(u.code);return new F(d,u.message||"")}(s);n=new gf(i,r,o,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=gi(t,i.document.name),o=_t(i.document.updateTime),s=i.document.createTime?_t(i.document.createTime):re.min(),a=new Kt({mapValue:{fields:i.document.fields}}),l=Dt.newFoundDocument(r,o,s,a),u=i.targetIds||[],d=i.removedTargetIds||[];n=new ba(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=gi(t,i.document),o=i.readTime?_t(i.readTime):re.min(),s=Dt.newNoDocument(r,o),a=i.removedTargetIds||[];n=new ba([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=gi(t,i.document),o=i.removedTargetIds||[];n=new ba([],o,r,null)}else{if(!("filter"in e))return X();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new J0(r,o),a=i.targetId;n=new mf(a,s)}}return n}function Gc(t,e){let n;if(e instanceof Ur)n={update:TS(t,e.key,e.value)};else if(e instanceof $r)n={delete:$c(t,e.key)};else if(e instanceof Yn)n={update:TS(t,e.key,e.data),updateMask:XU(e.fieldMask)};else{if(!(e instanceof Vc))return X();n={verify:$c(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof Br)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw X()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:zU(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:X()}(t,e.precondition)),n}function rv(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?ht.updateTime(_t(o.updateTime)):o.exists!==void 0?ht.exists(o.exists):ht.none()}(e.currentDocument):ht.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let l=null;if("setToServerValue"in a)ne(a.setToServerValue==="REQUEST_TIME"),l=new Br;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];l=new zi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];l=new qi(d)}else"increment"in a?l=new jr(s,a.increment):X();let u=gt.fromServerFormat(a.fieldPath);return new Go(u,l)}(t,r)):[];if(e.update){e.update.name;let r=gi(t,e.update.name),o=new Kt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(l){let u=l.fieldPaths||[];return new wn(u.map(d=>gt.fromServerFormat(d)))}(e.updateMask);return new Yn(r,o,s,n,i)}return new Ur(r,o,n,i)}if(e.delete){let r=gi(t,e.delete);return new $r(r,n)}if(e.verify){let r=gi(t,e.verify);return new Vc(r,n)}return X()}function KU(t,e){return t&&t.length>0?(ne(e!==void 0),t.map(n=>function(r,o){let s=r.updateTime?_t(r.updateTime):_t(o);return s.isEqual(re.min())&&(s=_t(o)),new Q0(s,r.transformResults||[])}(n,e))):[]}function QM(t,e){return{documents:[zM(t,e.path)]}}function YM(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=zM(t,r);let o=function(u){if(u.length!==0)return XM($e.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:ma(m.field),direction:YU(m.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=tv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function JM(t){let e=qM(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){ne(i===1);let d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){let m=ZM(f);return m instanceof $e&&Mw(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(m=>function(D){return new Uo(ga(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,eu(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){let m=!!f.before,_=f.values||[];return new vi(_,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){let m=!f.before,_=f.values||[];return new vi(_,m)}(n.endAt)),IM(e,r,s,o,a,"F",l,u)}function QU(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=ga(n.unaryFilter.field);return Se.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ga(n.unaryFilter.field);return Se.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ga(n.unaryFilter.field);return Se.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ga(n.unaryFilter.field);return Se.create(s,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Se.create(ga(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $e.create(n.compositeFilter.filters.map(i=>ZM(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function YU(t){return $U[t]}function JU(t){return GU[t]}function ZU(t){return HU[t]}function ma(t){return{fieldPath:t.canonicalString()}}function ga(t){return gt.fromServerFormat(t.fieldPath)}function XM(t){return t instanceof Se?function(n){if(n.op==="=="){if(cS(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NAN"}};if(lS(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cS(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NOT_NAN"}};if(lS(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ma(n.field),op:JU(n.op),value:n.value}}}(t):t instanceof $e?function(n){let i=n.getFilters().map(r=>XM(r));return i.length===1?i[0]:{compositeFilter:{op:ZU(n.op),filters:i}}}(t):X()}function XU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Aa=class t{constructor(e,n,i,r,o=re.min(),s=re.min(),a=yt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var yf=class{constructor(e){this.ct=e}};function e$(t,e){let n;if(e.document)n=KM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=z.fromSegments(e.noDocument.path),r=zo(e.noDocument.readTime);n=Dt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return X();{let i=z.fromSegments(e.unknownDocument.path),r=zo(e.unknownDocument.version);n=Dt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new ot(r[0],r[1]);return re.fromTimestamp(o)}(e.readTime)),n}function SS(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:vf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,s){return{name:$c(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ma(o,s.version.toTimestamp()),createTime:Ma(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Ho(e.version)};else{if(!e.isUnknownDocument())return X();i.unknownDocument={path:n.path.toArray(),version:Ho(e.version)}}return i}function vf(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ho(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zo(t){let e=new ot(t.seconds,t.nanoseconds);return re.fromTimestamp(e)}function No(t,e){let n=(e.baseMutations||[]).map(o=>rv(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>rv(t.ct,o)),r=ot.fromMillis(e.localWriteTimeMs);return new Lc(e.batchId,r,n,i)}function Ic(t){let e=zo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?zo(t.lastLimboFreeSnapshotVersion):re.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return ne(o.documents.length===1),tn(ja(qM(o.documents[0])))}(t.query):function(o){return tn(JM(o))}(t.query),new Aa(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yt.fromBase64String(t.resumeToken))}function tA(t,e){let n=Ho(e.snapshotVersion),i=Ho(e.lastLimboFreeSnapshotVersion),r;r=hf(e.target)?QM(t.ct,e.target):YM(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$o(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Pw(t){let e=JM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pf(e,e.limit,"L"):e}function v0(t,e){return new Bc(e.largestBatchId,rv(t.ct,e.overlayMutation))}function MS(t,e){let n=e.path.lastSegment();return[t,en(e.path.popLast()),n]}function AS(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ho(i.readTime),documentKey:en(i.documentKey.path),largestBatchId:i.largestBatchId}}var ov=class{getBundleMetadata(e,n){return xS(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:zo(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return xS(e).put(function(r){return{bundleId:r.id,createTime:Ho(_t(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return OS(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:Pw(o.bundledQuery),readTime:zo(o.readTime)}}(i)})}saveNamedQuery(e,n){return OS(e).put(function(r){return{name:r.name,readTime:Ho(_t(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function xS(t){return Mt(t,"bundles")}function OS(t){return Mt(t,"namedQueries")}var wf=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return wc(e).get(MS(this.userId,n)).next(i=>i?v0(this.serializer,i):null)}getOverlays(e,n){let i=pi();return R.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,s)=>{let a=new Bc(n,s);r.push(this.ht(e,a))}),R.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(s=>r.add(en(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(wc(e).j("collectionPathOverlayIndex",a))}),R.waitFor(o)}getOverlaysForCollection(e,n,i){let r=pi(),o=en(n),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return wc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let l of a){let u=v0(this.serializer,l);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=pi(),s,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return wc(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,d)=>{let f=v0(this.serializer,u);o.size()<r||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,n){return wc(e).put(function(r,o,s){let[a,l,u]=MS(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Gc(r.ct,s.mutation)}}(this.serializer,this.userId,n))}};function wc(t){return Mt(t,"documentOverlays")}var sv=class{Pt(e){return Mt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let i=n?.value;return i?yt.fromUint8Array(i):yt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var $i=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(et(e.integerValue));else if("doubleValue"in e){let i=et(e.doubleValue);isNaN(i)?this.dt(n,13):(this.dt(n,15),Rc(i)?n.At(0):n.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(n,20),typeof i=="string"&&(i=Hi(i)),n.Rt(`${i.seconds||""}`),n.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Fr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(n,45),n.At(i.latitude||0),n.At(i.longitude||0)}else"mapValue"in e?_M(e)?this.dt(n,Number.MAX_SAFE_INTEGER):ep(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):X()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let i=e.fields||{};this.dt(n,55);for(let r of Object.keys(i))this.Vt(r,n),this.Tt(i[r],n)}wt(e,n){var i,r;let o=e.fields||{};this.dt(n,53);let s="value",a=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(n,15),n.At(et(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let i=e.values||[];this.dt(n,50);for(let r of i)this.Tt(r,n)}yt(e,n){this.dt(n,37),z.fromName(e).path.forEach(i=>{this.dt(n,60),this.Dt(i,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};$i.vt=new $i;function t$(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function RS(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let s=t$(255&i[o]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}var av=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ft(i.value),i=n.next();this.Mt()}xt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ot(i.value),i=n.next();this.Nt()}Lt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=n.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{let r=n.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(e){let n=this.qt(e),i=RS(n);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}Kt(e){let n=this.qt(e),i=RS(n);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ft(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){let n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},lv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},cv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},ko=class{constructor(){this.jt=new av,this.Ht=new lv(this.jt),this.Jt=new cv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Fo=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Zt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function Mr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=PS(t.arrayValue,e.arrayValue),n!==0?n:(n=PS(t.directionalValue,e.directionalValue),n!==0?n:z.comparator(t.documentKey,e.documentKey)))}function PS(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var bf=class{constructor(e){this.Xt=new qe((n,i)=>gt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let n of e.filters){let i=n;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(e){if(ne(e.collectionGroup===this.collectionId),this.nn)return!1;let n=x0(e);if(n!==void 0&&!this.sn(n))return!1;let i=Ro(e),r=new Set,o=0,s=0;for(;o<i.length&&this.sn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let l=i[o];if(!this.on(a,l)||!this._n(this.en[s++],l))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new qe(gt.comparator),n=[];for(let i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new va(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new va(i.field,0))}for(let i of this.en)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new va(i.field,i.dir==="asc"?0:1)));return new Da(Da.UNKNOWN_ID,this.collectionId,n,Oc.empty())}sn(e){for(let n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function nA(t){var e,n;if(ne(t instanceof Se||t instanceof $e),t instanceof Se){if(t instanceof df){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Se.create(t.field,"==",o)))||[];return $e.create(r,"or")}return t}let i=t.filters.map(r=>nA(r));return $e.create(i,t.op)}function n$(t){if(t.getFilters().length===0)return[];let e=hv(nA(t));return ne(iA(e)),uv(e)||dv(e)?[e]:e.getFilters()}function uv(t){return t instanceof Se}function dv(t){return t instanceof $e&&Mw(t)}function iA(t){return uv(t)||dv(t)||function(n){if(n instanceof $e&&L0(n)){for(let i of n.getFilters())if(!uv(i)&&!dv(i))return!1;return!0}return!1}(t)}function hv(t){if(ne(t instanceof Se||t instanceof $e),t instanceof Se)return t;if(t.filters.length===1)return hv(t.filters[0]);let e=t.filters.map(i=>hv(i)),n=$e.create(e,t.op);return n=Ef(n),iA(n)?n:(ne(n instanceof $e),ne(Ia(n)),ne(n.filters.length>1),n.filters.reduce((i,r)=>Nw(i,r)))}function Nw(t,e){let n;return ne(t instanceof Se||t instanceof $e),ne(e instanceof Se||e instanceof $e),n=t instanceof Se?e instanceof Se?function(r,o){return $e.create([r,o],"and")}(t,e):NS(t,e):e instanceof Se?NS(e,t):function(r,o){if(ne(r.filters.length>0&&o.filters.length>0),Ia(r)&&Ia(o))return EM(r,o.getFilters());let s=L0(r)?r:o,a=L0(r)?o:r,l=s.filters.map(u=>Nw(u,a));return $e.create(l,"or")}(t,e),Ef(n)}function NS(t,e){if(Ia(e))return EM(e,t.getFilters());{let n=e.filters.map(i=>Nw(t,i));return $e.create(n,"or")}}function Ef(t){if(ne(t instanceof Se||t instanceof $e),t instanceof Se)return t;let e=t.getFilters();if(e.length===1)return Ef(e[0]);if(wM(t))return t;let n=e.map(r=>Ef(r)),i=[];return n.forEach(r=>{r instanceof Se?i.push(r):r instanceof $e&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:$e.create(i,t.op)}var fv=class{constructor(){this.un=new Hc}addToCollectionParentIndex(e,n){return this.un.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(On.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(On.min())}updateCollectionGroup(e,n,i){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}},Hc=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new qe(Pe.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new qe(Pe.comparator)).toArray()}};var qh=new Uint8Array(0),pv=class{constructor(e,n){this.databaseId=n,this.cn=new Hc,this.ln=new wi(i=>$o(i),(i,r)=>tu(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});let o={collectionId:i,parent:en(r)};return kS(e).put(o)}return R.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[oM(n),""],!1,!0);return kS(e).U(r).next(o=>{for(let s of o){if(s.collectionId!==n)break;i.push(fi(s.parent))}return i})}addFieldIndex(e,n){let i=bc(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let s=da(e);return o.next(a=>{s.put(AS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=bc(e),r=da(e),o=ua(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=bc(e),i=ua(e),r=da(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return R.forEach(this.hn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new bf(i).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=ua(e),r=!0,o=new Map;return R.forEach(this.hn(n),s=>this.Pn(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=ve(),a=[];return R.forEach(o,(l,u)=>{L("IndexedDbIndexManager",`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`}(l)} to execute ${$o(n)}`);let d=function(j,W){let le=x0(W);if(le===void 0)return null;for(let ie of ff(j,le.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null}(u,l),f=function(j,W){let le=new Map;for(let ie of Ro(W))for(let b of ff(j,ie.fieldPath))switch(b.op){case"==":case"in":le.set(ie.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return le.set(ie.fieldPath.canonicalString(),b.value),Array.from(le.values())}return null}(u,l),m=function(j,W){let le=[],ie=!0;for(let b of Ro(W)){let y=b.kind===0?pS(j,b.fieldPath,j.startAt):mS(j,b.fieldPath,j.startAt);le.push(y.value),ie&&(ie=y.inclusive)}return new vi(le,ie)}(u,l),_=function(j,W){let le=[],ie=!0;for(let b of Ro(W)){let y=b.kind===0?mS(j,b.fieldPath,j.endAt):pS(j,b.fieldPath,j.endAt);le.push(y.value),ie&&(ie=y.inclusive)}return new vi(le,ie)}(u,l),D=this.In(l,u,m),T=this.In(l,u,_),M=this.Tn(l,u,f),k=this.En(l.indexId,d,D,m.inclusive,T,_.inclusive,M);return R.forEach(k,q=>i.G(q,n.limit).next(j=>{j.forEach(W=>{let le=z.fromSegments(W.documentKey);s.has(le)||(s=s.add(le),a.push(le))})}))}).next(()=>a)}return R.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=n$($e.create(e.filters,"and")).map(i=>W0(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,i,r,o,s,a){let l=(n!=null?n.length:1)*Math.max(i.length,o.length),u=l/(n!=null?n.length:1),d=[];for(let f=0;f<l;++f){let m=n?this.dn(n[f/u]):qh,_=this.An(e,m,i[f%u],r),D=this.Rn(e,m,o[f%u],s),T=a.map(M=>this.An(e,m,M,!0));d.push(...this.createRange(_,D,T))}return d}An(e,n,i,r){let o=new Fo(e,z.empty(),n,i);return r?o:o.Zt()}Rn(e,n,i,r){let o=new Fo(e,z.empty(),n,i);return r?o.Zt():o}Pn(e,n){let i=new bf(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(let a of o)i.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let i=2,r=this.hn(n);return R.forEach(r,o=>this.Pn(e,o).next(s=>{s?i!==0&&s.fields.length<function(l){let u=new qe(gt.comparator),d=!1;for(let f of l.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(let f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}Vn(e,n){let i=new ko;for(let r of Ro(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let s=i.Yt(r.kind);$i.vt.It(o,s)}return i.zt()}dn(e){let n=new ko;return $i.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){let i=new ko;return $i.vt.It(jo(this.databaseId,n),i.Yt(function(o){let s=Ro(o);return s.length===0?0:s[s.length-1].kind}(e))),i.zt()}Tn(e,n,i){if(i===null)return[];let r=[];r.push(new ko);let o=0;for(let s of Ro(e)){let a=i[o++];for(let l of r)if(this.fn(n,s.fieldPath)&&Fc(a))r=this.gn(r,s,a);else{let u=l.Yt(s.kind);$i.vt.It(a,u)}}return this.pn(r)}In(e,n,i){return this.Tn(e,n,i.position)}pn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].zt();return n}gn(e,n,i){let r=[...e],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let l=new ko;l.seed(a.zt()),$i.vt.It(s,l.Yt(n.kind)),o.push(l)}return o}fn(e,n){return!!e.filters.find(i=>i instanceof Se&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=bc(e),r=da(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let s=[];return R.forEach(o,a=>r.get([a.indexId,this.uid]).next(l=>{s.push(function(d,f){let m=f?new Oc(f.sequenceNumber,new On(zo(f.readTime),new z(fi(f.documentKey)),f.largestBatchId)):Oc.empty(),_=d.fields.map(([D,T])=>new va(gt.fromServerFormat(D),T));return new Da(d.indexId,d.collectionGroup,_,m)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:_e(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=bc(e),o=da(e);return this.yn(e).next(s=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>R.forEach(a,l=>o.put(AS(l.indexId,this.uid,s,i)))))}updateIndexEntries(e,n){let i=new Map;return R.forEach(n,(r,o)=>{let s=i.get(r.collectionGroup);return(s?R.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),R.forEach(a,l=>this.wn(e,r,l).next(u=>{let d=this.Sn(o,l);return u.isEqual(d)?R.resolve():this.bn(e,o,l,u,d)}))))})}Dn(e,n,i,r){return ua(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,n.key),documentKey:n.key.path.toArray()})}vn(e,n,i,r){return ua(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,n.key),n.key.path.toArray()])}wn(e,n,i){let r=ua(e),o=new qe(Mr);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,n)])},(s,a)=>{o=o.add(new Fo(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,n){let i=new qe(Mr),r=this.Vn(n,e);if(r==null)return i;let o=x0(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Fc(s))for(let a of s.arrayValue.values||[])i=i.add(new Fo(n.indexId,e.key,this.dn(a),r))}else i=i.add(new Fo(n.indexId,e.key,qh,r));return i}bn(e,n,i,r,o){L("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(l,u,d,f,m){let _=l.getIterator(),D=u.getIterator(),T=ca(_),M=ca(D);for(;T||M;){let k=!1,q=!1;if(T&&M){let j=d(T,M);j<0?q=!0:j>0&&(k=!0)}else T!=null?q=!0:k=!0;k?(f(M),M=ca(D)):q?(m(T),T=ca(_)):(T=ca(_),M=ca(D))}}(r,o,Mr,a=>{s.push(this.Dn(e,n,i,a))},a=>{s.push(this.vn(e,n,i,a))}),R.waitFor(s)}yn(e){let n=1;return da(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((s,a)=>Mr(s,a)).filter((s,a,l)=>!a||Mr(s,l[a-1])!==0);let r=[];r.push(e);for(let s of i){let a=Mr(s,e),l=Mr(s,n);if(a===0)r[0]=e.Zt();else if(a>0&&l<0)r.push(s),r.push(s.Zt());else if(l>0)break}r.push(n);let o=[];for(let s=0;s<r.length;s+=2){if(this.Cn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,qh,[]],l=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,qh,[]];o.push(IDBKeyRange.bound(a,l))}return o}Cn(e,n){return Mr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(FS)}getMinOffset(e,n){return R.mapArray(this.hn(n),i=>this.Pn(e,i).next(r=>r||X())).next(FS)}};function kS(t){return Mt(t,"collectionParents")}function ua(t){return Mt(t,"indexEntries")}function bc(t){return Mt(t,"indexConfiguration")}function da(t){return Mt(t,"indexState")}function FS(t){ne(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;Cw(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new On(e.readTime,e.documentKey,n)}var VS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},An=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function rA(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,l=i.J({range:s},(d,f,m)=>(a++,m.delete()));o.push(l.next(()=>{ne(a===1)}));let u=[];for(let d of n.mutations){let f=dM(e,d.key.path,n.batchId);o.push(r.delete(f)),u.push(d.key)}return R.waitFor(o).next(()=>u)}function Df(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw X();e=t.noDocument}return JSON.stringify(e).length}An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(41943040,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);var Cf=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(e,n,i,r){ne(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ar(e).J({index:"userMutationsIndex",range:i},(r,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=_a(e),s=Ar(e);return s.add({}).next(a=>{ne(typeof a=="number");let l=new Lc(a,n,i,r),u=function(_,D,T){let M=T.baseMutations.map(q=>Gc(_.ct,q)),k=T.mutations.map(q=>Gc(_.ct,q));return{userId:D,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:M,mutations:k}}(this.serializer,this.userId,l),d=[],f=new qe((m,_)=>_e(m.canonicalString(),_.canonicalString()));for(let m of r){let _=dM(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),d.push(s.put(u)),d.push(o.put(_,lU))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),R.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Ar(e).get(n).next(i=>i?(ne(i.userId===this.userId),No(this.serializer,i)):null)}Mn(e,n){return this.Fn[n]?R.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Fn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Ar(e).J({index:"userMutationsIndex",range:r},(s,a,l)=>{a.userId===this.userId&&(ne(a.batchId>=i),o=No(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Ar(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ar(e).U("userMutationsIndex",n).next(i=>i.map(r=>No(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=Yh(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return _a(e).J({range:r},(s,a,l)=>{let[u,d,f]=s,m=fi(d);if(u===this.userId&&n.path.isEqual(m))return Ar(e).get(f).next(_=>{if(!_)throw X();ne(_.userId===this.userId),o.push(No(this.serializer,_))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new qe(_e),r=[];return n.forEach(o=>{let s=Yh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=_a(e).J({range:a},(u,d,f)=>{let[m,_,D]=u,T=fi(_);m===this.userId&&o.path.isEqual(T)?i=i.add(D):f.done()});r.push(l)}),R.waitFor(r).next(()=>this.xn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=Yh(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new qe(_e);return _a(e).J({range:s},(l,u,d)=>{let[f,m,_]=l,D=fi(m);f===this.userId&&i.isPrefixOf(D)?D.length===r&&(a=a.add(_)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(Ar(e).get(o).next(s=>{if(s===null)throw X();ne(s.userId===this.userId),i.push(No(this.serializer,s))}))}),R.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return rA(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),R.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return R.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return _a(e).J({range:i},(o,s,a)=>{if(o[0]===this.userId){let l=fi(o[1]);r.push(l)}else a.done()}).next(()=>{ne(r.length===0)})})}containsKey(e,n){return oA(e,this.userId,n)}Nn(e){return sA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function oA(t,e,n){let i=Yh(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return _a(t).J({range:o,H:!0},(a,l,u)=>{let[d,f,m]=a;d===e&&f===r&&(s=!0),u.done()}).next(()=>s)}function Ar(t){return Mt(t,"mutations")}function _a(t){return Mt(t,"documentMutations")}function sA(t){return Mt(t,"mutationQueues")}var xa=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var mv=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{let i=new xa(n.highestTargetId);return n.highestTargetId=i.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>re.fromTimestamp(new ot(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.qn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Qn(e,r)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(i=>(i.targetCount+=1,this.$n(n,i),this.Qn(e,i))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ha(e).delete(n.targetId)).next(()=>this.qn(e)).next(i=>(ne(i.targetCount>0),i.targetCount-=1,this.Qn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return ha(e).J((s,a)=>{let l=Ic(a);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,o.push(this.removeTargetData(e,l)))}).next(()=>R.waitFor(o)).next(()=>r)}forEachTarget(e,n){return ha(e).J((i,r)=>{let o=Ic(r);n(o)})}qn(e){return LS(e).get("targetGlobalKey").next(n=>(ne(n!==null),n))}Qn(e,n){return LS(e).put("targetGlobalKey",n)}Kn(e,n){return ha(e).put(tA(this.serializer,n))}$n(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=$o(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return ha(e).J({range:r,index:"queryTargetsIndex"},(s,a,l)=>{let u=Ic(a);tu(n,u.target)&&(o=u,l.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=xr(e);return n.forEach(s=>{let a=en(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,s))}),R.waitFor(r)}removeMatchingKeys(e,n,i){let r=xr(e);return R.forEach(n,o=>{let s=en(o.path);return R.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=xr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=xr(e),o=ve();return r.J({range:i,H:!0},(s,a,l)=>{let u=fi(s[1]),d=new z(u);o=o.add(d)}).next(()=>o)}containsKey(e,n){let i=en(n.path),r=IDBKeyRange.bound([i],[oM(i)],!1,!0),o=0;return xr(e).J({index:"documentTargetsIndex",H:!0,range:r},([s,a],l,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,n){return ha(e).get(n).next(i=>i?Ic(i):null)}};function ha(t){return Mt(t,"targets")}function LS(t){return Mt(t,"targetGlobal")}function xr(t){return Mt(t,"targetDocuments")}function BS([t,e],[n,i]){let r=_e(t,n);return r===0?_e(e,i):r}var gv=class{constructor(e){this.Un=e,this.buffer=new qe(BS),this.Wn=0}Gn(){return++this.Wn}zn(e){let n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();BS(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},_v=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){L("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>O(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){zr(n)?L("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Hr(n)}yield this.Hn(3e5)}))}},yv=class{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return R.resolve(vn.oe);let i=new gv(n);return this.Jn.forEachTarget(e,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(e,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(VS)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VS):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let i,r,o,s,a,l,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,s=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(e,i,n))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(u=Date.now(),fa()<=Xn.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:f})))}};function i$(t,e){return new yv(t,e)}var vv=class{constructor(e,n){this.db=e,this.garbageCollector=i$(this,n)}Yn(e){let n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}er(e){let n=0;return this.Zn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(i,r)=>n(r))}addReference(e,n,i){return Wh(e,i)}removeReference(e,n,i){return Wh(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Wh(e,n)}nr(e,n){return function(r,o){let s=!1;return sA(r).Y(a=>oA(r,a,o).next(l=>(l&&(s=!0),R.resolve(!l)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.tr(e,(s,a)=>{if(a<=n){let l=this.nr(e,s).next(u=>{if(!u)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,re.min()),xr(e).delete(function(f){return[0,en(f.path)]}(s))))});r.push(l)}}).next(()=>R.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Wh(e,n)}tr(e,n){let i=xr(e),r,o=vn.oe;return i.J({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:u})=>{s===0?(o!==vn.oe&&n(new z(fi(r)),o),o=u,r=l):o=vn.oe}).next(()=>{o!==vn.oe&&n(new z(fi(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Wh(t,e){return xr(t).put(function(i,r){return{targetId:0,path:en(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var If=class{constructor(){this.changes=new wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?R.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var wv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Oo(e).put(i)}removeEntry(e,n,i){return Oo(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],vf(s),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.rr(e,i)))}getEntry(e,n){let i=Dt.newInvalidDocument(n);return Oo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ec(n))},(r,o)=>{i=this.ir(n,o)}).next(()=>i)}sr(e,n){let i={size:0,document:Dt.newInvalidDocument(n)};return Oo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ec(n))},(r,o)=>{i={document:this.ir(n,o),size:Df(o)}}).next(()=>i)}getEntries(e,n){let i=hn();return this._r(e,n,(r,o)=>{let s=this.ir(r,o);i=i.insert(r,s)}).next(()=>i)}ar(e,n){let i=hn(),r=new Ze(z.comparator);return this._r(e,n,(o,s)=>{let a=this.ir(o,s);i=i.insert(o,a),r=r.insert(o,Df(s))}).next(()=>({documents:i,ur:r}))}_r(e,n,i){if(n.isEmpty())return R.resolve();let r=new qe($S);n.forEach(l=>r=r.add(l));let o=IDBKeyRange.bound(Ec(r.first()),Ec(r.last())),s=r.getIterator(),a=s.getNext();return Oo(e).J({index:"documentKeyIndex",range:o},(l,u,d)=>{let f=z.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&$S(a,f)<0;)i(a,null),a=s.getNext();a&&a.isEqual(f)&&(i(a,u),a=s.hasNext()?s.getNext():null),a?d.$(Ec(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),vf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oo(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let d=hn();for(let f of u){let m=this.ir(z.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(iu(n,m)||r.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,i,r){let o=hn(),s=US(n,i),a=US(n,On.max());return Oo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,u,d)=>{let f=this.ir(z.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(f.key,f),o.size===r&&d.done()}).next(()=>o)}newChangeBuffer(e){return new bv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return jS(e).get("remoteDocumentGlobalKey").next(n=>(ne(!!n),n))}rr(e,n){return jS(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){let i=e$(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(re.min())))return i}return Dt.newInvalidDocument(e)}};function aA(t){return new wv(t)}var bv=class extends If{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new wi(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new qe((o,s)=>_e(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(n.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let l=SS(this.cr.serializer,s);r=r.add(o.path.popLast());let u=Df(l);i+=u-a.size,n.push(this.cr.addEntry(e,o,l))}else if(i-=a.size,this.trackRemovals){let l=SS(this.cr.serializer,s.convertToNoDocument(re.min()));n.push(this.cr.addEntry(e,o,l))}}),r.forEach(o=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.cr.updateMetadata(e,i)),R.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(i=>(this.lr.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:i,ur:r})=>(r.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function jS(t){return Mt(t,"remoteDocumentGlobal")}function Oo(t){return Mt(t,"remoteDocumentsV14")}function Ec(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function US(t,e){let n=e.documentKey.path.toArray();return[t,vf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $S(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=_e(n[o],i[o]),r)return r;return r=_e(n.length,i.length),r||(r=_e(n[n.length-2],i[i.length-2]),r||_e(n[n.length-1],i[i.length-1]))}var Ev=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Tf=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Mc(i.mutation,r,wn.empty(),ot.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ve()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ve()){let r=pi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let s=Cc();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let i=pi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ve()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,i,r){let o=hn(),s=Sc(),a=function(){return Sc()}();return n.forEach((l,u)=>{let d=i.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof Yn)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),Mc(d.mutation,u,d.mutation.getFieldMask(),ot.now())):s.set(u.key,wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new Ev(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let i=Sc(),r=new Ze((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=n.get(l);if(u===null)return;let d=i.get(l)||wn.empty();d=a.applyToLocalView(u,d),i.set(l,d);let f=(r.get(a.batchId)||ve()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,d=l.value,f=OM();d.forEach(m=>{if(!o.has(m)){let _=LM(n.get(m),i.get(m));_!==null&&f.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return R.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Aw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):R.resolve(pi()),a=-1,l=o;return s.next(u=>R.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?R.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,ve())).next(d=>({batchId:a,changes:xM(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(i=>{let r=Cc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,s=Cc();return this.indexManager.getCollectionParents(e,o).next(a=>R.forEach(a,l=>{let u=function(f,m){return new Qn(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(s=>{o.forEach((l,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Dt.newInvalidDocument(d)))});let a=Cc();return s.forEach((l,u)=>{let d=o.get(l);d!==void 0&&Mc(d.mutation,u,wn.empty(),ot.now()),iu(n,u)&&(a=a.insert(l,u))}),a})}};var Dv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return R.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:_t(r.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:Pw(r.bundledQuery),readTime:_t(r.readTime)}}(n)),R.resolve()}};var Cv=class{constructor(){this.overlays=new Ze(z.comparator),this.Ir=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){let i=pi();return R.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),R.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),R.resolve()}getOverlaysForCollection(e,n,i){let r=pi(),o=n.length+1,s=new z(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return R.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Ze((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let d=o.get(u.largestBatchId);d===null&&(d=pi(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=pi(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=r)););return R.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new Bc(n,i));let o=this.Ir.get(n);o===void 0&&(o=ve(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}};var Iv=class{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,R.resolve()}};var zc=class{constructor(){this.Tr=new qe(wt.Er),this.dr=new qe(wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let i=new wt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new wt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){let n=new z(new Pe([])),i=new wt(n,e),r=new wt(n,e+1),o=[];return this.dr.forEachInRange([i,r],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new z(new Pe([])),i=new wt(n,e),r=new wt(n,e+1),o=ve();return this.dr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new wt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},wt=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return z.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||z.comparator(e.key,n.key)}};var Tv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new qe(wt.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Lc(o,n,i,r);this.mutationQueue.push(s);for(let a of r)this.br=this.br.add(new wt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(s)}lookupMutationBatch(e,n){return R.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.vr(i),o=r<0?0:r;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new wt(n,0),r=new wt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],s=>{let a=this.Dr(s.wr);o.push(a)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new qe(_e);return n.forEach(r=>{let o=new wt(r,0),s=new wt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{i=i.add(a.wr)})}),R.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;z.isDocumentKey(o)||(o=o.child(""));let s=new wt(new z(o),0),a=new qe(_e);return this.br.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},s),R.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ne(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return R.forEach(n.mutations,r=>{let o=new wt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){let i=new wt(n,0),r=this.br.firstAfterOrEqual(i);return R.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Sv=class{constructor(e){this.Mr=e,this.docs=function(){return new Ze(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return R.resolve(i?i.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let i=hn();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Dt.newInvalidDocument(r))}),R.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=hn(),s=n.path,a=new z(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:d}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Cw(aM(d),i)<=0||(r.has(d.key)||iu(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,n,i,r){X()}Or(e,n){return R.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Mv(this)}getSize(e){return R.resolve(this.size)}},Mv=class extends If{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),R.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Av=class{constructor(e){this.persistence=e,this.Nr=new wi(n=>$o(n),tu),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zc,this.targetCount=0,this.kr=xa.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),R.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new xa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.Kn(n),R.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),R.waitFor(o).next(()=>r)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){let i=this.Nr.get(n)||null;return R.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),R.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),R.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Br.yr(n);return R.resolve(i)}containsKey(e,n){return R.resolve(this.Br.containsKey(n))}};var Sf=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new vn(0),this.Kr=!1,this.Kr=!0,this.$r=new Iv,this.referenceDelegate=e(this),this.Ur=new Av(this),this.indexManager=new fv,this.remoteDocumentCache=function(r){return new Sv(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new yf(n),this.Gr=new Dv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Cv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new Tv(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){L("MemoryPersistence","Starting transaction:",e);let r=new xv(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return R.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}},xv=class extends sf{constructor(e){super(),this.currentSequenceNumber=e}},Mf=class t{constructor(e){this.persistence=e,this.Jr=new zc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),R.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),R.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,i=>{let r=z.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return R.or([()=>R.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Ov=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new af("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rS,{unique:!0}),l.createObjectStore("documentMutations")}(e),GS(e),function(l){l.createObjectStore("remoteDocuments")}(e));let s=R.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),GS(e)),s=s.next(()=>function(l){let u=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(l,u){return u.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rS,{unique:!0});let f=u.store("mutations"),m=d.map(_=>f.put(_));return R.waitFor(m)})}(e,o))),s=s.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(s=s.next(()=>this.ni(o))),i<6&&r>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),i<7&&r>=7&&(s=s.next(()=>this.ii(o))),i<8&&r>=8&&(s=s.next(()=>this.si(e,o))),i<9&&r>=9&&(s=s.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(s=s.next(()=>this.oi(o))),i<11&&r>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{(function(l){let u=l.createObjectStore("documentOverlays",{keyPath:wU});u.createIndex("collectionPathOverlayIndex",bU,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",EU,{unique:!1})})(e)})),i<13&&r>=13&&(s=s.next(()=>function(l){let u=l.createObjectStore("remoteDocumentsV14",{keyPath:cU});u.createIndex("documentKeyIndex",uU),u.createIndex("collectionGroupIndex",dU)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ai(e,o))),i<15&&r>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:gU}).createIndex("sequenceNumberIndex",_U,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:yU}).createIndex("documentKeyIndex",vU,{unique:!1})}(e))),i<16&&r>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),i<17&&r>=17&&(s=s.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=Df(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>R.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",s).next(a=>R.forEach(a,l=>{ne(l.userId===o.userId);let u=No(this.serializer,l);return rA(e,o.userId,u).next(()=>{})}))}))}ii(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((s,a)=>{let l=new Pe(s),u=function(f){return[0,en(f)]}(l);o.push(n.get(u).next(d=>d?R.resolve():(f=>n.put({targetId:0,path:en(f),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>R.waitFor(o))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:mU});let i=n.store("collectionParents"),r=new Hc,o=s=>{if(r.add(s)){let a=s.lastSegment(),l=s.popLast();return i.put({collectionId:a,parent:en(l)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let l=new Pe(s);return o(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,l],u)=>{let d=fi(a);return o(d.popLast())}))}oi(e){let n=e.store("targets");return n.J((i,r)=>{let o=Ic(r),s=tA(this.serializer,o);return n.put(s)})}_i(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,s)=>{let a=n.store("remoteDocumentsV14"),l=function(f){return f.document?new z(Pe.fromString(f.document.name).popFirst(5)):f.noDocument?z.fromSegments(f.noDocument.path):f.unknownDocument?z.fromSegments(f.unknownDocument.path):X()}(s).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(u))}).next(()=>R.waitFor(r))}ai(e,n){let i=n.store("mutations"),r=aA(this.serializer),o=new Sf(Mf.Zr,this.serializer.ct);return i.U().next(s=>{let a=new Map;return s.forEach(l=>{var u;let d=(u=a.get(l.userId))!==null&&u!==void 0?u:ve();No(this.serializer,l).keys().forEach(f=>d=d.add(f)),a.set(l.userId,d)}),R.forEach(a,(l,u)=>{let d=new bt(u),f=wf.lt(this.serializer,d),m=o.getIndexManager(d),_=Cf.lt(d,this.serializer,m,o.referenceDelegate);return new Tf(r,_,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Pc(n,vn.oe),l).next()})})}};function GS(t){t.createObjectStore("targetDocuments",{keyPath:fU}).createIndex("documentTargetsIndex",pU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hU,{unique:!0}),t.createObjectStore("targetGlobal")}var w0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Rv=class t{constructor(e,n,i,r,o,s,a,l,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.ui=o,this.window=s,this.document=a,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!t.D())throw new F(P.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vv(this,r),this.Ai=n+"main",this.serializer=new yf(l),this.Ri=new kr(this.Ai,this.hi,new Ov(this.serializer)),this.$r=new sv,this.Ur=new mv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=aA(this.serializer),this.Gr=new ov,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&mt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(P.FAILED_PRECONDITION,w0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new vn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=n=>O(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(n=>O(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>O(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Kh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(zr(e))return L("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return L("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Dc(e).get("owner").next(n=>R.resolve(this.vi(n)))}Ci(e){return Kh(e).delete(this.clientId)}Fi(){return O(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=Mt(n,"clientMetadata");return i.U().next(r=>{let o=this.xi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return R.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let n of e)this.Vi.removeItem(this.Oi(n.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?R.resolve(!0):Dc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new F(P.FAILED_PRECONDITION,w0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kh(e).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&L("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return O(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Pc(e,vn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()})}xi(e,n){return e.filter(i=>this.Mi(i.updateTimeMs,n)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Kh(e).U().next(n=>this.xi(n,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Cf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return wf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,i){L("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(l){return l===17?IU:l===16?CU:l===15?Tw:l===14?pM:l===13?fM:l===12?DU:l===11?hM:void X()}(this.hi),s;return this.Ri.runTransaction(e,r,o,a=>(s=new Pc(a,this.Qr?this.Qr.next():vn.oe),n==="readwrite-primary"?this.wi(s).next(l=>!!l||this.Si(s)).next(l=>{if(!l)throw mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new F(P.FAILED_PRECONDITION,lM);return i(s)}).next(l=>this.Di(s).next(()=>l)):this.Ki(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Dc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(P.FAILED_PRECONDITION,w0)})}Di(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dc(e).put("owner",n)}static D(){return kr.D()}bi(e){let n=Dc(e);return n.get("owner").next(i=>this.vi(i)?(L("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):R.resolve())}Mi(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(mt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let n=/(?:Version|Mobile)\/1[456]/;lm()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{let i=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return L("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return mt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){mt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Dc(t){return Mt(t,"owner")}function Kh(t){return Mt(t,"clientMetadata")}function kw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Pv=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ve(),r=ve();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var Nv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Af=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lm()?8:cM(wl())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Nv;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(fa()<=Xn.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",pa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(fa()<=Xn.DEBUG&&L("QueryEngine","Query:",pa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(fa()<=Xn.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",pa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(n))):R.resolve())}Yi(e,n){if(gS(n))return R.resolve(null);let i=tn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=pf(n,null,"F"),i=tn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=ve(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{let u=this.ts(n,a);return this.ns(n,u,s,l.readTime)?this.Yi(e,pf(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,i,r){return gS(n)||r.isEqual(re.min())?R.resolve(null):this.Ji.getDocuments(e,i).next(o=>{let s=this.ts(n,o);return this.ns(n,s,i,r)?R.resolve(null):(fa()<=Xn.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pa(n)),this.rs(e,s,n,sM(r,-1)).next(a=>a))})}ts(e,n){let i=new qe(MM(e));return n.forEach((r,o)=>{iu(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return fa()<=Xn.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",pa(n)),this.Ji.getDocumentsMatchingQuery(e,n,On.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var kv=class{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Ze(_e),this._s=new wi(o=>$o(o),tu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function lA(t,e,n,i){return new kv(t,e,n,i)}function cA(t,e){return O(this,null,function*(){let n=H(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],l=ve();for(let u of r){s.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function r$(t,e){let n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){let f=u.batch,m=f.keys(),_=R.resolve();return m.forEach(D=>{_=_.next(()=>d.getEntry(l,D)).next(T=>{let M=u.docVersions.get(D);ne(M!==null),T.version.compareTo(M)<0&&(f.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),d.addEntry(T)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ve();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function uA(t){let e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function o$(t,e){let n=H(t),i=e.snapshotVersion,r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let m=r.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(o,d.addedDocuments,f)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(yt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(f,_),function(T,M,k){return T.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,_,d)&&a.push(n.Ur.updateTargetData(o,_))});let l=hn(),u=ve();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(dA(o,s,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!i.isEqual(re.min())){let d=n.Ur.getLastRemoteSnapshotVersion(o).next(f=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(d)}return R.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(n.os=r,o))}function dA(t,e,n){let i=ve(),r=ve();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let s=hn();return n.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:r}})}function s$(t,e){let n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Oa(t,e){let n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,R.resolve(r)):n.Ur.allocateTargetId(i).next(s=>(r=new Aa(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}function Ra(t,e,n){return O(this,null,function*(){let i=H(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!zr(s))throw s;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function xf(t,e,n){let i=H(t),r=re.min(),o=ve();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,d){let f=H(l),m=f._s.get(d);return m!==void 0?R.resolve(f.os.get(m)):f.Ur.getTargetData(u,d)}(i,s,tn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>i.ss.getDocumentsMatchingQuery(s,e,n?r:re.min(),n?o:ve())).next(a=>(pA(i,SM(e),a),{documents:a,Ts:o})))}function hA(t,e){let n=H(t),i=H(n.Ur),r=n.os.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(s=>s?s.target:null))}function fA(t,e){let n=H(t),i=n.us.get(e)||re.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.cs.getAllFromCollectionGroup(r,e,sM(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(pA(n,e,r),r))}function pA(t,e,n){let i=t.us.get(e)||re.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}function a$(t,e,n,i){return O(this,null,function*(){let r=H(t),o=ve(),s=hn();for(let u of n){let d=e.Es(u.metadata.name);u.document&&(o=o.add(d));let f=e.ds(u);f.setReadTime(e.As(u.metadata.readTime)),s=s.insert(d,f)}let a=r.cs.newChangeBuffer({trackRemovals:!0}),l=yield Oa(r,function(d){return tn(ja(Pe.fromString(`__bundle__/docs/${d}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>dA(u,a,s).next(d=>(a.apply(u),d)).next(d=>r.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>r.Ur.addMatchingKeys(u,o,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is)).next(()=>d.Ps)))})}function l$(i,r){return O(this,arguments,function*(t,e,n=ve()){let o=yield Oa(t,tn(Pw(e.bundledQuery))),s=H(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let l=_t(e.readTime);if(o.snapshotVersion.compareTo(l)>=0)return s.Gr.saveNamedQuery(a,e);let u=o.withResumeToken(yt.EMPTY_BYTE_STRING,l);return s.os=s.os.insert(u.targetId,u),s.Ur.updateTargetData(a,u).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,n,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function HS(t,e){return`firestore_clients_${t}_${e}`}function zS(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function b0(t,e){return`firestore_targets_${t}_${e}`}var Of=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Rs(e,n,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new F(r.error.code,r.error.message))),s?new t(e,n,r.state,o):(mt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ac=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Rs(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new F(i.error.code,i.error.message))),o?new t(e,i.state,r):(mt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Rf=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=xw();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=uM(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(mt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Fv=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(mt("SharedClientState",`Failed to parse online state: ${e}`),null)}},qc=class{constructor(){this.activeTargetIds=xw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},xc=class{constructor(e,n,i,r,o){this.window=e,this.ui=n,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ze(_e),this.started=!1,this.bs=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=HS(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new qc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return O(this,null,function*(){let e=yield this.syncEngine.Qi();for(let i of e){if(i===this.ps)continue;let r=this.getItem(HS(this.persistenceKey,i));if(r){let o=Rf.Rs(i,r);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let n=this.storage.getItem(this.xs);if(n){let i=this.Ls(n);i&&this.Bs(i)}for(let i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,i){this.qs(e,n,i),this.Qs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(b0(this.persistenceKey,e));if(i){let r=Ac.Rs(e,i);r&&(n=r.state)}}return this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(b0(this.persistenceKey,e))}updateQueryState(e,n,i){this.$s(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Qs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return L("SharedClientState","READ",e,n),n}setItem(e,n){L("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){L("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let n=e;if(n.storageArea===this.storage){if(L("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>O(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let i=this.Gs(n.key);return this.zs(i,null)}{let i=this.js(n.key,n.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let i=this.Hs(n.key,n.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){let i=this.Ys(n.key,n.newValue);if(i)return this.Zs(i)}}else if(n.key===this.xs){if(n.newValue!==null){let i=this.Ls(n.newValue);if(i)return this.Bs(i)}}else if(n.key===this.vs){let i=function(o){let s=vn.oe;if(o!=null)try{let a=JSON.parse(o);ne(typeof a=="number"),s=a}catch(a){mt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);i!==vn.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Os){let i=this.Xs(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,i){let r=new Of(this.currentUser,e,n,i),o=zS(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Vs())}Qs(e){let n=zS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){let n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,i){let r=b0(this.persistenceKey,e),o=new Ac(e,n,i);this.setItem(r,o.Vs())}Ws(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){let n=this.Cs.exec(e);return n?n[1]:null}js(e,n){let i=this.Gs(e);return Rf.Rs(i,n)}Hs(e,n){let i=this.Fs.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Of.Rs(new bt(o),r,n)}Ys(e,n){let i=this.Ms.exec(e),r=Number(i[1]);return Ac.Rs(r,n)}Ls(e){return Fv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return O(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);L("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){let i=n?this.Ss.insert(e,n):this.Ss.remove(e),r=this.ks(this.Ss),o=this.ks(i),s=[],a=[];return o.forEach(l=>{r.has(l)||s.push(l)}),r.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.io(s,a).then(()=>{this.Ss=i})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=xw();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},Pf=class{constructor(){this.so=new qc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qc,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Vv=class{_o(e){}shutdown(){}};var Nf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Qh=null;function E0(){return Qh===null?Qh=function(){return 268435456+Math.round(2147483648*Math.random())}():Qh++,"0x"+Qh.toString(16)}var c$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Lv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Wt="WebChannelConnection",Bv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,s){let a=E0(),l=this.xo(n,i.toUriEncodedString());L("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(n,l,u,r).then(d=>(L("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw xn("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",r),d})}Lo(n,i,r,o,s,a){return this.Mo(n,i,r,o,s)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ba}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}xo(n,i){let r=c$[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){let o=E0();return new Promise((s,a)=>{let l=new f0;l.setWithCredentials(!0),l.listenOnce(m0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vc.NO_ERROR:let d=l.getResponseJson();L(Wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case vc.TIMEOUT:L(Wt,`RPC '${e}' ${o} timed out`),a(new F(P.DEADLINE_EXCEEDED,"Request time out"));break;case vc.HTTP_ERROR:let f=l.getStatus();if(L(Wt,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let _=m?.error;if(_&&_.status&&_.message){let D=function(M){let k=M.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(k)>=0?k:P.UNKNOWN}(_.status);a(new F(D,_.message))}else a(new F(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new F(P.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{L(Wt,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);L(Wt,`RPC '${e}' ${o} sending request:`,r),l.send(n,"POST",u,i,15)})}Bo(e,n,i){let r=E0(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=y0(),a=_0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new p0({})),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;let d=o.join("");L(Wt,`Creating RPC '${e}' stream ${r}: ${d}`,l);let f=s.createWebChannel(d,l),m=!1,_=!1,D=new Lv({Io:M=>{_?L(Wt,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(m||(L(Wt,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),L(Wt,`RPC '${e}' stream ${r} sending:`,M),f.send(M))},To:()=>f.close()}),T=(M,k,q)=>{M.listen(k,j=>{try{q(j)}catch(W){setTimeout(()=>{throw W},0)}})};return T(f,la.EventType.OPEN,()=>{_||(L(Wt,`RPC '${e}' stream ${r} transport opened.`),D.yo())}),T(f,la.EventType.CLOSE,()=>{_||(_=!0,L(Wt,`RPC '${e}' stream ${r} transport closed`),D.So())}),T(f,la.EventType.ERROR,M=>{_||(_=!0,xn(Wt,`RPC '${e}' stream ${r} transport errored:`,M),D.So(new F(P.UNAVAILABLE,"The operation could not be completed")))}),T(f,la.EventType.MESSAGE,M=>{var k;if(!_){let q=M.data[0];ne(!!q);let j=q,W=j.error||((k=j[0])===null||k===void 0?void 0:k.error);if(W){L(Wt,`RPC '${e}' stream ${r} received error:`,W);let le=W.status,ie=function(w){let E=vt[w];if(E!==void 0)return UM(E)}(le),b=W.message;ie===void 0&&(ie=P.INTERNAL,b="Unknown error status: "+le+" with message "+W.message),_=!0,D.So(new F(ie,b)),f.close()}else L(Wt,`RPC '${e}' stream ${r} received:`,q),D.bo(q)}}),T(a,g0.STAT_EVENT,M=>{M.stat===zh.PROXY?L(Wt,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===zh.NOPROXY&&L(Wt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function mA(){return typeof window<"u"?window:null}function ef(){return typeof document<"u"?document:null}function ru(t){return new ev(t,!0)}var Wc=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&L("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var kf=class{constructor(e,n,i,r,o,s,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Wc(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return O(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return O(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return O(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(mt(n.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{let r=new F(P.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){let i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>O(this,null,function*(){this.state=0,this.start()}))}I_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},jv=class extends kf{constructor(e,n,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=WU(this.serializer,e),i=function(o){if(!("targetChange"in o))return re.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?_t(s.readTime):re.min()}(e);return this.listener.d_(n,i)}A_(e){let n={};n.database=iv(this.serializer),n.addTarget=function(o,s){let a,l=s.target;if(a=hf(l)?{documents:QM(o,l)}:{query:YM(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=GM(o,s.resumeToken);let u=tv(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(re.min())>0){a.readTime=Ma(o,s.snapshotVersion.toTimestamp());let u=tv(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let i=QU(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){let n={};n.database=iv(this.serializer),n.removeTarget=e,this.a_(n)}},Uv=class extends kf{constructor(e,n,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ne(!!e.streamToken),this.lastStreamToken=e.streamToken,ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=KU(e.writeResults,e.commitTime),i=_t(e.commitTime);return this.listener.g_(i,n)}p_(){let e={};e.database=iv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Gc(this.serializer,i))};this.a_(n)}};var $v=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new F(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,nv(n,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(P.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,nv(n,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(P.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Gv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(mt(n),this.D_=!1):L("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Hv=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{i.enqueueAndForget(()=>O(this,null,function*(){qr(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(l){return O(this,null,function*(){let u=H(l);u.L_.add(4),yield Ua(u),u.q_.set("Unknown"),u.L_.delete(4),yield ou(u)})}(this))}))}),this.q_=new Gv(i,r)}};function ou(t){return O(this,null,function*(){if(qr(t))for(let e of t.B_)yield e(!0)})}function Ua(t){return O(this,null,function*(){for(let e of t.B_)yield e(!1)})}function tp(t,e){let n=H(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Lw(n)?Vw(n):Ga(n).r_()&&Fw(n,e))}function Pa(t,e){let n=H(t),i=Ga(n);n.N_.delete(e),i.r_()&&gA(n,e),n.N_.size===0&&(i.r_()?i.o_():qr(n)&&n.q_.set("Unknown"))}function Fw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ga(t).A_(e)}function gA(t,e){t.Q_.xe(e),Ga(t).R_(e)}function Vw(t){t.Q_=new X0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ga(t).start(),t.q_.v_()}function Lw(t){return qr(t)&&!Ga(t).n_()&&t.N_.size>0}function qr(t){return H(t).L_.size===0}function _A(t){t.Q_=void 0}function u$(t){return O(this,null,function*(){t.q_.set("Online")})}function d$(t){return O(this,null,function*(){t.N_.forEach((e,n)=>{Fw(t,e)})})}function h$(t,e){return O(this,null,function*(){_A(t),Lw(t)?(t.q_.M_(e),Vw(t)):t.q_.set("Unknown")})}function f$(t,e,n){return O(this,null,function*(){if(t.q_.set("Online"),e instanceof gf&&e.state===2&&e.cause)try{yield function(r,o){return O(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.N_.delete(a),r.Q_.removeTarget(a))})}(t,e)}catch(i){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Ff(t,i)}else if(e instanceof ba?t.Q_.Ke(e):e instanceof mf?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{let i=yield uA(t.localStore);n.compareTo(i)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let d=o.N_.get(u);d&&o.N_.set(u,d.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let d=o.N_.get(l);if(!d)return;o.N_.set(l,d.withResumeToken(yt.EMPTY_BYTE_STRING,d.snapshotVersion)),gA(o,l);let f=new Aa(d.target,l,u,d.sequenceNumber);Fw(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){L("RemoteStore","Failed to raise snapshot:",i),yield Ff(t,i)}})}function Ff(t,e,n){return O(this,null,function*(){if(!zr(e))throw e;t.L_.add(1),yield Ua(t),t.q_.set("Offline"),n||(n=()=>uA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>O(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield ou(t)}))})}function yA(t,e){return e().catch(n=>Ff(t,n,e))}function $a(t){return O(this,null,function*(){let e=H(t),n=Gr(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;p$(e);)try{let r=yield s$(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,m$(e,r)}catch(r){yield Ff(e,r)}vA(e)&&wA(e)})}function p$(t){return qr(t)&&t.O_.length<10}function m$(t,e){t.O_.push(e);let n=Gr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function vA(t){return qr(t)&&!Gr(t).n_()&&t.O_.length>0}function wA(t){Gr(t).start()}function g$(t){return O(this,null,function*(){Gr(t).p_()})}function _$(t){return O(this,null,function*(){let e=Gr(t);for(let n of t.O_)e.m_(n.mutations)})}function y$(t,e,n){return O(this,null,function*(){let i=t.O_.shift(),r=Y0.from(i,e,n);yield yA(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield $a(t)})}function v$(t,e){return O(this,null,function*(){e&&Gr(t).V_&&(yield function(i,r){return O(this,null,function*(){if(function(s){return jM(s)&&s!==P.ABORTED}(r.code)){let o=i.O_.shift();Gr(i).s_(),yield yA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield $a(i)}})}(t,e)),vA(t)&&wA(t)})}function qS(t,e){return O(this,null,function*(){let n=H(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let i=qr(n);n.L_.add(3),yield Ua(n),i&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield ou(n)})}function zv(t,e){return O(this,null,function*(){let n=H(t);e?(n.L_.delete(2),yield ou(n)):e||(n.L_.add(2),yield Ua(n),n.q_.set("Unknown"))})}function Ga(t){return t.K_||(t.K_=function(n,i,r){let o=H(n);return o.w_(),new jv(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:u$.bind(null,t),Ro:d$.bind(null,t),mo:h$.bind(null,t),d_:f$.bind(null,t)}),t.B_.push(e=>O(this,null,function*(){e?(t.K_.s_(),Lw(t)?Vw(t):t.q_.set("Unknown")):(yield t.K_.stop(),_A(t))}))),t.K_}function Gr(t){return t.U_||(t.U_=function(n,i,r){let o=H(n);return o.w_(),new Uv(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:g$.bind(null,t),mo:v$.bind(null,t),f_:_$.bind(null,t),g_:y$.bind(null,t)}),t.B_.push(e=>O(this,null,function*(){e?(t.U_.s_(),yield $a(t)):(yield t.U_.stop(),t.O_.length>0&&(L("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var qv=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let s=Date.now()+i,a=new t(e,n,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ha(t,e){if(mt("AsyncQueue",`${e}: ${t}`),zr(t))return new F(P.UNAVAILABLE,`${e}: ${t}`);throw t}var Vf=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||z.comparator(n.key,i.key):(n,i)=>z.comparator(n.key,i.key),this.keyedMap=Cc(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Lf=class{constructor(){this.W_=new Ze(z.comparator)}track(e){let n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}},Na=class t{constructor(e,n,i,r,o,s,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Vf.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var Wv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Kv=class{constructor(){this.queries=WS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){let r=H(n),o=r.queries;r.queries=WS(),o.forEach((s,a)=>{for(let l of a.j_)l.onError(i)})})(this,new F(P.ABORTED,"Firestore shutting down"))}};function WS(){return new wi(t=>TM(t),nu)}function Bw(t,e){return O(this,null,function*(){let n=H(t),i=3,r=e.query,o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new Wv,i=e.J_()?0:1);try{switch(i){case 0:o.z_=yield n.onListen(r,!0);break;case 1:o.z_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(s){let a=Ha(s,`Initialization of query '${pa(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Uw(n)})}function jw(t,e){return O(this,null,function*(){let n=H(t),i=e.query,r=3,o=n.queries.get(i);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function w$(t,e){let n=H(t),i=!1;for(let r of e){let o=r.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(r)&&(i=!0);s.z_=r}}i&&Uw(n)}function b$(t,e,n){let i=H(t),r=i.queries.get(e);if(r)for(let o of r.j_)o.onError(n);i.queries.delete(e)}function Uw(t){t.Y_.forEach(e=>{e.next()})}var Qv,KS;(KS=Qv||(Qv={})).ea="default",KS.Cache="cache";var Kc=class{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Na(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qv.Cache}};var Yv=class{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}};var Bf=class{constructor(e){this.serializer=e}Es(e){return gi(this.serializer,e)}ds(e){return e.metadata.exists?KM(this.serializer,e.document,!1):Dt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return _t(e)}},Jv=class{constructor(e,n,i){this.ca=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bA(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;let i=Pe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){let n=new Map,i=new Bf(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Es(r.metadata.name);for(let s of r.metadata.queries){let a=(n.get(s)||ve()).add(o);n.set(s,a)}}return n}complete(){return O(this,null,function*(){let e=yield a$(this.localStore,new Bf(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(let i of this.queries)yield l$(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function bA(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var jf=class{constructor(e){this.key=e}},Uf=class{constructor(e){this.key=e}},$f=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=MM(e),this.Ra=new Vf(this.Aa)}get Va(){return this.Ta}ma(e,n){let i=n?n.fa:new Lf,r=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,f)=>{let m=r.get(d),_=iu(this.query,f)?f:null,D=!!m&&this.mutatedKeys.has(m.key),T=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),M=!1;m&&_?m.data.isEqual(_.data)?D!==T&&(i.track({type:3,doc:_}),M=!0):this.ga(m,_)||(i.track({type:2,doc:_}),M=!0,(l&&this.Aa(_,l)>0||u&&this.Aa(_,u)<0)&&(a=!0)):!m&&_?(i.track({type:0,doc:_}),M=!0):m&&!_&&(i.track({type:1,doc:m}),M=!0,(l||u)&&(a=!0)),M&&(_?(s=s.add(_),o=T?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),i.track({type:1,doc:d})}return{Ra:s,fa:i,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(_,D){let T=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return T(_)-T(D)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(i),r=r!=null&&r;let a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new Na(this.query,e.Ra,o,s,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Lf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ve(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Uf(i))}),this.da.forEach(i=>{e.has(i)||n.push(new jf(i))}),n}ba(e){this.Ta=e.Ts,this.da=ve();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Na.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Zv=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},Xv=class{constructor(e){this.key=e,this.va=!1}},ew=class{constructor(e,n,i,r,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new wi(a=>TM(a),nu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ze(z.comparator),this.Na=new Map,this.La=new zc,this.Ba={},this.ka=new Map,this.qa=xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function E$(t,e,n=!0){return O(this,null,function*(){let i=np(t),r,o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield EA(i,e,n,!0),r})}function D$(t,e){return O(this,null,function*(){let n=np(t);yield EA(n,e,!0,!1)})}function EA(t,e,n,i){return O(this,null,function*(){let r=yield Oa(t.localStore,tn(e)),o=r.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return i&&(a=yield $w(t,e,o,s==="current",r.resumeToken)),t.isPrimaryClient&&n&&tp(t.remoteStore,r),a})}function $w(t,e,n,i,r){return O(this,null,function*(){t.Ka=(f,m,_)=>function(T,M,k,q){return O(this,null,function*(){let j=M.view.ma(k);j.ns&&(j=yield xf(T.localStore,M.query,!1).then(({documents:b})=>M.view.ma(b,j)));let W=q&&q.targetChanges.get(M.targetId),le=q&&q.targetMismatches.get(M.targetId)!=null,ie=M.view.applyChanges(j,T.isPrimaryClient,W,le);return tw(T,M.targetId,ie.wa),ie.snapshot})}(t,f,m,_);let o=yield xf(t.localStore,e,!0),s=new $f(e,o.Ts),a=s.ma(o.documents),l=Uc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=s.applyChanges(a,t.isPrimaryClient,l);tw(t,n,u.wa);let d=new Zv(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot})}function C$(t,e,n){return O(this,null,function*(){let i=H(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(s=>!nu(s,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ra(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Pa(i.remoteStore,r.targetId),ka(i,r.targetId)}).catch(Hr))):(ka(i,r.targetId),yield Ra(i.localStore,r.targetId,!0))})}function I$(t,e){return O(this,null,function*(){let n=H(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Pa(n.remoteStore,i.targetId))})}function T$(t,e,n){return O(this,null,function*(){let i=qw(t);try{let r=yield function(s,a){let l=H(s),u=ot.now(),d=a.reduce((_,D)=>_.add(D.key),ve()),f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let D=hn(),T=ve();return l.cs.getEntries(_,d).next(M=>{D=M,D.forEach((k,q)=>{q.isValidDocument()||(T=T.add(k))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,D)).next(M=>{f=M;let k=[];for(let q of a){let j=jU(q,f.get(q.key).overlayedDocument);j!=null&&k.push(new Yn(q.key,j,vM(j.value.mapValue),ht.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,k,a)}).next(M=>{m=M;let k=M.applyToLocalDocumentSet(f,T);return l.documentOverlayCache.saveOverlays(_,M.batchId,k)})}).then(()=>({batchId:m.batchId,changes:xM(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new Ze(_e)),u=u.insert(a,l),s.Ba[s.currentUser.toKey()]=u}(i,r.batchId,n),yield Qi(i,r.changes),yield $a(i.remoteStore)}catch(r){let o=Ha(r,"Failed to persist write");n.reject(o)}})}function DA(t,e){return O(this,null,function*(){let n=H(t);try{let i=yield o$(n.localStore,e);e.targetChanges.forEach((r,o)=>{let s=n.Na.get(o);s&&(ne(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.va=!0:r.modifiedDocuments.size>0?ne(s.va):r.removedDocuments.size>0&&(ne(s.va),s.va=!1))}),yield Qi(n,i,e)}catch(i){yield Hr(i)}})}function QS(t,e,n){let i=H(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){let l=H(s);l.onlineState=a;let u=!1;l.queries.forEach((d,f)=>{for(let m of f.j_)m.Z_(a)&&(u=!0)}),u&&Uw(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function S$(t,e,n){return O(this,null,function*(){let i=H(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Na.get(e),o=r&&r.key;if(o){let s=new Ze(z.comparator);s=s.insert(o,Dt.newNoDocument(o,re.min()));let a=ve().add(o),l=new jc(re.min(),new Map,new Ze(_e),s,a);yield DA(i,l),i.Oa=i.Oa.remove(o),i.Na.delete(e),zw(i)}else yield Ra(i.localStore,e,!1).then(()=>ka(i,e,n)).catch(Hr)})}function M$(t,e){return O(this,null,function*(){let n=H(t),i=e.batch.batchId;try{let r=yield r$(n.localStore,e);Hw(n,i,null),Gw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Qi(n,r)}catch(r){yield Hr(r)}})}function A$(t,e,n){return O(this,null,function*(){let i=H(t);try{let r=yield function(s,a){let l=H(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(ne(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(i.localStore,e);Hw(i,e,n),Gw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield Qi(i,r)}catch(r){yield Hr(r)}})}function x$(t,e){return O(this,null,function*(){let n=H(t);qr(n.remoteStore)||L("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=H(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===-1)return void e.resolve();let r=n.ka.get(i)||[];r.push(e),n.ka.set(i,r)}catch(i){let r=Ha(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function Gw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Hw(t,e,n){let i=H(t),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function ka(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||CA(t,i)})}function CA(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Pa(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),zw(t))}function tw(t,e,n){for(let i of n)i instanceof jf?(t.La.addReference(i.key,e),O$(t,i)):i instanceof Uf?(L("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||CA(t,i.key)):X()}function O$(t,e){let n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(L("SyncEngine","New document in limbo: "+n),t.xa.add(i),zw(t))}function zw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new z(Pe.fromString(e)),i=t.qa.next();t.Na.set(i,new Xv(n)),t.Oa=t.Oa.insert(n,i),tp(t.remoteStore,new Aa(tn(ja(n.path)),i,"TargetPurposeLimboResolution",vn.oe))}}function Qi(t,e,n){return O(this,null,function*(){let i=H(t),r=[],o=[],s=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{s.push(i.Ka(l,e,n).then(u=>{var d;if((u||n)&&i.isPrimaryClient){let f=u?!u.fromCache:(d=n?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){r.push(u);let f=Pv.Wi(l.targetId,u);o.push(f)}}))}),yield Promise.all(s),i.Ca.d_(r),yield function(l,u){return O(this,null,function*(){let d=H(l);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>R.forEach(u,m=>R.forEach(m.$i,_=>d.persistence.referenceDelegate.addReference(f,m.targetId,_)).next(()=>R.forEach(m.Ui,_=>d.persistence.referenceDelegate.removeReference(f,m.targetId,_)))))}catch(f){if(!zr(f))throw f;L("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let _=d.os.get(m),D=_.snapshotVersion,T=_.withLastLimboFreeSnapshotVersion(D);d.os=d.os.insert(m,T)}}})}(i.localStore,o))})}function R$(t,e){return O(this,null,function*(){let n=H(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let i=yield cA(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new F(P.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Qi(n,i.hs)}})}function P$(t,e){let n=H(t),i=n.Na.get(e);if(i&&i.va)return ve().add(i.key);{let r=ve(),o=n.Ma.get(e);if(!o)return r;for(let s of o){let a=n.Fa.get(s);r=r.unionWith(a.view.Va)}return r}}function N$(t,e){return O(this,null,function*(){let n=H(t),i=yield xf(n.localStore,e.query,!0),r=e.view.ba(i);return n.isPrimaryClient&&tw(n,e.targetId,r.wa),r})}function k$(t,e){return O(this,null,function*(){let n=H(t);return fA(n.localStore,e).then(i=>Qi(n,i))})}function F$(t,e,n,i){return O(this,null,function*(){let r=H(t),o=yield function(a,l){let u=H(a),d=H(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,l).next(m=>m?u.localDocuments.getDocuments(f,m):R.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield $a(r.remoteStore):n==="acknowledged"||n==="rejected"?(Hw(r,e,i||null),Gw(r,e),function(a,l){H(H(a).mutationQueue).On(l)}(r.localStore,e)):X(),yield Qi(r,o)):L("SyncEngine","Cannot apply mutation batch with id: "+e)})}function V$(t,e){return O(this,null,function*(){let n=H(t);if(np(n),qw(n),e===!0&&n.Qa!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield YS(n,i.toArray());n.Qa=!0,yield zv(n.remoteStore,!0);for(let o of r)tp(n.remoteStore,o)}else if(e===!1&&n.Qa!==!1){let i=[],r=Promise.resolve();n.Ma.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(ka(n,s),Ra(n.localStore,s,!0))),Pa(n.remoteStore,s)}),yield r,yield YS(n,i),function(s){let a=H(s);a.Na.forEach((l,u)=>{Pa(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Ze(z.comparator)}(n),n.Qa=!1,yield zv(n.remoteStore,!1)}})}function YS(t,e,n){return O(this,null,function*(){let i=H(t),r=[],o=[];for(let s of e){let a,l=i.Ma.get(s);if(l&&l.length!==0){a=yield Oa(i.localStore,tn(l[0]));for(let u of l){let d=i.Fa.get(u),f=yield N$(i,d);f.snapshot&&o.push(f.snapshot)}}else{let u=yield hA(i.localStore,s);a=yield Oa(i.localStore,u),yield $w(i,IA(u),s,!1,a.resumeToken)}r.push(a)}return i.Ca.d_(o),r})}function IA(t){return IM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function L$(t){return function(n){return H(H(n).persistence).Qi()}(H(t).localStore)}function B$(t,e,n,i){return O(this,null,function*(){let r=H(t);if(r.Qa)return void L("SyncEngine","Ignoring unexpected query state notification.");let o=r.Ma.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield fA(r.localStore,SM(o[0])),a=jc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yt.EMPTY_BYTE_STRING);yield Qi(r,s,a);break}case"rejected":yield Ra(r.localStore,e,!0),ka(r,e,i);break;default:X()}})}function j$(t,e,n){return O(this,null,function*(){let i=np(t);if(i.Qa){for(let r of e){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){L("SyncEngine","Adding an already active target "+r);continue}let o=yield hA(i.localStore,r),s=yield Oa(i.localStore,o);yield $w(i,IA(o),s.targetId,!1,s.resumeToken),tp(i.remoteStore,s)}for(let r of n)i.Ma.has(r)&&(yield Ra(i.localStore,r,!1).then(()=>{Pa(i.remoteStore,r),ka(i,r)}).catch(Hr))}})}function np(t){let e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S$.bind(null,e),e.Ca.d_=w$.bind(null,e.eventManager),e.Ca.$a=b$.bind(null,e.eventManager),e}function qw(t){let e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A$.bind(null,e),e}function U$(t,e,n){let i=H(t);(function(o,s,a){return O(this,null,function*(){try{let l=yield s.getMetadata();if(yield function(_,D){let T=H(_),M=_t(D.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",k=>T.Gr.getBundleMetadata(k,D.id)).then(k=>!!k&&k.createTime.compareTo(M)>=0)}(o.localStore,l))return yield s.close(),a._completeWith(function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(bA(l));let u=new Jv(l,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let m=yield u.la(d);m&&a._updateProgress(m),d=yield s.Ua()}let f=yield u.complete();return yield Qi(o,f.Ia,void 0),yield function(_,D){let T=H(_);return T.persistence.runTransaction("Save bundle","readwrite",M=>T.Gr.saveBundleMetadata(M,D))}(o.localStore,l),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(l){return xn("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Qc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){this.serializer=ru(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return lA(this.persistence,new Af,e.initialUser,this.serializer)}createPersistence(e){return new Sf(Mf.Zr,this.serializer)}createSharedClientState(e){return new Pf}terminate(){return O(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Gf=class t extends Qc{constructor(e,n,i){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){yield sm(t.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield qw(this.Wa.syncEngine),yield $a(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return lA(this.persistence,new Af,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new _v(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new N0(n,this.persistence);return new P0(e.asyncQueue,i)}createPersistence(e){let n=kw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new Rv(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,mA(),ef(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Pf}},nw=class t extends Gf{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return O(this,null,function*(){yield sm(t.prototype,this,"initialize").call(this,e);let n=this.Wa.syncEngine;this.sharedClientState instanceof xc&&(this.sharedClientState.syncEngine={no:F$.bind(null,n),ro:B$.bind(null,n),io:j$.bind(null,n),Qi:L$.bind(null,n),eo:k$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.yi(i=>O(this,null,function*(){yield V$(this.Wa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=mA();if(!xc.D(n))throw new F(P.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=kw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xc(n,e.asyncQueue,i,e.clientId,e.initialUser)}},Yc=class{initialize(e,n){return O(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>QS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=R$.bind(null,this.syncEngine),yield zv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Kv}()}createDatastore(e){let n=ru(e.databaseInfo.databaseId),i=function(o){return new Bv(o)}(e.databaseInfo);return function(o,s,a,l){return new $v(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,s,a){return new Hv(i,r,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>QS(this.syncEngine,n,0),function(){return Nf.D()?new Nf:new Vv}())}createSyncEngine(e,n){return function(r,o,s,a,l,u,d){let f=new ew(r,o,s,a,l,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return O(this,null,function*(){var e,n;yield function(r){return O(this,null,function*(){let o=H(r);L("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ua(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};function JS(t,e=10240){let n=0;return{read(){return O(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return O(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Fa=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var iw=class{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new Et,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.ja.cancel()}getMetadata(){return O(this,null,function*(){return this.metadata.promise})}Ua(){return O(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return O(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let n=this.Ha.decode(e),i=Number(n);isNaN(i)&&this.Za(`length string (${n}) is not valid number`);let r=yield this.Xa(i);return new Yv(JSON.parse(r),e.length+i)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return O(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Xa(e){return O(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let n=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return O(this,null,function*(){let e=yield this.ja.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var rw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(P.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return O(this,null,function*(){let s=H(r),a={documents:o.map(f=>$c(s.serializer,f))},l=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Pe.emptyPath(),a,o.length),u=new Map;l.forEach(f=>{let m=qU(s.serializer,f);u.set(m.key.toString(),m)});let d=[];return o.forEach(f=>{let m=u.get(f.toString());ne(!!m),d.push(m)}),d})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new $r(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=z.fromPath(i);this.mutations.push(new Vc(r,this.precondition(r)))}),yield function(i,r){return O(this,null,function*(){let o=H(i),s={writes:r.map(a=>Gc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Pe.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X();n=re.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new F(P.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(re.min())?ht.exists(!1):ht.updateTime(n):ht.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(re.min()))throw new F(P.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ht.updateTime(n)}return ht.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var ow=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.nu=i.maxAttempts,this.t_=new Wc(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>O(this,null,function*(){let e=new rw(this.datastore),n=this.su(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ou(r)}))}).catch(i=>{this.ou(i)})}))}su(e){try{let n=this.updateFunction(e);return!eu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!jM(n)}return!1}};var sw=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=bt.UNAUTHENTICATED,this.clientId=rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>O(this,null,function*(){L("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(L("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Ha(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function tf(t,e){return O(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>O(this,null,function*(){i.isEqual(r)||(yield cA(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function aw(t,e){return O(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Ww(t);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>qS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>qS(e.remoteStore,r)),t._onlineComponents=e})}function TA(t){return t.name==="FirebaseError"?t.code===P.FAILED_PRECONDITION||t.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Ww(t){return O(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield tf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!TA(n))throw n;xn("Error using user provided cache. Falling back to memory cache: "+n),yield tf(t,new Qc)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield tf(t,new Qc);return t._offlineComponents})}function ip(t){return O(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield aw(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield aw(t,new Yc))),t._onlineComponents})}function SA(t){return Ww(t).then(e=>e.persistence)}function Kw(t){return Ww(t).then(e=>e.localStore)}function MA(t){return ip(t).then(e=>e.remoteStore)}function Qw(t){return ip(t).then(e=>e.syncEngine)}function $$(t){return ip(t).then(e=>e.datastore)}function Va(t){return O(this,null,function*(){let e=yield ip(t),n=e.eventManager;return n.onListen=E$.bind(null,e.syncEngine),n.onUnlisten=C$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=D$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=I$.bind(null,e.syncEngine),n})}function G$(t){return t.asyncQueue.enqueue(()=>O(this,null,function*(){let e=yield SA(t),n=yield MA(t);return e.setNetworkEnabled(!0),function(r){let o=H(r);return o.L_.delete(0),ou(o)}(n)}))}function H$(t){return t.asyncQueue.enqueue(()=>O(this,null,function*(){let e=yield SA(t),n=yield MA(t);return e.setNetworkEnabled(!1),function(r){return O(this,null,function*(){let o=H(r);o.L_.add(0),yield Ua(o),o.q_.set("Offline")})}(n)}))}function z$(t,e){let n=new Et;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(r,o,s){return O(this,null,function*(){try{let a=yield function(u,d){let f=H(u);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,d))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new F(P.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=Ha(a,`Failed to get document '${o} from cache`);s.reject(l)}})}(yield Kw(t),e,n)})),n.promise}function AA(t,e,n={}){let i=new Et;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,l,u){let d=new Fa({next:m=>{s.enqueueAndForget(()=>jw(o,f));let _=m.docs.has(a);!_&&m.fromCache?u.reject(new F(P.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?u.reject(new F(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Kc(ja(a.path),d,{includeMetadataChanges:!0,_a:!0});return Bw(o,f)}(yield Va(t),t.asyncQueue,e,n,i)})),i.promise}function q$(t,e){let n=new Et;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(r,o,s){return O(this,null,function*(){try{let a=yield xf(r,o,!0),l=new $f(o,a.Ts),u=l.ma(a.documents),d=l.applyChanges(u,!1);s.resolve(d.snapshot)}catch(a){let l=Ha(a,`Failed to execute query '${o} against cache`);s.reject(l)}})}(yield Kw(t),e,n)})),n.promise}function xA(t,e,n={}){let i=new Et;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,l,u){let d=new Fa({next:m=>{s.enqueueAndForget(()=>jw(o,f)),m.fromCache&&l.source==="server"?u.reject(new F(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Kc(a,d,{includeMetadataChanges:!0,_a:!0});return Bw(o,f)}(yield Va(t),t.asyncQueue,e,n,i)})),i.promise}function W$(t,e){let n=new Fa(e);return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(r,o){H(r).Y_.add(o),o.next()}(yield Va(t),n)})),()=>{n.za(),t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(r,o){H(r).Y_.delete(o)}(yield Va(t),n)}))}}function K$(t,e,n,i){let r=function(s,a){let l;return l=typeof s=="string"?$M().encode(s):s,function(d,f){return new iw(d,f)}(function(d,f){if(d instanceof Uint8Array)return JS(d,f);if(d instanceof ArrayBuffer)return JS(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,ru(e));t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){U$(yield Qw(t),r,i)}))}function Q$(t,e){return t.asyncQueue.enqueue(()=>O(this,null,function*(){return function(i,r){let o=H(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,r))}(yield Kw(t),e)}))}function OA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var ZS=new Map;function Yw(t,e,n){if(!n)throw new F(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Jw(t,e,n,i){if(e===!0&&i===!0)throw new F(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function XS(t){if(!z.isDocumentKey(t))throw new F(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eM(t){if(z.isDocumentKey(t))throw new F(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Ne(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=rp(t);throw new F(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function RA(t,e){if(e<=0)throw new F(P.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Hf=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new F(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qo=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hf(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new D0;switch(i.type){case"firstParty":return new S0(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new F(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=ZS.get(n);i&&(L("ComponentProvider","Removing Datastore"),ZS.delete(n),i.terminate())}(this),Promise.resolve()}};function PA(t,e,n,i={}){var r;let o=(t=Ne(t,qo))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&xn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=bt.MOCK_USER;else{a=K1(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new F(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new bt(u)}t._authCredentials=new C0(new nf(a,l))}}var jt=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},We=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},_i=class t extends jt{constructor(e,n,i){super(e,n,ja(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Zw(t,e,...n){if(t=nt(t),Yw("collection","path",e),t instanceof qo){let i=Pe.fromString(e,...n);return eM(i),new _i(t,null,i)}{if(!(t instanceof We||t instanceof _i))throw new F(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Pe.fromString(e,...n));return eM(i),new _i(t.firestore,null,i)}}function NA(t,e){if(t=Ne(t,qo),Yw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(P.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jt(t,null,function(i){return new Qn(Pe.emptyPath(),i)}(e))}function su(t,e,...n){if(t=nt(t),arguments.length===1&&(e=rf.newId()),Yw("doc","path",e),t instanceof qo){let i=Pe.fromString(e,...n);return XS(i),new We(t,null,new z(i))}{if(!(t instanceof We||t instanceof _i))throw new F(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Pe.fromString(e,...n));return XS(i),new We(t.firestore,t instanceof _i?t.converter:null,new z(i))}}function Xw(t,e){return t=nt(t),e=nt(e),(t instanceof We||t instanceof _i)&&(e instanceof We||e instanceof _i)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function eb(t,e){return t=nt(t),e=nt(e),t instanceof jt&&e instanceof jt&&t.firestore===e.firestore&&nu(t._query,e._query)&&t.converter===e.converter}var lw=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Wc(this,"async_queue_retry"),this.Eu=()=>{let n=ef();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=ef();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=ef();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new Et;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return O(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!zr(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(i=>{this.hu=i,this.Pu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw mt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=n,n}enqueueAfterDelay(e,n,i){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let r=qv.createAndSchedule(this,e,n,i,o=>this.Vu(o));return this.lu.push(r),r}du(){this.hu&&X()}verifyOperationInProgress(){}mu(){return O(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function cw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var uw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Et,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var kA=-1,tt=class extends qo{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new lw}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||FA(this),this._firestoreClient.terminate()}};function At(t){return t._firestoreClient||FA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function FA(t){var e,n,i;let r=t._freezeSettings(),o=function(a,l,u,d){return new k0(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,OA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new sw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function VA(t,e){qA(t=Ne(t,tt));let n=At(t);if(n._uninitializedComponentsProvider)throw new F(P.FAILED_PRECONDITION,"SDK cache is already specified.");xn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new Yc;return BA(n,r,new Gf(r,i.cacheSizeBytes,e?.forceOwnership))}function LA(t){qA(t=Ne(t,tt));let e=At(t);if(e._uninitializedComponentsProvider)throw new F(P.FAILED_PRECONDITION,"SDK cache is already specified.");xn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new Yc;return BA(e,i,new nw(i,n.cacheSizeBytes))}function BA(t,e,n){let i=new Et;return t.asyncQueue.enqueue(()=>O(this,null,function*(){try{yield tf(t,n),yield aw(t,e),i.resolve()}catch(r){let o=r;if(!TA(o))throw o;xn("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function jA(t){if(t._initialized&&!t._terminated)throw new F(P.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Et;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{yield function(i){return O(this,null,function*(){if(!kr.D())return Promise.resolve();let r=i+"main";yield kr.delete(r)})}(kw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function UA(t){return function(n){let i=new Et;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return x$(yield Qw(n),i)})),i.promise}(At(t=Ne(t,tt)))}function $A(t){return G$(At(t=Ne(t,tt)))}function GA(t){return H$(At(t=Ne(t,tt)))}function HA(t,e){let n=At(t=Ne(t,tt)),i=new uw;return K$(n,t._databaseId,e,i),i}function zA(t,e){return Q$(At(t=Ne(t,tt)),e).then(n=>n?new jt(t,null,n.query):null)}function qA(t){if(t._initialized||t._terminated)throw new F(P.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var bi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(yt.fromBase64String(e))}catch(n){throw new F(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Jn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wi=class{constructor(e){this._methodName=e}};var Wo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}};var Jc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}};var Y$=/^__.*__$/,dw=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ur(e,this.data,n,this.fieldTransforms)}},zf=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function WA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}var qf=class t{constructor(e,n,i,r,o,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Su({path:i,Du:!1});return r.vu(e),r}Cu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Wf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(WA(this.wu)&&Y$.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},hw=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ru(e)}Nu(e,n,i,r=!1){return new qf({wu:e,methodName:n,Ou:i,path:gt.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Jo(t){let e=t._freezeSettings(),n=ru(t._databaseId);return new hw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function op(t,e,n,i,r,o={}){let s=t.Nu(o.merge||o.mergeFields?2:0,e,n,r);ib("Data must be an object, but it was:",s,i);let a=YA(i,s),l,u;if(o.merge)l=new wn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=_w(e,f,n);if(!s.contains(m))throw new F(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ZA(d,m)||d.push(m)}l=new wn(d),u=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=s.fieldTransforms;return new dw(new Kt(a),l,u)}var Zc=class t extends Wi{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function KA(t,e,n){return new qf({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var fw=class t extends Wi{_toFieldTransform(e){return new Go(e.path,new Br)}isEqual(e){return e instanceof t}},pw=class t extends Wi{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=KA(this,e,!0),i=this.Lu.map(o=>Zo(o,n)),r=new zi(i);return new Go(e.path,r)}isEqual(e){return e instanceof t&&cm(this.Lu,e.Lu)}},mw=class t extends Wi{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=KA(this,e,!0),i=this.Lu.map(o=>Zo(o,n)),r=new qi(i);return new Go(e.path,r)}isEqual(e){return e instanceof t&&cm(this.Lu,e.Lu)}},gw=class t extends Wi{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){let n=new jr(e.serializer,PM(e.serializer,this.Bu));return new Go(e.path,n)}isEqual(e){return e instanceof t&&this.Bu===e.Bu}};function tb(t,e,n,i){let r=t.Nu(1,e,n);ib("Data must be an object, but it was:",r,i);let o=[],s=Kt.empty();Yo(i,(l,u)=>{let d=rb(e,l,n);u=nt(u);let f=r.Cu(d);if(u instanceof Zc)o.push(d);else{let m=Zo(u,f);m!=null&&(o.push(d),s.set(d,m))}});let a=new wn(o);return new zf(s,a,r.fieldTransforms)}function nb(t,e,n,i,r,o){let s=t.Nu(1,e,n),a=[_w(e,i,n)],l=[r];if(o.length%2!=0)throw new F(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(_w(e,o[m])),l.push(o[m+1]);let u=[],d=Kt.empty();for(let m=a.length-1;m>=0;--m)if(!ZA(u,a[m])){let _=a[m],D=l[m];D=nt(D);let T=s.Cu(_);if(D instanceof Zc)u.push(_);else{let M=Zo(D,T);M!=null&&(u.push(_),d.set(_,M))}}let f=new wn(u);return new zf(d,f,s.fieldTransforms)}function QA(t,e,n,i=!1){return Zo(n,t.Nu(i?4:3,e))}function Zo(t,e){if(JA(t=nt(t)))return ib("Unsupported field value:",e,t),YA(t,e);if(t instanceof Wi)return function(i,r){if(!WA(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let l=Zo(a,r.Fu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=nt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return PM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=ot.fromDate(i);return{timestampValue:Ma(r.serializer,o)}}if(i instanceof ot){let o=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ma(r.serializer,o)}}if(i instanceof Wo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof bi)return{bytesValue:GM(r.serializer,i._byteString)};if(i instanceof We){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Rw(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Jc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return Ow(a.serializer,l)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${rp(i)}`)}(t,e)}function YA(t,e){let n={};return mM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(t,(i,r)=>{let o=Zo(r,e.bu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function JA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof Wo||t instanceof bi||t instanceof We||t instanceof Wi||t instanceof Jc)}function ib(t,e,n){if(!JA(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=rp(n);throw i==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+i)}}function _w(t,e,n){if((e=nt(e))instanceof Jn)return e._internalPath;if(typeof e=="string")return rb(t,e);throw Wf("Field path arguments must be of type string or ",t,!1,void 0,n)}var J$=new RegExp("[~\\*/\\[\\]]");function rb(t,e,n){if(e.search(J$)>=0)throw Wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jn(...e.split("."))._internalPath}catch{throw Wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wf(t,e,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new F(P.INVALID_ARGUMENT,a+t+l)}function ZA(t,e){return t.some(n=>n.isEqual(e))}var Ko=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(sp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},yw=class extends Ko{data(){return super.data()}};function sp(t,e){return typeof e=="string"?rb(t,e):e instanceof Jn?e._internalPath:e._delegate._internalPath}function XA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xc=class{},Qo=class extends Xc{};function Yi(t,e,...n){let i=[];e instanceof Xc&&i.push(e),i=i.concat(n),function(o){let s=o.filter(l=>l instanceof vw).length,a=o.filter(l=>l instanceof Kf).length;if(s>1||s>0&&a>0)throw new F(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var Kf=class t extends Qo{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return cx(e._query,n),new jt(e.firestore,e.converter,K0(e._query,n))}_parse(e){let n=Jo(e.firestore);return function(o,s,a,l,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new F(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){nM(f,d);let _=[];for(let D of f)_.push(tM(l,o,D));m={arrayValue:{values:_}}}else m=tM(l,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||nM(f,d),m=QA(a,s,f,d==="in"||d==="not-in");return Se.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function ex(t,e,n){let i=e,r=sp("where",t);return Kf._create(r,i,n)}var vw=class t extends Xc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:$e.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let l of a)cx(s,l),s=K0(s,l)}(e._query,n),new jt(e.firestore,e.converter,K0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ww=class t extends Qo{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,s){if(r.startAt!==null)throw new F(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new F(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uo(o,s)}(e._query,this._field,this._direction);return new jt(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new Qn(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function tx(t,e="asc"){let n=e,i=sp("orderBy",t);return ww._create(i,n)}var Qf=class t extends Qo{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new jt(e.firestore,e.converter,pf(e._query,this._limit,this._limitType))}};function nx(t){return RA("limit",t),Qf._create("limit",t,"F")}function ix(t){return RA("limitToLast",t),Qf._create("limitToLast",t,"L")}var Yf=class t extends Qo{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=lx(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(r,o){return new Qn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function rx(...t){return Yf._create("startAt",t,!0)}function ox(...t){return Yf._create("startAfter",t,!1)}var Jf=class t extends Qo{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=lx(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(r,o){return new Qn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function sx(...t){return Jf._create("endBefore",t,!1)}function ax(...t){return Jf._create("endAt",t,!0)}function lx(t,e,n,i){if(n[0]=nt(n[0]),n[0]instanceof Ko)return function(o,s,a,l,u){if(!l)throw new F(P.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of wa(o))if(f.field.isKeyField())d.push(jo(s,l.key));else{let m=l.data.field(f.field);if(Xf(m))throw new F(P.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let _=f.field.canonicalString();throw new F(P.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}d.push(m)}return new vi(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=Jo(t.firestore);return function(s,a,l,u,d,f){let m=s.explicitOrderBy;if(d.length>m.length)throw new F(P.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let _=[];for(let D=0;D<d.length;D++){let T=d[D];if(m[D].field.isKeyField()){if(typeof T!="string")throw new F(P.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof T}`);if(!Aw(s)&&T.indexOf("/")!==-1)throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${T}' contains a slash.`);let M=s.path.child(Pe.fromString(T));if(!z.isDocumentKey(M))throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let k=new z(M);_.push(jo(a,k))}else{let M=QA(l,u,T);_.push(M)}}return new vi(_,f)}(t._query,t.firestore._databaseId,r,e,n,i)}}function tM(t,e,n){if(typeof(n=nt(n))=="string"){if(n==="")throw new F(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Aw(e)&&n.indexOf("/")!==-1)throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Pe.fromString(n));if(!z.isDocumentKey(i))throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return jo(t,new z(i))}if(n instanceof We)return jo(t,n._key);throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rp(n)}.`)}function nM(t,e){if(!Array.isArray(t)||t.length===0)throw new F(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cx(t,e){let n=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var La=class{convertValue(e,n="none"){switch(Bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Yo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;let o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>et(s.doubleValue));return new Jc(o)}convertGeoPoint(e){return new Wo(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=Sw(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Nc(e));default:return null}}convertTimestamp(e){let n=Hi(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Pe.fromString(e);ne(eA(i));let r=new Vr(i.get(1),i.get(3)),o=new z(i.popFirst(5));return r.isEqual(n)||mt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function ap(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var bw=class extends La{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}};var Gi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Rn=class extends Ko{constructor(e,n,i,r,o,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Pr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(sp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Pr=class extends Rn{data(e={}){return super.data(e)}},Zn=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Gi(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Pr(this._firestore,this._userDataWriter,i.key,i,new Gi(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let l=new Pr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Gi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Pr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Gi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Z$(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Z$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}function ob(t,e){return t instanceof Rn&&e instanceof Rn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Zn&&e instanceof Zn&&t._firestore===e._firestore&&eb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function ux(t){t=Ne(t,We);let e=Ne(t.firestore,tt);return AA(At(e),t._key).then(n=>cb(e,t,n))}var Ki=class extends La{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}};function dx(t){t=Ne(t,We);let e=Ne(t.firestore,tt),n=At(e),i=new Ki(e);return z$(n,t._key).then(r=>new Rn(e,i,t._key,r,new Gi(r!==null&&r.hasLocalMutations,!0),t.converter))}function hx(t){t=Ne(t,We);let e=Ne(t.firestore,tt);return AA(At(e),t._key,{source:"server"}).then(n=>cb(e,t,n))}function fx(t){t=Ne(t,jt);let e=Ne(t.firestore,tt),n=At(e),i=new Ki(e);return XA(t._query),xA(n,t._query).then(r=>new Zn(e,i,t,r))}function px(t){t=Ne(t,jt);let e=Ne(t.firestore,tt),n=At(e),i=new Ki(e);return q$(n,t._query).then(r=>new Zn(e,i,t,r))}function mx(t){t=Ne(t,jt);let e=Ne(t.firestore,tt),n=At(e),i=new Ki(e);return xA(n,t._query,{source:"server"}).then(r=>new Zn(e,i,t,r))}function sb(t,e,n){t=Ne(t,We);let i=Ne(t.firestore,tt),r=ap(t.converter,e,n);return za(i,[op(Jo(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,ht.none())])}function ab(t,e,n,...i){t=Ne(t,We);let r=Ne(t.firestore,tt),o=Jo(r),s;return s=typeof(e=nt(e))=="string"||e instanceof Jn?nb(o,"updateDoc",t._key,e,n,i):tb(o,"updateDoc",t._key,e),za(r,[s.toMutation(t._key,ht.exists(!0))])}function gx(t){return za(Ne(t.firestore,tt),[new $r(t._key,ht.none())])}function _x(t,e){let n=Ne(t.firestore,tt),i=su(t),r=ap(t.converter,e);return za(n,[op(Jo(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,ht.exists(!1))]).then(()=>i)}function lb(t,...e){var n,i,r;t=nt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||cw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(cw(e[s])){let f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[s+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let l,u,d;if(t instanceof We)u=Ne(t.firestore,tt),d=ja(t._key.path),l={next:f=>{e[s]&&e[s](cb(u,t,f))},error:e[s+1],complete:e[s+2]};else{let f=Ne(t,jt);u=Ne(f.firestore,tt),d=f._query;let m=new Ki(u);l={next:_=>{e[s]&&e[s](new Zn(u,m,f,_))},error:e[s+1],complete:e[s+2]},XA(t._query)}return function(m,_,D,T){let M=new Fa(T),k=new Kc(_,M,D);return m.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return Bw(yield Va(m),k)})),()=>{M.za(),m.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return jw(yield Va(m),k)}))}}(At(u),d,a,l)}function yx(t,e){return W$(At(t=Ne(t,tt)),cw(e)?e:{next:e})}function za(t,e){return function(i,r){let o=new Et;return i.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return T$(yield Qw(i),r,o)})),o.promise}(At(t),e)}function cb(t,e,n){let i=n.docs.get(e._key),r=new Ki(t);return new Rn(t,r,e._key,i,new Gi(n.hasPendingWrites,n.fromCache),e.converter)}var X$={maxAttempts:5};var Zf=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Jo(e)}set(e,n,i){this._verifyNotCommitted();let r=Or(e,this._firestore),o=ap(r.converter,n,i),s=op(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,ht.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=Or(e,this._firestore),s;return s=typeof(n=nt(n))=="string"||n instanceof Jn?nb(this._dataReader,"WriteBatch.update",o._key,n,i,r):tb(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,ht.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Or(e,this._firestore);return this._mutations=this._mutations.concat(new $r(n._key,ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Or(t,e){if((t=nt(t)).firestore!==e)throw new F(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Ew=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Jo(n)}get(n){let i=Or(n,this._firestore),r=new bw(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return X();let s=o[0];if(s.isFoundDocument())return new Ko(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new Ko(this._firestore,r,i._key,null,i.converter);throw X()})}set(n,i,r){let o=Or(n,this._firestore),s=ap(o.converter,i,r),a=op(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(n,i,r,...o){let s=Or(n,this._firestore),a;return a=typeof(i=nt(i))=="string"||i instanceof Jn?nb(this._dataReader,"Transaction.update",s._key,i,r,o):tb(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(n){let i=Or(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Or(e,this._firestore),i=new Ki(this._firestore);return super.get(e).then(r=>new Rn(this._firestore,i,n._key,r._document,new Gi(!1,!1),n.converter))}};function vx(t,e,n){t=Ne(t,tt);let i=Object.assign(Object.assign({},X$),n);return function(o){if(o.maxAttempts<1)throw new F(P.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let l=new Et;return o.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){let u=yield $$(o);new ow(o.asyncQueue,u,a,s,l).ru()})),l.promise}(At(t),r=>e(new Ew(t,r)),i)}function wx(){return new Zc("deleteField")}function bx(){return new fw("serverTimestamp")}function Ex(...t){return new pw("arrayUnion",t)}function Dx(...t){return new mw("arrayRemove",t)}function Cx(t){return new gw("increment",t)}(function(e,n=!0){(function(r){Ba=r})(J1),bl(new to("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new tt(new I0(i.getProvider("auth-internal")),new A0(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new F(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vr(u.options.projectId,d)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),bn(tS,"4.7.0",e),bn(tS,"4.7.0","esm2017")})();var e3="@firebase/firestore-compat",t3="0.3.35";function mb(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ix(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function Tx(){if(!gM())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}var lp=class t{constructor(e){this._delegate=e}static fromBase64String(e){return Tx(),new t(bi.fromBase64String(e))}static fromUint8Array(e){return Ix(),new t(bi.fromUint8Array(e))}toBase64(){return Tx(),this._delegate.toBase64()}toUint8Array(){return Ix(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function ub(t){return n3(t,["next","error","complete"])}function n3(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var db=class{enableIndexedDbPersistence(e,n){return VA(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return LA(e._delegate)}clearIndexedDbPersistence(e){return jA(e._delegate)}},cp=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&xn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){PA(this._delegate,e,n,i)}enableNetwork(){return $A(this._delegate)}disableNetwork(){return GA(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Jw("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return UA(this._delegate)}onSnapshotsInSync(e){return yx(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ka(this,Zw(this._delegate,e))}catch(n){throw nn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ei(this,su(this._delegate,e))}catch(n){throw nn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ns(this,NA(this._delegate,e))}catch(n){throw nn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return vx(this._delegate,n=>e(new up(this,n)))}batch(){return At(this._delegate),new dp(new Zf(this._delegate,e=>za(this._delegate,e)))}loadBundle(e){return HA(this._delegate,e)}namedQuery(e){return zA(this._delegate,e).then(n=>n?new ns(this,n):null)}},qa=class extends La{constructor(e){super(),this.firestore=e}convertBytes(e){return new lp(new bi(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Ei.forKey(n,this.firestore,null)}};function i3(t){iM(t)}var up=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new qa(e)}get(e){let n=Xo(e);return this._delegate.get(n).then(i=>new es(this._firestore,new Rn(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=Xo(e);return i?(mb("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Xo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Xo(e);return this._delegate.delete(n),this}},dp=class{constructor(e){this._delegate=e}set(e,n,i){let r=Xo(e);return i?(mb("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Xo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Xo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Wa=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new Pr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ts(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new qa(e),n),r.set(n,o)),o}};Wa.INSTANCES=new WeakMap;var Ei=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qa(e)}static forPath(e,n,i){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new We(n._delegate,i,new z(e)))}static forKey(e,n,i){return new t(n,new We(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Ka(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ka(this.firestore,Zw(this._delegate,e))}catch(n){throw nn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=nt(e),e instanceof We?Xw(this._delegate,e):!1}set(e,n){n=mb("DocumentReference.set",n);try{return n?sb(this._delegate,e,n):sb(this._delegate,e)}catch(i){throw nn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?ab(this._delegate,e):ab(this._delegate,e,n,...i)}catch(r){throw nn(r,"updateDoc()","DocumentReference.update()")}}delete(){return gx(this._delegate)}onSnapshot(...e){let n=Sx(e),i=Mx(e,r=>new es(this.firestore,new Rn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return lb(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=dx(this._delegate):e?.source==="server"?n=hx(this._delegate):n=ux(this._delegate),n.then(i=>new es(this.firestore,new Rn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function nn(t,e,n){return t.message=t.message.replace(e,n),t}function Sx(t){for(let e of t)if(typeof e=="object"&&!ub(e))return e;return{}}function Mx(t,e){var n,i;let r;return ub(t[0])?r=t[0]:ub(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var es=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ei(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return ob(this._delegate,e._delegate)}},ts=class extends es{data(e){let n=this._delegate.data(e);return this._delegate._converter||rM(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},ns=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qa(e)}where(e,n,i){try{return new t(this.firestore,Yi(this._delegate,ex(e,n,i)))}catch(r){throw nn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Yi(this._delegate,tx(e,n)))}catch(i){throw nn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Yi(this._delegate,nx(e)))}catch(n){throw nn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Yi(this._delegate,ix(e)))}catch(n){throw nn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Yi(this._delegate,rx(...e)))}catch(n){throw nn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Yi(this._delegate,ox(...e)))}catch(n){throw nn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Yi(this._delegate,sx(...e)))}catch(n){throw nn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Yi(this._delegate,ax(...e)))}catch(n){throw nn(n,"endAt()","Query.endAt()")}}isEqual(e){return eb(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=px(this._delegate):e?.source==="server"?n=mx(this._delegate):n=fx(this._delegate),n.then(i=>new au(this.firestore,new Zn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=Sx(e),i=Mx(e,r=>new au(this.firestore,new Zn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return lb(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},hb=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ts(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},au=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ts(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new hb(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new ts(this._firestore,i))})}isEqual(e){return ob(this._delegate,e._delegate)}},Ka=class t extends ns{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Ei(this.firestore,e):null}doc(e){try{return e===void 0?new Ei(this.firestore,su(this._delegate)):new Ei(this.firestore,su(this._delegate,e))}catch(n){throw nn(n,"doc()","CollectionReference.doc()")}}add(e){return _x(this._delegate,e).then(n=>new Ei(this.firestore,n))}isEqual(e){return Xw(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Xo(t){return Ne(t,We)}var fb=class t{constructor(...e){this._delegate=new Jn(...e)}static documentId(){return new t(gt.keyField().canonicalString())}isEqual(e){return e=nt(e),e instanceof Jn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var pb=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=bx();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=wx();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=Ex(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=Dx(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=Cx(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var r3={Firestore:cp,GeoPoint:Wo,Timestamp:ot,Blob:lp,Transaction:up,WriteBatch:dp,DocumentReference:Ei,DocumentSnapshot:es,Query:ns,QueryDocumentSnapshot:ts,QuerySnapshot:au,CollectionReference:Ka,FieldPath:fb,FieldValue:pb,setLogLevel:i3,CACHE_SIZE_UNLIMITED:kA};function o3(t,e){t.INTERNAL.registerComponent(new to("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},r3)))}function s3(t){o3(t,(e,n)=>new cp(e,n,new db)),t.registerVersion(e3,t3)}s3(Pt);function a3(t,e=bs){return new fe(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function Ax(t,e){return a3(t,e)}function l3(t,e){return Ax(t,e).pipe(ar(void 0),Ml(),J(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function yb(t,e){return Ax(t,e).pipe(J(n=>({payload:n,type:"query"})))}var hp=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=Nx(i,n);return new pp(r,o,this.afs)}snapshotChanges(){return l3(this.ref,this.afs.schedulers.outsideAngular).pipe(dn)}valueChanges(e={}){return this.snapshotChanges().pipe(J(({payload:n})=>e.idField?ke(Y({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return Me(this.ref.get(e)).pipe(dn)}};function fp(t,e){return yb(t,e).pipe(ar(void 0),Ml(),J(n=>{let[i,r]=n,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{let u=o.find(f=>f.doc.ref.isEqual(a.ref)),d=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function xx(t,e,n){return fp(t,n).pipe(so((i,r)=>c3(i,r.map(o=>o.payload),e),[]),ld(),J(i=>i.map(r=>({type:r.type,payload:r}))))}function c3(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=u3(t,i))}),t}function gb(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function u3(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return gb(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return gb(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gb(t,e.oldIndex,1);break}return t}function Ox(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var pp=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=fp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(J(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(ar(void 0),Ml(),it(([i,r])=>r.length>0||!i),J(([,i])=>i),dn)}auditTrail(e){return this.stateChanges(e).pipe(so((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=Ox(e);return xx(this.query,n,this.afs.schedulers.outsideAngular).pipe(dn)}valueChanges(e={}){return yb(this.query,this.afs.schedulers.outsideAngular).pipe(J(n=>n.payload.docs.map(i=>e.idField?ke(Y({},i.data()),{[e.idField]:i.id}):i.data())),dn)}get(e){return Me(this.query.get(e)).pipe(dn)}add(e){return this.ref.add(e)}doc(e){return new hp(this.ref.doc(e),this.afs)}},_b=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?fp(this.query,this.afs.schedulers.outsideAngular).pipe(dn):fp(this.query,this.afs.schedulers.outsideAngular).pipe(J(n=>n.filter(i=>e.indexOf(i.type)>-1)),it(n=>n.length>0),dn)}auditTrail(e){return this.stateChanges(e).pipe(so((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=Ox(e);return xx(this.query,n,this.afs.schedulers.outsideAngular).pipe(dn)}valueChanges(e={}){return yb(this.query,this.afs.schedulers.outsideAngular).pipe(J(i=>i.payload.docs.map(r=>e.idField?Y({[e.idField]:r.id},r.data()):r.data())),dn)}get(e){return Me(this.query.get(e)).pipe(dn)}},Rx=new K("angularfire2.enableFirestorePersistence"),Px=new K("angularfire2.firestore.persistenceSettings"),d3=new K("angularfire2.firestore.settings"),h3=new K("angularfire2.firestore.use-emulator");function Nx(t,e=n=>n){return{query:e(t),ref:t}}var lu=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,s,a,l,u,d,f,m,_,D,T,M,k,q){this.schedulers=l;let j=xo(n,a,i),W=d;f&&u0(j,a,m,D,T,M,_,k),[this.firestore,this.persistenceEnabled$]=aa(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let le=a.runOutsideAngular(()=>j.firestore());if(o&&le.settings(o),W&&le.useEmulator(...W),r&&!_r(s)){let ie=()=>{try{return Me(le.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(b){return typeof console<"u"&&console.warn(b),te(!1)}};return[le,a.runOutsideAngular(ie)]}else return[le,te(!1)]},[o,W,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:s}=Nx(r,i),a=this.schedulers.ngZone.run(()=>o);return new pp(a,s,this)}collectionGroup(n,i){let r=i||(s=>s),o=this.firestore.collectionGroup(n);return new _b(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new hp(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)($(Ir),$(Tr,8),$(Rx,8),$(d3,8),$(Lt),$(Ie),$(Ao),$(Px,8),$(h3,8),$(d0,8),$(r0,8),$(o0,8),$(s0,8),$(a0,8),$(l0,8),$(c0,8),$(ji,8))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),kx=(()=>{class t{constructor(){Pt.registerVersion("angularfire",Mn.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:Rx,useValue:!0},{provide:Px,useValue:n}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[lu]})}return t})();var Qa=(()=>{let e=class e{constructor(){this.firestore=V(lu)}getFormFields(i){return this.firestore.collection("forms").doc(i).valueChanges().pipe(J(r=>JSON.parse(r.json)))}saveForm(i,r){return this.firestore.collection("forms").doc(i).set(r)}getForms(){return this.firestore.collection("forms").valueChanges().pipe(J(i=>i))}getFormById(i){return this.firestore.collection("forms").doc(i).valueChanges()}deleteForm(i){return this.firestore.collection("forms").doc(i).delete()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Fx=`
 
    <div class="ui-modal-dialog ">
      <div class="ui-modal-dialog-content">
        <div class="ui-modal-title">
          <span>{{title}}</span>
        </div>
        <div class="ui-modal-body-message">
          {{message}}
        </div>
        <div class="ui-modal-footer-message">
          <button class="ui-modal-button ok-button btn">OK</button>
        </div>
      </div>
    </div>
 
`,Ya=(t,e,n)=>{let i=Fx.replace("{{title}}",e).replace("{{message}}",t),r=document.createElement("div");r.classList.add("modal"),r.style.display="block",r.innerHTML=i,r.querySelector(".ok-button").addEventListener("click",()=>{let o=!0;document.body.removeChild(r),n&&n(o)}),document.body.appendChild(r)},mp=(t,e,n)=>{let i=Fx.replace("{{title}}",e).replace("{{message}}",t),r=document.createElement("div");r.classList.add("modal"),r.style.display="block",r.innerHTML=i;let o=document.createElement("button"),s=document.createElement("button");o.classList.add("ui-modal-button"),s.classList.add("ui-modal-button"),o.textContent="Si",s.textContent="No",r.querySelector(".ui-modal-footer-message").innerHTML="",r.querySelector(".ui-modal-footer-message").appendChild(o),r.querySelector(".ui-modal-footer-message").appendChild(s),o.addEventListener("click",()=>{let a=!0;document.body.removeChild(r),n&&n(a)}),s.addEventListener("click",()=>{let a=!1;document.body.removeChild(r),n&&n(a)}),document.body.appendChild(r)};function f3(t,e){if(t&1){let n=Qe();S(0,"li",7),he("dblclick",function(){let r=ue(n).$implicit,o=ee();return de(o.editForm(r))}),S(1,"div",8),ae(2,"span",9),B(3),A(),S(4,"div")(5,"button",10),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.editForm(r))}),ae(6,"span",11),A(),S(7,"button",10),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.deleteForm(r.nameForm))}),ae(8,"span",12),A()()()}if(t&2){let n=e.$implicit;U(3),St(" ",n.nameForm," ")}}var Vx=(()=>{let e=class e{constructor(i){this.router=i,this.forms=[],this.formService=V(Qa)}ngOnInit(){this.loadForms()}loadForms(){this.formService.getForms().subscribe(i=>{this.forms=i})}createNewForm(){this.router.navigate(["/form-builder","new"])}editForm(i){this.router.navigate(["/form-builder",i.nameForm])}deleteForm(i){mp("Sei sicuro di voler elimare la form?","Attenzione!",r=>{r&&this.formService.deleteForm(i).then(()=>{}).catch(o=>{console.error("Errore durante l'eliminazione del form:",o)})})}};e.\u0275fac=function(r){return new(r||e)(se(oa))},e.\u0275cmp=Ae({type:e,selectors:[["app-form-list"]],standalone:!0,features:[xe],decls:10,vars:3,consts:[[3,"emittEventButton","caption","addButtonShow"],[1,"text"],[1,"mdi","mdi-database"],["role","alert","role","alert",1,"alert","alert-primary","d-flex","align-items-center"],[1,"mdi","mdi-lightbulb-alert-outline","me-2"],[1,"list-group","form-list"],["class","form-list-item list-group-item d-flex justify-content-between align-items-center",3,"dblclick",4,"ngFor","ngForOf"],[1,"form-list-item","list-group-item","d-flex","justify-content-between","align-items-center",3,"dblclick"],[1,""],[1,"mdi","mdi-view-list-outline","mr-3"],[1,"btn","icon-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"mdi","mdi-close","del"]],template:function(r,o){r&1&&(S(0,"app-anagrafica-wrapper",0),he("emittEventButton",function(){return o.createNewForm()}),S(1,"div",1)(2,"h2"),ae(3,"span",2),B(4," Elenco form"),A()(),S(5,"div",3),ae(6,"span",4),B(7," Elenco delle Form create nell'app "),A(),S(8,"ul",5),Ce(9,f3,9,1,"li",6),A()()),r&2&&(Q("caption","Lista dei Form")("addButtonShow",!0),U(9),Q("ngForOf",o.forms))},dependencies:[rt,un,Dr],styles:[".form-list-item[_ngcontent-%COMP%]:hover{background-color:var(--bg-grey);cursor:pointer}"]});let t=e;return t})();var qx=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(se(si),se(Vt))},e.\u0275dir=Ue({type:e});let t=e;return t})(),hu=(()=>{let e=class e extends qx{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,features:[xt]});let t=e;return t})(),os=new K(""),p3={provide:os,useExisting:qt(()=>wb),multi:!0},wb=(()=>{let e=class e extends hu{writeValue(i){this.setProperty("checked",i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&he("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[cn([p3]),xt]});let t=e;return t})(),m3={provide:os,useExisting:qt(()=>Kr),multi:!0};function g3(){let t=Li()?Li().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var _3=new K(""),Kr=(()=>{let e=class e extends qx{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!g3())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(se(si),se(Vt),se(_3,8))},e.\u0275dir=Ue({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&he("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[cn([m3]),xt]});let t=e;return t})();function Wr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function Wx(t){return t!=null&&typeof t.length=="number"}var ss=new K(""),Ip=new K(""),y3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Za=class{static min(e){return v3(e)}static max(e){return w3(e)}static required(e){return Kx(e)}static requiredTrue(e){return b3(e)}static email(e){return E3(e)}static minLength(e){return Qx(e)}static maxLength(e){return Yx(e)}static pattern(e){return D3(e)}static nullValidator(e){return _p(e)}static compose(e){return nO(e)}static composeAsync(e){return iO(e)}};function v3(t){return e=>{if(Wr(e.value)||Wr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function w3(t){return e=>{if(Wr(e.value)||Wr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Kx(t){return Wr(t.value)?{required:!0}:null}function b3(t){return t.value===!0?null:{required:!0}}function E3(t){return Wr(t.value)||y3.test(t.value)?null:{email:!0}}function Qx(t){return e=>Wr(e.value)||!Wx(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function Yx(t){return e=>Wx(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function D3(t){if(!t)return _p;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(Wr(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function _p(t){return null}function Jx(t){return t!=null}function Zx(t){return Do(t)?Me(t):t}function Xx(t){let e={};return t.forEach(n=>{e=n!=null?Y(Y({},e),n):e}),Object.keys(e).length===0?null:e}function eO(t,e){return e.map(n=>n(t))}function C3(t){return!t.validate}function tO(t){return t.map(e=>C3(e)?e:n=>e.validate(n))}function nO(t){if(!t)return null;let e=t.filter(Jx);return e.length==0?null:function(n){return Xx(eO(n,e))}}function bb(t){return t!=null?nO(tO(t)):null}function iO(t){if(!t)return null;let e=t.filter(Jx);return e.length==0?null:function(n){let i=eO(n,e).map(Zx);return xm(i).pipe(J(Xx))}}function Eb(t){return t!=null?iO(tO(t)):null}function Lx(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function rO(t){return t._rawValidators}function oO(t){return t._rawAsyncValidators}function vb(t){return t?Array.isArray(t)?t:[t]:[]}function yp(t,e){return Array.isArray(t)?t.includes(e):t===e}function Bx(t,e){let n=vb(e);return vb(t).forEach(r=>{yp(n,r)||n.push(r)}),n}function jx(t,e){return vb(e).filter(n=>!yp(t,n))}var vp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Eb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ji=class extends vp{get formDirective(){return null}get path(){return null}},is=class extends vp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},wp=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},I3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},aY=ke(Y({},I3),{"[class.ng-submitted]":"isSubmitted"}),Xa=(()=>{let e=class e extends wp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(se(is,2))},e.\u0275dir=Ue({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&wo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[xt]});let t=e;return t})(),Tp=(()=>{let e=class e extends wp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(se(Ji,10))},e.\u0275dir=Ue({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&wo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[xt]});let t=e;return t})();var cu="VALID",gp="INVALID",Ja="PENDING",uu="DISABLED";function sO(t){return(Sp(t)?t.validators:t)||null}function T3(t){return Array.isArray(t)?bb(t):t||null}function aO(t,e){return(Sp(e)?e.asyncValidators:t)||null}function S3(t){return Array.isArray(t)?Eb(t):t||null}function Sp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function M3(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new oe(1e3,"");if(!i[n])throw new oe(1001,"")}function A3(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new oe(1002,"")})}var bp=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===cu}get invalid(){return this.status===gp}get pending(){return this.status==Ja}get disabled(){return this.status===uu}get enabled(){return this.status!==uu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Bx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Bx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jx(e,this._rawAsyncValidators))}hasValidator(e){return yp(this._rawValidators,e)}hasAsyncValidator(e){return yp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ja,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=uu,this.errors=null,this._forEachChild(i=>{i.disable(ke(Y({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ke(Y({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=cu,this._forEachChild(i=>{i.enable(ke(Y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ke(Y({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cu||this.status===Ja)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uu:cu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ja,this._hasOwnPendingAsyncValidator=!0;let n=Zx(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ge,this.statusChanges=new ge}_calculateStatus(){return this._allControlsDisabled()?uu:this.errors?gp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ja)?Ja:this._anyControlsHaveStatus(gp)?gp:cu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=T3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=S3(this._rawAsyncValidators)}},rs=class extends bp{constructor(e,n,i){super(sO(n),aO(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){A3(this,!0,e),Object.keys(e).forEach(i=>{M3(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var fu=new K("CallSetDisabledState",{providedIn:"root",factory:()=>Mp}),Mp="always";function lO(t,e){return[...e.path,t]}function Ep(t,e,n=Mp){Db(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),O3(t,e),P3(t,e),R3(t,e),x3(t,e)}function Ux(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Cp(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Dp(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function x3(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Db(t,e){let n=rO(t);e.validator!==null?t.setValidators(Lx(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=oO(t);e.asyncValidator!==null?t.setAsyncValidators(Lx(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Dp(e._rawValidators,r),Dp(e._rawAsyncValidators,r)}function Cp(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=rO(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let r=oO(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(n=!0,t.setAsyncValidators(o))}}}let i=()=>{};return Dp(e._rawValidators,i),Dp(e._rawAsyncValidators,i),n}function O3(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&cO(t,e)})}function R3(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&cO(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function cO(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function P3(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function uO(t,e){t==null,Db(t,e)}function N3(t,e){return Cp(t,e)}function dO(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function k3(t){return Object.getPrototypeOf(t.constructor)===hu}function hO(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function fO(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===Kr?n=o:k3(o)?i=o:r=o}),r||i||n||null}function F3(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var V3={provide:Ji,useExisting:qt(()=>Cb)},du=Promise.resolve(),Cb=(()=>{let e=class e extends Ji{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ge,this.form=new rs({},bb(i),Eb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){du.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),Ep(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){du.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){du.then(()=>{let r=this._findContainer(i.path),o=new rs({});uO(o,i),r.registerControl(i.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){du.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){du.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,hO(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(se(ss,10),se(Ip,10),se(fu,8))},e.\u0275dir=Ue({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&he("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[It.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[cn([V3]),xt]});let t=e;return t})();function $x(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Gx(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Ap=class extends bp{constructor(e=null,n,i){super(sO(n),aO(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Gx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){$x(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){$x(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Gx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var L3=t=>t instanceof Ap;var B3={provide:is,useExisting:qt(()=>pu)},Hx=Promise.resolve(),pu=(()=>{let e=class e extends is{constructor(i,r,o,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Ap,this._registered=!1,this.name="",this.update=new ge,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=fO(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),dO(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ep(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){Hx.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&Wl(r);Hx.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?lO(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(se(Ji,9),se(ss,10),se(Ip,10),se(os,10),se(Vi,8),se(fu,8))},e.\u0275dir=Ue({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[It.None,"disabled","isDisabled"],model:[It.None,"ngModel","model"],options:[It.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[cn([B3]),xt,an]});let t=e;return t})(),xp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ue({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),j3={provide:os,useExisting:qt(()=>Ib),multi:!0},Ib=(()=>{let e=class e extends hu{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&he("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[cn([j3]),xt]});let t=e;return t})();var pO=new K("");var U3={provide:Ji,useExisting:qt(()=>Tb)},Tb=(()=>{let e=class e extends Ji{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ge,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Cp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return Ep(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){Ux(i.control||null,i,!1),F3(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,hO(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,o=this.form.get(i.path);r!==o&&(Ux(r||null,i),L3(o)&&(Ep(o,i,this.callSetDisabledState),i.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);uO(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&N3(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Db(this.form,this),this._oldForm&&Cp(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(se(ss,10),se(Ip,10),se(fu,8))},e.\u0275dir=Ue({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&he("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[It.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[cn([U3]),xt,an]});let t=e;return t})();var $3={provide:is,useExisting:qt(()=>Sb)},Sb=(()=>{let e=class e extends is{set isDisabled(i){}constructor(i,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ge,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=fO(this,s)}ngOnChanges(i){this._added||this._setUpControl(),dO(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return lO(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(se(Ji,13),se(ss,10),se(Ip,10),se(os,10),se(pO,8))},e.\u0275dir=Ue({type:e,selectors:[["","formControlName",""]],inputs:{name:[It.None,"formControlName","name"],isDisabled:[It.None,"disabled","isDisabled"],model:[It.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[cn([$3]),xt,an]});let t=e;return t})(),G3={provide:os,useExisting:qt(()=>Op),multi:!0};function mO(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function H3(t){return t.split(":")[0]}var Op=(()=>{let e=class e extends hu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),o=mO(r,i);this.setProperty("value",o)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=H3(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&he("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[cn([G3]),xt]});let t=e;return t})(),gO=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(mO(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(se(Vt),se(si),se(Op,9))},e.\u0275dir=Ue({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),z3={provide:os,useExisting:qt(()=>_O),multi:!0};function zx(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function q3(t){return t.split(":")[0]}var _O=(()=>{let e=class e extends hu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let o=i.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let l=0;l<a.length;l++){let u=a[l],d=this._getOptionValue(u.value);o.push(d)}}else{let a=r.options;for(let l=0;l<a.length;l++){let u=a[l];if(u.selected){let d=this._getOptionValue(u.value);o.push(d)}}}this.value=o,i(o)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=q3(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&he("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[cn([z3]),xt]});let t=e;return t})(),yO=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(zx(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(zx(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(se(Vt),se(si),se(_O,9))},e.\u0275dir=Ue({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();function vO(t){return typeof t=="number"?t:parseInt(t,10)}var Mb=(()=>{let e=class e{constructor(){this._validator=_p}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):_p,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ue({type:e,features:[an]});let t=e;return t})();var W3={provide:ss,useExisting:qt(()=>Ab),multi:!0};var Ab=(()=>{let e=class e extends Mb{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Wl,this.createValidator=i=>Kx}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){r&2&&ai("required",o._enabled?"":null)},inputs:{required:"required"},features:[cn([W3]),xt]});let t=e;return t})();var K3={provide:ss,useExisting:qt(()=>xb),multi:!0},xb=(()=>{let e=class e extends Mb{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=i=>vO(i),this.createValidator=i=>Qx(i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,o){r&2&&ai("minlength",o._enabled?o.minlength:null)},inputs:{minlength:"minlength"},features:[cn([K3]),xt]});let t=e;return t})(),Q3={provide:ss,useExisting:qt(()=>Ob),multi:!0},Ob=(()=>{let e=class e extends Mb{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=i=>vO(i),this.createValidator=i=>Yx(i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=gn(e)))(o||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,o){r&2&&ai("maxlength",o._enabled?o.maxlength:null)},inputs:{maxlength:"maxlength"},features:[cn([Q3]),xt]});let t=e;return t})();var wO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({});let t=e;return t})();var Qr=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:fu,useValue:i.callSetDisabledState??Mp}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({imports:[wO]});let t=e;return t})(),Rp=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:pO,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:fu,useValue:i.callSetDisabledState??Mp}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({imports:[wO]});let t=e;return t})();var Y3=["*"];var J3=["dialog"];var bO={animation:!0,transitionTimerDelayMs:5},Z3=(()=>{let e=class e{constructor(){this.animation=bO.animation}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function X3(t){let{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t),i=parseFloat(e),r=parseFloat(n);return(i+r)*1e3}function EO(t){return typeof t=="string"}function Pb(t){return t!=null}function e4(t){return t&&t.then}function DO(t){return(t||document.body).getBoundingClientRect()}function t4(t){return e=>new fe(n=>{let i=s=>t.run(()=>n.next(s)),r=s=>t.run(()=>n.error(s)),o=()=>t.run(()=>n.complete());return e.subscribe({next:i,error:r,complete:o})})}var n4=()=>{},{transitionTimerDelayMs:i4}=bO,Pp=new Map,as=(t,e,n,i)=>{let r=i.context||{},o=Pp.get(e);if(o)switch(i.runningTransition){case"continue":return Ct;case"stop":t.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),Pp.delete(e)}let s=n(e,i.animation,r)||n4;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return t.run(()=>s()),te(void 0).pipe(t4(t));let a=new Le,l=new Le,u=a.pipe(Nm(!0));Pp.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let d=X3(e);return t.runOutsideAngular(()=>{let f=En(e,"transitionend").pipe(zt(u),it(({target:_})=>_===e)),m=Om(d+i4).pipe(zt(u));Rm(m,f,l).pipe(zt(u)).subscribe(()=>{Pp.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};var Fb=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(Fb||{});var eJ=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||e()):!1})();var r4=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function CO(t){let e=Array.from(t.querySelectorAll(r4)).filter(n=>n.tabIndex!==-1);return[e[0],e[e.length-1]]}var o4=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{let r=En(e,"focusin").pipe(zt(n),J(o=>o.target));En(e,"keydown").pipe(zt(n),it(o=>o.which===Fb.Tab),dd(r)).subscribe(([o,s])=>{let[a,l]=CO(e);(s===a||s===e)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&En(e,"click").pipe(zt(n),dd(r),J(o=>o[1])).subscribe(o=>o.focus())})};var tJ=new Date(1882,10,12),nJ=new Date(2174,10,25);var iJ=1e3*60*60*24;var Vb=1080,s4=24*Vb,a4=12*Vb+793,rJ=29*s4+a4,oJ=11*Vb+204;var l4=(()=>{let e=class e{constructor(){this._ngbConfig=V(Z3),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),el=class{constructor(e,n,i){this.nodes=e,this.viewRef=n,this.componentRef=i}};var c4=(()=>{let e=class e{constructor(){this._document=V(Ot)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,o=r.style,{overflow:s,paddingRight:a}=o;if(i>0){let l=parseFloat(window.getComputedStyle(r).paddingRight);o.paddingRight=`${l+i}px`}return o.overflow="hidden",()=>{i>0&&(o.paddingRight=a),o.overflow=s}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),u4=(()=>{let e=class e{constructor(){this._nativeElement=V(Vt).nativeElement,this._zone=V(Ie)}ngOnInit(){this._zone.onStable.asObservable().pipe(on(1)).subscribe(()=>{as(this._zone,this._nativeElement,(i,r)=>{r&&DO(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return as(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,o){r&2&&(nh("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),wo("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[xe],decls:0,vars:0,template:function(r,o){},encapsulation:2});let t=e;return t})(),Np=class{update(e){}close(e){}dismiss(e){}},d4=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],h4=["animation","backdropClass"],Nb=class{_applyWindowOptions(e,n){d4.forEach(i=>{Pb(n[i])&&(e[i]=n[i])})}_applyBackdropOptions(e,n){h4.forEach(i=>{Pb(n[i])&&(e[i]=n[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(zt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(zt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,n,i,r){this._windowCmptRef=e,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Le,this._dismissed=new Le,this._hidden=new Le,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let n=this._beforeDismiss();e4(n)?n.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):n!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():te(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Sl(e,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},kb=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(kb||{}),f4=(()=>{let e=class e{constructor(){this._document=V(Ot),this._elRef=V(Vt),this._zone=V(Ie),this._closed$=new Le,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ge,this.shown=new Le,this.hidden=new Le}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":EO(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(on(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,r={animation:this.animation,runningTransition:"stop"},o=as(this._zone,i,()=>i.classList.remove("show"),r),s=as(this._zone,this._dialogEl.nativeElement,()=>{},r),a=Sl(o,s);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let i={animation:this.animation,runningTransition:"continue"},r=as(this._zone,this._elRef.nativeElement,(s,a)=>{a&&DO(s),s.classList.add("show")},i),o=as(this._zone,this._dialogEl.nativeElement,()=>{},i);Sl(r,o).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{En(i,"keydown").pipe(zt(this._closed$),it(o=>o.which===Fb.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(kb.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let r=!1;En(this._dialogEl.nativeElement,"mousedown").pipe(zt(this._closed$),lt(()=>r=!1),Ge(()=>En(i,"mouseup").pipe(zt(this._closed$),on(1))),it(({target:o})=>i===o)).subscribe(()=>{r=!0}),En(i,"click").pipe(zt(this._closed$)).subscribe(({target:o})=>{i===o&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!r&&this._zone.run(()=>this.dismiss(kb.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let r=i.querySelector("[ngbAutofocus]"),o=CO(i)[0];(r||o||i).focus()}}_restoreFocus(){let i=this._document.body,r=this._elWithFocus,o;r&&r.focus&&i.contains(r)?o=r:o=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&as(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(r,o){if(r&1&&Ws(J3,7),r&2){let s;bo(s=Eo())&&(o._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,o){r&2&&(ai("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),nh("modal d-block"+(o.windowClass?" "+o.windowClass:"")),wo("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[xe],ngContentSelectors:Y3,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,o){r&1&&(ih(),S(0,"div",1,0)(2,"div",2),rh(3),A()()),r&2&&nh("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let t=e;return t})(),p4=(()=>{let e=class e{constructor(){this._applicationRef=V(gr),this._injector=V(Hn),this._environmentInjector=V(kt),this._document=V(Ot),this._scrollBar=V(c4),this._activeWindowCmptHasChanged=new Le,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new ge;let i=V(Ie);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let r=this._windowCmpts[this._windowCmpts.length-1];o4(i,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,r,o){let s=o.container instanceof HTMLElement?o.container:Pb(o.container)?this._document.querySelector(o.container):this._document.body;if(!s)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new Np;i=o.injector||i;let l=i.get(kt,null)||this._environmentInjector,u=this._getContentRef(i,l,r,a,o),d=o.backdrop!==!1?this._attachBackdrop(s):void 0,f=this._attachWindowComponent(s,u.nodes),m=new Nb(f,u,d,o.beforeDismiss);return this._registerModalRef(m),this._registerWindowCmpt(f),m.hidden.pipe(on(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=_=>{m.close(_)},a.dismiss=_=>{m.dismiss(_)},a.update=_=>{m.update(_)},m.update(o),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),d&&d.instance&&d.changeDetectorRef.detectChanges(),f.changeDetectorRef.detectChanges(),m}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(r=>r.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let r=uh(u4,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_attachWindowComponent(i,r){let o=uh(f4,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_getContentRef(i,r,o,s,a){return o?o instanceof xi?this._createFromTemplateRef(o,s):EO(o)?this._createFromString(o):this._createFromComponent(i,r,o,s,a):new el([])}_createFromTemplateRef(i,r){let o={$implicit:r,close(a){r.close(a)},dismiss(a){r.dismiss(a)}},s=i.createEmbeddedView(o);return this._applicationRef.attachView(s),new el([s.rootNodes],s)}_createFromString(i){let r=this._document.createTextNode(`${i}`);return new el([[r]])}_createFromComponent(i,r,o,s,a){let l=Hn.create({providers:[{provide:Np,useValue:s}],parent:i}),u=uh(o,{environmentInjector:r,elementInjector:l}),d=u.location.nativeElement;return a.scrollable&&d.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new el([[d]],u.hostView,u)}_setAriaHidden(i){let r=i.parentElement;r&&i!==this._document.body&&(Array.from(r.children).forEach(o=>{o!==i&&o.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,r)=>{i?r.setAttribute("aria-hidden",i):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let r=()=>{let o=this._modalRefs.indexOf(i);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(r,r)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let r=this._windowCmpts.indexOf(i);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Lb=(()=>{let e=class e{constructor(){this._injector=V(Hn),this._modalStack=V(p4),this._config=V(l4)}open(i,r={}){let o=Y(ke(Y({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._injector,i,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),IO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({providers:[Lb]});let t=e;return t})();var sJ=new K("live announcer delay",{providedIn:"root",factory:()=>100});function g4(t,e){if(t&1&&(S(0,"option",2),B(1),A()),t&2){let n=e.$implicit,i=ee();Q("value",n[i.valueExp]),U(),St(" ",n[i.displayExp]," ")}}var TO=(()=>{let e=class e{constructor(){this.disabled=!1,this.values=[],this.valueChange=new ge,this.availableOptions=[],this.multiple=!1}ngOnInit(){this.initializeOptions()}initializeOptions(){this.config&&this.config.selectOptions&&(this.selectOptions=this.config.selectOptions,this.displayExp=this.selectOptions.displayExp||"value",this.valueExp=this.selectOptions.valueExp||"id",this.availableOptions=this.selectOptions.options||[],this.config.selectOptions.parent&&this.parentValue&&(this.availableOptions=this.availableOptions.filter(i=>i.parent===this.parentValue)),this.selectedValue=this.selectOptions.multiple?this.values:this.value,this.formControlD?.setValue(this.selectedValue),this.multiple=this.selectOptions.multiple||!1)}ngOnChanges(i){(i.parentValue||i.config)&&typeof i.parentValue.currentValue<"u"&&i.parentValue.currentValue!==""&&this.filterOptionsBasedOnParent()}filterOptionsBasedOnParent(){let i=this.selectOptions;i&&i.parent&&this.parentValue?this.availableOptions=i.options.filter(r=>r.parent===this.parentValue):this.availableOptions=i.options}onValueChange(i){this.selectedValue=i.detail.value,this.valueChange.emit(this.selectedValue)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-dynamic-select-box"]],inputs:{config:"config",formControlD:"formControlD",parentValue:"parentValue",disabled:"disabled",value:"value",values:"values"},outputs:{valueChange:"valueChange"},standalone:!0,features:[an,xe],decls:3,vars:4,consts:[[3,"ionChange","multiple","value","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(r,o){r&1&&(S(0,"div")(1,"select",0),he("ionChange",function(a){return o.onValueChange(a)}),Ce(2,g4,2,2,"option",1),A()()),r&2&&(U(),Q("multiple",o.selectOptions.multiple)("value",o.selectedValue)("disabled",o.disabled),U(),Q("ngForOf",o.availableOptions))},dependencies:[rt,un]});let t=e;return t})();var _4=()=>[];function y4(t,e){t&1&&(S(0,"span",15),B(1,"Richiesto"),A())}function v4(t,e){if(t&1&&ae(0,"input",16),t&2){let n=ee().$implicit;Q("type",n.typeInput?n.typeInput:"text")("name",n.name)("formControlName",n.name)("id",n.htmlId)("placeholder",n.placeholder)("maxlength",n.maxlength)("minlength",n.minlength),ai("required",n.required?!0:null)}}function w4(t,e){if(t&1&&(S(0,"textarea",17),B(1,`  
              `),A()),t&2){let n=ee().$implicit;Q("placeholder",n.placeholder)}}function b4(t,e){if(t&1){let n=Qe();S(0,"app-dynamic-select-box",18),he("valueChange",function(r){ue(n);let o=ee().$implicit,s=ee();return de(s.onValueChange(o.name,r))}),A()}if(t&2){let n=ee().$implicit,i=ee();Q("config",n)("parentValue",i.formValues[(n.selectOptions==null?null:n.selectOptions.parent)||""])("value",i.formValues[n.name])("values",n.selectOptions!=null&&n.selectOptions.multiple?i.formValues[n.name]:mI(4,_4))}}function E4(t,e){if(t&1&&(zs(0),S(1,"div",8)(2,"label",9),B(3),Ce(4,y4,2,0,"span",10),A(),S(5,"div",11),Ce(6,v4,1,8,"input",12)(7,w4,2,1,"textarea",13)(8,b4,1,5,"app-dynamic-select-box",14),A()(),qs()),t&2){let n=e.$implicit,i=ee();U(3),St("",n.label," "),U(),Q("ngIf",n.required),U(),Q("formGroup",i.form),U(),Q("ngIf",n.type==="textBox"),U(),Q("ngIf",n.type==="textArea"),U(),Q("ngIf",n.type==="selectBox")}}var SO=(()=>{let e=class e{constructor(){this.submitFormEvent=new ge,this.form=new rs({}),this.formValues={},this.dataSet=[],this.fields=[],this.formShow=!1,this.fieldConfigs=[],this.templateService=V(Qa)}ngOnInit(){this.service&&(typeof this.editData>"u"&&(this.editData={}),this.templateService.getFormFields(this.service).subscribe(i=>{this.fields=i,this.initializeForm()}))}initializeForm(){this.editData=this.editData||{};let i=new rs({});this.fields.forEach(r=>{let o=this.getValidators(r),s=this.editData[r.name]||null;i.addControl(r.name,new Ap(s,o)),this.initializeFormValues(r)}),this.form=i}getValidators(i){let r=[];return i.required&&r.push(Za.required),typeof i.minlength<"u"&&r.push(Za.minLength(i.minlength)),typeof i.maxlength<"u"&&r.push(Za.maxLength(i.maxlength)),r}initializeFormValues(i){typeof this.editData[i.name]<"u"&&(this.formValues[i.name]=this.editData[i.name]),this.fieldConfigs[i.name]=i}onValueChange(i,r){let o=this.form.get(i);o&&o.value!==r&&(o.setValue(r,{emitEvent:!1}),this.formValues[i]=r),this.fieldConfigs[i]&&this.updateCascadeOptions(i,r)}updateCascadeOptions(i,r){let o=this.fieldConfigs[i];if(o&&o.cascadeFrom&&i===o.cascadeFrom){let s=o.cascadeOptions[r]||[];this.formValues[i]=s}}submitForm(){if(this.form.valid){let i={name:"submitForm",formData:this.form.value,form:this.form};this.submitFormEvent.emit(i)}else{let i=this.getInvalidFields(this.form);this.presentToast(`Mancano i seguenti campi:${i.join(", ")}`)}}cancellForm(){let i={name:"cancelForm",formData:this.form.value,form:this.form};this.submitFormEvent.emit(i)}getInvalidFields(i){let r=[];return Object.keys(i.controls).forEach(o=>{let s=i.get(o);if(s&&s.invalid){let a=this.fieldConfigs[o].label;r.push(a)}}),r}presentToast(i){return O(this,null,function*(){Ya(i,"Errore!")})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-dynamic-form"]],inputs:{service:"service",editData:"editData"},outputs:{submitFormEvent:"submitFormEvent"},standalone:!0,features:[xe],decls:10,vars:2,consts:[[3,"ngSubmit","formGroup"],[1,"form-container"],[4,"ngFor","ngForOf"],[1,"form-footer"],["type","button",1,"btn","ana-button",3,"click"],[1,"mdi","mdi-keyboard-return"],["type","submit",1,"btn","ana-button"],[1,"mdi","mdi-content-save-outline"],[1,"row","mt-3","mb-3"],[1,"col-sm-3","col-form-label","font-medium"],["class","badge bg-secondary",4,"ngIf"],[1,"col-sm-9",3,"formGroup"],["class","form-control",3,"type","name","formControlName","id","placeholder","maxlength","minlength",4,"ngIf"],["rows","4",3,"placeholder",4,"ngIf"],[3,"config","parentValue","value","values","valueChange",4,"ngIf"],[1,"badge","bg-secondary"],[1,"form-control",3,"type","name","formControlName","id","placeholder","maxlength","minlength"],["rows","4",3,"placeholder"],[3,"valueChange","config","parentValue","value","values"]],template:function(r,o){r&1&&(S(0,"form",0),he("ngSubmit",function(){return o.submitForm()}),S(1,"div",1),Ce(2,E4,9,6,"ng-container",2),A(),S(3,"div",3)(4,"button",4),he("click",function(){return o.cancellForm()}),ae(5,"span",5),B(6,"Chiudi"),A(),S(7,"button",6),ae(8,"span",7),B(9,"Salva"),A()()()),r&2&&(Q("formGroup",o.form),U(2),Q("ngForOf",o.fields))},dependencies:[rt,un,ci,TO,Qr,xp,Kr,Xa,Tp,xb,Ob,Rp,Tb,Sb],styles:[".form-container[_ngcontent-%COMP%]{max-height:750px;overflow-y:scroll;padding:1rem}.form-container[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.form-container[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{margin-left:-.6rem;margin-right:.5rem}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--bg-grey);padding:.6rem .5rem}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-cell[_ngcontent-%COMP%]{text-align:center}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]{font-size:1.4rem;padding:0}.form-footer[_ngcontent-%COMP%]{border:1px solid var(--border_color);padding:1rem;display:flex;gap:1rem;flex-direction:row;flex-wrap:nowrap;justify-content:end}"]});let t=e;return t})();function D4(t,e){t&1&&(S(0,"div",39),B(1,"*Nome obbligatorio"),A())}function C4(t,e){t&1&&(S(0,"div",39),B(1,"*Tipo obbligatoria"),A())}function I4(t,e){t&1&&(S(0,"div",39),B(1,"*Label obbligatoria"),A())}function T4(t,e){if(t&1){let n=Qe();S(0,"div",10)(1,"label",11),B(2,"Mostra func.bot"),A(),S(3,"div",30)(4,"input",40),Je("ngModelChange",function(r){ue(n);let o=ee();return Xe(o.formField.funcButton,r)||(o.formField.funcButton=r),de(r)}),A(),S(5,"label",32),B(6," Mostra un bottone funzionale nella form "),A()()()}if(t&2){let n=ee();U(4),Ye("ngModel",n.formField.funcButton)}}function S4(t,e){if(t&1){let n=Qe();S(0,"div",10)(1,"label",41),B(2,"Min Value"),A(),S(3,"div",42)(4,"input",43),Je("ngModelChange",function(r){ue(n);let o=ee();return Xe(o.formField.min,r)||(o.formField.min=r),de(r)}),A()()()}if(t&2){let n=ee();U(4),Q("disabled",n.showFileOption),Ye("ngModel",n.formField.min)}}function M4(t,e){if(t&1){let n=Qe();S(0,"div",10)(1,"label",11),B(2,"Max Value"),A(),S(3,"div",42)(4,"input",44),Je("ngModelChange",function(r){ue(n);let o=ee();return Xe(o.formField.max,r)||(o.formField.max=r),de(r)}),A()()()}if(t&2){let n=ee();U(4),Q("disabled",n.showFileOption),Ye("ngModel",n.formField.max)}}function A4(t,e){t&1&&(S(0,"div",39),B(1,"*link obbligatorio"),A())}function x4(t,e){t&1&&(S(0,"div",39),B(1,"*Testo del link"),A())}function O4(t,e){if(t&1){let n=Qe();S(0,"div",10)(1,"div",10)(2,"label",11),B(3,"CheckBox con link"),A(),S(4,"div",30)(5,"input",45),Je("ngModelChange",function(r){ue(n);let o=ee();return Xe(o.formField.checkBoxOptions.haveLink,r)||(o.formField.checkBoxOptions.haveLink=r),de(r)}),A(),S(6,"label",46),B(7,"Abilita per inserire un link nella checkbox"),A()()(),S(8,"div",10)(9,"label",11),B(10,"Link"),A(),S(11,"div",13)(12,"input",47,4),Je("ngModelChange",function(r){ue(n);let o=ee();return Xe(o.formField.checkBoxOptions.hrefLink,r)||(o.formField.checkBoxOptions.hrefLink=r),de(r)}),A()(),Ce(14,A4,2,0,"div",15),A(),S(15,"div",10)(16,"label",11),B(17,"Testo del link"),A(),S(18,"div",13)(19,"input",48,5),Je("ngModelChange",function(r){ue(n);let o=ee();return Xe(o.formField.checkBoxOptions.hrefText,r)||(o.formField.checkBoxOptions.hrefText=r),de(r)}),A()(),Ce(21,x4,2,0,"div",15),A()()}if(t&2){let n=li(13),i=li(20),r=ee();U(5),Ye("ngModel",r.formField.checkBoxOptions.haveLink),U(7),Ye("ngModel",r.formField.checkBoxOptions.hrefLink),Q("required",r.formField.checkBoxOptions.haveLink===!0),U(2),Q("ngIf",n.invalid&&n.touched&&r.formField.checkBoxOptions.haveLink),U(5),Q("required",r.formField.checkBoxOptions.haveLink===!0),Ye("ngModel",r.formField.checkBoxOptions.hrefText),U(2),Q("ngIf",i.invalid&&i.touched&&r.formField.checkBoxOptions.haveLink)}}function R4(t,e){t&1&&(S(0,"div",39),B(1,"displayExp obbligatorio"),A())}function P4(t,e){t&1&&(S(0,"div",39),B(1,"valueExp obbligatorio"),A())}function N4(t,e){if(t&1){let n=Qe();S(0,"tr",63),he("click",function(){let r=ue(n).$implicit,o=ee(3);return de(o.onOptionClick(r))}),S(1,"td"),B(2),A(),S(3,"td"),B(4),A(),S(5,"td"),B(6),A(),S(7,"td")(8,"button",63),he("click",function(){let r=ue(n).index,o=ee(3);return de(o.removeOption(r))}),B(9,"Rimuovi"),A()()()}if(t&2){let n=e.$implicit,i=ee(3);U(2),St(" ",n[i.formField.selectOptions.valueExp]," "),U(2),St(" ",n[i.formField.selectOptions.displayExp]," "),U(2),St(" ",n.parent," ")}}function k4(t,e){if(t&1){let n=Qe();S(0,"table",56)(1,"thead")(2,"tr")(3,"td"),B(4),A(),S(5,"td"),B(6),A(),S(7,"td"),B(8,"Parent"),A(),S(9,"td"),B(10,"Azioni"),A()()(),S(11,"tbody")(12,"tr")(13,"td")(14,"input",57),Je("ngModelChange",function(r){ue(n);let o=ee(2);return Xe(o.newOption[o.formField.selectOptions.valueExp],r)||(o.newOption[o.formField.selectOptions.valueExp]=r),de(r)}),A()(),S(15,"td")(16,"input",58),Je("ngModelChange",function(r){ue(n);let o=ee(2);return Xe(o.newOption[o.formField.selectOptions.displayExp],r)||(o.newOption[o.formField.selectOptions.displayExp]=r),de(r)}),A()(),S(17,"td")(18,"input",59),Je("ngModelChange",function(r){ue(n);let o=ee(2);return Xe(o.newOption.parent,r)||(o.newOption.parent=r),de(r)}),A()(),S(19,"td",60)(20,"button",61),he("click",function(){ue(n);let r=ee(2);return de(r.addOption())}),ae(21,"span",38),A()()(),Ce(22,N4,10,3,"tr",62),A()()}if(t&2){let n=ee(2);U(4),qn(n.formField.selectOptions.valueExp),U(2),qn(n.formField.selectOptions.displayExp),U(8),Q("name",n.formField.selectOptions.valueExp),Ye("ngModel",n.newOption[n.formField.selectOptions.valueExp]),U(2),Q("name",n.formField.selectOptions.displayExp),Ye("ngModel",n.newOption[n.formField.selectOptions.displayExp]),U(2),Ye("ngModel",n.newOption.parent),U(4),Q("ngForOf",n.formField.selectOptions.options)}}function F4(t,e){if(t&1){let n=Qe();S(0,"div",10)(1,"div",10)(2,"label",11),B(3,"Multiple"),A(),S(4,"div",30)(5,"input",49),Je("ngModelChange",function(r){ue(n);let o=ee();return Xe(o.formField.selectOptions.multiple,r)||(o.formField.selectOptions.multiple=r),de(r)}),A(),S(6,"label",50),B(7,"Select tipo multicheck"),A()()(),S(8,"div",10)(9,"label",11),B(10,"Parent ID"),A(),S(11,"div",13)(12,"input",51),Je("ngModelChange",function(r){ue(n);let o=ee();return Xe(o.formField.selectOptions.parent,r)||(o.formField.selectOptions.parent=r),de(r)}),A()()(),S(13,"div",10)(14,"label",11),B(15,"Display Expression "),S(16,"span",12),B(17,"Richiesto"),A()(),S(18,"div",13)(19,"input",52,6),Je("ngModelChange",function(r){ue(n);let o=ee();return Xe(o.formField.selectOptions.displayExp,r)||(o.formField.selectOptions.displayExp=r),de(r)}),A()(),Ce(21,R4,2,0,"div",15),A(),S(22,"div",10)(23,"label",11),B(24,"Value Expression "),S(25,"span",12),B(26,"Richiesto"),A()(),S(27,"div",13)(28,"input",53,7),Je("ngModelChange",function(r){ue(n);let o=ee();return Xe(o.formField.selectOptions.valueExp,r)||(o.formField.selectOptions.valueExp=r),de(r)}),A()(),Ce(30,P4,2,0,"div",15),A(),S(31,"div",54),Ce(32,k4,23,8,"table",55),A()()}if(t&2){let n=li(20),i=li(29),r=ee();U(5),Ye("ngModel",r.formField.selectOptions.multiple),U(7),Ye("ngModel",r.formField.selectOptions.parent),U(7),Ye("ngModel",r.formField.selectOptions.displayExp),U(2),Q("ngIf",n.invalid&&n.touched),U(7),Ye("ngModel",r.formField.selectOptions.valueExp),U(2),Q("ngIf",i.invalid&&i.touched),U(2),Q("ngIf",r.formField.selectOptions.valueExp&&r.formField.selectOptions.displayExp)}}var MO=(()=>{let e=class e{constructor(){this.outPutProperties=new ge,this.showSelectOption=!1,this.showFileOption=!1,this.showCheckBoxOption=!1,this.newOption={},this.optionSelIndex=-1}ngOnInit(){this.showSelectOption=!1;let i;switch(this.formField.type){case"checkBox":if(this.showCheckBoxOption=!0,this.formField.typeInput="boolean",this.checkBoxOptions={haveLink:!1,hrefLink:void 0,hrefText:""},typeof this.formField.checkBoxOptions<"u"){let o=this.formField.checkBoxOptions;this.checkBoxOptions={haveLink:o.haveLink,hrefLink:o.hrefLink,hrefText:o.hrefText}}this.formField.checkBoxOptions=this.checkBoxOptions;break;case"fileBox":this.showFileOption=!0,this.formField.typeInput="file";break;case"selectBox":this.showSelectOption=!0,this.selectOptions={multiple:!1,displayExp:"",valueExp:"",options:[],parent:""},typeof this.formField.selectOptions<"u"&&(i=this.formField.selectOptions,this.selectOptions={multiple:i.multiple,displayExp:i.displayExp,valueExp:i.valueExp,options:i.options,parent:i.parent}),this.formField.selectOptions=this.selectOptions;break;default:break}}addOption(){let i=this.formField.selectOptions.valueExp,r=this.formField.selectOptions.displayExp;!this.newOption[i]||!this.newOption[r]||(this.optionSelIndex>=0?this.selectOptions.options[this.optionSelIndex]=this.newOption:this.selectOptions.options.push(this.newOption),this.formField.selectOptions&&(this.newOption={[this.formField.selectOptions.valueExp]:"",[this.formField.selectOptions?.displayExp]:"",parent:""}),this.optionSelIndex=-1)}onOptionClick(i){let r=this.formField.selectOptions.valueExp,o=this.formField.selectOptions.displayExp;this.newOption=i,this.formField.selectOptions?.options&&(this.optionSelIndex=this.formField.selectOptions?.options.findIndex(s=>s==i))}removeOption(i){this.selectOptions.options.splice(i,1)}saveProperties(i){if(!this.formPrsValidate(i))return;let o={name:"saveProperties",formField:this.formField};this.outPutProperties.emit(o)}closeProperties(i){if(i.valid)mp("Sei sicuro di voler abbandonare?","Attenzione!",o=>{if(o){let s={name:"closeProperties",formField:this.formField};this.outPutProperties.emit(s)}});else{let o={name:"closeProperties",formField:this.formField};this.outPutProperties.emit(o)}}addValidation(i){i.validation.push({type:"",value:""})}formPrsValidate(i){return i.valid?this.showSelectOption&&this.formField.selectOptions&&this.formField.selectOptions.options.length==0?(alert("Mancano i campi le options della select"),!1):!0:(alert("Mancano i campi obbligatori"),this.markFormGroupTouched(i),!1)}markFormGroupTouched(i){Object.keys(i.controls).forEach(r=>{i.control.get(r)?.markAsTouched({onlySelf:!0})})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-element"]],inputs:{formField:"formField"},outputs:{outPutProperties:"outPutProperties"},standalone:!0,features:[xe],decls:86,vars:20,consts:[["elementForm","ngForm"],["name","ngModel"],["typeInput","ngModel"],["label","ngModel"],["hrefLink","ngModel"],["hrefText","ngModel"],["displayExp","ngModel"],["valueExp","ngModel"],[1,"modal-body","form-container"],[1,""],[1,"row","mt-3","mb-3"],[1,"col-sm-3","col-form-label","font-medium"],[1,"badge","bg-secondary"],[1,"col-sm-9"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],["name","typeInput","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["value",""],["value","text"],["value","number"],["value","email"],["value","password"],["value","url"],["value","file",3,"selected"],["value","boolean",3,"selected"],["type","text","name","label","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","placeholder",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","cssClass",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","htmlId",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","maxLength",1,"form-control",3,"ngModelChange","disabled","ngModel"],[1,"col-sm-9","form-check"],["id","required","type","checkbox","name","required",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","required",1,"form-check-label"],["class","row mt-3 mb-3",4,"ngIf"],["class","row mt-3 mb-3 ",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","ana-button",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"mdi","mdi-content-save-outline"],[1,"text-danger"],["id","funcButton","type","checkbox","name","funcButton",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","min",1,"col-sm-3","col-form-label","font-medium"],[1,"col-sm-9","form-control"],["id","min","type","number","name","min",1,"form-control",3,"ngModelChange","disabled","ngModel"],["type","number","name","max",1,"form-control",3,"ngModelChange","disabled","ngModel"],["id","hrefLink","name","hrefLink","type","checkbox",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","hrefLink",1,"form-check-label"],["id","hrefLink","name","hrefLink","type","url",1,"form-control",3,"ngModelChange","ngModel","required"],["id","hrefText","name","hrefText","type","text",1,"form-control",3,"ngModelChange","required","ngModel"],["id","multiple","name","multiple","type","checkbox",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","multiple",1,"form-check-label"],["type","text","name","parent",1,"form-control",3,"ngModelChange","ngModel"],["type","text","required","","name","displayExp",1,"form-control",3,"ngModelChange","ngModel"],["type","text","required","","name","valueExp",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3","mb-3"],["class","table table-sm ",4,"ngIf"],[1,"table","table-sm"],["type","text","placeholder","Nuovo Display",1,"form-control",3,"ngModelChange","name","ngModel"],["type","text","placeholder","Nuovo Value",1,"form-control",3,"ngModelChange","name","ngModel"],["type","text","name","parentT","placeholder","Nuovo Parent",1,"form-control",3,"ngModelChange","ngModel"],[1,"action-cell"],[1,"icon-button","btn","button-in-cell",3,"click"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(r,o){if(r&1){let s=Qe();S(0,"div",8)(1,"form",null,0)(3,"div",9)(4,"div",10)(5,"label",11),B(6,"Nome campo "),S(7,"span",12),B(8,"Richiesto"),A()(),S(9,"div",13)(10,"input",14,1),Je("ngModelChange",function(l){return ue(s),Xe(o.formField.name,l)||(o.formField.name=l),de(l)}),A()(),Ce(12,D4,2,0,"div",15),A(),S(13,"div",10)(14,"label",11),B(15,"Tipo di campo "),S(16,"span",12),B(17,"Richiesto"),A()(),S(18,"div",13)(19,"select",16,2),Je("ngModelChange",function(l){return ue(s),Xe(o.formField.typeInput,l)||(o.formField.typeInput=l),de(l)}),S(21,"option",17),B(22,"Seleziona"),A(),S(23,"option",18),B(24,"Testo"),A(),S(25,"option",19),B(26,"Numerico"),A(),S(27,"option",20),B(28,"Email"),A(),S(29,"option",21),B(30,"Password"),A(),S(31,"option",22),B(32,"Url"),A(),S(33,"option",23),B(34,"file"),A(),S(35,"option",24),B(36,"Boolean"),A()()(),Ce(37,C4,2,0,"div",15),A(),S(38,"div",10)(39,"label",11),B(40,"Label "),S(41,"span",12),B(42,"Richiesto"),A()(),S(43,"div",13)(44,"input",25,3),Je("ngModelChange",function(l){return ue(s),Xe(o.formField.label,l)||(o.formField.label=l),de(l)}),A()(),Ce(46,I4,2,0,"div",15),A(),S(47,"div",10)(48,"label",11),B(49,"Placeholder"),A(),S(50,"div",13)(51,"input",26),Je("ngModelChange",function(l){return ue(s),Xe(o.formField.placeholder,l)||(o.formField.placeholder=l),de(l)}),A()()(),S(52,"div",10)(53,"label",11),B(54,"CSS Class"),A(),S(55,"div",13)(56,"input",27),Je("ngModelChange",function(l){return ue(s),Xe(o.formField.cssClass,l)||(o.formField.cssClass=l),de(l)}),A()()(),S(57,"div",10)(58,"label",11),B(59,"HTML ID"),A(),S(60,"div",13)(61,"input",28),Je("ngModelChange",function(l){return ue(s),Xe(o.formField.htmlId,l)||(o.formField.htmlId=l),de(l)}),A()()(),S(62,"div",10)(63,"label",11),B(64,"Max Length"),A(),S(65,"div",13)(66,"input",29),Je("ngModelChange",function(l){return ue(s),Xe(o.formField.maxLength,l)||(o.formField.maxLength=l),de(l)}),A()()(),S(67,"div",10)(68,"label",11),B(69,"Required"),A(),S(70,"div",30)(71,"input",31),Je("ngModelChange",function(l){return ue(s),Xe(o.formField.required,l)||(o.formField.required=l),de(l)}),A(),S(72,"label",32),B(73," Campo Richiesto "),A()()(),Ce(74,T4,7,1,"div",33)(75,S4,5,2,"div",33)(76,M4,5,2,"div",33),A(),Ce(77,O4,22,7,"div",34)(78,F4,33,7,"div",34),A()(),S(79,"div",35)(80,"button",36),he("click",function(){ue(s);let l=li(2);return de(o.closeProperties(l))}),ae(81,"span",37),B(82,"Chiudi"),A(),S(83,"button",36),he("click",function(){ue(s);let l=li(2);return de(o.saveProperties(l))}),ae(84,"span",38),B(85,"Salva"),A()()}if(r&2){let s=li(11),a=li(45);U(10),Ye("ngModel",o.formField.name),U(2),Q("ngIf",s.invalid&&s.touched),U(7),Ye("ngModel",o.formField.typeInput),Q("disabled",o.showFileOption),U(14),Q("selected",o.showFileOption),U(2),Q("selected",o.showCheckBoxOption),U(2),Q("ngIf",a.invalid&&a.touched),U(7),Ye("ngModel",o.formField.label),U(2),Q("ngIf",a.invalid&&a.touched),U(5),Ye("ngModel",o.formField.placeholder),U(5),Ye("ngModel",o.formField.cssClass),U(5),Ye("ngModel",o.formField.htmlId),U(5),Q("disabled",o.showFileOption),Ye("ngModel",o.formField.maxLength),U(5),Ye("ngModel",o.formField.required),U(3),Q("ngIf",o.formField.type=="textBox"),U(),Q("ngIf",o.formField.type=="textBox"&&o.formField.typeInput=="number"),U(),Q("ngIf",o.formField.type=="textBox"&&o.formField.typeInput=="number"),U(),Q("ngIf",o.showCheckBoxOption&&o.formField.checkBoxOptions),U(),Q("ngIf",o.showSelectOption&&o.formField.selectOptions)}},dependencies:[rt,un,ci,Qr,xp,gO,yO,Kr,Ib,wb,Op,Xa,Tp,Ab,pu,Cb,Rp],styles:[".disabled-el[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}"]});let t=e;return t})();var Bb=[{name:"ElementComponent",component:MO},{name:"DynamicFormComponent",component:SO}];var Yr=(()=>{let e=class e{constructor(){this.dataFromComponent=new ge,this._popupsSet=new pt([]),this.popupsSet=this._popupsSet.asObservable(),this.currentPopupsSet=[],this._outputComponent=new pt([]),this.outputComponent=this._outputComponent.asObservable()}getComponentByName(i){return Bb.find(o=>o.name===i).component||null}isComponentExistByName(i){return!!Bb.find(o=>o.name===i).name}setNewPopUp(i,r,o,s="800",a,l,u=!1,d=!1,f="",m="center",_=!1){if(i||(i=Math.random().toString().replace("0.","")),typeof r>"u"||!i)return;let D=this.currentPopupsSet.findIndex(T=>T.id==i&&T.componentName==r);if(D<0){let T={componentName:r,dataToSend:o,instancedData:l,popUpWidth:s,showCaptionFooter:u,showCaptionHeader:d,accessoringData:a,action:"added",title:f,position:m,id:i,isClosablePopUp:_};this.currentPopupsSet.push(T),this._popupsSet.next(this.currentPopupsSet)}else this.currentPopupsSet[D].dataToSend=o,this.currentPopupsSet[D].action="update",this.currentPopupsSet[D].showCaptionFooter=u,this.currentPopupsSet[D].showCaptionHeader=d,this._popupsSet.next(this.currentPopupsSet)}setPopUps(i){this.currentPopupsSet=i}destroyCurrentOpenPopUp(i){let r=this.currentPopupsSet.findIndex(o=>o.componentName==i);if(r>=0){this.currentPopupsSet[r].action="remove";try{}catch(o){console.warn(o)}setTimeout(()=>{this._popupsSet.next(this.currentPopupsSet),this._outputComponent.next([]),this.currentPopupsSet.splice(r,1)},500)}}destroyCurrentOpenPopUpByGuid(i){let r=this.currentPopupsSet.findIndex(o=>o.id==i||o.componentName==i);if(r>=0){this.currentPopupsSet[r].action="remove";try{return this._popupsSet.next(this.currentPopupsSet),this.currentPopupsSet.splice(r,1),!0}catch(o){return console.warn(o),!1}}return!1}destroyOutputComponent(){this._outputComponent.next([])}destroyCurrentOpenPopUps(){this.currentPopupsSet=[],this._popupsSet.next([])}setOutputComponent(i){this._outputComponent.next(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function L4(t,e){if(t&1){let n=Qe();S(0,"li",19),he("click",function(r){let o=ue(n).index,s=ee();return de(s.onAdd(r,o))}),ae(1,"span",20),B(2),S(3,"div")(4,"button",21),he("click",function(r){let o=ue(n).index,s=ee();return de(s.onAdd(r,o))}),ae(5,"span",22),A()()()}if(t&2){let n=e.$implicit,i=ee();U(),Q("ngClass",i.elementIcons[n.type]),U(),St(" ",n.label," ")}}function B4(t,e){if(t&1){let n=Qe();S(0,"div",23),he("click",function(){let r=ue(n),o=r.$implicit,s=r.index,a=ee();return de(a.openPropertiesModal(o,s))}),S(1,"div",24)(2,"span"),B(3),A()(),S(4,"button",25),he("click",function(){let r=ue(n).index,o=ee();return de(o.onRemove(r))}),ae(5,"span",26),A()()}if(t&2){let n=e.$implicit;U(3),qn(n.label)}}var AO=(()=>{let e=class e{constructor(i,r,o){this.modalService=i,this.route=r,this.router=o,this.elements=[{type:"textBox",label:"Text Box"},{type:"selectBox",label:"Select Box"},{type:"radio",label:"Radio Button"},{type:"checkBox",label:"Checkbox"},{type:"textArea",label:"Textarea"},{type:"fileBox",label:"FileBox"}],this.elementIcons={textBox:"mdi mdi-signature-text",selectBox:"mdi mdi-form-select",radio:"mdi mdi-radiobox-marked",checkBox:"mdi mdi-checkbox-marked-outline",textArea:"mdi mdi-form-textarea",fileBox:"mdi mdi-file-document-outline"},this.formElements=[],this.propertiesModal=V(Yr),this.formId=null,this.formTitle=this.formId?"Modifica Form":"Crea Nuovo Form",this.formName="",this.formService=V(Qa)}ngOnInit(){this.route.paramMap.subscribe(i=>{this.formId=i.get("id"),this.formId&&(this.formTitle="Modifica Form",this.loadForm(this.formId))})}loadForm(i){this.formService.getFormById(i).subscribe(r=>{r&&(this.formName=r.nameForm,this.formElements=JSON.parse(r.json))})}onAdd(i,r){i.preventDefault(),i.stopPropagation();let o=this.elements[r];this.formElements.push(ke(Y({},o),{validation:[]}));let s=this.formElements.length-1;this.openPropertiesModal(o,s)}onRemove(i){this.formElements.splice(i,1)}openPropertiesModal(i,r){this.selectedElement=Y({},i);let o=Math.random().toString().replace("0.",""),s={formField:this.selectedElement};this.propertiesModal.setNewPopUp(o,"ElementComponent",null,800,null,s,!1,!0,"Gestione propriet\xE0","",!1),this.propertiesModal.outputComponent.subscribe(a=>{a.guid==o&&a.name=="saveProperties"&&r>=0&&(this.formElements[r]=a.formField,this.propertiesModal.destroyCurrentOpenPopUpByGuid(o),this.selectedElement={}),a.guid==o&&a.name=="closeProperties"&&this.propertiesModal.destroyCurrentOpenPopUpByGuid(o)})}addAttribute(i){let r={name:"",value:""};i.attributes.push(r)}saveForm(i){let r=JSON.stringify(this.formElements);console.log("saveForm",r);let o=this.formId==="new"?Math.random().toString().replace("0.",""):this.formId,s=this.formId=="new"?this.formName.trim():this.formId,a={nameForm:s,json:r,id:o};this.formService.saveForm(s,a).then(()=>{Ya("Form salvato con successo","Attenzione!"),this.router.navigate(["/form-list"])}).catch(l=>{console.error("Errore durante il salvataggio del form:",l)})}returnPrev(){this.router.navigate(["/form-list"])}};e.\u0275fac=function(r){return new(r||e)(se(Lb),se(wr),se(oa))},e.\u0275cmp=Ae({type:e,selectors:[["app-form-builder"]],standalone:!0,features:[xe],decls:29,vars:6,consts:[[3,"caption"],[1,"text","border-bottom"],[1,"mdi","mdi-chevron-right"],[1,"row","mt-3","mb-3"],["for","formName",1,"col-sm-2","col-form-label","font-medium"],[1,"badge","bg-secondary"],[1,"col-sm-10"],["id","formName","type","text","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text","pt-3","mt-3"],[1,"content-formbuilder","form-view"],[1,"list-group","elements"],["class","list-group-item d-flex justify-content-between align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"form-view"],[1,"row"],["class","element",3,"click",4,"ngFor","ngForOf"],[1,"formbuilder-button","gap-3","mt-1"],[1,"ana-button","btn",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"mdi","mdi-content-save-outline"],[1,"list-group-item","d-flex","justify-content-between","align-items-center",3,"click"],[1,"iconE",3,"ngClass"],[1,"btn","icon-button","ms-2",3,"click"],[1,"mdi","mdi-plus-circle-outline"],[1,"element",3,"click"],[1,"form-element","mb-3"],[1,"icon-button","ms-2","removeEl",3,"click"],[1,"mdi","mdi-close"]],template:function(r,o){r&1&&(S(0,"app-anagrafica-wrapper",0)(1,"div",1)(2,"h2"),ae(3,"span",2),B(4),A()(),S(5,"div",3)(6,"label",4),B(7,"Form Name "),S(8,"span",5),B(9,"Richiesto"),A()(),S(10,"div",6)(11,"input",7),Je("ngModelChange",function(a){return Xe(o.formName,a)||(o.formName=a),a}),A()()(),S(12,"div",8)(13,"h3"),ae(14,"span",2),B(15,"Anteprima form"),A()(),S(16,"div",9)(17,"ul",10),Ce(18,L4,6,2,"li",11),A(),S(19,"div",12)(20,"div",13),Ce(21,B4,6,1,"div",14),A()()(),S(22,"div",15)(23,"button",16),he("click",function(){return o.returnPrev()}),ae(24,"span",17),B(25," Indietro "),A(),S(26,"button",16),he("click",function(){return o.saveForm(o.formName)}),ae(27,"span",18),B(28," Salva "),A()()()),r&2&&(Q("caption",o.formTitle),U(4),ql("",o.formTitle," ",o.formName,""),U(7),Ye("ngModel",o.formName),U(7),Q("ngForOf",o.elements),U(3),Q("ngForOf",o.formElements))},dependencies:[rt,Qs,un,Dr,Qr,Kr,Xa,pu,IO],styles:[".content-formbuilder[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:normal;align-items:normal;align-content:normal}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{flex:0 1 auto}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:.3rem;text-align:start}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .iconE[_ngcontent-%COMP%]{margin-right:.4rem;line-height:.5rem}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;line-height:.5rem}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--bg-grey)}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]{flex:1 0 auto;margin-left:10px}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]{position:relative;display:flex;flex:1 0 auto;justify-content:space-between;align-content:center}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]{border:1px solid var(--border_color);width:100%;padding:.65rem;border-radius:.375rem}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .removeEl[_ngcontent-%COMP%]{color:red;font-size:1rem}.content-formbuilder[_ngcontent-%COMP%]   .no-evt[_ngcontent-%COMP%]{pointer-events:none}.formbuilder-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:end}"]});let t=e;return t})();var j4=new K("angularfire2.functions.origin"),U4=new K("angularfire2.functions.region"),jb=new K("angularfire2.functions.use-emulator"),Ub=(()=>{class t{httpsCallable;constructor(n,i,r,o,s,a,l,u){let d=l,f=te(void 0).pipe(Jt(o.outsideAngular),Ge(()=>import("./chunk-UGZKZQLK.js")),J(()=>xo(n,r,i)),J(m=>aa(`${m.name}.functions.${s||a}`,"AngularFireFunctions",m.name,()=>{let _;if(s&&a)throw new Error("REGION and ORIGIN can't be used at the same time.");return _=m.functions(s||a||void 0),d&&_.useEmulator(...d),_},[s,a,d])),Ts({bufferSize:1,refCount:!1}));return this.httpsCallable=(m,_)=>D=>Me(f).pipe(Jt(o.insideAngular),Ge(T=>T.httpsCallable(m,_)(D)),J(T=>T.data)),Gh(this,f,r)}static \u0275fac=function(i){return new(i||t)($(Ir),$(Tr,8),$(Ie),$(Ao),$(U4,8),$(j4,8),$(jb,8),$(ji,8))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),xO=(()=>{class t{constructor(){Pt.registerVersion("angularfire",Mn.full,"fn-compat")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[Ub]})}return t})();var OO=(()=>{let e=class e{constructor(){this.api=Er.BASE_API_URL,this.isLoginUser=!1,this.firestore=V(lu),this.httpClient=V(J_),this.auth=dm(V(sa)),this.functions=V(Ub),this.apiFire="https://us-central1-comemivesto-5e5f9.cloudfunctions.net/api"}get httpOptions(){return{headers:new Bi().set("Authorization","Bearer "+this.token).set("Content-Type","application/x-www-form-urlencoded; charset=UTF-8").set("Content-Type","application/json; charset=utf-8"),params:new ui}}get InfoUtenteConnesso(){let i=sessionStorage.getItem("utenteConnesso")??"";return JSON.parse(i)}getUsers(){return this.firestore.collection("users").valueChanges().pipe(J(i=>i))}isLoggedUser(){return this.isExistsUsers().pipe(J(i=>i&&i.id&&!i.sospeso))}isExistsUsers(){let i=Er.BASE_API_URL+"Account/GetUserInfo",r=this.httpOptions;return this.httpClient.get(i,r)}loginUser(i){let r=Er.BASE_API_URL+"Token/login",o=this.httpOptions;return this.httpClient.post(r,i,o)}LogOut(){return O(this,null,function*(){let i=Er.BASE_API_URL+"Token/Logout",r=this.httpOptions,o=this.httpClient.get(i,r);return yield Cl(o)})}clearSessionStorage(){if(sessionStorage.length>0)for(let r in sessionStorage)sessionStorage.removeItem(r)}set token(i){sessionStorage.setItem("token",i),this.sessionToken=i}get token(){return sessionStorage.getItem("token")??""}sendPasswordFirebase(i){return O(this,null,function*(){try{return yield um(this.auth,i),!0}catch{return!1}})}disabledUsersFirebase(i){return O(this,null,function*(){let r=`${this.apiFire}/users/disable/${i}`,o={uid:i};try{let s=this.httpClient.post(r,o),a=yield Cl(s);return console.log(a),!0}catch(s){return console.error("Errore nella disabilitazione dell'utente:",s),!1}})}RecuperaPassword(i){return O(this,null,function*(){let r=Er.BASE_API_URL+"Account/RecuperaPassword?username="+i,o=this.httpOptions,s=this.httpClient.get(r,o);return yield Cl(s)})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $4(t,e){if(t&1){let n=Qe();S(0,"li",3),he("dblclick",function(){let r=ue(n).$implicit,o=ee();return de(o.editUser(r))}),S(1,"div",4)(2,"span",5),ae(3,"img",6),A(),B(4),A(),S(5,"div",7)(6,"button",8),ae(7,"span",9),A(),S(8,"ul",10)(9,"li")(10,"button",11),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.editUser(r))}),ae(11,"span",12),B(12," Modifica "),A()(),S(13,"li")(14,"button",11),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.deleteUser(r))}),ae(15,"span",13),B(16," Elimina "),A()(),S(17,"li")(18,"button",11),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.disableUser(r.uid))}),ae(19,"span",14),B(20," Disabilita "),A()(),S(21,"li")(22,"button",11),he("click",function(){let r=ue(n).$implicit,o=ee();return de(o.sendPasswordReset(r))}),ae(23,"span",15),B(24," Invia Password "),A()()()()()}if(t&2){let n=e.$implicit;U(3),Q("src",n.photoURL||"https://ionicframework.com/docs/img/demos/avatar.svg",bC)("alt",n.name),U(),ql(" ",n.displayName||n.name," ",n.email," ")}}var RO=(()=>{let e=class e{constructor(){this.subtitle="Elenco utenti registrati in app",this.userService=V(OO),this.propertiesModal=V(Yr)}ngOnInit(){this.users$=this.userService.getUsers(),this.users$.subscribe(i=>{this.users=i})}deleteUser(i){throw new Error("Method not implemented.")}editUser(i){this.selectedUser=i;let r=Math.random().toString().replace("0.",""),o={service:"profileForm",editData:this.selectedUser};this.propertiesModal.setNewPopUp(r,"DynamicFormComponent",null,800,null,o,!1,!0,"Modifica Utente","",!1),this.propertiesModal.outputComponent.subscribe(s=>{s.guid==r&&s.name=="submitForm",s.guid==r&&s.name=="cancelForm"&&(this.selectedUser=void 0,this.propertiesModal.destroyCurrentOpenPopUpByGuid(r))})}createNewuser(){throw new Error("Method not implemented.")}sendPasswordReset(i){return O(this,null,function*(){(yield this.userService.sendPasswordFirebase(i.email))&&Ya(`Email di reset inviata a ${i.email}`,"Attenzione!")})}disableUser(i){throw this.userService.disabledUsersFirebase(i),new Error("Method not implemented.")}updateUser(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-users"]],standalone:!0,features:[xe],decls:3,vars:5,consts:[[3,"emittEventButton","caption","subTitle","tip","addButtonShow"],[1,"list-group","form-list"],["class","form-list-item list-group-item d-flex justify-content-between align-items-center",3,"dblclick",4,"ngFor","ngForOf"],[1,"form-list-item","list-group-item","d-flex","justify-content-between","align-items-center",3,"dblclick"],[1,"profile-info"],[1,"img-thumbnail","profileImage"],[1,"",3,"src","alt"],[1,"dropdown"],[1,"btn","icon-button"],[1,"mdi","mdi-dots-vertical"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],[1,"btn","icon-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"mdi","mdi-close","del"],[1,"mdi","mdi-lock-off-outline"],[1,"mdi","mdi-lock-reset"]],template:function(r,o){r&1&&(S(0,"app-anagrafica-wrapper",0),he("emittEventButton",function(){return o.createNewuser()}),S(1,"ul",1),Ce(2,$4,25,4,"li",2),A()()),r&2&&(Q("caption","Elenco Utenti")("subTitle",o.subtitle)("tip","Gestisci il profilo utente, resetta la password,sospendi....")("addButtonShow",!0),U(2),Q("ngForOf",o.users))},dependencies:[rt,un,Qr,Dr],styles:[".profile-info[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:flex-start;align-items:center;flex-direction:row}.profile-info[_ngcontent-%COMP%]   .profileImage[_ngcontent-%COMP%]{height:50px;overflow:hidden;display:block;width:50px;position:relative;border-radius:900px;padding:0;margin-right:.333rem}.profile-info[_ngcontent-%COMP%]   .profileImage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;-o-object-fit:cover;object-fit:cover;top:0;width:100%;height:100%}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{display:none;right:0}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}"]});let t=e;return t})();var $b=[{path:"dashboard",component:LT},{path:"utenti",component:RO},{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"forms",component:Vx},{path:"form-builder/:id",component:AO}],wee=Lh($b);var PO={providers:[Lh($b),{provide:jb,useValue:["localhost",4e3]},e_(JT.initializeApp(Er.firebase),kx,ZT,xO,VT,qI)]};var NO=(()=>{let e=class e{constructor(){}ngOnInit(){this.dateCopy=new Date}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-footer"]],standalone:!0,features:[xe],decls:11,vars:1,consts:[["id","footer",1,"footer"],[1,"content"],["src","../../../assets/images/logo_sx.png",1,"sx-logo"],[1,"text","indent"],[1,""],[1,"text","text-end","px-2"]],template:function(r,o){r&1&&(S(0,"footer",0)(1,"div",1),ae(2,"img",2),S(3,"div",3)(4,"h2",4),B(5),A()(),S(6,"div",5)(7,"p")(8,"span"),B(9,"Partita IVA: "),A(),ae(10,"span"),A()()()()),r&2&&(U(5),St("\xA9 ",o.dateCopy," Come mi vesto srl "))},styles:[".footer[_ngcontent-%COMP%]{background-color:var(--primary);width:100%;padding:5px;min-height:var(--height_footer)}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{max-width:var(--width_container);margin:0 auto;color:#fff;display:flex;flex-direction:row;flex-wrap:nowrap;align-content:center;justify-content:space-between;align-items:center}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#fff;width:100%;padding-left:40px}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400;margin:0;text-align:left;font-size:10px;color:#fff}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 2px;font-size:12px}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .sx-logo[_ngcontent-%COMP%]{margin-top:1px;width:fit-content;height:40px;display:block}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dx-logo[_ngcontent-%COMP%]{width:fit-content;margin-top:10px;height:25px;display:block}"]});let t=e;return t})();var kO=(()=>{let e=class e{constructor(){}ngOnInit(){this.renderHeader()}renderHeader(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-header"]],standalone:!0,features:[xe],decls:16,vars:0,consts:[["id","header",1,"header"],[1,"header-container"],[1,"item-left"],[1,"item-center"],["aria-label","breadcrumb",1,"itm-container","justify-content-center"],[1,"nav"],[1,"nav-item"],["href","/",1,"nav-link","active"],["href","/form-list",1,"nav-link"],["href","/utenti",1,"nav-link"],[1,"item-right"]],template:function(r,o){r&1&&(S(0,"header",0)(1,"div",1),ae(2,"div",2),S(3,"div",3)(4,"nav",4)(5,"ul",5)(6,"li",6)(7,"a",7),B(8,"Home"),A()(),S(9,"li",6)(10,"a",8),B(11,"Gestione form"),A()(),S(12,"li",6)(13,"a",9),B(14,"Gestione Utenti"),A()()()()(),ae(15,"div",10),A()())},styles:[".header[_ngcontent-%COMP%]{background-color:var(--primary);height:65px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{max-width:var(--width_container);max-height:var(--header_height);margin:auto;display:flex;flex-direction:row;flex-wrap:wrap;align-content:center;justify-content:space-between;align-items:center;color:var(--link-nav)}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-center[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%]{margin:0 5px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{padding-left:10px;width:150px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo-image[_ngcontent-%COMP%]{max-width:100%}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:var(--link-nav)!important}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .img-profile[_ngcontent-%COMP%]{max-width:100%;width:30px;height:30px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{position:absolute;top:35px;left:-190px;z-index:10;margin:0;padding:10px 5px;min-width:226px;background-color:#c8ced6;border:1px solid #c8ced6;box-shadow:0 16px 18px #0404071a;border-radius:4px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{display:block;color:var(--blueSoft)!important;text-align:left;line-height:22px;padding:6px 7px;text-transform:none;font-size:13px;letter-spacing:normal;position:relative;display:inline-block}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:9px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:12px;display:inline-block}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active, .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:visited, .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{background:transparent}"]});let t=e;return t})();var G4=["containerComponent"],H4=(t,e)=>({display:t,"z-index":e}),z4=t=>({"position-bottom":t}),q4=(t,e)=>({"max-width":t,width:e});function W4(t,e){if(t&1){let n=Qe();S(0,"app-caption",6),he("emettiChiusura",function(r){ue(n);let o=ee();return de(o.emettiChiusura(r))}),A()}if(t&2){let n=ee();Q("caption",n.titlePopUp)("isClosable",n.isClosablePopUp)("cssClass","modal")("help","")}}function K4(t,e){if(t&1){let n=Qe();S(0,"app-caption",7),he("emettiChiusura",function(r){ue(n);let o=ee();return de(o.emettiChiusura(r))}),A()}if(t&2){let n=ee();Q("isFooter",n.showCaptionFooter)}}var FO=(()=>{let e=class e{constructor(i){this.popUpService=i,this.outputEmit=new ge,this.showCaptionHeader=!1,this.showCaptionFooter=!1,this.isPanelVisible=!1,this.zIndex=500,this.popUpWidth=null,this.isClosablePopUp=!1,this.position="center"}ngOnChanges(i){this.infoPopUp.popUpWidth&&(this.popUpWidth=this.infoPopUp.popUpWidth+"px"),this.infoPopUp.showCaptionHeader&&(this.showCaptionHeader=this.infoPopUp.showCaptionHeader),this.infoPopUp.showCaptionFooter&&(this.showCaptionFooter=this.infoPopUp.showCaptionFooter),this.infoPopUp.title&&(this.titlePopUp=this.infoPopUp.title),this.infoPopUp.class&&(this.classFade=this.infoPopUp.class)}get getMaxZIndex(){let i=document.querySelectorAll(".modal"),r=[];return i.forEach(o=>{o.classList.contains("modal-dialog")||r.push(parseFloat(window.getComputedStyle(o).zIndex))}),Math.max(...r);return Math.max(...Array.from(document.querySelectorAll("div.dx-overlay-content"),o=>parseFloat(window.getComputedStyle(o).zIndex)).filter(o=>!Number.isNaN(o)),0)}ngOnInit(){return O(this,null,function*(){this.isPanelVisible=!0,this.zIndexModalDialog=this.getMaxZIndex+1;let i=this.infoPopUp.componentName;this.accessoringData=this.infoPopUp.accessoringData,this.position=this.infoPopUp.position;let r=this.popUpService.getComponentByName(i),o=this.containerComponent.createComponent(r);o.instance.itemData=this.infoPopUp.dataToSend,o.instance.cssClass="modal-content ",this.componentName=i,this.idPopUp=this.infoPopUp.id,this.infoPopUp.popUpWidth&&(this.popUpWidth=this.infoPopUp.popUpWidth+"px"),this.infoPopUp.showCaptionHeader&&(this.showCaptionHeader=this.infoPopUp.showCaptionHeader),this.infoPopUp.showCaptionFooter&&(this.showCaptionFooter=this.infoPopUp.showCaptionFooter),this.infoPopUp.title&&(this.titlePopUp=this.infoPopUp.title),this.infoPopUp.class&&(this.classFade=this.infoPopUp.class),this.isClosablePopUp=typeof this.infoPopUp.isClosable<"u"?this.infoPopUp.isClosable:!1;let s=o.instance;if(typeof this.infoPopUp.instancedData<"u"){let a=this.infoPopUp.instancedData;for(let l in a)s[l]=a[l]}for(let a in s)o.instance[a]instanceof ge&&o.instance[a].subscribe(l=>{try{let u;typeof l=="boolean"?(u={componentName:i,accessoringData:this.accessoringData,guid:this.idPopUp,name:a},l=u):(l.componentName=i,l.accessoringData=this.accessoringData,l.guid=this.idPopUp,typeof l.name>"u"&&(l.name=a))}catch{}finally{this.popUpService.setOutputComponent(l)}})})}ngAfterViewInit(){}emettiChiusura(i){this.idPopUp?this.popUpService.destroyCurrentOpenPopUpByGuid(this.idPopUp):this.popUpService.destroyCurrentOpenPopUp(this.componentName),this.popUpService.destroyOutputComponent()}};e.\u0275fac=function(r){return new(r||e)(se(Yr))},e.\u0275cmp=Ae({type:e,selectors:[["app-modal-popup-content"]],viewQuery:function(r,o){if(r&1&&Ws(G4,7,zn),r&2){let s;bo(s=Eo())&&(o.containerComponent=s.first)}},inputs:{infoPopUp:"infoPopUp",index:"index",componentName:"componentName",classePopup:"classePopup"},outputs:{outputEmit:"outputEmit"},standalone:!0,features:[an,xe],decls:6,vars:16,consts:[["containerComponent",""],["tabindex","-1","role","dialog","aria-hidden","true",1,"modal","popup",3,"ngStyle","ngClass","id"],[1,"modal-dialog","formEditPopup",3,"id","ngStyle"],[3,"caption","isClosable","cssClass","help","emettiChiusura",4,"ngIf"],[1,"modal-content"],[3,"isFooter","emettiChiusura",4,"ngIf"],[3,"emettiChiusura","caption","isClosable","cssClass","help"],[3,"emettiChiusura","isFooter"]],template:function(r,o){r&1&&(S(0,"div",1)(1,"div",2),Ce(2,W4,1,4,"app-caption",3),ae(3,"div",4,0),Ce(5,K4,1,1,"app-caption",5),A()()),r&2&&(Q("ngStyle",oh(8,H4,o.isPanelVisible?"block":"none",o.zIndexModalDialog))("ngClass",B_(11,z4,o.position=="bottom"))("ngClass",o.classFade)("id",o.idPopUp),U(),Q("id",o.idPopUp)("ngStyle",oh(13,q4,o.popUpWidth?o.popUpWidth:"",o.popUpWidth?o.popUpWidth:"")),U(),Q("ngIf",o.showCaptionHeader),U(3),Q("ngIf",o.showCaptionFooter))},dependencies:[jh,rt,Qs,ci,NI],styles:[".popup{z-index:500;pointer-events:auto;background-color:#fffc}  .popup .modal-dialog{max-width:90%;border:1px solid var(--primary);background:#fff;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px #0000002d;border-radius:4px;pointer-events:auto;width:fit-content}  .popup .modal-dialog .caption-container.modal{border:1px solid var(--border_color)}  .popup .modal-dialog .modal-content{border:none;box-sizing:border-box;background:transparent}  .popup .modal-dialog .modal-content .formEdit{background:var(--bg-grey)}  .position-bottom .modal-dialog{z-index:501;bottom:2rem;left:0;right:0;position:fixed;max-width:96%;background:transparent}.fade-in-fwd[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fade-in-fwd .4s cubic-bezier(.39,.575,.565,1) both;animation:_ngcontent-%COMP%_fade-in-fwd .4s cubic-bezier(.39,.575,.565,1) both}@-webkit-keyframes _ngcontent-%COMP%_fade-in-fwd{0%{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@keyframes _ngcontent-%COMP%_fade-in-fwd{0%{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}.fade-out-bck[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fade-out-bck .7s cubic-bezier(.25,.46,.45,.94) both;animation:_ngcontent-%COMP%_fade-out-bck .7s cubic-bezier(.25,.46,.45,.94) both}@keyframes _ngcontent-%COMP%_fade-out-bck{0%{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}to{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}}.slide-center[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_slide-center-fw .7s cubic-bezier(.25,.46,.45,.94) none;animation:_ngcontent-%COMP%_slide-center-fw .7s cubic-bezier(.25,.46,.45,.94) none}@keyframes _ngcontent-%COMP%_slide-center-fw{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}to{-webkit-transform:translateZ(160px);transform:translateZ(160px)}}  .modal-content .modal-data-grid-wrapper{margin:auto}"]});let t=e;return t})();function Q4(t,e){if(t&1&&(S(0,"div"),ae(1,"app-modal-popup-content",2),A()),t&2){let n=e.$implicit,i=e.index,r=ee();U(),Q("infoPopUp",n)("index",i)("componentName",n.componentName)("classePopup",r.classe)}}var VO=(()=>{let e=class e{constructor(){this.popups=[],this.classSlideCenter="slide-center",this.classFadeIn="fade-in-fwd",this.popUpService=V(Yr)}ngOnInit(){this.popUpService.popupsSet.subscribe(i=>{i.forEach((r,o)=>{r.action=="added"&&(r.action="setted",r.class=this.classSlideCenter,this.popups.push(r)),r.action=="update"&&(r.action="setted",r.class="fade-out-bck",this.popups.splice(o,1),r.class=this.classSlideCenter,setTimeout(()=>{this.popups.push(r)},500)),r.action=="remove"&&(r.class="fade-out-bck",setTimeout(()=>{this.popups.splice(o,1)},300))})})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-modal-popup-wrapper"]],standalone:!0,features:[xe],decls:2,vars:1,consts:[[1,"row"],[4,"ngFor","ngForOf"],[3,"infoPopUp","index","componentName","classePopup"]],template:function(r,o){r&1&&(S(0,"div",0),Ce(1,Q4,2,4,"div",1),A()),r&2&&(U(),Q("ngForOf",o.popups))},dependencies:[rt,un,FO]});let t=e;return t})();var LO=(()=>{let e=class e{constructor(){this.isClose=!1,this.isLogin=!1,this.idTipoUtente=-1,this.subMenu=null,this.showSubMenu=!1}ngOnInit(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-container"]],standalone:!0,features:[xe],decls:8,vars:0,consts:[[1,"mi-container"],["id","horizontalMenucontainer",1,"horizontalMenucontainer"],[1,"container","no-padding","ana-container"]],template:function(r,o){r&1&&(S(0,"main",0),zs(1),ae(2,"app-header")(3,"div",1),qs(),S(4,"div",2),ae(5,"router-outlet")(6,"app-modal-popup-wrapper"),A(),ae(7,"app-footer"),A())},dependencies:[rt,jy,NO,kO,VO],styles:[".horizontalMenucontainer[_ngcontent-%COMP%]{margin:auto;height:var(--height_menuFunzioni)}.container[_ngcontent-%COMP%], .horizontalMenucontainer[_ngcontent-%COMP%]{max-width:var(--width_container)}"]});let t=e;return t})();var BO=(()=>{let e=class e{constructor(){this.title="Admin"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-root"]],standalone:!0,features:[xe],decls:1,vars:0,template:function(r,o){r&1&&ae(0,"app-container")},dependencies:[LO]});let t=e;return t})();eT(BO,PO).catch(t=>console.error(t));
