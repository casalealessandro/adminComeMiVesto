import{a as C1,b as vu,c as I1,d as T1,e as Yp,f as Jp}from"./chunk-HCJFOUJG.js";import"./chunk-VKYYVJIS.js";import{A as Je,B as Qr,C as Kn,D as bu,E as uc,H as R1,I as Eu,J as Du,K as gn,L as xt,a as q,b as Oe,c as Wp,d as x,e as S1,i as qp,j as M1,k as lc,q as Kp,r as wu,s as A1,t as x1,v as Qp}from"./chunk-7UO3AAGR.js";var O1=null;var Zp=1,Xp=Symbol("SIGNAL");function Pe(t){let e=O1;return O1=t,e}var N1={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function UR(t){if(!(nm(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Zp)){if(!t.producerMustRecompute(t)&&!em(t)){t.dirty=!1,t.lastCleanEpoch=Zp;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Zp}}function P1(t){return t&&(t.nextProducerIndex=0),Pe(t)}function k1(t,e){if(Pe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(nm(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)tm(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function em(t){Cu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(UR(n),i!==n.version))return!0}return!1}function F1(t){if(Cu(t),nm(t))for(let e=0;e<t.producerNode.length;e++)tm(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function tm(t,e){if($R(t),Cu(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)tm(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Cu(r),r.producerIndexOfThis[i]=e}}function nm(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Cu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function $R(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function GR(){throw new Error}var HR=GR;function V1(t){HR=t}function oe(t){return typeof t=="function"}function ns(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Iu=ns(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Yr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var at=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(oe(i))try{i()}catch(o){e=o instanceof Iu?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{L1(o)}catch(s){e=e??[],s instanceof Iu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Iu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)L1(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Yr(n,e)}remove(e){let{_finalizers:n}=this;n&&Yr(n,e),e instanceof t&&e._removeParent(this)}};at.EMPTY=(()=>{let t=new at;return t.closed=!0,t})();var im=at.EMPTY;function Tu(t){return t instanceof at||t&&"closed"in t&&oe(t.remove)&&oe(t.add)&&oe(t.unsubscribe)}function L1(t){oe(t)?t():t.unsubscribe()}var An={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var is={setTimeout(t,e,...n){let{delegate:i}=is;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=is;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Su(t){is.setTimeout(()=>{let{onUnhandledError:e}=An;if(e)e(t);else throw t})}function Jr(){}var B1=rm("C",void 0,void 0);function j1(t){return rm("E",void 0,t)}function U1(t){return rm("N",t,void 0)}function rm(t,e,n){return{kind:t,value:e,error:n}}var Zr=null;function rs(t){if(An.useDeprecatedSynchronousErrorHandling){let e=!Zr;if(e&&(Zr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=Zr;if(Zr=null,n)throw i}}else t()}function $1(t){An.useDeprecatedSynchronousErrorHandling&&Zr&&(Zr.errorThrown=!0,Zr.error=t)}var Xr=class extends at{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tu(e)&&e.add(this)):this.destination=qR}static create(e,n,i){return new xn(e,n,i)}next(e){this.isStopped?sm(U1(e),this):this._next(e)}error(e){this.isStopped?sm(j1(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sm(B1,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},zR=Function.prototype.bind;function om(t,e){return zR.call(t,e)}var am=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Mu(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Mu(i)}else Mu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Mu(n)}}},xn=class extends Xr{constructor(e,n,i){super();let r;if(oe(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&An.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&om(e.next,o),error:e.error&&om(e.error,o),complete:e.complete&&om(e.complete,o)}):r=e}this.destination=new am(r)}};function Mu(t){An.useDeprecatedSynchronousErrorHandling?$1(t):Su(t)}function WR(t){throw t}function sm(t,e){let{onStoppedNotification:n}=An;n&&is.setTimeout(()=>n(t,e))}var qR={closed:!0,next:Jr,error:WR,complete:Jr};var os=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rt(t){return t}function cm(...t){return lm(t)}function lm(t){return t.length===0?Rt:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=QR(n)?n:new xn(n,i,r);return rs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=G1(i),new i((r,o)=>{let s=new xn({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[os](){return this}pipe(...n){return lm(n)(this)}toPromise(n){return n=G1(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function G1(t){var e;return(e=t??An.Promise)!==null&&e!==void 0?e:Promise}function KR(t){return t&&oe(t.next)&&oe(t.error)&&oe(t.complete)}function QR(t){return t&&t instanceof Xr||KR(t)&&Tu(t)}function um(t){return oe(t?.lift)}function me(t){return e=>{if(um(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(t,e,n,i,r){return new dm(t,e,n,i,r)}var dm=class extends Xr{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ss(){return me((t,e)=>{let n=null;t._refCount++;let i=ce(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var as=class extends ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,um(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new at;let n=this.getSubject();e.add(this.source.subscribe(ce(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=at.EMPTY)}return e}refCount(){return ss()(this)}};var H1=ns(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=(()=>{class t extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new Au(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new H1}next(n){rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?im:(this.currentObservers=null,o.push(n),new at(()=>{this.currentObservers=null,Yr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return t.create=(e,n)=>new Au(e,n),t})(),Au=class extends ke{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:im}};var ct=class extends ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var dc={now(){return(dc.delegate||Date).now()},delegate:void 0};var xu=class extends ke{constructor(e=1/0,n=1/0,i=dc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}};var Ru=class extends at{constructor(e,n){super()}schedule(e,n=0){return this}};var hc={setInterval(t,e,...n){let{delegate:i}=hc;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=hc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var cs=class extends Ru{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return hc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&hc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Yr(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ls=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};ls.now=dc.now;var us=class extends ls{constructor(e,n=ls.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var ds=new us(cs),hm=ds;var Ou=class extends cs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var Nu=class extends us{};var fm=new Nu(Ou);var bt=new ae(t=>t.complete());function Pu(t){return t&&oe(t.schedule)}function pm(t){return t[t.length-1]}function Yi(t){return oe(pm(t))?t.pop():void 0}function Qn(t){return Pu(pm(t))?t.pop():void 0}function z1(t,e){return typeof pm(t)=="number"?t.pop():e}var hs=t=>t&&typeof t.length=="number"&&typeof t!="function";function ku(t){return oe(t?.then)}function Fu(t){return oe(t[os])}function Vu(t){return Symbol.asyncIterator&&oe(t?.[Symbol.asyncIterator])}function Lu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function YR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Bu=YR();function ju(t){return oe(t?.[Bu])}function Uu(t){return I1(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield vu(n.read());if(r)return yield vu(void 0);yield yield vu(i)}}finally{n.releaseLock()}})}function $u(t){return oe(t?.getReader)}function Me(t){if(t instanceof ae)return t;if(t!=null){if(Fu(t))return JR(t);if(hs(t))return ZR(t);if(ku(t))return XR(t);if(Vu(t))return W1(t);if(ju(t))return eO(t);if($u(t))return tO(t)}throw Lu(t)}function JR(t){return new ae(e=>{let n=t[os]();if(oe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ZR(t){return new ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function XR(t){return new ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Su)})}function eO(t){return new ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function W1(t){return new ae(e=>{nO(t,e).catch(n=>e.error(n))})}function tO(t){return W1(Uu(t))}function nO(t,e){var n,i,r,o;return C1(this,void 0,void 0,function*(){try{for(n=T1(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function tn(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function Wt(t,e=0){return me((n,i)=>{n.subscribe(ce(i,r=>tn(i,t,()=>i.next(r),e),()=>tn(i,t,()=>i.complete(),e),r=>tn(i,t,()=>i.error(r),e)))})}function Rn(t,e=0){return me((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function q1(t,e){return Me(t).pipe(Rn(e),Wt(e))}function K1(t,e){return Me(t).pipe(Rn(e),Wt(e))}function Q1(t,e){return new ae(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function Y1(t,e){return new ae(n=>{let i;return tn(n,e,()=>{i=t[Bu](),tn(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>oe(i?.return)&&i.return()})}function Gu(t,e){if(!t)throw new Error("Iterable cannot be null");return new ae(n=>{tn(n,e,()=>{let i=t[Symbol.asyncIterator]();tn(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function J1(t,e){return Gu(Uu(t),e)}function Z1(t,e){if(t!=null){if(Fu(t))return q1(t,e);if(hs(t))return Q1(t,e);if(ku(t))return K1(t,e);if(Vu(t))return Gu(t,e);if(ju(t))return Y1(t,e);if($u(t))return J1(t,e)}throw Lu(t)}function Te(t,e){return e?Z1(t,e):Me(t)}function X(...t){let e=Qn(t);return Te(t,e)}function fs(t,e){let n=oe(t)?t:()=>t,i=r=>r.error(n());return new ae(e?r=>e.schedule(i,0,r):i)}function mm(t){return!!t&&(t instanceof ae||oe(t.lift)&&oe(t.subscribe))}var ln=ns(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Hu(t,e){let n=typeof e=="object";return new Promise((i,r)=>{let o=!1,s;t.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):n?i(e.defaultValue):r(new ln)}})})}function gm(t,e){let n=typeof e=="object";return new Promise((i,r)=>{let o=new xn({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{n?i(e.defaultValue):r(new ln)}});t.subscribe(o)})}function X1(t){return t instanceof Date&&!isNaN(t)}function K(t,e){return me((n,i)=>{let r=0;n.subscribe(ce(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:iO}=Array;function rO(t,e){return iO(e)?t(...e):t(e)}function ps(t){return K(e=>rO(t,e))}var{isArray:oO}=Array,{getPrototypeOf:sO,prototype:aO,keys:cO}=Object;function zu(t){if(t.length===1){let e=t[0];if(oO(e))return{args:e,keys:null};if(lO(e)){let n=cO(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function lO(t){return t&&typeof t=="object"&&sO(t)===aO}function Wu(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function fc(...t){let e=Qn(t),n=Yi(t),{args:i,keys:r}=zu(t);if(i.length===0)return Te([],e);let o=new ae(uO(i,e,r?s=>Wu(r,s):Rt));return n?o.pipe(ps(n)):o}function uO(t,e,n=Rt){return i=>{eE(e,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)eE(e,()=>{let u=Te(t[c],e),d=!1;u.subscribe(ce(i,f=>{o[c]=f,d||(d=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function eE(t,e,n){t?tn(n,t,e):e()}function tE(t,e,n,i,r,o,s,a){let c=[],u=0,d=0,f=!1,m=()=>{f&&!c.length&&!u&&e.complete()},_=T=>u<i?D(T):c.push(T),D=T=>{o&&e.next(T),u++;let S=!1;Me(n(T,d++)).subscribe(ce(e,k=>{r?.(k),o?_(k):e.next(k)},()=>{S=!0},void 0,()=>{if(S)try{for(u--;c.length&&u<i;){let k=c.shift();s?tn(e,s,()=>D(k)):D(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(ce(e,_,()=>{f=!0,m()})),()=>{a?.()}}function tt(t,e,n=1/0){return oe(e)?tt((i,r)=>K((o,s)=>e(i,o,r,s))(Me(t(i,r))),n):(typeof e=="number"&&(n=e),me((i,r)=>tE(i,r,t,n)))}function pc(t=1/0){return tt(Rt,t)}function nE(){return pc(1)}function Ji(...t){return nE()(Te(t,Qn(t)))}function qu(t){return new ae(e=>{Me(t()).subscribe(e)})}function _m(...t){let e=Yi(t),{args:n,keys:i}=zu(t),r=new ae(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;Me(n[d]).subscribe(ce(o,m=>{f||(f=!0,u--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(i?Wu(i,a):a),o.complete())}))}});return e?r.pipe(ps(e)):r}var dO=["addListener","removeListener"],hO=["addEventListener","removeEventListener"],fO=["on","off"];function _n(t,e,n,i){if(oe(n)&&(i=n,n=void 0),i)return _n(t,e,n).pipe(ps(i));let[r,o]=gO(t)?hO.map(s=>a=>t[s](e,a,n)):pO(t)?dO.map(iE(t,e)):mO(t)?fO.map(iE(t,e)):[];if(!r&&hs(t))return tt(s=>_n(s,e,n))(Me(t));if(!r)throw new TypeError("Invalid event target");return new ae(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function iE(t,e){return n=>i=>t[n](e,i)}function pO(t){return oe(t.addListener)&&oe(t.removeListener)}function mO(t){return oe(t.on)&&oe(t.off)}function gO(t){return oe(t.addEventListener)&&oe(t.removeEventListener)}function ym(t=0,e,n=hm){let i=-1;return e!=null&&(Pu(e)?n=e:i=e),new ae(r=>{let o=X1(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Ku(...t){let e=Qn(t),n=z1(t,1/0),i=t;return i.length?i.length===1?Me(i[0]):pc(n)(Te(i,e)):bt}var{isArray:_O}=Array;function Qu(t){return t.length===1&&_O(t[0])?t[0]:t}function Ze(t,e){return me((n,i)=>{let r=0;n.subscribe(ce(i,o=>t.call(e,o,r++)&&i.next(o)))})}function vm(...t){return t=Qu(t),t.length===1?Me(t[0]):new ae(yO(t))}function yO(t){return e=>{let n=[];for(let i=0;n&&!e.closed&&i<t.length;i++)n.push(Me(t[i]).subscribe(ce(e,r=>{if(n){for(let o=0;o<n.length;o++)o!==i&&n[o].unsubscribe();n=null}e.next(r)})))}}function mc(...t){let e=Yi(t),n=Qu(t);return n.length?new ae(i=>{let r=n.map(()=>[]),o=n.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<n.length;s++)Me(n[s]).subscribe(ce(i,a=>{if(r[s].push(a),r.every(c=>c.length)){let c=r.map(u=>u.shift());i.next(e?e(...c):c),r.some((u,d)=>!u.length&&o[d])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):bt}function Zi(t){return me((e,n)=>{let i=null,r=!1,o;i=e.subscribe(ce(n,void 0,void 0,s=>{o=Me(t(s,Zi(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function rE(t,e,n,i,r){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(ce(s,d=>{let f=u++;c=a?t(c,d,f):(a=!0,d),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function Xi(t,e){return oe(e)?tt(t,e,1):tt(t,1)}function er(t){return me((e,n)=>{let i=!1;e.subscribe(ce(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function nn(t){return t<=0?()=>bt:me((e,n)=>{let i=0;e.subscribe(ce(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function wm(t){return K(()=>t)}function Yu(t,e=Rt){return t=t??vO,me((n,i)=>{let r,o=!0;n.subscribe(ce(i,s=>{let a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function vO(t,e){return t===e}function Ju(t=wO){return me((e,n)=>{let i=!1;e.subscribe(ce(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function wO(){return new ln}function bm(...t){return e=>Ji(e,X(...t))}function wi(t){return me((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function yn(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Ze((r,o)=>t(r,o,i)):Rt,nn(1),n?er(e):Ju(()=>new ln))}function ms(t){return t<=0?()=>bt:me((e,n)=>{let i=[];e.subscribe(ce(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function Em(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Ze((r,o)=>t(r,o,i)):Rt,ms(1),n?er(e):Ju(()=>new ln))}function gc(){return me((t,e)=>{let n,i=!1;t.subscribe(ce(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function eo(t,e){return me(rE(t,e,arguments.length>=2,!0))}function oE(t={}){let{connector:e=()=>new ke,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,c,u=0,d=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},_=()=>{m(),s=c=void 0,d=f=!1},D=()=>{let T=s;_(),T?.unsubscribe()};return me((T,S)=>{u++,!f&&!d&&m();let k=c=c??e();S.add(()=>{u--,u===0&&!f&&!d&&(a=Dm(D,r))}),k.subscribe(S),!s&&u>0&&(s=new xn({next:H=>k.next(H),error:H=>{f=!0,m(),a=Dm(_,n,H),k.error(H)},complete:()=>{d=!0,m(),a=Dm(_,i),k.complete()}}),Me(T).subscribe(s))})(o)}}function Dm(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new xn({next:()=>{i.unsubscribe(),t()}});return Me(e(...n)).subscribe(i)}function gs(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,oE({connector:()=>new xu(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function tr(...t){let e=Qn(t);return me((n,i)=>{(e?Ji(t,n,e):Ji(t,n)).subscribe(i)})}function je(t,e){return me((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(ce(i,c=>{r?.unsubscribe();let u=0,d=o++;Me(t(c,d)).subscribe(r=ce(i,f=>i.next(e?e(c,f,d,u++):f),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Zu(t,e){return oe(e)?je(()=>t,e):je(()=>t)}function Ut(t){return me((e,n)=>{Me(t).subscribe(ce(n,()=>n.complete(),Jr)),!n.closed&&e.subscribe(n)})}function nt(t,e,n){let i=oe(t)||e||n?{next:t,error:e,complete:n}:t;return i?me((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(ce(o,c=>{var u;(u=i.next)===null||u===void 0||u.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,c),o.error(c)},()=>{var c,u;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):Rt}function Xu(...t){let e=Yi(t);return me((n,i)=>{let r=t.length,o=new Array(r),s=t.map(()=>!1),a=!1;for(let c=0;c<r;c++)Me(t[c]).subscribe(ce(i,u=>{o[c]=u,!a&&!s[c]&&(s[c]=!0,(a=s.every(Rt))&&(s=null))},Jr));n.subscribe(ce(i,c=>{if(a){let u=[c,...o];i.next(e?e(...u):u)}}))})}var $E="https://g.co/ng/security#xss",ie=class extends Error{constructor(e,n){super(Sd(e,n)),this.code=e}};function Sd(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function xc(t){return{toString:t}.toString()}var ed="__parameters__";function bO(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function GE(t,e,n){return xc(()=>{let i=bO(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(ed)?c[ed]:Object.defineProperty(c,ed,{value:[]})[ed];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var _c=globalThis;function Ge(t){for(let e in t)if(t[e]===Ge)return e;throw Error("Could not find renamed property on target object.")}function EO(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Kt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Kt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Bm(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var DO=Ge({__forward_ref__:Ge});function ti(t){return t.__forward_ref__=ti,t.toString=function(){return Kt(this())},t}function qt(t){return HE(t)?t():t}function HE(t){return typeof t=="function"&&t.hasOwnProperty(DO)&&t.__forward_ref__===ti}function Q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function rt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Md(t){return sE(t,WE)||sE(t,qE)}function zE(t){return Md(t)!==null}function sE(t,e){return t.hasOwnProperty(e)?t[e]:null}function CO(t){let e=t&&(t[WE]||t[qE]);return e||null}function aE(t){return t&&(t.hasOwnProperty(cE)||t.hasOwnProperty(IO))?t[cE]:null}var WE=Ge({\u0275prov:Ge}),cE=Ge({\u0275inj:Ge}),qE=Ge({ngInjectableDef:Ge}),IO=Ge({ngInjectorDef:Ge}),W=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KE(t){return t&&!!t.\u0275providers}var TO=Ge({\u0275cmp:Ge}),SO=Ge({\u0275dir:Ge}),MO=Ge({\u0275pipe:Ge}),AO=Ge({\u0275mod:Ge}),ld=Ge({\u0275fac:Ge}),yc=Ge({__NG_ELEMENT_ID__:Ge}),lE=Ge({__NG_ENV_ID__:Ge});function Es(t){return typeof t=="string"?t:t==null?"":String(t)}function xO(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Es(t)}function RO(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ie(-200,t)}function Fg(t,e){throw new ie(-201,!1)}var Ee=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ee||{}),jm;function QE(){return jm}function vn(t){let e=jm;return jm=t,e}function YE(t,e,n){let i=Md(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Ee.Optional)return null;if(e!==void 0)return e;Fg(t,"Injector")}var OO={},vc=OO,Um="__NG_DI_FLAG__",ud="ngTempTokenPath",NO="ngTokenPath",PO=/\n/gm,kO="\u0275",uE="__source",ws;function FO(){return ws}function nr(t){let e=ws;return ws=t,e}function VO(t,e=Ee.Default){if(ws===void 0)throw new ie(-203,!1);return ws===null?YE(t,void 0,e):ws.get(t,e&Ee.Optional?null:void 0,e)}function j(t,e=Ee.Default){return(QE()||VO)(qt(t),e)}function L(t,e=Ee.Default){return j(t,Ad(e))}function Ad(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function $m(t){let e=[];for(let n=0;n<t.length;n++){let i=qt(t[n]);if(Array.isArray(i)){if(i.length===0)throw new ie(900,!1);let r,o=Ee.Default;for(let s=0;s<i.length;s++){let a=i[s],c=LO(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(j(r,o))}else e.push(j(i))}return e}function JE(t,e){return t[Um]=e,t.prototype[Um]=e,t}function LO(t){return t[Um]}function BO(t,e,n,i){let r=t[ud];throw e[uE]&&r.unshift(e[uE]),t.message=jO(`
`+t.message,r,n,i),t[NO]=r,t[ud]=null,t}function jO(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==kO?t.slice(2):t;let r=Kt(e);if(Array.isArray(e))r=e.map(Kt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Kt(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(PO,`
  `)}`}var Ti=JE(GE("Optional"),8);var Vg=JE(GE("SkipSelf"),4);function Ds(t,e){let n=t.hasOwnProperty(ld);return n?t[ld]:null}function UO(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function $O(t){return t.flat(Number.POSITIVE_INFINITY)}function Lg(t,e){t.forEach(n=>Array.isArray(n)?Lg(n,e):e(n))}function ZE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function GO(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function HO(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function Bg(t,e,n){let i=Rc(t,e);return i>=0?t[i|1]=n:(i=~i,HO(t,i,e,n)),i}function Cm(t,e){let n=Rc(t,e);if(n>=0)return t[n|1]}function Rc(t,e){return zO(t,e,1)}function zO(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var Cs={},rn=[],Is=new W(""),XE=new W("",-1),eD=new W(""),hd=class{get(e,n=vc){if(n===vc){let i=new Error(`NullInjectorError: No provider for ${Kt(e)}!`);throw i.name="NullInjectorError",i}return n}},tD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(tD||{}),Zn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Zn||{}),Qt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Qt||{});function WO(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function Gm(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];KO(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function qO(t){return t===3||t===4||t===6}function KO(t){return t.charCodeAt(0)===64}function wc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?dE(t,n,r,null,e[++i]):dE(t,n,r,null,null))}}return t}function dE(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var nD="ng-template";function QO(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&WO(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(jg(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function jg(t){return t.type===4&&t.value!==nD}function YO(t,e,n){let i=t.type===4&&!n?nD:t.value;return e===i}function JO(t,e,n){let i=4,r=t.attrs,o=r!==null?eN(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!On(i)&&!On(c))return!1;if(s&&On(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!YO(t,c,n)||c===""&&e.length===1){if(On(i))return!1;s=!0}}else if(i&8){if(r===null||!QO(t,r,c,n)){if(On(i))return!1;s=!0}}else{let u=e[++a],d=ZO(c,r,jg(t),n);if(d===-1){if(On(i))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=r[d+1].toLowerCase(),i&2&&u!==f){if(On(i))return!1;s=!0}}}}return On(i)||s}function On(t){return(t&1)===0}function ZO(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return tN(e,t)}function iD(t,e,n=!1){for(let i=0;i<e.length;i++)if(JO(t,e[i],n))return!0;return!1}function XO(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function eN(t){for(let e=0;e<t.length;e++){let n=t[e];if(qO(n))return e}return t.length}function tN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function nN(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function hE(t,e){return t?":not("+e.trim()+")":e}function iN(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!On(s)&&(e+=hE(o,r),r=""),i=s,o=o||!On(i);n++}return r!==""&&(e+=hE(o,r)),e}function rN(t){return t.map(iN).join(",")}function oN(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!On(r))break;r=o}i++}return{attrs:e,classes:n}}function Fe(t){return xc(()=>{let e=cD(t),n=Oe(q({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===tD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Zn.Emulated,styles:t.styles||rn,_:null,schemas:t.schemas||null,tView:null,id:""});lD(n);let i=t.dependencies;return n.directiveDefs=pE(i,!1),n.pipeDefs=pE(i,!0),n.id=cN(n),n})}function sN(t){return rr(t)||rD(t)}function aN(t){return t!==null}function ot(t){return xc(()=>({type:t.type,bootstrap:t.bootstrap||rn,declarations:t.declarations||rn,imports:t.imports||rn,exports:t.exports||rn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function fE(t,e){if(t==null)return Cs;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a=Qt.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(n[o]=a!==Qt.None?[i,a]:i,e[o]=s):n[o]=i}return n}function lt(t){return xc(()=>{let e=cD(t);return lD(e),e})}function rr(t){return t[TO]||null}function rD(t){return t[SO]||null}function oD(t){return t[MO]||null}function sD(t){let e=rr(t)||rD(t)||oD(t);return e!==null?e.standalone:!1}function aD(t,e){let n=t[AO]||null;if(!n&&e===!0)throw new Error(`Type ${Kt(t)} does not have '\u0275mod' property.`);return n}function cD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Cs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||rn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fE(t.inputs,e),outputs:fE(t.outputs),debugInfo:null}}function lD(t){t.features?.forEach(e=>e(t))}function pE(t,e){if(!t)return null;let n=e?oD:sN;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(aN)}function cN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function uo(t){return{\u0275providers:t}}function Ug(...t){return{\u0275providers:uD(!0,t),\u0275fromNgModule:!0}}function uD(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return Lg(e,s=>{let a=s;Hm(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&dD(r,o),n}function dD(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];$g(r,o=>{e(o,i)})}}function Hm(t,e,n,i){if(t=qt(t),!t)return!1;let r=null,o=aE(t),s=!o&&rr(t);if(!o&&!s){let c=t.ngModule;if(o=aE(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Hm(u,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{Lg(o.imports,d=>{Hm(d,e,n,i)&&(u||=[],u.push(d))})}finally{}u!==void 0&&dD(u,e)}if(!a){let u=Ds(r)||(()=>new r);e({provide:r,useFactory:u,deps:rn},r),e({provide:eD,useValue:r,multi:!0},r),e({provide:Is,useValue:()=>j(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let u=t;$g(c,d=>{e(d,u)})}}else return!1;return r!==t&&t.providers!==void 0}function $g(t,e){for(let n of t)KE(n)&&(n=n.\u0275providers),Array.isArray(n)?$g(n,e):e(n)}var lN=Ge({provide:String,useValue:Ge});function hD(t){return t!==null&&typeof t=="object"&&lN in t}function uN(t){return!!(t&&t.useExisting)}function dN(t){return!!(t&&t.useFactory)}function Ts(t){return typeof t=="function"}function hN(t){return!!t.useClass}var xd=new W(""),id={},fN={},Im;function Rd(){return Im===void 0&&(Im=new hd),Im}var Ot=class{},bc=class extends Ot{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wm(e,s=>this.processProvider(s)),this.records.set(XE,_s(void 0,this)),r.has("environment")&&this.records.set(Ot,_s(void 0,this));let o=this.records.get(xd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(eD,rn,Ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Pe(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Pe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=nr(this),i=vn(void 0),r;try{return e()}finally{nr(n),vn(i)}}get(e,n=vc,i=Ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lE))return e[lE](this);i=Ad(i);let r,o=nr(this),s=vn(void 0);try{if(!(i&Ee.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=yN(e)&&Md(e);u&&this.injectableDefInScope(u)?c=_s(zm(e),id):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&Ee.Self?Rd():this.parent;return n=i&Ee.Optional&&n===vc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ud]=a[ud]||[]).unshift(Kt(e)),o)throw a;return BO(a,e,"R3InjectorError",this.source)}else throw a}finally{vn(s),nr(o)}}resolveInjectorInitializers(){let e=Pe(null),n=nr(this),i=vn(void 0),r;try{let o=this.get(Is,rn,Ee.Self);for(let s of o)s()}finally{nr(n),vn(i),Pe(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Kt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(e){e=qt(e);let n=Ts(e)?e:qt(e&&e.provide),i=mN(e);if(!Ts(e)&&e.multi===!0){let r=this.records.get(n);r||(r=_s(void 0,id,!0),r.factory=()=>$m(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Pe(null);try{return n.value===id&&(n.value=fN,n.value=n.factory()),typeof n.value=="object"&&n.value&&_N(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Pe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=qt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function zm(t){let e=Md(t),n=e!==null?e.factory:Ds(t);if(n!==null)return n;if(t instanceof W)throw new ie(204,!1);if(t instanceof Function)return pN(t);throw new ie(204,!1)}function pN(t){if(t.length>0)throw new ie(204,!1);let n=CO(t);return n!==null?()=>n.factory(t):()=>new t}function mN(t){if(hD(t))return _s(void 0,t.useValue);{let e=fD(t);return _s(e,id)}}function fD(t,e,n){let i;if(Ts(t)){let r=qt(t);return Ds(r)||zm(r)}else if(hD(t))i=()=>qt(t.useValue);else if(dN(t))i=()=>t.useFactory(...$m(t.deps||[]));else if(uN(t))i=()=>j(qt(t.useExisting));else{let r=qt(t&&(t.useClass||t.provide));if(gN(t))i=()=>new r(...$m(t.deps));else return Ds(r)||zm(r)}return i}function _s(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gN(t){return!!t.deps}function _N(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function yN(t){return typeof t=="function"||typeof t=="object"&&t instanceof W}function Wm(t,e){for(let n of t)Array.isArray(n)?Wm(n,e):n&&KE(n)?Wm(n.\u0275providers,e):e(n)}function Si(t,e){t instanceof bc&&t.assertNotDestroyed();let n,i=nr(t),r=vn(void 0);try{return e()}finally{nr(i),vn(r)}}function vN(){return QE()!==void 0||FO()!=null}function wN(t){return typeof t=="function"}var Mi=0,be=1,le=2,Nt=3,Pn=4,dn=5,Ec=6,Dc=7,kn=8,Ss=9,Fn=10,it=11,Cc=12,mE=13,Os=14,Vn=15,Oc=16,ys=17,bi=18,Od=19,pD=20,ir=21,Tm=22,io=23,Ln=25,mD=1;var ro=7,fd=8,Ms=9,un=10,Gg=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Gg||{});function to(t){return Array.isArray(t)&&typeof t[mD]=="object"}function Ai(t){return Array.isArray(t)&&t[mD]===!0}function Hg(t){return(t.flags&4)!==0}function Nd(t){return t.componentOffset>-1}function Pd(t){return(t.flags&1)===1}function or(t){return!!t.template}function bN(t){return(t[le]&512)!==0}var qm=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function gD(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function ni(){return _D}function _D(t){return t.type.prototype.ngOnChanges&&(t.setInput=DN),EN}ni.ngInherit=!0;function EN(){let t=vD(this),e=t?.current;if(e){let n=t.previous;if(n===Cs)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function DN(t,e,n,i,r){let o=this.declaredInputs[i],s=vD(t)||CN(t,{previous:Cs,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new qm(u&&u.currentValue,n,c===Cs),gD(t,e,r,n)}var yD="__ngSimpleChanges__";function vD(t){return t[yD]||null}function CN(t,e){return t[yD]=e}var gE=null;var Yn=function(t,e,n){gE?.(t,e,n)},IN="svg",TN="math",SN=!1;function MN(){return SN}function Xn(t){for(;Array.isArray(t);)t=t[Mi];return t}function wD(t,e){return Xn(e[t])}function wn(t,e){return Xn(e[t.index])}function bD(t,e){return t.data[e]}function AN(t,e){return t[e]}function cr(t,e){let n=e[t];return to(n)?n:n[Mi]}function xN(t){return(t[le]&4)===4}function zg(t){return(t[le]&128)===128}function RN(t){return Ai(t[Nt])}function As(t,e){return e==null?null:t[e]}function ED(t){t[ys]=0}function ON(t){t[le]&1024||(t[le]|=1024,zg(t)&&Ic(t))}function NN(t,e){for(;t>0;)e=e[Os],t--;return e}function Wg(t){return!!(t[le]&9216||t[io]?.dirty)}function Km(t){t[Fn].changeDetectionScheduler?.notify(1),Wg(t)?Ic(t):t[le]&64&&(MN()?(t[le]|=1024,Ic(t)):t[Fn].changeDetectionScheduler?.notify())}function Ic(t){t[Fn].changeDetectionScheduler?.notify();let e=Tc(t);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!zg(e)));)e=Tc(e)}function DD(t,e){if((t[le]&256)===256)throw new ie(911,!1);t[ir]===null&&(t[ir]=[]),t[ir].push(e)}function PN(t,e){if(t[ir]===null)return;let n=t[ir].indexOf(e);n!==-1&&t[ir].splice(n,1)}function Tc(t){let e=t[Nt];return Ai(e)?e[Nt]:e}var we={lFrame:RD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function kN(){return we.lFrame.elementDepthCount}function FN(){we.lFrame.elementDepthCount++}function VN(){we.lFrame.elementDepthCount--}function CD(){return we.bindingsEnabled}function ID(){return we.skipHydrationRootTNode!==null}function LN(t){return we.skipHydrationRootTNode===t}function BN(){we.skipHydrationRootTNode=null}function Se(){return we.lFrame.lView}function Et(){return we.lFrame.tView}function ue(t){return we.lFrame.contextLView=t,t[kn]}function de(t){return we.lFrame.contextLView=null,t}function on(){let t=TD();for(;t!==null&&t.type===64;)t=t.parent;return t}function TD(){return we.lFrame.currentTNode}function jN(){let t=we.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ho(t,e){let n=we.lFrame;n.currentTNode=t,n.isParent=e}function qg(){return we.lFrame.isParent}function Kg(){we.lFrame.isParent=!1}function UN(){return we.lFrame.contextLView}function SD(){let t=we.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function $N(){return we.lFrame.bindingIndex}function GN(t){return we.lFrame.bindingIndex=t}function kd(){return we.lFrame.bindingIndex++}function Qg(t){let e=we.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function HN(){return we.lFrame.inI18n}function zN(t,e){let n=we.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qm(e)}function WN(){return we.lFrame.currentDirectiveIndex}function Qm(t){we.lFrame.currentDirectiveIndex=t}function qN(t){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function MD(){return we.lFrame.currentQueryIndex}function Yg(t){we.lFrame.currentQueryIndex=t}function KN(t){let e=t[be];return e.type===2?e.declTNode:e.type===1?t[dn]:null}function AD(t,e,n){if(n&Ee.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&Ee.Host);)if(r=KN(o),r===null||(o=o[Os],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=we.lFrame=xD();return i.currentTNode=e,i.lView=t,!0}function Jg(t){let e=xD(),n=t[be];we.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function xD(){let t=we.lFrame,e=t===null?null:t.child;return e===null?RD(t):e}function RD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function OD(){let t=we.lFrame;return we.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ND=OD;function Zg(){let t=OD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function QN(t){return(we.lFrame.contextLView=NN(t,we.lFrame.contextLView))[kn]}function lr(){return we.lFrame.selectedIndex}function oo(t){we.lFrame.selectedIndex=t}function Xg(){let t=we.lFrame;return bD(t.tView,t.selectedIndex)}function YN(){return we.lFrame.currentNamespace}var PD=!0;function Fd(){return PD}function Vd(t){PD=t}function JN(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=_D(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Ld(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function rd(t,e,n){kD(t,e,3,n)}function od(t,e,n,i){(t[le]&3)===n&&kD(t,e,n,i)}function Sm(t,e){let n=t[le];(n&3)===e&&(n&=16383,n+=1,t[le]=n)}function kD(t,e,n,i){let r=i!==void 0?t[ys]&65535:0,o=i??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(t[ys]+=65536),(a<o||o==-1)&&(ZN(t,n,e,c),t[ys]=(t[ys]&4294901760)+c+2),c++}function _E(t,e){Yn(4,t,e);let n=Pe(null);try{e.call(t)}finally{Pe(n),Yn(5,t,e)}}function ZN(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[le]>>14<t[ys]>>16&&(t[le]&3)===e&&(t[le]+=16384,_E(a,o)):_E(a,o)}var bs=-1,so=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function XN(t){return t instanceof so}function eP(t){return(t.flags&8)!==0}function tP(t){return(t.flags&16)!==0}function FD(t){return t!==bs}function pd(t){return t&32767}function nP(t){return t>>16}function md(t,e){let n=nP(t),i=e;for(;n>0;)i=i[Os],n--;return i}var Ym=!0;function yE(t){let e=Ym;return Ym=t,e}var iP=256,VD=iP-1,LD=5,rP=0,Jn={};function oP(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(yc)&&(i=n[yc]),i==null&&(i=n[yc]=rP++);let r=i&VD,o=1<<r;e.data[t+(r>>LD)]|=o}function gd(t,e){let n=BD(t,e);if(n!==-1)return n;let i=e[be];i.firstCreatePass&&(t.injectorIndex=e.length,Mm(i.data,t),Mm(e,null),Mm(i.blueprint,null));let r=e_(t,e),o=t.injectorIndex;if(FD(r)){let s=pd(r),a=md(r,e),c=a[be].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=r,o}function Mm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function BD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function e_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=HD(r),i===null)return bs;if(n++,r=r[Os],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return bs}function Jm(t,e,n){oP(t,e,n)}function jD(t,e,n){if(n&Ee.Optional||t!==void 0)return t;Fg(e,"NodeInjector")}function UD(t,e,n,i){if(n&Ee.Optional&&i===void 0&&(i=null),!(n&(Ee.Self|Ee.Host))){let r=t[Ss],o=vn(void 0);try{return r?r.get(e,i,n&Ee.Optional):YE(e,i,n&Ee.Optional)}finally{vn(o)}}return jD(i,e,n)}function $D(t,e,n,i=Ee.Default,r){if(t!==null){if(e[le]&2048&&!(i&Ee.Self)){let s=lP(t,e,n,i,Jn);if(s!==Jn)return s}let o=GD(t,e,n,i,Jn);if(o!==Jn)return o}return UD(e,n,i,r)}function GD(t,e,n,i,r){let o=aP(n);if(typeof o=="function"){if(!AD(e,t,i))return i&Ee.Host?jD(r,n,i):UD(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&Ee.Optional))Fg(n);else return s}finally{ND()}}else if(typeof o=="number"){let s=null,a=BD(t,e),c=bs,u=i&Ee.Host?e[Vn][dn]:null;for((a===-1||i&Ee.SkipSelf)&&(c=a===-1?e_(t,e):e[a+8],c===bs||!wE(i,!1)?a=-1:(s=e[be],a=pd(c),e=md(c,e)));a!==-1;){let d=e[be];if(vE(o,a,d.data)){let f=sP(a,e,n,s,i,u);if(f!==Jn)return f}c=e[a+8],c!==bs&&wE(i,e[be].data[a+8]===u)&&vE(o,a,e)?(s=d,a=pd(c),e=md(c,e)):a=-1}}return r}function sP(t,e,n,i,r,o){let s=e[be],a=s.data[t+8],c=i==null?Nd(a)&&Ym:i!=s&&(a.type&3)!==0,u=r&Ee.Host&&o===a,d=sd(a,s,n,c,u);return d!==null?ao(e,s,d,a):Jn}function sd(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,d=o>>20,f=i?a:a+d,m=r?a+d:u;for(let _=f;_<m;_++){let D=s[_];if(_<c&&n===D||_>=c&&D.type===n)return _}if(r){let _=s[c];if(_&&or(_)&&_.type===n)return c}return null}function ao(t,e,n,i){let r=t[n],o=e.data;if(XN(r)){let s=r;s.resolving&&RO(xO(o[n]));let a=yE(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?vn(s.injectImpl):null,d=AD(t,i,Ee.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&JN(n,o[n],e)}finally{u!==null&&vn(u),yE(a),s.resolving=!1,ND()}}return r}function aP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(yc)?t[yc]:void 0;return typeof e=="number"?e>=0?e&VD:cP:e}function vE(t,e,n){let i=1<<t;return!!(n[e+(t>>LD)]&i)}function wE(t,e){return!(t&Ee.Self)&&!(t&Ee.Host&&e)}var no=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return $D(this._tNode,this._lView,e,Ad(i),n)}};function cP(){return new no(on(),Se())}function xi(t){return xc(()=>{let e=t.prototype.constructor,n=e[ld]||Zm(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[ld]||Zm(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Zm(t){return HE(t)?()=>{let e=Zm(qt(t));return e&&e()}:Ds(t)}function lP(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[le]&2048&&!(s[le]&512);){let a=GD(o,s,n,i|Ee.Self,Jn);if(a!==Jn)return a;let c=o.parent;if(!c){let u=s[pD];if(u){let d=u.get(n,Jn,i);if(d!==Jn)return d}c=HD(s),s=s[Os]}o=c}return r}function HD(t){let e=t[be],n=e.type;return n===2?e.declTNode:n===1?t[dn]:null}function bE(t,e=null,n=null,i){let r=zD(t,e,n,i);return r.resolveInjectorInitializers(),r}function zD(t,e=null,n=null,i,r=new Set){let o=[n||rn,Ug(t)];return i=i||(typeof t=="object"?void 0:Kt(t)),new bc(o,e||Rd(),i||null,r)}var Bn=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return bE({name:""},r,i,"");{let o=i.name??"";return bE({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=vc,e.NULL=new hd,e.\u0275prov=Q({token:e,providedIn:"any",factory:()=>j(XE)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var uP="ngOriginalError";function Am(t){return t[uP]}var Ei=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Am(e);for(;n&&Am(n);)n=Am(n);return n||null}},WD=new W("",{providedIn:"root",factory:()=>L(Ei).handleError.bind(void 0)}),t_=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=dP,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),Xm=class extends t_{constructor(e){super(),this._lView=e}onDestroy(e){return DD(this._lView,e),()=>PN(this._lView,e)}};function dP(){return new Xm(Se())}function hP(){return Ns(on(),Se())}function Ns(t,e){return new Yt(wn(t,e))}var Yt=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=hP;let t=e;return t})();function fP(t){return t instanceof Yt?t.nativeElement:t}var eg=class extends ke{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,vN()&&(this.destroyRef=L(t_,{optional:!0})??void 0)}emit(e){let n=Pe(null);try{super.next(e)}finally{Pe(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=xm(o),r&&(r=xm(r)),s&&(s=xm(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof at&&e.add(a),a}};function xm(t){return e=>{setTimeout(t,void 0,e)}}var De=eg;function pP(){return this._results[Symbol.iterator]()}var tg=class t{get changes(){return this._changes??=new De}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=pP)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=$O(e);(this._changesDetected=!UO(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function qD(t){return(t.flags&128)===128}var KD=new Map,mP=0;function gP(){return mP++}function _P(t){KD.set(t[Od],t)}function yP(t){KD.delete(t[Od])}var EE="__ngContext__";function sr(t,e){to(e)?(t[EE]=e[Od],_P(e)):t[EE]=e}function QD(t){return JD(t[Cc])}function YD(t){return JD(t[Pn])}function JD(t){for(;t!==null&&!Ai(t);)t=t[Pn];return t}var ng;function ZD(t){ng=t}function vP(){if(ng!==void 0)return ng;if(typeof document<"u")return document;throw new ie(210,!1)}var n_=new W("",{providedIn:"root",factory:()=>wP}),wP="ng",i_=new W(""),Pt=new W("",{providedIn:"platform",factory:()=>"unknown"});var r_=new W("",{providedIn:"root",factory:()=>vP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var bP="h",EP="b";var DP=()=>null;function o_(t,e,n=!1){return DP(t,e,n)}var XD=!1,CP=new W("",{providedIn:"root",factory:()=>XD});var _d=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$E})`}};function Nc(t){return t instanceof _d?t.changingThisBreaksApplicationSecurity:t}function eC(t,e){let n=IP(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${$E})`)}return n===e}function IP(t){return t instanceof _d&&t.getTypeName()||null}var TP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function tC(t){return t=String(t),t.match(TP)?t:"unsafe:"+t}var s_=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(s_||{});function nC(t){let e=SP();return e?e.sanitize(s_.URL,t)||"":eC(t,"URL")?Nc(t):tC(Es(t))}function SP(){let t=Se();return t&&t[Fn].sanitizer}var MP=/^>|^->|<!--|-->|--!>|<!-$/g,AP=/(<|>)/g,xP="\u200B$1\u200B";function RP(t){return t.replace(MP,e=>e.replace(AP,xP))}function iC(t){return t instanceof Function?t():t}var ei=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ei||{}),OP;function a_(t,e){return OP(t,e)}function vs(t,e,n,i,r){if(i!=null){let o,s=!1;Ai(i)?o=i:to(i)&&(s=!0,i=i[Mi]);let a=Xn(i);t===0&&n!==null?r==null?lC(e,n,a):yd(e,n,a,r||null,!0):t===1&&n!==null?yd(e,n,a,r||null,!0):t===2?KP(e,a,s):t===3&&e.destroyNode(a),o!=null&&YP(e,t,o,n,r)}}function NP(t,e){return t.createText(e)}function PP(t,e,n){t.setValue(e,n)}function kP(t,e){return t.createComment(RP(e))}function rC(t,e,n){return t.createElement(e,n)}function FP(t,e){oC(t,e),e[Mi]=null,e[dn]=null}function VP(t,e,n,i,r,o){i[Mi]=r,i[dn]=e,jd(t,i,n,1,r,o)}function oC(t,e){e[Fn].changeDetectionScheduler?.notify(1),jd(t,e,e[it],2,null,null)}function LP(t){let e=t[Cc];if(!e)return Rm(t[be],t);for(;e;){let n=null;if(to(e))n=e[Cc];else{let i=e[un];i&&(n=i)}if(!n){for(;e&&!e[Pn]&&e!==t;)to(e)&&Rm(e[be],e),e=e[Nt];e===null&&(e=t),to(e)&&Rm(e[be],e),n=e&&e[Pn]}e=n}}function BP(t,e,n,i){let r=un+i,o=n.length;i>0&&(n[r-1][Pn]=e),i<o-un?(e[Pn]=n[r],ZE(n,un+i,e)):(n.push(e),e[Pn]=null),e[Nt]=n;let s=e[Oc];s!==null&&n!==s&&jP(s,e);let a=e[bi];a!==null&&a.insertView(t),Km(e),e[le]|=128}function jP(t,e){let n=t[Ms],r=e[Nt][Nt][Vn];e[Vn]!==r&&(t[le]|=Gg.HasTransplantedViews),n===null?t[Ms]=[e]:n.push(e)}function sC(t,e){let n=t[Ms],i=n.indexOf(e);n.splice(i,1)}function ig(t,e){if(t.length<=un)return;let n=un+e,i=t[n];if(i){let r=i[Oc];r!==null&&r!==t&&sC(r,i),e>0&&(t[n-1][Pn]=i[Pn]);let o=dd(t,un+e);FP(i[be],i);let s=o[bi];s!==null&&s.detachView(o[be]),i[Nt]=null,i[Pn]=null,i[le]&=-129}return i}function aC(t,e){if(!(e[le]&256)){let n=e[it];n.destroyNode&&jd(t,e,n,3,null,null),LP(e)}}function Rm(t,e){if(e[le]&256)return;let n=Pe(null);try{e[le]&=-129,e[le]|=256,e[io]&&F1(e[io]),$P(t,e),UP(t,e),e[be].type===1&&e[it].destroy();let i=e[Oc];if(i!==null&&Ai(e[Nt])){i!==e[Nt]&&sC(i,e);let r=e[bi];r!==null&&r.detachView(t)}yP(e)}finally{Pe(n)}}function UP(t,e){let n=t.cleanup,i=e[Dc];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(e[Dc]=null);let r=e[ir];if(r!==null){e[ir]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function $P(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof so)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];Yn(4,a,c);try{c.call(a)}finally{Yn(5,a,c)}}else{Yn(4,r,o);try{o.call(r)}finally{Yn(5,r,o)}}}}}function cC(t,e,n){return GP(t,e.parent,n)}function GP(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[Mi];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===Zn.None||o===Zn.Emulated)return null}return wn(i,n)}}function yd(t,e,n,i,r){t.insertBefore(e,n,i,r)}function lC(t,e,n){t.appendChild(e,n)}function DE(t,e,n,i,r){i!==null?yd(t,e,n,i,r):lC(t,e,n)}function HP(t,e,n,i){t.removeChild(e,n,i)}function c_(t,e){return t.parentNode(e)}function zP(t,e){return t.nextSibling(e)}function uC(t,e,n){return qP(t,e,n)}function WP(t,e,n){return t.type&40?wn(t,n):null}var qP=WP,CE;function Bd(t,e,n,i){let r=cC(t,i,e),o=e[it],s=i.parent||e[dn],a=uC(s,i,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)DE(o,r,n[c],a,!1);else DE(o,r,n,a,!1);CE!==void 0&&CE(o,i,e,n,r)}function ad(t,e){if(e!==null){let n=e.type;if(n&3)return wn(e,t);if(n&4)return rg(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return ad(t,i);{let r=t[e.index];return Ai(r)?rg(-1,r):Xn(r)}}else{if(n&32)return a_(e,t)()||Xn(t[e.index]);{let i=dC(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Tc(t[Vn]);return ad(r,i)}else return ad(t,e.next)}}}return null}function dC(t,e){if(e!==null){let i=t[Vn][dn],r=e.projection;return i.projection[r]}return null}function rg(t,e){let n=un+t+1;if(n<e.length){let i=e[n],r=i[be].firstChild;if(r!==null)return ad(i,r)}return e[ro]}function KP(t,e,n){let i=c_(t,e);i&&HP(t,i,e,n)}function l_(t,e,n,i,r,o,s){for(;n!=null;){let a=i[n.index],c=n.type;if(s&&e===0&&(a&&sr(Xn(a),i),n.flags|=2),(n.flags&32)!==32)if(c&8)l_(t,e,n.child,i,r,o,!1),vs(e,t,r,a,o);else if(c&32){let u=a_(n,i),d;for(;d=u();)vs(e,t,r,d,o);vs(e,t,r,a,o)}else c&16?hC(t,e,i,n,r,o):vs(e,t,r,a,o);n=s?n.projectionNext:n.next}}function jd(t,e,n,i,r,o){l_(n,i,t.firstChild,e,r,o,!1)}function QP(t,e,n){let i=e[it],r=cC(t,n,e),o=n.parent||e[dn],s=uC(o,n,e);hC(i,0,e,n,r,s)}function hC(t,e,n,i,r,o){let s=n[Vn],c=s[dn].projection[i.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];vs(e,t,r,d,o)}else{let u=c,d=s[Nt];qD(i)&&(u.flags|=128),l_(t,e,u,d,r,o,!0)}}function YP(t,e,n,i,r){let o=n[ro],s=Xn(n);o!==s&&vs(e,t,i,o,r);for(let a=un;a<n.length;a++){let c=n[a];jd(c[be],c,t,e,i,o)}}function JP(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:ei.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ei.Important),t.setStyle(n,i,r,o))}}function ZP(t,e,n){t.setAttribute(e,"style",n)}function fC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function pC(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&Gm(t,e,i),r!==null&&fC(t,e,r),o!==null&&ZP(t,e,o)}var jn={};function Z(t=1){mC(Et(),Se(),lr()+t,!1)}function mC(t,e,n,i){if(!i)if((e[le]&3)===3){let o=t.preOrderCheckHooks;o!==null&&rd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&od(e,o,0,n)}oo(n)}function ye(t,e=Ee.Default){let n=Se();if(n===null)return j(t,e);let i=on();return $D(i,n,qt(t),e)}function gC(t,e,n,i,r,o){let s=Pe(null);try{let a=null;r&Qt.SignalBased&&(a=e[i][Xp]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&Qt.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,i):gD(e,a,i,o)}finally{Pe(s)}}function XP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)oo(~r);else{let o=r,s=n[++i],a=n[++i];zN(s,o);let c=e[o];a(2,c)}}}finally{oo(-1)}}function Ud(t,e,n,i,r,o,s,a,c,u,d){let f=e.blueprint.slice();return f[Mi]=r,f[le]=i|4|128|8|64,(u!==null||t&&t[le]&2048)&&(f[le]|=2048),ED(f),f[Nt]=f[Os]=t,f[kn]=n,f[Fn]=s||t&&t[Fn],f[it]=a||t&&t[it],f[Ss]=c||t&&t[Ss]||null,f[dn]=o,f[Od]=gP(),f[Ec]=d,f[pD]=u,f[Vn]=e.type==2?t[Vn]:f,f}function Ps(t,e,n,i,r){let o=t.data[e];if(o===null)o=ek(t,e,n,i,r),HN()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=jN();o.injectorIndex=s===null?-1:s.injectorIndex}return ho(o,!0),o}function ek(t,e,n,i,r){let o=TD(),s=qg(),a=s?o:o&&o.parent,c=t.data[e]=sk(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function _C(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function yC(t,e,n,i,r){let o=lr(),s=i&2;try{oo(-1),s&&e.length>Ln&&mC(t,e,Ln,!1),Yn(s?2:0,r),n(i,r)}finally{oo(o),Yn(s?3:1,r)}}function u_(t,e,n){if(Hg(e)){let i=Pe(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Pe(i)}}}function d_(t,e,n){CD()&&(hk(t,e,n,wn(n,e)),(n.flags&64)===64&&EC(t,e,n))}function h_(t,e,n=wn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function vC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=f_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function f_(t,e,n,i,r,o,s,a,c,u,d){let f=Ln+i,m=f+r,_=tk(f,m),D=typeof u=="function"?u():u;return _[be]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:d}}function tk(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:jn);return n}function nk(t,e,n,i){let o=i.get(CP,XD)||n===Zn.ShadowDom,s=t.selectRootElement(e,o);return ik(s),s}function ik(t){rk(t)}var rk=()=>null;function ok(t,e,n,i){let r=IC(e);r.push(n),t.firstCreatePass&&TC(t).push(i,r.length-1)}function sk(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return ID()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function IE(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let a,c=Qt.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}t===0?TE(i,n,u,a,c):TE(i,n,u,a)}return i}function TE(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function ak(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let d=i;d<r;d++){let f=o[d],m=n?n.get(f):null,_=m?m.inputs:null,D=m?m.outputs:null;c=IE(0,f.inputs,d,c,_),u=IE(1,f.outputs,d,u,D);let T=c!==null&&s!==null&&!jg(e)?Dk(c,d,s):null;a.push(T)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function ck(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function wC(t,e,n,i,r,o,s,a){let c=wn(e,n),u=e.inputs,d;!a&&u!=null&&(d=u[i])?(m_(t,n,d,i,r),Nd(e)&&lk(n,e.index)):e.type&3?(i=ck(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(c,i,r)):e.type&12}function lk(t,e){let n=cr(e,t);n[le]&16||(n[le]|=64)}function p_(t,e,n,i){if(CD()){let r=i===null?null:{"":-1},o=pk(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&bC(t,e,n,s,r,a),r&&mk(n,i,r)}n.mergedAttrs=wc(n.mergedAttrs,n.attrs)}function bC(t,e,n,i,r,o){for(let u=0;u<i.length;u++)Jm(gd(n,e),t,i[u].type);_k(n,t.data.length,i.length);for(let u=0;u<i.length;u++){let d=i[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=_C(t,e,i.length,null);for(let u=0;u<i.length;u++){let d=i[u];n.mergedAttrs=wc(n.mergedAttrs,d.hostAttrs),yk(t,n,e,c,d),gk(c,d,r),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}ak(t,n,o)}function uk(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;dk(s)!=a&&s.push(a),s.push(n,i,o)}}function dk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function hk(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Nd(n)&&vk(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||gd(n,e),sr(i,e);let s=n.initialInputs;for(let a=r;a<o;a++){let c=t.data[a],u=ao(e,t,a,n);if(sr(u,e),s!==null&&Ek(e,a-r,u,c,n,s),or(c)){let d=cr(n.index,e);d[kn]=ao(e,t,a,n)}}}function EC(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=WN();try{oo(o);for(let a=i;a<r;a++){let c=t.data[a],u=e[a];Qm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&fk(c,u)}}finally{oo(-1),Qm(s)}}function fk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function pk(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(iD(e,s.selectors,!1))if(i||(i=[]),or(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let c=a.length;og(t,e,c)}else i.unshift(s),og(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function og(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function mk(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new ie(-301,!1);i.push(e[r],o)}}}function gk(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;or(e)&&(n[""]=t)}}function _k(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function yk(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=Ds(r.type,!0)),s=new so(o,or(r),ye);t.blueprint[i]=s,n[i]=s,uk(t,e,i,_C(t,n,r.hostVars,jn),r)}function vk(t,e,n){let i=wn(e,t),r=vC(n),o=t[Fn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=$d(t,Ud(t,r,null,s,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=a}function wk(t,e,n,i,r,o){let s=wn(t,e);bk(e[it],s,o,t.value,n,i,r)}function bk(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let a=s==null?Es(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}function Ek(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],d=s[a++],f=s[a++];gC(i,n,c,u,d,f)}}function Dk(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(o,s[a+1],s[a+2],n[r+1]);break}}r+=2}return i}function DC(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function CC(t,e){let n=t.contentQueries;if(n!==null){let i=Pe(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];Yg(o),a.contentQueries(2,e[s],s)}}}finally{Pe(i)}}}function $d(t,e){return t[Cc]?t[mE][Pn]=e:t[Cc]=e,t[mE]=e,e}function sg(t,e,n){Yg(0);let i=Pe(null);try{e(t,n)}finally{Pe(i)}}function IC(t){return t[Dc]||(t[Dc]=[])}function TC(t){return t.cleanup||(t.cleanup=[])}function SC(t,e){let n=t[Ss],i=n?n.get(Ei,null):null;i&&i.handleError(e)}function m_(t,e,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],d=t.data[s];gC(d,u,i,a,c,r)}}function MC(t,e,n){let i=wD(e,t);PP(t[it],i,n)}function Ck(t,e){let n=cr(e,t),i=n[be];Ik(i,n);let r=n[Mi];r!==null&&n[Ec]===null&&(n[Ec]=o_(r,n[Ss])),g_(i,n,n[kn])}function Ik(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function g_(t,e,n){Jg(e);try{let i=t.viewQuery;i!==null&&sg(1,i,n);let r=t.template;r!==null&&yC(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[bi]?.finishViewCreation(t),t.staticContentQueries&&CC(t,e),t.staticViewQueries&&sg(2,t.viewQuery,n);let o=t.components;o!==null&&Tk(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[le]&=-5,Zg()}}function Tk(t,e){for(let n=0;n<e.length;n++)Ck(t,e[n])}function Sk(t,e,n,i){let r=Pe(null);try{let o=e.tView,a=t[le]&4096?4096:16,c=Ud(t,o,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=t[e.index];c[Oc]=u;let d=t[bi];return d!==null&&(c[bi]=d.createEmbeddedView(o)),g_(o,c,n),c}finally{Pe(r)}}function SE(t,e){return!e||e.firstChild===null||qD(t)}function Mk(t,e,n,i=!0){let r=e[be];if(BP(r,e,t,n),i){let s=rg(n,t),a=e[it],c=c_(a,t[ro]);c!==null&&VP(r,t[dn],a,e,c,s)}let o=e[Ec];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function vd(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(Xn(o)),Ai(o)&&Ak(o,i);let s=n.type;if(s&8)vd(t,e,n.child,i);else if(s&32){let a=a_(n,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=dC(e,n);if(Array.isArray(a))i.push(...a);else{let c=Tc(e[Vn]);vd(c[be],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function Ak(t,e){for(let n=un;n<t.length;n++){let i=t[n],r=i[be].firstChild;r!==null&&vd(i[be],i,r,e)}t[ro]!==t[Mi]&&e.push(t[ro])}var AC=[];function xk(t){return t[io]??Rk(t)}function Rk(t){let e=AC.pop()??Object.create(Nk);return e.lView=t,e}function Ok(t){t.lView[io]!==t&&(t.lView=null,AC.push(t))}var Nk=Oe(q({},N1),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ic(t.lView)},consumerOnSignalRead(){this.lView[io]=this}}),xC=100;function RC(t,e=!0,n=0){let i=t[Fn],r=i.rendererFactory,o=!1;o||r.begin?.();try{Pk(t,n)}catch(s){throw e&&SC(t,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function Pk(t,e){ag(t,e);let n=0;for(;Wg(t);){if(n===xC)throw new ie(103,!1);n++,ag(t,1)}}function kk(t,e,n,i){let r=e[le];if((r&256)===256)return;let o=!1;!o&&e[Fn].inlineEffectRunner?.flush(),Jg(e);let s=null,a=null;!o&&Fk(t)&&(a=xk(e),s=P1(a));try{ED(e),GN(t.bindingStartIndex),n!==null&&yC(t,e,n,2,i);let c=(r&3)===3;if(!o)if(c){let f=t.preOrderCheckHooks;f!==null&&rd(e,f,null)}else{let f=t.preOrderHooks;f!==null&&od(e,f,0,null),Sm(e,0)}if(Vk(e),OC(e,0),t.contentQueries!==null&&CC(t,e),!o)if(c){let f=t.contentCheckHooks;f!==null&&rd(e,f)}else{let f=t.contentHooks;f!==null&&od(e,f,1),Sm(e,1)}XP(t,e);let u=t.components;u!==null&&PC(e,u,0);let d=t.viewQuery;if(d!==null&&sg(2,d,i),!o)if(c){let f=t.viewCheckHooks;f!==null&&rd(e,f)}else{let f=t.viewHooks;f!==null&&od(e,f,2),Sm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Tm]){for(let f of e[Tm])f();e[Tm]=null}o||(e[le]&=-73)}catch(c){throw Ic(e),c}finally{a!==null&&(k1(a,s),Ok(a)),Zg()}}function Fk(t){return t.type!==2}function OC(t,e){for(let n=QD(t);n!==null;n=YD(n))for(let i=un;i<n.length;i++){let r=n[i];NC(r,e)}}function Vk(t){for(let e=QD(t);e!==null;e=YD(e)){if(!(e[le]&Gg.HasTransplantedViews))continue;let n=e[Ms];for(let i=0;i<n.length;i++){let r=n[i],o=r[Nt];ON(r)}}}function Lk(t,e,n){let i=cr(e,t);NC(i,n)}function NC(t,e){zg(t)&&ag(t,e)}function ag(t,e){let i=t[be],r=t[le],o=t[io],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&em(o)),o&&(o.dirty=!1),t[le]&=-9217,s)kk(i,t,i.template,t[kn]);else if(r&8192){OC(t,1);let a=i.components;a!==null&&PC(t,a,1)}}function PC(t,e,n){for(let i=0;i<e.length;i++)Lk(t,e[i],n)}function __(t){for(t[Fn].changeDetectionScheduler?.notify();t;){t[le]|=64;let e=Tc(t);if(bN(t)&&!e)return t;t=e}return null}var co=class{get rootNodes(){let e=this._lView,n=e[be];return vd(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(e){this._lView[kn]=e}get destroyed(){return(this._lView[le]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Nt];if(Ai(e)){let n=e[fd],i=n?n.indexOf(this):-1;i>-1&&(ig(e,i),dd(n,i))}this._attachedToViewContainer=!1}aC(this._lView[be],this._lView)}onDestroy(e){DD(this._lView,e)}markForCheck(){__(this._cdRefInjectingView||this._lView)}detach(){this._lView[le]&=-129}reattach(){Km(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,RC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,oC(this._lView[be],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e,Km(this._lView)}},Di=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Uk;let t=e;return t})(),Bk=Di,jk=class extends Bk{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=Sk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new co(r)}};function Uk(){return y_(on(),Se())}function y_(t,e){return t.type&4?new jk(e,t,Ns(t,e)):null}var K8=new RegExp(`^(\\d+)*(${EP}|${bP})*(.*)`);var $k=()=>null;function ME(t,e){return $k(t,e)}var cg=class{},lg=class{},wd=class{};function Gk(t){let e=Error(`No component factory found for ${Kt(t)}.`);return e[Hk]=t,e}var Hk="ngComponent";var ug=class{resolveComponentFactory(e){throw Gk(e)}},Gd=(()=>{let e=class e{};e.NULL=new ug;let t=e;return t})(),Sc=class{},ur=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>zk();let t=e;return t})();function zk(){let t=Se(),e=on(),n=cr(e.index,t);return(to(n)?n:t)[it]}var Wk=(()=>{let e=class e{};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Om={};var AE=new Set;function v_(t){AE.has(t)||(AE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function xE(...t){}function qk(){let t=typeof _c.requestAnimationFrame=="function",e=_c[t?"requestAnimationFrame":"setTimeout"],n=_c[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Ce=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new De(!1),this.onMicrotaskEmpty=new De(!1),this.onStable=new De(!1),this.onError=new De(!1),typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=qk().nativeRequestAnimationFrame,Yk(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ie(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,Kk,xE,xE);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},Kk={};function w_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Qk(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(_c,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,dg(t),t.isCheckStableRunning=!0,w_(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),dg(t))}function Yk(t){let e=()=>{Qk(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{if(Jk(a))return n.invokeTask(r,o,s,a);try{return RE(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),OE(t)}},onInvoke:(n,i,r,o,s,a,c)=>{try{return RE(t),n.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),OE(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,dg(t),w_(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function dg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function RE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function OE(t){t._nesting--,w_(t)}function Jk(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var kC=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function bd(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Bm(r,a);else if(o==2){let c=a,u=e[++s];i=Bm(i,c+": "+u+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var Ed=class extends Gd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=rr(e);return new xs(n,this.ngModule)}};function NE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function Zk(t){let e=t.toLowerCase();return e==="svg"?IN:e==="math"?TN:null}var hg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Ad(i);let r=this.injector.get(e,Om,i);return r!==Om||n===Om?r:this.parentInjector.get(e,n,i)}},xs=class extends wd{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=NE(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return NE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=rN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=Pe(null);try{r=r||this.ngModule;let s=r instanceof Ot?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new hg(e,s):e,c=a.get(Sc,null);if(c===null)throw new ie(407,!1);let u=a.get(Wk,null),d=a.get(kC,null),f=a.get(cg,null),m={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},_=c.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",T=i?nk(_,i,this.componentDef.encapsulation,a):rC(_,D,Zk(D)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let k=null;T!==null&&(k=o_(T,a,!0));let H=f_(0,null,null,1,0,null,null,null,null,null,null),B=Ud(null,H,null,S,null,null,m,_,a,null,k);Jg(B);let z,re;try{let te=this.componentDef,b,y=null;te.findHostDirectiveDefs?(b=[],y=new Map,te.findHostDirectiveDefs(te,b,y),b.push(te)):b=[te];let w=Xk(B,T),E=eF(w,T,te,b,B,m,_);re=bD(H,Ln),T&&iF(_,te,T,i),n!==void 0&&rF(re,this.ngContentSelectors,n),z=nF(E,te,b,y,B,[oF]),g_(H,B,null)}finally{Zg()}return new fg(this.componentType,z,Ns(re,B),B,re)}finally{Pe(o)}}},fg=class extends lg{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new co(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;m_(o[be],o,r,e,n),this.previousInputValues.set(e,n);let s=cr(this._tNode.index,o);__(s)}}get injector(){return new no(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Xk(t,e){let n=t[be],i=Ln;return t[i]=e,Ps(n,i,2,"#host",null)}function eF(t,e,n,i,r,o,s){let a=r[be];tF(i,t,e,s);let c=null;e!==null&&(c=o_(e,r[Ss]));let u=o.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=Ud(r,vC(n),null,d,r[t.index],t,o,u,null,null,c);return a.firstCreatePass&&og(a,t,i.length-1),$d(r,f),r[t.index]=f}function tF(t,e,n,i){for(let r of t)e.mergedAttrs=wc(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(bd(e,e.mergedAttrs,!0),n!==null&&pC(i,n,e))}function nF(t,e,n,i,r,o){let s=on(),a=r[be],c=wn(s,r);bC(a,r,s,n,null,i);for(let d=0;d<n.length;d++){let f=s.directiveStart+d,m=ao(r,a,f,s);sr(m,r)}EC(a,r,s),c&&sr(c,r);let u=ao(r,a,s.directiveStart+s.componentOffset,s);if(t[kn]=r[kn]=u,o!==null)for(let d of o)d(u,e);return u_(a,s,r),u}function iF(t,e,n,i){if(i)Gm(t,n,["ng-version","17.3.12"]);else{let{attrs:r,classes:o}=oN(e.selectors[0]);r&&Gm(t,n,r),o&&o.length>0&&fC(t,n,o.join(" "))}}function rF(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function oF(){let t=on();Ld(Se()[be],t)}var Un=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=sF;let t=e;return t})();function sF(){let t=on();return VC(t,Se())}var aF=Un,FC=class extends aF{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Ns(this._hostTNode,this._hostLView)}get injector(){return new no(this._hostTNode,this._hostLView)}get parentInjector(){let e=e_(this._hostTNode,this._hostLView);if(FD(e)){let n=md(e,this._hostLView),i=pd(e),r=n[be].data[i+8];return new no(r,n)}else return new no(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=PE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-un}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=ME(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,SE(this._hostTNode,s)),a}createComponent(e,n,i,r,o){let s=e&&!wN(e),a;if(s)a=n;else{let D=n||{};a=D.index,i=D.injector,r=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let c=s?e:new xs(rr(e)),u=i||this.parentInjector;if(!o&&c.ngModule==null){let T=(s?u:this.parentInjector).get(Ot,null);T&&(o=T)}let d=rr(c.componentType??{}),f=ME(this._lContainer,d?.id??null),m=f?.firstChild??null,_=c.create(u,r,m,o);return this.insertImpl(_.hostView,a,SE(this._hostTNode,f)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(RN(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[Nt],u=new FC(c,c[dn],c[Nt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Mk(s,r,o,i),e.attachToViewContainerRef(),ZE(Nm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=PE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=ig(this._lContainer,n);i&&(dd(Nm(this._lContainer),n),aC(i[be],i))}detach(e){let n=this._adjustIndex(e,-1),i=ig(this._lContainer,n);return i&&dd(Nm(this._lContainer),n)!=null?new co(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function PE(t){return t[fd]}function Nm(t){return t[fd]||(t[fd]=[])}function VC(t,e){let n,i=e[t.index];return Ai(i)?n=i:(n=DC(i,e,null,t),e[t.index]=n,$d(e,n)),lF(n,e,t,i),new FC(n,t,e)}function cF(t,e){let n=t[it],i=n.createComment(""),r=wn(e,t),o=c_(n,r);return yd(n,o,i,zP(n,r),!1),i}var lF=hF,uF=()=>!1;function dF(t,e,n){return uF(t,e,n)}function hF(t,e,n,i){if(t[ro])return;let r;n.type&8?r=Xn(i):r=cF(e,n),t[ro]=r}var pg=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},mg=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)b_(e,n).matches!==null&&this.queries[n].setDirty()}},gg=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=wF(e):this.predicate=e}},_g=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},yg=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,fF(n,o)),this.matchTNodeWithReadOption(e,n,sd(n,e,o,!1,!1))}else i===Di?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,sd(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Yt||r===Un||r===Di&&n.type&4)this.addMatch(n.index,-2);else{let o=sd(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function fF(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function pF(t,e){return t.type&11?Ns(t,e):t.type&4?y_(t,e):null}function mF(t,e,n,i){return n===-1?pF(e,t):n===-2?gF(t,e,i):ao(t,t[be],n,e)}function gF(t,e,n){if(n===Yt)return Ns(e,t);if(n===Di)return y_(e,t);if(n===Un)return VC(e,t)}function LC(t,e,n,i){let r=e[bi].queries[i];if(r.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(mF(e,d,s[c+1],n.metadata.read))}}r.matches=a}return r.matches}function vg(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=LC(t,e,r,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let f=un;f<d.length;f++){let m=d[f];m[Oc]===m[Nt]&&vg(m[be],m,u,i)}if(d[Ms]!==null){let f=d[Ms];for(let m=0;m<f.length;m++){let _=f[m];vg(_[be],_,u,i)}}}}}return i}function _F(t,e){return t[bi].queries[e].queryList}function yF(t,e,n){let i=new tg((n&4)===4);return ok(t,e,i,i.destroy),(e[bi]??=new mg).queries.push(new pg(i))-1}function vF(t,e,n){let i=Et();return i.firstCreatePass&&(bF(i,new gg(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),yF(i,Se(),e)}function wF(t){return t.split(",").map(e=>e.trim())}function bF(t,e,n){t.queries===null&&(t.queries=new _g),t.queries.track(new yg(e,n))}function b_(t,e){return t.queries.getByIndex(e)}function EF(t,e){let n=t[be],i=b_(n,e);return i.crossesNgTemplate?vg(n,t,e,[]):LC(n,t,i,e)}function DF(t){return typeof t=="function"&&t[Xp]!==void 0}function BC(t){return DF(t)&&typeof t.set=="function"}function CF(t){return Object.getPrototypeOf(t.prototype).constructor}function bn(t){let e=CF(t.type),n=!0,i=[t];for(;e;){let r;if(or(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=td(t.inputs),s.inputTransforms=td(t.inputTransforms),s.declaredInputs=td(t.declaredInputs),s.outputs=td(t.outputs);let a=r.hostBindings;a&&AF(t,a);let c=r.viewQuery,u=r.contentQueries;if(c&&SF(t,c),u&&MF(t,u),IF(t,r),EO(t.outputs,r.outputs),or(r)&&r.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===bn&&(n=!1)}}e=Object.getPrototypeOf(e)}TF(i)}function IF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function TF(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=wc(r.hostAttrs,n=wc(n,r.hostAttrs))}}function td(t){return t===Cs?{}:t===rn?[]:t}function SF(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function MF(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function AF(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}var ar=class{},Mc=class{};var wg=class extends ar{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ed(this);let r=aD(e);this._bootstrapComponents=iC(r.bootstrap),this._r3Injector=zD(e,n,[{provide:ar,useValue:this},{provide:Gd,useValue:this.componentFactoryResolver},...i],Kt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bg=class extends Mc{constructor(e){super(),this.moduleType=e}create(e){return new wg(this.moduleType,e,[])}};var Dd=class extends ar{constructor(e){super(),this.componentFactoryResolver=new Ed(this),this.instance=null;let n=new bc([...e.providers,{provide:ar,useValue:this},{provide:Gd,useValue:this.componentFactoryResolver}],e.parent||Rd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function E_(t,e,n=null){return new Dd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var fo=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jC(t){return D_(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function xF(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function D_(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function UC(t,e,n){return t[e]=n}function Ci(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function $C(t,e,n,i){let r=Ci(t,e,n);return Ci(t,e+1,i)||r}function RF(t){return(t.flags&32)===32}function OF(t,e,n,i,r,o,s,a,c){let u=e.consts,d=Ps(e,t,4,s||null,As(u,a));p_(e,n,d,As(u,c)),Ld(e,d);let f=d.tView=f_(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function He(t,e,n,i,r,o,s,a){let c=Se(),u=Et(),d=t+Ln,f=u.firstCreatePass?OF(d,u,c,e,n,i,r,o,s):u.data[d];ho(f,!1);let m=NF(u,c,f,t);Fd()&&Bd(u,c,m,f),sr(m,c);let _=DC(m,c,m,f);return c[d]=_,$d(c,_),dF(_,f,c),Pd(f)&&d_(u,c,f),s!=null&&h_(c,f,a),He}var NF=PF;function PF(t,e,n,i){return Vd(!0),e[it].createComment("")}function ks(t,e,n,i){let r=Se(),o=kd();if(Ci(r,o,e)){let s=Et(),a=Xg();wk(a,r,t,e,n,i)}return ks}function kF(t,e,n,i){return Ci(t,kd(),n)?e+Es(n)+i:jn}function FF(t,e,n,i,r,o){let s=$N(),a=$C(t,s,n,r);return Qg(2),a?e+Es(n)+i+Es(r)+o:jn}function nd(t,e){return t<<17|e<<2}function lo(t){return t>>17&32767}function VF(t){return(t&2)==2}function LF(t,e){return t&131071|e<<17}function Eg(t){return t|2}function Rs(t){return(t&131068)>>2}function Pm(t,e){return t&-131069|e<<2}function BF(t){return(t&1)===1}function Dg(t){return t|1}function jF(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=lo(s),c=Rs(s);t[i]=n;let u=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Rc(f,d)>0)&&(u=!0)}else d=n;if(r)if(c!==0){let m=lo(t[a+1]);t[i+1]=nd(m,a),m!==0&&(t[m+1]=Pm(t[m+1],i)),t[a+1]=LF(t[a+1],i)}else t[i+1]=nd(a,0),a!==0&&(t[a+1]=Pm(t[a+1],i)),a=i;else t[i+1]=nd(c,0),a===0?a=i:t[c+1]=Pm(t[c+1],i),c=i;u&&(t[i+1]=Eg(t[i+1])),kE(t,d,i,!0),kE(t,d,i,!1),UF(e,d,t,i,o),s=nd(a,c),o?e.classBindings=s:e.styleBindings=s}function UF(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Rc(o,e)>=0&&(n[i+1]=Dg(n[i+1]))}function kE(t,e,n,i){let r=t[n+1],o=e===null,s=i?lo(r):Rs(r),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];$F(c,e)&&(a=!0,t[s+1]=i?Dg(u):Eg(u)),s=i?lo(u):Rs(u)}a&&(t[n+1]=i?Eg(r):Dg(r))}function $F(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Rc(t,e)>=0:!1}var Nn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function GF(t){return t.substring(Nn.key,Nn.keyEnd)}function HF(t){return zF(t),GC(t,HC(t,0,Nn.textEnd))}function GC(t,e){let n=Nn.textEnd;return n===e?-1:(e=Nn.keyEnd=WF(t,Nn.key=e,n),HC(t,e,n))}function zF(t){Nn.key=0,Nn.keyEnd=0,Nn.value=0,Nn.valueEnd=0,Nn.textEnd=t.length}function HC(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function WF(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function pe(t,e,n){let i=Se(),r=kd();if(Ci(i,r,e)){let o=Et(),s=Xg();wC(o,s,i,t,e,i[it],n,!1)}return pe}function Cg(t,e,n,i,r){let o=e.inputs,s=r?"class":"style";m_(t,n,o[s],s,i)}function po(t,e){return KF(t,e,null,!0),po}function Hd(t){QF(tV,qF,t,!0)}function qF(t,e){for(let n=HF(e);n>=0;n=GC(e,n))Bg(t,GF(e),!0)}function KF(t,e,n,i){let r=Se(),o=Et(),s=Qg(2);if(o.firstUpdatePass&&WC(o,t,s,i),e!==jn&&Ci(r,s,e)){let a=o.data[lr()];qC(o,a,r,r[it],t,r[s+1]=iV(e,n),i,s)}}function QF(t,e,n,i){let r=Et(),o=Qg(2);r.firstUpdatePass&&WC(r,null,o,i);let s=Se();if(n!==jn&&Ci(s,o,n)){let a=r.data[lr()];if(KC(a,i)&&!zC(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Bm(c,n||"")),Cg(r,a,s,n,i)}else nV(r,a,s,s[it],s[o+1],s[o+1]=eV(t,e,n),i,o)}}function zC(t,e){return e>=t.expandoStartIndex}function WC(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[lr()],s=zC(t,n);KC(o,i)&&e===null&&!s&&(e=!1),e=YF(r,o,e,i),jF(r,o,e,n,s,i)}}function YF(t,e,n,i){let r=qN(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=km(null,t,e,n,i),n=Ac(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=km(r,t,e,n,i),o===null){let c=JF(t,e,i);c!==void 0&&Array.isArray(c)&&(c=km(null,t,e,c[1],i),c=Ac(c,e.attrs,i),ZF(t,e,i,c))}else o=XF(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function JF(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Rs(i)!==0)return t[lo(i)]}function ZF(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[lo(r)]=i}function XF(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=Ac(i,s,n)}return Ac(i,e.attrs,n)}function km(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=Ac(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function Ac(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Bg(t,s,n?!0:e[++o]))}return t===void 0?null:t}function eV(t,e,n){if(n==null||n==="")return rn;let i=[],r=Nc(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function tV(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&Bg(t,i,n)}function nV(t,e,n,i,r,o,s,a){r===jn&&(r=rn);let c=0,u=0,d=0<r.length?r[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let m=c<r.length?r[c+1]:void 0,_=u<o.length?o[u+1]:void 0,D=null,T;d===f?(c+=2,u+=2,m!==_&&(D=f,T=_)):f===null||d!==null&&d<f?(c+=2,D=d):(u+=2,D=f,T=_),D!==null&&qC(t,e,n,i,D,T,s,a),d=c<r.length?r[c]:null,f=u<o.length?o[u]:null}}function qC(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],d=BF(u)?FE(c,e,n,r,Rs(u),s):void 0;if(!Cd(d)){Cd(o)||VF(u)&&(o=FE(c,null,n,r,a,s));let f=wD(lr(),n);JP(i,s,f,r,o)}}function FE(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let c=t[r],u=Array.isArray(c),d=u?c[1]:c,f=d===null,m=n[r+1];m===jn&&(m=f?rn:void 0);let _=f?Cm(m,i):d===i?m:void 0;if(u&&!Cd(_)&&(_=Cm(c,i)),Cd(_)&&(a=_,s))return a;let D=t[r+1];r=s?lo(D):Rs(D)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Cm(c,i))}return a}function Cd(t){return t!==void 0}function iV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Kt(Nc(t)))),t}function KC(t,e){return(t.flags&(e?8:16))!==0}function rV(t,e,n,i,r,o){let s=e.consts,a=As(s,r),c=Ps(e,t,2,i,a);return p_(e,n,c,As(s,o)),c.attrs!==null&&bd(c,c.attrs,!1),c.mergedAttrs!==null&&bd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function N(t,e,n,i){let r=Se(),o=Et(),s=Ln+t,a=r[it],c=o.firstCreatePass?rV(s,o,r,e,n,i):o.data[s],u=oV(o,r,c,a,e,t);r[s]=u;let d=Pd(c);return ho(c,!0),pC(a,u,c),!RF(c)&&Fd()&&Bd(o,r,u,c),kN()===0&&sr(u,r),FN(),d&&(d_(o,r,c),u_(o,c,r)),i!==null&&h_(r,c),N}function P(){let t=on();qg()?Kg():(t=t.parent,ho(t,!1));let e=t;LN(e)&&BN(),VN();let n=Et();return n.firstCreatePass&&(Ld(n,t),Hg(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&eP(e)&&Cg(n,e,Se(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&tP(e)&&Cg(n,e,Se(),e.stylesWithoutHost,!1),P}function se(t,e,n,i){return N(t,e,n,i),P(),se}var oV=(t,e,n,i,r,o)=>(Vd(!0),rC(i,r,YN()));function sV(t,e,n,i,r){let o=e.consts,s=As(o,i),a=Ps(e,t,8,"ng-container",s);s!==null&&bd(a,s,!0);let c=As(o,r);return p_(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function zd(t,e,n){let i=Se(),r=Et(),o=t+Ln,s=r.firstCreatePass?sV(o,r,i,e,n):r.data[o];ho(s,!0);let a=aV(r,i,s,t);return i[o]=a,Fd()&&Bd(r,i,a,s),sr(a,i),Pd(s)&&(d_(r,i,s),u_(r,s,i)),n!=null&&h_(i,s),zd}function Wd(){let t=on(),e=Et();return qg()?Kg():(t=t.parent,ho(t,!1)),e.firstCreatePass&&(Ld(e,t),Hg(t)&&e.queries.elementEnd(t)),Wd}var aV=(t,e,n,i)=>(Vd(!0),kP(e[it],""));function Dt(){return Se()}var Id="en-US";var cV=Id;function lV(t){typeof t=="string"&&(cV=t.toLowerCase().replace(/_/g,"-"))}function ge(t,e,n,i){let r=Se(),o=Et(),s=on();return QC(o,r,r[it],s,t,e,i),ge}function uV(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[Dc],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function QC(t,e,n,i,r,o,s){let a=Pd(i),u=t.firstCreatePass&&TC(t),d=e[kn],f=IC(e),m=!0;if(i.type&3||s){let T=wn(i,e),S=s?s(T):T,k=f.length,H=s?z=>s(Xn(z[i.index])):i.index,B=null;if(!s&&a&&(B=uV(t,e,r,i.index)),B!==null){let z=B.__ngLastListenerFn__||B;z.__ngNextListenerFn__=o,B.__ngLastListenerFn__=o,m=!1}else{o=LE(i,e,d,o,!1);let z=n.listen(S,r,o);f.push(o,z),u&&u.push(r,H,k,k+1)}}else o=LE(i,e,d,o,!1);let _=i.outputs,D;if(m&&_!==null&&(D=_[r])){let T=D.length;if(T)for(let S=0;S<T;S+=2){let k=D[S],H=D[S+1],re=e[k][H].subscribe(o),te=f.length;f.push(o,re),u&&u.push(r,i.index,te,-(te+1))}}}function VE(t,e,n,i){let r=Pe(null);try{return Yn(6,e,n),n(i)!==!1}catch(o){return SC(t,o),!1}finally{Yn(7,e,n),Pe(r)}}function LE(t,e,n,i,r){return function o(s){if(s===Function)return i;let a=t.componentOffset>-1?cr(t.index,e):e;__(a);let c=VE(e,n,i,s),u=o.__ngNextListenerFn__;for(;u;)c=VE(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return r&&c===!1&&s.preventDefault(),c}}function he(t=1){return QN(t)}function dV(t,e){let n=null,i=XO(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?iD(t,o,!0):nN(i,o))return r}return n}function qd(t){let e=Se()[Vn][dn];if(!e.projection){let n=t?t.length:1,i=e.projection=GO(n,null),r=i.slice(),o=e.child;for(;o!==null;){let s=t?dV(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Kd(t,e=0,n){let i=Se(),r=Et(),o=Ps(r,Ln+t,16,null,n||null);o.projection===null&&(o.projection=e),Kg(),(!i[Ec]||ID())&&(o.flags&32)!==32&&QP(r,i,o)}function Fs(t,e,n){vF(t,e,n)}function mo(t){let e=Se(),n=Et(),i=MD();Yg(i+1);let r=b_(n,i);if(t.dirty&&xN(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=EF(e,i);t.reset(o,fP),t.notifyOnChanges()}return!0}return!1}function go(){return _F(Se(),MD())}function dr(t){let e=UN();return AN(e,Ln+t)}function Y(t,e=""){let n=Se(),i=Et(),r=t+Ln,o=i.firstCreatePass?Ps(i,r,1,e,null):i.data[r],s=hV(i,n,o,e,t);n[r]=s,Fd()&&Bd(i,n,s,o),ho(o,!1)}var hV=(t,e,n,i,r)=>(Vd(!0),NP(e[it],i));function $n(t){return Jt("",t,""),$n}function Jt(t,e,n){let i=Se(),r=kF(i,t,e,n);return r!==jn&&MC(i,lr(),r),Jt}function Pc(t,e,n,i,r){let o=Se(),s=FF(o,t,e,n,i,r);return s!==jn&&MC(o,lr(),s),Pc}function pt(t,e,n){BC(e)&&(e=e());let i=Se(),r=kd();if(Ci(i,r,e)){let o=Et(),s=Xg();wC(o,s,i,t,e,i[it],n,!1)}return pt}function Ct(t,e){let n=BC(t);return n&&t.set(e),n}function mt(t,e){let n=Se(),i=Et(),r=on();return QC(i,n,n[it],r,t,e),mt}function fV(t,e,n){let i=Et();if(i.firstCreatePass){let r=or(t);Ig(n,i.data,i.blueprint,r,!0),Ig(e,i.data,i.blueprint,r,!1)}}function Ig(t,e,n,i,r){if(t=qt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ig(t[o],e,n,i,r);else{let o=Et(),s=Se(),a=on(),c=Ts(t)?t:qt(t.provide),u=fD(t),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Ts(t)||!t.multi){let _=new so(u,r,ye),D=Vm(c,e,r?d:d+m,f);D===-1?(Jm(gd(a,s),o,c),Fm(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(_),s.push(_)):(n[D]=_,s[D]=_)}else{let _=Vm(c,e,d+m,f),D=Vm(c,e,d,d+m),T=_>=0&&n[_],S=D>=0&&n[D];if(r&&!S||!r&&!T){Jm(gd(a,s),o,c);let k=gV(r?mV:pV,n.length,r,i,u);!r&&S&&(n[D].providerFactory=k),Fm(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=YC(n[r?D:_],u,!r&&i);Fm(o,t,_>-1?_:D,k)}!r&&i&&S&&n[D].componentProviders++}}}function Fm(t,e,n,i){let r=Ts(e),o=hN(e);if(r||o){let c=(o?qt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let d=u.indexOf(n);d===-1?u.push(n,[i,c]):u[d+1].push(i,c)}else u.push(n,c)}}}function YC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Vm(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function pV(t,e,n,i){return Tg(this.multi,[])}function mV(t,e,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ao(n,n[be],this.providerFactory.index,i);o=a.slice(0,s),Tg(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Tg(r,o);return o}function Tg(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function gV(t,e,n,i,r){let o=new so(t,n,ye);return o.multi=[],o.index=e,o.componentProviders=0,YC(o,r,i&&!n),o}function hr(t,e=[]){return n=>{n.providersResolver=(i,r)=>fV(i,r?r(t):t,e)}}var _V=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=uD(!1,i.type),o=r.length>0?E_([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Q({token:e,providedIn:"environment",factory:()=>new e(j(Ot))});let t=e;return t})();function Ve(t){v_("NgStandalone"),t.getStandaloneInjector=e=>e.get(_V).getOrCreateStandaloneInjector(t)}function C_(t,e,n,i){return yV(Se(),SD(),t,e,n,i)}function Qd(t,e,n,i,r){return vV(Se(),SD(),t,e,n,i,r)}function JC(t,e){let n=t[e];return n===jn?void 0:n}function yV(t,e,n,i,r,o){let s=e+n;return Ci(t,s,r)?UC(t,s+1,o?i.call(o,r):i(r)):JC(t,s+1)}function vV(t,e,n,i,r,o,s){let a=e+n;return $C(t,a,r,o)?UC(t,a+2,s?i.call(s,r,o):i(r,o)):JC(t,a+2)}var Ii=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Yd=new Ii("17.3.12"),Jd=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var ZC=new W("");function _o(t){return!!t&&typeof t.then=="function"}function XC(t){return!!t&&typeof t.subscribe=="function"}var eI=new W(""),tI=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=L(eI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let s=o();if(_o(s))i.push(s);else if(XC(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Zd=new W("");function wV(){V1(()=>{throw new ie(600,!1)})}function bV(t){return t.isBoundToModule}function EV(t,e,n){try{let i=n();return _o(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var fr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(WD),this.afterRenderEffectManager=L(kC),this.externalTestViews=new Set,this.beforeRender=new ke,this.afterTick=new ke,this.componentTypes=[],this.components=[],this.isStable=L(fo).hasPendingTasks.pipe(K(i=>!i)),this._injector=L(Ot)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof wd;if(!this._injector.get(tI).done){let _=!o&&sD(i),D=!1;throw new ie(405,D)}let a;o?a=i:a=this._injector.get(Gd).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=bV(a)?void 0:this._injector.get(ar),u=r||a.selector,d=a.create(Bn.NULL,[],u,c),f=d.location.nativeElement,m=d.injector.get(ZC,null);return m?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Lm(this.components,d),m?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new ie(101,!1);let r=Pe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Pe(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===xC)throw new ie(103,!1);if(i){let s=r===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)DV(a,s,c)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Sg(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Sg(s))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Lm(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Zd,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Lm(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new ie(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Lm(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function DV(t,e,n){!e&&!Sg(t)||CV(t,n,e)}function Sg(t){return Wg(t)}function CV(t,e,n){let i;n?(i=0,t[le]|=1024):t[le]&64?i=0:i=1,RC(t,e,i)}var Mg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},I_=(()=>{let e=class e{compileModuleSync(i){return new bg(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=aD(i),s=iC(o.declarations).reduce((a,c)=>{let u=rr(c);return u&&a.push(new xs(u)),a},[]);return new Mg(r,s)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var IV=(()=>{let e=class e{constructor(){this.zone=L(Ce),this.applicationRef=L(fr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function TV(t){return[{provide:Ce,useFactory:t},{provide:Is,multi:!0,useFactory:()=>{let e=L(IV,{optional:!0});return()=>e.initialize()}},{provide:Is,multi:!0,useFactory:()=>{let e=L(xV);return()=>{e.initialize()}}},{provide:WD,useFactory:SV}]}function SV(){let t=L(Ce),e=L(Ei);return n=>t.runOutsideAngular(()=>e.handleError(n))}function MV(t){let e=TV(()=>new Ce(AV(t)));return uo([[],e])}function AV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var xV=(()=>{let e=class e{constructor(){this.subscription=new at,this.initialized=!1,this.zone=L(Ce),this.pendingTasks=L(fo)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function RV(){return typeof $localize<"u"&&$localize.locale||Id}var Xd=new W("",{providedIn:"root",factory:()=>L(Xd,Ee.Optional|Ee.SkipSelf)||RV()});var nI=new W("");var cd=null;function OV(t=[],e){return Bn.create({name:e,providers:[{provide:xd,useValue:"platform"},{provide:nI,useValue:new Set([()=>cd=null])},...t]})}function NV(t=[]){if(cd)return cd;let e=OV(t);return cd=e,wV(),PV(e),e}function PV(t){t.get(i_,null)?.forEach(n=>n())}function T_(){return!1}var Ri=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=kV;let t=e;return t})();function kV(t){return FV(on(),Se(),(t&16)===16)}function FV(t,e,n){if(Nd(t)&&!n){let i=cr(t.index,e);return new co(i,i)}else if(t.type&47){let i=e[Vn];return new co(i,e)}return null}var Ag=class{constructor(){}supports(e){return jC(e)}create(e){return new xg(e)}},VV=(t,e)=>e,xg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||VV}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<BE(i,r,o)?n:i,a=BE(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,d=c-r;if(u!=d){for(let m=0;m<u;m++){let _=m<o.length?o[m]:o[m]=0,D=_+m;d<=D&&D<u&&(o[m]=_+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!jC(e))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,xF(e,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new Rg(n,i),o,r)),e}_verifyReinsertion(e,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Td),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Td),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Rg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Og=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},Td=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new Og,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function BE(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}var Ng=class{constructor(){}supports(e){return e instanceof Map||D_(e)}create(){return new Pg}},Pg=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||D_(e)))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,n);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new kg(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}},kg=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function jE(){return new S_([new Ag])}var S_=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||jE()),deps:[[e,new Vg,new Ti]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r!=null)return r;throw new ie(901,!1)}};e.\u0275prov=Q({token:e,providedIn:"root",factory:jE});let t=e;return t})();function UE(){return new M_([new Ng])}var M_=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||UE()),deps:[[e,new Vg,new Ti]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r)return r;throw new ie(901,!1)}};e.\u0275prov=Q({token:e,providedIn:"root",factory:UE});let t=e;return t})();function iI(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=NV(i),o=[MV(),...n||[]],a=new Dd({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Ce);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Ei,null),d;c.runOutsideAngular(()=>{d=c.onError.subscribe({next:_=>{u.handleError(_)}})});let f=()=>a.destroy(),m=r.get(nI);return m.add(f),a.onDestroy(()=>{d.unsubscribe(),m.delete(f)}),EV(u,c,()=>{let _=a.get(tI);return _.runInitializers(),_.donePromise.then(()=>{let D=a.get(Xd,Id);lV(D||Id);let T=a.get(fr);return e!==void 0&&T.bootstrap(e),T})})})}catch(e){return Promise.reject(e)}}function kc(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function eh(t,e){let n=rr(t),i=e.elementInjector||Rd();return new xs(n).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}var uI=null;function Oi(){return uI}function dI(t){uI??=t}var th=class{};var Mt=new W(""),hI=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>L(jV),providedIn:"platform"});let t=e;return t})();var jV=(()=>{let e=class e extends hI{constructor(){super(),this._doc=L(Mt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Oi().getBaseHref(this._doc)}onPopState(i){let r=Oi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Oi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function fI(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function rI(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function yo(t){return t&&t[0]!=="?"?"?"+t:t}var nh=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>L(pI),providedIn:"root"});let t=e;return t})(),UV=new W(""),pI=(()=>{let e=class e extends nh{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(Mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return fI(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+yo(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+yo(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+yo(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(j(hI),j(UV,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Fc=(()=>{let e=class e{constructor(i){this._subject=new De,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=HV(rI(oI(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+yo(r))}normalize(i){return e.stripTrailingSlash(GV(this._basePath,oI(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+yo(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+yo(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=yo,e.joinWithSlash=fI,e.stripTrailingSlash=rI,e.\u0275fac=function(r){return new(r||e)(j(nh))},e.\u0275prov=Q({token:e,factory:()=>$V(),providedIn:"root"});let t=e;return t})();function $V(){return new Fc(j(nh))}function GV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function oI(t){return t.replace(/\/index.html$/,"")}function HV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function ih(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var A_=/\s+/,sI=[],Ls=(()=>{let e=class e{constructor(i,r){this._ngEl=i,this._renderer=r,this.initialClasses=sI,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(A_):sI}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(A_):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let o=this.stateMap.get(i);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],o=i[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(A_).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(r){return new(r||e)(ye(Yt),ye(ur))},e.\u0275dir=lt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Qt.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var x_=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ii=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new x_(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,a),aI(c,o)}});for(let o=0,s=r.length;o<s;o++){let c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);aI(s,o)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(ye(Un),ye(Di),ye(S_))},e.\u0275dir=lt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function aI(t,e){t.context.$implicit=e.item}var pr=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new R_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){cI("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){cI("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(ye(Un),ye(Di))},e.\u0275dir=lt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),R_=class{constructor(){this.$implicit=null,this.ngIf=null}};function cI(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Kt(e)}'.`)}var mI=(()=>{let e=class e{constructor(i,r,o){this._ngEl=i,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(i){this._ngStyle=i,!this._differ&&i&&(this._differ=this._differs.find(i).create())}ngDoCheck(){if(this._differ){let i=this._differ.diff(this._ngStyle);i&&this._applyChanges(i)}}_setStyle(i,r){let[o,s]=i.split("."),a=o.indexOf("-")===-1?void 0:ei.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,s?`${r}${s}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,o,a)}_applyChanges(i){i.forEachRemovedItem(r=>this._setStyle(r.key,null)),i.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),i.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};e.\u0275fac=function(r){return new(r||e)(ye(Yt),ye(M_),ye(ur))},e.\u0275dir=lt({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})();var It=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({});let t=e;return t})(),gI="browser",zV="server";function mr(t){return t===zV}var Vs=class{};var Lc=class{},oh=class{},Pi=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var N_=class{encodeKey(e){return _I(e)}encodeValue(e){return _I(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function KV(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var QV=/%(\d[a-f0-9])/gi,YV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _I(t){return encodeURIComponent(t).replace(QV,(e,n)=>YV[n]??e)}function rh(t){return`${t}`}var ri=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new N_,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=KV(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map(rh):[rh(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(rh(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(rh(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var P_=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function JV(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function yI(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function vI(t){return typeof Blob<"u"&&t instanceof Blob}function wI(t){return typeof FormData<"u"&&t instanceof FormData}function ZV(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Vc=class t{constructor(e,n,i,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(JV(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Pi,this.context??=new P_,!this.params)this.params=new ri,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||yI(this.body)||vI(this.body)||wI(this.body)||ZV(this.body)?this.body:this.body instanceof ri?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||wI(this.body)?null:vI(this.body)?this.body.type||null:yI(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ri?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((m,_)=>m.set(_,e.setHeaders[_]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,_)=>m.set(_,e.setParams[_]),d)),new t(n,i,s,{params:d,headers:u,context:f,reportProgress:c,responseType:r,withCredentials:a,transferCache:o})}},Bs=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Bs||{}),Bc=class{constructor(e,n=ch.Ok,i="OK"){this.headers=e.headers||new Pi,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},k_=class t extends Bc{constructor(e={}){super(e),this.type=Bs.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},sh=class t extends Bc{constructor(e={}){super(e),this.type=Bs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ah=class extends Bc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},ch=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(ch||{});function O_(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var F_=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,o={}){let s;if(i instanceof Vc)s=i;else{let u;o.headers instanceof Pi?u=o.headers:u=new Pi(o.headers);let d;o.params&&(o.params instanceof ri?d=o.params:d=new ri({fromObject:o.params})),s=new Vc(i,r,o.body!==void 0?o.body:null,{headers:u,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=X(s).pipe(Xi(u=>this.handler.handle(u)));if(i instanceof Vc||o.observe==="events")return a;let c=a.pipe(Ze(u=>u instanceof sh));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(K(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(K(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(K(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(K(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new ri().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,O_(o,r))}post(i,r,o={}){return this.request("POST",i,O_(o,r))}put(i,r,o={}){return this.request("PUT",i,O_(o,r))}};e.\u0275fac=function(r){return new(r||e)(j(Lc))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();function CI(t,e){return e(t)}function XV(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}function e2(t,e,n){return(i,r)=>Si(n,()=>e(i,o=>t(o,r)))}var t2=new W(""),V_=new W(""),n2=new W(""),i2=new W("");function r2(){let t=null;return(e,n)=>{t===null&&(t=(L(t2,{optional:!0})??[]).reduceRight(XV,CI));let i=L(fo),r=i.add();return t(e,n).pipe(wi(()=>i.remove(r)))}}var bI=(()=>{let e=class e extends Lc{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=L(fo);let o=L(i2,{optional:!0});this.backend=o??i}handle(i){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(V_),...this.injector.get(n2,[])]));this.chain=o.reduceRight((s,a)=>e2(s,a,this.injector),CI)}let r=this.pendingTasks.add();return this.chain(i,o=>this.backend.handle(o)).pipe(wi(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)(j(oh),j(Ot))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();var o2=/^\)\]\}',?\n/;function s2(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var EI=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new ie(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Te(r.\u0275loadImpl()):X(null)).pipe(je(()=>new ae(s=>{let a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((S,k)=>a.setRequestHeader(S,k.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let S=i.detectContentTypeHeader();S!==null&&a.setRequestHeader("Content-Type",S)}if(i.responseType){let S=i.responseType.toLowerCase();a.responseType=S!=="json"?S:"text"}let c=i.serializeBody(),u=null,d=()=>{if(u!==null)return u;let S=a.statusText||"OK",k=new Pi(a.getAllResponseHeaders()),H=s2(a)||i.url;return u=new k_({headers:k,status:a.status,statusText:S,url:H}),u},f=()=>{let{headers:S,status:k,statusText:H,url:B}=d(),z=null;k!==ch.NoContent&&(z=typeof a.response>"u"?a.responseText:a.response),k===0&&(k=z?ch.Ok:0);let re=k>=200&&k<300;if(i.responseType==="json"&&typeof z=="string"){let te=z;z=z.replace(o2,"");try{z=z!==""?JSON.parse(z):null}catch(b){z=te,re&&(re=!1,z={error:b,text:z})}}re?(s.next(new sh({body:z,headers:S,status:k,statusText:H,url:B||void 0})),s.complete()):s.error(new ah({error:z,headers:S,status:k,statusText:H,url:B||void 0}))},m=S=>{let{url:k}=d(),H=new ah({error:S,status:a.status||0,statusText:a.statusText||"Unknown Error",url:k||void 0});s.error(H)},_=!1,D=S=>{_||(s.next(d()),_=!0);let k={type:Bs.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(k.total=S.total),i.responseType==="text"&&a.responseText&&(k.partialText=a.responseText),s.next(k)},T=S=>{let k={type:Bs.UploadProgress,loaded:S.loaded};S.lengthComputable&&(k.total=S.total),s.next(k)};return a.addEventListener("load",f),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),i.reportProgress&&(a.addEventListener("progress",D),c!==null&&a.upload&&a.upload.addEventListener("progress",T)),a.send(c),s.next({type:Bs.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",f),a.removeEventListener("timeout",m),i.reportProgress&&(a.removeEventListener("progress",D),c!==null&&a.upload&&a.upload.removeEventListener("progress",T)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(j(Vs))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),II=new W(""),a2="XSRF-TOKEN",c2=new W("",{providedIn:"root",factory:()=>a2}),l2="X-XSRF-TOKEN",u2=new W("",{providedIn:"root",factory:()=>l2}),lh=class{},d2=(()=>{let e=class e{constructor(i,r,o){this.doc=i,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=ih(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(j(Mt),j(Pt),j(c2))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();function h2(t,e){let n=t.url.toLowerCase();if(!L(II)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let i=L(lh).getToken(),r=L(u2);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var TI=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(TI||{});function f2(t,e){return{\u0275kind:t,\u0275providers:e}}function p2(...t){let e=[F_,EI,bI,{provide:Lc,useExisting:bI},{provide:oh,useExisting:EI},{provide:V_,useValue:h2,multi:!0},{provide:II,useValue:!0},{provide:lh,useClass:d2}];for(let n of t)e.push(...n.\u0275providers);return uo(e)}var DI=new W("");function m2(){return f2(TI.LegacyInterceptors,[{provide:DI,useFactory:r2},{provide:V_,useExisting:DI,multi:!0}])}var SI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({providers:[p2(m2())]});let t=e;return t})();var j_=class extends th{constructor(){super(...arguments),this.supportsDOMEvents=!0}},U_=class t extends j_{static makeCurrent(){dI(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=g2();return n==null?null:_2(n)}resetBaseElement(){jc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ih(document.cookie,e)}},jc=null;function g2(){return jc=jc||document.querySelector("base"),jc?jc.getAttribute("href"):null}function _2(t){return new URL(t,document.baseURI).pathname}var y2=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),$_=new W(""),RI=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new ie(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(j($_),j(Ce))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),uh=class{constructor(e){this._doc=e}},L_="ng-app-id",OI=(()=>{let e=class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=mr(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${L_}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(L_),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(L_,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(j(Mt),j(n_),j(r_,8),j(Pt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),B_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},H_=/%COMP%/g,NI="%COMP%",v2=`_nghost-${NI}`,w2=`_ngcontent-${NI}`,b2=!0,E2=new W("",{providedIn:"root",factory:()=>b2});function D2(t){return w2.replace(H_,t)}function C2(t){return v2.replace(H_,t)}function PI(t,e){return e.map(n=>n.replace(H_,t))}var MI=(()=>{let e=class e{constructor(i,r,o,s,a,c,u,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=mr(c),this.defaultRenderer=new Uc(i,a,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zn.ShadowDom&&(r=Oe(q({},r),{encapsulation:Zn.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof dh?o.applyToHost(i):o instanceof $c&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Zn.Emulated:s=new dh(u,d,r,this.appId,f,a,c,m);break;case Zn.ShadowDom:return new G_(u,d,i,r,a,c,this.nonce,m);default:s=new $c(u,d,r,f,a,c,m);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(j(RI),j(OI),j(n_),j(E2),j(Mt),j(Pt),j(Ce),j(r_))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Uc=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(B_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(AI(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(AI(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ie(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=B_[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=B_[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(ei.DashCase|ei.Important)?e.style.setProperty(n,i,r&ei.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&ei.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Oi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function AI(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var G_=class extends Uc{constructor(e,n,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=PI(r.id,r.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},$c=class extends Uc{constructor(e,n,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?PI(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},dh=class extends $c{constructor(e,n,i,r,o,s,a,c){let u=r+"-"+i.id;super(e,n,i,o,s,a,c,u),this.contentAttr=D2(u),this.hostAttr=C2(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},I2=(()=>{let e=class e extends uh{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(j(Mt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),xI=["alt","control","meta","shift"],T2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},S2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},M2=(()=>{let e=class e extends uh{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Oi().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),xI.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(i,r){let o=T2[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),xI.forEach(a=>{if(a!==o){let c=S2[a];c(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(j(Mt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();function kI(t,e){return iI(q({rootComponent:t},A2(e)))}function A2(t){return{appProviders:[...P2,...t?.providers??[]],platformProviders:N2}}function x2(){U_.makeCurrent()}function R2(){return new Ei}function O2(){return ZD(document),document}var N2=[{provide:Pt,useValue:gI},{provide:i_,useValue:x2,multi:!0},{provide:Mt,useFactory:O2,deps:[]}];var P2=[{provide:xd,useValue:"root"},{provide:Ei,useFactory:R2,deps:[]},{provide:$_,useClass:I2,multi:!0,deps:[Mt,Ce,Pt]},{provide:$_,useClass:M2,multi:!0,deps:[Mt]},MI,OI,RI,{provide:Sc,useExisting:MI},{provide:Vs,useClass:y2,deps:[]},[]];var FI=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(j(Mt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ve="primary",il=Symbol("RouteTitle"),Q_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Hs(t){return new Q_(t)}function V2(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function L2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!oi(t[n],e[n]))return!1;return!0}function oi(t,e){let n=t?Y_(t):void 0,i=e?Y_(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!$I(t[r],e[r]))return!1;return!0}function Y_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function $I(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function GI(t){return t.length>0?t[t.length-1]:null}function vr(t){return mm(t)?t:_o(t)?Te(Promise.resolve(t)):X(t)}var B2={exact:zI,subset:WI},HI={exact:j2,subset:U2,ignored:()=>!0};function VI(t,e,n){return B2[n.paths](t.root,e.root,n.matrixParams)&&HI[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function j2(t,e){return oi(t,e)}function zI(t,e,n){if(!wo(t.segments,e.segments)||!ph(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!zI(t.children[i],e.children[i],n))return!1;return!0}function U2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>$I(t[n],e[n]))}function WI(t,e,n){return qI(t,e,e.segments,n)}function qI(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!wo(r,n)||e.hasChildren()||!ph(r,n,i))}else if(t.segments.length===n.length){if(!wo(t.segments,n)||!ph(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!WI(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!wo(t.segments,r)||!ph(t.segments,r,i)||!t.children[ve]?!1:qI(t.children[ve],e,o,i)}}function ph(t,e,n){return e.every((i,r)=>HI[n](t[r].parameters,i.parameters))}var gr=class{constructor(e=new Le([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Hs(this.queryParams),this._queryParamMap}toString(){return H2.serialize(this)}},Le=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mh(this)}},vo=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Hs(this.parameters),this._parameterMap}toString(){return QI(this)}};function $2(t,e){return wo(t,e)&&t.every((n,i)=>oi(n.parameters,e[i].parameters))}function wo(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function G2(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===ve&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==ve&&(n=n.concat(e(r,i)))}),n}var Ey=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>new _h,providedIn:"root"});let t=e;return t})(),_h=class{parse(e){let n=new Z_(e);return new gr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Gc(e.root,!0)}`,i=q2(e.queryParams),r=typeof e.fragment=="string"?`#${z2(e.fragment)}`:"";return`${n}${i}${r}`}},H2=new _h;function mh(t){return t.segments.map(e=>QI(e)).join("/")}function Gc(t,e){if(!t.hasChildren())return mh(t);if(e){let n=t.children[ve]?Gc(t.children[ve],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==ve&&i.push(`${r}:${Gc(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=G2(t,(i,r)=>r===ve?[Gc(t.children[ve],!1)]:[`${r}:${Gc(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[ve]!=null?`${mh(t)}/${n[0]}`:`${mh(t)}/(${n.join("//")})`}}function KI(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hh(t){return KI(t).replace(/%3B/gi,";")}function z2(t){return encodeURI(t)}function J_(t){return KI(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gh(t){return decodeURIComponent(t)}function LI(t){return gh(t.replace(/\+/g,"%20"))}function QI(t){return`${J_(t.path)}${W2(t.parameters)}`}function W2(t){return Object.entries(t).map(([e,n])=>`;${J_(e)}=${J_(n)}`).join("")}function q2(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${hh(n)}=${hh(r)}`).join("&"):`${hh(n)}=${hh(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var K2=/^[^\/()?;#]+/;function z_(t){let e=t.match(K2);return e?e[0]:""}var Q2=/^[^\/()?;=#]+/;function Y2(t){let e=t.match(Q2);return e?e[0]:""}var J2=/^[^=?&#]+/;function Z2(t){let e=t.match(J2);return e?e[0]:""}var X2=/^[^&#]+/;function eL(t){let e=t.match(X2);return e?e[0]:""}var Z_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[ve]=new Le(e,n)),i}parseSegment(){let e=z_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(e),new vo(gh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Y2(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=z_(this.remaining);r&&(i=r,this.capture(i))}e[gh(n)]=gh(i)}parseQueryParam(e){let n=Z2(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=eL(this.remaining);s&&(i=s,this.capture(i))}let r=LI(n),o=LI(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=z_(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ie(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ve);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ve]:new Le([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ie(4011,!1)}};function YI(t){return t.segments.length>0?new Le([],{[ve]:t}):t}function JI(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=JI(r);if(i===ve&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new Le(t.segments,e);return tL(n)}function tL(t){if(t.numberOfChildren===1&&t.children[ve]){let e=t.children[ve];return new Le(t.segments.concat(e.segments),e.children)}return t}function zs(t){return t instanceof gr}function nL(t,e,n=null,i=null){let r=ZI(t);return XI(r,e,n,i)}function ZI(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new Le(o.url,s);return o===t&&(e=a),a}let i=n(t.root),r=YI(i);return e??r}function XI(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return W_(r,r,r,n,i);let o=iL(e);if(o.toRoot())return W_(r,r,new Le([],{}),n,i);let s=rL(o,r,t),a=s.processChildren?Wc(s.segmentGroup,s.index,o.commands):tT(s.segmentGroup,s.index,o.commands);return W_(r,s.segmentGroup,a,n,i)}function yh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Qc(t){return typeof t=="object"&&t!=null&&t.outlets}function W_(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;t===e?s=n:s=eT(t,e,n);let a=YI(JI(s));return new gr(a,o,r)}function eT(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=eT(o,e,n)}),new Le(t.segments,i)}var vh=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&yh(i[0]))throw new ie(4003,!1);let r=i.find(Qc);if(r&&r!==GI(i))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new vh(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new vh(n,e,i)}var $s=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function rL(t,e,n){if(t.isAbsolute)return new $s(e,!0,0);if(!n)return new $s(e,!1,NaN);if(n.parent===null)return new $s(n,!0,0);let i=yh(t.commands[0])?0:1,r=n.segments.length-1+i;return oL(n,r,t.numberOfDoubleDots)}function oL(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ie(4005,!1);r=i.segments.length}return new $s(i,!1,r-o)}function sL(t){return Qc(t[0])?t[0].outlets:{[ve]:t}}function tT(t,e,n){if(t??=new Le([],{}),t.segments.length===0&&t.hasChildren())return Wc(t,e,n);let i=aL(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new Le(t.segments.slice(0,i.pathIndex),{});return o.children[ve]=new Le(t.segments.slice(i.pathIndex),t.children),Wc(o,0,r)}else return i.match&&r.length===0?new Le(t.segments,{}):i.match&&!t.hasChildren()?X_(t,e,n):i.match?Wc(t,0,r):X_(t,e,n)}function Wc(t,e,n){if(n.length===0)return new Le(t.segments,{});{let i=sL(n),r={};if(Object.keys(i).some(o=>o!==ve)&&t.children[ve]&&t.numberOfChildren===1&&t.children[ve].segments.length===0){let o=Wc(t.children[ve],e,n);return new Le(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=tT(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Le(t.segments,r)}}function aL(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let s=t.segments[r],a=n[i];if(Qc(a))break;let c=`${a}`,u=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!jI(c,u,s))return o;i+=2}else{if(!jI(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function X_(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(Qc(o)){let c=cL(o.outlets);return new Le(i,c)}if(r===0&&yh(n[0])){let c=t.segments[e];i.push(new vo(c.path,BI(n[0]))),r++;continue}let s=Qc(o)?o.outlets[ve]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&yh(a)?(i.push(new vo(s,BI(a))),r+=2):(i.push(new vo(s,{})),r++)}return new Le(i,{})}function cL(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=X_(new Le([],{}),0,i))}),e}function BI(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function jI(t,e,n){return t==n.path&&oi(e,n.parameters)}var qc="imperative",kt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(kt||{}),En=class{constructor(e,n){this.id=e,this.url=n}},Yc=class extends En{constructor(e,n,i="imperative",r=null){super(e,n),this.type=kt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},bo=class extends En{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=kt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},fn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(fn||{}),ey=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ey||{}),_r=class extends En{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=kt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Eo=class extends En{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=kt.NavigationSkipped}},Jc=class extends En{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=kt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wh=class extends En{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=kt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ty=class extends En{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=kt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ny=class extends En{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=kt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},iy=class extends En{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=kt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ry=class extends En{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=kt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oy=class{constructor(e){this.route=e,this.type=kt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sy=class{constructor(e){this.route=e,this.type=kt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ay=class{constructor(e){this.snapshot=e,this.type=kt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cy=class{constructor(e){this.snapshot=e,this.type=kt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ly=class{constructor(e){this.snapshot=e,this.type=kt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uy=class{constructor(e){this.snapshot=e,this.type=kt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Zc=class{},Xc=class{constructor(e){this.url=e}};var dy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Th,this.attachRef=null}},Th=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new dy,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=hy(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=hy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=fy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return fy(e,this._root).map(n=>n.value)}};function hy(t,e){if(t===e.value)return e;for(let n of e.children){let i=hy(t,n);if(i)return i}return null}function fy(t,e){if(t===e.value)return[e];for(let n of e.children){let i=fy(t,n);if(i.length)return i.unshift(e),i}return[]}var hn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Us(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Eh=class extends bh{constructor(e,n){super(e),this.snapshot=n,Cy(this,e)}toString(){return this.snapshot.toString()}};function nT(t){let e=lL(t),n=new ct([new vo("",{})]),i=new ct({}),r=new ct({}),o=new ct({}),s=new ct(""),a=new yr(n,i,o,s,r,ve,t,e.root);return a.snapshot=e.root,new Eh(new hn(a,[]),e)}function lL(t){let e={},n={},i={},r="",o=new el([],e,i,r,n,ve,t,null,{});return new Dh("",new hn(o,[]))}var yr=class{constructor(e,n,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(K(u=>u[il]))??X(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>Hs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>Hs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Dy(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:q(q({},e.params),t.params),data:q(q({},e.data),t.data),resolve:q(q(q(q({},t.data),e.data),r?.data),t._resolvedData)}:i={params:q({},t.params),data:q({},t.data),resolve:q(q({},t.data),t._resolvedData??{})},r&&rT(r)&&(i.resolve[il]=r.title),i}var el=class{get title(){return this.data?.[il]}constructor(e,n,i,r,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Hs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Hs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Dh=class extends bh{constructor(e,n){super(n),this.url=e,Cy(this,n)}toString(){return iT(this._root)}};function Cy(t,e){e.value._routerState=t,e.children.forEach(n=>Cy(t,n))}function iT(t){let e=t.children.length>0?` { ${t.children.map(iT).join(", ")} } `:"";return`${t.value}${e}`}function q_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,oi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),oi(e.params,n.params)||t.paramsSubject.next(n.params),L2(e.url,n.url)||t.urlSubject.next(n.url),oi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function py(t,e){let n=oi(t.params,e.params)&&$2(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||py(t.parent,e.parent))}function rT(t){return typeof t.title=="string"||t.title===null}var Iy=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ve,this.activateEvents=new De,this.deactivateEvents=new De,this.attachEvents=new De,this.detachEvents=new De,this.parentContexts=L(Th),this.location=L(Un),this.changeDetector=L(Ri),this.environmentInjector=L(Ot),this.inputBinder=L(Ty,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new my(i,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=lt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ni]});let t=e;return t})(),my=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===yr?this.route:e===Th?this.childContexts:this.parent.get(e,n)}},Ty=new W("");function uL(t,e,n){let i=tl(t,e._root,n?n._root:void 0);return new Eh(i,e)}function tl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=dL(t,e,n);return new hn(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>tl(t,a)),s}}let i=hL(e.value),r=e.children.map(o=>tl(t,o));return new hn(i,r)}}function dL(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return tl(t,i,r);return tl(t,i)})}function hL(t){return new yr(new ct(t.url),new ct(t.params),new ct(t.queryParams),new ct(t.fragment),new ct(t.data),t.outlet,t.component,t)}var oT="ngNavigationCancelingError";function sT(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=zs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=aT(!1,fn.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function aT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[oT]=!0,n.cancellationCode=e,n}function fL(t){return cT(t)&&zs(t.url)}function cT(t){return!!t&&t[oT]}var pL=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ve],decls:1,vars:0,template:function(r,o){r&1&&se(0,"router-outlet")},dependencies:[Iy],encapsulation:2});let t=e;return t})();function mL(t,e){return t.providers&&!t._injector&&(t._injector=E_(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Sy(t){let e=t.children&&t.children.map(Sy),n=e?Oe(q({},t),{children:e}):q({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ve&&(n.component=pL),n}function si(t){return t.outlet||ve}function gL(t,e){let n=t.filter(i=>si(i)===e);return n.push(...t.filter(i=>si(i)!==e)),n}function rl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var _L=(t,e,n,i)=>K(r=>(new gy(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),gy=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),q_(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Us(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Us(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Us(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Us(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new uy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new cy(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(q_(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),q_(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=rl(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}},Ch=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Gs=class{constructor(e,n){this.component=e,this.route=n}};function yL(t,e,n){let i=t._root,r=e?e._root:null;return Hc(i,r,n,[i.value])}function vL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function qs(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!zE(t)?t:e.get(t):i}function Hc(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Us(e);return t.children.forEach(s=>{wL(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Kc(a,n.getContext(s),r)),r}function wL(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=bL(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Ch(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Hc(t,e,a?a.children:null,i,r):Hc(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Gs(a.outlet.component,s))}else s&&Kc(e,a,r),r.canActivateChecks.push(new Ch(i)),o.component?Hc(t,null,a?a.children:null,i,r):Hc(t,null,n,i,r);return r}function bL(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!wo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!wo(t.url,e.url)||!oi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!py(t,e)||!oi(t.queryParams,e.queryParams);case"paramsChange":default:return!py(t,e)}}function Kc(t,e,n){let i=Us(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Kc(s,e.children.getContext(o),n):Kc(s,null,n):Kc(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Gs(e.outlet.component,r)):n.canDeactivateChecks.push(new Gs(null,r)):n.canDeactivateChecks.push(new Gs(null,r))}function ol(t){return typeof t=="function"}function EL(t){return typeof t=="boolean"}function DL(t){return t&&ol(t.canLoad)}function CL(t){return t&&ol(t.canActivate)}function IL(t){return t&&ol(t.canActivateChild)}function TL(t){return t&&ol(t.canDeactivate)}function SL(t){return t&&ol(t.canMatch)}function lT(t){return t instanceof ln||t?.name==="EmptyError"}var fh=Symbol("INITIAL_VALUE");function Ws(){return je(t=>fc(t.map(e=>e.pipe(nn(1),tr(fh)))).pipe(K(e=>{for(let n of e)if(n!==!0){if(n===fh)return fh;if(n===!1||n instanceof gr)return n}return!0}),Ze(e=>e!==fh),nn(1)))}function ML(t,e){return tt(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?X(Oe(q({},n),{guardsResult:!0})):AL(s,i,r,t).pipe(tt(a=>a&&EL(a)?xL(i,o,t,e):X(a)),K(a=>Oe(q({},n),{guardsResult:a})))})}function AL(t,e,n,i){return Te(t).pipe(tt(r=>kL(r.component,r.route,n,e,i)),yn(r=>r!==!0,!0))}function xL(t,e,n,i){return Te(e).pipe(Xi(r=>Ji(OL(r.route.parent,i),RL(r.route,i),PL(t,r.path,n),NL(t,r.route,n))),yn(r=>r!==!0,!0))}function RL(t,e){return t!==null&&e&&e(new ly(t)),X(!0)}function OL(t,e){return t!==null&&e&&e(new ay(t)),X(!0)}function NL(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return X(!0);let r=i.map(o=>qu(()=>{let s=rl(e)??n,a=qs(o,s),c=CL(a)?a.canActivate(e,t):Si(s,()=>a(e,t));return vr(c).pipe(yn())}));return X(r).pipe(Ws())}function PL(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>vL(s)).filter(s=>s!==null).map(s=>qu(()=>{let a=s.guards.map(c=>{let u=rl(s.node)??n,d=qs(c,u),f=IL(d)?d.canActivateChild(i,t):Si(u,()=>d(i,t));return vr(f).pipe(yn())});return X(a).pipe(Ws())}));return X(o).pipe(Ws())}function kL(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return X(!0);let s=o.map(a=>{let c=rl(e)??r,u=qs(a,c),d=TL(u)?u.canDeactivate(t,e,n,i):Si(c,()=>u(t,e,n,i));return vr(d).pipe(yn())});return X(s).pipe(Ws())}function FL(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return X(!0);let o=r.map(s=>{let a=qs(s,t),c=DL(a)?a.canLoad(e,n):Si(t,()=>a(e,n));return vr(c)});return X(o).pipe(Ws(),uT(i))}function uT(t){return cm(nt(e=>{if(zs(e))throw sT(t,e)}),K(e=>e===!0))}function VL(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return X(!0);let o=r.map(s=>{let a=qs(s,t),c=SL(a)?a.canMatch(e,n):Si(t,()=>a(e,n));return vr(c)});return X(o).pipe(Ws(),uT(i))}var nl=class{constructor(e){this.segmentGroup=e||null}},Ih=class extends Error{constructor(e){super(),this.urlTree=e}};function js(t){return fs(new nl(t))}function LL(t){return fs(new ie(4e3,!1))}function BL(t){return fs(aT(!1,fn.GuardRejected))}var _y=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return X(i);if(r.numberOfChildren>1||!r.children[ve])return LL(e.redirectTo);r=r.children[ve]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Ih(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new gr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new Le(o,s)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new ie(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},yy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jL(t,e,n,i,r){let o=My(t,e,n);return o.matched?(i=mL(e,i),VL(i,e,n,r).pipe(K(s=>s===!0?o:q({},yy)))):X(o)}function My(t,e,n){if(e.path==="**")return UL(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?q({},yy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||V2)(n,t,e);if(!r)return q({},yy);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?q(q({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function UL(t){return{matched:!0,parameters:t.length>0?GI(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function UI(t,e,n,i){return n.length>0&&HL(t,n,i)?{segmentGroup:new Le(e,GL(i,new Le(n,t.children))),slicedSegments:[]}:n.length===0&&zL(t,n,i)?{segmentGroup:new Le(t.segments,$L(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new Le(t.segments,t.children),slicedSegments:n}}function $L(t,e,n,i){let r={};for(let o of n)if(Sh(t,e,o)&&!i[si(o)]){let s=new Le([],{});r[si(o)]=s}return q(q({},i),r)}function GL(t,e){let n={};n[ve]=e;for(let i of t)if(i.path===""&&si(i)!==ve){let r=new Le([],{});n[si(i)]=r}return n}function HL(t,e,n){return n.some(i=>Sh(t,e,i)&&si(i)!==ve)}function zL(t,e,n){return n.some(i=>Sh(t,e,i))}function Sh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function WL(t,e,n,i){return si(t)!==i&&(i===ve||!Sh(e,n,t))?!1:My(e,t,n).matched}function qL(t,e,n){return e.length===0&&!t.children[n]}var vy=class{};function KL(t,e,n,i,r,o,s="emptyOnly"){return new wy(t,e,n,i,r,s,o).recognize()}var QL=31,wy=class{constructor(e,n,i,r,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new _y(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=UI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(n=>{let i=new el([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,{},ve,this.rootComponentType,null,{}),r=new hn(i,n),o=new Dh("",r),s=nL(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ve).pipe(Zi(i=>{if(i instanceof Ih)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof nl?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=Dy(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(K(o=>o instanceof hn?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return Te(r).pipe(Xi(o=>{let s=i.children[o],a=gL(n,o);return this.processSegmentGroup(e,a,s,o)}),eo((o,s)=>(o.push(...s),o)),er(null),Em(),tt(o=>{if(o===null)return js(i);let s=dT(o);return YL(s),X(s)}))}processSegment(e,n,i,r,o,s){return Te(n).pipe(Xi(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,o,s).pipe(Zi(c=>{if(c instanceof nl)return X(null);throw c}))),yn(a=>!!a),Zi(a=>{if(lT(a))return qL(i,r,o)?X(new vy):js(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,o,s,a){return WL(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s):js(r):js(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:d}=My(n,r,o);if(!a)return js(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>QL&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,f).pipe(tt(m=>this.processSegment(e,i,n,m.concat(d),s,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let s=jL(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(je(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(je(({routes:c})=>{let u=i._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:m}=a,_=new el(d,m,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,ZL(i),si(i),i.component??i._loadedComponent??null,i,XL(i)),{segmentGroup:D,slicedSegments:T}=UI(n,d,f,c);if(T.length===0&&D.hasChildren())return this.processChildren(u,c,D).pipe(K(k=>k===null?null:new hn(_,k)));if(c.length===0&&T.length===0)return X(new hn(_,[]));let S=si(i)===o;return this.processSegment(u,c,D,T,S?ve:o,!0).pipe(K(k=>new hn(_,k instanceof hn?[k]:[])))}))):js(n)))}getChildConfig(e,n,i){return n.children?X({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?X({routes:n._loadedRoutes,injector:n._loadedInjector}):FL(e,n,i,this.urlSerializer).pipe(tt(r=>r?this.configLoader.loadChildren(e,n).pipe(nt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):BL(n))):X({routes:[],injector:e})}};function YL(t){t.sort((e,n)=>e.value.outlet===ve?-1:n.value.outlet===ve?1:e.value.outlet.localeCompare(n.value.outlet))}function JL(t){let e=t.value.routeConfig;return e&&e.path===""}function dT(t){let e=[],n=new Set;for(let i of t){if(!JL(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=dT(i.children);e.push(new hn(i.value,r))}return e.filter(i=>!n.has(i))}function ZL(t){return t.data||{}}function XL(t){return t.resolve||{}}function eB(t,e,n,i,r,o){return tt(s=>KL(t,e,n,i,s.extractedUrl,r,o).pipe(K(({state:a,tree:c})=>Oe(q({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function tB(t,e){return tt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return X(n);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of hT(c))s.add(u);let a=0;return Te(s).pipe(Xi(c=>o.has(c)?nB(c,i,t,e):(c.data=Dy(c,c.parent,t).resolve,X(void 0))),nt(()=>a++),ms(1),tt(c=>a===s.size?X(n):bt))})}function hT(t){let e=t.children.map(n=>hT(n)).flat();return[t,...e]}function nB(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!rT(r)&&(o[il]=r.title),iB(o,t,e,i).pipe(K(s=>(t._resolvedData=s,t.data=Dy(t,t.parent,n).resolve,null)))}function iB(t,e,n,i){let r=Y_(t);if(r.length===0)return X({});let o={};return Te(r).pipe(tt(s=>rB(t[s],e,n,i).pipe(yn(),nt(a=>{o[s]=a}))),ms(1),wm(o),Zi(s=>lT(s)?bt:fs(s)))}function rB(t,e,n,i){let r=rl(e)??i,o=qs(t,r),s=o.resolve?o.resolve(e,n):Si(r,()=>o(e,n));return vr(s)}function K_(t){return je(e=>{let n=t(e);return n?Te(n).pipe(K(()=>e)):X(e)})}var fT=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===ve);return r}getResolvedTitleForRoute(i){return i.data[il]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>L(oB),providedIn:"root"});let t=e;return t})(),oB=(()=>{let e=class e extends fT{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(j(FI))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ay=new W("",{providedIn:"root",factory:()=>({})}),xy=new W(""),sB=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(I_)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return X(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=vr(i.loadComponent()).pipe(K(pT),nt(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),wi(()=>{this.componentLoaders.delete(i)})),o=new as(r,()=>new ke).pipe(ss());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=aB(r,this.compiler,i,this.onLoadEndListener).pipe(wi(()=>{this.childrenLoaders.delete(r)})),a=new as(s,()=>new ke).pipe(ss());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aB(t,e,n,i){return vr(t.loadChildren()).pipe(K(pT),tt(r=>r instanceof Mc||Array.isArray(r)?X(r):Te(e.compileModuleAsync(r))),K(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(xy,[],{optional:!0,self:!0}).flat()),{routes:s.map(Sy),injector:o}}))}function cB(t){return t&&typeof t=="object"&&"default"in t}function pT(t){return cB(t)?t.default:t}var Ry=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>L(lB),providedIn:"root"});let t=e;return t})(),lB=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uB=new W("");var dB=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ke,this.transitionAbortSubject=new ke,this.configLoader=L(sB),this.environmentInjector=L(Ot),this.urlSerializer=L(Ey),this.rootContexts=L(Th),this.location=L(Fc),this.inputBindingEnabled=L(Ty,{optional:!0})!==null,this.titleStrategy=L(fT),this.options=L(Ay,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(Ry),this.createViewTransition=L(uB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let i=o=>this.events.next(new oy(o)),r=o=>this.events.next(new sy(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Oe(q(q({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new ct({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:qc,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ze(s=>s.id!==0),K(s=>Oe(q({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),je(s=>{let a=!1,c=!1;return X(s).pipe(je(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",fn.SupersededByNewNavigation),bt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Oe(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!d&&f!=="reload"){let m="";return this.events.next(new Eo(u.id,this.urlSerializer.serialize(u.rawUrl),m,ey.IgnoredSameUrlNavigation)),u.resolve(null),bt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return X(u).pipe(je(m=>{let _=this.transitions?.getValue();return this.events.next(new Yc(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),_!==this.transitions?.getValue()?bt:Promise.resolve(m)}),eB(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Oe(q({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let _=new wh(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:m,extractedUrl:_,source:D,restoredState:T,extras:S}=u,k=new Yc(m,this.urlSerializer.serialize(_),D,T);this.events.next(k);let H=nT(this.rootComponentType).snapshot;return this.currentTransition=s=Oe(q({},u),{targetSnapshot:H,urlAfterRedirects:_,extras:Oe(q({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,X(s)}else{let m="";return this.events.next(new Eo(u.id,this.urlSerializer.serialize(u.extractedUrl),m,ey.IgnoredByUrlHandlingStrategy)),u.resolve(null),bt}}),nt(u=>{let d=new ty(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),K(u=>(this.currentTransition=s=Oe(q({},u),{guards:yL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),ML(this.environmentInjector,u=>this.events.next(u)),nt(u=>{if(s.guardsResult=u.guardsResult,zs(u.guardsResult))throw sT(this.urlSerializer,u.guardsResult);let d=new ny(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Ze(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",fn.GuardRejected),!1)),K_(u=>{if(u.guards.canActivateChecks.length)return X(u).pipe(nt(d=>{let f=new iy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),je(d=>{let f=!1;return X(d).pipe(tB(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",fn.NoDataFromResolver)}}))}),nt(d=>{let f=new ry(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),K_(u=>{let d=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(nt(_=>{f.component=_}),K(()=>{})));for(let _ of f.children)m.push(...d(_));return m};return fc(d(u.targetSnapshot.root)).pipe(er(null),nn(1))}),K_(()=>this.afterPreactivation()),je(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?Te(f).pipe(K(()=>s)):X(s)}),K(u=>{let d=uL(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Oe(q({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),nt(()=>{this.events.next(new Zc)}),_L(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),nn(1),nt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new bo(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Ut(this.transitionAbortSubject.pipe(nt(u=>{throw u}))),wi(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",fn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zi(u=>{if(c=!0,cT(u))this.events.next(new _r(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),fL(u)?this.events.next(new Xc(u.url)):s.resolve(!1);else{this.events.next(new Jc(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(u))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return bt}))}))}cancelNavigationTransition(i,r,o){let s=new _r(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hB(t){return t!==qc}var fB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>L(pB),providedIn:"root"});let t=e;return t})(),by=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},pB=(()=>{let e=class e extends by{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=xi(e)))(o||e)}})(),e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>L(mB),providedIn:"root"});let t=e;return t})(),mB=(()=>{let e=class e extends mT{constructor(){super(...arguments),this.location=L(Fc),this.urlSerializer=L(Ey),this.options=L(Ay,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(Ry),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new gr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=nT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Yc)this.stateMemento=this.createStateMemento();else if(i instanceof Eo)this.rawUrlTree=r.initialUrl;else if(i instanceof wh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof Zc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof _r&&(i.code===fn.GuardRejected||i.code===fn.NoDataFromResolver)?this.restoreHistory(r):i instanceof Jc?this.restoreHistory(r,!0):i instanceof bo&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=q(q({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=q(q({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=xi(e)))(o||e)}})(),e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),zc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(zc||{});function gB(t,e){t.events.pipe(Ze(n=>n instanceof bo||n instanceof _r||n instanceof Jc||n instanceof Eo),K(n=>n instanceof bo||n instanceof Eo?zc.COMPLETE:(n instanceof _r?n.code===fn.Redirect||n.code===fn.SupersededByNewNavigation:!1)?zc.REDIRECTING:zc.FAILED),Ze(n=>n!==zc.REDIRECTING),nn(1)).subscribe(()=>{e()})}function _B(t){throw t}var yB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ks=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=L(Jd),this.stateManager=L(mT),this.options=L(Ay,{optional:!0})||{},this.pendingTasks=L(fo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(dB),this.urlSerializer=L(Ey),this.location=L(Fc),this.urlHandlingStrategy=L(Ry),this._events=new ke,this.errorHandler=this.options.errorHandler||_B,this.navigated=!1,this.routeReuseStrategy=L(fB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(xy,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(Ty,{optional:!0}),this.eventsSubscription=new at,this.isNgZoneEnabled=L(Ce)instanceof Ce&&Ce.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof _r&&r.code!==fn.Redirect&&r.code!==fn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof bo)this.navigated=!0;else if(r instanceof Xc){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||hB(o.source)};this.scheduleNavigation(a,qc,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}bB(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),qc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=q({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Sy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=q(q({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let _=o?o.snapshot:this.routerState.snapshot.root;m=ZI(_)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),m=this.currentUrlTree.root}return XI(m,i,f,d??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=zs(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,qc,null,r)}navigate(i,r={skipLocationChange:!1}){return wB(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=q({},yB):r===!1?o=q({},vB):o=r,zs(i))return VI(this.currentUrlTree,i,o);let s=this.parseUrl(i);return VI(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,d;a?(c=a.resolve,u=a.reject,d=a.promise):d=new Promise((m,_)=>{c=m,u=_});let f=this.pendingTasks.add();return gB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ie(4008,!1)}function bB(t){return!(t instanceof Zc)&&!(t instanceof Xc)}var EB=new W("");function Mh(t,...e){return uo([{provide:xy,multi:!0,useValue:t},[],{provide:yr,useFactory:DB,deps:[Ks]},{provide:Zd,multi:!0,useFactory:CB},e.map(n=>n.\u0275providers)])}function DB(t){return t.routerState.root}function CB(){let t=L(Bn);return e=>{let n=t.get(fr);if(e!==n.components[0])return;let i=t.get(Ks),r=t.get(IB);t.get(TB)===1&&i.initialNavigation(),t.get(SB,null,Ee.Optional)?.setUpPreloading(),t.get(EB,null,Ee.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var IB=new W("",{factory:()=>new ke}),TB=new W("",{providedIn:"root",factory:()=>1});var SB=new W("");var MB="firebase",AB="10.13.0";gn(MB,AB,"app");var Dn=new Ii("ANGULARFIRE2_VERSION");var xB=(t,e)=>{let n=e?[e]:Du(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},ki=class{constructor(){return xB(RB)}},RB="app-check";function Oy(){}var Ah=class{zone;delegate;constructor(e,n=fm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},Ny=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oy,{},Oy,Oy)),n.pipe(nt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Do=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ah(Zone.current)),this.insideAngular=n.run(()=>new Ah(Zone.current,ds)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(j(Ce))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function OB(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function sn(t){return NB(OB())(t)}function NB(t){return function(n){return n=n.lift(new Ny(t.ngZone)),n.pipe(Rn(t.outsideAngular),Wt(t.insideAngular))}}var Qs=class{constructor(e){return e}},ky=class{constructor(){return Du()}};function PB(t){return t&&t.length===1?t[0]:new Qs(Eu())}var _T=new W("angularfire2._apps"),kB={provide:Qs,useFactory:PB,deps:[[new Ti,_T]]},FB={provide:ky,deps:[[new Ti,_T]]};var yT=(()=>{class t{constructor(n){gn("angularfire",Dn.full,"core"),gn("angularfire",Dn.full,"app"),gn("angular",Yd.full,n.toString())}static \u0275fac=function(i){return new(i||t)(j(Pt))};static \u0275mod=ot({type:t});static \u0275inj=rt({providers:[kB,FB]})}return t})();var wr={production:!1,BASE_API_URL:"",firebase:{apiKey:"AIzaSyBNWYDp0fPgLU0npKMC0RoS6C14fHp2mpk",authDomain:"comemivesto-5e5f9.firebaseapp.com",projectId:"comemivesto-5e5f9",storageBucket:"comemivesto-5e5f9.appspot.com",messagingSenderId:"124990581718",appId:"1:124990581718:web:51c8cbf699123bd0e8d277",measurementId:"G-8D9XBPY0Q7"}};function VB(t,e){if(t&1){let n=Dt();N(0,"button",7),ge("click",function(r){ue(n);let o=he();return de(o.onClickAddButton(r))}),se(1,"i",8),Y(2," Aggiungi "),P()}}function LB(t,e){if(t&1){let n=Dt();N(0,"button",9),ge("click",function(r){ue(n);let o=he();return de(o.onClickCrocetta(r))}),se(1,"i",10),P()}}var xh=(()=>{let e=class e{constructor(){this.caption="",this.cssClass="",this.showBreadcrumb=!1,this.isFooter=!1,this.isClosable=!0,this.addButtonShow=!1,this.help="",this.idHelper=0,this.emitHelperClick=new De,this.emitChiusura=new De,this.emitAddEvent=new De,this.emitNavCustomClick=new De,this.emitButtonToolbarClick=new De,this.emitBreadCrumbClick=new De}hideShowToolbarMenu(i){this.emitChiusura.emit("closeToolbar")}onClickCrocetta(i){this.emitChiusura.emit(i)}onClickAddButton(i){this.emitAddEvent.emit(i)}showDropdownMenu(i,r){let o=document.getElementById(r);o!=null&&(o.classList.contains("show")||o.classList.add("show"))}hideDropdownMenu(i,r){let o=document.getElementById(r);o?.classList.remove("show")}onBreadCrumbClick(i,r,o=0){}onBreadCrumbRemoveClick(i,r,o){}emitHelpClick(i){}navigationClick(i){this.emitNavCustomClick.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["app-caption"]],inputs:{caption:"caption",cssClass:"cssClass",showBreadcrumb:"showBreadcrumb",breadcrumbNavigation:"breadcrumbNavigation",isFooter:"isFooter",isClosable:"isClosable",addButtonShow:"addButtonShow",help:"help",idHelper:"idHelper"},outputs:{emitHelperClick:"emitHelperClick",emitChiusura:"emitChiusura",emitAddEvent:"emitAddEvent",emitNavCustomClick:"emitNavCustomClick",emitButtonToolbarClick:"emitButtonToolbarClick",emitBreadCrumbClick:"emitBreadCrumbClick"},standalone:!0,features:[Ve],decls:8,vars:4,consts:[[1,"caption-container",3,"ngClass"],[1,"item-wrap","wrap-item-title"],[1,"page-title"],[1,"item-wrap","last-item-wrap"],[1,""],["class","btn ana-button",3,"click",4,"ngIf"],["class","icon-button",3,"click",4,"ngIf"],[1,"btn","ana-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"icon-button",3,"click"],[1,"mdi","mdi-window-close"]],template:function(r,o){r&1&&(N(0,"div",0)(1,"div",1)(2,"h2",2),Y(3),P()(),N(4,"div",3)(5,"div",4),He(6,VB,3,0,"button",5)(7,LB,2,0,"button",6),P()()()),r&2&&(pe("ngClass",o.cssClass),Z(3),$n(o.caption),Z(3),pe("ngIf",o.addButtonShow),Z(),pe("ngIf",o.isClosable))},dependencies:[It,Ls,pr],styles:[".caption-container[_ngcontent-%COMP%]{display:flex;width:100%;position:relative;flex-direction:row;align-content:center;justify-content:space-between;align-items:center;height:var(--height_caption)}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]{flex:1 0 auto;margin:2px 5px}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-logo-caption[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:25px}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-mButton[_ngcontent-%COMP%], .caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-breadcrumb[_ngcontent-%COMP%]{flex-grow:0}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-breadcrumb[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{margin-bottom:0}.caption-container[_ngcontent-%COMP%]   .item-wrap.wrap-item-title[_ngcontent-%COMP%]{text-align:start}.caption-container[_ngcontent-%COMP%]   .item-wrap.last-item-wrap[_ngcontent-%COMP%]{text-align:end;min-width:150px}.caption-container[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.3rem;text-align:left;font-weight:500}  .vertical h2{margin-left:10%;width:50%;text-align:center}  .vertical-text{writing-mode:vertical-lr;text-orientation:upright;width:0px;font-size:24px;word-break:break-all;white-space:pre-wrap;color:#0b0b0b;font-weight:900;font-family:Montserrat}.currentModule[_ngcontent-%COMP%]{font-size:12px;margin:0;color:#fff!important;font-family:Montserrat}"]});let t=e;return t})();var BB=["toolbarTab"],jB=["*"];function UB(t,e){if(t&1&&(N(0,"h2"),se(1,"span",10),Y(2),P()),t&2){let n=he();Z(2),$n(n.subTitle)}}function $B(t,e){if(t&1&&(N(0,"div",11),se(1,"span",12),Y(2),P()),t&2){let n=he();Z(2),Jt(" ",n.tip," ")}}var br=(()=>{let e=class e{constructor(){this.caption="",this.subTitle="",this.tip="",this.addButtonShow=!1,this.helpDoc="",this.breadcrumbNavigation=[],this.emittChiusura=new De,this.emittEventButton=new De,this.emitToolbarLeft=new De,this.timeInterval=0,this.itemTabs=[],this.showItemsTabs=!1}ngAfterViewInit(){this.getWindowHeight()}getWindowHeight(){let i=window.innerHeight,r=document.documentElement.clientHeight,o=Math.max(i,r),s,a,c;s=document.getElementById("header").offsetHeight,a=document.getElementById("footer").offsetHeight,setTimeout(()=>{c=document.getElementById("horizontalMenucontainer").offsetHeight,c==0&&(c=60.5),this.heightWrap=o-s-a-c,this.heightWrap=this.heightWrap-13},300)}onCrocettaClick(i){this.emittChiusura.emit(i)}buttonToolbarLeft(i){this.emitToolbarLeft.emit(i)}onAddClick(i){this.emittEventButton.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["app-anagrafica-wrapper"]],viewQuery:function(r,o){if(r&1&&Fs(BB,7),r&2){let s;mo(s=go())&&(o.toolbarTab=s.first)}},inputs:{caption:"caption",subTitle:"subTitle",tip:"tip",addButtonShow:"addButtonShow",helpDoc:"helpDoc",breadcrumbNavigation:"breadcrumbNavigation"},outputs:{emittChiusura:"emittChiusura",emittEventButton:"emittEventButton",emitToolbarLeft:"emitToolbarLeft"},standalone:!0,features:[Ve],ngContentSelectors:jB,decls:11,vars:12,consts:[["id","cWrap",1,"content-wrap"],[1,"anagrafica-wrap"],[3,"emettiChiusura","emitAddEvent","caption","showBreadcrumb","addButtonShow","help","breadcrumbNavigation","isClosable","isFooter"],[1,"anagrafica-container"],[1,"anagrafica-row"],[1,"col-lg-12","wrapForm"],[1,"text"],[4,"ngIf"],["class","alert alert-primary d-flex align-items-centeralert-dismissible fade show","role","alert",4,"ngIf"],[3,"emettiChiusura","showBreadcrumb","isClosable","isFooter"],[1,"mdi","mdi-database"],["role","alert",1,"alert","alert-primary","d-flex","align-items-centeralert-dismissible","fade","show"],[1,"mdi","mdi-lightbulb-alert-outline","me-2"]],template:function(r,o){r&1&&(qd(),N(0,"div",0)(1,"div",1)(2,"app-caption",2),ge("emettiChiusura",function(a){return o.onCrocettaClick(a)})("emitAddEvent",function(a){return o.onAddClick(a)}),P(),N(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),He(7,UB,3,1,"h2",7),P(),He(8,$B,3,1,"div",8),Kd(9,0,["id","ng-content"]),P()()(),N(10,"app-caption",9),ge("emettiChiusura",function(a){return o.onCrocettaClick(a)}),P()()()),r&2&&(Z(2),pe("caption",o.caption)("showBreadcrumb",!1)("addButtonShow",o.addButtonShow)("help",o.helpDoc)("breadcrumbNavigation",o.breadcrumbNavigation)("isClosable",!1)("isFooter",!1),Z(5),pe("ngIf",o.subTitle),Z(),pe("ngIf",o.tip),Z(2),pe("showBreadcrumb",!1)("isClosable",!1)("isFooter",!0))},dependencies:[xh,It,pr],styles:['@charset "UTF-8";  .isPopUp{position:absolute;bottom:0}  .content-wrap{position:relative;overflow-y:auto;width:var(--width_container);margin:5px auto}  .content-wrap .anagrafica-wrap{margin-top:.3rem}  .content-wrap .anagrafica-wrap .anagrafica-container{box-shadow:0 3px 5px #0000000b;margin-top:.88rem;background-color:#fff;border:1px solid #e2e8f0;border-radius:.6rem}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row{position:relative;padding:1.25rem}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar{position:absolute;left:0;top:0;padding:0;width:55px;z-index:2;box-shadow:2px 0 20px #45414e12;border-top:1px solid rgba(0,0,0,.15)}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar.closed{width:0;visibility:hidden}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar.open{width:177px;display:block;visibility:visible;height:100%}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar{-moz-transition:ease .35s;-o-transition:ease .35s;-webkit-transition:ease .3s;transition:ease .35s}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .toolbar-shadow{box-shadow:2px 0 20px #45414e12!important;padding-right:0}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sidebar-sticky-top{padding:0 6px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .item-nav{display:block;height:35px;border-bottom:1px solid rgba(253,253,253,.531);width:100%;padding:0}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .item-nav .item-content i{font-size:25px!important;width:28px!important;height:28px!important;line-height:28px!important;color:#fff!important;font-weight:300!important}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sidebar-sticky-bottom .item-nav{height:26px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar .sub-item-nav :before{content:"\\fa14";display:block;font-family:Material Design Icons;color:#fff;width:5px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapanaToolbar .nica-toolbar p{font-size:12px}  .content-wrap .anagrafica-wrap .anagrafica-container .anagrafica-row .wrapForm{border:1px solid rgba(226,232,240,.6);border-radius:.6rem;padding:1.25rem}']});let t=e;return t})();var vT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[Ve],decls:2,vars:0,template:function(r,o){r&1&&(N(0,"app-anagrafica-wrapper"),Y(1,` dddddd
`),P())},dependencies:[br]});let t=e;return t})();var HB=new Map,zB={activated:!1,tokenObservers:[]},WB={initialized:!1,enabled:!1};function Gn(t){return HB.get(t)||Object.assign({},zB)}function CT(){return WB}var qB="https://content-firebaseappcheck.googleapis.com/v1";var KB="exchangeDebugToken",wT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},y7=24*60*60*1e3;var Vy=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return x(this,null,function*(){this.stop();try{this.pending=new qp,this.pending.promise.catch(n=>{}),yield QB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new qp,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function QB(t){return new Promise(e=>{setTimeout(e,t)})}var YB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Er=new x1("appCheck","AppCheck",YB);function IT(t){if(!Gn(t).activated)throw Er.create("use-before-activation",{appName:t.name})}function TT(i,r){return x(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let _=yield s.getHeartbeatsHeader();_&&(o["X-Firebase-Client"]=_)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(_){throw Er.create("fetch-network-error",{originalErrorMessage:_?.message})}if(c.status!==200)throw Er.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(_){throw Er.create("fetch-parse-error",{originalErrorMessage:_?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Er.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:u.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function ST(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${qB}/projects/${n}/apps/${i}:${KB}?key=${r}`,body:{debug_token:e}}}var JB="firebase-app-check-database",ZB=1,Ly="firebase-app-check-store";var Rh=null;function XB(){return Rh||(Rh=new Promise((t,e)=>{try{let n=indexedDB.open(JB,ZB);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Er.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Ly,{keyPath:"compositeKey"})}}}catch(n){e(Er.create("storage-open",{originalErrorMessage:n?.message}))}}),Rh)}function ej(t,e){return tj(nj(t),e)}function tj(t,e){return x(this,null,function*(){let i=(yield XB()).transaction(Ly,"readwrite"),o=i.objectStore(Ly).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},i.onerror=c=>{var u;a(Er.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function nj(t){return`${t.options.appId}-${t.name}`}var By=new bu("@firebase/app-check");function Fy(t,e){return wu()?ej(t,e).catch(n=>{By.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function MT(){return CT().enabled}function AT(){return x(this,null,function*(){let t=CT();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var ij={error:"UNKNOWN_ERROR"};function rj(t){return S1.encodeString(JSON.stringify(t),!1)}function jy(t,e=!1){return x(this,null,function*(){let n=t.app;IT(n);let i=Gn(n),r=i.token,o;if(r&&!sl(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(sl(c)?r=c:yield Fy(n,void 0))}if(!e&&r&&sl(r))return{token:r.token};let s=!1;if(MT()){i.exchangeTokenPromise||(i.exchangeTokenPromise=TT(ST(n,yield AT()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let c=yield i.exchangeTokenPromise;return yield Fy(n,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield Gn(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?By.warn(c.message):By.error(c),o=c}let a;return r?o?sl(r)?a={token:r.token,internalError:o}:a=ET(o):(a={token:r.token},i.token=r,yield Fy(n,r)):a=ET(o),s&&cj(n,a),a})}function oj(t){return x(this,null,function*(){let e=t.app;IT(e);let{provider:n}=Gn(e);if(MT()){let i=yield AT(),{token:r}=yield TT(ST(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function sj(t,e,n,i){let{app:r}=t,o=Gn(r),s={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&sl(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),bT(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>bT(t))}function xT(t,e){let n=Gn(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function bT(t){let{app:e}=t,n=Gn(e),i=n.tokenRefresher;i||(i=aj(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function aj(t){let{app:e}=t;return new Vy(()=>x(this,null,function*(){let n=Gn(e),i;if(n.token?i=yield jy(t,!0):i=yield jy(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Gn(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},wT.RETRIAL_MIN_WAIT,wT.RETRIAL_MAX_WAIT)}function cj(t,e){let n=Gn(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function sl(t){return t.expireTimeMillis-Date.now()>0}function ET(t){return{token:rj(ij),error:t}}var Uy=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Gn(this.app);for(let n of e)xT(this.app,n.next);return Promise.resolve()}};function lj(t,e){return new Uy(t,e)}function uj(t){return{getToken:e=>jy(t,e),getLimitedUseToken:()=>oj(t),addTokenListener:e=>sj(t,"INTERNAL",e),removeTokenListener:e=>xT(t.app,e)}}var dj="@firebase/app-check",hj="0.8.7";var fj="app-check",DT="app-check-internal";function pj(){uc(new Qr(fj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return lj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(DT).initialize()})),uc(new Qr(DT,t=>{let e=t.getProvider("app-check").getImmediate();return uj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),gn(dj,hj)}pj();var mj=["localhost","0.0.0.0","127.0.0.1"],x7=typeof window<"u"&&mj.includes(window.location.hostname);var gj="firebase",_j="10.13.0";xt.registerVersion(gj,_j,"app-compat");var yj=["ngOnDestroy"],Nh=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(yj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(d=>{let f=d?.(...u);return i?.spy?.apply&&i.spy.apply(o,u,f),f})})})});var Oh=class{constructor(e){return e}},Dr=new W("angularfire2.app.options"),Cr=new W("angularfire2.app.name");function Co(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=xt.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>xt.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;vj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Oh(s)}var vj=(t,...e)=>{T_()&&typeof console<"u"&&console[t](...e)},wj={provide:Oh,useFactory:Co,deps:[Dr,Ce,[new Ti,Cr]]},OT=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:Dr,useValue:n},{provide:Cr,useValue:i}]}}constructor(n){xt.registerVersion("angularfire",Dn.full,"core"),xt.registerVersion("angularfire",Dn.full,"app-compat"),xt.registerVersion("angular",Yd.full,n.toString())}static \u0275fac=function(i){return new(i||t)(j(Pt))};static \u0275mod=ot({type:t});static \u0275inj=rt({providers:[wj]})}return t})();function Ys(t,e,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return bj(r,s)||(RT("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Ej?" You may need to reload as Firebase is not HMR aware.":""}`),RT("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function bj(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var Ej=typeof module<"u"&&!!module.hot,RT=(t,...e)=>{T_()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Gy=new W("angularfire2.auth.use-emulator"),Hy=new W("angularfire2.auth.settings"),zy=new W("angularfire2.auth.tenant-id"),Wy=new W("angularfire2.auth.langugage-code"),qy=new W("angularfire2.auth.use-device-language"),Ky=new W("angularfire.auth.persistence"),Qy=(t,e,n,i,r,o,s,a)=>Ys(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),i&&(c.tenantId=i),c.languageCode=r,o&&c.useDeviceLanguage(),s)for(let[u,d]of Object.entries(s))c.settings[u]=d;return a&&c.setPersistence(a),c},[n,i,r,o,s,a]),Yy=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,c,u,d,f,m,_){let D=new ke,T=X(void 0).pipe(Wt(s.outsideAngular),je(()=>o.runOutsideAngular(()=>import("./chunk-T7Z74EPC.js"))),K(()=>Co(n,o,i)),K(S=>Qy(S,o,a,u,d,f,c,m)),gs({bufferSize:1,refCount:!1}));if(mr(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=X(null);else{T.pipe(yn()).subscribe();let S=T.pipe(je(B=>B.getRedirectResult().then(z=>z,()=>null)),sn,gs({bufferSize:1,refCount:!1})),k=T.pipe(je(B=>new ae(z=>({unsubscribe:o.runOutsideAngular(()=>B.onAuthStateChanged(re=>z.next(re),re=>z.error(re),()=>z.complete()))})))),H=T.pipe(je(B=>new ae(z=>({unsubscribe:o.runOutsideAngular(()=>B.onIdTokenChanged(re=>z.next(re),re=>z.error(re),()=>z.complete()))}))));this.authState=S.pipe(Zu(k),Rn(s.outsideAngular),Wt(s.insideAngular)),this.user=S.pipe(Zu(H),Rn(s.outsideAngular),Wt(s.insideAngular)),this.idToken=this.user.pipe(je(B=>B?Te(B.getIdToken()):X(null))),this.idTokenResult=this.user.pipe(je(B=>B?Te(B.getIdTokenResult()):X(null))),this.credential=Ku(S,D,this.authState.pipe(Ze(B=>!B))).pipe(K(B=>B?.user?B:null),Rn(s.outsideAngular),Wt(s.insideAngular))}return Nh(this,T,o,{spy:{apply:(S,k,H)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&H.then(B=>D.next(B))}}})}static \u0275fac=function(i){return new(i||t)(j(Dr),j(Cr,8),j(Pt),j(Ce),j(Do),j(Gy,8),j(Hy,8),j(zy,8),j(Wy,8),j(qy,8),j(Ky,8),j(ki,8))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),NT=(()=>{class t{constructor(){xt.registerVersion("angularfire",Dn.full,"auth-compat")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ot({type:t});static \u0275inj=rt({providers:[Yy]})}return t})();var PT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kT={};var Ir,Jy;(function(){var t;function e(b,y){function w(){}w.prototype=y.prototype,b.D=y.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(E,C,M){for(var v=Array(arguments.length-2),_i=2;_i<arguments.length;_i++)v[_i-2]=arguments[_i];return y.prototype[C].apply(E,v)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)E[C]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(C=0;16>C;++C)E[C]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=b.g[0],w=b.g[1],C=b.g[2];var M=b.g[3],v=y+(M^w&(C^M))+E[0]+3614090360&4294967295;y=w+(v<<7&4294967295|v>>>25),v=M+(C^y&(w^C))+E[1]+3905402710&4294967295,M=y+(v<<12&4294967295|v>>>20),v=C+(w^M&(y^w))+E[2]+606105819&4294967295,C=M+(v<<17&4294967295|v>>>15),v=w+(y^C&(M^y))+E[3]+3250441966&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(M^w&(C^M))+E[4]+4118548399&4294967295,y=w+(v<<7&4294967295|v>>>25),v=M+(C^y&(w^C))+E[5]+1200080426&4294967295,M=y+(v<<12&4294967295|v>>>20),v=C+(w^M&(y^w))+E[6]+2821735955&4294967295,C=M+(v<<17&4294967295|v>>>15),v=w+(y^C&(M^y))+E[7]+4249261313&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(M^w&(C^M))+E[8]+1770035416&4294967295,y=w+(v<<7&4294967295|v>>>25),v=M+(C^y&(w^C))+E[9]+2336552879&4294967295,M=y+(v<<12&4294967295|v>>>20),v=C+(w^M&(y^w))+E[10]+4294925233&4294967295,C=M+(v<<17&4294967295|v>>>15),v=w+(y^C&(M^y))+E[11]+2304563134&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(M^w&(C^M))+E[12]+1804603682&4294967295,y=w+(v<<7&4294967295|v>>>25),v=M+(C^y&(w^C))+E[13]+4254626195&4294967295,M=y+(v<<12&4294967295|v>>>20),v=C+(w^M&(y^w))+E[14]+2792965006&4294967295,C=M+(v<<17&4294967295|v>>>15),v=w+(y^C&(M^y))+E[15]+1236535329&4294967295,w=C+(v<<22&4294967295|v>>>10),v=y+(C^M&(w^C))+E[1]+4129170786&4294967295,y=w+(v<<5&4294967295|v>>>27),v=M+(w^C&(y^w))+E[6]+3225465664&4294967295,M=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(M^y))+E[11]+643717713&4294967295,C=M+(v<<14&4294967295|v>>>18),v=w+(M^y&(C^M))+E[0]+3921069994&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(C^M&(w^C))+E[5]+3593408605&4294967295,y=w+(v<<5&4294967295|v>>>27),v=M+(w^C&(y^w))+E[10]+38016083&4294967295,M=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(M^y))+E[15]+3634488961&4294967295,C=M+(v<<14&4294967295|v>>>18),v=w+(M^y&(C^M))+E[4]+3889429448&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(C^M&(w^C))+E[9]+568446438&4294967295,y=w+(v<<5&4294967295|v>>>27),v=M+(w^C&(y^w))+E[14]+3275163606&4294967295,M=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(M^y))+E[3]+4107603335&4294967295,C=M+(v<<14&4294967295|v>>>18),v=w+(M^y&(C^M))+E[8]+1163531501&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(C^M&(w^C))+E[13]+2850285829&4294967295,y=w+(v<<5&4294967295|v>>>27),v=M+(w^C&(y^w))+E[2]+4243563512&4294967295,M=y+(v<<9&4294967295|v>>>23),v=C+(y^w&(M^y))+E[7]+1735328473&4294967295,C=M+(v<<14&4294967295|v>>>18),v=w+(M^y&(C^M))+E[12]+2368359562&4294967295,w=C+(v<<20&4294967295|v>>>12),v=y+(w^C^M)+E[5]+4294588738&4294967295,y=w+(v<<4&4294967295|v>>>28),v=M+(y^w^C)+E[8]+2272392833&4294967295,M=y+(v<<11&4294967295|v>>>21),v=C+(M^y^w)+E[11]+1839030562&4294967295,C=M+(v<<16&4294967295|v>>>16),v=w+(C^M^y)+E[14]+4259657740&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(w^C^M)+E[1]+2763975236&4294967295,y=w+(v<<4&4294967295|v>>>28),v=M+(y^w^C)+E[4]+1272893353&4294967295,M=y+(v<<11&4294967295|v>>>21),v=C+(M^y^w)+E[7]+4139469664&4294967295,C=M+(v<<16&4294967295|v>>>16),v=w+(C^M^y)+E[10]+3200236656&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(w^C^M)+E[13]+681279174&4294967295,y=w+(v<<4&4294967295|v>>>28),v=M+(y^w^C)+E[0]+3936430074&4294967295,M=y+(v<<11&4294967295|v>>>21),v=C+(M^y^w)+E[3]+3572445317&4294967295,C=M+(v<<16&4294967295|v>>>16),v=w+(C^M^y)+E[6]+76029189&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(w^C^M)+E[9]+3654602809&4294967295,y=w+(v<<4&4294967295|v>>>28),v=M+(y^w^C)+E[12]+3873151461&4294967295,M=y+(v<<11&4294967295|v>>>21),v=C+(M^y^w)+E[15]+530742520&4294967295,C=M+(v<<16&4294967295|v>>>16),v=w+(C^M^y)+E[2]+3299628645&4294967295,w=C+(v<<23&4294967295|v>>>9),v=y+(C^(w|~M))+E[0]+4096336452&4294967295,y=w+(v<<6&4294967295|v>>>26),v=M+(w^(y|~C))+E[7]+1126891415&4294967295,M=y+(v<<10&4294967295|v>>>22),v=C+(y^(M|~w))+E[14]+2878612391&4294967295,C=M+(v<<15&4294967295|v>>>17),v=w+(M^(C|~y))+E[5]+4237533241&4294967295,w=C+(v<<21&4294967295|v>>>11),v=y+(C^(w|~M))+E[12]+1700485571&4294967295,y=w+(v<<6&4294967295|v>>>26),v=M+(w^(y|~C))+E[3]+2399980690&4294967295,M=y+(v<<10&4294967295|v>>>22),v=C+(y^(M|~w))+E[10]+4293915773&4294967295,C=M+(v<<15&4294967295|v>>>17),v=w+(M^(C|~y))+E[1]+2240044497&4294967295,w=C+(v<<21&4294967295|v>>>11),v=y+(C^(w|~M))+E[8]+1873313359&4294967295,y=w+(v<<6&4294967295|v>>>26),v=M+(w^(y|~C))+E[15]+4264355552&4294967295,M=y+(v<<10&4294967295|v>>>22),v=C+(y^(M|~w))+E[6]+2734768916&4294967295,C=M+(v<<15&4294967295|v>>>17),v=w+(M^(C|~y))+E[13]+1309151649&4294967295,w=C+(v<<21&4294967295|v>>>11),v=y+(C^(w|~M))+E[4]+4149444226&4294967295,y=w+(v<<6&4294967295|v>>>26),v=M+(w^(y|~C))+E[11]+3174756917&4294967295,M=y+(v<<10&4294967295|v>>>22),v=C+(y^(M|~w))+E[2]+718787259&4294967295,C=M+(v<<15&4294967295|v>>>17),v=w+(M^(C|~y))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(C+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+C&4294967295,b.g[3]=b.g[3]+M&4294967295}i.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var w=y-this.blockSize,E=this.B,C=this.h,M=0;M<y;){if(C==0)for(;M<=w;)r(this,b,M),M+=this.blockSize;if(typeof b=="string"){for(;M<y;)if(E[C++]=b.charCodeAt(M++),C==this.blockSize){r(this,E),C=0;break}}else for(;M<y;)if(E[C++]=b[M++],C==this.blockSize){r(this,E),C=0;break}}this.h=C,this.o+=y},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var w=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=w&255,w/=256;for(this.u(b),b=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)b[w++]=this.g[y]>>>E&255;return b};function o(b,y){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=y(b)}function s(b,y){this.h=y;for(var w=[],E=!0,C=b.length-1;0<=C;C--){var M=b[C]|0;E&&M==y||(w[C]=M,E=!1)}this.g=w}var a={};function c(b){return-128<=b&&128>b?o(b,function(y){return new s([y|0],0>y?-1:0)}):new s([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return S(u(-b));for(var y=[],w=1,E=0;b>=w;E++)y[E]=b/w|0,w*=4294967296;return new s(y,0)}function d(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return S(d(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(y,8)),E=f,C=0;C<b.length;C+=8){var M=Math.min(8,b.length-C),v=parseInt(b.substring(C,C+M),y);8>M?(M=u(Math.pow(y,M)),E=E.j(M).add(u(v))):(E=E.j(w),E=E.add(u(v)))}return E}var f=c(0),m=c(1),_=c(16777216);t=s.prototype,t.m=function(){if(T(this))return-S(this).m();for(var b=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);b+=(0<=E?E:4294967296+E)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D(this))return"0";if(T(this))return"-"+S(this).toString(b);for(var y=u(Math.pow(b,6)),w=this,E="";;){var C=z(w,y).g;w=k(w,C.j(y));var M=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=C,D(w))return M+E;for(;6>M.length;)M="0"+M;E=M+E}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function D(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function T(b){return b.h==-1}t.l=function(b){return b=k(this,b),T(b)?-1:D(b)?0:1};function S(b){for(var y=b.g.length,w=[],E=0;E<y;E++)w[E]=~b.g[E];return new s(w,~b.h).add(m)}t.abs=function(){return T(this)?S(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0,C=0;C<=y;C++){var M=E+(this.i(C)&65535)+(b.i(C)&65535),v=(M>>>16)+(this.i(C)>>>16)+(b.i(C)>>>16);E=v>>>16,M&=65535,v&=65535,w[C]=v<<16|M}return new s(w,w[w.length-1]&-2147483648?-1:0)};function k(b,y){return b.add(S(y))}t.j=function(b){if(D(this)||D(b))return f;if(T(this))return T(b)?S(this).j(S(b)):S(S(this).j(b));if(T(b))return S(this.j(S(b)));if(0>this.l(_)&&0>b.l(_))return u(this.m()*b.m());for(var y=this.g.length+b.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<b.g.length;C++){var M=this.i(E)>>>16,v=this.i(E)&65535,_i=b.i(C)>>>16,Ha=b.i(C)&65535;w[2*E+2*C]+=v*Ha,H(w,2*E+2*C),w[2*E+2*C+1]+=M*Ha,H(w,2*E+2*C+1),w[2*E+2*C+1]+=v*_i,H(w,2*E+2*C+1),w[2*E+2*C+2]+=M*_i,H(w,2*E+2*C+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function H(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function B(b,y){this.g=b,this.h=y}function z(b,y){if(D(y))throw Error("division by zero");if(D(b))return new B(f,f);if(T(b))return y=z(S(b),y),new B(S(y.g),S(y.h));if(T(y))return y=z(b,S(y)),new B(S(y.g),y.h);if(30<b.g.length){if(T(b)||T(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(b);)w=re(w),E=re(E);var C=te(w,1),M=te(E,1);for(E=te(E,2),w=te(w,2);!D(E);){var v=M.add(E);0>=v.l(b)&&(C=C.add(w),M=v),E=te(E,1),w=te(w,1)}return y=k(b,C.j(y)),new B(C,y)}for(C=f;0<=b.l(y);){for(w=Math.max(1,Math.floor(b.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),M=u(w),v=M.j(y);T(v)||0<v.l(b);)w-=E,M=u(w),v=M.j(y);D(M)&&(M=m),C=C.add(M),b=k(b,v)}return new B(C,b)}t.A=function(b){return z(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&b.i(E);return new s(w,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|b.i(E);return new s(w,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^b.i(E);return new s(w,this.h^b.h)};function re(b){for(var y=b.g.length+1,w=[],E=0;E<y;E++)w[E]=b.i(E)<<1|b.i(E-1)>>>31;return new s(w,b.h)}function te(b,y){var w=y>>5;y%=32;for(var E=b.g.length-w,C=[],M=0;M<E;M++)C[M]=0<y?b.i(M+w)>>>y|b.i(M+w+1)<<32-y:b.i(M+w);return new s(C,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Jy=kT.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Ir=kT.Integer=s}).apply(typeof PT<"u"?PT:typeof self<"u"?self:typeof window<"u"?window:{});var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fi={};var Zy,Xy,Js,e0,al,kh,t0,n0,i0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ph=="object"&&Ph];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=n(this);function r(l,h){if(h)e:{var p=i;l=l.split(".");for(var g=0;g<l.length-1;g++){var I=l[g];if(!(I in p))break e;p=p[I]}l=l[l.length-1],g=p[l],h=h(g),h!=g&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,g=!1,I={next:function(){if(!g&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}r("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,g),l.apply(h,I)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function _(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function D(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(g,I,O){for(var U=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)U[$e-2]=arguments[$e];return h.prototype[I].apply(g,U)}}function T(l){let h=l.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=l[g];return p}return[]}function S(l,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let I=l.length||0,O=g.length||0;l.length=I+O;for(let U=0;U<O;U++)l[I+U]=g[U]}else l.push(g)}}class k{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function H(l){return/^[\s\xa0]*$/.test(l)}function B(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function z(l){return z[" "](l),l}z[" "]=function(){};var re=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function te(l,h,p){for(let g in l)h.call(p,l[g],g,l)}function b(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function y(l){let h={};for(let p in l)h[p]=l[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(l,h){let p,g;for(let I=1;I<arguments.length;I++){g=arguments[I];for(p in g)l[p]=g[p];for(let O=0;O<w.length;O++)p=w[O],Object.prototype.hasOwnProperty.call(g,p)&&(l[p]=g[p])}}function C(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function M(l){a.setTimeout(()=>{throw l},0)}function v(){var l=bp;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class _i{constructor(){this.h=this.g=null}add(h,p){let g=Ha.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var Ha=new k(()=>new aR,l=>l.reset());class aR{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let za,Wa=!1,bp=new _i,Db=()=>{let l=a.Promise.resolve(void 0);za=()=>{l.then(cR)}};var cR=()=>{for(var l;l=v();){try{l.h.call(l.g)}catch(p){M(p)}var h=Ha;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}Wa=!1};function Wi(){this.s=this.s,this.C=this.C}Wi.prototype.s=!1,Wi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Wi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Vt(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var lR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function qa(l,h){if(Vt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(re){e:{try{z(h.nodeName);var I=!0;break e}catch{}I=!1}I||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:uR[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&qa.aa.h.call(this)}}D(qa,Vt);var uR={2:"touch",3:"pen",4:"mouse"};qa.prototype.h=function(){qa.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ka="closure_listenable_"+(1e6*Math.random()|0),dR=0;function hR(l,h,p,g,I){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=I,this.key=++dR,this.da=this.fa=!1}function nu(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function iu(l){this.src=l,this.g={},this.h=0}iu.prototype.add=function(l,h,p,g,I){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var U=Dp(l,h,g,I);return-1<U?(h=l[U],p||(h.fa=!1)):(h=new hR(h,this.src,O,!!g,I),h.fa=p,l.push(h)),h};function Ep(l,h){var p=h.type;if(p in l.g){var g=l.g[p],I=Array.prototype.indexOf.call(g,h,void 0),O;(O=0<=I)&&Array.prototype.splice.call(g,I,1),O&&(nu(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Dp(l,h,p,g){for(var I=0;I<l.length;++I){var O=l[I];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==g)return I}return-1}var Cp="closure_lm_"+(1e6*Math.random()|0),Ip={};function Cb(l,h,p,g,I){if(g&&g.once)return Tb(l,h,p,g,I);if(Array.isArray(h)){for(var O=0;O<h.length;O++)Cb(l,h[O],p,g,I);return null}return p=Ap(p),l&&l[Ka]?l.K(h,p,u(g)?!!g.capture:!!g,I):Ib(l,h,p,!1,g,I)}function Ib(l,h,p,g,I,O){if(!h)throw Error("Invalid event type");var U=u(I)?!!I.capture:!!I,$e=Sp(l);if($e||(l[Cp]=$e=new iu(l)),p=$e.add(h,p,g,U,O),p.proxy)return p;if(g=fR(),p.proxy=g,g.src=l,g.listener=p,l.addEventListener)lR||(I=U),I===void 0&&(I=!1),l.addEventListener(h.toString(),g,I);else if(l.attachEvent)l.attachEvent(Mb(h.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function fR(){function l(p){return h.call(l.src,l.listener,p)}let h=pR;return l}function Tb(l,h,p,g,I){if(Array.isArray(h)){for(var O=0;O<h.length;O++)Tb(l,h[O],p,g,I);return null}return p=Ap(p),l&&l[Ka]?l.L(h,p,u(g)?!!g.capture:!!g,I):Ib(l,h,p,!0,g,I)}function Sb(l,h,p,g,I){if(Array.isArray(h))for(var O=0;O<h.length;O++)Sb(l,h[O],p,g,I);else g=u(g)?!!g.capture:!!g,p=Ap(p),l&&l[Ka]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=Dp(O,p,g,I),-1<p&&(nu(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Sp(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Dp(h,p,g,I)),(p=-1<l?h[l]:null)&&Tp(p))}function Tp(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Ka])Ep(h.i,l);else{var p=l.type,g=l.proxy;h.removeEventListener?h.removeEventListener(p,g,l.capture):h.detachEvent?h.detachEvent(Mb(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=Sp(h))?(Ep(p,l),p.h==0&&(p.src=null,h[Cp]=null)):nu(l)}}}function Mb(l){return l in Ip?Ip[l]:Ip[l]="on"+l}function pR(l,h){if(l.da)l=!0;else{h=new qa(h,this);var p=l.listener,g=l.ha||l.src;l.fa&&Tp(l),l=p.call(g,h)}return l}function Sp(l){return l=l[Cp],l instanceof iu?l:null}var Mp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ap(l){return typeof l=="function"?l:(l[Mp]||(l[Mp]=function(h){return l.handleEvent(h)}),l[Mp])}function Lt(){Wi.call(this),this.i=new iu(this),this.M=this,this.F=null}D(Lt,Wi),Lt.prototype[Ka]=!0,Lt.prototype.removeEventListener=function(l,h,p,g){Sb(this,l,h,p,g)};function Ht(l,h){var p,g=l.F;if(g)for(p=[];g;g=g.F)p.push(g);if(l=l.M,g=h.type||h,typeof h=="string")h=new Vt(h,l);else if(h instanceof Vt)h.target=h.target||l;else{var I=h;h=new Vt(g,l),E(h,I)}if(I=!0,p)for(var O=p.length-1;0<=O;O--){var U=h.g=p[O];I=ru(U,g,!0,h)&&I}if(U=h.g=l,I=ru(U,g,!0,h)&&I,I=ru(U,g,!1,h)&&I,p)for(O=0;O<p.length;O++)U=h.g=p[O],I=ru(U,g,!1,h)&&I}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],g=0;g<p.length;g++)nu(p[g]);delete l.g[h],l.h--}}this.F=null},Lt.prototype.K=function(l,h,p,g){return this.i.add(String(l),h,!1,p,g)},Lt.prototype.L=function(l,h,p,g){return this.i.add(String(l),h,!0,p,g)};function ru(l,h,p,g){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var I=!0,O=0;O<h.length;++O){var U=h[O];if(U&&!U.da&&U.capture==p){var $e=U.listener,At=U.ha||U.src;U.fa&&Ep(l.i,U),I=$e.call(At,g)!==!1&&I}}return I&&!g.defaultPrevented}function Ab(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function xb(l){l.g=Ab(()=>{l.g=null,l.i&&(l.i=!1,xb(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class mR extends Wi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:xb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qa(l){Wi.call(this),this.h=l,this.g={}}D(Qa,Wi);var Rb=[];function Ob(l){te(l.g,function(h,p){this.g.hasOwnProperty(p)&&Tp(h)},l),l.g={}}Qa.prototype.N=function(){Qa.aa.N.call(this),Ob(this)},Qa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xp=a.JSON.stringify,gR=a.JSON.parse,_R=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Rp(){}Rp.prototype.h=null;function Nb(l){return l.h||(l.h=l.i())}function Pb(){}var Ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Op(){Vt.call(this,"d")}D(Op,Vt);function Np(){Vt.call(this,"c")}D(Np,Vt);var zr={},kb=null;function ou(){return kb=kb||new Lt}zr.La="serverreachability";function Fb(l){Vt.call(this,zr.La,l)}D(Fb,Vt);function Ja(l){let h=ou();Ht(h,new Fb(h))}zr.STAT_EVENT="statevent";function Vb(l,h){Vt.call(this,zr.STAT_EVENT,l),this.stat=h}D(Vb,Vt);function zt(l){let h=ou();Ht(h,new Vb(h,l))}zr.Ma="timingevent";function Lb(l,h){Vt.call(this,zr.Ma,l),this.size=h}D(Lb,Vt);function Za(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Xa(){this.g=!0}Xa.prototype.xa=function(){this.g=!1};function yR(l,h,p,g,I,O){l.info(function(){if(l.g)if(O)for(var U="",$e=O.split("&"),At=0;At<$e.length;At++){var Ne=$e[At].split("=");if(1<Ne.length){var Bt=Ne[0];Ne=Ne[1];var jt=Bt.split("_");U=2<=jt.length&&jt[1]=="type"?U+(Bt+"="+Ne+"&"):U+(Bt+"=redacted&")}}else U=null;else U=O;return"XMLHTTP REQ ("+g+") [attempt "+I+"]: "+h+`
`+p+`
`+U})}function vR(l,h,p,g,I,O,U){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+I+"]: "+h+`
`+p+`
`+O+" "+U})}function Zo(l,h,p,g){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+bR(l,p)+(g?" "+g:"")})}function wR(l,h){l.info(function(){return"TIMEOUT: "+h})}Xa.prototype.info=function(){};function bR(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var g=p[l];if(!(2>g.length)){var I=g[1];if(Array.isArray(I)&&!(1>I.length)){var O=I[0];if(O!="noop"&&O!="stop"&&O!="close")for(var U=1;U<I.length;U++)I[U]=""}}}}return xp(p)}catch{return h}}var su={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pp;function au(){}D(au,Rp),au.prototype.g=function(){return new XMLHttpRequest},au.prototype.i=function(){return{}},Pp=new au;function qi(l,h,p,g){this.j=l,this.i=h,this.l=p,this.R=g||1,this.U=new Qa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jb}function jb(){this.i=null,this.g="",this.h=!1}var Ub={},kp={};function Fp(l,h,p){l.L=1,l.v=du(yi(h)),l.m=p,l.P=!0,$b(l,null)}function $b(l,h){l.F=Date.now(),cu(l),l.A=yi(l.v);var p=l.A,g=l.R;Array.isArray(g)||(g=[String(g)]),n1(p.i,"t",g),l.C=0,p=l.j.J,l.h=new jb,l.g=w1(l.j,p?h:null,!l.m),0<l.O&&(l.M=new mR(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,g=l.ca;var I="readystatechange";Array.isArray(I)||(I&&(Rb[0]=I.toString()),I=Rb);for(var O=0;O<I.length;O++){var U=Cb(p,I[O],g||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Ja(),yR(l.i,l.u,l.A,l.l,l.R,l.m)}qi.prototype.ca=function(l){l=l.target;let h=this.M;h&&vi(l)==3?h.j():this.Y(l)},qi.prototype.Y=function(l){try{if(l==this.g)e:{let jt=vi(this.g);var h=this.g.Ba();let ts=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||l1(this.g)))){this.J||jt!=4||h==7||(h==8||0>=ts?Ja(3):Ja(2)),Vp(this);var p=this.g.Z();this.X=p;t:if(Gb(this)){var g=l1(this.g);l="";var I=g.length,O=vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),ec(this);var U="";break t}this.h.i=new a.TextDecoder}for(h=0;h<I;h++)this.h.h=!0,l+=this.h.i.decode(g[h],{stream:!(O&&h==I-1)});g.length=0,this.h.g+=l,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,vR(this.i,this.u,this.A,this.l,this.R,jt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,At=this.g;if(($e=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H($e)){var Ne=$e;break t}}Ne=null}if(p=Ne)Zo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lp(this,p);else{this.o=!1,this.s=3,zt(12),Wr(this),ec(this);break e}}if(this.P){p=!0;let Mn;for(;!this.J&&this.C<U.length;)if(Mn=ER(this,U),Mn==kp){jt==4&&(this.s=4,zt(14),p=!1),Zo(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==Ub){this.s=4,zt(15),Zo(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else Zo(this.i,this.l,Mn,null),Lp(this,Mn);if(Gb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||U.length!=0||this.h.h||(this.s=1,zt(16),p=!1),this.o=this.o&&p,!p)Zo(this.i,this.l,U,"[Invalid Chunked Response]"),Wr(this),ec(this);else if(0<U.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Hp(Bt),Bt.M=!0,zt(11))}}else Zo(this.i,this.l,U,null),Lp(this,U);jt==4&&Wr(this),this.o&&!this.J&&(jt==4?g1(this.j,this):(this.o=!1,cu(this)))}else BR(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),Wr(this),ec(this)}}}catch{}finally{}};function Gb(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ER(l,h){var p=l.C,g=h.indexOf(`
`,p);return g==-1?kp:(p=Number(h.substring(p,g)),isNaN(p)?Ub:(g+=1,g+p>h.length?kp:(h=h.slice(g,g+p),l.C=g+p,h)))}qi.prototype.cancel=function(){this.J=!0,Wr(this)};function cu(l){l.S=Date.now()+l.I,Hb(l,l.I)}function Hb(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Za(m(l.ba,l),h)}function Vp(l){l.B&&(a.clearTimeout(l.B),l.B=null)}qi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(wR(this.i,this.A),this.L!=2&&(Ja(),zt(17)),Wr(this),this.s=2,ec(this)):Hb(this,this.S-l)};function ec(l){l.j.G==0||l.J||g1(l.j,l)}function Wr(l){Vp(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Ob(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Lp(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Bp(p.h,l))){if(!l.K&&Bp(p.h,l)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var I=g;if(I[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)gu(p),pu(p);else break e;Gp(p),zt(18)}}else p.za=I[1],0<p.za-p.T&&37500>I[2]&&p.F&&p.v==0&&!p.C&&(p.C=Za(m(p.Za,p),6e3));if(1>=qb(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Kr(p,11)}else if((l.K||p.g==l)&&gu(p),!H(h))for(I=p.Da.g.parse(h),h=0;h<I.length;h++){let Ne=I[h];if(p.T=Ne[0],Ne=Ne[1],p.G==2)if(Ne[0]=="c"){p.K=Ne[1],p.ia=Ne[2];let Bt=Ne[3];Bt!=null&&(p.la=Bt,p.j.info("VER="+p.la));let jt=Ne[4];jt!=null&&(p.Aa=jt,p.j.info("SVER="+p.Aa));let ts=Ne[5];ts!=null&&typeof ts=="number"&&0<ts&&(g=1.5*ts,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let Mn=l.g;if(Mn){let yu=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yu){var O=g.h;O.g||yu.indexOf("spdy")==-1&&yu.indexOf("quic")==-1&&yu.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(jp(O,O.h),O.h=null))}if(g.D){let zp=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;zp&&(g.ya=zp,qe(g.I,g.D,zp))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var U=l;if(g.qa=v1(g,g.J?g.ia:null,g.W),U.K){Kb(g.h,U);var $e=U,At=g.L;At&&($e.I=At),$e.B&&(Vp($e),cu($e)),g.g=U}else p1(g);0<p.i.length&&mu(p)}else Ne[0]!="stop"&&Ne[0]!="close"||Kr(p,7);else p.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Kr(p,7):$p(p):Ne[0]!="noop"&&p.l&&p.l.ta(Ne),p.v=0)}}Ja(4)}catch{}}var DR=class{constructor(l,h){this.g=l,this.map=h}};function zb(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wb(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function qb(l){return l.h?1:l.g?l.g.size:0}function Bp(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function jp(l,h){l.g?l.g.add(h):l.h=h}function Kb(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}zb.prototype.cancel=function(){if(this.i=Qb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Qb(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return T(l.i)}function CR(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,g=0;g<p;g++)h.push(l[g]);return h}h=[],p=0;for(g in l)h[p++]=l[g];return h}function IR(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let g in l)h[p++]=g;return h}}}function Yb(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=IR(l),g=CR(l),I=g.length,O=0;O<I;O++)h.call(void 0,g[O],p&&p[O],l)}var Jb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TR(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var g=l[p].indexOf("="),I=null;if(0<=g){var O=l[p].substring(0,g);I=l[p].substring(g+1)}else O=l[p];h(O,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function qr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof qr){this.h=l.h,lu(this,l.j),this.o=l.o,this.g=l.g,uu(this,l.s),this.l=l.l;var h=l.i,p=new ic;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Zb(this,p),this.m=l.m}else l&&(h=String(l).match(Jb))?(this.h=!1,lu(this,h[1]||"",!0),this.o=tc(h[2]||""),this.g=tc(h[3]||"",!0),uu(this,h[4]),this.l=tc(h[5]||"",!0),Zb(this,h[6]||"",!0),this.m=tc(h[7]||"")):(this.h=!1,this.i=new ic(null,this.h))}qr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(nc(h,Xb,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(nc(h,Xb,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(nc(p,p.charAt(0)=="/"?AR:MR,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",nc(p,RR)),l.join("")};function yi(l){return new qr(l)}function lu(l,h,p){l.j=p?tc(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function uu(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Zb(l,h,p){h instanceof ic?(l.i=h,OR(l.i,l.h)):(p||(h=nc(h,xR)),l.i=new ic(h,l.h))}function qe(l,h,p){l.i.set(h,p)}function du(l){return qe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function tc(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function nc(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,SR),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function SR(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Xb=/[#\/\?@]/g,MR=/[#\?:]/g,AR=/[#\?]/g,xR=/[#\?@]/g,RR=/#/g;function ic(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Ki(l){l.g||(l.g=new Map,l.h=0,l.i&&TR(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ic.prototype,t.add=function(l,h){Ki(this),this.i=null,l=Xo(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function e1(l,h){Ki(l),h=Xo(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function t1(l,h){return Ki(l),h=Xo(l,h),l.g.has(h)}t.forEach=function(l,h){Ki(this),this.g.forEach(function(p,g){p.forEach(function(I){l.call(h,I,g,this)},this)},this)},t.na=function(){Ki(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let I=l[g];for(let O=0;O<I.length;O++)p.push(h[g])}return p},t.V=function(l){Ki(this);let h=[];if(typeof l=="string")t1(this,l)&&(h=h.concat(this.g.get(Xo(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return Ki(this),this.i=null,l=Xo(this,l),t1(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function n1(l,h,p){e1(l,h),0<p.length&&(l.i=null,l.g.set(Xo(l,h),T(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let O=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var I=O;U[g]!==""&&(I+="="+encodeURIComponent(String(U[g]))),l.push(I)}}return this.i=l.join("&")};function Xo(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function OR(l,h){h&&!l.j&&(Ki(l),l.i=null,l.g.forEach(function(p,g){var I=g.toLowerCase();g!=I&&(e1(this,g),n1(this,I,p))},l)),l.j=h}function NR(l,h){let p=new Xa;if(a.Image){let g=new Image;g.onload=_(Qi,p,"TestLoadImage: loaded",!0,h,g),g.onerror=_(Qi,p,"TestLoadImage: error",!1,h,g),g.onabort=_(Qi,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=_(Qi,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else h(!1)}function PR(l,h){let p=new Xa,g=new AbortController,I=setTimeout(()=>{g.abort(),Qi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:g.signal}).then(O=>{clearTimeout(I),O.ok?Qi(p,"TestPingServer: ok",!0,h):Qi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(I),Qi(p,"TestPingServer: error",!1,h)})}function Qi(l,h,p,g,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),g(p)}catch{}}function kR(){this.g=new _R}function FR(l,h,p){let g=p||"";try{Yb(l,function(I,O){let U=I;u(I)&&(U=xp(I)),h.push(g+O+"="+encodeURIComponent(U))})}catch(I){throw h.push(g+"type="+encodeURIComponent("_badmap")),I}}function rc(l){this.l=l.Ub||null,this.j=l.eb||!1}D(rc,Rp),rc.prototype.g=function(){return new hu(this.l,this.j)},rc.prototype.i=function(l){return function(){return l}}({});function hu(l,h){Lt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(hu,Lt),t=hu.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,sc(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oc(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,sc(this)),this.g&&(this.readyState=3,sc(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;i1(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function i1(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?oc(this):sc(this),this.readyState==3&&i1(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,oc(this))},t.Qa=function(l){this.g&&(this.response=l,oc(this))},t.ga=function(){this.g&&oc(this)};function oc(l){l.readyState=4,l.l=null,l.j=null,l.v=null,sc(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function sc(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(hu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function r1(l){let h="";return te(l,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Up(l,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=r1(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):qe(l,h,p))}function et(l){Lt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(et,Lt);var VR=/^https?$/i,LR=["POST","PUT"];t=et.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pp.g(),this.v=this.o?Nb(this.o):Nb(Pp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){o1(this,O);return}if(l=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var I in g)p.set(I,g[I]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let O of g.keys())p.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),I=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LR,h,void 0))||g||I||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,U]of p)this.g.setRequestHeader(O,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{c1(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){o1(this,O)}};function o1(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,s1(l),fu(l)}function s1(l){l.A||(l.A=!0,Ht(l,"complete"),Ht(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ht(this,"complete"),Ht(this,"abort"),fu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fu(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?a1(this):this.bb())},t.bb=function(){a1(this)};function a1(l){if(l.h&&typeof s<"u"&&(!l.v[1]||vi(l)!=4||l.Z()!=2)){if(l.u&&vi(l)==4)Ab(l.Ea,0,l);else if(Ht(l,"readystatechange"),vi(l)==4){l.h=!1;try{let U=l.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=U===0){var I=String(l.D).match(Jb)[1]||null;!I&&a.self&&a.self.location&&(I=a.self.location.protocol.slice(0,-1)),g=!VR.test(I?I.toLowerCase():"")}p=g}if(p)Ht(l,"complete"),Ht(l,"success");else{l.m=6;try{var O=2<vi(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",s1(l)}}finally{fu(l)}}}}function fu(l,h){if(l.g){c1(l);let p=l.g,g=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Ht(l,"ready");try{p.onreadystatechange=g}catch{}}}function c1(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function vi(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<vi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),gR(h)}};function l1(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function BR(l){let h={};l=(l.g&&2<=vi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(H(l[g]))continue;var p=C(l[g]);let I=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let O=h[I]||[];h[I]=O,O.push(p)}b(h,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ac(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function u1(l){this.Aa=0,this.i=[],this.j=new Xa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ac("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ac("baseRetryDelayMs",5e3,l),this.cb=ac("retryDelaySeedMs",1e4,l),this.Wa=ac("forwardChannelMaxRetries",2,l),this.wa=ac("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new zb(l&&l.concurrentRequestLimit),this.Da=new kR,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=u1.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,g){zt(0),this.W=l,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=v1(this,null,this.W),mu(this)};function $p(l){if(d1(l),l.G==3){var h=l.U++,p=yi(l.I);if(qe(p,"SID",l.K),qe(p,"RID",h),qe(p,"TYPE","terminate"),cc(l,p),h=new qi(l,l.j,h),h.L=2,h.v=du(yi(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=w1(h.j,null),h.g.ea(h.v)),h.F=Date.now(),cu(h)}y1(l)}function pu(l){l.g&&(Hp(l),l.g.cancel(),l.g=null)}function d1(l){pu(l),l.u&&(a.clearTimeout(l.u),l.u=null),gu(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function mu(l){if(!Wb(l.h)&&!l.s){l.s=!0;var h=l.Ga;za||Db(),Wa||(za(),Wa=!0),bp.add(h,l),l.B=0}}function jR(l,h){return qb(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Za(m(l.Ga,l,h),_1(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let I=new qi(this,this.j,l),O=this.o;if(this.S&&(O?(O=y(O),E(O,this.S)):O=this.S),this.m!==null||this.O||(I.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=f1(this,I,h),p=yi(this.I),qe(p,"RID",l),qe(p,"CVER",22),this.D&&qe(p,"X-HTTP-Session-Id",this.D),cc(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(r1(O)))+"&"+h:this.m&&Up(p,this.m,O)),jp(this.h,I),this.Ua&&qe(p,"TYPE","init"),this.P?(qe(p,"$req",h),qe(p,"SID","null"),I.T=!0,Fp(I,p,null)):Fp(I,p,h),this.G=2}}else this.G==3&&(l?h1(this,l):this.i.length==0||Wb(this.h)||h1(this))};function h1(l,h){var p;h?p=h.l:p=l.U++;let g=yi(l.I);qe(g,"SID",l.K),qe(g,"RID",p),qe(g,"AID",l.T),cc(l,g),l.m&&l.o&&Up(g,l.m,l.o),p=new qi(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=f1(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),jp(l.h,p),Fp(p,g,h)}function cc(l,h){l.H&&te(l.H,function(p,g){qe(h,g,p)}),l.l&&Yb({},function(p,g){qe(h,g,p)})}function f1(l,h,p){p=Math.min(l.i.length,p);var g=l.l?m(l.l.Na,l.l,l):null;e:{var I=l.i;let O=-1;for(;;){let U=["count="+p];O==-1?0<p?(O=I[0].g,U.push("ofs="+O)):O=0:U.push("ofs="+O);let $e=!0;for(let At=0;At<p;At++){let Ne=I[At].g,Bt=I[At].map;if(Ne-=O,0>Ne)O=Math.max(0,I[At].g-100),$e=!1;else try{FR(Bt,U,"req"+Ne+"_")}catch{g&&g(Bt)}}if($e){g=U.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,g}function p1(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;za||Db(),Wa||(za(),Wa=!0),bp.add(h,l),l.v=0}}function Gp(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Za(m(l.Fa,l),_1(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,m1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Za(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),pu(this),m1(this))};function Hp(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function m1(l){l.g=new qi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=yi(l.qa);qe(h,"RID","rpc"),qe(h,"SID",l.K),qe(h,"AID",l.T),qe(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&qe(h,"TO",l.ja),qe(h,"TYPE","xmlhttp"),cc(l,h),l.m&&l.o&&Up(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=du(yi(h)),p.m=null,p.P=!0,$b(p,l)}t.Za=function(){this.C!=null&&(this.C=null,pu(this),Gp(this),zt(19))};function gu(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function g1(l,h){var p=null;if(l.g==h){gu(l),Hp(l),l.g=null;var g=2}else if(Bp(l.h,h))p=h.D,Kb(l.h,h),g=1;else return;if(l.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var I=l.B;g=ou(),Ht(g,new Lb(g,p)),mu(l)}else p1(l);else if(I=h.s,I==3||I==0&&0<h.X||!(g==1&&jR(l,h)||g==2&&Gp(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),I){case 1:Kr(l,5);break;case 4:Kr(l,10);break;case 3:Kr(l,6);break;default:Kr(l,2)}}}function _1(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Kr(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),g=l.Xa;let I=!g;g=new qr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||lu(g,"https"),du(g),I?NR(g.toString(),p):PR(g.toString(),p)}else zt(2);l.G=0,l.l&&l.l.sa(h),y1(l),d1(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function y1(l){if(l.G=0,l.ka=[],l.l){let h=Qb(l.h);(h.length!=0||l.i.length!=0)&&(S(l.ka,h),S(l.ka,l.i),l.h.i.length=0,T(l.i),l.i.length=0),l.l.ra()}}function v1(l,h,p){var g=p instanceof qr?yi(p):new qr(p);if(g.g!="")h&&(g.g=h+"."+g.g),uu(g,g.s);else{var I=a.location;g=I.protocol,h=h?h+"."+I.hostname:I.hostname,I=+I.port;var O=new qr(null);g&&lu(O,g),h&&(O.g=h),I&&uu(O,I),p&&(O.l=p),g=O}return p=l.D,h=l.ya,p&&h&&qe(g,p,h),qe(g,"VER",l.la),cc(l,g),g}function w1(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new et(new rc({eb:p})):new et(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function b1(){}t=b1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _u(){}_u.prototype.g=function(l,h){return new cn(l,h)};function cn(l,h){Lt.call(this),this.g=new u1(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!H(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!H(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new es(this)}D(cn,Lt),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){$p(this.g)},cn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=xp(l),l=p);h.i.push(new DR(h.Ya++,l)),h.G==3&&mu(h)},cn.prototype.N=function(){this.g.l=null,delete this.j,$p(this.g),delete this.g,cn.aa.N.call(this)};function E1(l){Op.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}D(E1,Op);function D1(){Np.call(this),this.status=1}D(D1,Np);function es(l){this.g=l}D(es,b1),es.prototype.ua=function(){Ht(this.g,"a")},es.prototype.ta=function(l){Ht(this.g,new E1(l))},es.prototype.sa=function(l){Ht(this.g,new D1)},es.prototype.ra=function(){Ht(this.g,"b")},_u.prototype.createWebChannel=_u.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,i0=Fi.createWebChannelTransport=function(){return new _u},n0=Fi.getStatEventTarget=function(){return ou()},t0=Fi.Event=zr,kh=Fi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},su.NO_ERROR=0,su.TIMEOUT=8,su.HTTP_ERROR=6,al=Fi.ErrorCode=su,Bb.COMPLETE="complete",e0=Fi.EventType=Bb,Pb.EventType=Ya,Ya.OPEN="a",Ya.CLOSE="b",Ya.ERROR="c",Ya.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,Js=Fi.WebChannel=Pb,Xy=Fi.FetchXmlHttpFactory=rc,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,Zy=Fi.XhrIo=et}).apply(typeof Ph<"u"?Ph:typeof self<"u"?self:typeof window<"u"?window:{});var FT="@firebase/firestore";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var Ma="10.13.0";var Or=new bu("@firebase/firestore");function na(){return Or.logLevel}function LS(t){Or.setLogLevel(t)}function V(t,...e){if(Or.logLevel<=Kn.DEBUG){let n=e.map(cw);Or.debug(`Firestore (${Ma}): ${t}`,...n)}}function ut(t,...e){if(Or.logLevel<=Kn.ERROR){let n=e.map(cw);Or.error(`Firestore (${Ma}): ${t}`,...n)}}function In(t,...e){if(Or.logLevel<=Kn.WARN){let n=e.map(cw);Or.warn(`Firestore (${Ma}): ${t}`,...n)}}function cw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function J(t="Unexpected state"){let e=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: `+t;throw ut(e),new Error(e)}function ee(t,e){t||J()}function BS(t,e){t||J()}function $(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends A1{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Wh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},c0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}},l0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},u0=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),o=new vt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vt,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>x(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ee(typeof i.accessToken=="string"),new Wh(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new yt(e)}},d0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},h0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new d0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},f0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},p0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ee(typeof n.token=="string"),this.R=n.token,new f0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Ij(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var qh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=Ij(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function fe(t,e){return t<e?-1:t>e?1:0}function da(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function jS(t){return t+"\0"}var Xe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ne=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Xe(0,0))}static max(){return new t(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Kh=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&J(),i===void 0?i=e.length-n:i>e.length-n&&J(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},xe=class t extends Kh{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},Tj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dt=class t extends Kh{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return Tj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new F(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new F(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new F(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(xe.fromString(e))}static fromName(e){return new t(xe.fromString(e).popFirst(5))}static empty(){return new t(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new xe(e.slice()))}};var ha=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function m0(t){return t.fields.find(e=>e.kind===2)}function To(t){return t.fields.filter(e=>e.kind!==2)}ha.UNKNOWN_ID=-1;var ca=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var vl=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Tn.min())}};function US(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ne.fromTimestamp(i===1e9?new Xe(n+1,0):new Xe(n,i));return new Tn(r,G.empty(),e)}function $S(t){return new Tn(t.readTime,t.key,-1)}var Tn=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(ne.min(),G.empty(),-1)}static max(){return new t(ne.max(),G.empty(),-1)}};function lw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}var GS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function $r(t){return x(this,null,function*(){if(t.code!==R.FAILED_PRECONDITION||t.message!==GS)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var A=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&n()},c=>i(c))}),s=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&i(s)},d=>r(d))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var Yh=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new vt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Oo(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=uw(i.target.error);this.V.reject(new Oo(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new Oo(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(V("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new _0(n)}},Nr=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(lc())===12.2&&ut("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return V("SimpleDb","Removing database:",e),So(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!wu())return!1;if(t.v())return!0;let e=lc(),n=t.S(e),i=0<n&&n<10,r=HS(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return x(this,null,function*(){return this.db||(V("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;n(s)},r.onblocked=()=>{i(new Oo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new F(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new F(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new Oo(e,s))},r.onupgradeneeded=o=>{V("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,r.transaction,o.oldVersion,this.version).next(()=>{V("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return x(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Yh.open(this.db,e,o?"readonly":"readwrite",i),c=r(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),A.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(V("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function HS(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var g0=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return So(this.B.delete())}},Oo=class extends F{constructor(e,n){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Gr(t){return t.name==="IndexedDbTransactionError"}var _0=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(V("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(V("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),So(i)}add(e){return V("SimpleDb","ADD",this.store.name,e,e),So(this.store.add(e))}get(e){return So(this.store.get(e)).next(n=>(n===void 0&&(n=null),V("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return V("SimpleDb","DELETE",this.store.name,e),So(this.store.delete(e))}count(){return V("SimpleDb","COUNT",this.store.name),So(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new A((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(i),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new A((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}j(e,n){V("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,s,a)=>a.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new A((i,r)=>{n.onerror=o=>{let s=uw(o.target.error);r(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}W(e,n){let i=[];return new A((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let c=new g0(a),u=n(a.primaryKey,a.value,c);if(u instanceof A){let d=u.catch(f=>(c.done(),A.reject(f)));i.push(d)}c.isDone?r():c.K===null?a.continue():a.continue(c.K)}}).next(()=>A.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function So(t){return new A((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=uw(i.target.error);n(r)}})}var VT=!1;function uw(t){let e=Nr.S(lc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return VT||(VT=!0,setTimeout(()=>{throw i},0)),i}}return t}var y0=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){V("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>x(this,null,function*(){this.task=null;try{V("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Gr(n)?V("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield $r(n)}yield this.X(6e4)}))}},v0=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return x(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return A.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!i.has(s))return V("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(r,o)).next(a=>(V("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let s=$S(o);lw(s,i)>0&&(i=s)}),new Tn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var pn=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function $l(t){return t==null}function wl(t){return t===0&&1/t==-1/0}function zS(t){return typeof t=="number"&&Number.isInteger(t)&&!wl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Zt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=LT(e)),e=Sj(t.get(n),e);return LT(e)}function Sj(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function LT(t){return t+""}function ai(t){let e=t.length;if(ee(e>=2),e===2)return ee(t.charAt(0)===""&&t.charAt(1)===""),xe.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&J(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=t.substring(o,s),r+="\0";break;case"":r+=t.substring(o,s+1);break;default:J()}o=s+2}return new xe(i)}var BT=["userId","batchId"];function jh(t,e){return[t,Zt(e)]}function WS(t,e,n){return[t,Zt(e),n]}var Mj={},Aj=["prefixPath","collectionGroup","readTime","documentId"],xj=["prefixPath","collectionGroup","documentId"],Rj=["collectionGroup","readTime","prefixPath","documentId"],Oj=["canonicalId","targetId"],Nj=["targetId","path"],Pj=["path","targetId"],kj=["collectionId","parent"],Fj=["indexId","uid"],Vj=["uid","sequenceNumber"],Lj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bj=["indexId","uid","orderedDocumentKey"],jj=["userId","collectionPath","documentId"],Uj=["userId","collectionPath","largestBatchId"],$j=["userId","collectionGroup","largestBatchId"],qS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gj=[...qS,"documentOverlays"],KS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QS=KS,dw=[...QS,"indexConfiguration","indexState","indexEntries"],Hj=dw,zj=[...dw,"globals"];var bl=class extends Qh{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Tt(t,e){let n=$(t);return Nr.F(n._e,e)}function jT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ho(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function YS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ke=class t{constructor(e,n){this.comparator=e,this.root=n||li.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,li.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,li.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new aa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new aa(this.root,e,this.comparator,!1)}getReverseIterator(){return new aa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new aa(this.root,e,this.comparator,!0)}},aa=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},li=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}};li.EMPTY=null,li.RED=!0,li.BLACK=!1;li.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,i,r,o){return this}insert(e,n,i){return new li(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ze=class t{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jh(this.data.getIterator())}getIteratorFrom(e){return new Jh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Jh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Zs(t){return t.hasNext()?t.getNext():void 0}var mn=class t{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new t([])}unionWith(e){let n=new ze(dt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return da(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Zh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function JS(){return typeof atob<"u"}var ft=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Zh("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ft.EMPTY_BYTE_STRING=new ft("");var Wj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(t){if(ee(!!t),typeof t=="string"){let e=0,n=Wj.exec(t);if(ee(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pr(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}function Gf(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hw(t){let e=t.mapValue.fields.__previous_value__;return Gf(e)?hw(e):e}function El(t){let e=Bi(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}var w0=class{constructor(e,n,i,r,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},kr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var xr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Uh={nullValue:"NULL_VALUE"};function No(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gf(t)?4:ZS(t)?9007199254740991:Hf(t)?10:11:J()}function hi(t,e){if(t===e)return!0;let n=No(t);if(n!==No(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return El(t).isEqual(El(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Bi(r.timestampValue),a=Bi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Pr(r.bytesValue).isEqual(Pr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Qe(r.geoPointValue.latitude)===Qe(o.geoPointValue.latitude)&&Qe(r.geoPointValue.longitude)===Qe(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Qe(r.integerValue)===Qe(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=Qe(r.doubleValue),a=Qe(o.doubleValue);return s===a?wl(s)===wl(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return da(t.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:case 11:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(jT(s)!==jT(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!hi(s[c],a[c])))return!1;return!0}(t,e);default:return J()}}function Dl(t,e){return(t.values||[]).find(n=>hi(n,e))!==void 0}function Fr(t,e){if(t===e)return 0;let n=No(t),i=No(e);if(n!==i)return fe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Qe(o.integerValue||o.doubleValue),c=Qe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return UT(t.timestampValue,e.timestampValue);case 4:return UT(El(t),El(e));case 5:return fe(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Pr(o),c=Pr(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=fe(a[u],c[u]);if(d!==0)return d}return fe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=fe(Qe(o.latitude),Qe(s.latitude));return a!==0?a:fe(Qe(o.longitude),Qe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $T(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;let f=o.fields||{},m=s.fields||{},_=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(c=m.value)===null||c===void 0?void 0:c.arrayValue,T=fe(((u=_?.values)===null||u===void 0?void 0:u.length)||0,((d=D?.values)===null||d===void 0?void 0:d.length)||0);return T!==0?T:$T(_,D)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===xr.mapValue&&s===xr.mapValue)return 0;if(o===xr.mapValue)return 1;if(s===xr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=fe(c[f],d[f]);if(m!==0)return m;let _=Fr(a[c[f]],u[d[f]]);if(_!==0)return _}return fe(c.length,d.length)}(t.mapValue,e.mapValue);default:throw J()}}function UT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);let n=Bi(t),i=Bi(e),r=fe(n.seconds,i.seconds);return r!==0?r:fe(n.nanos,i.nanos)}function $T(t,e){let n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){let o=Fr(n[r],i[r]);if(o)return o}return fe(n.length,i.length)}function fa(t){return b0(t)}function b0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Bi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Pr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=b0(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${b0(n.fields[s])}`;return r+"}"}(t.mapValue):J()}function Po(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function E0(t){return!!t&&"integerValue"in t}function Cl(t){return!!t&&"arrayValue"in t}function GT(t){return!!t&&"nullValue"in t}function HT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $h(t){return!!t&&"mapValue"in t}function Hf(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function pl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ho(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=pl(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ZS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var XS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function qj(t){return"nullValue"in t?Uh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Po(kr.empty(),G.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Hf(t)?XS:{mapValue:{}}:J()}function Kj(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Po(kr.empty(),G.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?XS:"mapValue"in t?Hf(t)?{mapValue:{}}:xr:J()}function zT(t,e){let n=Fr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function WT(t,e){let n=Fr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Gt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!$h(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(n)}setAll(e){let n=dt.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}s?i[a.lastSegment()]=pl(s):r.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());$h(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];$h(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ho(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(pl(this.value))}};function eM(t){let e=[];return Ho(t.fields,(n,i)=>{let r=new dt([n]);if($h(i)){let o=eM(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new mn(e)}var wt=class t{constructor(e,n,i,r,o,s,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ne.min(),ne.min(),ne.min(),Gt.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,ne.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,ne.min(),ne.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ne.min(),ne.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fi=class{constructor(e,n){this.position=e,this.inclusive=n}};function qT(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],s=t.position[r];if(o.field.isKeyField()?i=G.comparator(G.fromName(s.referenceValue),n.key):i=Fr(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function KT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hi(t.position[n],e.position[n]))return!1;return!0}var ko=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Qj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Xh=class{},Ie=class t extends Xh{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new I0(e,n,i):n==="array-contains"?new M0(e,i):n==="in"?new ef(e,i):n==="not-in"?new A0(e,i):n==="array-contains-any"?new x0(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new T0(e,i):new S0(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fr(n,this.value)):n!==null&&No(this.value)===No(n)&&this.matchesComparison(Fr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Be=class t extends Xh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return pa(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function pa(t){return t.op==="and"}function D0(t){return t.op==="or"}function fw(t){return tM(t)&&pa(t)}function tM(t){for(let e of t.filters)if(e instanceof Be)return!1;return!0}function C0(t){if(t instanceof Ie)return t.field.canonicalString()+t.op.toString()+fa(t.value);if(fw(t))return t.filters.map(e=>C0(e)).join(",");{let e=t.filters.map(n=>C0(n)).join(",");return`${t.op}(${e})`}}function nM(t,e){return t instanceof Ie?function(i,r){return r instanceof Ie&&i.op===r.op&&i.field.isEqual(r.field)&&hi(i.value,r.value)}(t,e):t instanceof Be?function(i,r){return r instanceof Be&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&nM(s,r.filters[a]),!0):!1}(t,e):void J()}function iM(t,e){let n=t.filters.concat(e);return Be.create(n,t.op)}function rM(t){return t instanceof Ie?function(n){return`${n.field.canonicalString()} ${n.op} ${fa(n.value)}`}(t):t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(rM).join(" ,")+"}"}(t):"Filter"}var I0=class extends Ie{constructor(e,n,i){super(e,n,i),this.key=G.fromName(i.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},T0=class extends Ie{constructor(e,n){super(e,"in",n),this.keys=oM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},S0=class extends Ie{constructor(e,n){super(e,"not-in",n),this.keys=oM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function oM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}var M0=class extends Ie{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Cl(n)&&Dl(n.arrayValue,this.value)}},ef=class extends Ie{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Dl(this.value.arrayValue,n)}},A0=class extends Ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Dl(this.value.arrayValue,n)}},x0=class extends Ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Cl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Dl(this.value.arrayValue,i))}};var R0=class{constructor(e,n=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function O0(t,e=null,n=[],i=[],r=null,o=null,s=null){return new R0(t,e,n,i,r,o,s)}function Fo(t){let e=$(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>C0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),$l(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>fa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>fa(i)).join(",")),e.ue=n}return e.ue}function Gl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Qj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!KT(t.startAt,e.startAt)&&KT(t.endAt,e.endAt)}function tf(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function nf(t,e){return t.filters.filter(n=>n instanceof Ie&&n.field.isEqual(e))}function QT(t,e,n){let i=Uh,r=!0;for(let o of nf(t,e)){let s=Uh,a=!0;switch(o.op){case"<":case"<=":s=qj(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Uh}zT({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];zT({value:i,inclusive:r},{value:s,inclusive:n.inclusive})<0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}function YT(t,e,n){let i=xr,r=!0;for(let o of nf(t,e)){let s=xr,a=!0;switch(o.op){case">=":case">":s=Kj(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=xr}WT({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];WT({value:i,inclusive:r},{value:s,inclusive:n.inclusive})>0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}var Hn=class{constructor(e,n=null,i=[],r=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function sM(t,e,n,i,r,o,s,a){return new Hn(t,e,n,i,r,o,s,a)}function Aa(t){return new Hn(t)}function JT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pw(t){return t.collectionGroup!==null}function la(t){let e=$(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ze(dt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ko(o,i))}),n.has(dt.keyField().canonicalString())||e.ce.push(new ko(dt.keyField(),i))}return e.ce}function Xt(t){let e=$(t);return e.le||(e.le=Yj(e,la(t))),e.le}function Yj(t,e){if(t.limitType==="F")return O0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new ko(r.field,o)});let n=t.endAt?new fi(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new fi(t.startAt.position,t.startAt.inclusive):null;return O0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function N0(t,e){let n=t.filters.concat([e]);return new Hn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rf(t,e,n){return new Hn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hl(t,e){return Gl(Xt(t),Xt(e))&&t.limitType===e.limitType}function aM(t){return`${Fo(Xt(t))}|lt:${t.limitType}`}function ia(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>rM(r)).join(", ")}]`),$l(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>fa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>fa(r)).join(",")),`Target(${i})`}(Xt(t))}; limitType=${t.limitType})`}function zl(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):G.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of la(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,a,c){let u=qT(s,a,c);return s.inclusive?u<=0:u<0}(i.startAt,la(i),r)||i.endAt&&!function(s,a,c){let u=qT(s,a,c);return s.inclusive?u>=0:u>0}(i.endAt,la(i),r))}(t,e)}function cM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lM(t){return(e,n)=>{let i=!1;for(let r of la(t)){let o=Jj(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function Jj(t,e,n){let i=t.field.isKeyField()?G.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Fr(c,u):J()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return J()}}var pi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ho(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return YS(this.inner)}size(){return this.innerSize}};var Zj=new Ke(G.comparator);function an(){return Zj}var uM=new Ke(G.comparator);function hl(...t){let e=uM;for(let n of t)e=e.insert(n.key,n);return e}function dM(t){let e=uM;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ci(){return ml()}function hM(){return ml()}function ml(){return new pi(t=>t.toString(),(t,e)=>t.isEqual(e))}var Xj=new Ke(G.comparator),eU=new ze(G.comparator);function _e(...t){let e=eU;for(let n of t)e=e.add(n);return e}var tU=new ze(fe);function mw(){return tU}function gw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wl(e)?"-0":e}}function fM(t){return{integerValue:""+t}}function pM(t,e){return zS(e)?fM(e):gw(t,e)}var ma=class{constructor(){this._=void 0}};function nU(t,e,n){return t instanceof Vr?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Gf(o)&&(o=hw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ji?gM(t,e):t instanceof Ui?_M(t,e):function(r,o){let s=mM(r,o),a=ZT(s)+ZT(r.Pe);return E0(s)&&E0(r.Pe)?fM(a):gw(r.serializer,a)}(t,e)}function iU(t,e,n){return t instanceof ji?gM(t,e):t instanceof Ui?_M(t,e):n}function mM(t,e){return t instanceof Lr?function(i){return E0(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var Vr=class extends ma{},ji=class extends ma{constructor(e){super(),this.elements=e}};function gM(t,e){let n=yM(e);for(let i of t.elements)n.some(r=>hi(r,i))||n.push(i);return{arrayValue:{values:n}}}var Ui=class extends ma{constructor(e){super(),this.elements=e}};function _M(t,e){let n=yM(e);for(let i of t.elements)n=n.filter(r=>!hi(r,i));return{arrayValue:{values:n}}}var Lr=class extends ma{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function ZT(t){return Qe(t.integerValue||t.doubleValue)}function yM(t){return Cl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Vo=class{constructor(e,n){this.field=e,this.transform=n}};function rU(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ji&&r instanceof ji||i instanceof Ui&&r instanceof Ui?da(i.elements,r.elements,hi):i instanceof Lr&&r instanceof Lr?hi(i.Pe,r.Pe):i instanceof Vr&&r instanceof Vr}(t.transform,e.transform)}var P0=class{constructor(e,n){this.version=e,this.transformResults=n}},st=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ga=class{};function vM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jr(t.key,st.none()):new Br(t.key,t.data,st.none());{let n=t.data,i=Gt.empty(),r=new ze(dt.comparator);for(let o of e.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new zn(t.key,i,new mn(r.toArray()),st.none())}}function oU(t,e,n){t instanceof Br?function(r,o,s){let a=r.value.clone(),c=eS(r.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof zn?function(r,o,s){if(!Gh(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=eS(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(wM(r)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function gl(t,e,n,i){return t instanceof Br?function(o,s,a,c){if(!Gh(o.precondition,s))return a;let u=o.value.clone(),d=tS(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof zn?function(o,s,a,c){if(!Gh(o.precondition,s))return a;let u=tS(o.fieldTransforms,c,s),d=s.data;return d.setAll(wM(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,i):function(o,s,a){return Gh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function sU(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=mM(i.transform,r||null);o!=null&&(n===null&&(n=Gt.empty()),n.set(i.field,o))}return n||null}function XT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&da(i,r,(o,s)=>rU(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Br=class extends ga{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},zn=class extends ga{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function wM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function eS(t,e,n){let i=new Map;ee(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,iU(s,a,n[r]))}return i}function tS(t,e,n){let i=new Map;for(let r of t){let o=r.transform,s=n.data.field(r.field);i.set(r.field,nU(o,s,e))}return i}var jr=class extends ga{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Il=class extends ga{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Tl=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&oU(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=gl(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=gl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=hM();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(r.key)?null:a;let c=vM(s,a);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(ne.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&da(this.mutations,e.mutations,(n,i)=>XT(n,i))&&da(this.baseMutations,e.baseMutations,(n,i)=>XT(n,i))}},k0=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ee(e.mutations.length===i.length);let r=function(){return Xj}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new t(e,n,i,r)}};var Sl=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var F0=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var gt,Ae;function bM(t){switch(t){default:return J();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function EM(t){if(t===void 0)return ut("GRPC error has no .code"),R.UNKNOWN;switch(t){case gt.OK:return R.OK;case gt.CANCELLED:return R.CANCELLED;case gt.UNKNOWN:return R.UNKNOWN;case gt.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case gt.INTERNAL:return R.INTERNAL;case gt.UNAVAILABLE:return R.UNAVAILABLE;case gt.UNAUTHENTICATED:return R.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case gt.NOT_FOUND:return R.NOT_FOUND;case gt.ALREADY_EXISTS:return R.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return R.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case gt.ABORTED:return R.ABORTED;case gt.OUT_OF_RANGE:return R.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return R.UNIMPLEMENTED;case gt.DATA_LOSS:return R.DATA_LOSS;default:return J()}}(Ae=gt||(gt={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";var nS=null;function DM(){return new TextEncoder}var aU=new Ir([4294967295,4294967295],0);function iS(t){let e=DM().encode(t),n=new Jy;return n.update(e),new Uint8Array(n.digest())}function rS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ir([n,i],0),new Ir([r,o],0)]}var V0=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ro(`Invalid padding: ${n}`);if(i<0)throw new Ro(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ro(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ro(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ir.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Ir.fromNumber(i)));return r.compare(aU)===1&&(r=new Ir([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=iS(e),[i,r]=rS(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,r,n);return i.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=iS(e),[i,r]=rS(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Ro=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ml=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(ne.min(),r,new Ke(fe),an(),_e())}},Al=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,_e(),_e(),_e())}};var ua=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},of=class{constructor(e,n){this.targetId=e,this.me=n}},sf=class{constructor(e,n,i=ft.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},af=class{constructor(){this.fe=0,this.ge=sS(),this.pe=ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=_e(),n=_e(),i=_e();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:J()}}),new Al(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=sS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},L0=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=an(),this.qe=oS(),this.Qe=new Ke(fe)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(tf(o))if(i===0){let s=new G(o.path);this.Ue(n,s,wt.newNoDocument(s,ne.min()))}else ee(i===1);else{let s=this.Ye(n);if(s!==i){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}nS?.et(function(d,f,m,_,D){var T,S,k,H,B,z;let re={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},te=f.unchangedNames;return te&&(re.bloomFilter={applied:D===0,hashCount:(T=te?.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(H=(k=(S=te?.bits)===null||S===void 0?void 0:S.bitmap)===null||k===void 0?void 0:k.length)!==null&&H!==void 0?H:0,padding:(z=(B=te?.bits)===null||B===void 0?void 0:B.padding)!==null&&z!==void 0?z:0,mightContain:b=>{var y;return(y=_?.mightContain(b))!==null&&y!==void 0&&y}}),re}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,a;try{s=Pr(i).toUint8Array()}catch(c){if(c instanceof Zh)return In("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new V0(s,r,o)}catch(c){return In(c instanceof Ro?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&tf(a.target)){let c=new G(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,wt.newNoDocument(c,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let i=_e();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let r=new Ml(e,n,this.Qe,this.ke,i);return this.ke=an(),this.qe=oS(),this.Qe=new Ke(fe),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new af,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ze(fe),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new af),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function oS(){return new Ke(G.comparator)}function sS(){return new Ke(G.comparator)}var cU={asc:"ASCENDING",desc:"DESCENDING"},lU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uU={and:"AND",or:"OR"},B0=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function j0(t,e){return t.useProto3Json||$l(e)?e:{value:e}}function _a(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dU(t,e){return _a(t,e.toTimestamp())}function ht(t){return ee(!!t),ne.fromTimestamp(function(n){let i=Bi(n);return new Xe(i.seconds,i.nanos)}(t))}function _w(t,e){return U0(t,e).canonicalString()}function U0(t,e){let n=function(r){return new xe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function IM(t){let e=xe.fromString(t);return ee(kM(e)),e}function xl(t,e){return _w(t.databaseId,e.path)}function ui(t,e){let n=IM(e);if(n.get(1)!==t.databaseId.projectId)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(MM(n))}function TM(t,e){return _w(t.databaseId,e)}function SM(t){let e=IM(t);return e.length===4?xe.emptyPath():MM(e)}function $0(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MM(t){return ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function aS(t,e,n){return{name:xl(t,e),fields:n.value.mapValue.fields}}function AM(t,e,n){let i=ui(t,e.name),r=ht(e.updateTime),o=e.createTime?ht(e.createTime):ne.min(),s=new Gt({mapValue:{fields:e.fields}}),a=wt.newFoundDocument(i,r,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function hU(t,e){return"found"in e?function(i,r){ee(!!r.found),r.found.name,r.found.updateTime;let o=ui(i,r.found.name),s=ht(r.found.updateTime),a=r.found.createTime?ht(r.found.createTime):ne.min(),c=new Gt({mapValue:{fields:r.found.fields}});return wt.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(i,r){ee(!!r.missing),ee(!!r.readTime);let o=ui(i,r.missing),s=ht(r.readTime);return wt.newNoDocument(o,s)}(t,e):J()}function fU(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(ee(d===void 0||typeof d=="string"),ft.fromBase64String(d||"")):(ee(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ft.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?R.UNKNOWN:EM(u.code);return new F(d,u.message||"")}(s);n=new sf(i,r,o,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=ui(t,i.document.name),o=ht(i.document.updateTime),s=i.document.createTime?ht(i.document.createTime):ne.min(),a=new Gt({mapValue:{fields:i.document.fields}}),c=wt.newFoundDocument(r,o,s,a),u=i.targetIds||[],d=i.removedTargetIds||[];n=new ua(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=ui(t,i.document),o=i.readTime?ht(i.readTime):ne.min(),s=wt.newNoDocument(r,o),a=i.removedTargetIds||[];n=new ua([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=ui(t,i.document),o=i.removedTargetIds||[];n=new ua([],o,r,null)}else{if(!("filter"in e))return J();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new F0(r,o),a=i.targetId;n=new of(a,s)}}return n}function Rl(t,e){let n;if(e instanceof Br)n={update:aS(t,e.key,e.value)};else if(e instanceof jr)n={delete:xl(t,e.key)};else if(e instanceof zn)n={update:aS(t,e.key,e.data),updateMask:vU(e.fieldMask)};else{if(!(e instanceof Il))return J();n={verify:xl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof Vr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ji)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ui)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Lr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw J()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:dU(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:J()}(t,e.precondition)),n}function G0(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?st.updateTime(ht(o.updateTime)):o.exists!==void 0?st.exists(o.exists):st.none()}(e.currentDocument):st.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let c=null;if("setToServerValue"in a)ee(a.setToServerValue==="REQUEST_TIME"),c=new Vr;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new ji(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Ui(d)}else"increment"in a?c=new Lr(s,a.increment):J();let u=dt.fromServerFormat(a.fieldPath);return new Vo(u,c)}(t,r)):[];if(e.update){e.update.name;let r=ui(t,e.update.name),o=new Gt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new mn(u.map(d=>dt.fromServerFormat(d)))}(e.updateMask);return new zn(r,o,s,n,i)}return new Br(r,o,n,i)}if(e.delete){let r=ui(t,e.delete);return new jr(r,n)}if(e.verify){let r=ui(t,e.verify);return new Il(r,n)}return J()}function pU(t,e){return t&&t.length>0?(ee(e!==void 0),t.map(n=>function(r,o){let s=r.updateTime?ht(r.updateTime):ht(o);return s.isEqual(ne.min())&&(s=ht(o)),new P0(s,r.transformResults||[])}(n,e))):[]}function xM(t,e){return{documents:[TM(t,e.path)]}}function RM(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=TM(t,r);let o=function(u){if(u.length!==0)return PM(Be.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:ra(m.field),direction:gU(m.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=j0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function OM(t){let e=SM(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){ee(i===1);let d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){let m=NM(f);return m instanceof Be&&fw(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(m=>function(D){return new ko(oa(D.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,$l(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){let m=!!f.before,_=f.values||[];return new fi(_,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){let m=!f.before,_=f.values||[];return new fi(_,m)}(n.endAt)),sM(e,r,s,o,a,"F",c,u)}function mU(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=oa(n.unaryFilter.field);return Ie.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=oa(n.unaryFilter.field);return Ie.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=oa(n.unaryFilter.field);return Ie.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=oa(n.unaryFilter.field);return Ie.create(s,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return Ie.create(oa(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Be.create(n.compositeFilter.filters.map(i=>NM(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function gU(t){return cU[t]}function _U(t){return lU[t]}function yU(t){return uU[t]}function ra(t){return{fieldPath:t.canonicalString()}}function oa(t){return dt.fromServerFormat(t.fieldPath)}function PM(t){return t instanceof Ie?function(n){if(n.op==="=="){if(HT(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NAN"}};if(GT(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(HT(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NOT_NAN"}};if(GT(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ra(n.field),op:_U(n.op),value:n.value}}}(t):t instanceof Be?function(n){let i=n.getFilters().map(r=>PM(r));return i.length===1?i[0]:{compositeFilter:{op:yU(n.op),filters:i}}}(t):J()}function vU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ya=class t{constructor(e,n,i,r,o=ne.min(),s=ne.min(),a=ft.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cf=class{constructor(e){this.ct=e}};function wU(t,e){let n;if(e.document)n=AM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=G.fromSegments(e.noDocument.path),r=Bo(e.noDocument.readTime);n=wt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return J();{let i=G.fromSegments(e.unknownDocument.path),r=Bo(e.unknownDocument.version);n=wt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new Xe(r[0],r[1]);return ne.fromTimestamp(o)}(e.readTime)),n}function cS(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:lf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,s){return{name:xl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:_a(o,s.version.toTimestamp()),createTime:_a(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Lo(e.version)};else{if(!e.isUnknownDocument())return J();i.unknownDocument={path:n.path.toArray(),version:Lo(e.version)}}return i}function lf(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Lo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bo(t){let e=new Xe(t.seconds,t.nanoseconds);return ne.fromTimestamp(e)}function Mo(t,e){let n=(e.baseMutations||[]).map(o=>G0(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>G0(t.ct,o)),r=Xe.fromMillis(e.localWriteTimeMs);return new Tl(e.batchId,r,n,i)}function fl(t){let e=Bo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Bo(t.lastLimboFreeSnapshotVersion):ne.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return ee(o.documents.length===1),Xt(Aa(SM(o.documents[0])))}(t.query):function(o){return Xt(OM(o))}(t.query),new ya(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ft.fromBase64String(t.resumeToken))}function FM(t,e){let n=Lo(e.snapshotVersion),i=Lo(e.lastLimboFreeSnapshotVersion),r;r=tf(e.target)?xM(t.ct,e.target):RM(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fo(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function yw(t){let e=OM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rf(e,e.limit,"L"):e}function r0(t,e){return new Sl(e.largestBatchId,G0(t.ct,e.overlayMutation))}function lS(t,e){let n=e.path.lastSegment();return[t,Zt(e.path.popLast()),n]}function uS(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:Lo(i.readTime),documentKey:Zt(i.documentKey.path),largestBatchId:i.largestBatchId}}var H0=class{getBundleMetadata(e,n){return dS(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:Bo(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return dS(e).put(function(r){return{bundleId:r.id,createTime:Lo(ht(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return hS(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:yw(o.bundledQuery),readTime:Bo(o.readTime)}}(i)})}saveNamedQuery(e,n){return hS(e).put(function(r){return{name:r.name,readTime:Lo(ht(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function dS(t){return Tt(t,"bundles")}function hS(t){return Tt(t,"namedQueries")}var uf=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return cl(e).get(lS(this.userId,n)).next(i=>i?r0(this.serializer,i):null)}getOverlays(e,n){let i=ci();return A.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,s)=>{let a=new Sl(n,s);r.push(this.ht(e,a))}),A.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(s=>r.add(Zt(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(cl(e).j("collectionPathOverlayIndex",a))}),A.waitFor(o)}getOverlaysForCollection(e,n,i){let r=ci(),o=Zt(n),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return cl(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=r0(this.serializer,c);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=ci(),s,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return cl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,d)=>{let f=r0(this.serializer,u);o.size()<r||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,n){return cl(e).put(function(r,o,s){let[a,c,u]=lS(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Rl(r.ct,s.mutation)}}(this.serializer,this.userId,n))}};function cl(t){return Tt(t,"documentOverlays")}var z0=class{Pt(e){return Tt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let i=n?.value;return i?ft.fromUint8Array(i):ft.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var Vi=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Qe(e.integerValue));else if("doubleValue"in e){let i=Qe(e.doubleValue);isNaN(i)?this.dt(n,13):(this.dt(n,15),wl(i)?n.At(0):n.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(n,20),typeof i=="string"&&(i=Bi(i)),n.Rt(`${i.seconds||""}`),n.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Pr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(n,45),n.At(i.latitude||0),n.At(i.longitude||0)}else"mapValue"in e?ZS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Hf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):J()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let i=e.fields||{};this.dt(n,55);for(let r of Object.keys(i))this.Vt(r,n),this.Tt(i[r],n)}wt(e,n){var i,r;let o=e.fields||{};this.dt(n,53);let s="value",a=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(n,15),n.At(Qe(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let i=e.values||[];this.dt(n,50);for(let r of i)this.Tt(r,n)}yt(e,n){this.dt(n,37),G.fromName(e).path.forEach(i=>{this.dt(n,60),this.Dt(i,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Vi.vt=new Vi;function bU(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function fS(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let s=bU(255&i[o]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}var W0=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ft(i.value),i=n.next();this.Mt()}xt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ot(i.value),i=n.next();this.Nt()}Lt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=n.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{let r=n.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(e){let n=this.qt(e),i=fS(n);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}Kt(e){let n=this.qt(e),i=fS(n);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ft(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){let n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},q0=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},K0=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ao=class{constructor(){this.jt=new W0,this.Ht=new q0(this.jt),this.Jt=new K0(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var xo=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Zt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function Tr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=pS(t.arrayValue,e.arrayValue),n!==0?n:(n=pS(t.directionalValue,e.directionalValue),n!==0?n:G.comparator(t.documentKey,e.documentKey)))}function pS(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var df=class{constructor(e){this.Xt=new ze((n,i)=>dt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let n of e.filters){let i=n;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(e){if(ee(e.collectionGroup===this.collectionId),this.nn)return!1;let n=m0(e);if(n!==void 0&&!this.sn(n))return!1;let i=To(e),r=new Set,o=0,s=0;for(;o<i.length&&this.sn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new ze(dt.comparator),n=[];for(let i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new ca(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new ca(i.field,0))}for(let i of this.en)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new ca(i.field,i.dir==="asc"?0:1)));return new ha(ha.UNKNOWN_ID,this.collectionId,n,vl.empty())}sn(e){for(let n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function VM(t){var e,n;if(ee(t instanceof Ie||t instanceof Be),t instanceof Ie){if(t instanceof ef){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Ie.create(t.field,"==",o)))||[];return Be.create(r,"or")}return t}let i=t.filters.map(r=>VM(r));return Be.create(i,t.op)}function EU(t){if(t.getFilters().length===0)return[];let e=J0(VM(t));return ee(LM(e)),Q0(e)||Y0(e)?[e]:e.getFilters()}function Q0(t){return t instanceof Ie}function Y0(t){return t instanceof Be&&fw(t)}function LM(t){return Q0(t)||Y0(t)||function(n){if(n instanceof Be&&D0(n)){for(let i of n.getFilters())if(!Q0(i)&&!Y0(i))return!1;return!0}return!1}(t)}function J0(t){if(ee(t instanceof Ie||t instanceof Be),t instanceof Ie)return t;if(t.filters.length===1)return J0(t.filters[0]);let e=t.filters.map(i=>J0(i)),n=Be.create(e,t.op);return n=hf(n),LM(n)?n:(ee(n instanceof Be),ee(pa(n)),ee(n.filters.length>1),n.filters.reduce((i,r)=>vw(i,r)))}function vw(t,e){let n;return ee(t instanceof Ie||t instanceof Be),ee(e instanceof Ie||e instanceof Be),n=t instanceof Ie?e instanceof Ie?function(r,o){return Be.create([r,o],"and")}(t,e):mS(t,e):e instanceof Ie?mS(e,t):function(r,o){if(ee(r.filters.length>0&&o.filters.length>0),pa(r)&&pa(o))return iM(r,o.getFilters());let s=D0(r)?r:o,a=D0(r)?o:r,c=s.filters.map(u=>vw(u,a));return Be.create(c,"or")}(t,e),hf(n)}function mS(t,e){if(pa(e))return iM(e,t.getFilters());{let n=e.filters.map(i=>vw(t,i));return Be.create(n,"or")}}function hf(t){if(ee(t instanceof Ie||t instanceof Be),t instanceof Ie)return t;let e=t.getFilters();if(e.length===1)return hf(e[0]);if(tM(t))return t;let n=e.map(r=>hf(r)),i=[];return n.forEach(r=>{r instanceof Ie?i.push(r):r instanceof Be&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Be.create(i,t.op)}var Z0=class{constructor(){this.un=new Ol}addToCollectionParentIndex(e,n){return this.un.add(n),A.resolve()}getCollectionParents(e,n){return A.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return A.resolve()}deleteFieldIndex(e,n){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,n){return A.resolve()}getDocumentsMatchingTarget(e,n){return A.resolve(null)}getIndexType(e,n){return A.resolve(0)}getFieldIndexes(e,n){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,n){return A.resolve(Tn.min())}getMinOffsetFromCollectionGroup(e,n){return A.resolve(Tn.min())}updateCollectionGroup(e,n,i){return A.resolve()}updateIndexEntries(e,n){return A.resolve()}},Ol=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new ze(xe.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ze(xe.comparator)).toArray()}};var Fh=new Uint8Array(0),X0=class{constructor(e,n){this.databaseId=n,this.cn=new Ol,this.ln=new pi(i=>Fo(i),(i,r)=>Gl(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});let o={collectionId:i,parent:Zt(r)};return gS(e).put(o)}return A.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[jS(n),""],!1,!0);return gS(e).U(r).next(o=>{for(let s of o){if(s.collectionId!==n)break;i.push(ai(s.parent))}return i})}addFieldIndex(e,n){let i=ll(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let s=ea(e);return o.next(a=>{s.put(uS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=ll(e),r=ea(e),o=Xs(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=ll(e),i=Xs(e),r=ea(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return A.forEach(this.hn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new df(i).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=Xs(e),r=!0,o=new Map;return A.forEach(this.hn(n),s=>this.Pn(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=_e(),a=[];return A.forEach(o,(c,u)=>{V("IndexedDbIndexManager",`Using index ${function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`}(c)} to execute ${Fo(n)}`);let d=function(B,z){let re=m0(z);if(re===void 0)return null;for(let te of nf(B,re.fieldPath))switch(te.op){case"array-contains-any":return te.value.arrayValue.values||[];case"array-contains":return[te.value]}return null}(u,c),f=function(B,z){let re=new Map;for(let te of To(z))for(let b of nf(B,te.fieldPath))switch(b.op){case"==":case"in":re.set(te.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return re.set(te.fieldPath.canonicalString(),b.value),Array.from(re.values())}return null}(u,c),m=function(B,z){let re=[],te=!0;for(let b of To(z)){let y=b.kind===0?QT(B,b.fieldPath,B.startAt):YT(B,b.fieldPath,B.startAt);re.push(y.value),te&&(te=y.inclusive)}return new fi(re,te)}(u,c),_=function(B,z){let re=[],te=!0;for(let b of To(z)){let y=b.kind===0?YT(B,b.fieldPath,B.endAt):QT(B,b.fieldPath,B.endAt);re.push(y.value),te&&(te=y.inclusive)}return new fi(re,te)}(u,c),D=this.In(c,u,m),T=this.In(c,u,_),S=this.Tn(c,u,f),k=this.En(c.indexId,d,D,m.inclusive,T,_.inclusive,S);return A.forEach(k,H=>i.G(H,n.limit).next(B=>{B.forEach(z=>{let re=G.fromSegments(z.documentKey);s.has(re)||(s=s.add(re),a.push(re))})}))}).next(()=>a)}return A.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=EU(Be.create(e.filters,"and")).map(i=>O0(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,i,r,o,s,a){let c=(n!=null?n.length:1)*Math.max(i.length,o.length),u=c/(n!=null?n.length:1),d=[];for(let f=0;f<c;++f){let m=n?this.dn(n[f/u]):Fh,_=this.An(e,m,i[f%u],r),D=this.Rn(e,m,o[f%u],s),T=a.map(S=>this.An(e,m,S,!0));d.push(...this.createRange(_,D,T))}return d}An(e,n,i,r){let o=new xo(e,G.empty(),n,i);return r?o:o.Zt()}Rn(e,n,i,r){let o=new xo(e,G.empty(),n,i);return r?o.Zt():o}Pn(e,n){let i=new df(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(let a of o)i.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let i=2,r=this.hn(n);return A.forEach(r,o=>this.Pn(e,o).next(s=>{s?i!==0&&s.fields.length<function(c){let u=new ze(dt.comparator),d=!1;for(let f of c.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(let f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}Vn(e,n){let i=new Ao;for(let r of To(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let s=i.Yt(r.kind);Vi.vt.It(o,s)}return i.zt()}dn(e){let n=new Ao;return Vi.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){let i=new Ao;return Vi.vt.It(Po(this.databaseId,n),i.Yt(function(o){let s=To(o);return s.length===0?0:s[s.length-1].kind}(e))),i.zt()}Tn(e,n,i){if(i===null)return[];let r=[];r.push(new Ao);let o=0;for(let s of To(e)){let a=i[o++];for(let c of r)if(this.fn(n,s.fieldPath)&&Cl(a))r=this.gn(r,s,a);else{let u=c.Yt(s.kind);Vi.vt.It(a,u)}}return this.pn(r)}In(e,n,i){return this.Tn(e,n,i.position)}pn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].zt();return n}gn(e,n,i){let r=[...e],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let c=new Ao;c.seed(a.zt()),Vi.vt.It(s,c.Yt(n.kind)),o.push(c)}return o}fn(e,n){return!!e.filters.find(i=>i instanceof Ie&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=ll(e),r=ea(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let s=[];return A.forEach(o,a=>r.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let m=f?new vl(f.sequenceNumber,new Tn(Bo(f.readTime),new G(ai(f.documentKey)),f.largestBatchId)):vl.empty(),_=d.fields.map(([D,T])=>new ca(dt.fromServerFormat(D),T));return new ha(d.indexId,d.collectionGroup,_,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:fe(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=ll(e),o=ea(e);return this.yn(e).next(s=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>A.forEach(a,c=>o.put(uS(c.indexId,this.uid,s,i)))))}updateIndexEntries(e,n){let i=new Map;return A.forEach(n,(r,o)=>{let s=i.get(r.collectionGroup);return(s?A.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),A.forEach(a,c=>this.wn(e,r,c).next(u=>{let d=this.Sn(o,c);return u.isEqual(d)?A.resolve():this.bn(e,o,c,u,d)}))))})}Dn(e,n,i,r){return Xs(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,n.key),documentKey:n.key.path.toArray()})}vn(e,n,i,r){return Xs(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,n.key),n.key.path.toArray()])}wn(e,n,i){let r=Xs(e),o=new ze(Tr);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,n)])},(s,a)=>{o=o.add(new xo(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,n){let i=new ze(Tr),r=this.Vn(n,e);if(r==null)return i;let o=m0(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Cl(s))for(let a of s.arrayValue.values||[])i=i.add(new xo(n.indexId,e.key,this.dn(a),r))}else i=i.add(new xo(n.indexId,e.key,Fh,r));return i}bn(e,n,i,r,o){V("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,d,f,m){let _=c.getIterator(),D=u.getIterator(),T=Zs(_),S=Zs(D);for(;T||S;){let k=!1,H=!1;if(T&&S){let B=d(T,S);B<0?H=!0:B>0&&(k=!0)}else T!=null?H=!0:k=!0;k?(f(S),S=Zs(D)):H?(m(T),T=Zs(_)):(T=Zs(_),S=Zs(D))}}(r,o,Tr,a=>{s.push(this.Dn(e,n,i,a))},a=>{s.push(this.vn(e,n,i,a))}),A.waitFor(s)}yn(e){let n=1;return ea(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((s,a)=>Tr(s,a)).filter((s,a,c)=>!a||Tr(s,c[a-1])!==0);let r=[];r.push(e);for(let s of i){let a=Tr(s,e),c=Tr(s,n);if(a===0)r[0]=e.Zt();else if(a>0&&c<0)r.push(s),r.push(s.Zt());else if(c>0)break}r.push(n);let o=[];for(let s=0;s<r.length;s+=2){if(this.Cn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Fh,[]],c=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Fh,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,n){return Tr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(_S)}getMinOffset(e,n){return A.mapArray(this.hn(n),i=>this.Pn(e,i).next(r=>r||J())).next(_S)}};function gS(t){return Tt(t,"collectionParents")}function Xs(t){return Tt(t,"indexEntries")}function ll(t){return Tt(t,"indexConfiguration")}function ea(t){return Tt(t,"indexState")}function _S(t){ee(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;lw(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Tn(e.readTime,e.documentKey,n)}var yS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cn=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function BM(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=i.J({range:s},(d,f,m)=>(a++,m.delete()));o.push(c.next(()=>{ee(a===1)}));let u=[];for(let d of n.mutations){let f=WS(e,d.key.path,n.batchId);o.push(r.delete(f)),u.push(d.key)}return A.waitFor(o).next(()=>u)}function ff(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw J();e=t.noDocument}return JSON.stringify(e).length}Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(41943040,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);var pf=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(e,n,i,r){ee(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sr(e).J({index:"userMutationsIndex",range:i},(r,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=sa(e),s=Sr(e);return s.add({}).next(a=>{ee(typeof a=="number");let c=new Tl(a,n,i,r),u=function(_,D,T){let S=T.baseMutations.map(H=>Rl(_.ct,H)),k=T.mutations.map(H=>Rl(_.ct,H));return{userId:D,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:S,mutations:k}}(this.serializer,this.userId,c),d=[],f=new ze((m,_)=>fe(m.canonicalString(),_.canonicalString()));for(let m of r){let _=WS(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),d.push(s.put(u)),d.push(o.put(_,Mj))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),A.waitFor(d).next(()=>c)})}lookupMutationBatch(e,n){return Sr(e).get(n).next(i=>i?(ee(i.userId===this.userId),Mo(this.serializer,i)):null)}Mn(e,n){return this.Fn[n]?A.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Fn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Sr(e).J({index:"userMutationsIndex",range:r},(s,a,c)=>{a.userId===this.userId&&(ee(a.batchId>=i),o=Mo(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Sr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sr(e).U("userMutationsIndex",n).next(i=>i.map(r=>Mo(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=jh(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return sa(e).J({range:r},(s,a,c)=>{let[u,d,f]=s,m=ai(d);if(u===this.userId&&n.path.isEqual(m))return Sr(e).get(f).next(_=>{if(!_)throw J();ee(_.userId===this.userId),o.push(Mo(this.serializer,_))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ze(fe),r=[];return n.forEach(o=>{let s=jh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=sa(e).J({range:a},(u,d,f)=>{let[m,_,D]=u,T=ai(_);m===this.userId&&o.path.isEqual(T)?i=i.add(D):f.done()});r.push(c)}),A.waitFor(r).next(()=>this.xn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=jh(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new ze(fe);return sa(e).J({range:s},(c,u,d)=>{let[f,m,_]=c,D=ai(m);f===this.userId&&i.isPrefixOf(D)?D.length===r&&(a=a.add(_)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(Sr(e).get(o).next(s=>{if(s===null)throw J();ee(s.userId===this.userId),i.push(Mo(this.serializer,s))}))}),A.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return BM(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),A.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return A.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return sa(e).J({range:i},(o,s,a)=>{if(o[0]===this.userId){let c=ai(o[1]);r.push(c)}else a.done()}).next(()=>{ee(r.length===0)})})}containsKey(e,n){return jM(e,this.userId,n)}Nn(e){return UM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function jM(t,e,n){let i=jh(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return sa(t).J({range:o,H:!0},(a,c,u)=>{let[d,f,m]=a;d===e&&f===r&&(s=!0),u.done()}).next(()=>s)}function Sr(t){return Tt(t,"mutations")}function sa(t){return Tt(t,"documentMutations")}function UM(t){return Tt(t,"mutationQueues")}var va=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var ev=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{let i=new va(n.highestTargetId);return n.highestTargetId=i.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ne.fromTimestamp(new Xe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.qn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Qn(e,r)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(i=>(i.targetCount+=1,this.$n(n,i),this.Qn(e,i))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ta(e).delete(n.targetId)).next(()=>this.qn(e)).next(i=>(ee(i.targetCount>0),i.targetCount-=1,this.Qn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return ta(e).J((s,a)=>{let c=fl(a);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,o.push(this.removeTargetData(e,c)))}).next(()=>A.waitFor(o)).next(()=>r)}forEachTarget(e,n){return ta(e).J((i,r)=>{let o=fl(r);n(o)})}qn(e){return vS(e).get("targetGlobalKey").next(n=>(ee(n!==null),n))}Qn(e,n){return vS(e).put("targetGlobalKey",n)}Kn(e,n){return ta(e).put(FM(this.serializer,n))}$n(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=Fo(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return ta(e).J({range:r,index:"queryTargetsIndex"},(s,a,c)=>{let u=fl(a);Gl(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=Mr(e);return n.forEach(s=>{let a=Zt(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,s))}),A.waitFor(r)}removeMatchingKeys(e,n,i){let r=Mr(e);return A.forEach(n,o=>{let s=Zt(o.path);return A.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=Mr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Mr(e),o=_e();return r.J({range:i,H:!0},(s,a,c)=>{let u=ai(s[1]),d=new G(u);o=o.add(d)}).next(()=>o)}containsKey(e,n){let i=Zt(n.path),r=IDBKeyRange.bound([i],[jS(i)],!1,!0),o=0;return Mr(e).J({index:"documentTargetsIndex",H:!0,range:r},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,n){return ta(e).get(n).next(i=>i?fl(i):null)}};function ta(t){return Tt(t,"targets")}function vS(t){return Tt(t,"targetGlobal")}function Mr(t){return Tt(t,"targetDocuments")}function wS([t,e],[n,i]){let r=fe(t,n);return r===0?fe(e,i):r}var tv=class{constructor(e){this.Un=e,this.buffer=new ze(wS),this.Wn=0}Gn(){return++this.Wn}zn(e){let n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();wS(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},nv=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){V("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>x(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gr(n)?V("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield $r(n)}yield this.Hn(3e5)}))}},iv=class{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return A.resolve(pn.oe);let i=new tv(n);return this.Jn.forEachTarget(e,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(e,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(yS)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yS):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let i,r,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,s=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(e,i,n))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(u=Date.now(),na()<=Kn.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:f})))}};function DU(t,e){return new iv(t,e)}var rv=class{constructor(e,n){this.db=e,this.garbageCollector=DU(this,n)}Yn(e){let n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}er(e){let n=0;return this.Zn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(i,r)=>n(r))}addReference(e,n,i){return Vh(e,i)}removeReference(e,n,i){return Vh(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Vh(e,n)}nr(e,n){return function(r,o){let s=!1;return UM(r).Y(a=>jM(r,a,o).next(c=>(c&&(s=!0),A.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.tr(e,(s,a)=>{if(a<=n){let c=this.nr(e,s).next(u=>{if(!u)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,ne.min()),Mr(e).delete(function(f){return[0,Zt(f.path)]}(s))))});r.push(c)}}).next(()=>A.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Vh(e,n)}tr(e,n){let i=Mr(e),r,o=pn.oe;return i.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==pn.oe&&n(new G(ai(r)),o),o=u,r=c):o=pn.oe}).next(()=>{o!==pn.oe&&n(new G(ai(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Vh(t,e){return Mr(t).put(function(i,r){return{targetId:0,path:Zt(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var mf=class{constructor(){this.changes=new pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?A.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ov=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Io(e).put(i)}removeEntry(e,n,i){return Io(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],lf(s),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.rr(e,i)))}getEntry(e,n){let i=wt.newInvalidDocument(n);return Io(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ul(n))},(r,o)=>{i=this.ir(n,o)}).next(()=>i)}sr(e,n){let i={size:0,document:wt.newInvalidDocument(n)};return Io(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ul(n))},(r,o)=>{i={document:this.ir(n,o),size:ff(o)}}).next(()=>i)}getEntries(e,n){let i=an();return this._r(e,n,(r,o)=>{let s=this.ir(r,o);i=i.insert(r,s)}).next(()=>i)}ar(e,n){let i=an(),r=new Ke(G.comparator);return this._r(e,n,(o,s)=>{let a=this.ir(o,s);i=i.insert(o,a),r=r.insert(o,ff(s))}).next(()=>({documents:i,ur:r}))}_r(e,n,i){if(n.isEmpty())return A.resolve();let r=new ze(DS);n.forEach(c=>r=r.add(c));let o=IDBKeyRange.bound(ul(r.first()),ul(r.last())),s=r.getIterator(),a=s.getNext();return Io(e).J({index:"documentKeyIndex",range:o},(c,u,d)=>{let f=G.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&DS(a,f)<0;)i(a,null),a=s.getNext();a&&a.isEqual(f)&&(i(a,u),a=s.hasNext()?s.getNext():null),a?d.$(ul(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),lf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Io(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let d=an();for(let f of u){let m=this.ir(G.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(zl(n,m)||r.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,i,r){let o=an(),s=ES(n,i),a=ES(n,Tn.max());return Io(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,d)=>{let f=this.ir(G.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(f.key,f),o.size===r&&d.done()}).next(()=>o)}newChangeBuffer(e){return new sv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return bS(e).get("remoteDocumentGlobalKey").next(n=>(ee(!!n),n))}rr(e,n){return bS(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){let i=wU(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(ne.min())))return i}return wt.newInvalidDocument(e)}};function $M(t){return new ov(t)}var sv=class extends mf{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new pi(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new ze((o,s)=>fe(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(n.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=cS(this.cr.serializer,s);r=r.add(o.path.popLast());let u=ff(c);i+=u-a.size,n.push(this.cr.addEntry(e,o,c))}else if(i-=a.size,this.trackRemovals){let c=cS(this.cr.serializer,s.convertToNoDocument(ne.min()));n.push(this.cr.addEntry(e,o,c))}}),r.forEach(o=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.cr.updateMetadata(e,i)),A.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(i=>(this.lr.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:i,ur:r})=>(r.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function bS(t){return Tt(t,"remoteDocumentGlobal")}function Io(t){return Tt(t,"remoteDocumentsV14")}function ul(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ES(t,e){let n=e.documentKey.path.toArray();return[t,lf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function DS(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=fe(n[o],i[o]),r)return r;return r=fe(n.length,i.length),r||(r=fe(n[n.length-2],i[i.length-2]),r||fe(n[n.length-1],i[i.length-1]))}var av=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var gf=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&gl(i.mutation,r,mn.empty(),Xe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,_e()).next(()=>i))}getLocalViewOfDocuments(e,n,i=_e()){let r=ci();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let s=hl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let i=ci();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,_e()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,i,r){let o=an(),s=ml(),a=function(){return ml()}();return n.forEach((c,u)=>{let d=i.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof zn)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),gl(d.mutation,u,d.mutation.getFieldMask(),Xe.now())):s.set(u.key,mn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new av(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let i=ml(),r=new Ke((s,a)=>s-a),o=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let d=i.get(c)||mn.empty();d=a.applyToLocalView(u,d),i.set(c,d);let f=(r.get(a.batchId)||_e()).add(c);r=r.insert(a.batchId,f)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=hM();d.forEach(m=>{if(!o.has(m)){let _=vM(n.get(m),i.get(m));_!==null&&f.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return A.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):A.resolve(ci()),a=-1,c=o;return s.next(u=>A.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?A.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,_e())).next(d=>({batchId:a,changes:dM(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(i=>{let r=hl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,s=hl();return this.indexManager.getCollectionParents(e,o).next(a=>A.forEach(a,c=>{let u=function(f,m){return new Hn(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,wt.newInvalidDocument(d)))});let a=hl();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&gl(d.mutation,u,mn.empty(),Xe.now()),zl(n,u)&&(a=a.insert(c,u))}),a})}};var cv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return A.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ht(r.createTime)}}(n)),A.resolve()}getNamedQuery(e,n){return A.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:yw(r.bundledQuery),readTime:ht(r.readTime)}}(n)),A.resolve()}};var lv=class{constructor(){this.overlays=new Ke(G.comparator),this.Ir=new Map}getOverlay(e,n){return A.resolve(this.overlays.get(n))}getOverlays(e,n){let i=ci();return A.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),A.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),A.resolve()}getOverlaysForCollection(e,n,i){let r=ci(),o=n.length+1,s=new G(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return A.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Ke((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let d=o.get(u.largestBatchId);d===null&&(d=ci(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=ci(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=r)););return A.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new Sl(n,i));let o=this.Ir.get(n);o===void 0&&(o=_e(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}};var uv=class{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,A.resolve()}};var Nl=class{constructor(){this.Tr=new ze(_t.Er),this.dr=new ze(_t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let i=new _t(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new _t(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){let n=new G(new xe([])),i=new _t(n,e),r=new _t(n,e+1),o=[];return this.dr.forEachInRange([i,r],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new G(new xe([])),i=new _t(n,e),r=new _t(n,e+1),o=_e();return this.dr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new _t(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},_t=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||fe(e.wr,n.wr)}static Ar(e,n){return fe(e.wr,n.wr)||G.comparator(e.key,n.key)}};var dv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ze(_t.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Tl(o,n,i,r);this.mutationQueue.push(s);for(let a of r)this.br=this.br.add(new _t(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(s)}lookupMutationBatch(e,n){return A.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.vr(i),o=r<0?0:r;return A.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new _t(n,0),r=new _t(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],s=>{let a=this.Dr(s.wr);o.push(a)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ze(fe);return n.forEach(r=>{let o=new _t(r,0),s=new _t(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{i=i.add(a.wr)})}),A.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;G.isDocumentKey(o)||(o=o.child(""));let s=new _t(new G(o),0),a=new ze(fe);return this.br.forEachWhile(c=>{let u=c.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(c.wr)),!0)},s),A.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return A.forEach(n.mutations,r=>{let o=new _t(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){let i=new _t(n,0),r=this.br.firstAfterOrEqual(i);return A.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var hv=class{constructor(e){this.Mr=e,this.docs=function(){return new Ke(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return A.resolve(i?i.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let i=an();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():wt.newInvalidDocument(r))}),A.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=an(),s=n.path,a=new G(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||lw($S(d),i)<=0||(r.has(d.key)||zl(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return A.resolve(o)}getAllFromCollectionGroup(e,n,i,r){J()}Or(e,n){return A.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new fv(this)}getSize(e){return A.resolve(this.size)}},fv=class extends mf{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),A.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var pv=class{constructor(e){this.persistence=e,this.Nr=new pi(n=>Fo(n),Gl),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Nl,this.targetCount=0,this.kr=va.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),A.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new va(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,A.resolve()}updateTargetData(e,n){return this.Kn(n),A.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),A.waitFor(o).next(()=>r)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,n){let i=this.Nr.get(n)||null;return A.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),A.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),A.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),A.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Br.yr(n);return A.resolve(i)}containsKey(e,n){return A.resolve(this.Br.containsKey(n))}};var _f=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new pn(0),this.Kr=!1,this.Kr=!0,this.$r=new uv,this.referenceDelegate=e(this),this.Ur=new pv(this),this.indexManager=new Z0,this.remoteDocumentCache=function(r){return new hv(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new cf(n),this.Gr=new cv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new dv(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){V("MemoryPersistence","Starting transaction:",e);let r=new mv(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return A.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}},mv=class extends Qh{constructor(e){super(),this.currentSequenceNumber=e}},yf=class t{constructor(e){this.persistence=e,this.Jr=new Nl,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),A.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),A.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),A.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,i=>{let r=G.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return A.or([()=>A.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var gv=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new Yh("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BT,{unique:!0}),c.createObjectStore("documentMutations")}(e),CS(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=A.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),CS(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ne.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BT,{unique:!0});let f=u.store("mutations"),m=d.map(_=>f.put(_));return A.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(s=s.next(()=>this.ni(o))),i<6&&r>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),i<7&&r>=7&&(s=s.next(()=>this.ii(o))),i<8&&r>=8&&(s=s.next(()=>this.si(e,o))),i<9&&r>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(s=s.next(()=>this.oi(o))),i<11&&r>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:jj});u.createIndex("collectionPathOverlayIndex",Uj,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",$j,{unique:!1})})(e)})),i<13&&r>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:Aj});u.createIndex("documentKeyIndex",xj),u.createIndex("collectionGroupIndex",Rj)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ai(e,o))),i<15&&r>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Fj}).createIndex("sequenceNumberIndex",Vj,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Lj}).createIndex("documentKeyIndex",Bj,{unique:!1})}(e))),i<16&&r>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),i<17&&r>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=ff(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>A.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",s).next(a=>A.forEach(a,c=>{ee(c.userId===o.userId);let u=Mo(this.serializer,c);return BM(e,o.userId,u).next(()=>{})}))}))}ii(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((s,a)=>{let c=new xe(s),u=function(f){return[0,Zt(f)]}(c);o.push(n.get(u).next(d=>d?A.resolve():(f=>n.put({targetId:0,path:Zt(f),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>A.waitFor(o))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:kj});let i=n.store("collectionParents"),r=new Ol,o=s=>{if(r.add(s)){let a=s.lastSegment(),c=s.popLast();return i.put({collectionId:a,parent:Zt(c)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new xe(s);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,c],u)=>{let d=ai(a);return o(d.popLast())}))}oi(e){let n=e.store("targets");return n.J((i,r)=>{let o=fl(r),s=FM(this.serializer,o);return n.put(s)})}_i(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(f){return f.document?new G(xe.fromString(f.document.name).popFirst(5)):f.noDocument?G.fromSegments(f.noDocument.path):f.unknownDocument?G.fromSegments(f.unknownDocument.path):J()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(u))}).next(()=>A.waitFor(r))}ai(e,n){let i=n.store("mutations"),r=$M(this.serializer),o=new _f(yf.Zr,this.serializer.ct);return i.U().next(s=>{let a=new Map;return s.forEach(c=>{var u;let d=(u=a.get(c.userId))!==null&&u!==void 0?u:_e();Mo(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),A.forEach(a,(c,u)=>{let d=new yt(u),f=uf.lt(this.serializer,d),m=o.getIndexManager(d),_=pf.lt(d,this.serializer,m,o.referenceDelegate);return new gf(r,_,f,m).recalculateAndSaveOverlaysForDocumentKeys(new bl(n,pn.oe),c).next()})})}};function CS(t){t.createObjectStore("targetDocuments",{keyPath:Nj}).createIndex("documentTargetsIndex",Pj,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Oj,{unique:!0}),t.createObjectStore("targetGlobal")}var o0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_v=class t{constructor(e,n,i,r,o,s,a,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.ui=o,this.window=s,this.document=a,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!t.D())throw new F(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rv(this,r),this.Ai=n+"main",this.serializer=new cf(c),this.Ri=new Nr(this.Ai,this.hi,new gv(this.serializer)),this.$r=new z0,this.Ur=new ev(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$M(this.serializer),this.Gr=new H0,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&ut("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(R.FAILED_PRECONDITION,o0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new pn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=n=>x(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(n=>x(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>x(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Gr(e))return V("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return V("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return dl(e).get("owner").next(n=>A.resolve(this.vi(n)))}Ci(e){return Lh(e).delete(this.clientId)}Fi(){return x(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=Tt(n,"clientMetadata");return i.U().next(r=>{let o=this.xi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return A.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let n of e)this.Vi.removeItem(this.Oi(n.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):dl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new F(R.FAILED_PRECONDITION,o0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lh(e).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&V("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return x(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new bl(e,pn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()})}xi(e,n){return e.filter(i=>this.Mi(i.updateTimeMs,n)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Lh(e).U().next(n=>this.xi(n,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return pf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new X0(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return uf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,i){V("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(c){return c===17?zj:c===16?Hj:c===15?dw:c===14?QS:c===13?KS:c===12?Gj:c===11?qS:void J()}(this.hi),s;return this.Ri.runTransaction(e,r,o,a=>(s=new bl(a,this.Qr?this.Qr.next():pn.oe),n==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw ut(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new F(R.FAILED_PRECONDITION,GS);return i(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return dl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(R.FAILED_PRECONDITION,o0)})}Di(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dl(e).put("owner",n)}static D(){return Nr.D()}bi(e){let n=dl(e);return n.get("owner").next(i=>this.vi(i)?(V("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):A.resolve())}Mi(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(ut(`Detected an update time that is in the future: ${e} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let n=/(?:Version|Mobile)\/1[456]/;Kp()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{let i=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return V("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ut("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ut("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function dl(t){return Tt(t,"owner")}function Lh(t){return Tt(t,"clientMetadata")}function ww(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var yv=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=_e(),r=_e();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var vv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var vf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Kp()?8:HS(lc())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new vv;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(na()<=Kn.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",ia(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(na()<=Kn.DEBUG&&V("QueryEngine","Query:",ia(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(na()<=Kn.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",ia(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xt(n))):A.resolve())}Yi(e,n){if(JT(n))return A.resolve(null);let i=Xt(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=rf(n,null,"F"),i=Xt(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=_e(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let u=this.ts(n,a);return this.ns(n,u,s,c.readTime)?this.Yi(e,rf(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,i,r){return JT(n)||r.isEqual(ne.min())?A.resolve(null):this.Ji.getDocuments(e,i).next(o=>{let s=this.ts(n,o);return this.ns(n,s,i,r)?A.resolve(null):(na()<=Kn.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ia(n)),this.rs(e,s,n,US(r,-1)).next(a=>a))})}ts(e,n){let i=new ze(lM(e));return n.forEach((r,o)=>{zl(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return na()<=Kn.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",ia(n)),this.Ji.getDocumentsMatchingQuery(e,n,Tn.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var wv=class{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Ke(fe),this._s=new pi(o=>Fo(o),Gl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function GM(t,e,n,i){return new wv(t,e,n,i)}function HM(t,e){return x(this,null,function*(){let n=$(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],c=_e();for(let u of r){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(i,c).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function CU(t,e){let n=$(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,m=f.keys(),_=A.resolve();return m.forEach(D=>{_=_.next(()=>d.getEntry(c,D)).next(T=>{let S=u.docVersions.get(D);ee(S!==null),T.version.compareTo(S)<0&&(f.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),d.addEntry(T)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function zM(t){let e=$(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function IU(t,e){let n=$(t),i=e.snapshotVersion,r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let m=r.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(o,d.addedDocuments,f)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(ft.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(f,_),function(T,S,k){return T.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,_,d)&&a.push(n.Ur.updateTargetData(o,_))});let c=an(),u=_e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(WM(o,s,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!i.isEqual(ne.min())){let d=n.Ur.getLastRemoteSnapshotVersion(o).next(f=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(d)}return A.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.os=r,o))}function WM(t,e,n){let i=_e(),r=_e();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let s=an();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:s,Is:r}})}function TU(t,e){let n=$(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function wa(t,e){let n=$(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,A.resolve(r)):n.Ur.allocateTargetId(i).next(s=>(r=new ya(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}function ba(t,e,n){return x(this,null,function*(){let i=$(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Gr(s))throw s;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function wf(t,e,n){let i=$(t),r=ne.min(),o=_e();return i.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let f=$(c),m=f._s.get(d);return m!==void 0?A.resolve(f.os.get(m)):f.Ur.getTargetData(u,d)}(i,s,Xt(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>i.ss.getDocumentsMatchingQuery(s,e,n?r:ne.min(),n?o:_e())).next(a=>(QM(i,cM(e),a),{documents:a,Ts:o})))}function qM(t,e){let n=$(t),i=$(n.Ur),r=n.os.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(s=>s?s.target:null))}function KM(t,e){let n=$(t),i=n.us.get(e)||ne.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.cs.getAllFromCollectionGroup(r,e,US(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(QM(n,e,r),r))}function QM(t,e,n){let i=t.us.get(e)||ne.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}function SU(t,e,n,i){return x(this,null,function*(){let r=$(t),o=_e(),s=an();for(let u of n){let d=e.Es(u.metadata.name);u.document&&(o=o.add(d));let f=e.ds(u);f.setReadTime(e.As(u.metadata.readTime)),s=s.insert(d,f)}let a=r.cs.newChangeBuffer({trackRemovals:!0}),c=yield wa(r,function(d){return Xt(Aa(xe.fromString(`__bundle__/docs/${d}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>WM(u,a,s).next(d=>(a.apply(u),d)).next(d=>r.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>r.Ur.addMatchingKeys(u,o,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is)).next(()=>d.Ps)))})}function MU(i,r){return x(this,arguments,function*(t,e,n=_e()){let o=yield wa(t,Xt(yw(e.bundledQuery))),s=$(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=ht(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let u=o.withResumeToken(ft.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(u.targetId,u),s.Ur.updateTargetData(a,u).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,n,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function IS(t,e){return`firestore_clients_${t}_${e}`}function TS(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function s0(t,e){return`firestore_targets_${t}_${e}`}var bf=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Rs(e,n,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new F(r.error.code,r.error.message))),s?new t(e,n,r.state,o):(ut("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},_l=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Rs(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new F(i.error.code,i.error.message))),o?new t(e,i.state,r):(ut("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ef=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=mw();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=zS(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(ut("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},bv=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(ut("SharedClientState",`Failed to parse online state: ${e}`),null)}},Pl=class{constructor(){this.activeTargetIds=mw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},yl=class{constructor(e,n,i,r,o){this.window=e,this.ui=n,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ke(fe),this.started=!1,this.bs=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=IS(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Pl),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return x(this,null,function*(){let e=yield this.syncEngine.Qi();for(let i of e){if(i===this.ps)continue;let r=this.getItem(IS(this.persistenceKey,i));if(r){let o=Ef.Rs(i,r);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let n=this.storage.getItem(this.xs);if(n){let i=this.Ls(n);i&&this.Bs(i)}for(let i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,i){this.qs(e,n,i),this.Qs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(s0(this.persistenceKey,e));if(i){let r=_l.Rs(e,i);r&&(n=r.state)}}return this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(s0(this.persistenceKey,e))}updateQueryState(e,n,i){this.$s(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Qs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return V("SharedClientState","READ",e,n),n}setItem(e,n){V("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){V("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let n=e;if(n.storageArea===this.storage){if(V("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void ut("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>x(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let i=this.Gs(n.key);return this.zs(i,null)}{let i=this.js(n.key,n.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let i=this.Hs(n.key,n.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){let i=this.Ys(n.key,n.newValue);if(i)return this.Zs(i)}}else if(n.key===this.xs){if(n.newValue!==null){let i=this.Ls(n.newValue);if(i)return this.Bs(i)}}else if(n.key===this.vs){let i=function(o){let s=pn.oe;if(o!=null)try{let a=JSON.parse(o);ee(typeof a=="number"),s=a}catch(a){ut("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);i!==pn.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Os){let i=this.Xs(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,i){let r=new bf(this.currentUser,e,n,i),o=TS(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Vs())}Qs(e){let n=TS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){let n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,i){let r=s0(this.persistenceKey,e),o=new _l(e,n,i);this.setItem(r,o.Vs())}Ws(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){let n=this.Cs.exec(e);return n?n[1]:null}js(e,n){let i=this.Gs(e);return Ef.Rs(i,n)}Hs(e,n){let i=this.Fs.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return bf.Rs(new yt(o),r,n)}Ys(e,n){let i=this.Ms.exec(e),r=Number(i[1]);return _l.Rs(r,n)}Ls(e){return bv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return x(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);V("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){let i=n?this.Ss.insert(e,n):this.Ss.remove(e),r=this.ks(this.Ss),o=this.ks(i),s=[],a=[];return o.forEach(c=>{r.has(c)||s.push(c)}),r.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=i})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=mw();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},Df=class{constructor(){this.so=new Pl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Pl,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ev=class{_o(e){}shutdown(){}};var Cf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Bh=null;function a0(){return Bh===null?Bh=function(){return 268435456+Math.round(2147483648*Math.random())}():Bh++,"0x"+Bh.toString(16)}var AU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Dv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var $t="WebChannelConnection",Cv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,s){let a=a0(),c=this.xo(n,i.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(n,c,u,r).then(d=>(V("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw In("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",r),d})}Lo(n,i,r,o,s,a){return this.Mo(n,i,r,o,s)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}xo(n,i){let r=AU[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){let o=a0();return new Promise((s,a)=>{let c=new Zy;c.setWithCredentials(!0),c.listenOnce(e0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case al.NO_ERROR:let d=c.getResponseJson();V($t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case al.TIMEOUT:V($t,`RPC '${e}' ${o} timed out`),a(new F(R.DEADLINE_EXCEEDED,"Request time out"));break;case al.HTTP_ERROR:let f=c.getStatus();if(V($t,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let _=m?.error;if(_&&_.status&&_.message){let D=function(S){let k=S.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(k)>=0?k:R.UNKNOWN}(_.status);a(new F(D,_.message))}else a(new F(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new F(R.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{V($t,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);V($t,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",u,i,15)})}Bo(e,n,i){let r=a0(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=i0(),a=n0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new Xy({})),this.Oo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let d=o.join("");V($t,`Creating RPC '${e}' stream ${r}: ${d}`,c);let f=s.createWebChannel(d,c),m=!1,_=!1,D=new Dv({Io:S=>{_?V($t,`Not sending because RPC '${e}' stream ${r} is closed:`,S):(m||(V($t,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),V($t,`RPC '${e}' stream ${r} sending:`,S),f.send(S))},To:()=>f.close()}),T=(S,k,H)=>{S.listen(k,B=>{try{H(B)}catch(z){setTimeout(()=>{throw z},0)}})};return T(f,Js.EventType.OPEN,()=>{_||(V($t,`RPC '${e}' stream ${r} transport opened.`),D.yo())}),T(f,Js.EventType.CLOSE,()=>{_||(_=!0,V($t,`RPC '${e}' stream ${r} transport closed`),D.So())}),T(f,Js.EventType.ERROR,S=>{_||(_=!0,In($t,`RPC '${e}' stream ${r} transport errored:`,S),D.So(new F(R.UNAVAILABLE,"The operation could not be completed")))}),T(f,Js.EventType.MESSAGE,S=>{var k;if(!_){let H=S.data[0];ee(!!H);let B=H,z=B.error||((k=B[0])===null||k===void 0?void 0:k.error);if(z){V($t,`RPC '${e}' stream ${r} received error:`,z);let re=z.status,te=function(w){let E=gt[w];if(E!==void 0)return EM(E)}(re),b=z.message;te===void 0&&(te=R.INTERNAL,b="Unknown error status: "+re+" with message "+z.message),_=!0,D.So(new F(te,b)),f.close()}else V($t,`RPC '${e}' stream ${r} received:`,H),D.bo(H)}}),T(a,t0.STAT_EVENT,S=>{S.stat===kh.PROXY?V($t,`RPC '${e}' stream ${r} detected buffering proxy`):S.stat===kh.NOPROXY&&V($t,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function YM(){return typeof window<"u"?window:null}function Hh(){return typeof document<"u"?document:null}function Wl(t){return new B0(t,!0)}var kl=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&V("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var If=class{constructor(e,n,i,r,o,s,a,c){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kl(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return x(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return x(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return x(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(ut(n.toString()),ut("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{let r=new F(R.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){let i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>x(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Iv=class extends If{constructor(e,n,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=fU(this.serializer,e),i=function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?ht(s.readTime):ne.min()}(e);return this.listener.d_(n,i)}A_(e){let n={};n.database=$0(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=tf(c)?{documents:xM(o,c)}:{query:RM(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=CM(o,s.resumeToken);let u=j0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=_a(o,s.snapshotVersion.toTimestamp());let u=j0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let i=mU(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){let n={};n.database=$0(this.serializer),n.removeTarget=e,this.a_(n)}},Tv=class extends If{constructor(e,n,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ee(!!e.streamToken),this.lastStreamToken=e.streamToken,ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=pU(e.writeResults,e.commitTime),i=ht(e.commitTime);return this.listener.g_(i,n)}p_(){let e={};e.database=$0(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Rl(this.serializer,i))};this.a_(n)}};var Sv=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,U0(n,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(R.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,U0(n,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Mv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ut(n),this.D_=!1):V("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Av=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{i.enqueueAndForget(()=>x(this,null,function*(){Hr(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(c){return x(this,null,function*(){let u=$(c);u.L_.add(4),yield xa(u),u.q_.set("Unknown"),u.L_.delete(4),yield ql(u)})}(this))}))}),this.q_=new Mv(i,r)}};function ql(t){return x(this,null,function*(){if(Hr(t))for(let e of t.B_)yield e(!0)})}function xa(t){return x(this,null,function*(){for(let e of t.B_)yield e(!1)})}function zf(t,e){let n=$(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Dw(n)?Ew(n):Oa(n).r_()&&bw(n,e))}function Ea(t,e){let n=$(t),i=Oa(n);n.N_.delete(e),i.r_()&&JM(n,e),n.N_.size===0&&(i.r_()?i.o_():Hr(n)&&n.q_.set("Unknown"))}function bw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oa(t).A_(e)}function JM(t,e){t.Q_.xe(e),Oa(t).R_(e)}function Ew(t){t.Q_=new L0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Oa(t).start(),t.q_.v_()}function Dw(t){return Hr(t)&&!Oa(t).n_()&&t.N_.size>0}function Hr(t){return $(t).L_.size===0}function ZM(t){t.Q_=void 0}function xU(t){return x(this,null,function*(){t.q_.set("Online")})}function RU(t){return x(this,null,function*(){t.N_.forEach((e,n)=>{bw(t,e)})})}function OU(t,e){return x(this,null,function*(){ZM(t),Dw(t)?(t.q_.M_(e),Ew(t)):t.q_.set("Unknown")})}function NU(t,e,n){return x(this,null,function*(){if(t.q_.set("Online"),e instanceof sf&&e.state===2&&e.cause)try{yield function(r,o){return x(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.N_.delete(a),r.Q_.removeTarget(a))})}(t,e)}catch(i){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Tf(t,i)}else if(e instanceof ua?t.Q_.Ke(e):e instanceof of?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{let i=yield zM(t.localStore);n.compareTo(i)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.N_.get(u);d&&o.N_.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.N_.get(c);if(!d)return;o.N_.set(c,d.withResumeToken(ft.EMPTY_BYTE_STRING,d.snapshotVersion)),JM(o,c);let f=new ya(d.target,c,u,d.sequenceNumber);bw(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){V("RemoteStore","Failed to raise snapshot:",i),yield Tf(t,i)}})}function Tf(t,e,n){return x(this,null,function*(){if(!Gr(e))throw e;t.L_.add(1),yield xa(t),t.q_.set("Offline"),n||(n=()=>zM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>x(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield ql(t)}))})}function XM(t,e){return e().catch(n=>Tf(t,n,e))}function Ra(t){return x(this,null,function*(){let e=$(t),n=Ur(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;PU(e);)try{let r=yield TU(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,kU(e,r)}catch(r){yield Tf(e,r)}eA(e)&&tA(e)})}function PU(t){return Hr(t)&&t.O_.length<10}function kU(t,e){t.O_.push(e);let n=Ur(t);n.r_()&&n.V_&&n.m_(e.mutations)}function eA(t){return Hr(t)&&!Ur(t).n_()&&t.O_.length>0}function tA(t){Ur(t).start()}function FU(t){return x(this,null,function*(){Ur(t).p_()})}function VU(t){return x(this,null,function*(){let e=Ur(t);for(let n of t.O_)e.m_(n.mutations)})}function LU(t,e,n){return x(this,null,function*(){let i=t.O_.shift(),r=k0.from(i,e,n);yield XM(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Ra(t)})}function BU(t,e){return x(this,null,function*(){e&&Ur(t).V_&&(yield function(i,r){return x(this,null,function*(){if(function(s){return bM(s)&&s!==R.ABORTED}(r.code)){let o=i.O_.shift();Ur(i).s_(),yield XM(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Ra(i)}})}(t,e)),eA(t)&&tA(t)})}function SS(t,e){return x(this,null,function*(){let n=$(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let i=Hr(n);n.L_.add(3),yield xa(n),i&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield ql(n)})}function xv(t,e){return x(this,null,function*(){let n=$(t);e?(n.L_.delete(2),yield ql(n)):e||(n.L_.add(2),yield xa(n),n.q_.set("Unknown"))})}function Oa(t){return t.K_||(t.K_=function(n,i,r){let o=$(n);return o.w_(),new Iv(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:xU.bind(null,t),Ro:RU.bind(null,t),mo:OU.bind(null,t),d_:NU.bind(null,t)}),t.B_.push(e=>x(this,null,function*(){e?(t.K_.s_(),Dw(t)?Ew(t):t.q_.set("Unknown")):(yield t.K_.stop(),ZM(t))}))),t.K_}function Ur(t){return t.U_||(t.U_=function(n,i,r){let o=$(n);return o.w_(),new Tv(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:FU.bind(null,t),mo:BU.bind(null,t),f_:VU.bind(null,t),g_:LU.bind(null,t)}),t.B_.push(e=>x(this,null,function*(){e?(t.U_.s_(),yield Ra(t)):(yield t.U_.stop(),t.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var Rv=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new vt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let s=Date.now()+i,a=new t(e,n,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Na(t,e){if(ut("AsyncQueue",`${e}: ${t}`),Gr(t))return new F(R.UNAVAILABLE,`${e}: ${t}`);throw t}var Sf=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=hl(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Mf=class{constructor(){this.W_=new Ke(G.comparator)}track(e){let n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}},Da=class t{constructor(e,n,i,r,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Sf.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var Ov=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Nv=class{constructor(){this.queries=MS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){let r=$(n),o=r.queries;r.queries=MS(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(i)})})(this,new F(R.ABORTED,"Firestore shutting down"))}};function MS(){return new pi(t=>aM(t),Hl)}function Cw(t,e){return x(this,null,function*(){let n=$(t),i=3,r=e.query,o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new Ov,i=e.J_()?0:1);try{switch(i){case 0:o.z_=yield n.onListen(r,!0);break;case 1:o.z_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(s){let a=Na(s,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Tw(n)})}function Iw(t,e){return x(this,null,function*(){let n=$(t),i=e.query,r=3,o=n.queries.get(i);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function jU(t,e){let n=$(t),i=!1;for(let r of e){let o=r.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(r)&&(i=!0);s.z_=r}}i&&Tw(n)}function UU(t,e,n){let i=$(t),r=i.queries.get(e);if(r)for(let o of r.j_)o.onError(n);i.queries.delete(e)}function Tw(t){t.Y_.forEach(e=>{e.next()})}var Pv,AS;(AS=Pv||(Pv={})).ea="default",AS.Cache="cache";var Fl=class{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Da(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Pv.Cache}};var kv=class{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}};var Af=class{constructor(e){this.serializer=e}Es(e){return ui(this.serializer,e)}ds(e){return e.metadata.exists?AM(this.serializer,e.document,!1):wt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ht(e)}},Fv=class{constructor(e,n,i){this.ca=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nA(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;let i=xe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){let n=new Map,i=new Af(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Es(r.metadata.name);for(let s of r.metadata.queries){let a=(n.get(s)||_e()).add(o);n.set(s,a)}}return n}complete(){return x(this,null,function*(){let e=yield SU(this.localStore,new Af(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(let i of this.queries)yield MU(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function nA(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var xf=class{constructor(e){this.key=e}},Rf=class{constructor(e){this.key=e}},Of=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=_e(),this.mutatedKeys=_e(),this.Aa=lM(e),this.Ra=new Sf(this.Aa)}get Va(){return this.Ta}ma(e,n){let i=n?n.fa:new Mf,r=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,f)=>{let m=r.get(d),_=zl(this.query,f)?f:null,D=!!m&&this.mutatedKeys.has(m.key),T=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),S=!1;m&&_?m.data.isEqual(_.data)?D!==T&&(i.track({type:3,doc:_}),S=!0):this.ga(m,_)||(i.track({type:2,doc:_}),S=!0,(c&&this.Aa(_,c)>0||u&&this.Aa(_,u)<0)&&(a=!0)):!m&&_?(i.track({type:0,doc:_}),S=!0):m&&!_&&(i.track({type:1,doc:m}),S=!0,(c||u)&&(a=!0)),S&&(_?(s=s.add(_),o=T?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),i.track({type:1,doc:d})}return{Ra:s,fa:i,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(_,D){let T=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return T(_)-T(D)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(i),r=r!=null&&r;let a=n&&!r?this.ya():[],c=this.da.size===0&&this.current&&!r?1:0,u=c!==this.Ea;return this.Ea=c,s.length!==0||u?{snapshot:new Da(this.query,e.Ra,o,s,e.mutatedKeys,c===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Mf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=_e(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Rf(i))}),this.da.forEach(i=>{e.has(i)||n.push(new xf(i))}),n}ba(e){this.Ta=e.Ts,this.da=_e();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Da.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Vv=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},Lv=class{constructor(e){this.key=e,this.va=!1}},Bv=class{constructor(e,n,i,r,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new pi(a=>aM(a),Hl),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(G.comparator),this.Na=new Map,this.La=new Nl,this.Ba={},this.ka=new Map,this.qa=va.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function $U(t,e,n=!0){return x(this,null,function*(){let i=Wf(t),r,o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield iA(i,e,n,!0),r})}function GU(t,e){return x(this,null,function*(){let n=Wf(t);yield iA(n,e,!0,!1)})}function iA(t,e,n,i){return x(this,null,function*(){let r=yield wa(t.localStore,Xt(e)),o=r.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return i&&(a=yield Sw(t,e,o,s==="current",r.resumeToken)),t.isPrimaryClient&&n&&zf(t.remoteStore,r),a})}function Sw(t,e,n,i,r){return x(this,null,function*(){t.Ka=(f,m,_)=>function(T,S,k,H){return x(this,null,function*(){let B=S.view.ma(k);B.ns&&(B=yield wf(T.localStore,S.query,!1).then(({documents:b})=>S.view.ma(b,B)));let z=H&&H.targetChanges.get(S.targetId),re=H&&H.targetMismatches.get(S.targetId)!=null,te=S.view.applyChanges(B,T.isPrimaryClient,z,re);return jv(T,S.targetId,te.wa),te.snapshot})}(t,f,m,_);let o=yield wf(t.localStore,e,!0),s=new Of(e,o.Ts),a=s.ma(o.documents),c=Al.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=s.applyChanges(a,t.isPrimaryClient,c);jv(t,n,u.wa);let d=new Vv(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot})}function HU(t,e,n){return x(this,null,function*(){let i=$(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(s=>!Hl(s,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ba(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ea(i.remoteStore,r.targetId),Ca(i,r.targetId)}).catch($r))):(Ca(i,r.targetId),yield ba(i.localStore,r.targetId,!0))})}function zU(t,e){return x(this,null,function*(){let n=$(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ea(n.remoteStore,i.targetId))})}function WU(t,e,n){return x(this,null,function*(){let i=Rw(t);try{let r=yield function(s,a){let c=$(s),u=Xe.now(),d=a.reduce((_,D)=>_.add(D.key),_e()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let D=an(),T=_e();return c.cs.getEntries(_,d).next(S=>{D=S,D.forEach((k,H)=>{H.isValidDocument()||(T=T.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,D)).next(S=>{f=S;let k=[];for(let H of a){let B=sU(H,f.get(H.key).overlayedDocument);B!=null&&k.push(new zn(H.key,B,eM(B.value.mapValue),st.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,k,a)}).next(S=>{m=S;let k=S.applyToLocalDocumentSet(f,T);return c.documentOverlayCache.saveOverlays(_,S.batchId,k)})}).then(()=>({batchId:m.batchId,changes:dM(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,c){let u=s.Ba[s.currentUser.toKey()];u||(u=new Ke(fe)),u=u.insert(a,c),s.Ba[s.currentUser.toKey()]=u}(i,r.batchId,n),yield Hi(i,r.changes),yield Ra(i.remoteStore)}catch(r){let o=Na(r,"Failed to persist write");n.reject(o)}})}function rA(t,e){return x(this,null,function*(){let n=$(t);try{let i=yield IU(n.localStore,e);e.targetChanges.forEach((r,o)=>{let s=n.Na.get(o);s&&(ee(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.va=!0:r.modifiedDocuments.size>0?ee(s.va):r.removedDocuments.size>0&&(ee(s.va),s.va=!1))}),yield Hi(n,i,e)}catch(i){yield $r(i)}})}function xS(t,e,n){let i=$(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){let c=$(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let m of f.j_)m.Z_(a)&&(u=!0)}),u&&Tw(c)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function qU(t,e,n){return x(this,null,function*(){let i=$(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Na.get(e),o=r&&r.key;if(o){let s=new Ke(G.comparator);s=s.insert(o,wt.newNoDocument(o,ne.min()));let a=_e().add(o),c=new Ml(ne.min(),new Map,new Ke(fe),s,a);yield rA(i,c),i.Oa=i.Oa.remove(o),i.Na.delete(e),xw(i)}else yield ba(i.localStore,e,!1).then(()=>Ca(i,e,n)).catch($r)})}function KU(t,e){return x(this,null,function*(){let n=$(t),i=e.batch.batchId;try{let r=yield CU(n.localStore,e);Aw(n,i,null),Mw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Hi(n,r)}catch(r){yield $r(r)}})}function QU(t,e,n){return x(this,null,function*(){let i=$(t);try{let r=yield function(s,a){let c=$(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(ee(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(i.localStore,e);Aw(i,e,n),Mw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield Hi(i,r)}catch(r){yield $r(r)}})}function YU(t,e){return x(this,null,function*(){let n=$(t);Hr(n.remoteStore)||V("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=$(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void e.resolve();let r=n.ka.get(i)||[];r.push(e),n.ka.set(i,r)}catch(i){let r=Na(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function Mw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Aw(t,e,n){let i=$(t),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Ca(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||oA(t,i)})}function oA(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Ea(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xw(t))}function jv(t,e,n){for(let i of n)i instanceof xf?(t.La.addReference(i.key,e),JU(t,i)):i instanceof Rf?(V("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||oA(t,i.key)):J()}function JU(t,e){let n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(V("SyncEngine","New document in limbo: "+n),t.xa.add(i),xw(t))}function xw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new G(xe.fromString(e)),i=t.qa.next();t.Na.set(i,new Lv(n)),t.Oa=t.Oa.insert(n,i),zf(t.remoteStore,new ya(Xt(Aa(n.path)),i,"TargetPurposeLimboResolution",pn.oe))}}function Hi(t,e,n){return x(this,null,function*(){let i=$(t),r=[],o=[],s=[];i.Fa.isEmpty()||(i.Fa.forEach((a,c)=>{s.push(i.Ka(c,e,n).then(u=>{var d;if((u||n)&&i.isPrimaryClient){let f=u?!u.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){r.push(u);let f=yv.Wi(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),i.Ca.d_(r),yield function(c,u){return x(this,null,function*(){let d=$(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>A.forEach(u,m=>A.forEach(m.$i,_=>d.persistence.referenceDelegate.addReference(f,m.targetId,_)).next(()=>A.forEach(m.Ui,_=>d.persistence.referenceDelegate.removeReference(f,m.targetId,_)))))}catch(f){if(!Gr(f))throw f;V("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let _=d.os.get(m),D=_.snapshotVersion,T=_.withLastLimboFreeSnapshotVersion(D);d.os=d.os.insert(m,T)}}})}(i.localStore,o))})}function ZU(t,e){return x(this,null,function*(){let n=$(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let i=yield HM(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new F(R.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Hi(n,i.hs)}})}function XU(t,e){let n=$(t),i=n.Na.get(e);if(i&&i.va)return _e().add(i.key);{let r=_e(),o=n.Ma.get(e);if(!o)return r;for(let s of o){let a=n.Fa.get(s);r=r.unionWith(a.view.Va)}return r}}function e$(t,e){return x(this,null,function*(){let n=$(t),i=yield wf(n.localStore,e.query,!0),r=e.view.ba(i);return n.isPrimaryClient&&jv(n,e.targetId,r.wa),r})}function t$(t,e){return x(this,null,function*(){let n=$(t);return KM(n.localStore,e).then(i=>Hi(n,i))})}function n$(t,e,n,i){return x(this,null,function*(){let r=$(t),o=yield function(a,c){let u=$(a),d=$(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,c).next(m=>m?u.localDocuments.getDocuments(f,m):A.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield Ra(r.remoteStore):n==="acknowledged"||n==="rejected"?(Aw(r,e,i||null),Mw(r,e),function(a,c){$($(a).mutationQueue).On(c)}(r.localStore,e)):J(),yield Hi(r,o)):V("SyncEngine","Cannot apply mutation batch with id: "+e)})}function i$(t,e){return x(this,null,function*(){let n=$(t);if(Wf(n),Rw(n),e===!0&&n.Qa!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield RS(n,i.toArray());n.Qa=!0,yield xv(n.remoteStore,!0);for(let o of r)zf(n.remoteStore,o)}else if(e===!1&&n.Qa!==!1){let i=[],r=Promise.resolve();n.Ma.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(Ca(n,s),ba(n.localStore,s,!0))),Ea(n.remoteStore,s)}),yield r,yield RS(n,i),function(s){let a=$(s);a.Na.forEach((c,u)=>{Ea(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Ke(G.comparator)}(n),n.Qa=!1,yield xv(n.remoteStore,!1)}})}function RS(t,e,n){return x(this,null,function*(){let i=$(t),r=[],o=[];for(let s of e){let a,c=i.Ma.get(s);if(c&&c.length!==0){a=yield wa(i.localStore,Xt(c[0]));for(let u of c){let d=i.Fa.get(u),f=yield e$(i,d);f.snapshot&&o.push(f.snapshot)}}else{let u=yield qM(i.localStore,s);a=yield wa(i.localStore,u),yield Sw(i,sA(u),s,!1,a.resumeToken)}r.push(a)}return i.Ca.d_(o),r})}function sA(t){return sM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function r$(t){return function(n){return $($(n).persistence).Qi()}($(t).localStore)}function o$(t,e,n,i){return x(this,null,function*(){let r=$(t);if(r.Qa)return void V("SyncEngine","Ignoring unexpected query state notification.");let o=r.Ma.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield KM(r.localStore,cM(o[0])),a=Ml.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ft.EMPTY_BYTE_STRING);yield Hi(r,s,a);break}case"rejected":yield ba(r.localStore,e,!0),Ca(r,e,i);break;default:J()}})}function s$(t,e,n){return x(this,null,function*(){let i=Wf(t);if(i.Qa){for(let r of e){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){V("SyncEngine","Adding an already active target "+r);continue}let o=yield qM(i.localStore,r),s=yield wa(i.localStore,o);yield Sw(i,sA(o),s.targetId,!1,s.resumeToken),zf(i.remoteStore,s)}for(let r of n)i.Ma.has(r)&&(yield ba(i.localStore,r,!1).then(()=>{Ea(i.remoteStore,r),Ca(i,r)}).catch($r))}})}function Wf(t){let e=$(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qU.bind(null,e),e.Ca.d_=jU.bind(null,e.eventManager),e.Ca.$a=UU.bind(null,e.eventManager),e}function Rw(t){let e=$(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QU.bind(null,e),e}function a$(t,e,n){let i=$(t);(function(o,s,a){return x(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(_,D){let T=$(_),S=ht(D.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",k=>T.Gr.getBundleMetadata(k,D.id)).then(k=>!!k&&k.createTime.compareTo(S)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(nA(c));let u=new Fv(c,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let m=yield u.la(d);m&&a._updateProgress(m),d=yield s.Ua()}let f=yield u.complete();return yield Hi(o,f.Ia,void 0),yield function(_,D){let T=$(_);return T.persistence.runTransaction("Save bundle","readwrite",S=>T.Gr.saveBundleMetadata(S,D))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return In("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Vl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){this.serializer=Wl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return GM(this.persistence,new vf,e.initialUser,this.serializer)}createPersistence(e){return new _f(yf.Zr,this.serializer)}createSharedClientState(e){return new Df}terminate(){return x(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Nf=class t extends Vl{constructor(e,n,i){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){yield Wp(t.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield Rw(this.Wa.syncEngine),yield Ra(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return GM(this.persistence,new vf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new nv(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new v0(n,this.persistence);return new y0(e.asyncQueue,i)}createPersistence(e){let n=ww(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new _v(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,YM(),Hh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Df}},Uv=class t extends Nf{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return x(this,null,function*(){yield Wp(t.prototype,this,"initialize").call(this,e);let n=this.Wa.syncEngine;this.sharedClientState instanceof yl&&(this.sharedClientState.syncEngine={no:n$.bind(null,n),ro:o$.bind(null,n),io:s$.bind(null,n),Qi:r$.bind(null,n),eo:t$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.yi(i=>x(this,null,function*(){yield i$(this.Wa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=YM();if(!yl.D(n))throw new F(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=ww(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yl(n,e.asyncQueue,i,e.clientId,e.initialUser)}},Ll=class{initialize(e,n){return x(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZU.bind(null,this.syncEngine),yield xv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Nv}()}createDatastore(e){let n=Wl(e.databaseInfo.databaseId),i=function(o){return new Cv(o)}(e.databaseInfo);return function(o,s,a,c){return new Sv(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,s,a){return new Av(i,r,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>xS(this.syncEngine,n,0),function(){return Cf.D()?new Cf:new Ev}())}createSyncEngine(e,n){return function(r,o,s,a,c,u,d){let f=new Bv(r,o,s,a,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return x(this,null,function*(){var e,n;yield function(r){return x(this,null,function*(){let o=$(r);V("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield xa(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};function OS(t,e=10240){let n=0;return{read(){return x(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return x(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ia=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):ut("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var $v=class{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new vt,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.ja.cancel()}getMetadata(){return x(this,null,function*(){return this.metadata.promise})}Ua(){return x(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return x(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let n=this.Ha.decode(e),i=Number(n);isNaN(i)&&this.Za(`length string (${n}) is not valid number`);let r=yield this.Xa(i);return new kv(JSON.parse(r),e.length+i)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return x(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Xa(e){return x(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let n=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return x(this,null,function*(){let e=yield this.ja.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var Gv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return x(this,null,function*(){let s=$(r),a={documents:o.map(f=>xl(s.serializer,f))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,xe.emptyPath(),a,o.length),u=new Map;c.forEach(f=>{let m=hU(s.serializer,f);u.set(m.key.toString(),m)});let d=[];return o.forEach(f=>{let m=u.get(f.toString());ee(!!m),d.push(m)}),d})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new jr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=G.fromPath(i);this.mutations.push(new Il(r,this.precondition(r)))}),yield function(i,r){return x(this,null,function*(){let o=$(i),s={writes:r.map(a=>Rl(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,xe.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw J();n=ne.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new F(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ne.min())?st.exists(!1):st.updateTime(n):st.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ne.min()))throw new F(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return st.updateTime(n)}return st.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Hv=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.nu=i.maxAttempts,this.t_=new kl(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>x(this,null,function*(){let e=new Gv(this.datastore),n=this.su(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ou(r)}))}).catch(i=>{this.ou(i)})}))}su(e){try{let n=this.updateFunction(e);return!$l(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!bM(n)}return!1}};var zv=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=yt.UNAUTHENTICATED,this.clientId=qh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>x(this,null,function*(){V("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(V("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new vt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Na(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function zh(t,e){return x(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>x(this,null,function*(){i.isEqual(r)||(yield HM(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Wv(t,e){return x(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Ow(t);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>SS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>SS(e.remoteStore,r)),t._onlineComponents=e})}function aA(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Ow(t){return x(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield zh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!aA(n))throw n;In("Error using user provided cache. Falling back to memory cache: "+n),yield zh(t,new Vl)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield zh(t,new Vl);return t._offlineComponents})}function qf(t){return x(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield Wv(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield Wv(t,new Ll))),t._onlineComponents})}function cA(t){return Ow(t).then(e=>e.persistence)}function Nw(t){return Ow(t).then(e=>e.localStore)}function lA(t){return qf(t).then(e=>e.remoteStore)}function Pw(t){return qf(t).then(e=>e.syncEngine)}function c$(t){return qf(t).then(e=>e.datastore)}function Ta(t){return x(this,null,function*(){let e=yield qf(t),n=e.eventManager;return n.onListen=$U.bind(null,e.syncEngine),n.onUnlisten=HU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zU.bind(null,e.syncEngine),n})}function l$(t){return t.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield cA(t),n=yield lA(t);return e.setNetworkEnabled(!0),function(r){let o=$(r);return o.L_.delete(0),ql(o)}(n)}))}function u$(t){return t.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield cA(t),n=yield lA(t);return e.setNetworkEnabled(!1),function(r){return x(this,null,function*(){let o=$(r);o.L_.add(0),yield xa(o),o.q_.set("Offline")})}(n)}))}function d$(t,e){let n=new vt;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,o,s){return x(this,null,function*(){try{let a=yield function(u,d){let f=$(u);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,d))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new F(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Na(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Nw(t),e,n)})),n.promise}function uA(t,e,n={}){let i=new vt;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(o,s,a,c,u){let d=new Ia({next:m=>{s.enqueueAndForget(()=>Iw(o,f));let _=m.docs.has(a);!_&&m.fromCache?u.reject(new F(R.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&c&&c.source==="server"?u.reject(new F(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Fl(Aa(a.path),d,{includeMetadataChanges:!0,_a:!0});return Cw(o,f)}(yield Ta(t),t.asyncQueue,e,n,i)})),i.promise}function h$(t,e){let n=new vt;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,o,s){return x(this,null,function*(){try{let a=yield wf(r,o,!0),c=new Of(o,a.Ts),u=c.ma(a.documents),d=c.applyChanges(u,!1);s.resolve(d.snapshot)}catch(a){let c=Na(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Nw(t),e,n)})),n.promise}function dA(t,e,n={}){let i=new vt;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(o,s,a,c,u){let d=new Ia({next:m=>{s.enqueueAndForget(()=>Iw(o,f)),m.fromCache&&c.source==="server"?u.reject(new F(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Fl(a,d,{includeMetadataChanges:!0,_a:!0});return Cw(o,f)}(yield Ta(t),t.asyncQueue,e,n,i)})),i.promise}function f$(t,e){let n=new Ia(e);return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,o){$(r).Y_.add(o),o.next()}(yield Ta(t),n)})),()=>{n.za(),t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,o){$(r).Y_.delete(o)}(yield Ta(t),n)}))}}function p$(t,e,n,i){let r=function(s,a){let c;return c=typeof s=="string"?DM().encode(s):s,function(d,f){return new $v(d,f)}(function(d,f){if(d instanceof Uint8Array)return OS(d,f);if(d instanceof ArrayBuffer)return OS(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Wl(e));t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){a$(yield Pw(t),r,i)}))}function m$(t,e){return t.asyncQueue.enqueue(()=>x(this,null,function*(){return function(i,r){let o=$(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,r))}(yield Nw(t),e)}))}function hA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var NS=new Map;function kw(t,e,n){if(!n)throw new F(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Fw(t,e,n,i){if(e===!0&&i===!0)throw new F(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function PS(t){if(!G.isDocumentKey(t))throw new F(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kS(t){if(G.isDocumentKey(t))throw new F(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Kf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function Re(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Kf(t);throw new F(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function fA(t,e){if(e<=0)throw new F(R.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Pf=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new F(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Fw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},jo=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pf(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new c0;switch(i.type){case"firstParty":return new h0(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new F(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=NS.get(n);i&&(V("ComponentProvider","Removing Datastore"),NS.delete(n),i.terminate())}(this),Promise.resolve()}};function pA(t,e,n,i={}){var r;let o=(t=Re(t,jo))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&In("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=yt.MOCK_USER;else{a=M1(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new F(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yt(u)}t._authCredentials=new l0(new Wh(a,c))}}var Ft=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},We=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},di=class t extends Ft{constructor(e,n,i){super(e,n,Aa(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Vw(t,e,...n){if(t=Je(t),kw("collection","path",e),t instanceof jo){let i=xe.fromString(e,...n);return kS(i),new di(t,null,i)}{if(!(t instanceof We||t instanceof di))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(xe.fromString(e,...n));return kS(i),new di(t.firestore,null,i)}}function mA(t,e){if(t=Re(t,jo),kw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ft(t,null,function(i){return new Hn(xe.emptyPath(),i)}(e))}function Kl(t,e,...n){if(t=Je(t),arguments.length===1&&(e=qh.newId()),kw("doc","path",e),t instanceof jo){let i=xe.fromString(e,...n);return PS(i),new We(t,null,new G(i))}{if(!(t instanceof We||t instanceof di))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(xe.fromString(e,...n));return PS(i),new We(t.firestore,t instanceof di?t.converter:null,new G(i))}}function Lw(t,e){return t=Je(t),e=Je(e),(t instanceof We||t instanceof di)&&(e instanceof We||e instanceof di)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Bw(t,e){return t=Je(t),e=Je(e),t instanceof Ft&&e instanceof Ft&&t.firestore===e.firestore&&Hl(t._query,e._query)&&t.converter===e.converter}var qv=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new kl(this,"async_queue_retry"),this.Eu=()=>{let n=Hh();n&&V("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Hh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Hh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new vt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return x(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Gr(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(i=>{this.hu=i,this.Pu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw ut("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=n,n}enqueueAfterDelay(e,n,i){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let r=Rv.createAndSchedule(this,e,n,i,o=>this.Vu(o));return this.lu.push(r),r}du(){this.hu&&J()}verifyOperationInProgress(){}mu(){return x(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function Kv(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Qv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new vt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var gA=-1,Ye=class extends jo{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new qv}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||_A(this),this._firestoreClient.terminate()}};function St(t){return t._firestoreClient||_A(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function _A(t){var e,n,i;let r=t._freezeSettings(),o=function(a,c,u,d){return new w0(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new zv(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function yA(t,e){SA(t=Re(t,Ye));let n=St(t);if(n._uninitializedComponentsProvider)throw new F(R.FAILED_PRECONDITION,"SDK cache is already specified.");In("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new Ll;return wA(n,r,new Nf(r,i.cacheSizeBytes,e?.forceOwnership))}function vA(t){SA(t=Re(t,Ye));let e=St(t);if(e._uninitializedComponentsProvider)throw new F(R.FAILED_PRECONDITION,"SDK cache is already specified.");In("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new Ll;return wA(e,i,new Uv(i,n.cacheSizeBytes))}function wA(t,e,n){let i=new vt;return t.asyncQueue.enqueue(()=>x(this,null,function*(){try{yield zh(t,n),yield Wv(t,e),i.resolve()}catch(r){let o=r;if(!aA(o))throw o;In("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function bA(t){if(t._initialized&&!t._terminated)throw new F(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new vt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{yield function(i){return x(this,null,function*(){if(!Nr.D())return Promise.resolve();let r=i+"main";yield Nr.delete(r)})}(ww(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function EA(t){return function(n){let i=new vt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return YU(yield Pw(n),i)})),i.promise}(St(t=Re(t,Ye)))}function DA(t){return l$(St(t=Re(t,Ye)))}function CA(t){return u$(St(t=Re(t,Ye)))}function IA(t,e){let n=St(t=Re(t,Ye)),i=new Qv;return p$(n,t._databaseId,e,i),i}function TA(t,e){return m$(St(t=Re(t,Ye)),e).then(n=>n?new Ft(t,null,n.query):null)}function SA(t){if(t._initialized||t._terminated)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var mi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ft.fromBase64String(e))}catch(n){throw new F(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Wn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $i=class{constructor(e){this._methodName=e}};var Uo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}};var Bl=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}};var g$=/^__.*__$/,Yv=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new zn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Br(e,this.data,n,this.fieldTransforms)}},kf=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new zn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function MA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}var Ff=class t{constructor(e,n,i,r,o,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Su({path:i,Du:!1});return r.vu(e),r}Cu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Vf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(MA(this.wu)&&g$.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Jv=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Wl(e)}Nu(e,n,i,r=!1){return new Ff({wu:e,methodName:n,Ou:i,path:dt.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function zo(t){let e=t._freezeSettings(),n=Wl(t._databaseId);return new Jv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Qf(t,e,n,i,r,o={}){let s=t.Nu(o.merge||o.mergeFields?2:0,e,n,r);$w("Data must be an object, but it was:",s,i);let a=RA(i,s),c,u;if(o.merge)c=new mn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=nw(e,f,n);if(!s.contains(m))throw new F(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);NA(d,m)||d.push(m)}c=new mn(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new Yv(new Gt(a),c,u)}var jl=class t extends $i{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function AA(t,e,n){return new Ff({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Zv=class t extends $i{_toFieldTransform(e){return new Vo(e.path,new Vr)}isEqual(e){return e instanceof t}},Xv=class t extends $i{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=AA(this,e,!0),i=this.Lu.map(o=>Wo(o,n)),r=new ji(i);return new Vo(e.path,r)}isEqual(e){return e instanceof t&&Qp(this.Lu,e.Lu)}},ew=class t extends $i{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=AA(this,e,!0),i=this.Lu.map(o=>Wo(o,n)),r=new Ui(i);return new Vo(e.path,r)}isEqual(e){return e instanceof t&&Qp(this.Lu,e.Lu)}},tw=class t extends $i{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){let n=new Lr(e.serializer,pM(e.serializer,this.Bu));return new Vo(e.path,n)}isEqual(e){return e instanceof t&&this.Bu===e.Bu}};function jw(t,e,n,i){let r=t.Nu(1,e,n);$w("Data must be an object, but it was:",r,i);let o=[],s=Gt.empty();Ho(i,(c,u)=>{let d=Gw(e,c,n);u=Je(u);let f=r.Cu(d);if(u instanceof jl)o.push(d);else{let m=Wo(u,f);m!=null&&(o.push(d),s.set(d,m))}});let a=new mn(o);return new kf(s,a,r.fieldTransforms)}function Uw(t,e,n,i,r,o){let s=t.Nu(1,e,n),a=[nw(e,i,n)],c=[r];if(o.length%2!=0)throw new F(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(nw(e,o[m])),c.push(o[m+1]);let u=[],d=Gt.empty();for(let m=a.length-1;m>=0;--m)if(!NA(u,a[m])){let _=a[m],D=c[m];D=Je(D);let T=s.Cu(_);if(D instanceof jl)u.push(_);else{let S=Wo(D,T);S!=null&&(u.push(_),d.set(_,S))}}let f=new mn(u);return new kf(d,f,s.fieldTransforms)}function xA(t,e,n,i=!1){return Wo(n,t.Nu(i?4:3,e))}function Wo(t,e){if(OA(t=Je(t)))return $w("Unsupported field value:",e,t),RA(t,e);if(t instanceof $i)return function(i,r){if(!MA(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let c=Wo(a,r.Fu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Je(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return pM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Xe.fromDate(i);return{timestampValue:_a(r.serializer,o)}}if(i instanceof Xe){let o=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_a(r.serializer,o)}}if(i instanceof Uo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof mi)return{bytesValue:CM(r.serializer,i._byteString)};if(i instanceof We){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_w(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Bl)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Mu("VectorValues must only contain numeric values.");return gw(a.serializer,c)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${Kf(i)}`)}(t,e)}function RA(t,e){let n={};return YS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ho(t,(i,r)=>{let o=Wo(r,e.bu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function OA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Uo||t instanceof mi||t instanceof We||t instanceof $i||t instanceof Bl)}function $w(t,e,n){if(!OA(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=Kf(n);throw i==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+i)}}function nw(t,e,n){if((e=Je(e))instanceof Wn)return e._internalPath;if(typeof e=="string")return Gw(t,e);throw Vf("Field path arguments must be of type string or ",t,!1,void 0,n)}var _$=new RegExp("[~\\*/\\[\\]]");function Gw(t,e,n){if(e.search(_$)>=0)throw Vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wn(...e.split("."))._internalPath}catch{throw Vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vf(t,e,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new F(R.INVALID_ARGUMENT,a+t+c)}function NA(t,e){return t.some(n=>n.isEqual(e))}var $o=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new iw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Yf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},iw=class extends $o{data(){return super.data()}};function Yf(t,e){return typeof e=="string"?Gw(t,e):e instanceof Wn?e._internalPath:e._delegate._internalPath}function PA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ul=class{},Go=class extends Ul{};function zi(t,e,...n){let i=[];e instanceof Ul&&i.push(e),i=i.concat(n),function(o){let s=o.filter(c=>c instanceof rw).length,a=o.filter(c=>c instanceof Lf).length;if(s>1||s>0&&a>0)throw new F(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var Lf=class t extends Go{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return HA(e._query,n),new Ft(e.firestore,e.converter,N0(e._query,n))}_parse(e){let n=zo(e.firestore);return function(o,s,a,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new F(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){VS(f,d);let _=[];for(let D of f)_.push(FS(c,o,D));m={arrayValue:{values:_}}}else m=FS(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||VS(f,d),m=xA(a,s,f,d==="in"||d==="not-in");return Ie.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function kA(t,e,n){let i=e,r=Yf("where",t);return Lf._create(r,i,n)}var rw=class t extends Ul{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let c of a)HA(s,c),s=N0(s,c)}(e._query,n),new Ft(e.firestore,e.converter,N0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ow=class t extends Go{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,s){if(r.startAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ko(o,s)}(e._query,this._field,this._direction);return new Ft(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new Hn(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function FA(t,e="asc"){let n=e,i=Yf("orderBy",t);return ow._create(i,n)}var Bf=class t extends Go{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new Ft(e.firestore,e.converter,rf(e._query,this._limit,this._limitType))}};function VA(t){return fA("limit",t),Bf._create("limit",t,"F")}function LA(t){return fA("limitToLast",t),Bf._create("limitToLast",t,"L")}var jf=class t extends Go{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=GA(e,this.type,this._docOrFields,this._inclusive);return new Ft(e.firestore,e.converter,function(r,o){return new Hn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function BA(...t){return jf._create("startAt",t,!0)}function jA(...t){return jf._create("startAfter",t,!1)}var Uf=class t extends Go{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=GA(e,this.type,this._docOrFields,this._inclusive);return new Ft(e.firestore,e.converter,function(r,o){return new Hn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function UA(...t){return Uf._create("endBefore",t,!1)}function $A(...t){return Uf._create("endAt",t,!0)}function GA(t,e,n,i){if(n[0]=Je(n[0]),n[0]instanceof $o)return function(o,s,a,c,u){if(!c)throw new F(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of la(o))if(f.field.isKeyField())d.push(Po(s,c.key));else{let m=c.data.field(f.field);if(Gf(m))throw new F(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let _=f.field.canonicalString();throw new F(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}d.push(m)}return new fi(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=zo(t.firestore);return function(s,a,c,u,d,f){let m=s.explicitOrderBy;if(d.length>m.length)throw new F(R.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let _=[];for(let D=0;D<d.length;D++){let T=d[D];if(m[D].field.isKeyField()){if(typeof T!="string")throw new F(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof T}`);if(!pw(s)&&T.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${T}' contains a slash.`);let S=s.path.child(xe.fromString(T));if(!G.isDocumentKey(S))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);let k=new G(S);_.push(Po(a,k))}else{let S=xA(c,u,T);_.push(S)}}return new fi(_,f)}(t._query,t.firestore._databaseId,r,e,n,i)}}function FS(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new F(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pw(e)&&n.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(xe.fromString(n));if(!G.isDocumentKey(i))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Po(t,new G(i))}if(n instanceof We)return Po(t,n._key);throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kf(n)}.`)}function VS(t,e){if(!Array.isArray(t)||t.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HA(t,e){let n=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Sa=class{convertValue(e,n="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Ho(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;let o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>Qe(s.doubleValue));return new Bl(o)}convertGeoPoint(e){return new Uo(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=hw(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){let n=Bi(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=xe.fromString(e);ee(kM(i));let r=new kr(i.get(1),i.get(3)),o=new G(i.popFirst(5));return r.isEqual(n)||ut(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Jf(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var sw=class extends Sa{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}};var Li=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Sn=class extends $o{constructor(e,n,i,r,o,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Rr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(Yf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Rr=class extends Sn{data(e={}){return super.data(e)}},qn=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Li(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Rr(this._firestore,this._userDataWriter,i.key,i,new Li(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let c=new Rr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Li(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Rr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Li(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:y$(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function y$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}function Hw(t,e){return t instanceof Sn&&e instanceof Sn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof qn&&e instanceof qn&&t._firestore===e._firestore&&Bw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function zA(t){t=Re(t,We);let e=Re(t.firestore,Ye);return uA(St(e),t._key).then(n=>Kw(e,t,n))}var Gi=class extends Sa{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}};function WA(t){t=Re(t,We);let e=Re(t.firestore,Ye),n=St(e),i=new Gi(e);return d$(n,t._key).then(r=>new Sn(e,i,t._key,r,new Li(r!==null&&r.hasLocalMutations,!0),t.converter))}function qA(t){t=Re(t,We);let e=Re(t.firestore,Ye);return uA(St(e),t._key,{source:"server"}).then(n=>Kw(e,t,n))}function KA(t){t=Re(t,Ft);let e=Re(t.firestore,Ye),n=St(e),i=new Gi(e);return PA(t._query),dA(n,t._query).then(r=>new qn(e,i,t,r))}function QA(t){t=Re(t,Ft);let e=Re(t.firestore,Ye),n=St(e),i=new Gi(e);return h$(n,t._query).then(r=>new qn(e,i,t,r))}function YA(t){t=Re(t,Ft);let e=Re(t.firestore,Ye),n=St(e),i=new Gi(e);return dA(n,t._query,{source:"server"}).then(r=>new qn(e,i,t,r))}function zw(t,e,n){t=Re(t,We);let i=Re(t.firestore,Ye),r=Jf(t.converter,e,n);return Pa(i,[Qf(zo(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,st.none())])}function Ww(t,e,n,...i){t=Re(t,We);let r=Re(t.firestore,Ye),o=zo(r),s;return s=typeof(e=Je(e))=="string"||e instanceof Wn?Uw(o,"updateDoc",t._key,e,n,i):jw(o,"updateDoc",t._key,e),Pa(r,[s.toMutation(t._key,st.exists(!0))])}function JA(t){return Pa(Re(t.firestore,Ye),[new jr(t._key,st.none())])}function ZA(t,e){let n=Re(t.firestore,Ye),i=Kl(t),r=Jf(t.converter,e);return Pa(n,[Qf(zo(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,st.exists(!1))]).then(()=>i)}function qw(t,...e){var n,i,r;t=Je(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Kv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Kv(e[s])){let f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[s+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let c,u,d;if(t instanceof We)u=Re(t.firestore,Ye),d=Aa(t._key.path),c={next:f=>{e[s]&&e[s](Kw(u,t,f))},error:e[s+1],complete:e[s+2]};else{let f=Re(t,Ft);u=Re(f.firestore,Ye),d=f._query;let m=new Gi(u);c={next:_=>{e[s]&&e[s](new qn(u,m,f,_))},error:e[s+1],complete:e[s+2]},PA(t._query)}return function(m,_,D,T){let S=new Ia(T),k=new Fl(_,S,D);return m.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return Cw(yield Ta(m),k)})),()=>{S.za(),m.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return Iw(yield Ta(m),k)}))}}(St(u),d,a,c)}function XA(t,e){return f$(St(t=Re(t,Ye)),Kv(e)?e:{next:e})}function Pa(t,e){return function(i,r){let o=new vt;return i.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return WU(yield Pw(i),r,o)})),o.promise}(St(t),e)}function Kw(t,e,n){let i=n.docs.get(e._key),r=new Gi(t);return new Sn(t,r,e._key,i,new Li(n.hasPendingWrites,n.fromCache),e.converter)}var v$={maxAttempts:5};var $f=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zo(e)}set(e,n,i){this._verifyNotCommitted();let r=Ar(e,this._firestore),o=Jf(r.converter,n,i),s=Qf(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,st.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=Ar(e,this._firestore),s;return s=typeof(n=Je(n))=="string"||n instanceof Wn?Uw(this._dataReader,"WriteBatch.update",o._key,n,i,r):jw(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,st.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Ar(e,this._firestore);return this._mutations=this._mutations.concat(new jr(n._key,st.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ar(t,e){if((t=Je(t)).firestore!==e)throw new F(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var aw=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=zo(n)}get(n){let i=Ar(n,this._firestore),r=new sw(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return J();let s=o[0];if(s.isFoundDocument())return new $o(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new $o(this._firestore,r,i._key,null,i.converter);throw J()})}set(n,i,r){let o=Ar(n,this._firestore),s=Jf(o.converter,i,r),a=Qf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(n,i,r,...o){let s=Ar(n,this._firestore),a;return a=typeof(i=Je(i))=="string"||i instanceof Wn?Uw(this._dataReader,"Transaction.update",s._key,i,r,o):jw(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(n){let i=Ar(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Ar(e,this._firestore),i=new Gi(this._firestore);return super.get(e).then(r=>new Sn(this._firestore,i,n._key,r._document,new Li(!1,!1),n.converter))}};function ex(t,e,n){t=Re(t,Ye);let i=Object.assign(Object.assign({},v$),n);return function(o){if(o.maxAttempts<1)throw new F(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let c=new vt;return o.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){let u=yield c$(o);new Hv(o.asyncQueue,u,a,s,c).ru()})),c.promise}(St(t),r=>e(new aw(t,r)),i)}function tx(){return new jl("deleteField")}function nx(){return new Zv("serverTimestamp")}function ix(...t){return new Xv("arrayUnion",t)}function rx(...t){return new ew("arrayRemove",t)}function ox(t){return new tw("increment",t)}(function(e,n=!0){(function(r){Ma=r})(R1),uc(new Qr("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new Ye(new u0(i.getProvider("auth-internal")),new p0(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new F(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kr(u.options.projectId,d)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),gn(FT,"4.7.0",e),gn(FT,"4.7.0","esm2017")})();var w$="@firebase/firestore-compat",b$="0.3.35";function eb(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function sx(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function ax(){if(!JS())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Zf=class t{constructor(e){this._delegate=e}static fromBase64String(e){return ax(),new t(mi.fromBase64String(e))}static fromUint8Array(e){return sx(),new t(mi.fromUint8Array(e))}toBase64(){return ax(),this._delegate.toBase64()}toUint8Array(){return sx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Qw(t){return E$(t,["next","error","complete"])}function E$(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var Yw=class{enableIndexedDbPersistence(e,n){return yA(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return vA(e._delegate)}clearIndexedDbPersistence(e){return bA(e._delegate)}},Xf=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof kr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&In("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){pA(this._delegate,e,n,i)}enableNetwork(){return DA(this._delegate)}disableNetwork(){return CA(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Fw("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return EA(this._delegate)}onSnapshotsInSync(e){return XA(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Va(this,Vw(this._delegate,e))}catch(n){throw en(n,"collection()","Firestore.collection()")}}doc(e){try{return new gi(this,Kl(this._delegate,e))}catch(n){throw en(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yo(this,mA(this._delegate,e))}catch(n){throw en(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ex(this._delegate,n=>e(new ep(this,n)))}batch(){return St(this._delegate),new tp(new $f(this._delegate,e=>Pa(this._delegate,e)))}loadBundle(e){return IA(this._delegate,e)}namedQuery(e){return TA(this._delegate,e).then(n=>n?new Yo(this,n):null)}},ka=class extends Sa{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zf(new mi(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return gi.forKey(n,this.firestore,null)}};function D$(t){LS(t)}var ep=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new ka(e)}get(e){let n=qo(e);return this._delegate.get(n).then(i=>new Ko(this._firestore,new Sn(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=qo(e);return i?(eb("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=qo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=qo(e);return this._delegate.delete(n),this}},tp=class{constructor(e){this._delegate=e}set(e,n,i){let r=qo(e);return i?(eb("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=qo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=qo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Fa=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new Rr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qo(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new ka(e),n),r.set(n,o)),o}};Fa.INSTANCES=new WeakMap;var gi=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ka(e)}static forPath(e,n,i){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new We(n._delegate,i,new G(e)))}static forKey(e,n,i){return new t(n,new We(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Va(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Va(this.firestore,Vw(this._delegate,e))}catch(n){throw en(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Je(e),e instanceof We?Lw(this._delegate,e):!1}set(e,n){n=eb("DocumentReference.set",n);try{return n?zw(this._delegate,e,n):zw(this._delegate,e)}catch(i){throw en(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?Ww(this._delegate,e):Ww(this._delegate,e,n,...i)}catch(r){throw en(r,"updateDoc()","DocumentReference.update()")}}delete(){return JA(this._delegate)}onSnapshot(...e){let n=cx(e),i=lx(e,r=>new Ko(this.firestore,new Sn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return qw(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=WA(this._delegate):e?.source==="server"?n=qA(this._delegate):n=zA(this._delegate),n.then(i=>new Ko(this.firestore,new Sn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Fa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function en(t,e,n){return t.message=t.message.replace(e,n),t}function cx(t){for(let e of t)if(typeof e=="object"&&!Qw(e))return e;return{}}function lx(t,e){var n,i;let r;return Qw(t[0])?r=t[0]:Qw(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Ko=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new gi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Hw(this._delegate,e._delegate)}},Qo=class extends Ko{data(e){let n=this._delegate.data(e);return this._delegate._converter||BS(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Yo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ka(e)}where(e,n,i){try{return new t(this.firestore,zi(this._delegate,kA(e,n,i)))}catch(r){throw en(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,zi(this._delegate,FA(e,n)))}catch(i){throw en(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,zi(this._delegate,VA(e)))}catch(n){throw en(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,zi(this._delegate,LA(e)))}catch(n){throw en(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,zi(this._delegate,BA(...e)))}catch(n){throw en(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,zi(this._delegate,jA(...e)))}catch(n){throw en(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,zi(this._delegate,UA(...e)))}catch(n){throw en(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,zi(this._delegate,$A(...e)))}catch(n){throw en(n,"endAt()","Query.endAt()")}}isEqual(e){return Bw(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=QA(this._delegate):e?.source==="server"?n=YA(this._delegate):n=KA(this._delegate),n.then(i=>new Ql(this.firestore,new qn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=cx(e),i=lx(e,r=>new Ql(this.firestore,new qn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return qw(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Fa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Jw=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Qo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ql=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Yo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Jw(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Qo(this._firestore,i))})}isEqual(e){return Hw(this._delegate,e._delegate)}},Va=class t extends Yo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new gi(this.firestore,e):null}doc(e){try{return e===void 0?new gi(this.firestore,Kl(this._delegate)):new gi(this.firestore,Kl(this._delegate,e))}catch(n){throw en(n,"doc()","CollectionReference.doc()")}}add(e){return ZA(this._delegate,e).then(n=>new gi(this.firestore,n))}isEqual(e){return Lw(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Fa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function qo(t){return Re(t,We)}var Zw=class t{constructor(...e){this._delegate=new Wn(...e)}static documentId(){return new t(dt.keyField().canonicalString())}isEqual(e){return e=Je(e),e instanceof Wn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Xw=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=nx();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=tx();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=ix(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=rx(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=ox(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var C$={Firestore:Xf,GeoPoint:Uo,Timestamp:Xe,Blob:Zf,Transaction:ep,WriteBatch:tp,DocumentReference:gi,DocumentSnapshot:Ko,Query:Yo,QueryDocumentSnapshot:Qo,QuerySnapshot:Ql,CollectionReference:Va,FieldPath:Zw,FieldValue:Xw,setLogLevel:D$,CACHE_SIZE_UNLIMITED:gA};function I$(t,e){t.INTERNAL.registerComponent(new Qr("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},C$)))}function T$(t){I$(t,(e,n)=>new Xf(e,n,new Yw)),t.registerVersion(w$,b$)}T$(xt);function S$(t,e=ds){return new ae(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function ux(t,e){return S$(t,e)}function M$(t,e){return ux(t,e).pipe(tr(void 0),gc(),K(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function ib(t,e){return ux(t,e).pipe(K(n=>({payload:n,type:"query"})))}var np=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=mx(i,n);return new rp(r,o,this.afs)}snapshotChanges(){return M$(this.ref,this.afs.schedulers.outsideAngular).pipe(sn)}valueChanges(e={}){return this.snapshotChanges().pipe(K(({payload:n})=>e.idField?Oe(q({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return Te(this.ref.get(e)).pipe(sn)}};function ip(t,e){return ib(t,e).pipe(tr(void 0),gc(),K(n=>{let[i,r]=n,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{let u=o.find(f=>f.doc.ref.isEqual(a.ref)),d=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function dx(t,e,n){return ip(t,n).pipe(eo((i,r)=>A$(i,r.map(o=>o.payload),e),[]),Yu(),K(i=>i.map(r=>({type:r.type,payload:r}))))}function A$(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=x$(t,i))}),t}function tb(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function x$(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return tb(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return tb(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tb(t,e.oldIndex,1);break}return t}function hx(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var rp=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=ip(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(K(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(tr(void 0),gc(),Ze(([i,r])=>r.length>0||!i),K(([,i])=>i),sn)}auditTrail(e){return this.stateChanges(e).pipe(eo((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=hx(e);return dx(this.query,n,this.afs.schedulers.outsideAngular).pipe(sn)}valueChanges(e={}){return ib(this.query,this.afs.schedulers.outsideAngular).pipe(K(n=>n.payload.docs.map(i=>e.idField?Oe(q({},i.data()),{[e.idField]:i.id}):i.data())),sn)}get(e){return Te(this.query.get(e)).pipe(sn)}add(e){return this.ref.add(e)}doc(e){return new np(this.ref.doc(e),this.afs)}},nb=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?ip(this.query,this.afs.schedulers.outsideAngular).pipe(sn):ip(this.query,this.afs.schedulers.outsideAngular).pipe(K(n=>n.filter(i=>e.indexOf(i.type)>-1)),Ze(n=>n.length>0),sn)}auditTrail(e){return this.stateChanges(e).pipe(eo((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=hx(e);return dx(this.query,n,this.afs.schedulers.outsideAngular).pipe(sn)}valueChanges(e={}){return ib(this.query,this.afs.schedulers.outsideAngular).pipe(K(i=>i.payload.docs.map(r=>e.idField?q({[e.idField]:r.id},r.data()):r.data())),sn)}get(e){return Te(this.query.get(e)).pipe(sn)}},fx=new W("angularfire2.enableFirestorePersistence"),px=new W("angularfire2.firestore.persistenceSettings"),R$=new W("angularfire2.firestore.settings"),O$=new W("angularfire2.firestore.use-emulator");function mx(t,e=n=>n){return{query:e(t),ref:t}}var Yl=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,s,a,c,u,d,f,m,_,D,T,S,k,H){this.schedulers=c;let B=Co(n,a,i),z=d;f&&Qy(B,a,m,D,T,S,_,k),[this.firestore,this.persistenceEnabled$]=Ys(`${B.name}.firestore`,"AngularFirestore",B.name,()=>{let re=a.runOutsideAngular(()=>B.firestore());if(o&&re.settings(o),z&&re.useEmulator(...z),r&&!mr(s)){let te=()=>{try{return Te(re.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(b){return typeof console<"u"&&console.warn(b),X(!1)}};return[re,a.runOutsideAngular(te)]}else return[re,X(!1)]},[o,z,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:s}=mx(r,i),a=this.schedulers.ngZone.run(()=>o);return new rp(a,s,this)}collectionGroup(n,i){let r=i||(s=>s),o=this.firestore.collectionGroup(n);return new nb(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new np(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(j(Dr),j(Cr,8),j(fx,8),j(R$,8),j(Pt),j(Ce),j(Do),j(px,8),j(O$,8),j(Yy,8),j(Gy,8),j(Hy,8),j(zy,8),j(Wy,8),j(qy,8),j(Ky,8),j(ki,8))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),gx=(()=>{class t{constructor(){xt.registerVersion("angularfire",Dn.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:fx,useValue:!0},{provide:px,useValue:n}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ot({type:t});static \u0275inj=rt({providers:[Yl]})}return t})();var op=(()=>{let e=class e{constructor(){this.firestore=L(Yl)}saveForm(i,r){return this.firestore.collection("forms").doc(i).set(r)}getForms(){return this.firestore.collection("forms").valueChanges().pipe(K(i=>i))}getFormById(i){return this.firestore.collection("forms").doc(i).valueChanges()}deleteForm(i){return this.firestore.collection("forms").doc(i).delete()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _x=`
 
    <div class="ui-modal-dialog ">
      <div class="ui-modal-dialog-content">
        <div class="ui-modal-title">
          <span>{{title}}</span>
        </div>
        <div class="ui-modal-body-message">
          {{message}}
        </div>
        <div class="ui-modal-footer-message">
          <button class="ui-modal-button ok-button btn">OK</button>
        </div>
      </div>
    </div>
 
`,sp=(t,e,n)=>{let i=_x.replace("{{title}}",e).replace("{{message}}",t),r=document.createElement("div");r.classList.add("modal"),r.style.display="block",r.innerHTML=i,r.querySelector(".ok-button").addEventListener("click",()=>{let o=!0;document.body.removeChild(r),n&&n(o)}),document.body.appendChild(r)},ap=(t,e,n)=>{let i=_x.replace("{{title}}",e).replace("{{message}}",t),r=document.createElement("div");r.classList.add("modal"),r.style.display="block",r.innerHTML=i;let o=document.createElement("button"),s=document.createElement("button");o.classList.add("ui-modal-button"),s.classList.add("ui-modal-button"),o.textContent="Si",s.textContent="No",r.querySelector(".ui-modal-footer-message").innerHTML="",r.querySelector(".ui-modal-footer-message").appendChild(o),r.querySelector(".ui-modal-footer-message").appendChild(s),o.addEventListener("click",()=>{let a=!0;document.body.removeChild(r),n&&n(a)}),s.addEventListener("click",()=>{let a=!1;document.body.removeChild(r),n&&n(a)}),document.body.appendChild(r)};function N$(t,e){if(t&1){let n=Dt();N(0,"li",7),ge("dblclick",function(){let r=ue(n).$implicit,o=he();return de(o.editForm(r))}),N(1,"div",8),se(2,"span",9),Y(3),P(),N(4,"div")(5,"button",10),ge("click",function(){let r=ue(n).$implicit,o=he();return de(o.editForm(r))}),se(6,"span",11),P(),N(7,"button",10),ge("click",function(){let r=ue(n).$implicit,o=he();return de(o.deleteForm(r.nameForm))}),se(8,"span",12),P()()()}if(t&2){let n=e.$implicit;Z(3),Jt(" ",n.nameForm," ")}}var yx=(()=>{let e=class e{constructor(i){this.router=i,this.forms=[],this.formService=L(op)}ngOnInit(){this.loadForms()}loadForms(){this.formService.getForms().subscribe(i=>{this.forms=i})}createNewForm(){this.router.navigate(["/form-builder","new"])}editForm(i){this.router.navigate(["/form-builder",i.nameForm])}deleteForm(i){ap("Sei sicuro di voler elimare la form?","Attenzione!",r=>{r&&this.formService.deleteForm(i).then(()=>{}).catch(o=>{console.error("Errore durante l'eliminazione del form:",o)})})}};e.\u0275fac=function(r){return new(r||e)(ye(Ks))},e.\u0275cmp=Fe({type:e,selectors:[["app-form-list"]],standalone:!0,features:[Ve],decls:10,vars:3,consts:[[3,"emittEventButton","caption","addButtonShow"],[1,"text"],[1,"mdi","mdi-database"],["role","alert","role","alert",1,"alert","alert-primary","d-flex","align-items-center"],[1,"mdi","mdi-lightbulb-alert-outline","me-2"],[1,"list-group","form-list"],["class","form-list-item list-group-item d-flex justify-content-between align-items-center",3,"dblclick",4,"ngFor","ngForOf"],[1,"form-list-item","list-group-item","d-flex","justify-content-between","align-items-center",3,"dblclick"],[1,""],[1,"mdi","mdi-view-list-outline","mr-3"],[1,"btn","icon-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"mdi","mdi-close","del"]],template:function(r,o){r&1&&(N(0,"app-anagrafica-wrapper",0),ge("emittEventButton",function(){return o.createNewForm()}),N(1,"div",1)(2,"h2"),se(3,"span",2),Y(4," Elenco form"),P()(),N(5,"div",3),se(6,"span",4),Y(7," Elenco delle Form create nell'app "),P(),N(8,"ul",5),He(9,N$,9,1,"li",6),P()()),r&2&&(pe("caption","Lista dei Form")("addButtonShow",!0),Z(9),pe("ngForOf",o.forms))},dependencies:[It,ii,br],styles:[".form-list-item[_ngcontent-%COMP%]:hover{background-color:var(--bg-grey);cursor:pointer}"]});let t=e;return t})();var Sx=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(ye(ur),ye(Yt))},e.\u0275dir=lt({type:e});let t=e;return t})(),ob=(()=>{let e=class e extends Sx{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=xi(e)))(o||e)}})(),e.\u0275dir=lt({type:e,features:[bn]});let t=e;return t})(),pp=new W(""),P$={provide:pp,useExisting:ti(()=>sb),multi:!0},sb=(()=>{let e=class e extends ob{writeValue(i){this.setProperty("checked",i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=xi(e)))(o||e)}})(),e.\u0275dir=lt({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&ge("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[hr([P$]),bn]});let t=e;return t})(),k$={provide:pp,useExisting:ti(()=>ja),multi:!0};function F$(){let t=Oi()?Oi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var V$=new W(""),ja=(()=>{let e=class e extends Sx{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!F$())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(ye(ur),ye(Yt),ye(V$,8))},e.\u0275dir=lt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&ge("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[hr([k$]),bn]});let t=e;return t})();function L$(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var ab=new W(""),Mx=new W("");function B$(t){return L$(t.value)?{required:!0}:null}function vx(t){return null}function Ax(t){return t!=null}function xx(t){return _o(t)?Te(t):t}function Rx(t){let e={};return t.forEach(n=>{e=n!=null?q(q({},e),n):e}),Object.keys(e).length===0?null:e}function Ox(t,e){return e.map(n=>n(t))}function j$(t){return!t.validate}function Nx(t){return t.map(e=>j$(e)?e:n=>e.validate(n))}function U$(t){if(!t)return null;let e=t.filter(Ax);return e.length==0?null:function(n){return Rx(Ox(n,e))}}function cb(t){return t!=null?U$(Nx(t)):null}function $$(t){if(!t)return null;let e=t.filter(Ax);return e.length==0?null:function(n){let i=Ox(n,e).map(xx);return _m(i).pipe(K(Rx))}}function lb(t){return t!=null?$$(Nx(t)):null}function wx(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function G$(t){return t._rawValidators}function H$(t){return t._rawAsyncValidators}function rb(t){return t?Array.isArray(t)?t:[t]:[]}function lp(t,e){return Array.isArray(t)?t.includes(e):t===e}function bx(t,e){let n=rb(e);return rb(t).forEach(r=>{lp(n,r)||n.push(r)}),n}function Ex(t,e){return rb(e).filter(n=>!lp(t,n))}var up=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ba=class extends up{get formDirective(){return null}get path(){return null}},eu=class extends up{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},dp=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},z$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pQ=Oe(q({},z$),{"[class.ng-submitted]":"isSubmitted"}),mp=(()=>{let e=class e extends dp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(ye(eu,2))},e.\u0275dir=lt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&po("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[bn]});let t=e;return t})(),Px=(()=>{let e=class e extends dp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(ye(Ba,10))},e.\u0275dir=lt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&po("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[bn]});let t=e;return t})();var Jl="VALID",cp="INVALID",La="PENDING",Zl="DISABLED";function kx(t){return(gp(t)?t.validators:t)||null}function W$(t){return Array.isArray(t)?cb(t):t||null}function Fx(t,e){return(gp(e)?e.asyncValidators:t)||null}function q$(t){return Array.isArray(t)?lb(t):t||null}function gp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function K$(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new ie(1e3,"");if(!i[n])throw new ie(1001,"")}function Q$(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new ie(1002,"")})}var hp=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Jl}get invalid(){return this.status===cp}get pending(){return this.status==La}get disabled(){return this.status===Zl}get enabled(){return this.status!==Zl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(bx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ex(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ex(e,this._rawAsyncValidators))}hasValidator(e){return lp(this._rawValidators,e)}hasAsyncValidator(e){return lp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=La,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Zl,this.errors=null,this._forEachChild(i=>{i.disable(Oe(q({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Oe(q({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Jl,this._forEachChild(i=>{i.enable(Oe(q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Oe(q({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jl||this.status===La)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zl:Jl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=La,this._hasOwnPendingAsyncValidator=!0;let n=xx(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new De,this.statusChanges=new De}_calculateStatus(){return this._allControlsDisabled()?Zl:this.errors?cp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(La)?La:this._anyControlsHaveStatus(cp)?cp:Jl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=W$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=q$(this._rawAsyncValidators)}},fp=class extends hp{constructor(e,n,i){super(kx(n),Fx(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Q$(this,!0,e),Object.keys(e).forEach(i=>{K$(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var _p=new W("CallSetDisabledState",{providedIn:"root",factory:()=>yp}),yp="always";function Y$(t,e){return[...e.path,t]}function Vx(t,e,n=yp){Lx(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Z$(t,e),e3(t,e),X$(t,e),J$(t,e)}function Dx(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function J$(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Lx(t,e){let n=G$(t);e.validator!==null?t.setValidators(wx(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=H$(t);e.asyncValidator!==null?t.setAsyncValidators(wx(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Dx(e._rawValidators,r),Dx(e._rawAsyncValidators,r)}function Z$(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Bx(t,e)})}function X$(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Bx(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Bx(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function e3(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function t3(t,e){t==null,Lx(t,e)}function n3(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function i3(t){return Object.getPrototypeOf(t.constructor)===ob}function r3(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function o3(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===ja?n=o:i3(o)?i=o:r=o}),r||i||n||null}var s3={provide:Ba,useExisting:ti(()=>ub)},Xl=Promise.resolve(),ub=(()=>{let e=class e extends Ba{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new De,this.form=new fp({},cb(i),lb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Xl.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),Vx(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Xl.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Xl.then(()=>{let r=this._findContainer(i.path),o=new fp({});t3(o,i),r.registerControl(i.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Xl.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Xl.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,r3(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(ye(ab,10),ye(Mx,10),ye(_p,8))},e.\u0275dir=lt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&ge("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[Qt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[hr([s3]),bn]});let t=e;return t})();function Cx(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ix(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var a3=class extends hp{constructor(e=null,n,i){super(kx(n),Fx(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Ix(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ix(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var c3={provide:eu,useExisting:ti(()=>tu)},Tx=Promise.resolve(),tu=(()=>{let e=class e extends eu{constructor(i,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new a3,this._registered=!1,this.name="",this.update=new De,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=o3(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),n3(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Vx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){Tx.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&kc(r);Tx.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?Y$(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(ye(Ba,9),ye(ab,10),ye(Mx,10),ye(pp,10),ye(Ri,8),ye(_p,8))},e.\u0275dir=lt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Qt.None,"disabled","isDisabled"],model:[Qt.None,"ngModel","model"],options:[Qt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[hr([c3]),bn,ni]});let t=e;return t})(),jx=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=lt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),l3={provide:pp,useExisting:ti(()=>db),multi:!0},db=(()=>{let e=class e extends ob{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=xi(e)))(o||e)}})(),e.\u0275dir=lt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&ge("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[hr([l3]),bn]});let t=e;return t})();var u3=new W("");var d3=(()=>{let e=class e{constructor(){this._validator=vx}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):vx,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=lt({type:e,features:[ni]});let t=e;return t})();var h3={provide:ab,useExisting:ti(()=>hb),multi:!0};var hb=(()=>{let e=class e extends d3{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=kc,this.createValidator=i=>B$}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=xi(e)))(o||e)}})(),e.\u0275dir=lt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){r&2&&ks("required",o._enabled?"":null)},inputs:{required:"required"},features:[hr([h3]),bn]});let t=e;return t})();var Ux=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({});let t=e;return t})();var Ua=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:_p,useValue:i.callSetDisabledState??yp}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[Ux]});let t=e;return t})(),$x=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:u3,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:_p,useValue:i.callSetDisabledState??yp}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[Ux]});let t=e;return t})();var f3=["*"];var p3=["dialog"];var Hx={animation:!0,transitionTimerDelayMs:5},m3=(()=>{let e=class e{constructor(){this.animation=Hx.animation}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function g3(t){let{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t),i=parseFloat(e),r=parseFloat(n);return(i+r)*1e3}function zx(t){return typeof t=="string"}function fb(t){return t!=null}function _3(t){return t&&t.then}function Wx(t){return(t||document.body).getBoundingClientRect()}function y3(t){return e=>new ae(n=>{let i=s=>t.run(()=>n.next(s)),r=s=>t.run(()=>n.error(s)),o=()=>t.run(()=>n.complete());return e.subscribe({next:i,error:r,complete:o})})}var v3=()=>{},{transitionTimerDelayMs:w3}=Hx,vp=new Map,Jo=(t,e,n,i)=>{let r=i.context||{},o=vp.get(e);if(o)switch(i.runningTransition){case"continue":return bt;case"stop":t.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),vp.delete(e)}let s=n(e,i.animation,r)||v3;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return t.run(()=>s()),X(void 0).pipe(y3(t));let a=new ke,c=new ke,u=a.pipe(bm(!0));vp.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:r});let d=g3(e);return t.runOutsideAngular(()=>{let f=_n(e,"transitionend").pipe(Ut(u),Ze(({target:_})=>_===e)),m=ym(d+w3).pipe(Ut(u));vm(m,f,c).pipe(Ut(u)).subscribe(()=>{vp.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};var gb=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(gb||{});var aY=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||e()):!1})();var b3=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function qx(t){let e=Array.from(t.querySelectorAll(b3)).filter(n=>n.tabIndex!==-1);return[e[0],e[e.length-1]]}var E3=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{let r=_n(e,"focusin").pipe(Ut(n),K(o=>o.target));_n(e,"keydown").pipe(Ut(n),Ze(o=>o.which===gb.Tab),Xu(r)).subscribe(([o,s])=>{let[a,c]=qx(e);(s===a||s===e)&&o.shiftKey&&(c.focus(),o.preventDefault()),s===c&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&_n(e,"click").pipe(Ut(n),Xu(r),K(o=>o[1])).subscribe(o=>o.focus())})};var cY=new Date(1882,10,12),lY=new Date(2174,10,25);var uY=1e3*60*60*24;var _b=1080,D3=24*_b,C3=12*_b+793,dY=29*D3+C3,hY=11*_b+204;var I3=(()=>{let e=class e{constructor(){this._ngbConfig=L(m3),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$a=class{constructor(e,n,i){this.nodes=e,this.viewRef=n,this.componentRef=i}};var T3=(()=>{let e=class e{constructor(){this._document=L(Mt)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,o=r.style,{overflow:s,paddingRight:a}=o;if(i>0){let c=parseFloat(window.getComputedStyle(r).paddingRight);o.paddingRight=`${c+i}px`}return o.overflow="hidden",()=>{i>0&&(o.paddingRight=a),o.overflow=s}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),S3=(()=>{let e=class e{constructor(){this._nativeElement=L(Yt).nativeElement,this._zone=L(Ce)}ngOnInit(){this._zone.onStable.asObservable().pipe(nn(1)).subscribe(()=>{Jo(this._zone,this._nativeElement,(i,r)=>{r&&Wx(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Jo(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,o){r&2&&(Hd("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),po("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Ve],decls:0,vars:0,template:function(r,o){},encapsulation:2});let t=e;return t})(),wp=class{update(e){}close(e){}dismiss(e){}},M3=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],A3=["animation","backdropClass"],pb=class{_applyWindowOptions(e,n){M3.forEach(i=>{fb(n[i])&&(e[i]=n[i])})}_applyBackdropOptions(e,n){A3.forEach(i=>{fb(n[i])&&(e[i]=n[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Ut(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Ut(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,n,i,r){this._windowCmptRef=e,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new ke,this._dismissed=new ke,this._hidden=new ke,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let n=this._beforeDismiss();_3(n)?n.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):n!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():X(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),mc(e,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},mb=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(mb||{}),x3=(()=>{let e=class e{constructor(){this._document=L(Mt),this._elRef=L(Yt),this._zone=L(Ce),this._closed$=new ke,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new De,this.shown=new ke,this.hidden=new ke}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":zx(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(nn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,r={animation:this.animation,runningTransition:"stop"},o=Jo(this._zone,i,()=>i.classList.remove("show"),r),s=Jo(this._zone,this._dialogEl.nativeElement,()=>{},r),a=mc(o,s);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let i={animation:this.animation,runningTransition:"continue"},r=Jo(this._zone,this._elRef.nativeElement,(s,a)=>{a&&Wx(s),s.classList.add("show")},i),o=Jo(this._zone,this._dialogEl.nativeElement,()=>{},i);mc(r,o).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{_n(i,"keydown").pipe(Ut(this._closed$),Ze(o=>o.which===gb.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(mb.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let r=!1;_n(this._dialogEl.nativeElement,"mousedown").pipe(Ut(this._closed$),nt(()=>r=!1),je(()=>_n(i,"mouseup").pipe(Ut(this._closed$),nn(1))),Ze(({target:o})=>i===o)).subscribe(()=>{r=!0}),_n(i,"click").pipe(Ut(this._closed$)).subscribe(({target:o})=>{i===o&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!r&&this._zone.run(()=>this.dismiss(mb.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let r=i.querySelector("[ngbAutofocus]"),o=qx(i)[0];(r||o||i).focus()}}_restoreFocus(){let i=this._document.body,r=this._elWithFocus,o;r&&r.focus&&i.contains(r)?o=r:o=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Jo(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(r,o){if(r&1&&Fs(p3,7),r&2){let s;mo(s=go())&&(o._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,o){r&2&&(ks("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),Hd("modal d-block"+(o.windowClass?" "+o.windowClass:"")),po("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Ve],ngContentSelectors:f3,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,o){r&1&&(qd(),N(0,"div",1,0)(2,"div",2),Kd(3),P()()),r&2&&Hd("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let t=e;return t})(),R3=(()=>{let e=class e{constructor(){this._applicationRef=L(fr),this._injector=L(Bn),this._environmentInjector=L(Ot),this._document=L(Mt),this._scrollBar=L(T3),this._activeWindowCmptHasChanged=new ke,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new De;let i=L(Ce);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let r=this._windowCmpts[this._windowCmpts.length-1];E3(i,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,r,o){let s=o.container instanceof HTMLElement?o.container:fb(o.container)?this._document.querySelector(o.container):this._document.body;if(!s)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new wp;i=o.injector||i;let c=i.get(Ot,null)||this._environmentInjector,u=this._getContentRef(i,c,r,a,o),d=o.backdrop!==!1?this._attachBackdrop(s):void 0,f=this._attachWindowComponent(s,u.nodes),m=new pb(f,u,d,o.beforeDismiss);return this._registerModalRef(m),this._registerWindowCmpt(f),m.hidden.pipe(nn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=_=>{m.close(_)},a.dismiss=_=>{m.dismiss(_)},a.update=_=>{m.update(_)},m.update(o),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),d&&d.instance&&d.changeDetectorRef.detectChanges(),f.changeDetectorRef.detectChanges(),m}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(r=>r.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let r=eh(S3,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_attachWindowComponent(i,r){let o=eh(x3,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_getContentRef(i,r,o,s,a){return o?o instanceof Di?this._createFromTemplateRef(o,s):zx(o)?this._createFromString(o):this._createFromComponent(i,r,o,s,a):new $a([])}_createFromTemplateRef(i,r){let o={$implicit:r,close(a){r.close(a)},dismiss(a){r.dismiss(a)}},s=i.createEmbeddedView(o);return this._applicationRef.attachView(s),new $a([s.rootNodes],s)}_createFromString(i){let r=this._document.createTextNode(`${i}`);return new $a([[r]])}_createFromComponent(i,r,o,s,a){let c=Bn.create({providers:[{provide:wp,useValue:s}],parent:i}),u=eh(o,{environmentInjector:r,elementInjector:c}),d=u.location.nativeElement;return a.scrollable&&d.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new $a([[d]],u.hostView,u)}_setAriaHidden(i){let r=i.parentElement;r&&i!==this._document.body&&(Array.from(r.children).forEach(o=>{o!==i&&o.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,r)=>{i?r.setAttribute("aria-hidden",i):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let r=()=>{let o=this._modalRefs.indexOf(i);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(r,r)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let r=this._windowCmpts.indexOf(i);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yb=(()=>{let e=class e{constructor(){this._injector=L(Bn),this._modalStack=L(R3),this._config=L(I3)}open(i,r={}){let o=q(Oe(q({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._injector,i,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Kx=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({providers:[yb]});let t=e;return t})();var fY=new W("live announcer delay",{providedIn:"root",factory:()=>100});function N3(t,e){t&1&&(N(0,"div",29),Y(1,"*Nome obbligatorio"),P())}function P3(t,e){t&1&&(N(0,"div",29),Y(1,"*Label obbligatoria"),P())}function k3(t,e){t&1&&(N(0,"div",29),Y(1,"displayExp obbligatorio"),P())}function F3(t,e){t&1&&(N(0,"div",29),Y(1,"valueExp obbligatorio"),P())}function V3(t,e){if(t&1){let n=Dt();N(0,"tr",45),ge("click",function(){let r=ue(n).$implicit,o=he(3);return de(o.onOptionClick(r))}),N(1,"td"),Y(2),P(),N(3,"td"),Y(4),P(),N(5,"td"),Y(6),P(),N(7,"td")(8,"button",45),ge("click",function(){let r=ue(n).index,o=he(3);return de(o.removeOption(r))}),Y(9,"Rimuovi"),P()()()}if(t&2){let n=e.$implicit,i=he(3);Z(2),Jt(" ",n[i.formField.selectOptions.valueExp]," "),Z(2),Jt(" ",n[i.formField.selectOptions.displayExp]," "),Z(2),Jt(" ",n.parent," ")}}function L3(t,e){if(t&1){let n=Dt();N(0,"table",38)(1,"thead")(2,"tr")(3,"td"),Y(4),P(),N(5,"td"),Y(6),P(),N(7,"td"),Y(8,"Parent"),P(),N(9,"td"),Y(10,"Azioni"),P()()(),N(11,"tbody")(12,"tr")(13,"td")(14,"input",39),mt("ngModelChange",function(r){ue(n);let o=he(2);return Ct(o.newOption[o.formField.selectOptions.valueExp],r)||(o.newOption[o.formField.selectOptions.valueExp]=r),de(r)}),P()(),N(15,"td")(16,"input",40),mt("ngModelChange",function(r){ue(n);let o=he(2);return Ct(o.newOption[o.formField.selectOptions.displayExp],r)||(o.newOption[o.formField.selectOptions.displayExp]=r),de(r)}),P()(),N(17,"td")(18,"input",41),mt("ngModelChange",function(r){ue(n);let o=he(2);return Ct(o.newOption.parent,r)||(o.newOption.parent=r),de(r)}),P()(),N(19,"td",42)(20,"button",43),ge("click",function(){ue(n);let r=he(2);return de(r.addOption())}),se(21,"span",28),P()()(),He(22,V3,10,3,"tr",44),P()()}if(t&2){let n=he(2);Z(4),$n(n.formField.selectOptions.valueExp),Z(2),$n(n.formField.selectOptions.displayExp),Z(8),pe("name",n.formField.selectOptions.valueExp),pt("ngModel",n.newOption[n.formField.selectOptions.valueExp]),Z(2),pe("name",n.formField.selectOptions.displayExp),pt("ngModel",n.newOption[n.formField.selectOptions.displayExp]),Z(2),pt("ngModel",n.newOption.parent),Z(4),pe("ngForOf",n.formField.selectOptions.options)}}function B3(t,e){if(t&1){let n=Dt();N(0,"div",30)(1,"div",7)(2,"label",8),Y(3,"Multiple"),P(),N(4,"div",18)(5,"input",31),mt("ngModelChange",function(r){ue(n);let o=he();return Ct(o.formField.selectOptions.multiple,r)||(o.formField.selectOptions.multiple=r),de(r)}),P(),N(6,"label",32),Y(7,"Select tipo multicheck"),P()()(),N(8,"div",7)(9,"label",8),Y(10,"Parent ID"),P(),N(11,"div",10)(12,"input",33),mt("ngModelChange",function(r){ue(n);let o=he();return Ct(o.formField.selectOptions.parent,r)||(o.formField.selectOptions.parent=r),de(r)}),P()()(),N(13,"div",7)(14,"label",8),Y(15,"Display Expression "),N(16,"span",9),Y(17,"Richiesto"),P()(),N(18,"div",10)(19,"input",34,3),mt("ngModelChange",function(r){ue(n);let o=he();return Ct(o.formField.selectOptions.displayExp,r)||(o.formField.selectOptions.displayExp=r),de(r)}),P()(),He(21,k3,2,0,"div",12),P(),N(22,"div",7)(23,"label",8),Y(24,"Value Expression "),N(25,"span",9),Y(26,"Richiesto"),P()(),N(27,"div",10)(28,"input",35,4),mt("ngModelChange",function(r){ue(n);let o=he();return Ct(o.formField.selectOptions.valueExp,r)||(o.formField.selectOptions.valueExp=r),de(r)}),P()(),He(30,F3,2,0,"div",12),P(),N(31,"div",36),He(32,L3,23,8,"table",37),P()()}if(t&2){let n=dr(20),i=dr(29),r=he();Z(5),pt("ngModel",r.formField.selectOptions.multiple),Z(7),pt("ngModel",r.formField.selectOptions.parent),Z(7),pt("ngModel",r.formField.selectOptions.displayExp),Z(2),pe("ngIf",n.invalid&&n.touched),Z(7),pt("ngModel",r.formField.selectOptions.valueExp),Z(2),pe("ngIf",i.invalid&&i.touched),Z(2),pe("ngIf",r.formField.selectOptions.valueExp&&r.formField.selectOptions.displayExp)}}var Qx=(()=>{let e=class e{constructor(){this.outPutProperties=new De,this.showSelectOption=!1,this.newOption={},this.optionSelIndex=-1}ngOnInit(){if(this.formField.type==="selectBox"){this.showSelectOption=!0;let i;typeof this.formField.selectOptions<"u"?(i=this.formField.selectOptions,this.selectOptions={multiple:i.multiple,displayExp:i.displayExp,valueExp:i.valueExp,options:i.options,parent:i.parent}):(this.selectOptions={multiple:!1,displayExp:"",valueExp:"",options:[],parent:""},this.formField.selectOptions=this.selectOptions)}}addOption(){let i=this.formField.selectOptions.valueExp,r=this.formField.selectOptions.displayExp;!this.newOption[i]||!this.newOption[r]||(this.optionSelIndex>=0?this.selectOptions.options[this.optionSelIndex]=this.newOption:this.selectOptions.options.push(this.newOption),this.formField.selectOptions&&(this.newOption={[this.formField.selectOptions.valueExp]:"",[this.formField.selectOptions?.displayExp]:"",parent:""}),this.optionSelIndex=-1)}onOptionClick(i){let r=this.formField.selectOptions.valueExp,o=this.formField.selectOptions.displayExp;this.newOption=i,this.formField.selectOptions?.options&&(this.optionSelIndex=this.formField.selectOptions?.options.findIndex(s=>s==i))}removeOption(i){this.selectOptions.options.splice(i,1)}saveProperties(i){if(!this.formPrsValidate(i))return;let o={name:"saveProperties",formField:this.formField};this.outPutProperties.emit(o)}closeProperties(i){if(i.valid)ap("Sei sicuro di voler abbandonare?","Attenzione!",o=>{if(o){let s={name:"closeProperties",formField:this.formField};this.outPutProperties.emit(s)}});else{let o={name:"closeProperties",formField:this.formField};this.outPutProperties.emit(o)}}addValidation(i){i.validation.push({type:"",value:""})}formPrsValidate(i){return i.valid?this.showSelectOption&&this.formField.selectOptions&&this.formField.selectOptions.options.length==0?(alert("Mancano i campi le options della select"),!1):!0:(alert("Mancano i campi obbligatori"),this.markFormGroupTouched(i),!1)}markFormGroupTouched(i){Object.keys(i.controls).forEach(r=>{i.control.get(r)?.markAsTouched({onlySelf:!0})})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["app-element"]],inputs:{formField:"formField"},outputs:{outPutProperties:"outPutProperties"},standalone:!0,features:[Ve],decls:67,vars:12,consts:[["elementForm","ngForm"],["name","ngModel"],["label","ngModel"],["displayExp","ngModel"],["valueExp","ngModel"],[1,"modal-body","form-container"],[1,""],[1,"row","mt-3","mb-3"],[1,"col-sm-3","col-form-label","font-medium"],[1,"badge","bg-secondary"],[1,"col-sm-9"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],["type","text","name","label","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","placeholder",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","cssClass",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","htmlId",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","maxLength",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-sm-9","form-check"],["id","required","type","checkbox","name","required",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","required",1,"form-check-label"],["for","min",1,"col-sm-3","col-form-label","font-medium"],["id","min","type","number","name","min",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","max",1,"form-control",3,"ngModelChange","ngModel"],["class","row mt-3 mb-3 selectbox-group",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","ana-button",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"mdi","mdi-content-save-outline"],[1,"text-danger"],[1,"row","mt-3","mb-3","selectbox-group"],["id","multiple","name","multiple","type","checkbox",1,"form-check-input","custom-checkbox",3,"ngModelChange","ngModel"],["for","multiple",1,"form-check-label"],["type","text","name","parent",1,"form-control",3,"ngModelChange","ngModel"],["type","text","required","","name","displayExp",1,"form-control",3,"ngModelChange","ngModel"],["type","text","required","","name","valueExp",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3","mb-3"],["class","table table-sm ",4,"ngIf"],[1,"table","table-sm"],["type","text","placeholder","Nuovo Display",1,"form-control",3,"ngModelChange","name","ngModel"],["type","text","placeholder","Nuovo Value",1,"form-control",3,"ngModelChange","name","ngModel"],["type","text","name","parentT","placeholder","Nuovo Parent",1,"form-control",3,"ngModelChange","ngModel"],[1,"action-cell"],[1,"icon-button","btn","button-in-cell",3,"click"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(r,o){if(r&1){let s=Dt();N(0,"div",5)(1,"form",null,0)(3,"div",6)(4,"div",7)(5,"label",8),Y(6,"Nome campo "),N(7,"span",9),Y(8,"Richiesto"),P()(),N(9,"div",10)(10,"input",11,1),mt("ngModelChange",function(c){return ue(s),Ct(o.formField.name,c)||(o.formField.name=c),de(c)}),P()(),He(12,N3,2,0,"div",12),P(),N(13,"div",7)(14,"label",8),Y(15,"Label "),N(16,"span",9),Y(17,"Richiesto"),P()(),N(18,"div",10)(19,"input",13,2),mt("ngModelChange",function(c){return ue(s),Ct(o.formField.label,c)||(o.formField.label=c),de(c)}),P()(),He(21,P3,2,0,"div",12),P(),N(22,"div",7)(23,"label",8),Y(24,"Placeholder"),P(),N(25,"div",10)(26,"input",14),mt("ngModelChange",function(c){return ue(s),Ct(o.formField.placeholder,c)||(o.formField.placeholder=c),de(c)}),P()()(),N(27,"div",7)(28,"label",8),Y(29,"CSS Class"),P(),N(30,"div",10)(31,"input",15),mt("ngModelChange",function(c){return ue(s),Ct(o.formField.cssClass,c)||(o.formField.cssClass=c),de(c)}),P()()(),N(32,"div",7)(33,"label",8),Y(34,"HTML ID"),P(),N(35,"div",10)(36,"input",16),mt("ngModelChange",function(c){return ue(s),Ct(o.formField.htmlId,c)||(o.formField.htmlId=c),de(c)}),P()()(),N(37,"div",7)(38,"label",8),Y(39,"Max Length"),P(),N(40,"div",10)(41,"input",17),mt("ngModelChange",function(c){return ue(s),Ct(o.formField.maxLength,c)||(o.formField.maxLength=c),de(c)}),P()()(),N(42,"div",7)(43,"label",8),Y(44,"Required"),P(),N(45,"div",18)(46,"input",19),mt("ngModelChange",function(c){return ue(s),Ct(o.formField.required,c)||(o.formField.required=c),de(c)}),P(),N(47,"label",20),Y(48," Campo Richiesto "),P()()(),N(49,"div",7)(50,"label",21),Y(51,"Min Value"),P(),N(52,"div",10)(53,"input",22),mt("ngModelChange",function(c){return ue(s),Ct(o.formField.min,c)||(o.formField.min=c),de(c)}),P()()(),N(54,"div",7)(55,"label",8),Y(56,"Max Value"),P(),N(57,"div",10)(58,"input",23),mt("ngModelChange",function(c){return ue(s),Ct(o.formField.max,c)||(o.formField.max=c),de(c)}),P()()()(),He(59,B3,33,7,"div",24),P()(),N(60,"div",25)(61,"button",26),ge("click",function(){ue(s);let c=dr(2);return de(o.closeProperties(c))}),se(62,"span",27),Y(63,"Chiudi"),P(),N(64,"button",26),ge("click",function(){ue(s);let c=dr(2);return de(o.saveProperties(c))}),se(65,"span",28),Y(66,"Salva"),P()()}if(r&2){let s=dr(11),a=dr(20);Z(10),pt("ngModel",o.formField.name),Z(2),pe("ngIf",s.invalid&&s.touched),Z(7),pt("ngModel",o.formField.label),Z(2),pe("ngIf",a.invalid&&a.touched),Z(5),pt("ngModel",o.formField.placeholder),Z(5),pt("ngModel",o.formField.cssClass),Z(5),pt("ngModel",o.formField.htmlId),Z(5),pt("ngModel",o.formField.maxLength),Z(5),pt("ngModel",o.formField.required),Z(7),pt("ngModel",o.formField.min),Z(5),pt("ngModel",o.formField.max),Z(),pe("ngIf",o.showSelectOption&&o.formField.selectOptions)}},dependencies:[It,ii,pr,Ua,jx,ja,db,sb,mp,Px,hb,tu,ub,$x],styles:[".disabled-el[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}.form-container[_ngcontent-%COMP%]{max-height:750px;overflow-y:scroll}.form-container[_ngcontent-%COMP%]   .col-form-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.form-container[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{margin-left:-.6rem;margin-right:.5rem}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--bg-grey);padding:.6rem .5rem}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-cell[_ngcontent-%COMP%]{text-align:center}.form-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-in-cell[_ngcontent-%COMP%]{font-size:1.4rem;padding:0}"]});let t=e;return t})();var vb=[{name:"ElementComponent",component:Qx}];var Ga=(()=>{let e=class e{constructor(){this.dataFromComponent=new De,this._popupsSet=new ct([]),this.popupsSet=this._popupsSet.asObservable(),this.currentPopupsSet=[],this._outputComponent=new ct([]),this.outputComponent=this._outputComponent.asObservable()}getComponentByName(i){return vb.find(o=>o.name===i).component||null}isComponentExistByName(i){return!!vb.find(o=>o.name===i).name}setNewPopUp(i,r,o,s="800",a,c,u=!1,d=!1,f="",m="center",_=!1){if(i||(i=Math.random().toString().replace("0.","")),typeof r>"u"||!i)return;let D=this.currentPopupsSet.findIndex(T=>T.id==i&&T.componentName==r);if(D<0){let T={componentName:r,dataToSend:o,instancedData:c,popUpWidth:s,showCaptionFooter:u,showCaptionHeader:d,accessoringData:a,action:"added",title:f,position:m,id:i,isClosablePopUp:_};this.currentPopupsSet.push(T),this._popupsSet.next(this.currentPopupsSet)}else this.currentPopupsSet[D].dataToSend=o,this.currentPopupsSet[D].action="update",this.currentPopupsSet[D].showCaptionFooter=u,this.currentPopupsSet[D].showCaptionHeader=d,this._popupsSet.next(this.currentPopupsSet)}setPopUps(i){this.currentPopupsSet=i}destroyCurrentOpenPopUp(i){let r=this.currentPopupsSet.findIndex(o=>o.componentName==i);if(r>=0){this.currentPopupsSet[r].action="remove";try{}catch(o){console.warn(o)}setTimeout(()=>{this._popupsSet.next(this.currentPopupsSet),this._outputComponent.next([]),this.currentPopupsSet.splice(r,1)},500)}}destroyCurrentOpenPopUpByGuid(i){let r=this.currentPopupsSet.findIndex(o=>o.id==i||o.componentName==i);if(r>=0){this.currentPopupsSet[r].action="remove";try{return this._popupsSet.next(this.currentPopupsSet),this.currentPopupsSet.splice(r,1),!0}catch(o){return console.warn(o),!1}}return!1}destroyOutputComponent(){this._outputComponent.next([])}destroyCurrentOpenPopUps(){this.currentPopupsSet=[],this._popupsSet.next([])}setOutputComponent(i){this._outputComponent.next(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function U3(t,e){if(t&1){let n=Dt();N(0,"li",19),ge("click",function(r){let o=ue(n).index,s=he();return de(s.onAdd(r,o))}),se(1,"span",20),Y(2),N(3,"div")(4,"button",21),ge("click",function(r){let o=ue(n).index,s=he();return de(s.onAdd(r,o))}),se(5,"span",22),P()()()}if(t&2){let n=e.$implicit,i=he();Z(),pe("ngClass",i.elementIcons[n.type]),Z(),Jt(" ",n.label," ")}}function $3(t,e){if(t&1){let n=Dt();N(0,"div",23),ge("click",function(){let r=ue(n),o=r.$implicit,s=r.index,a=he();return de(a.openPropertiesModal(o,s))}),N(1,"div",24)(2,"span"),Y(3),P()(),N(4,"button",25),ge("click",function(){let r=ue(n).index,o=he();return de(o.onRemove(r))}),se(5,"span",26),P()()}if(t&2){let n=e.$implicit;Z(3),$n(n.label)}}var Yx=(()=>{let e=class e{constructor(i,r,o){this.modalService=i,this.route=r,this.router=o,this.elements=[{type:"textBox",label:"Text Box"},{type:"selectBox",label:"Select Box"},{type:"radio",label:"Radio Button"},{type:"checkbox",label:"Checkbox"},{type:"textArea",label:"Textarea"}],this.elementIcons={textBox:"mdi mdi-signature-text",selectBox:"mdi mdi-form-select",radio:"mdi mdi-radiobox-marked",checkbox:"mdi mdi-checkbox-marked-outline",textArea:"mdi mdi-form-textarea"},this.formElements=[],this.propertiesModal=L(Ga),this.formId=null,this.formTitle=this.formId?"Modifica Form":"Crea Nuovo Form",this.formName="",this.formService=L(op)}ngOnInit(){this.route.paramMap.subscribe(i=>{this.formId=i.get("id"),this.formId&&(this.formTitle="Modifica Form",this.loadForm(this.formId))})}loadForm(i){this.formService.getFormById(i).subscribe(r=>{r&&(this.formName=r.nameForm,this.formElements=JSON.parse(r.json))})}onAdd(i,r){i.preventDefault(),i.stopPropagation();let o=this.elements[r];this.formElements.push(Oe(q({},o),{validation:[]}));let s=this.formElements.length-1;this.openPropertiesModal(o,s)}onRemove(i){this.formElements.splice(i,1)}openPropertiesModal(i,r){this.selectedElement=q({},i);let o=Math.random().toString().replace("0.",""),s={formField:this.selectedElement};this.propertiesModal.setNewPopUp(o,"ElementComponent",null,800,null,s,!1,!0,"Gestione propriet\xE0","",!1),this.propertiesModal.outputComponent.subscribe(a=>{a.guid==o&&a.name=="saveProperties"&&r>=0&&(this.formElements[r]=a.formField,this.propertiesModal.destroyCurrentOpenPopUpByGuid(o),this.selectedElement={}),a.guid==o&&a.name=="closeProperties"&&this.propertiesModal.destroyCurrentOpenPopUpByGuid(o)})}addAttribute(i){let r={name:"",value:""};i.attributes.push(r)}saveForm(i){let r=JSON.stringify(this.formElements);console.log("saveForm",r);let o=this.formId==="new"?Math.random().toString().replace("0.",""):this.formId,s=this.formId=="new"?this.formName.trim():this.formId,a={nameForm:s,json:r,id:o};this.formService.saveForm(s,a).then(()=>{sp("Form salvato con successo","Attenzione!"),this.router.navigate(["/form-list"])}).catch(c=>{console.error("Errore durante il salvataggio del form:",c)})}returnPrev(){this.router.navigate(["/form-list"])}};e.\u0275fac=function(r){return new(r||e)(ye(yb),ye(yr),ye(Ks))},e.\u0275cmp=Fe({type:e,selectors:[["app-form-builder"]],standalone:!0,features:[Ve],decls:29,vars:6,consts:[[3,"caption"],[1,"text","border-bottom"],[1,"mdi","mdi-chevron-right"],[1,"row","mt-3","mb-3"],["for","formName",1,"col-sm-2","col-form-label","font-medium"],[1,"badge","bg-secondary"],[1,"col-sm-10"],["id","formName","type","text","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text","pt-3","mt-3"],[1,"content-formbuilder","form-view"],[1,"list-group","elements"],["class","list-group-item d-flex justify-content-between align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"form-view"],[1,"row"],["class","element",3,"click",4,"ngFor","ngForOf"],[1,"formbuilder-button","gap-3","mt-1"],[1,"ana-button","btn",3,"click"],[1,"mdi","mdi-keyboard-return"],[1,"mdi","mdi-content-save-outline"],[1,"list-group-item","d-flex","justify-content-between","align-items-center",3,"click"],[1,"iconE",3,"ngClass"],[1,"btn","icon-button","ms-2",3,"click"],[1,"mdi","mdi-plus-circle-outline"],[1,"element",3,"click"],[1,"form-element","mb-3"],[1,"icon-button","ms-2","removeEl",3,"click"],[1,"mdi","mdi-close"]],template:function(r,o){r&1&&(N(0,"app-anagrafica-wrapper",0)(1,"div",1)(2,"h2"),se(3,"span",2),Y(4),P()(),N(5,"div",3)(6,"label",4),Y(7,"Form Name "),N(8,"span",5),Y(9,"Richiesto"),P()(),N(10,"div",6)(11,"input",7),mt("ngModelChange",function(a){return Ct(o.formName,a)||(o.formName=a),a}),P()()(),N(12,"div",8)(13,"h3"),se(14,"span",2),Y(15,"Anteprima form"),P()(),N(16,"div",9)(17,"ul",10),He(18,U3,6,2,"li",11),P(),N(19,"div",12)(20,"div",13),He(21,$3,6,1,"div",14),P()()(),N(22,"div",15)(23,"button",16),ge("click",function(){return o.returnPrev()}),se(24,"span",17),Y(25," Indietro "),P(),N(26,"button",16),ge("click",function(){return o.saveForm(o.formName)}),se(27,"span",18),Y(28," Salva "),P()()()),r&2&&(pe("caption",o.formTitle),Z(4),Pc("",o.formTitle," ",o.formName,""),Z(7),pt("ngModel",o.formName),Z(7),pe("ngForOf",o.elements),Z(3),pe("ngForOf",o.formElements))},dependencies:[It,Ls,ii,br,Ua,ja,mp,tu,Kx],styles:[".content-formbuilder[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:normal;align-items:normal;align-content:normal}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{flex:0 1 auto}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:.3rem;text-align:start}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .iconE[_ngcontent-%COMP%]{margin-right:.4rem;line-height:.5rem}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;line-height:.5rem}.content-formbuilder[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--bg-grey)}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]{flex:1 0 auto;margin-left:10px}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]{position:relative;display:flex;flex:1 0 auto;justify-content:space-between;align-content:center}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]{border:1px solid var(--border_color);width:100%;padding:.65rem;border-radius:.375rem}.content-formbuilder[_ngcontent-%COMP%]   .form-view[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .removeEl[_ngcontent-%COMP%]{color:red;font-size:1rem}.content-formbuilder[_ngcontent-%COMP%]   .no-evt[_ngcontent-%COMP%]{pointer-events:none}.formbuilder-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:end}"]});let t=e;return t})();var G3=new W("angularfire2.functions.origin"),H3=new W("angularfire2.functions.region"),wb=new W("angularfire2.functions.use-emulator"),bb=(()=>{class t{httpsCallable;constructor(n,i,r,o,s,a,c,u){let d=c,f=X(void 0).pipe(Wt(o.outsideAngular),je(()=>import("./chunk-UGZKZQLK.js")),K(()=>Co(n,r,i)),K(m=>Ys(`${m.name}.functions.${s||a}`,"AngularFireFunctions",m.name,()=>{let _;if(s&&a)throw new Error("REGION and ORIGIN can't be used at the same time.");return _=m.functions(s||a||void 0),d&&_.useEmulator(...d),_},[s,a,d])),gs({bufferSize:1,refCount:!1}));return this.httpsCallable=(m,_)=>D=>Te(f).pipe(Wt(o.insideAngular),je(T=>T.httpsCallable(m,_)(D)),K(T=>T.data)),Nh(this,f,r)}static \u0275fac=function(i){return new(i||t)(j(Dr),j(Cr,8),j(Ce),j(Do),j(H3,8),j(G3,8),j(wb,8),j(ki,8))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),Jx=(()=>{class t{constructor(){xt.registerVersion("angularfire",Dn.full,"fn-compat")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ot({type:t});static \u0275inj=rt({providers:[bb]})}return t})();var Zx=(()=>{let e=class e{constructor(){this.api=wr.BASE_API_URL,this.isLoginUser=!1,this.firestore=L(Yl),this.httpClient=L(F_),this.auth=Jp(L(Qs)),this.functions=L(bb)}get httpOptions(){return{headers:new Pi().set("Authorization","Bearer "+this.token).set("Content-Type","application/x-www-form-urlencoded; charset=UTF-8").set("Content-Type","application/json; charset=utf-8"),params:new ri}}get InfoUtenteConnesso(){let i=sessionStorage.getItem("utenteConnesso")??"";return JSON.parse(i)}getUsers(){return this.firestore.collection("users").valueChanges().pipe(K(i=>i))}isLoggedUser(){return this.isExistsUsers().pipe(K(i=>i&&i.id&&!i.sospeso))}isExistsUsers(){let i=wr.BASE_API_URL+"Account/GetUserInfo",r=this.httpOptions;return this.httpClient.get(i,r)}loginUser(i){let r=wr.BASE_API_URL+"Token/login",o=this.httpOptions;return this.httpClient.post(r,i,o)}LogOut(){return x(this,null,function*(){let i=wr.BASE_API_URL+"Token/Logout",r=this.httpOptions,o=this.httpClient.get(i,r);return yield Hu(o)})}clearSessionStorage(){if(sessionStorage.length>0)for(let r in sessionStorage)sessionStorage.removeItem(r)}set token(i){sessionStorage.setItem("token",i),this.sessionToken=i}get token(){return sessionStorage.getItem("token")??""}sendPasswordFirebase(i){return x(this,null,function*(){try{return yield Yp(this.auth,i),!0}catch{return!1}})}disabledUsersFirebase(i){return x(this,null,function*(){let r=this.functions.httpsCallable("disableUser");try{let o=yield gm(r({uid:i}));return console.log(o.data.message),!0}catch(o){return console.error("Errore nella disabilitazione dell'utente:",o),!1}})}RecuperaPassword(i){return x(this,null,function*(){let r=wr.BASE_API_URL+"Account/RecuperaPassword?username="+i,o=this.httpOptions,s=this.httpClient.get(r,o);return yield Hu(s)})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function z3(t,e){if(t&1){let n=Dt();N(0,"li",3),ge("dblclick",function(){let r=ue(n).$implicit,o=he();return de(o.editUser(r))}),N(1,"div",4)(2,"span",5),se(3,"img",6),P(),Y(4),P(),N(5,"div",7)(6,"button",8),se(7,"span",9),P(),N(8,"ul",10)(9,"li")(10,"button",11),ge("click",function(){let r=ue(n).$implicit,o=he();return de(o.editUser(r))}),se(11,"span",12),Y(12," Modifica "),P()(),N(13,"li")(14,"button",11),ge("click",function(){let r=ue(n).$implicit,o=he();return de(o.deleteUser(r))}),se(15,"span",13),Y(16," Elimina "),P()(),N(17,"li")(18,"button",11),ge("click",function(){let r=ue(n).$implicit,o=he();return de(o.disableUser(r.uid))}),se(19,"span",14),Y(20," Disabilita "),P()(),N(21,"li")(22,"button",11),ge("click",function(){let r=ue(n).$implicit,o=he();return de(o.sendPasswordReset(r))}),se(23,"span",15),Y(24," Invia Password "),P()()()()()}if(t&2){let n=e.$implicit;Z(3),pe("src",n.photoURL||"https://ionicframework.com/docs/img/demos/avatar.svg",nC)("alt",n.name),Z(),Pc(" ",n.displayName||n.name," ",n.email," ")}}var Xx=(()=>{let e=class e{constructor(){this.userService=L(Zx),this.subtitle="Elenco utenti registrati in app"}ngOnInit(){this.users$=this.userService.getUsers(),this.users$.subscribe(i=>{this.users=i})}deleteUser(i){throw new Error("Method not implemented.")}editUser(i){throw new Error("Method not implemented.")}createNewuser(){throw new Error("Method not implemented.")}sendPasswordReset(i){return x(this,null,function*(){(yield this.userService.sendPasswordFirebase(i.email))&&sp(`Email di reset inviata a ${i.email}`,"Attenzione!")})}disableUser(i){throw this.userService.disabledUsersFirebase(i),new Error("Method not implemented.")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["app-users"]],standalone:!0,features:[Ve],decls:3,vars:5,consts:[[3,"emittEventButton","caption","subTitle","tip","addButtonShow"],[1,"list-group","form-list"],["class","form-list-item list-group-item d-flex justify-content-between align-items-center",3,"dblclick",4,"ngFor","ngForOf"],[1,"form-list-item","list-group-item","d-flex","justify-content-between","align-items-center",3,"dblclick"],[1,"profile-info"],[1,"img-thumbnail","profileImage"],[1,"",3,"src","alt"],[1,"dropdown"],[1,"btn","icon-button"],[1,"mdi","mdi-dots-vertical"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],[1,"btn","icon-button",3,"click"],[1,"mdi","mdi-pencil-outline"],[1,"mdi","mdi-close","del"],[1,"mdi","mdi-lock-off-outline"],[1,"mdi","mdi-lock-reset"]],template:function(r,o){r&1&&(N(0,"app-anagrafica-wrapper",0),ge("emittEventButton",function(){return o.createNewuser()}),N(1,"ul",1),He(2,z3,25,4,"li",2),P()()),r&2&&(pe("caption","Elenco Utenti")("subTitle",o.subtitle)("tip","Gestisci il profilo utente, resetta la password,sospendi....")("addButtonShow",!0),Z(2),pe("ngForOf",o.users))},dependencies:[It,ii,Ua,br],styles:[".profile-info[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:flex-start;align-items:center;flex-direction:row}.profile-info[_ngcontent-%COMP%]   .profileImage[_ngcontent-%COMP%]{height:50px;overflow:hidden;display:block;width:50px;position:relative;border-radius:900px;padding:0;margin-right:.333rem}.profile-info[_ngcontent-%COMP%]   .profileImage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;-o-object-fit:cover;object-fit:cover;top:0;width:100%;height:100%}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{display:none;right:0}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}"]});let t=e;return t})();var Eb=[{path:"dashboard",component:vT},{path:"utenti",component:Xx},{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"form-list",component:yx},{path:"form-builder/:id",component:Yx}],sX=Mh(Eb);var eR={providers:[Mh(Eb),{provide:wb,useValue:["localhost",4e3]},Ug(OT.initializeApp(wr.firebase),gx,NT,Jx,yT,SI)]};var tR=(()=>{let e=class e{constructor(){}ngOnInit(){this.dateCopy=new Date}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["app-footer"]],standalone:!0,features:[Ve],decls:11,vars:1,consts:[["id","footer",1,"footer"],[1,"content"],["src","../../../assets/images/logo_sx.png",1,"sx-logo"],[1,"text","indent"],[1,""],[1,"text","text-end","px-2"]],template:function(r,o){r&1&&(N(0,"footer",0)(1,"div",1),se(2,"img",2),N(3,"div",3)(4,"h2",4),Y(5),P()(),N(6,"div",5)(7,"p")(8,"span"),Y(9,"Partita IVA: "),P(),se(10,"span"),P()()()()),r&2&&(Z(5),Jt("\xA9 ",o.dateCopy," Come mi vesto srl "))},styles:[".footer[_ngcontent-%COMP%]{background-color:var(--primary);width:100%;padding:5px;min-height:var(--height_footer)}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{max-width:var(--width_container);margin:0 auto;color:#fff;display:flex;flex-direction:row;flex-wrap:nowrap;align-content:center;justify-content:space-between;align-items:center}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#fff;width:100%;padding-left:40px}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400;margin:0;text-align:left;font-size:10px;color:#fff}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 2px;font-size:12px}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .sx-logo[_ngcontent-%COMP%]{margin-top:1px;width:fit-content;height:40px;display:block}.footer[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dx-logo[_ngcontent-%COMP%]{width:fit-content;margin-top:10px;height:25px;display:block}"]});let t=e;return t})();var nR=(()=>{let e=class e{constructor(){}ngOnInit(){this.renderHeader()}renderHeader(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["app-header"]],standalone:!0,features:[Ve],decls:16,vars:0,consts:[["id","header",1,"header"],[1,"header-container"],[1,"item-left"],[1,"item-center"],["aria-label","breadcrumb",1,"itm-container","justify-content-center"],[1,"nav"],[1,"nav-item"],["href","/",1,"nav-link","active"],["href","/form-list",1,"nav-link"],["href","/utenti",1,"nav-link"],[1,"item-right"]],template:function(r,o){r&1&&(N(0,"header",0)(1,"div",1),se(2,"div",2),N(3,"div",3)(4,"nav",4)(5,"ul",5)(6,"li",6)(7,"a",7),Y(8,"Home"),P()(),N(9,"li",6)(10,"a",8),Y(11,"Gestione form"),P()(),N(12,"li",6)(13,"a",9),Y(14,"Gestione Utenti"),P()()()()(),se(15,"div",10),P()())},styles:[".header[_ngcontent-%COMP%]{background-color:var(--primary);height:65px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{max-width:var(--width_container);max-height:var(--header_height);margin:auto;display:flex;flex-direction:row;flex-wrap:wrap;align-content:center;justify-content:space-between;align-items:center;color:var(--link-nav)}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-right[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .item-center[_ngcontent-%COMP%]   .itm-container[_ngcontent-%COMP%]{margin:0 5px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{padding-left:10px;width:150px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo-image[_ngcontent-%COMP%]{max-width:100%}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:var(--link-nav)!important}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .img-profile[_ngcontent-%COMP%]{max-width:100%;width:30px;height:30px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{position:absolute;top:35px;left:-190px;z-index:10;margin:0;padding:10px 5px;min-width:226px;background-color:#c8ced6;border:1px solid #c8ced6;box-shadow:0 16px 18px #0404071a;border-radius:4px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{display:block;color:var(--blueSoft)!important;text-align:left;line-height:22px;padding:6px 7px;text-transform:none;font-size:13px;letter-spacing:normal;position:relative;display:inline-block}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:9px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:12px;display:inline-block}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active, .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:visited, .header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .menu-profile[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{background:transparent}"]});let t=e;return t})();var W3=["containerComponent"],q3=(t,e)=>({display:t,"z-index":e}),K3=t=>({"position-bottom":t}),Q3=(t,e)=>({"max-width":t,width:e});function Y3(t,e){if(t&1){let n=Dt();N(0,"app-caption",6),ge("emettiChiusura",function(r){ue(n);let o=he();return de(o.emettiChiusura(r))}),P()}if(t&2){let n=he();pe("caption",n.titlePopUp)("isClosable",n.isClosablePopUp)("cssClass","modal")("help","")}}function J3(t,e){if(t&1){let n=Dt();N(0,"app-caption",7),ge("emettiChiusura",function(r){ue(n);let o=he();return de(o.emettiChiusura(r))}),P()}if(t&2){let n=he();pe("isFooter",n.showCaptionFooter)}}var iR=(()=>{let e=class e{constructor(i){this.popUpService=i,this.outputEmit=new De,this.showCaptionHeader=!1,this.showCaptionFooter=!1,this.isPanelVisible=!1,this.zIndex=500,this.popUpWidth=null,this.isClosablePopUp=!1,this.position="center"}ngOnChanges(i){this.infoPopUp.popUpWidth&&(this.popUpWidth=this.infoPopUp.popUpWidth+"px"),this.infoPopUp.showCaptionHeader&&(this.showCaptionHeader=this.infoPopUp.showCaptionHeader),this.infoPopUp.showCaptionFooter&&(this.showCaptionFooter=this.infoPopUp.showCaptionFooter),this.infoPopUp.title&&(this.titlePopUp=this.infoPopUp.title),this.infoPopUp.class&&(this.classFade=this.infoPopUp.class)}get getMaxZIndex(){let i=document.querySelectorAll(".modal"),r=[];return i.forEach(o=>{o.classList.contains("modal-dialog")||r.push(parseFloat(window.getComputedStyle(o).zIndex))}),Math.max(...r);return Math.max(...Array.from(document.querySelectorAll("div.dx-overlay-content"),o=>parseFloat(window.getComputedStyle(o).zIndex)).filter(o=>!Number.isNaN(o)),0)}ngOnInit(){return x(this,null,function*(){this.isPanelVisible=!0,this.zIndexModalDialog=this.getMaxZIndex+1;let i=this.infoPopUp.componentName;this.accessoringData=this.infoPopUp.accessoringData,this.position=this.infoPopUp.position;let r=this.popUpService.getComponentByName(i),o=this.containerComponent.createComponent(r);o.instance.itemData=this.infoPopUp.dataToSend,o.instance.cssClass="modal-content ",this.componentName=i,this.idPopUp=this.infoPopUp.id,this.infoPopUp.popUpWidth&&(this.popUpWidth=this.infoPopUp.popUpWidth+"px"),this.infoPopUp.showCaptionHeader&&(this.showCaptionHeader=this.infoPopUp.showCaptionHeader),this.infoPopUp.showCaptionFooter&&(this.showCaptionFooter=this.infoPopUp.showCaptionFooter),this.infoPopUp.title&&(this.titlePopUp=this.infoPopUp.title),this.infoPopUp.class&&(this.classFade=this.infoPopUp.class),this.isClosablePopUp=typeof this.infoPopUp.isClosable<"u"?this.infoPopUp.isClosable:!1;let s=o.instance;if(typeof this.infoPopUp.instancedData<"u"){let a=this.infoPopUp.instancedData;for(let c in a)s[c]=a[c]}for(let a in s)o.instance[a]instanceof De&&o.instance[a].subscribe(c=>{try{let u;typeof c=="boolean"?(u={componentName:i,accessoringData:this.accessoringData,guid:this.idPopUp,name:a},c=u):(c.componentName=i,c.accessoringData=this.accessoringData,c.guid=this.idPopUp,typeof c.name>"u"&&(c.name=a))}catch{}finally{this.popUpService.setOutputComponent(c)}})})}ngAfterViewInit(){}emettiChiusura(i){this.idPopUp?this.popUpService.destroyCurrentOpenPopUpByGuid(this.idPopUp):this.popUpService.destroyCurrentOpenPopUp(this.componentName),this.popUpService.destroyOutputComponent()}};e.\u0275fac=function(r){return new(r||e)(ye(Ga))},e.\u0275cmp=Fe({type:e,selectors:[["app-modal-popup-content"]],viewQuery:function(r,o){if(r&1&&Fs(W3,7,Un),r&2){let s;mo(s=go())&&(o.containerComponent=s.first)}},inputs:{infoPopUp:"infoPopUp",index:"index",componentName:"componentName",classePopup:"classePopup"},outputs:{outputEmit:"outputEmit"},standalone:!0,features:[ni,Ve],decls:6,vars:16,consts:[["containerComponent",""],["tabindex","-1","role","dialog","aria-hidden","true",1,"modal","popup",3,"ngStyle","ngClass","id"],[1,"modal-dialog","formEditPopup",3,"id","ngStyle"],[3,"caption","isClosable","cssClass","help","emettiChiusura",4,"ngIf"],[1,"modal-content"],[3,"isFooter","emettiChiusura",4,"ngIf"],[3,"emettiChiusura","caption","isClosable","cssClass","help"],[3,"emettiChiusura","isFooter"]],template:function(r,o){r&1&&(N(0,"div",1)(1,"div",2),He(2,Y3,1,4,"app-caption",3),se(3,"div",4,0),He(5,J3,1,1,"app-caption",5),P()()),r&2&&(pe("ngStyle",Qd(8,q3,o.isPanelVisible?"block":"none",o.zIndexModalDialog))("ngClass",C_(11,K3,o.position=="bottom"))("ngClass",o.classFade)("id",o.idPopUp),Z(),pe("id",o.idPopUp)("ngStyle",Qd(13,Q3,o.popUpWidth?o.popUpWidth:"",o.popUpWidth?o.popUpWidth:"")),Z(),pe("ngIf",o.showCaptionHeader),Z(3),pe("ngIf",o.showCaptionFooter))},dependencies:[xh,It,Ls,pr,mI],styles:[".popup{z-index:500;pointer-events:auto;background-color:#fffc}  .popup .modal-dialog{max-width:90%;border:1px solid var(--primary);background:#fff;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px #0000002d;border-radius:4px;pointer-events:auto;width:fit-content}  .popup .modal-dialog .caption-container.modal{border:1px solid var(--border_color)}  .popup .modal-dialog .modal-content{border:none;box-sizing:border-box;background:transparent}  .popup .modal-dialog .modal-content .formEdit{background:var(--bg-grey)}  .position-bottom .modal-dialog{z-index:501;bottom:2rem;left:0;right:0;position:fixed;max-width:96%;background:transparent}.fade-in-fwd[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fade-in-fwd .4s cubic-bezier(.39,.575,.565,1) both;animation:_ngcontent-%COMP%_fade-in-fwd .4s cubic-bezier(.39,.575,.565,1) both}@-webkit-keyframes _ngcontent-%COMP%_fade-in-fwd{0%{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@keyframes _ngcontent-%COMP%_fade-in-fwd{0%{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}.fade-out-bck[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fade-out-bck .7s cubic-bezier(.25,.46,.45,.94) both;animation:_ngcontent-%COMP%_fade-out-bck .7s cubic-bezier(.25,.46,.45,.94) both}@keyframes _ngcontent-%COMP%_fade-out-bck{0%{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}to{-webkit-transform:translateZ(-80px);transform:translateZ(-80px);opacity:0}}.slide-center[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_slide-center-fw .7s cubic-bezier(.25,.46,.45,.94) none;animation:_ngcontent-%COMP%_slide-center-fw .7s cubic-bezier(.25,.46,.45,.94) none}@keyframes _ngcontent-%COMP%_slide-center-fw{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}to{-webkit-transform:translateZ(160px);transform:translateZ(160px)}}  .modal-content .modal-data-grid-wrapper{margin:auto}"]});let t=e;return t})();function Z3(t,e){if(t&1&&(N(0,"div"),se(1,"app-modal-popup-content",2),P()),t&2){let n=e.$implicit,i=e.index,r=he();Z(),pe("infoPopUp",n)("index",i)("componentName",n.componentName)("classePopup",r.classe)}}var rR=(()=>{let e=class e{constructor(){this.popups=[],this.classSlideCenter="slide-center",this.classFadeIn="fade-in-fwd",this.popUpService=L(Ga)}ngOnInit(){this.popUpService.popupsSet.subscribe(i=>{i.forEach((r,o)=>{r.action=="added"&&(r.action="setted",r.class=this.classSlideCenter,this.popups.push(r)),r.action=="update"&&(r.action="setted",r.class="fade-out-bck",this.popups.splice(o,1),r.class=this.classSlideCenter,setTimeout(()=>{this.popups.push(r)},500)),r.action=="remove"&&(r.class="fade-out-bck",setTimeout(()=>{this.popups.splice(o,1)},300))})})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["app-modal-popup-wrapper"]],standalone:!0,features:[Ve],decls:2,vars:1,consts:[[1,"row"],[4,"ngFor","ngForOf"],[3,"infoPopUp","index","componentName","classePopup"]],template:function(r,o){r&1&&(N(0,"div",0),He(1,Z3,2,4,"div",1),P()),r&2&&(Z(),pe("ngForOf",o.popups))},dependencies:[It,ii,iR]});let t=e;return t})();var oR=(()=>{let e=class e{constructor(){this.isClose=!1,this.isLogin=!1,this.idTipoUtente=-1,this.subMenu=null,this.showSubMenu=!1}ngOnInit(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["app-container"]],standalone:!0,features:[Ve],decls:8,vars:0,consts:[[1,"nica-container"],["id","horizontalMenucontainer",1,"horizontalMenucontainer"],[1,"container","no-padding"]],template:function(r,o){r&1&&(N(0,"main",0),zd(1),se(2,"app-header")(3,"div",1),Wd(),N(4,"div",2),se(5,"router-outlet")(6,"app-modal-popup-wrapper"),P(),se(7,"app-footer"),P())},dependencies:[It,Iy,tR,nR,rR],styles:[".horizontalMenucontainer[_ngcontent-%COMP%]{margin:auto;height:var(--height_menuFunzioni)}.container[_ngcontent-%COMP%], .horizontalMenucontainer[_ngcontent-%COMP%]{max-width:var(--width_container)}"]});let t=e;return t})();var sR=(()=>{let e=class e{constructor(){this.title="Admin"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["app-root"]],standalone:!0,features:[Ve],decls:1,vars:0,template:function(r,o){r&1&&se(0,"app-container")},dependencies:[oR]});let t=e;return t})();kI(sR,eR).catch(t=>console.error(t));
